<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD/macppc</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD/macppc page">
<meta name="keywords" content="openbsd,ppc,powerpc,mac,macintosh,apple">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2002 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">
<img border="0" alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif">
<p>
<h2><font color="#e00000">macppc</font><hr></h2>

<h3><font color="#0000e0">Supported Hardware:</font></h3>
<p>
Currently only New World machines are supported.
To improve the list below, <b>please</b> mail your dmesg after 
installation to <a href="mailto:dmesg@openbsd.org">dmesg@openbsd.org</a>,
as detailed <a href="faq/faq4.html#4.5">in the FAQ</a>.

<p>
<b>Machines</b>
<ul>
<li>PowerMac G4
<li>PowerMac Dual G4
<li>PowerMac G4 Cube
<li>iMac Rev A
<li>iMac Rev B
<li>iMac Rev C
<li>iMac DV
<li>iMac DV+
<li>PowerBook G3 (FireWire)
<li>PowerBook G4
<li>iBook
<li>StarMax <i>(development in progress)</i>
<li>others... <i>(development in progress)</i>
</ul>

<p>
<b>Onboard I/O modules</b> (obio)
<ul>
<li>Apple Paddington
<li>Apple Keylargo
</ul>

<p>
<b>PCI-Bridges</b> (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pchb&sektion=4">pchb</a>)
<ul>
<li>Apple Uni-North
<li>Apple Uni-North AGP
<li>Apple Uni-North Eth
<li>Motorola MPC106 Host-PCI
</ul>

<p> 
<b>Video Cards</b>
<ul>
<li>ATI Mach64 GP
<li>ATI Mach64 GV
<li>ATI Mach64 128 PK
<li>ATI Mach64 128 VR AGP
<li>ATI Mobility M3
<li>ATI Rage Fury AGP4x
</ul>

<p><b>Ethernet</b>
<ul>
<li>DEC DECchip 21040 (Tulip) (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=de&sektion=4">de</a>) Multiport versions of these cards are not supported on macppc.
<li>DEC DECchip 21143 (Tulip clones) (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&sektion=4">dc</a>) Multiport versions of these cards are not supported on macppc.
<li>Apple iMac Rev. A-C Ethernet (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bm&sektion=4&arch=powerpc">bm</a>)
<li>Apple GMAC (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gm&sektion=4&arch=powerpc">gm</a>)
</ul>
 
<b>Wireless Ethernet Adapters</b><p>
<ul>
<li>Aironet 802.11DS PCMCIA and PCI (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=an&sektion=4">an</a>)
<li>WaveLAN 802.11DS PCMCIA (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&sektion=4">wi</a>)
</ul>
<p>
    
<p><b>SCSI Host Adapters</b>
<ul>
<li>Symbios Logic 53c810, 53c825 (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=siop&sektion=4">siop</a>)
</ul>

<p><b>RAID Controllers</b>
<ul>
<li>Adaptec SCSI RAID (<a href="http://www.intelligent-io.com/">I2O</a>) controllers (ASR-2100S, ASR-3200S, etc.) (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iop&sektion=4">iop</a>)
</ul>

<p><b>Drives</b>
<ul>
<li>All IDE devices supported on the <a href="i386.html">i386</a>.
<li>All ATAPI drives supported on the <a href="i386.html">i386</a>.
<li>All SCSI drives supported on the <a href="i386.html">i386</a>.
</ul>

<p><b>USB Controllers/Hubs</b>
<ul>
<li>Apple USB (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ohci&sektion=4">ohci</a>)
<li>OHCI root hub (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ohci&sektion=4">ohci</a>)
<li>Opti RM861HA (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ohci&sektion=4">ohci</a>)
<li>Alps Electric Hub in Apple USB Keyboard
</ul>
 
<p><b>USB Devices</b>
<ul>
<li>Alps Electric Apple USB Keyboard (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ukbd&sektion=4">ukbd</a>)
<li>Solid Year Keyboard and Mouse (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ukbd&sektion=4">ukbd</a>) (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ums&sektion=4">ums</a>)
<li>Logitech M4848 (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ums&sektion=4">ums</a>)
<li>Kensington Kensington USB/PS2 Wheel Mouse (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ums&sektion=4">ums</a>)
<li>USB Zip Drives (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=umass&sektion=4">umass</a>)
</ul> 

<p><b>Cryptography Devices</b>
<ul>
<li>Hifn 7751/7811/7951 (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hifn&sektion=4">hifn</a>)
<li>Bluesteelnet 5501/5601, Broadcom 5805/5820/5821 (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ubsec&sektion=4">ubsec</a>)
</ul>

<hr>
<p>
<a name="#unsup"><h3><font color=#0000e0>Unsupported Hardware:</font></h3></a>
<ul>
<li>
Apple PowerMac systems with a 601 processor or lack OpenFirmware
will likely never be supported. 
<li> 
At the current time, older OpenFirmware machines are not supported.
This is mostly due to lack of developer resources to work on the support
in addition to limited availability of hardware.
<li>On the device side, the following are recognized, but not supported:
<ul>
<li>Texas Instruments TSB12LV23 FireWire
</ul>
<ul>
Built-in modems on most machines are not supported. imac/G4 tower/older
PowerBook has support for the serial port which the modem is connected,
but the modem is not enabled.  USB modems on newer PowerBooks are not supported.
</ul> 
</ul>

<h3><font color="#0000e0">Shared HFS disks:</font></h3>
<p>
It is possible to share a disk between MacOS (OS X?) and OpenBSD.
MacOS must be installed first, and an Unused partition or other free
partition can then be used to install OpenBSD.
If a shared disk is to be used and be bootable, the bootloader "ofwboot"
must be copied onto the first HFS partition.
It is unknown if Openfirmware can load the OpenBSD bootloader from the
MacOS X FFS partition.
See INSTALL.macppc for more details on how to install a shared disk.

<h3><font color="#0000e0">Root Drive:</font></h3>
<p>
With multiple drives installed in the system, only certain drives can
be configured as an OpenBSD root drive.  Any other configurations than
those below will not be able to properly detect which drive is the root
drive, and so any attempt with either prompt for a root drive, or fail.
<p>
<ul>
<li><tt>ultra0</tt> is always fine to use as an root drive.
<li><tt>ultra1</tt> is fine to use as a root disk (as long as <tt>ultra0</tt> 
is a hard drive, not ATAPI).
<li>If no hard drive is located at <tt>ultra1</tt>, it is possible to use a 
hard drive configured as <tt>ide1</tt> (zip bay) as root drive. 
<li>It is not possible to use <tt>ide0</tt> (CD-ROM) as a root drive unless 
no drives are connected to the Ultra IDE bus.
</ul>

<h3><font color="#0000e0">X Resolution:</font></h3>
<p>
The current X server has no mechanism to change the resolution
of the display. To change the resolution, it is necessary to boot MacOS
and change to the desired resolution under MacOS. It will save that
resolution and OpenFirmware will boot in that resolution until connected
to a different monitor. The X server will run in whatever resolution
OpenFirmware boots in.

<hr>
<p>If you are looking for to test new pre-release features, you can 
try one of the snapshots.
For the macppc architecture, <a href="ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/macppc">snapshots</a> are made available from time to time.

<h3><font color="#0000e0">History:</font></h3>
<p>
The powerpc port was first imported into OpenBSD at the end of 1996.
Portions of the kernel came from the NetBSD/macppc port, and the
userland and build pieces came from
<a href="mailto:drahn@openbsd.org">Dale Rahn</a>.

<p>
Dale added ELF binary support, and then work with Per Fogelstrom
continued on general driver support for the next few releases.
Support was added for OpenFirmware, VI Power4e boards, MCG Powerstack
machines, DEC 21040, VGA terminal support, and so on.

<p>
In 1998, the focus shifted towards the Apple machines, and Dale Rahn
started work to make the range of iMacs and PowerMacs work with this port.
Due to this, official powerpc releases were not made for the 2.6 and 2.7
releases as work continued.  A number of compiler loader issues were resolved,
iMac driver support was added, and compatibility with older systems
was withdrawn to fully concentrate on the Apple machines.  

<p>
OpenBSD/powerpc 2.8 supported Apple hardware.

<p>
For 2.9, powerpc has moved to UVM, this change has fixed the
corrupted shared library "pmap" bug that was rather pervasive for 2.8.

<p>
For 3.0, the powerpc port has been renamed to macppc.

<p>

<h3><font color="#0000e0">Known Problems</font></h3>
The adb keyboard driver, on the iBook and Titanium PowerBook G4,
has problems such that some keystrokes can cause crashes. This
problem is mostly constrained to multiple keypresses involving the
<code>Fn</code> key. Also note that &lt;CTRL>&lt;CMD>&lt;POWER> will
reset the machine.
</p>
<hr>
<p>
Contact
<a href="mailto:deraadt@openbsd.org">Theo de Raadt</a> or
<a href="mailto:drahn@openbsd.org">Dale Rahn</a> 
if you are interested in working with other people on this, or need more
information.
</p>

<p>
A mailing list for users and developers exists at
<a href="mailto:ppc@openbsd.org">ppc@openbsd.org</a>.
To join the OpenBSD/macppc mailing list, send a message body of <b>"subscribe
ppc"</b> to <a href="mailto:majordomo@OpenBSD.org">majordomo@OpenBSD.org</a>.
Please be sure to check our <a href="mail.html">mailing list policy</a> before
subscribing.
</p>

<hr>
<a href="plat.html"><img height="24" width="24" src="back.gif" border="0" alt="[OpenBSD]"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: macppc.html,v 1.10 2002/02/28 15:37:50 drahn Exp $</small>

</body>
</html>
