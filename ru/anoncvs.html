<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<title>OpenBSD AnonCVS</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="How to get OpenBSD updates via Internet using Anonymous CVS">
<meta name="keywords" content="openbsd,anoncvs,updates">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2002 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">Анонимный CVS</font></h2>

<hr>

<h3>Оглавление</h3>

<ul>
<li><a href="#anoncvs">Что такое анонимный CVS?</a>
<li><a href="#CVS">Что такое CVS?</a>
<li><a href="#starting">Начинаем работу с анонимным CVS</a>
<li><a href="#using">Использование CVS для получения и обновления исходных текстов</a>
<li><a href="#CVSROOT">Доступные анонимные CVS сервера</a>
<li><a href="#CRYPTO">Получение исходных текстов криптографического ПО через cvs(1)</a>
<li><a href="#EXAMPLE">Примеры использования cvs(1)</a>
<li><a href="#WHICH">Использовать rsh(1) или ssh(1)?</a>
<li><a href="#SUP">Зеркалируем CVS репозиторий используя sup(1)</a>
<li><a href="#MIRROR">Устанавливаем зеркало анонимного cvs</a>
</ul>

<hr>

<h3><a name="anoncvs"><font color="#0000e0">Что такое анонимный CVS?</font></a></h3>

<p>
Анонимный CVS - это метод хранения вашей локальной копии дерева исходных
текстов OpenBSD в обновлённом состоянии, относительно изменений сделанных в
OpenBSD current. Кроме того, возможно отслеживать исправления к ошибкам,
допущенным в релизе.
</p>

<p>
Основное отличие анонимного CVS от других способов обновлять исходной текст,
в том, что он работает напрямую с центральным репозиторием исходных текстов
или его зеркалом. Это означает, что вы имеете полный набор CVS команд для
обновления и объединения ваших изменений с другими изменениями и для
осуществления diff'ов, просмотра истории изменений и других запросов.
</p> 

<p>
В настоящее время проект OpenBSD имеет пять основных репозитория:
</p>

<ul>
  <li><b>src</b> - содержит весь исходный текст OpenBSD.</li>
  <li><b>ports</b> - содержит <a href="./ports.html">порты OpenBSD</a>.</li>
  <li><b>www</b> - содержит веб страницы OpenBSD (включая и эту).</li>
  <li><b>X11</b> - содержит адаптированное для OpenBSD программное обеспечение
      <a href="http://www.XFree86.org/">XFree86-3</a>.</li>
  <li><b>XF4</b> - содержит адаптированное для OpenBSD программное обеспечение
      <a href="http://www.XFree86.org/">XFree86-4</a>.</li>
</ul>

<!--
<p>
To summarize, the real strength of using Anonymous CVS is that it is
a "tolerant" source code control system - it <strong>respects</strong>
changes that you have made to your local sources and makes <strong>
"best efforts"</strong> to update your entire source tree, rather than
leaving you a list of arcane problems that have to be resolved before
continuing.
</p>
-->

<h3><a name="CVS"><font color="#0000e0">Что такое CVS?</font></a></h3>

<p>
<a href="why-cvs.html">
CVS - это система контроля исходного кода для управления деревом исходных
текстов OpenBSD</a>. CVS осуществляет центральный репозиторий (склад) для всего
исходного кода, и его изменений, позволяет разработчикам содержать локальные
копии исходного кода вместе с их работающими изменениями. Разработчики имеющие
"<b>право на запись</b>" могут вносить изменения непосредственно в дереве
исходных текстов OpenBSD, тогда как пользователи анонимного CVS имеют
"<b>доступ только для чтения</b>" и могут хранить свои локальные копии дерева
исходных текстов в обновлённом состоянии и осуществлять запросы к центральному
репозиторию.
</p>

<p>
Основное достоинство CVS - это способность выполнять разумное слияние изменений
в центральном репозитории с изменениями, которые вы внесли в вашу локальную
копию. Это значит что, если вы внесли изменения в какой-нибудь модуль и
выполните обновление, ваши изменения не отбросятся, вместо этого CVS попытается
объединить изменения в центральном репозитории с вашими изменениями в локальной
копии.
</p>

<p>
Когда изменения не могут быть полностью объединены, CVS обеспечивает "мягкий
откат", предоставляя сделать это вам, комментируя изменения в вашей локальной
копии, сохраняя резервную копию вашей версии и продолжая обновлять любые
другие исходные модули, которые вы запросили.
</p>

<h3><a name="starting"><font color="#0000e0">Начинаем работу с анонимным
CVS</font></a></h3>

<p>
Последняя версия CVS доступна на
<a href="http://www.cvshome.org/">Cyclic</a>.
Версии ранее, чем 1.6 не рекомендуются, и могут не работать.
CVS включён в состав OpenBSD.
</p>

<p>
Владельцы CD диска с OpenBSD, возможно, видели <i>CVS/</i> директории на нем.
CD диск содержит извлечённый модуль OpenBSD <b>src</b>, который удобно 
использовать для продолжения обновления исходных текстов. Используя это дерево
исходных текстов, обновление будет проходить значительно быстрее, нежели
извлечение полного дерева исходных текстов. Есть два способа использовать
этот CD:
</p>

<ul>
<li>Скопировать CVS дерево с CD в <i>/usr/src</i> (предполагается CD
примонтирован к /mnt): 
<pre>
	# <b>cd /mnt; pax -rw CVS Makefile [a-z]* /usr/src</b>
</pre>
<li>Использовать объединённое монтирование (см. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_union&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">mount_union(8)</a>)
CD ниже директории доступной для записи. (Это может быть использовано только
для компилирования исходных текстов.)
<pre>
	# <b>mount -t union -o -b /mnt /usr/src</b>
</pre>
</ul>

<p>
У кого нет CD, могут использовать <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">cvs(1)</a>
для получения дерева исходных текстов с сетевого репозитория. Подробно об
этом говорится в <a href="#using">следующей главе</a>.
</p>

<p>
После этого, в <i>/usr/src</i> должны будут работать все <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">
cvs(1)</a> команды.
</p>

<h3><a name="using"><font color="#0000e0">Использование CVS для получения и
обновления исходных текстов</font></a></h3>

<p>
CVS был разработан, чтобы предоставить лёгкий в использовании способ для
получения и обновления исходных текстов. Для начала, вы должны решить, хотите
вы следить за <i>current</i> или за веткой исправлений. Current содержит все,
до минутных изменений, тогда как ветка исправлений содержит официальный релиз
OpenBSD с добавленными исправлениями из <a href="../errata.html">errata</a>.
За более подробным объяснением, что из себя представляет ветка <i>current</i>,
смотрите <a href="../faq/upgrade-minifaq.html#1.1">Мини-FAQ по Обновлению</a>.

<p>Теперь вы должны выбрать, какой анонимный CVS сервер использовать. Список
доступных серверов приведён <a href="#CVSROOT">ниже</a>. Имеется 3 способа
доступа к этим серверам.
</p>

<dl>
<dt><b>ssh</b><dd>Secure Shell может использоваться, для доступа к анонимным
CVS серверам. Мы <em>рекомендуем</em> этот способ, так как он использует
шифрованный канал для передачи данных. Начиная с версии 2.6 OpenSSH включён
в поставку OpenBSD.
<dt><b>rsh</b><dd>Remote Shell может использоваться на некоторых CVS серверах
для пользователей, которые не имеют доступ к
<a href="http://www.openssh.com">ssh</a>.
<dt><b>pserver</b><dd>pserver полезен, когда использование других способов
доступа неосуществимо (например, из-за файерволла).
</dl>

<p>
<b>ОБРАТИТЕ ВНИМАНИЕ:</b> Пользователи, желающие использовать rsh должны
установить переменную окружения <var>CVS_RSH</var>.

<ul>
<li>Для Korn/Bourne оболочек:
<pre>
	$ <b>export CVS_RSH=/usr/bin/rsh</b>
</pre>
<li>Для csh/tcsh:
<pre>
	% <b>setenv CVS_RSH /usr/bin/rsh</b>
</pre>
</ul>

<p>
Как только вы определились, какой <a href="#CVSROOT">CVS сервер</a> и способ
доступа к нему использовать, вы готовы начать работу с cvs. Для тех, у кого CD
с OpenBSD могут использовать находящиеся на нем исходные тексты, как описано
<a href="#starting">выше</a>. Если же у вас нет CD, используйте нижеприведённый
способ для получения исходных текстов. После чего <i>/usr/src</i> будет
содержать дерево исходных текстов.
</p>

<pre>
	# <b>cd /usr; cvs checkout -P src</b>
</pre>

<p>
Вышесказанное извлечёт дерево исходных текстов <i>current</i>. Чтобы получить
исходные тексты ветви исправлений, вы должны указать тег в вашей команде.
Например: 
</p>

<pre>
	# <b>cd /usr; cvs checkout -P -rOPENBSD_2_9 src</b>
</pre>
<p>
Или OPENBSD_2_8 для 2.8, и т.д.

<p>В настоящее время только тег OPENBSD_2_9 содержит релиз исходных текстов
с добавленными исправлениями.

<h3><a name="CVSROOT"><font color="#0000e0">Доступные анонимные CVS сервера
</font></a></h3>

<p>
Существует два уровня доступа к дереву исходных текстов:

<dl>

<dt><strong>Доступ для чтения и записи:</strong>
<dd>Разработчики, которые должны вносить изменения в дерево исходных текстов,
должны иметь аккоунт на CVS сервере OpenBSD. Получение этого доступа
естественный результат работы над исходными текстами OpenBSD совместно с
разработчиками. Если кто-то сделал хорошую работу и показал, что может
работать в команде, он получит аккоунт.
</dl>

<dl>
<dt><strong>Доступ только для чтения:</strong>
<dd>Любой пользователь может обращаться к CVS репозиторию с доступом только для
чтения. Эти CVS репозитории часто зеркалируются. Чтобы воспользоваться этими
серверами, измените переменную окружения <var>CVSROOT</var> на одно из
следующих значений:
<p>
<em>Пожалуйста, посмотрите главу о <a href="#WHICH">ssh и rsh</a> ниже!</em>
<p>
<!-- ANONCVS::START -->
<ul>
<li><strong>CVSROOT=anoncvs@anoncvs1.usa.openbsd.org:/cvs</strong><br>
Также известен как <strong>anoncvs@anoncvs4.usa.openbsd.org</strong>.<br>
Расположение: Redwood City, California, западный США.<br>
Сервер поддерживает(ют): <a href="mailto:millert@openbsd.org">Todd Miller</a>.<br>
Протоколы: rsh, ssh, ssh порт 2022, pserver.<br>
Обновляется каждые 4 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.usa.openbsd.org:/cvs</strong><br>
Также известен как <strong>anoncvs3.usa.openbsd.org</strong>.<br>
Расположение: University of Colorado, Boulder, западный США.<br>
Сервер поддерживает(ют): <a href="mailto:millert@openbsd.org">Todd Miller</a>.<br>
Протоколы: rsh, ssh, ssh порт 2022, pserver.<br>
Обновляется каждые 3 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs5.usa.openbsd.org:/cvs</strong><br>
Также известен как <strong>squid.nas.nasa.gov</strong>.<br>
Расположение: Ames Research Center, Moffett Field, California, США.<br>
Сервер поддерживает(ют): <a href="mailto:allison@mail.arc.nasa.gov">Tyler Allison</a>.<br>
Протоколы: только ssh.<br>
Обновляется каждые 3 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@mirror.arc.nasa.gov:/cvs</strong><br>
Расположение: Ames Research Center, Moffett Field, California, США.<br>
Сервер поддерживает(ют): <a href="mailto:allison@mail.arc.nasa.gov">Tyler Allison</a>.<br>
Протоколы: только ssh.<br>
Обновляется каждые 3 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs6.usa.openbsd.org:/cvs</strong><br>
Также известен как <strong>openbsd.citi.umich.edu</strong>.<br>
Расположение: University of Michigan, центральный США.<br>
Сервер поддерживает(ют): <a href="mailto:rees@umich.edu">Jim Rees</a>.<br>
Протоколы: ssh, ssh порт 2022.<br>
Обновляется каждые 12 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs1.ca.openbsd.org:/cvs</strong><br>
Также известен как <strong>anoncvs.ca.openbsd.org</strong>, 
<strong>openbsd.sunsite.ualberta.ca</strong><br>
Расположение: Edmonton, Alberta, Канада.<br>
Сервер поддерживает(ют): <A HREF="mailto:beck@ualberta.ca">Bob Beck</A>.<br>
Протоколы: ssh, rsh, ssh порт 2022, pserver<br>
Обновляется каждые 2 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.comstyle.com:/cvs</strong><br>
Также известен как <strong>openbsd.comstyle.com</strong><br>
Расположение: Toronto, Ontario, Канада.<br>
Сервер поддерживает(ют): <A HREF="mailto:brad@comstyle.com">Brad Smith</A>.<br>
Протоколы: ssh, ssh порт 2022<br>
Обновляется каждые 2 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.tw.openbsd.org:/cvs</strong><br>
Также известен как <strong>OpenBSD.csie.NCTU.edu.tw</strong>.<br>
Расположение: Taipei, Tайвань.<br>
Сервер поддерживает(ют): <a href="mailto:lkchu@OpenBSD.csie.NCTU.edu.tw">Liang-Kai Chu</a>.<br>
Протоколы: rsh, ssh, ssh порт 2022.<br>
Обновляется каждые 12 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.no.openbsd.org:/cvs</strong><br>
Также известен как <strong>cvs.inet.no</strong>.<br>
Расположение: Норвегия.<br>
Сервер поддерживает(ют): <a href="mailto:cvsadmin@inet.no">Michael Shuldman</a>.<br>
Протоколы: rsh, ssh, ssh порт 2022.<br>
Обновляется каждые 4 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.se.openbsd.org:/cvs</strong><br>
Также известен как <strong>anoncvs.stacken.kth.se</strong>.<br>
Расположение: Швеция.<br>
Сервер поддерживает(ют): <a href="mailto:anoncvs@stacken.kth.se">Magnus Holmberg</a>.<br>
Протоколы: rsh, ssh, ssh порт 2022.<br>
Обновляется каждые 3 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.be.openbsd.org:/cvs</strong><br>
Также известен как <strong>badlands.rug.ac.be</strong>.<br>
Расположение: Бельгия.<br>
Сервер поддерживает(ют): <a href="mailto:wvdputte@reptile.rug.ac.be">Wim Vandeputte</a>.<br>
Протоколы: ssh, ssh порт 2022.<br>
Обновляется каждые 3 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.nl.openbsd.org:/cvs</strong><br>
Также известен как <strong>anoncvs.calyx.nl</strong>.<br>
Расположение: Amsterdam, Нидерланды.<br>
Сервер поддерживает(ют): <a href="mailto:nick@calyx.net">Nick Merrill</a> и
<a href="mailto:alex@calyx.nl">Alexander Grendel</a>.<br>
Протоколы: ssh.<br>
Обновляется каждые 3 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.jp.openbsd.org:/cvs</strong><br>
Также известен как <strong>kankoromochi.econ.nagasaki-u.ac.jp</strong>.<br>
Расположение: Nagasaki Univ. Faculty of Economics, JAPAN.<br>
Сервер поддерживает(ют): <a href="mailto:sigh@net.nagasaki-u.ac.jp">SUZUKI Hitoshi</a>.<br>
Протоколы: ssh, pserver.<br>
Обновляется каждые 3 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.cz.openbsd.org:/cvs</strong><br>
Также известен как <strong>com-os2.ms.mff.cuni.cz</strong>.<br>
Расположение: Faculty Math &amp; Physics, Charles University, Prague, Czech 
republic.<br>
Сервер поддерживает(ют): <a href="mailto:galambos@com-os2.ms.mff.cuni.cz">Leo Galambos
</a>.<br>
Протоколы: ssh, ssh порт 2022.<br>
Обновляется каждые 3 часа(ов).<br>
<p>
<li><strong>CVSROOT :pserver:anoncvs@cvs.bsdfr.org:/cvs</strong><br>
Расположение: Франция<br>
Сервер поддерживает(ют):: <a href="mailto:jch@oleane.net">Jean-Claude Christophe</a>.<br>
Протоколы: pserver<br>
Обновляется каждые 24 часа(ов) <br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.de.openbsd.org:/cvs</strong><br>
Также известен как <strong>grappa.unix-ag.uni-kl.de</strong>.<br>
Расположение: University of Kaiserslautern, Германия<br>
Сервер поддерживает(ют): <A HREF="mailto:hgw@d1906.inka.de">Hans-G&uuml;nter Weigand</A>
и <A HREF="mailto:naddy@openbsd.org">Christian Weisgerber</A>.<br>
Протоколы: rsh, ssh, ssh порт 2022, pserver<br>
Обновляется каждые 6 часа(ов) с cvsup.leo.org.<br>
<p>
<li><strong>CVSROOT=anoncvs@exokernel.lcs.mit.edu:/cvs</strong><br>
Расположение: M.I.T, восточный США.<br>
Сервер поддерживает(ют): ????<br>
Протоколы: ssh, ???<br>
Обновляется каждые ? часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@xyzzy.gsnig.org:/cvs</strong><br>
Расположение: G&ouml;teborg, Швеция<br>
Сервер поддерживает(ют): <A HREF="mailto:martin@openbsd.org">Martin Fredriksson</A>.<br>
Протоколы: ssh порт 2022<br>
Обновляется каждые 4 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@stl-isaas.ey.com:/cvs</strong><br>
Расположение: St. Louis, MO, восточный США<br>
Сервер поддерживает(ют): <A HREF="mailto:aaron11@sprynet.com">Aaron Miller</A>.<br>
Протоколы: ssh, ssh порт 2022, pserver<br>
Обновляется каждые 3 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@openbsd.groupbsd.org:/cvs</strong><br>
Расположение: Hillsborough NC, восточный США<br>
Сервер поддерживает(ют): <A HREF="mailto:randy@openbsd.org">Randy Lewis</A>
и <A HREF="mailto:jason@openbsd.org">Jason Wright</A>.<br>
Протоколы: ssh, pserver<br>
Обновляется каждые 4 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.mx.openbsd.org:/cvs</strong><br>
Расположение: Campus Iztacala, Universidad Aut&oacute;noma de M&eacute;xico<br>
Сервер поддерживает(ют): <A HREF="mailto:jcortes@openbsd.org.mx">Jorge A. Cort&eacute;s</A>.<br>
Протоколы: ssh<br>
Обновляется каждые 3 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.pl.openbsd.org:/cvs</strong><br>
Также известен как <strong>anoncvs1.pl.openbsd.org</strong>, 
<strong>incredible.bmtmc.gda.pl</strong><br>
Расположение: BMT Maritime Consultants, Gdansk, Польша<br>
Сервер поддерживает(ют): <A HREF="mailto:detergent@incredible.bmtmc.gda.pl">
Adam Naguszewski</A>.<br>
Протоколы: ssh, pserver<br>
Обновляется каждые 3 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@rt.fm:/cvs</strong><br>
Расположение: Lake in the Hills, Illinois, США<br>
Сервер поддерживает(ют): <A HREF="mailto:jcs@rt.fm">
Joshua Stein</A>.<br>
Протоколы: ssh<br>
Обновляется каждые 3 часа(ов).<br>
<P>
<li><strong>CVSROOT=anoncvs@shellhung.org:/cvs</strong><br>
Расположение: Hong Kong, Китай<br>
Сервер поддерживает(ют): <A HREF="mailto:shell@shellhung.org">
Shell Hung</A>.<br>
Протоколы: pserver, ssh<br>
Обновляется каждые 3 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@cvs.openbsd.cz:/cvs</strong><br>
Расположение: Prague, Чешская Республика<br>
Сервер поддерживает(ют): <A HREF="mailto:vladya@openbsd.cz">Vladimir Kotal</A>.<br>
Протоколы: ssh, pserver.<br>
Обновляется каждые 4 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.openbsd.org.ua:/cvs</strong><br>
Расположение: Kiev, Украина<br>
Сервер поддерживает(ют): <A HREF="mailto:hunter@dg.net.ua">Sergey Smitienko</A>.<br>
Протоколы: ssh<br>
Обновляется каждые 6 часа(ов).<br>
<p>
<li><strong>CVSROOT=openbsd@openbsd.bug.it:/cvs</strong><br>
Расположение: Modena, Италия<br>
Сервер поддерживает(ют): <A HREF="mailto:jwk@bug.it">Giacomo Cariello</A>.<br>
Протоколы: ssh, password "openbsd"<br>
Обновляется каждые 6 часа(ов).<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.openbsd.lt:/cvs</strong><br>
Также известен как <strong>anoncvs.studentas.lt</strong><br>
Расположение: LITNET NOC, Academical и Research Network, Kaunas, Литва.<br>
Сервер поддерживает(ют): <a href="mailto:helpas@aic.lt">Donatas Budvytis</a>.<br>
Протоколы: ssh<br>
Обновляется каждые 3 часа(ов) с anoncvs.usa.openbsd.org.<br>
</ul>
<!-- ANONCVS::END -->


<p>
<em>Обратите внимание:</em> Если ваш сервер перечислен здесь с неточной или
неполной информацией, пожалуйста, свяжитесь с
<a href="mailto:beck@openbsd.org"><tt>beck@openbsd.org</tt></a>
</p>

<p>
Вы можете использовать <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute&amp;sektion=8&amp;format=html">traceroute(8)</a>,
чтобы определить какой сервер находится ближе к вам. При возникновении проблем
с сервером свяжитесь с <b>поддерживающим его персоналом</b>. 
</dl>

<h3><a name="CRYPTO"><font color="#0000e0">Получение исходных текстов
криптографического ПО через cvs(1)</font></a></h3>

<p>
<strong>ВАЖНОЕ ПРИМЕЧАНИЕ:</strong>
Имеется несколько ограничений, касающихся криптографического программного
обеспечения, которые вы должны знать: 
<ul>
<li>Родина OpenBSD - Канада. Согласно
<a href="http://insight.mcmaster.ca/org/efc/pages/doc/crypto-export.html">
исследованиям</a>, проведённым гражданином Канады, и как значится в
<a href="http://axion.physics.ubc.ca/ECL.html">
списке контроля над экспортом Канады</a>, экспортировать криптографическое
ПО в остальной мир РАЗРЕШЕНО. 
<p>
<li>Тем не менее, если вы находитесь вне США или Канады, вы не должны
использовать криптографические части OpenBSD с анонимных CVS серверов
расположенных в США. Рассматриваемые файлы... 
<ul>
<li>src/kerberosIV/*
<li>src/kerberosV/*
<li>src/lib/libdes/*
<li>src/lib/libc/crypt/crypt.c
<li>src/lib/libc/crypt/morecrypt.c
<li>src/sys/crypto
<li>src/sys/netinet
<li>src/usr.sbin/afs/src/rxkad/*
<li>XF4/xc-mit/lib/Xdmcp/Wraphelp.c
<li>XF4/xc-old/lib/Xdmcp/Wraphelp.c
<li>XF4/xc/lib/Xdmcp/Wraphelp.c
</ul>
По законам США ITAR криптографическое ПО может экспортироваться только в Канаду.
<p>
<li>Проект OpenBSD ищет дополнительные анонимные CVS сервера -- читайте далее,
чтобы узнать как вы можете помочь.
</ul>

<h3><a name="EXAMPLE"><font color="#0000e0">Примеры использования cvs(1)</font>
</a></h3>

<P>
Предупреждение: Если вы хотите обновить ветку (например ветку исправлений)
до <i>current</i>, вам необходимо добавить флаг <code>-A</code>. В старых
версиях документации OpenBSD мы использовали этот флаг во многих примерах.
Теперь мы рекомендуем использовать этот флаг только при крайней необходимости.

<p>
Примеры использования анонимного CVS:
<pre>
% <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
% <strong>cd /tmp</strong>
% <strong>cvs get src/sys/arch/sparc</strong>
    [копирует файлы с репозитория на вашу машину]
% <strong>cvs log src/sys/arch/sparc/sparc/locore.s</strong>
    [показывает регистрационную информацию для заданного файла]
% <strong>cvs diff -bc -r1.1 -r1.5 src/sys/arch/sparc/sparc/locore.s</strong>
    [показывает изменения файла между ревизиями 1.1 и 1.5]
</pre>

<p>
<a name="pserver">Чтобы подключится к серверу используя ''pserver''
(прямое TCP соединение вместо ssh или rsh) пользователь должен
зарегистрироваться:</a>

<pre>
% <strong>setenv CVSROOT :pserver:anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
% <strong>cvs login</strong>
(Logging in to anoncvs@anoncvs1.ca.openbsd.org)
CVS password: <strong>anoncvs</strong>
    [ При регистрации на сервере проверяется пароль, который затем ]
    [ сохраняется в файле ~/.cvspass (можно переназначить с        ]
    [ помощью переменной окружения CVS_PASSFILE) для дальнейшего   ]
    [ общения с сервером. Для примера, содержимое ~/.cvspass при   ]
    [ использовании пароля 'blah':                                 ]
    [ :pserver:anoncvs@anoncvs5.usa.openbsd.org:/cvs Au'yc         ]
    [ После регистрации вы можете заставить CVS соединяться        ]
    [ напрямую с сервером, используя при этом сохраненный пароль.  ]
% <strong>cvs get ksrc-i386 ksrc-common</strong>
    [ позволяет вам запросить файлы необходимое для компиляции ядра на i386 ]
</pre>

<p>
Здесь приведён пример использования анонимного CVS для регулярного
обновления дерева исходных текстов:
<ul><li>Для начала, возьмём полное дерево исходных текстов:

<p> (Если вы следуете за <i>current</i>):
<pre>
	# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
	# <strong>cd /usr</strong>
	# <strong>cvs -q get -P src</strong>
</pre>

<p> (Если вы следуете за веткой исправлений для 2.9):
<pre>
	# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
	# <strong>cd /usr</strong>
	# <strong>cvs -q get -rOPENBSD_2_9 -P src</strong>
</pre>
</li>

<li> И потом, в любое время, `обновим' это дерево:
<p> (Если вы следуете за <i>current</i>):
<pre>
	# <strong>cd /usr/src</strong>
	# <strong>cvs -q up -Pd</strong>
</pre>

<p> (Если вы следуете за веткой исправлений для 2.9):
<pre>
	# <strong>cd /usr/src</strong>
	# <strong>cvs -q up -rOPENBSD_2_9 -Pd</strong>
</pre>

Каждый раз при запуске этих команд, CVS будет синхронизировать ваше /usr/src
дерево. Ваши локальные изменения исходного текста не будут уничтожены, они
сольются с другими изменениями. Если вы используете obj директории (не
символические ссылки) вы можете добавить "-I obj" к команде запуска cvs, это
задаст cvs не выводить предупреждения обо всех встречающихся obj директориях
которых нет в репозитории.

<p>
<li> ПРИМЕЧАНИЕ: Если вы обновляете дерево исходных текстов, которое вы
получили с другого сервера или с CD, вы <strong>должны</strong> добавить
опцию <em>-d $CVSROOT</em> к команде запуска cvs.
<pre>
	# <strong>cd /usr/src</strong>
	# <strong>cvs -d $CVSROOT -q up -Pd</strong>
</pre>
</li>
</ul>

<p>
<a name="ports">Использование</a> <a href=ports.html>портов</a>, аналогично
src:<ul><li>
<p> (Если вы следуете за <i>current</i>):
<pre>
	# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
	# <strong>cd /usr</strong>
	# <strong>cvs -q get -P ports</strong>
</pre>
<p> (Если вы следуете за веткой исправлений для 2.9):
<pre>
	# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
	# <strong>cd /usr</strong>
	# <strong>cvs -q get -rOPENBSD_2_9 -P ports</strong>
</pre>
</li>
<li>Позднее, в любое время `обновим' это дерево:
<p> (Если вы следуете за <i>current</i>):
<pre>
	# <strong>cd /usr</strong>
	# <strong>cvs -q up -Pd ports</strong>
</pre>
<p> (Если вы следуете за веткой исправлений для 2.9):
<pre>
	# <strong>cd /usr</strong>
	# <strong>cvs -q up -rOPENBSD_2_9 ports</strong>
</pre>
</li>
</ul>

В приведённом примере, используется необязательный флаг <i>-q</i>, он необходим
для того, чтобы уменьшить вывод команды cvs. Вы можете опустить его.

<p>
создадим diff локально исправленного модуля (здесь <i>cd.c</i>) для
включения в отчёт об ошибке:
<pre>
	# <strong>cd /usr</strong>
	# <strong>cvs diff -u src/sys/scsi/cd.c &gt; /tmp/patch</strong>
</pre>

<p>
На странице руководства <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">cvs(1)</a>
(поставляется с исходными текстами CVS) вы найдёте гораздо больше информации о
CVS и возможностях его использования.

<h4>Дерево исходных текстов X11</h4>

<p>
Зеркала анонимного CVS также содержат исходные тексты OpenBSD X11 (XFree86).
Вы можете использовать приведенный выше способ для обновления исходных
текстов XFree86 с третьего CD. В CVS исходные тексты XFree86 3 находятся в
модуле X11, а XFree86 4 в XF4.
Два способа копирования исходных текстов в <i>/usr/XF4</i>:

<ul>
<li>копирование дерева с CD (предполагается 3й CD примонтирован к /mnt): 
<pre>
	# <strong>cd /mnt; cp -Rp XF4 /usr</strong>
</pre>
<li>объединённое монтирование CD ниже директории доступной для записи:
<pre>
	# <strong>mount -t union -o -b /mnt/XF4 /usr/XF4</strong>
</pre>
</ul>

После этого, <i>/usr/XF4</i> готово к использованию cvs. Вы можете обновить
исходные тексты до текущей версии (предполагается вы уже установили переменную
окружения <var>CVSROOT</var>):

<pre>
	# <strong>cd /usr/XF4</strong>
	# <strong>cvs -q update -Pd</strong>
</pre>

<!--
<p>
<strong>Warning:</strong>
When using cvs you should take care that your current directory is either
the root of the tree you are referencing or in a separate place such as /tmp.
Some commands such as "get" can create an arbitrary sub-tree in the current
directory, and a subsequent update will recursively flesh out this sub-tree.
-->

<p>
Сервис анонимного CVS даёт неопытным разработчикам возможность для изучения
CVS команд и позволяет прочувствовать процесс разработки перед тем, как они
получат доступ "для разработчиков" -- как результата демонстрации полезных
навыков и высококачественных результатов. Люди создающие исправления, могут
создавать diff'ы относительно дерева CVS, чтобы упростить интеграцию.

<h3><a name="WHICH"><font color="#0000e0">Использовать rsh(1) или ssh(1)?</font>
</a></h3>

<p>
По умолчанию, CVS клиент использует ssh ("secure shell":
<a href="http://www.openssh.com/">OpenSSH</a>) для работы с CVS сервером.

<p>
Большинство CVS серверов больше не поддерживают rsh по соображениям
безопасности или из-за локальных проблем, например файерволла или
несовершенства эмулятора протокола slirp. Однако, если вы хотите
использовать rsh, установите переменную окружения <var>CVS_RSH</var>
указывающею на rsh (обычно <strong>/usr/bin/rsh</strong>).

<p>Если по каким-то причинам вы не можете соединится со стандартным для
ssh портом 22, воспользуйтесь портом 2022, но не все сервера поддерживают
ssh соединение на этот порт. Так же, большинство анонимных CVS серверов
больше не принимают шифрование <strong>none</strong>, поскольку оно не
используется в последних версиях ssh по соображениям безопасности. Не
включайте программное сжатие данных т.к. CVS уже сжимает эти данные.

<p>
Пример файла конфигурации <strong>$HOME/.ssh/config</strong>,
чтобы избежать ловушек и ограничений, упомянутых выше:
<pre>
	Host anoncvs.ca.openbsd.org
	    Compression no
	    Port 2022
</pre>

<p>
При запуске, CVS будет немного шуметь; чтобы заставить его замолчать можете
проделать следующее:

<pre>
	<strong>% setenv CVS_CLIENT_PORT -1</strong>
</pre>

<p>
<h3><a name="SUP"><font color="#0000e0">Зеркалируем CVS репозиторий используя
sup(1)</font></a></h3>

<p>
Пользователи, желающие зеркалировать OpenBSD CVS дерево, могут сделать это с
<em>anoncvs.usa.openbsd.org</em> или <em>anoncvs1.usa.openbsd.org</em>
(это разные машины). Обратите внимание, что это CVS дерево, а <b>не</b>
извлечённое дерево исходных текстов. Это полезно, если вы хотите производить
быстрые cvs операции (diff, annotate и т.д) или если у вас имеется множество
деревьев исходных текстов и вы только хотите переслать новые данные один раз
(и затем обновлять деревья с вашего локального зеркала cvs).
<p>
Пример supfile'а:
<pre>
	cvs host=anoncvs.usa.openbsd.org hostbase=/ base=/home delete
</pre>
<p>
который заставит зеркалировать CVS дерево в /home/cvs вместе с файлами данных
sup в /home/sup. Полное OpenBSD cvs дерево около 1.3 гигабайта в размере.

<h3><a name="MIRROR"><font color="#0000e0">Устанавливаем зеркало анонимного
cvs</font></a></h3>

<p>
Если вы желаете создать новое зеркало анонимного CVS, свяжитесь с
<a href="mailto:sup@openbsd.org">администратором анонимного CVS</a>.
Зеркала анонимного CVS требуют около 1.2GB дискового пространства, и
используют примерно 32MB свопа на одного пользователя (предполагается,
что пользователь делает крупные операции; соответственно мелкие операции
используют меньше ресурсов, но все равно, воздействие гораздо большее, чем
при sup или ftp). Эти сервера, должны иметь хорошую пропускную способность
сети для области, которую они собираются обслуживать. Подробнее об установке
анонимного CVS сервера <a href=../anoncvs.shar>в этом документе</a>.

<h3><font color="#0000e0">Заключение</font></h3>
После обновления дерева исходных текстов и перед тем как вы попытаетесь
произвести компиляцию, прочитайте комментарии в начале файла
<KBD>/usr/src/Makefile</KBD>. Желательно, чтобы вы откомпилировали и установили
новое ядро <strong>перед</strong> запуском <KBD>make build</KBD>. В некоторых
случаях придётся пересобрать и установить утилиту <KBD>config</KBD>, пред тем
как пересобирать ядро. Если <KBD>config GENERIC</KBD> оканчивается неудачей,
возможно это и есть тот самый случай.
<p>
Обратите внимание, что переход с релиза на текущее дерево, пересборкой исходных
текстов, может быть затруднён из-за зависимостей, которые часто не очевидны.
Поэтому, предпочтительней, если вы сначала установите самый последний снапшот,
и уже потом попытаетесь собрать.

<hr>
<a href="index.html"><img height="24" width="24" src="../back.gif" border="0"
alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: anoncvs.html,v 1.176 ]<br>
$Translation: anoncvs.html,v 1.22 2002/09/15 05:41:38 dfa Exp $<br>
$OpenBSD: anoncvs.html,v 1.16 2002/11/01 20:27:16 jufi Exp $
</small>

</body>
</html>
