<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD AnonCVS</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="Wie man OpenBSD Updates via Internet mit Hilfe von Anonymous CVS bekommt">
<meta name="keywords" content="openbsd,anoncvs,updates">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-1998 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">

<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif">
<p>
<h2><font color=#e00000>Anonymous CVS</font><hr></h2>

<p>
<ul><h3>Inhaltsverzeichnis</h3>
<li><a href="#anoncvs">Was ist Anonymous CVS?</a>
<li><a href="#CVS">Was ist CVS?</a>
<li><a href="#starting">Den Anfang finden mit Anonymous CVS.</a>
<li><a href="#using">CVS benutzen, um den Source Tree zu holen und upzudaten.</a>
<li><a href="#CVSROOT">Verfügbare Anonymous CVS Server.</a>
<li><a href="#CRYPTO">Krypto Sourcen mit CVS(1) holen.</a>
<li><a href="#EXAMPLE">Beispiele für CVS(1).</a>
<li><a href="#WHICH">rsh(1) oder ssh(1)?</a>
<li><a href="#SUP">Das CVS repository mittels sup spiegeln(1).</a>
<li><a href="#MIRROR">Einen anoncvs Mirror aufsetzen.</a>
</ul>
</p>
<hr>


<a name="anoncvs"></a>
<h3><font color=#0000e0>Was ist Anonymous CVS?</font></h3>

<p>
Anonymous CVS ist eine Methode, um die lokalen Kopien deines OpenBSD Source-trees
auf dem laufenden zu halten in bezug auf die Veränderungen, die an den aktuellen 
OpenBSD-Quellcodes (current) gemacht werden.
Zusätzlich ist es möglich der Entwicklung ganz dicht auf den Fersen zu folgen, desweiteren
kann man den Patches einer bestimmten Version folgen.
</p>

<p>
Der Hauptvorteil von Anonymous CVS gegenüber anderen Update-Techniken ist,
dass es direkt mit einem zentralen Sourcecode, oder Spiegel davon arbeitet.
Das bedeutet, das du das volle Set von CVS-Kommandos zur Verfügung hast, um das 
Einfügen und Updaten von Quellcodes durchzuführen, und das beinhaltet auch das Bilden von sog. 
diffs, also Dateien, die den Unterschied zwischen zwei verschiedenen Dateien 
enthalten, ebenso wie das Abändern von Histories und anderen Abfragen.
</p> 

<p>
Das OpenBSD-Projekt hat momentan drei Haupt-Quellcode-Lagerstätten:
</p>

<ul>
        <li><b>src</b> - Beinhaltet alle Quellcodes für das OpenBSD Betriebssystem
        <li><b>ports</b> - Beinhaltet die <a href="../ports.html">OpenBSD Ports</a>.
        <li><b>www</b> - Beinhaltet alle OpenBSD Web Seiten. (Inklusive dieser hier).
</ul>

<p>
Zusammenfassend kann man sagen, dass die Stärke von Anonymous CVS darin liegt,
dass es ein sehr tolerantes Quellcode-Verwaltungsprogramm ist - es <strong>
respektiert </strong> Veränderungen, die du an deinen lokalen Quellcodes gemacht
hast und <strong> versucht alles</strong> um deine Quellcodes auf den neusten Stand
zu bringen, anstatt dir eine lange Liste mit geheimnisvollen Fehlern zu hinterlassen,
die beseitigt werden müssen, bevor du weitermachen kannst.
</p>

<a name="CVS"></a>
<h3><font color=#0000e0>Was ist CVS?</font></h3>

<p>
<a href=why-cvs.html>
CVS ist das Quellcode (source) Kontrollsystem, das benutzt wird, um den
Quellcode-Baum (source tree) von OpenBSD zu verwalten.</a> 
 Das beinhaltet eine zentrale Lagerstätte für alle offiziell 
veröffentlichten Quellcodes und Änderungen, was den Entwicklern ermöglicht,
lokale Kopien des Quellcodes mit ihren lokalen Änderungen zu verwalten.
Entwickler mit "<b>Schreibzugriff</b>" können Änderungen direkt in den OpenBSD-Quellcode
einfügen, während "Anonymous CVS" User 
"<b>Lesezugriff</b>" haben und ihre lokalen Kopien des Quellcodes auf dem laufen halten
können und Anfragen an die Zentrallagerstätte (main repository) machen können.
</p>

<p>
Die Hauptstärke von CVS ist seine Fähigkeit intelligente Einfügungen von Änderungen des lokalen
Quellcodes in das "central repository" oder auch umgekehrt zu machen.
D.h. wenn du Änderungen an einem Modul machst und hinterher ein Update per CVS, dann werden
deine Änderungen nicht "in den Wind geschossen", sondern CVS versucht alles, um Änderungen des 
"central repository" mit deinen lokalen in Einklang zu bringen.
</p>

<p>
Falls ein Einfügen nicht so einfach möglich ist, stellt CVS ein "soft fallback" bereit,
in dem es kommentierte Änderungen an deinem lokalen Quellcode macht, eine unveränderte 
Kopie deines Quellcodes erzeugt und dann mit dem Rest des Updates weitermacht.
</p>

<a name="starting"></a>
<h3><font color=#0000e0>Den Anfang mit Anonymous CVS finden.</font></h3>

<p>
Die letzte bzw. neueste Version CVS findet sich unter:
<a href=http://www.cyclic.com/CVS/Dev/code/>Cyclic</a>.
Versionen, die älter als 1.6 sind, sollten vermieden werden, und laufen vielleicht auch gar nicht. 
Wenn du OpenBSD installiert hast, ist CVS bereits integriert.
</p>

<p>
Leute, die eine OpenBSD CD besitzen, haben vielleicht schon die 
<i>CVS/</i> Verzeichnisse darauf bemerkt.
Der Grund dafür ist, dass die CD einen "checkout" des
 OpenBSD <b>src</b> Moduls enthält, von dem aus ein Updaten möglich ist.
 Das Benutzen dieses CVS-Baums führt zu einem wesentlich schnelleren Update, als
 ein komplett neuer, also frischer Checkout des vollen OpenBSD Quellcodes bzw. source tree.
Es gibt zwei Wege die CD zu benutzen:
</p>

<ul>
<li>Um den CVS-tree von der CD in das Verzeichnis <i>/usr/src</i> zu kopieren (angenommen die CD ist unter /mnt gemountet):
<pre>
	# <b>cd /mnt; pax -rw CVS Makefile [a-z]* /usr/src</b>
</pre>
<li>Benutze einen Union-Mount (siehe <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_union&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html">mount_union(8)</a>) mit der CD unter einem schreibbaren Verzeichnis: (Dies kann man benutzen, wenn man nur vom Quellcode kompiliert.)
<pre>
	# <b>mount -t union -o -b /mnt /usr/src</b>
</pre>
</ul>

<p>
Leute, die keine CD zur Hand haben, können  
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1&format=html">cvs(1)</a> benutzen,  um einen "<b>checkout</b>" des "source repository" zu machen. Wie das geht, erklärt der <a href="#using">nächste Absatz</a>.
</p>

<p>
Danach wird <i>/usr/src</i> ein guter Startpunkt sein, an dem alle <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1&format=html">cvs(1)</a> Kommandos normal arbeiten werden.
</p>

<a name="using"></a>
<h3><font color=#0000e0>CVS(1) benutzen um den Source-tree zu holen und upzudaten.</font></h3>

<p>
CVS wurde als einfacher Weg entworfen, um Quellcodes zu holen und auf dem aktuellen Stand zu halten, daher gibt es auch nicht
viel was man tun muss, um das zu erreichen.
Um zu beginnen, musst du wissen, ob du <i>current</i> folgen willst, oder einem patch-branch.
Der "current" Zweig hat alle Änderung bis zur aktuellen Minute, während ein Patch-branch eine offzielle
Version plus der dafür pasenden Patches von der <a href="errata.html">errata</a> Seite enthält.

Sobald du entschieden hast, welchem "tree" du folgen willst, musst du einen Anonymous CVS server du dafür benutzen
willst. Eine Lsite dieser Server gibt es <a href="#CVSROOT">weiter unten</a>.
Aber beachte, dass es nur 3 Wege gibt, um diese Server anzusprechen.
</p>

<ul>
<li><b>ssh</b> - mit Secure Shell kann man die anonymous CVS Server ansprechen. Das ist der <b>empfohlene</b> Weg, da die Daten so verschluesselt werden. Seit Version 2.6 ist OpenSSH in der Standard-Distribution von OpenBSD enthalten.
<li><b>rsh</b> - Remote Shell kann auf einigen wenigen Servern benutzt werden, für Leute, die keinen Zugang zu <a href="http://www.openssh.com">ssh</a> haben.
<li><b>pserver</b> - pserver ist hauptsächlich für Leute nützlich, die hinter Firewalls "sitzen", welche die anderen beiden Verbindungsarten blockieren.
</ul>

<p>
<b>HINWEIS:</b> - User, die ssh verwenden wollen,müssen zuerst die <i>CVS_RSH</i> Variable auf ssh setzen.

<ul>
<li> Für Korn/Bourne shells.
<pre>
	$ <b>export CVS_RSH="/usr/bin/ssh"</b>
</pre>
<li> Für CSH basierte shells.
<pre>
	$ <b>setenv CVS_RSH /usr/bin/ssh</b>
</pre>
</ul>

<p>
Nachdem du einen <a href="#CVSROOT">Anonymous CVS Server</a> ausgewählt hast, und welche Methode du benutzen willst, kannst du damit anfangen CVS zu benutzen. Für die von euch, die eine CD haben : Ihr könnt mit dem CVS checkout auf der CD anfangen, indem ihr die <a href="#starting">oben</a> genannte Methode benutzt, um dem Quellcode auf eure Maschinen zu bekommen. Wenn du keine CD zur Hand hast, benutze die unten aufgeführte Methode um einen "checkout" der Sourcen/Quellcodes zu machen. 
Diese Methode packt den Quellcode in <i>/usr/src</i>. 
</p>

<p>
<ul><pre>
# <b>cd /usr; cvs checkout src</b>
</ul></pre>
</p>

<p>
Das oben beschriebene wird einen Abgleich mit dem <i>current</i> source tree machen. 
Viele von euch werden aber nur die patch branch sources wollen.
Um eben nur den Code des patch branchs zu bekommen, musst du dem  
Kommando ein "tag" hinzufügen. Beispiel:
</p>

<p>
<ul><pre>
# <b>cd /usr; cvs checkout -P -rOPENBSD_2_7 src</b>
</ul></pre>
Oder OPENBSD_2_6 für 2.6, etc.
</p>

<p> Momentan enthält nur der OPENBSD_2_7 tag die Release Sources und
bereits eingefügte Patches.
 
<a name="CVSROOT"></a>
<h3><font color=#0000e0>Verfügbare Anonymous CVS Server.</font></h3>

<p>
Es gibt zwei Level im Zugang zum Source tree:

<dl>
<dt><strong>Schreib-Lese-Zugriff für Entwickler:</strong>
<dd>Entwickler, die Änderungen am Source tree vornehmen müssen, brauchen einen Account
auf den OpenBSD-Maschinen.
Diesen Zugang zu bekommen ist eine normale Sache, wenn man erstmal eine gewisse
Zeit mit anderen Entwicklern an OpenBSD mitarbeitet.
Wenn jemand gute Arbeit leistet und zeigt, dass er im Team arbeiten kann,
kann er auch einen Account bekommen.
</dl>

<dl>
<dt><strong>Nur-Lese-Zugriff für jedermann:</strong>
<dd>Jedermann kann auf die Nur-Lese-CVS repositories zugreifen. Diese
Kopien des 
Schreib-Lese-CVS repository werden recht oft gespiegelt. Dazu setzt du
deine <strong>CVSROOT</strong> Umgebungsvariable auf einen der folgenden Werte:
<p>
<strong>Bitte beachte den Hinweis über die Benutzung von ssh vs. rsh weiter unten!</strong>
<p>
<ul>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs1.usa.openbsd.org:/cvs</strong><br>
Auch als <strong>anoncvs@anoncvs4.usa.openbsd.org</strong> bekannt.<br>
beheimatet in California, westliche USA.<br>
verwaltet von <a href=mailto:millert@openbsd.org>Todd Miller</a>.<br>
Protokolle: nur pserver.<br>
Alle 4 Std. upgedatet.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.usa.openbsd.org:/cvs</strong><br>
Auch bekannt als <strong>anoncvs3.usa.openbsd.org</strong>.<br>
beheimatet in der University of Colorado, Boulder, western USA.<br>
verwaltet von <a href=mailto:Todd.Miller@cs.colorado.edu>Todd Miller</a>.<br>
Protokolle: rsh, ssh, ssh port 2022, pserver.<br>
Alle 6 Std. upgedatet.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs5.usa.openbsd.org:/cvs</strong><br>
Auch bekannt als <strong>squid.nas.nasa.gov</strong>.<br>
beheimatet im Ames Research Center, Moffett Field, California, USA.<br>
verwaltet von <a href=mailto:allison@mail.arc.nasa.gov>Tyler Allison</a>.<br>
Protokolle: nur ssh.<br>
Alle 3 Std. upgedatet.<br>
<li><strong>CVSROOT=anoncvs@mirror.arc.nasa.gov:/cvs</strong><br>
beheimatet im Ames Research Center, Moffett Field, California, USA.<br>
verwaltet von <a href=mailto:allison@mail.arc.nasa.gov>Tyler Allison</a>.<br>
Protokolle: nur ssh.<br>
Alle 3 Std. upgedatet.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs6.usa.openbsd.org:/cvs</strong><br>
Auch bekannt als <strong>openbsd.citi.umich.edu</strong>.<br>
beheimatet in der University of Michigan, central USA.<br>
verwaltet von <a href=mailto:rees@umich.edu>Jim Rees</a>.<br>
Protokolle: ssh, ssh port 2022.<br>
Alle 12 Std. upgedatet.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs1.ca.openbsd.org:/cvs</strong><br>
Auch bekannt als <strong>anoncvs.ca.openbsd.org</strong>, 
<strong>openbsd.sunsite.ualberta.ca</strong><br>
beheimatet in Edmonton, Alberta, Canada.<br>
verwaltet von <A HREF="mailto:beck@ualberta.ca">Bob Beck</A><br>
Protokolle: ssh, rsh, ssh port 2022, pserver<br>
Alle 2 Std. upgedatet.<br>
<p>
<li><strong>CVSROOT=anoncvs@valkyrie.secureops.com:/cvs</strong><br>
beheimatet in Montreal, Quebec, Kanada.<br>
verwaltet von <A HREF="mailto:drbones@darkelves.com">Patrick Ethier</A><br>
Protokolle: ssh<br>
jeden Tag um 03:00 Uhr EST upgedatet.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.uk.openbsd.org:/cvs</strong><br>
Auch bekannt als <strong>dumpty.wonderland.org</strong>.<br>
beheimatet in London, UK.<br>
verwaltet von<a href=mailto:peter@wonderland.org>Peter Galbavy</a>.<br>
Protokolle: rsh.<br>
updated every 12 hours.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.tw.openbsd.org:/cvs</strong><br>
Auch bekannt als <strong>OpenBSD.csie.NCTU.edu.tw</strong>.<br>
beheimatet in Taipei, Taiwan.<br>
verwaltet von <a href=mailto:lkchu@OpenBSD.csie.NCTU.edu.tw>Liang-Kai Chu</a>.<br>
Protokolle: rsh, ssh, ssh port 2022.<br>
Alle 12 Std. upgedatet.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.no.openbsd.org:/cvs</strong><br>
Auch bekannt als <strong>cvs.inet.no</strong>.<br>
beheimatet in Norwegen.<br>
verwaltet von <a href=mailto:cvsadmin@inet.no>Michael Shuldman</a>.<br>
Protokolle: rsh, ssh, ssh port 2022.<br>
Alle 4 Std. upgedatet<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.se.openbsd.org:/cvs</strong><br>
Auch bekannt als <strong>anoncvs.stacken.kth.se</strong>.<br>
beheimatet in Schweden.<br>
verwaltet von <a href=mailto:anoncvs@stacken.kth.se>Magnus Holmberg</a>.<br>
Protokolle: rsh, ssh, ssh port 2022.<br>
Alle 3 Std. upgedatet<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.be.openbsd.org:/cvs</strong><br>
Auch bekannt als <strong>badlands.rug.ac.be</strong>.<br>
beheimatet in Belgien.<br>
verwaltet von <a href=mailto:wvdputte@reptile.rug.ac.be>Wim Vandeputte</a>.<br>
Protokolle: ssh, ssh port 2022.<br>
Alle 3 Std. upgedatet<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.jp.openbsd.org:/cvs</strong><br>
Auch bekannt als <strong>kankoromochi.econ.nagasaki-u.ac.jp</strong>.<br>
beheimatet in Nagasaki Univ. Faculty of Economics, JAPAN.<br>
verwaltet von <a href=mailto:sigh@net.nagasaki-u.ac.jp>SUZUKI Hitoshi</a>.<br>
Protokolle:ssh, pserver.<br>
Alle 3 Std. upgedatet.<br>
<li><strong>CVSROOT=anoncvs@anoncvs.cz.openbsd.org:/cvs</strong><br>
auch bekannt als <strong>com-os2.ms.mff.cuni.cz</strong>.<br>
beinhaltet in der Faculty Math &amp; Physics, Charles University, Prague, Czech republic.<br>
verwaltet von <a href=mailto:galambos@com-os2.ms.mff.cuni.cz>Leo Galambos</a>.<br>
Protokolle:ssh, ssh port 2022.<br>
alle 3 Std. upgedatet .<br>
<li><strong>CVSROOT=anoncvs@anoncvs1.au.openbsd.org:/cvs</strong><br>
auch bekannt als <strong>anoncvs.au.openbsd.org</strong>, 
<strong>anoncvs.openbsd.aba.net.au</strong><br>
beheimatet in Carlton, Victoria, Australia.<br>
verwaltet von <A HREF="mailto:mwp@aba.net.au">Micheal Paddon</A><br>
Protokolle:ssh<br>
alle 4 Std. upgedatet.<br>
<li><strong>CVSROOT=anoncvs@dolphin.mtmc.ru:/cvs</strong><br>
beheimatet in Moscow, Russia<br>
verwaltet von <A HREF="mailto:jc@mtmc.ru">John Chertihin</A><br>
Protokolle:rsh, ssh<br>
alle 24 Std. upgedatet (at 1 AM Moscow time)<br>
<li><strong>CVSROOT :pserver:anoncvs@gloup.linuxfr.org:/cvs</strong><br>
auch bekannt als <strong>gloup.linuxfr.org</strong><br>
beheimatet in Paris (Claranet), FRANCE<br>
verwaltet von: <A HREF=mailto:seisen@linuxfr.org>Fabien Seisen</A><br>
Protokolle:pserver, ssh<br>
alle 24h upgedatet( um 2 Uhr GMT )<br>
<li><strong>CVSROOT :pserver:anoncvs@cvs.bsdfr.org:/cvs</strong><br>
beheimatet in France<br>
verwaltet von: <A HREF=mailto:jch@oleane.net>Jean-Claude Christophe</A><br>
Protokolle:pserver<br>
alle 24h upgedatet<br>
<li><strong>CVSROOT=anoncvs@exokernel.lcs.mit.edu:/cvs</strong><br>
beheimatet am M.I.T, Eastern USA.<br>
verwaltet von ????<br>
Protokolle:ssh, ???<br>
alle ? Std. upgedatet.<br>
<li><strong>CVSROOT=anoncvs@xyzzy.gsnig.org:/cvs</strong><br>
beheimatet in G&ouml;teborg, Schweden<br>
verwaltet von martin@openbsd.org<br>
Protokolle:ssh port 2022<br>
alle 4 Std. upgedatet.<br>
<li><strong>CVSROOT=anoncvs@stl-isaas.ey.com:/cvs</strong><br>
beheimatet in St. Louis, MO, Eastern USA<br>
verwaltet von <A HREF="mailto:aaron11@sprynet.com">Aaron Miller</A><br>
Protokolle:ssh, ssh port 2022, pserver<br>
alle 3 Std.upgedatet.<br>
<li><strong>CVSROOT=anoncvs@openbsd.groupbsd.org:/cvs</strong><br>
beheimatet in Hillsborough NC, Eastern USA<br>
verwaltet von <A HREF="mailto:jason@openbsd.org">Jason Wright</A><br>
Protokolle:ssh<br>
alle 4 Std. upgedatet.<br>
<li><strong>CVSROOT=anoncvs@headend-vlan1-cm19.fibertel.com.ar:/cvs</strong><br>
beheimtat in Buenos Aires, Argentina<br>
verwaltet von ????<br>
Protokolle:ssh?, ???<br>
alle ? Std. upgedatet.<br>
</ul>


<p>
<EM>Hinweis:</EM> wenn dein Server mit unvollständigen oder falschen
Informationen aufgelistet wird, bitte schreibe eine Mail an :
<A HREF="mailto:beck@openbsd.org"><tt>beck@openbsd.org</tt></A>
<p>
Du möchtest vielleicht 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute&sektion=8&format=html">traceroute(8)</a>
benutzen, um den Server zu finden, der dir "leitungsmässig"
am nächsten ist, zu dem also die kuerzeste Übertragungsstrecke besteht.
Probleme mit dem Server sollten an den
<b>maintainer</b> des fraglichen Servers gemailt werden.
</dl></p>

<a name="CRYPTO"></a>
<h3><font color=#0000e0>Krypto Sourcen mit CVS(1) holen.</font></h3>

<p>
<strong>WICHTIGER HINWEIS:</strong>
Es gibt ein paar Dinge bezüglich Kryptografie, die jedem bewusst sein sollten:
<ul>
<li>Die OpenBSD-Quellcodes kommen aus Kanada.
Nach 
	<a href=http://insight.mcmaster.ca/org/efc/pages/doc/crypto-export.html>
	der Untersuchung eines Kanadiers</a>
sowie nach
	<a href=http://axion.physics.ubc.ca/ECL.html>
	der Export Kontrolliste von Kanada</a>
ist es legal, Krypto-Software aus Kanada in alle Welt zu exportieren.
<p>
<li>
Trotzdem solltest du, wenn du ausserhalb der USA oder Kanada wohnst, die 
kryptografischen Teile der Software nicht von einen anoncvs-Server holen, der in
den USA beheimatet ist.
Die betroffenen Dateien sind:
<ul>
<li>src/kerberosIV/*
<li>src/lib/libdes/*
<li>src/lib/libc/crypt/crypt.c
<li>src/lib/libc/crypt/morecrypt.c
<li>src/sys/netinet
<li>src/usr.sbin/afs/src/rxkad/*
<li>X11/xc/lib/Xdmcp/Wraphelp.c
</ul>
Aufgrund der USA ITAR Munitionsliste kann Krypto-Software aus den
USA nur nach Kanada exportiert werden.
<p>
<li>Das OpenBSD Projekt sucht weiterhin nach mehr anoncvs-Servern -- lies einfach weiter,
um herauszufinden, wie du helfen kannst.
</ul>

<a name="EXAMPLE"></a>
<h3><font color=#0000e0>Beispiele für CVS(1).</font></h3>

<p>
Eine Beispielnutzung eines anoncvs-Servers wäre :
<ul>
<pre>
% setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs
% cd /tmp
% cvs get src/sys/arch/sparc
<ul><pre>
% <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
% <strong>cd /tmp</strong>
% <strong>cvs get src/sys/arch/sparc</strong>
    [kopiert die Dateien vom Server auf deine Maschine]
% <strong>cvs log src/sys/arch/sparc/sparc/locore.s</strong>    
    [zeigt das commit log für die ausgewählte Datei ]
% <strong>cvs diff -bc -r1.1 -r1.5 src/sys/arch/sparc/sparc/locore.s</strong>    
    [zeigt die Unterschiede zwischen den Versionen  1.1 und Version 1.5]
</pre></ul>

<p>
<a name=pserver>Um einen cvs ``pserver'' zu benutzen (eine  direkte tcp Verbindung anstelle einer mit ssh oder rsh) musst du dich einmal einloggen:</a>
<ul><pre>

    [ *HINWEIS* Du musst cvs version 1.8 oder höher benutzen  ]
% <strong>setenv CVSROOT :pserver:anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
% <strong>cvs login</strong>
(Logging in to anoncvs@anoncvs1.ca.openbsd.org)
CVS password: <strong>anoncvs</strong>
    [schreibt eine Zeile in ~/.cvspass (der Dateiname wird von CVS_PASSFILE überschrieben).]
    [Eine Beispielzeile von ~/.cvspass nachdem ich 'blah' als Passwort getippt habe ist: ]
    [:pserver:anoncvs@anoncvs5.usa.openbsd.org:/cvs Au'yc                    ]
    [...nachdem man sich EINMAL eingeloggt hat, funktioniert jedes CVSROOT-Kommando ]
% <strong>cvs get ksrc-i386 ksrc-common</strong>    
    [erlaubt dir NUR das zu empfangen, was man zum "Bauen" eines i386-Kernels braucht ]
</pre></ul>

<p>
So würde jemand, der anoncvs regelmässig benutzt, seinen source tree updaten:
<ul><li>Ganz zu Anfang holt man als erstes einen source tree:

<p> (Wenn du <i>current</i> folgst):
<ul><pre>
# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
# <strong>cd /usr</strong>
# <strong>cvs -q get -PA src</strong>
</pre></ul>

<p> (Wenn du dem patch branch für 2.7 folgst):
<ul><pre>
# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
# <strong>cd /usr</strong>
# <strong>cvs -q get -rOPENBSD_2_7 -P src</strong>
</pre></ul>
</li>

<li> Danach kann man ihn jederzeit so updaten:
<p> (Wenn du <i>current</i>folgst):
<ul><pre>
# <strong>cd /usr/src</strong>
# <strong>cvs -q up -PAd</strong>
</pre></ul>
<p> (Wenn du dem patch branch für 2.7 folgst):
<ul><pre>
# <strong>cd /usr/src</strong>
# <strong>cvs -q up -rOPENBSD_2_7 -Pd</strong>
</pre></ul>


Jedesmal, wenn du das so ausführst, wird ein /usr/src tree mit dem des CVS-Servers
abgeglichen bzw. synchronisiert. Deine lokalen Änderungen würden natürlich nicht zerstört,
sondern , wenn möglich, eingebaut. Wenn du ein obj-Verzeichnis benutzt 
(obj symbolische Links sind dabei nicht gemeint!), solltest du "-I obj" dem Kommando hinzufügen, da
cvs dann davon abgehalten wird, jedesmal eine Warnung auszugeben, wenn es einem 
obj-Verzeicnis begegnet, das nicht im repository enthalten ist.

<p>
<li> HINWEISE: Wenn du einen Source tree updatest, den du beim ersten Mal von einem anderen
Server geholt hast, oder auch von CD, dann 
<strong>musst</strong> du die 
<em>-d $CVSROOT</em> Option von cvs benutzen.  Ausserdem musst du die
<em>CVS_IGNORE_REMOTE_ROOT</em> Umgebungsvariable setzen.
Wenn du einem patch branch folgst, stelle sicher, dass du immer das <code>-A</code>
flag an CVS <strong>übergibst</strong>, oder du wirst beim Verfolgen des <i>current</i> wiederfinden.

+<p> (Wenn du <i>current</i> folgst):
<ul><pre>
# <strong>cd /usr/src</strong>
# <strong>cvs -d $CVSROOT -q up -PAd</strong>
</pre></ul>
<p> (Wenn du einem patch branch folgst):
<ul><pre>
# <strong>cd /usr/src</strong>
# <strong>cvs -d $CVSROOT -q up -Pd</strong>
</pre></ul>

</li>
</ul>

<p>
Das <a name=ports>Updaten von</a> <a href=../ports.html>ports</a> funktioniert genauso wie bei src:
<ul><li>
<pre>
# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
# <strong>cd /usr</strong>
# <strong>cvs -q get -PA ports</strong>
</pre>
</li>
<li> Danach kann der tree jedesmal so upgedatet werden:
<pre>
# <strong>cd /usr</strong>
# <strong>cvs -q up -PAd ports</strong>
</pre>
</li>
</p>
</ul>
Im obigen Beispiel ist <i>'-q'</i> optional, und nur dazu gedacht den
Output von cvs zu minimieren. Alle diejenigen, die gerne ganze
Bildschirmseiten von Ausgaben sehen, können diese Option getrost 
weglassen.

<p>
oder auch um ein "diff" eines lokal gepatchten Moduls zu machen (hier <i>cd.c</i>), das man
z.B. in einen Bug-Report einfügen kann:
<ul><pre>
# <strong>cd /usr</strong>
# <strong>cvs diff -u src/sys/scsi/cd.c > /tmp/patch</strong>
</pre></ul>
</p>

<p>
Die <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1&format=html">CVS(1) man page</a>
(included with the CVS sources) hat noch viel mehr
Informationen, wie man CVS benutzen kann.

<p>

<strong>X11 Source tree</strong>
<br>
Anoncvs Mirrors haben auch den OpenBSD X11 Source tree. Du kannst das obige Rezept
anpassen, um deinen X11 Source tree von der zweiten CD upzudaten.
Kopiere sie oder benutze einen union mount um die X11-Sourcen in <i>/usr/X11</i> zu
bekommen:

<ul>
<li>Den Tree von der CD kopieren (vorrausgesetzt die 2. CD ist unter /mnt gemountet):
<pre>
        # <strong>cd /mnt; cp -Rp X11 /usr</strong>
</pre>
<li>einen union mount mit der CD unter einem schreibbaren Verzeichnis benutzen.
<pre>
        # <strong>mount -t union -o -b /mnt/X11 /usr/X11</strong>
</pre></ul>

Danach kann man <i>/usr/X11</i> mit cvs benutzen. Du kannst z.B.
ein Update auf den aktuellsten Stand, also -current machen (vorrausgesetzt du hast die 
<b>CVSROOT</b> Umgebungsvariable gesetzt):

<ul><pre>
        # <strong>cd /usr/X11</strong>
        # <strong>cvs -q update -PAd</strong>
</pre></ul>

<p>
<strong>Warnung:</strong>
Beim Benutzen von cvs solltest du darauf achten ,dass du dich im jeweiligen
"root" des Verzeichnisses befindest ,dass du holen willst, oder in einem 
ganzen anderen, wie z.B. /tmp. Kommandos wie "get" können willkürlich einen
"subtree" im momentanen Verzeichnis erzeugen, der bei jedem Update weiter ausgebaut
wird.

<p>
Der anoncvs-Service gibt Entwicklern, die noch Grünschnäbel sind, eine 
Chance CVS-Operationen kennenzulernen, und gründlich in den 
Entwicklungsprozess eingeführt zu werden, bevor sie "commit" access bekommen
-- als Resultat ihrer wertvollen Fähigkeiten und hochqualitativen Fähigkeiten
werden sie natürlich später vollen Entwickler-Zugriff bekommen. Auch Leute, die
patches erstellen, können diese "diffs" gegen den CVS tree erstellen, was die
Integration dieser Patches erleichtert.

<a name="WHICH"></a>
<h3><font color=#0000e0>Use rsh(1) or ssh(1)?</font></h3>

<p>
<strong>Anoncvs: rsh vs. ssh</strong>
<br>
Standardmässig benutzt der cvsc-lient rsh, um mit dem CVS-Server zu kommunizieren.
Viele der CVS-Server unterstützen rsh jedoch aus Sicherheitsgründen nicht mehr, aber auch
Probleme wie z.B. eine lokale Firewall ,oder ein unvollkommener Protokoll Emulator
wie slirp, kann dich davon abhalten rsh zu benutzen.
Die Alternative ist eine "secure shell" Verbindung zu benutzen, die entweder
<a href=http://www.openssh.com>OpenSSH (*FREE*)</a> verwendet oder
<a href=http://www.cs.hut.fi/ssh/>ssh (nicht-kommerziell und kommerziell)</a>.

<p>
Die OpenBSD anoncvs repositories unterstützen das SSH1-Protokoll, nicht aber das
SSH2-Protokoll aufgrund der Lizenz Politik, die eine "strikt-nicht-kommerzielle" Verwendung
verlangt.

<p>
Sobald ssh erst installiert ist, setzt man die Umgebungsvariable 
<strong>CVS_RSH</strong> auf ssh (typischerweise unter
<strong>/usr/local/bin/ssh</strong> zu finden). Wenn deine lokale Site dich daran
hindert auf Port 22 eine Verbindung aufzubauen (den ssh als Standard benutzt), versuche
Port 2022.

<p>
Die Kompression brauchst du nicht einschalten, da ssh die bereits duchführt.
Benutze sowas wie das folgende in deiner
<strong>$HOME/.ssh/config</strong>
Datei.  Denk daran, dass nicht alle anoncvs Server eine Verbindung auf Port 2022 gestatten.
Denk auch daran, dass die meisten anoncvs Server die 
<strong>none</strong> cipher nicht gestatten, das sie aus Sicherheitsgründen in neueren Versionen von
ssh standardmässig abgeschaltet ist.
<pre>
	Host anoncvs.ca.openbsd.org
	    Port 2022
</pre>

<p>
CVS ist recht gesprächig, wenn man es startet; um das einzudämmen, kannst du das hier benutzen:

<ul><pre>
<strong>setenv CVS_CLIENT_PORT -1</strong>
</pre></ul>

<p>
Wenn du von einem CVS-Server zu einem anderen wechselst, (dein normaler könnte zum Beispiel
ausgefallen sein, oder sonstwas), ist die dazu notwendige Umgebungsvariable
<ul><pre>
<strong>setenv CVS_IGNORE_REMOTE_ROOT</strong>
</pre></ul> zu setzen.


Denk daran, dass du auch das 
<strong>-d</strong> flag
wie oben beschrieben nutzen musst.

<a name="SUP"></a>
<h3><font color=#0000e0>Das CVS repository mittels sup(1) spiegeln.</font></h3>

<p>
User ,die gerne den OpenBSD CVS tree selber spiegeln möchten,
können das jetzt mit <em>anoncvs.usa.openbsd.org</em> tun. 
Dies ist der cvs tree, <b>kein</b> geprüfter source tree.  Er ist nur dann nützlich
wenn du schnelle cvs Operationen (diff, annotate, etc) durchführen willst,
oder wenn du viele verschiedenene source trees hast und die neuen Daten nur einmal
transferieren willst (du kannst die anderen dann anhand deiner Kopie auf den
neuesten Stand bringen).
<p>
Ein einfaches SUPFILE wäre:
<pre>
       cvs host=anoncvs.usa.openbsd.org hostbase=/ base=/home delete
</pre>
<p>
was den cvs tree in /home/cvs spiegeln würde, und zwar mit den sup data
Files(Dateien) in /home/sup.  Der komplette OpenBSD cvs tree ist knapp unter
einem Gigabyte gross.

<a name="MIRROR"></a>
<h3><font color=#0000e0>Einen anoncvs Mirror aufsetzen.</font></h3>

<br>
<p>
Wenn du einen neuen anoncvs-Spiegel aufstellen willst, schreib bitte eine
Mail an den anoncvs
<a href=mailto:sup@openbsd.org>maintainer</a>.
Anoncvs-Spiegel/mirrors benötigen ungefähr 1 GB  Platz auf der Festplatte, und 
brauchen etwa 4MB Swap pro anoncvs-User (jedenfalls wenn der User grössere 
Dinge macht, ansonsten halt weniger, aber trotzdem benötigt anoncvs mehr
Leistung vom Rechner als ftp oder sup).
Solche anoncvs-Maschinen sollten eine exzellente Netzwerkanbindung haben, 
jedenfalls für das Areal, dass sie bedienen sollen.
Ein <a href=../anoncvs.shar>Dokument</a>, dass den Aufbau eines
anoncvs servers beschreibt, ist erhältlich.

<h3><font color=#0000e0>Letzte Hinweise:</font></h3>
Nachdem du deinen source tree auf aktuellen Stand gebracht hast,
solltest du die Kommentare 
ganz oben in <KBD>/usr/src/Makefile</KBD> lesen , bevor du einen build versuchst.
Ausserdem solltest du einen neuen Kernel "backen" 
<strong>bevor</strong>
du ein <KBD>make build</KBD> durchführst, wenn das dann überhaupt möglich ist.
In manchen Fällen kann es notwendig sein das 
<KBD>config</KBD> utility neu zu übersetzen und zu installieren, bevor
du den Kernel übersetzen kannst.  Wenn ein <KBD>config GENERIC</KBD> versagt, 
ist das vermutlich genau der Fall.
<p>
Es ist wichtig zu verstehen, dass ein Upgraden von einem "release", alos einer offiziellen
Version hin zu -current, dem aktuellsten Quellcode, recht kompliziert sein kann, und zwar
aufgrund verschiedener Abhängigkeiten, die nicht offensichtlich sein müssen.
Daher wird empfohlen, zunächst den letzten Snapshot zu installieren, bevor du
ein Übersetzen des neuesten Quellcodes versuchst.

<hr>
<a href=index.html><img height=24 width=24 src=../back.gif border=0 alt=OpenBSD></a> 
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br><small>
Originally [OpenBSD: anoncvs.html,v 1.112 ]
<br>
$Translation: anoncvs.html,v 1.12 2000/06/24 23:02:34 jufi Exp $
</small>
<br><small>$OpenBSD: anoncvs.html,v 1.11 2000/06/24 23:07:22 jufi Exp $</small>
</body>
</html>
