<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD AnonCVS</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Language" content="de">
<meta name="description" content="Wie man OpenBSD Updates via Internet mit Hilfe von Anonymous CVS bekommt">
<meta name="keywords" content="openbsd,anoncvs,updates">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2004 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">Anonymous CVS</font></h2>

<hr>
<h3>Inhaltsverzeichnis</h3>
<ul>

<li><a href="#anoncvs">Was ist Anonymous CVS?</a>
<li><a href="#CVS">Was ist CVS?</a>
<li><a href="#starting">Den Anfang finden mit Anonymous CVS</a>
<li><a href="#using">CVS benutzen, um den Source Tree zu holen und upzudaten</a>
<li><a href="#CVSROOT">Verf&uuml;gbare Anonymous CVS Server</a>
<li><a href="#CRYPTO">Krypto Sourcen mit CVS(1) holen</a>
<li><a href="#EXAMPLE">Beispiele f&uuml;r CVS(1)</a>
<li><a href="#WHICH">rsh(1) oder ssh(1)?</a>
<li><a href="#SUP">Das CVS repository mittels sup(1) spiegeln</a>
<li><a href="#MIRROR">Einen anoncvs Mirror aufsetzen</a>
</ul>
<hr>


<h3><a name="anoncvs"><font color="#0000e0">Was ist Anonymous CVS?</font></a></h3>

<p>
Anonymous CVS ist eine Methode, um die lokalen Kopien des OpenBSD Source-trees
auf dem laufenden zu halten, so dass er den Ver&auml;nderungen folgt, die an den aktuellen 
OpenBSD-Quellcodes (current) gemacht werden.
Zus&auml;tzlich ist es m&ouml;glich der Entwicklung ganz dicht auf den Fersen zu folgen, desweiteren
kann man die Patches einer bestimmten Version verfolgen.
</p>

<p>
Der Hauptvorteil von Anonymous CVS gegen&uuml;ber anderen Update-Techniken ist,
dass es direkt mit einem zentralen Quellcode - oder Spiegel davon - arbeitet.
Das bedeutet, dass du den vollen Satz von CVS-Kommandos zur Verf&uuml;gung hast, um das 
Einf&uuml;gen und Updaten von Quellcodes durchzuf&uuml;hren, und das beinhaltet auch das Bilden von
sogenannten diffs, also Dateien, die den Unterschied zwischen zwei verschiedenen Dateien 
enthalten, ebenso wie das Ab&auml;ndern von Histories und anderen Abfragen.
</p> 

<p>
Das OpenBSD-Projekt hat momentan f&uuml;nf Haupt-Quellcode-Lagerst&auml;tten:
</p>

<ul>
  <li><b>src</b> - Beinhaltet alle Quellcodes f&uuml;r das OpenBSD Betriebssystem</li>
  <li><b>ports</b> - Beinhaltet die <a href="../ports.html">OpenBSD Ports</a>.</li>
  <li><b>www</b> - Beinhaltet alle OpenBSD Web Seiten. (Inklusive dieser).</li>
  <li><b>X11</b> - Beinhaltet OpenBSD's Version des
      <a href="http://www.XFree86.org/">XFree86-3</a> Software Projektes.</li>
  <li><b>XF4</b> - Beinhaltet OpenBSD's Version des
      <a href="http://www.XFree86.org/">XFree86-4</a> Software Projektes.</li>
</ul>

<p>
Zusammenfassend kann man sagen, dass die St&auml;rke von Anonymous CVS darin liegt,
dass es ein sehr tolerantes Quellcode-Verwaltungsprogramm ist - es <strong>
respektiert </strong> Ver&auml;nderungen, die du an deinen lokalen Quellen gemacht
hast und <strong> versucht alles</strong>, um deine Quellcodes auf den neusten Stand
zu bringen, anstatt dir eine lange Liste mit geheimnisvollen Fehlern zu hinterlassen,
die beseitigt werden m&uuml;ssen, bevor du weitermachen kannst.
</p>

<h3><a name="CVS"><font color="#0000e0">Was ist CVS?</font></a></h3>

<p>
<a href="why-cvs.html">
CVS ist das Quellcode (source) Kontrollsystem, das benutzt wird, um den
Quellcode-Baum (source tree) von OpenBSD zu verwalten.</a> 
 Das beinhaltet eine zentrale Lagerst&auml;tte f&uuml;r alle offiziell 
ver&ouml;ffentlichten Quellcodes und &Auml;nderungen, was den Entwicklern erm&ouml;glicht,
lokale Kopien des Quellcodes mit ihren lokalen &Auml;nderungen zu verwalten.
Entwickler mit "<b>Schreibzugriff</b>" k&ouml;nnen &Auml;nderungen direkt in den OpenBSD-Quellcode
einf&uuml;gen, w&auml;hrend "Anonymous CVS" User 
"<b>Lesezugriff</b>" haben und ihre lokalen Kopien des Quellcodes auf dem laufen halten
k&ouml;nnen und Anfragen an die Zentrallagerst&auml;tte (main repository) machen k&ouml;nnen.
</p>

<p>
Die Hauptst&auml;rke von CVS ist seine F&auml;higkeit intelligente Einf&uuml;gungen von 
&Auml;nderungen des lokalen Quellcodes in das "central repository" oder auch umgekehrt zu machen.
D.h., wenn du &Auml;nderungen an einem Modul machst und hinterher ein Update per CVS, dann werden
deine &Auml;nderungen nicht "in den Wind geschossen", sondern CVS versucht alles, um &Auml;nderungen des 
"central repository" mit deinen lokalen in Einklang zu bringen.
</p>

<p>
Falls ein Einf&uuml;gen nicht so einfach m&ouml;glich ist, stellt CVS ein "soft fallback" bereit,
in dem es kommentierte &Auml;nderungen an deinem lokalen Quellcode macht, eine unver&auml;nderte 
Kopie deines Quellcodes erzeugt und dann mit dem Rest des Updates weitermacht.
</p>

<h3><a name="starting"><font color="#0000e0">Den Anfang mit Anonymous CVS finden.</font></a></h3>

<p>
Die letzte bzw. neueste Version CVS findet sich unter:
<a href="http://www.cvshome.org/">Cyclic</a>.
Versionen, die &auml;lter als 1.6 sind, sollten vermieden werden und
k&ouml;nnten auch gar nicht laufen. 
Wenn du OpenBSD installiert hast, ist CVS bereits integriert.
</p>

<p>
Leute, die eine OpenBSD CD besitzen, haben vielleicht schon die 
<i>CVS/</i> Verzeichnisse darauf bemerkt.
Der Grund daf&uuml;r ist, dass die CD einen "checkout" des
 OpenBSD <b>src</b> Moduls enth&auml;lt, von dem aus ein Updaten m&ouml;glich ist.
 Das Benutzen dieses CVS-Baums f&uuml;hrt zu einem wesentlich schnelleren Update, als
 ein komplett neuer, also frischer Checkout des vollen OpenBSD
Quellcodes-Baumes. 
Es gibt zwei Wege die CD zu benutzen:
</p>

<ul>
<li>Um den CVS-Baum von der CD in das Verzeichnis <i>/usr/src</i> zu kopieren (angenommen die CD ist unter /mnt gemountet):
<pre>
	# <b>cd /mnt; pax -rw CVS Makefile [a-z]* /usr/src</b>
</pre>
<li>Benutze einen Union-Mount 
(siehe <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_union&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">mount_union(8))</a> mit der CD unter einem schreibbaren Verzeichnis: (Dies kann man benutzen, wenn man nur vom Quellcode kompiliert.)
<pre>
	# <b>mount -t union -o -b /mnt /usr/src</b>
</pre>
</ul>

<p>
Leute, die keine CD zur Hand haben, k&ouml;nnen  
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">cvs(1)</a> nutzen, 
um einen  "<b>checkout</b>" des "source repository" zu machen. Wie das geht, erkl&auml;rt der 
<a href="#using">n&auml;chste Absatz</a>.
</p>

<p>
Danach wird <i>/usr/src</i> ein guter Startpunkt sein, an dem alle 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">cvs(1)</a> 
Kommandos normal arbeiten werden.
</p>

<h3><a name="using"><font color="#0000e0">CVS(1) benutzen um den Source-tree zu holen und upzudaten.</font></a></h3>

<p>
CVS wurde als einfacher Weg entworfen, um Quellcodes zu holen und auf dem aktuellen Stand zu halten, daher gibt es auch nicht
viel, was man tun muss, um das zu erreichen.
Um zu beginnen, musst du wissen, ob du <i>current</i> folgen willst, oder einem patch-branch.
Der "current" Zweig hat alle &Auml;nderung bis zur aktuellen Minute, w&auml;hrend ein
patch-branch eine offzielle
Version plus der daf&uuml;r pasenden Patches von der <a href="errata.html">errata</a> Seite enth&auml;lt.
Eine Definition von <i>current</i> gibt es in der <a href="../faq/upgrade-minifaq.html#1.1">Upgrade 
Mini-FAQ</a>.
<p>
Sobald du entschieden hast, welchem "tree" du folgen willst, musst du einen Anonymous CVS Server finden, den du daf&uuml;r benutzen
willst. Eine Liste dieser Server gibt es <a href="#CVSROOT">weiter unten</a>.
Aber beachte, dass es nur drei Wege gibt, um diese Server anzusprechen.
</p>

<dl>
<dt><b>ssh</b><dd> mit Secure Shell kann man die anonymous CVS Server ansprechen. Das ist der <em>empfohlene</em> Weg, 
da die Daten so verschluesselt werden. Seit Version 2.6 ist OpenSSH in der Standard-Distribution von OpenBSD enthalten.
<dt><b>rsh</b><dd>Remote Shell kann auf einigen wenigen Servern benutzt werden, f&uuml;r Leute, die keinen Zugang zu 
<a href="http://www.openssh.com/">ssh</a> haben.
<dt><b>pserver</b><dd>pserver ist haupts&auml;chlich f&uuml;r Leute n&uuml;tzlich, die hinter Firewalls "sitzen", 
welche die anderen beiden Verbindungsarten blockieren.
</dl>

<p>
<b>HINWEIS:</b>User, die rsh verwenden wollen,m&uuml;ssen zuerst die <var>CVS_RSH</var> Variable auf rsh setzen.

<ul>
<li>F&uuml;r Korn/Bourne shells.
<pre>
	$ <b>export CVS_RSH=/usr/bin/rsh</b>
</pre>
<li> F&uuml;r csh/tcsh shells.
<pre>
	% <b>setenv CVS_RSH /usr/bin/rsh</b>
</pre>
</ul>

<p>
Nachdem du einen <a href="#CVSROOT">Anonymous CVS Server</a> ausgew&auml;hlt hast
und entschieden hast, welche Methode du benutzen willst, 
kannst du damit anfangen, CVS zu benutzen. F&uuml;r diejenigen von euch, die eine CD haben : Ihr k&ouml;nnt mit dem CVS 
checkout auf der CD anfangen, indem ihr die <a href="#starting">oben</a> genannte Methode benutzt, um dem 
Quellcode auf eure Maschinen zu bekommen. Wenn du keine CD zur Hand hast, benutze die unten aufgef&uuml;hrte 
Methode um einen "checkout" der Sourcen/Quellcodes zu machen. Diese Methode packt den Quellcode in <i>/usr/src</i>. 
</p>

<pre>
       # <b>cd /usr; cvs checkout -P src</b>
</pre>

<p>
Das oben beschriebene wird einen Abgleich mit dem <i>current</i> source tree machen. 
Viele von euch werden aber nur die patch branch sources wollen.
Um eben nur den Code des patch branchs zu bekommen, musst du dem  
Kommando ein "tag" hinzuf&uuml;gen. Beispiel:
</p>

<pre>
       # <b>cd /usr; cvs checkout -P -rOPENBSD_3_5 src</b>
</pre>
<p>
Oder OPENBSD_3_4 f&uuml;r 3.4, etc.

<p>Der OPENBSD_3_5 tag enth&auml;lt die Release Sources und
bereits eingef&uuml;gte Patches.
 
<h3><a name="CVSROOT"><font color="#0000e0">Verf&uuml;gbare Anonymous CVS Server.</font></a></h3>

<p>
Es gibt zwei Level im Zugang zum Source tree:

<dl>
<dt><strong>Schreib-Lese-Zugriff f&uuml;r Entwickler:</strong>
<dd>Entwickler, die &Auml;nderungen am Source tree vornehmen m&uuml;ssen, brauchen einen Account
auf den OpenBSD-Maschinen.
Diesen Zugang zu bekommen ist eine normale Sache, wenn man erstmal eine gewisse
Zeit mit anderen Entwicklern an OpenBSD mitarbeitet.
Wenn jemand gute Arbeit leistet und zeigt, dass er im Team arbeiten kann,
kann er auch einen Account bekommen.
</dl>

<dl>
<dt><strong>Nur-Lese-Zugriff f&uuml;r jedermann:</strong>
<dd>Jedermann kann auf die Nur-Lese-CVS repositories zugreifen. Diese
Kopien des 
Schreib-Lese-CVS repository werden recht oft gespiegelt. Dazu setzt du
deine <var>CVSROOT</var> Umgebungsvariable auf einen der folgenden Werte:
<p>
<em>Bitte beachte den Hinweis &uuml;ber die Benutzung von 
<a href="#WHICH">ssh vs. rsh</a> weiter unten!</em>
<p>
<ul>
<li><strong>CVSROOT=anoncvs@anoncvs1.usa.openbsd.org:/cvs</strong><br>
Auch als <strong>anoncvs@anoncvs.usa.openbsd.org</strong> und
<strong>anoncvs@anoncvs4.usa.openbsd.org</strong> bekannt.<br>
Beheimatet in Redwood City, Kalifornien, westliche USA.<br>
Verwaltet von <a href="mailto:millert@openbsd.org">Todd Miller</a>.<br>
Protokolle: rsh, ssh, ssh port 2022,pserver.<br>
Wird alle 2 Std. aktualisiert.<br>
SSH Fingerprints:<br>
(RSA1) 1024 64:de:26:16:c2:ff:1b:c7:24:ed:a4:4a:d7:2f:69:3e<br>
(RSA) 1024 49:67:9a:46:62:8a:3f:4e:b3:63:ca:d6:41:29:2a:2f<br>
(DSA) 1024 a7:75:49:77:f3:47:d1:3c:5e:65:84:84:3b:03:f1:33<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs2.usa.openbsd.org:/cvs</strong><br>
Auch bekannt als <strong>repository.citi.umich.edu</strong>.<br>
Beheimatet an der University of Michigan, central USA.<br>
Verwaltet von <a href="mailto:rees@umich.edu">Jim Rees</a>.<br>
Protokolle: ssh, ssh port 2022.<br>
Wird alle 12 Std. aktualisiert.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs3.usa.openbsd.org:/cvs</strong><br>
Beheimatet an der University of Colorado, Boulder, western USA.<br>
Verwaltet von <a href="mailto:millert@openbsd.org">Todd Miller</a>.<br>
Protokolle: rsh, ssh, ssh port 2022, pserver.<br>
Wird alle 2 Std. aktualisiert.<br>
SSH Fingerprints:<br>
(RSA1) 1024 21:d3:93:29:bc:3f:68:37:6c:84:9f:12:0c:8a:35:2f<br>
(RSA) 1024 f4:85:d1:b4:c3:df:62:b9:cf:78:64:73:67:05:e3:ca<br>
(DSA) 1024 8d:c7:c3:07:3b:60:fa:80:85:c1:b4:1c:0a:33:c4:33<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs1.ca.openbsd.org:/cvs</strong><br>
Auch bekannt als <strong>anoncvs.ca.openbsd.org</strong>, 
<strong>openbsd.sunsite.ualberta.ca</strong><br>
Beheimatet in Edmonton, Alberta, Canada.<br>
Verwaltet von <a href="mailto:beck@ualberta.ca">Bob Beck</a>.<br>
Protokolle: ssh, rsh, ssh port 2022, pserver<br>
Wird alle 2 Std. aktualisiert.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.no.openbsd.org:/cvs</strong><br>
Auch bekannt als <strong>cvs.inet.no</strong>.<br>
Beheimatet in Norwegen.<br>
Verwaltet von <a href="mailto:cvsadmin@inet.no">Michael Shuldman</a>.<br>
Protokolle: rsh, ssh, ssh port 2022.<br>
Wird alle 4 Std. aktualisiert<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.at.openbsd.org:/cvs</strong><br>
Auch bekannt als <strong>togetic.kd85.com</strong>.<br>
beheimatet in &Ouml;sterreich.<br>
verwaltet von <a href="mailto:wim@kd85.com">Wim Vandeputte</a>.<br>
Protokolle: ssh, ssh port 2022.<br>
Wird alle 3 Std. aktualisiert<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.nl.openbsd.org:/cvs</strong><br>
Host auch bekannt als <strong>anoncvs.calyx.nl</strong>.<br>
Beheimatet in Amsterdam, Niederlande.<br>
Verwaltet von <a href="mailto:nick@calyx.net">Nick Merrill</a> und
<a href="mailto:alex@calyx.nl">Alexander Grendel</a>.<br>
Protokolle: ssh.<br>
Wird alle 3 Stunden aktualisiert.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.jp.openbsd.org:/cvs</strong><br>
Auch bekannt als <strong>kankoromochi.econ.nagasaki-u.ac.jp</strong>.<br>
Beheimatet in Nagasaki Univ. Faculty of Economics, Japan.<br>
Verwaltet von <a href="mailto:sigh@net.nagasaki-u.ac.jp">SUZUKI Hitoshi</a>.<br>
Protokolle: ssh, pserver.<br>
Wird alle 3 Std. aktualisiert.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.de.openbsd.org:/cvs</strong><br>
Auch bekannt als <strong>grappa.unix-ag.uni-kl.de</strong>.<br>
Beheimatet an der Universit&auml;t von Kaiserslautern, Deutschland<br>
Verwaltet von <a href="mailto:naddy@openbsd.org">Christian Weisgerber</a>.<br>
Protokolle: ssh, ssh port 2022, pserver<br>
Wird alle 6 Stunden aktualisiert.<br>
SSH Fingerprints:<br>
(RSA) 1024 cf:a9:ee:a4:60:5d:66:00:50:5b:fd:d3:72:04:14:a3<br>
(DSA) 1024 78:d4:19:da:df:6f:c0:14:7f:4a:55:2a:e9:82:5f:e4<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.pl.openbsd.org:/cvs</strong><br>
auch bekannt als <strong>anoncvs1.pl.openbsd.org</strong>,
<strong>incredible.bmtmc.gda.pl</strong>.<br>
Beheimatet bei BMT Maritime Consultants, Gdansk, Poland<br>
Verwaltet von <a href="mailto:detergent@incredible.bmtmc.gda.pl">
Adam Naguszewski</a>.<br>
Protokollle: ssh, pserver<br>
Wird alle 3 Stunden aktualisiert.<br>
<p>
<li><strong>CVSROOT=anoncvs@rt.fm:/cvs</strong><br>
Beheimatet in Lake in the Hills, Illinois, USA<br>
Verwaltet von <a href="mailto:jcs@rt.fm">
Joshua Stein</a>.<br>
Protokolle: ssh<br>
Wird alle 3 Stunden aktualisiert.<br>
SSH Fingerprints:<br>
(RSA) 1024 54:74:ca:17:d0:07:c3:53:b7:7e:1d:9b:10:bf:04:37<br>
(DSA) 1024 46:78:40:52:7a:18:f9:0e:68:61:b0:27:29:f9:d9:c4<br>
<p>
<li><strong>CVSROOT=anoncvs@cvs.openbsd.cz:/cvs</strong><br>
Beheimatet in Prag, Tschechische Republik.<br>
Verwaltet von <a href="mailto:vlada@openbsd.cz">Vladimir Kotal</a>.<br>
Protokolle: ssh, pserver.<br>
Wird alle 4 Stunden aktualisiert.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.openbsd.org.ua:/cvs</strong><br>
Beheimatet in Kiev, Ukraine<br>
Verwaltet von <a href="mailto:hunter@dg.net.ua">Sergey Smitienko</a>.<br>
Protokolle: ssh<br>
Wird alle 6 Stunden aktualisiert.<br>
<p>
<li><strong>CVSROOT=openbsd@openbsd.bug.it:/cvs</strong><br>
Beheimatet in Modena, Italien.<br>
Verwaltet von <a href="mailto:jwk@bug.it">Giacomo Cariello</a>.<br>
Protokolle: ssh, Passwort "openbsd"<br>
Wird alle 6 Stunden aktualisiert.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.openbsd.lt:/cvs</strong><br>
Beheimatet bei TVK, Cable TV and Internet Services, Litauen.<br>
gepflegt von <a href="mailto:helpas@ebox.lt">Donatas Budvytis</a>.<br>
Protokolle: ssh<br>
Wird alle 3 Stunden anoncvs.usa.openbsd.org aktualisiert.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs2.de.openbsd.org:/cvs</strong><br>
Der Host ist auch bekannt als <strong>openbsd.informatik.uni-erlangen.de</strong>.<br>
Beheimatet an der Universit&auml;t von Erlangen-N&uuml;rnberg.<br>
Verwaltet von <a href="mailto:Alexander.Gernler@informatik.stud.uni-erlangen.de">Alexander von Gernler</a>.<br>
Protokolle: ssh, ssh port 2022, pserver<br>
Wird alle 2 Stunden aktualisiert.<br>
SSH Fingerprints:<br>
(RSA) 1024 fc:94:b0:c1:e5:b0:98:7c:58:43:99:76:97:ee:9f:b7<br>
(DSA) 1024 a9:00:3f:ba:50:81:16:d1:e9:b8:4f:3c:b2:10:e2:6c<br>
<p>
<li><strong>CVSROOT=anoncvs@mirror.osn.de:/cvs</strong><br>
Beheimatet in N&uuml;rnberg.<br>
Verwaltet von <a href="mailto:aw@osn.de">Armin Wolfermann</a>.<br>
Protokolle: ssh<br>
Wird alle 4 Stunden aktualisiert.<br>
SSH Fingerprints:<br>
(RSA) 1024 f2:73:d2:f6:e3:01:ef:ca:3b:e7:6c:80:b6:bd:bb:84<br>
(DSA) 1024 fb:33:05:62:96:20:cf:88:7e:10:cb:8d:91:72:57:32<br>
<p>
<li><strong>CVSROOT=anoncvs@openbsd.chem.uw.edu.pl:/cvs</strong><br>
Beheimatet in Warschau, Polen.<br>
Verwaltet von <a href="mailto:admin@chem.uw.edu.pl">Piotr Klein</a>.<br>
Protokolle: ssh<br>
Wird alle 3 Stunden aktualisiert.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.student.pw.edu.pl:/cvs</strong><br>
Beheimatet an der Technischen Universit&auml;t von Warschau, Polen.<br>
Verwaltet von <a href="mailto:dmarcink@elka.pw.edu.pl">Darek Marcinkeiwicz</a>.<br>
Protokolle: ssh<br>
Wird alle 3 Stunden aktualisiert.<br>
</ul>


<p>
<em>Hinweis:</em> wenn dein Server mit unvollst&auml;ndigen oder falschen
Informationen aufgelistet wurde, schreibe bitte eine Mail an :
<a href="mailto:beck@openbsd.org"><tt>beck@openbsd.org</tt></a>
<p>
Du m&ouml;chtest vielleicht 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute&amp;sektion=8&amp;format=html">traceroute(8)</a>
benutzen, um den Server zu finden, der dir "leitungsm&auml;ssig"
am n&auml;chsten ist, zu dem also die k&uuml;rzeste &Uuml;bertragungsstrecke besteht.
Probleme mit dem Server sollten an den
<b>maintainer</b> des fraglichen Servers gemailt werden.
</dl>

<h3><a name="CRYPTO"><font color="#0000e0">Krypto Sourcen mit CVS(1) holen.</font></a></h3>

<p>
<strong>WICHTIGER HINWEIS:</strong>
Es gibt ein paar Dinge bez&uuml;glich Kryptografie, die jedem bewusst sein sollten:
<ul>
<li>Die OpenBSD-Quellcodes kommen aus Kanada.
Nach 
	<a href="http://www.efc.ca/pages/doc/crypto-export.html">
	der Untersuchung eines Kanadiers</a>
sowie nach
	<a href="http://axion.physics.ubc.ca/ECL.html">
	der Export Kontrolliste von Kanada</a>
ist es legal, Krypto-Software aus Kanada in alle Welt zu exportieren.
<p>
<li>
Trotzdem solltest du, wenn du ausserhalb der USA oder Kanada wohnst, die 
kryptografischen Teile der Software nicht von einen anoncvs-Server holen, der in
den USA beheimatet ist.
Die betroffenen Dateien sind:
<ul>
<li>src/kerberosIV/*
<li>src/kerberosV/*
<li>src/lib/libdes/*
<li>src/lib/libc/crypt/crypt.c
<li>src/lib/libc/crypt/morecrypt.c
<li>src/sys/crypto
<li>src/sys/netinet
<li>src/usr.sbin/afs/src/rxkad/*
<li>XF4/xc-mit/lib/Xdmcp/Wraphelp.c
<li>XF4/xc-old/lib/Xdmcp/Wraphelp.c
<li>XF4/xc/lib/Xdmcp/Wraphelp.c
</ul>
Aufgrund der USA ITAR Munitionsliste kann Krypto-Software aus den
USA nur nach Kanada exportiert werden.
<p>
<li>Das OpenBSD Projekt sucht weiterhin nach mehr anoncvs-Servern -- lies einfach weiter,
um herauszufinden, wie du helfen kannst.
</ul>

<h3><a name="EXAMPLE"><font color="#0000e0">Beispiele f&uuml;r CVS(1).</font></a></h3>

<p>
HINWEIS: Wenn du von einem branch (wie z.B. dem patch branch)
auf <i>current</i> wechseln willst, musst du das <code>-A</code>
flag f&uuml;r cvs benutzen. Ansonsten ist dieses flag von geringer Bedeutung. Einige &auml;ltere
Versionen der OpenBSD Dokumentation hat die Benutzung dieses flags in vielen F&auml;llen empfohlen.
Von der Benutzung dieses flags wird abgeraten, es sei denn es ist absolut notwendig.

<p>
Eine Beispielnutzung eines anoncvs-Servers w&auml;re :
<pre>
% <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
% <strong>cd /tmp</strong>
% <strong>cvs get src/sys/arch/sparc</strong>
    [kopiert die Dateien vom Server auf deine Maschine]
% <strong>cvs log src/sys/arch/sparc/sparc/locore.s</strong>    
    [zeigt das commit log f&uuml;r die ausgew&auml;hlte Datei]
% <strong>cvs diff -bc -r1.1 -r1.5 src/sys/arch/sparc/sparc/locore.s</strong>    
    [zeigt die Unterschiede zwischen den Versionen  1.1 und Version 1.5]
</pre>

<p>
<a name="pserver">Um einen cvs ``pserver'' zu benutzen (eine  direkte TCP Verbindung 
anstelle einer mit ssh oder rsh) musst du dich einmal einloggen:</a>

<pre>

% <strong>setenv CVSROOT :pserver:anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
% <strong>cvs login</strong>
(Logging in to anoncvs@anoncvs1.ca.openbsd.org)
CVS password: <strong>anoncvs</strong>
    [Schreibt eine Zeile in ~/.cvspass (der Dateiname wird von CVS_PASSFILE &uuml;berschrieben).	]
    [Eine Beispielzeile von ~/.cvspass, nachdem ich 'blah' als Passwort getippt 		]
    [habe, ist: 										]
    [:pserver:anoncvs@anoncvs5.usa.openbsd.org:/cvs Au'yc     			                ]
    [Nachdem man sich EINMAL eingeloggt hat, funktioniert jedes CVSROOT-Kommando 		]
% <strong>cvs get ksrc-i386 ksrc-common</strong>    
    [Erlaubt dir NUR das zu empfangen, was man zum "Bauen" eines i386-Kernels braucht 		]
</pre>

<p>
So w&uuml;rde jemand, der anoncvs regelm&auml;ssig benutzt, seinen source tree updaten:
<ul><li>Ganz zu Anfang holt man als erstes einen source tree:

<p> (Wenn du <i>current</i> folgst):
<pre>
       # <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
       # <strong>cd /usr</strong>
       # <strong>cvs -q get -P src</strong>
</pre>

<p> (Wenn du dem patch branch f&uuml;r 3.5 folgst):
<pre>
       # <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
       # <strong>cd /usr</strong>
       # <strong>cvs -q get -rOPENBSD_3_5 -P src</strong>
</pre>
 </li>

<li> Danach kann man ihn jederzeit so updaten:
<p> (Wenn du <i>current</i> folgst):
<pre>
       # <strong>cd /usr/src</strong>
       # <strong>cvs -q up -Pd</strong>
</pre>


<p> (Wenn du dem patch branch f&uuml;r 3.5 folgst):
<pre>
       # <strong>cd /usr/src</strong>
       # <strong>cvs -q up -rOPENBSD_3_5 -Pd</strong>
</pre>

Jedesmal, wenn du das so ausf&uuml;hrst, wird ein /usr/src tree mit dem des CVS-Servers
abgeglichen bzw. synchronisiert. Deine lokalen &Auml;nderungen w&uuml;rden nat&uuml;rlich nicht zerst&ouml;rt,
sondern, wenn m&ouml;glich, eingebaut. Wenn du ein obj-Verzeichnis benutzt 
(obj symbolische Links sind dabei nicht gemeint!), solltest du "-I obj" dem Kommando hinzuf&uuml;gen, da
cvs dann davon abgehalten wird, jedesmal eine Warnung auszugeben, wenn es einem 
obj-Verzeicnis begegnet, das nicht im repository enthalten ist.

<p>
<li> HINWEIS: 
Wenn du einen Source tree updatest, den du beim ersten Mal von einem anderen
Server geholt hast, oder auch von CD, dann 
<strong>musst</strong> du die 
<em>-d $CVSROOT</em> Option von cvs benutzen.  
<em>CVS_IGNORE_REMOTE_ROOT</em> Umgebungsvariable setzen.
<pre>
       # <strong>cd /usr/src</strong>
       # <strong>cvs -d $CVSROOT -q up -Pd</strong>
</pre>
</li>
</ul>

<p>
Das <a name="ports">Updaten von</a> <a href="../ports.html">ports</a> funktioniert genauso wie bei src:
<ul><li>
<p> (Wenn du <i>current</i> folgst):
<pre>
	# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
	# <strong>cd /usr</strong>
	# <strong>cvs -q get -P ports</strong>
</pre>
<p> (Wenn du dem patch branch f&uuml;r 3.5 folgst):
<pre>
       # <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
       # <strong>cd /usr</strong>
       # <strong>cvs -q get -rOPENBSD_3_5 -P ports</strong>
</pre>
<li> Danach kann der tree jedesmal so upgedatet werden:
<p> (Wenn du <i>current</i> folgst):
<pre>
	# <strong>cd /usr/ports</strong>
	# <strong>cvs -q up -Pd</strong>
</pre>
<p> (Wenn du dem patch branch f&uuml;r 3.5 folgst):
<pre>
       # <strong>cd /usr/ports</strong>
       # <strong>cvs -q up -rOPENBSD_3_5</strong>
</pre>
</li>
</ul>

Im obigen Beispiel ist <i>'-q'</i> optional, und nur dazu gedacht den
Output von cvs zu minimieren. Alle diejenigen, die gerne ganze
Bildschirmseiten von Ausgaben sehen, k&ouml;nnen diese Option getrost 
weglassen.

<p>
oder auch um ein "diff" eines lokal gepatchten Moduls zu machen (hier <i>cd.c</i>), das man
z.B. in einen Bug-Report einf&uuml;gen kann:
<pre>
       # <strong>cd /usr</strong>
       # <strong>cvs diff -u src/sys/scsi/cd.c &gt; /tmp/patch</strong>
</pre>

<p>
Die <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">cvs(1) man page</a>
(included with the CVS sources) hat noch viel mehr
Informationen, wie man CVS benutzen kann.

<p>
 
<h4>X11 Source tree</h4>

Anoncvs Mirrors haben auch den OpenBSD X11 (XFree86) Source tree. Du kannst das obige Rezept
anpassen, um deinen XFree86 Source tree von der dritten CD upzudaten.
Du kannst den XFree86 3 source tree mit dem X11 cvs Modul kopieren oder herunterladen,
obwohl das current Modul von XFree86 4 XF4 ist.
Es gibt zwei Wege die XF4 Quellcodes in <i>/usr/XF4</i> zu bekommen:

<ul>
<li>Den Tree von der CD kopieren (vorrausgesetzt die 3. CD ist unter /mnt gemountet):
<pre>
        # <strong>cd /mnt; cp -Rp XF4 /usr</strong>
</pre>
<li>einen union mount mit der CD unter einem schreibbaren Verzeichnis benutzen.
<pre>
        # <strong>mount -t union -o -b /mnt/XF4 /usr/XF4</strong>
</pre>
</ul>

Danach kann man <i>/usr/XF4</i> mit cvs benutzen. Du kannst z.B.
ein Update auf den aktuellsten Stand, also -current machen (vorrausgesetzt du hast die 
<var>CVSROOT</var> Umgebungsvariable gesetzt):

<pre>
        # <strong>cd /usr/XF4</strong>
        # <strong>cvs -q update -Pd</strong>
</pre>

<p>
<strong>Warnung:</strong>
Beim Benutzen von cvs solltest du darauf achten ,dass du dich im jeweiligen
"root" des Verzeichnisses befindest ,dass du holen willst, oder in einem 
ganz anderen, wie z.B. /tmp. Kommandos wie "get" k&ouml;nnen willk&uuml;rlich einen
"subtree" im momentanen Verzeichnis erzeugen, der bei jedem Update weiter ausgebaut
wird.

<p>
Der anoncvs-Service gibt Entwicklern, die noch Gr&uuml;nschn&auml;bel sind, eine 
Chance, CVS-Operationen kennenzulernen und gr&uuml;ndlich in den 
Entwicklungsprozess eingef&uuml;hrt zu werden, bevor sie "commit" access bekommen
-- als Resultat ihrer wertvollen und hochqualitativen F&auml;higkeiten
werden sie nat&uuml;rlich sp&auml;ter vollen Entwickler-Zugriff bekommen. Auch Leute, die
patches erstellen, k&ouml;nnen diese "diffs" gegen den CVS tree erstellen, was die
Integration dieser Patches erleichtert.

<h3><a name="WHICH"><font color="#0000e0">rsh(1) oder ssh(1) benutzen?</font></a></h3>

<p>
<strong>Anoncvs: rsh vs. ssh</strong>
<br>
Standardm&auml;ssig nutzt der CVS client ssh ("secure shell":
<a href="http://www.openssh.com/">OpenSSH</a>) um mit dem CVS Server zu sprechen.

<p>
Viele der CVS sites unterst&uuml;tzen rsh aus Sicherheitsgr&uuml;nden auch gar nicht mehr. 
Lokale Probleme wie Firewalls oder fehlerhafte Protokollemulatoren wie etwa slirp k&ouml;nnen
die Benutzung von rsh ebenso verhindern. Falls du rsh tortzdem benutzen willst, musst du die
<var>CVS_RSH</var> Umgebungsvariable auf rsh zeigen lassen
(&uuml;blicherweise <strong>/usr/bin/rsh</strong>).

<p>
Wenn eine lokale policy ausgehende Verbindungen auf den Standard port von SSH (22) verbietet,
kann anstattdessen auch port 2022 benutzt werden. Allerdings akzeptieren nicht alle CVS Server 
Verbindungen auf diesem port.  Weiterhin akzeptieren die meisten anoncvs Server die Option
<strong>none</strong> cipher nicht mehr, da sie aus Sicherheitsgr&uuml;nden in den aktuellen
Versionen von ssh deaktiviert wurde. Achja, versuche auch nicht die Kompression einzuschalten,
da CVS das bereits sowieso tut.

<p>
Man kann beispielsweise etwas wie das hier in seine
<strong>$HOME/.ssh/config</strong> Konfigurationsdatei eintragen, um die oben erw&auml;hnten 
Stolpersteine und Einschr&auml;nkungen zu umgehen:
<pre>
	Host anoncvs.ca.openbsd.org
	    Compression no
	    Port 2022
</pre>

<p>
CVS ist recht gespr&auml;chig, wenn man es startet; um das einzud&auml;mmen, kannst du das hier benutzen:

<pre>
       <strong>% setenv CVS_CLIENT_PORT -1</strong>
</pre>

<p>

<h3><a name="SUP"><font color="#0000e0">Das CVS repository mittels sup(1) spiegeln.</font></a></h3>

<p>
User, die gerne den OpenBSD CVS tree selber spiegeln m&ouml;chten,
k&ouml;nnen das jetzt mit <em>anoncvs.usa.openbsd.org</em> oder
<em>anoncvs3.usa.openbsd.org</em>
(dies sind verschiedene Maschinen) tun.
Dies ist der cvs tree, <b>kein</b> gepr&uuml;fter source tree.  Er ist nur dann n&uuml;tzlich
wenn du schnelle cvs Operationen (diff, annotate, etc) durchf&uuml;hren willst,
oder wenn du viele verschiedenene source trees hast und die neuen Daten nur einmal
transferieren willst (du kannst die anderen dann anhand deiner Kopie auf den
neuesten Stand bringen).
<p>
Ein einfaches SUPFILE w&auml;re:
<pre>
       cvs host=anoncvs.usa.openbsd.org hostbase=/ base=/home delete
</pre>
<p>
was den cvs tree in /home/cvs spiegeln w&uuml;rde, und zwar mit den sup data
Files(Dateien) in /home/sup.  Der komplette OpenBSD cvs tree ist ungef&auml;hr
2,2 Gigabyte gross.

<h3><a name="MIRROR"><font color="#0000e0">Einen anoncvs Mirror aufsetzen.</font></a></h3>

<p>
Wenn du einen neuen anoncvs-Spiegel aufstellen willst, der auch f&uuml;r die
Allgemeinheit zug&auml;nglich sein soll, schreib bitte eine
Mail an den anoncvs
<a href="mailto:sup@openbsd.org">maintainer</a>.
Anoncvs-Spiegel/mirrors ben&ouml;tigen ungef&auml;hr 2,2 GB  Platz auf der Festplatte, und 
brauchen etwa 32MB Swap pro anoncvs-User (jedenfalls wenn der User gr&ouml;ssere
Dinge macht, ansonsten halt weniger, aber trotzdem ben&ouml;tigt anoncvs mehr
Leistung vom Rechner als ftp oder sup).
Solche anoncvs-Maschinen sollten eine exzellente Netzwerkanbindung haben, 
jedenfalls f&uuml;r das Areal, dass sie bedienen sollen.
Ein <a href="../anoncvs.shar">Dokument</a>, dass den Aufbau eines
anoncvs servers beschreibt, ist erh&auml;ltlich.

<h3><font color="#0000e0">Letzte Hinweise:</font></h3>
Nachdem du deinen source tree auf aktuellen Stand gebracht hast,
solltest du die Kommentare 
ganz oben in <kbd>/usr/src/Makefile</kbd> lesen , bevor du einen build versuchst.
Ausserdem solltest du einen neuen Kernel "backen" 
<strong>bevor</strong>
du ein <kbd>make build</kbd> durchf&uuml;hrst, wenn das dann &uuml;berhaupt m&ouml;glich ist.
In manchen F&auml;llen kann es notwendig sein das 
<kbd>config</kbd> utility neu zu &uuml;bersetzen und zu installieren, bevor
du den Kernel &uuml;bersetzen kannst.  Wenn ein <kbd>config GENERIC</kbd> versagt, 
ist das vermutlich genau der Fall.
<p>
Es ist wichtig zu verstehen, dass ein Upgraden von einem "release", also einer offiziellen
Version hin zu -current, dem aktuellsten Quellcode, recht kompliziert sein kann, und zwar
aufgrund verschiedener Abh&auml;ngigkeiten, die nicht offensichtlich sein m&uuml;ssen.
Daher wird empfohlen, zun&auml;chst den letzten Snapshot zu installieren, bevor du
ein &Uuml;bersetzen des neuesten Quellcodes versuchst.

<hr>
<a href="index.html"><img height="24" width="24" src="../back.gif" border="0" alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: anoncvs.html,v 1.207 ]
<br>
$Translation: anoncvs.html,v 1.94 2004/08/02 07:53:23 grunk Exp $
</small>
<br><small>$OpenBSD: anoncvs.html,v 1.86 2004/08/02 20:20:26 saad Exp $
</small>
</body>
</html>
