<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD/hppa</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="Die OpenBSD/hppa Seite">
<meta name="keywords" content="openbsd,hppa">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2000 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">

<h2>OpenBSD/hppa</h2>

<hr>

Dieser port zielt darauf ab, die folgenden HP 9000 Modelle zu unterstützen:
705, 710, <b>712</b>, <b>715</b>, 720, <b>725</b>,
730, <b>735</b>, 750, <b>755</b>, J200, J210, J210XC, C100, C110,
B132L, B160L, B180L, C132L, C160L, C180L
(bold bedeutet "läuft soweit bekannt").
Weitere Hardware kann unterstützt werden,
solange sie auf dieser Hardware basiert:
<ul>
<li>HP PA-RISC 7000, 7100, 7150, 7100LC, 7200, 7300LC Prozessoren;
<li>Viper (und andere ?) Memory Controller;
<li>LASI, ASP, WAX Bus/IO Controller;
<li>und EISA Bus Controller;
<li>NCR53C700, NCR53C710, NCR53C720 SCSI I/O Prozessor;
<li>Venom, CRX-8, CRX-24, HCRX-8, HCRX-24 Video Controller;
<li>HIL oder PS/2 Tastatur und Maus;
<li>EISA Geräte funktionieren, aber von ihnen kann nicht gebootet werden,
	allerdings von einigen, die von HP für 700/800 Systeme produziert wurden.
</ul>
Systeme, die eventuell arbeiten : 
<ul>
<li>pa8k-basierte Systeme (im 32-bit Modus);
<li>HP 9000 834, 835, 836, 844, 845, 846;
<li>HP 9000 E23, E25, E35, E45, E55;
<li>HP 3000 908, 918, 928, 938;
<li>Hitachi VQ200, VQ210, und einige andere nicht-HP Workstations;
<li>Precision Book von RDI Computer Corporation (naja, unwahrscheinlich)
<li>HP VME und VXI Single Board Systeme (benötigt zumindest VME)
</ul>
<br>
Hardware wird für dieses Projekt benötigt,
siehe <a href="../want.html">"Wanted List"</a>. (kontaktiere <a href=mailto:mickey@openbsd.org>mickey</a>).

<h3><strong>Status:</strong></h3>
Das System autoconfig benutzt jetzt <a href=http://hppa.fries.net/#boot_lif>bootable images</a>, 
und befindet sich auf dem Weg zum single-user.

<h3><strong>Geschichte:</strong></h3>
Dieses Projekt wurde in den Tagen gestartet, als die einzigen Open Source
Betriebssysteme für HP PA-RISC Computer 
<a href=http://www.cs.utah.edu/projects/flux/lites/html>Lites</a> und
<a href=http://www.osf.org/mall/os/pa-mklinux>MkLinux</a> waren.
Diese zwei Quellen boten eine Menge an Informationen und Code für einen
ersten Anfang des OpenBSD/hppa port.
Das <a href=http://www.cs.utah.edu/~mike/hpbsd/hpbsd.html>HPBSD</a>
ist mit propietärem HP Code und USL Lizensierung belastet und ist 
daher nicht allgemein und öffentlich erhältlich.
Einer der direkten Vorteile von vorhergehenden Porting-Versuchen
(neben dem Code natürlich ;) ist die Unterstützung für HP PA-RISC
in GCC und binutils, was ein schnelles Vorwärtskommen und ein schnelles
Erzeugen der cross-tools envinroment für die Entwicklung möglich machte.
<p>
Später entschied sich HP dazu, einen
<a href=http://thepuffingroup.com/parisc/>Linux</a> port auf PA-RISC
Maschinen zu unterstützen, was in einer propietär dokumentierten Version
resultierte, die auch noch eine andere Klasse von Maschinen (die 9000 Maschinen) 
zum Ziel hatte. 
<p>
Also hier ist jetzt eine Geschichte des OpenBSD/hppa port
<small>(Es gibt kein Datum, aber benutze doch einfach
<a href=anoncvs.html>cvs</a> um herauszufinden, was wann passiert ist)</small>:
<ul>
<li>kernel symbol table wird von /boot geladen (symbolisches Debugging !)
<li>init(8) arbeitet fein, die folgende single-user shell <u>steigt aus</u>,
	was wahrscheinlich bedeutet, dass sie ein Problem hat, sich selber zu initialisieren.
<li>root über nfs, swap über nfs
<li>i82596-basiertes ethernet (if_ie), im ungecacheten Memory Modus
<li>Der Grossteil des MD kernel code ist geschrieben 
<li>DDB Unterstützung mit Ausnahme von watchpoints und single-stepping
<li>disk boot funktioniert
<li>Stinger (*CRX-*) Graphic Board Treiber
<li>LASI, ASP, WAX und EISA Bus Adapter
<li>com, lpt, fdc Treiber (bisher kein fd ;)
<li>PDC Treiber
<li>kernel bootstrap funktioniert
<li>network boot arbeitet durch das LIF Image
<li>cross-tools können übersetzt werden/funktionieren
</ul>
<h4>Dokumentation</h4>
<small>(Das meiste wurde von HP für das 
<a href=http://thepuffingroup.com/parisc/>Linux/parisc</a> Projekt veröffentlicht)</small>:
<ol type=1>
<li><a href=http://devresource.hp.com/devresource/Docs/Refs/PA1_1/>HP PA-RISC CPUs</a>
       <ol type=a>
<li><a href=http://puffin.external.hp.com/docs/PCXL_ers.ps>PA7100LC CPU ERS</a>
<li><a href=http://puffin.external.hp.com/docs/pcxl2_ers.ps>PA7300LC CPU ERS</a>
       </ol>
<li><b>Processor Dependent Code/I/O Dependent Code Interface</b><br> <small>(selected chapters from "PA-RISC I/O Architecture Specification")</small>
       <ol type=a>
<li><a href=http://puffin.external.hp.com/docs/pdc32.pdf>PDC 1.1</a>
<li><a href=http://puffin.external.hp.com/docs/iodc.pdf>IODC 1.1</a>
<li><a href=http://puffin.external.hp.com/docs/ver_nums.pdf>Version and Identification Number Allocation</a>
<li><a href=http://puffin.external.hp.com/docs/data_formats.pdf>Memory Data Formats 2.0</a>
<li><a href=http://puffin.external.hp.com/docs/pdc.pdf>PDC Procedures 2.0</a>
<li><a href=http://puffin.external.hp.com/docs/pdce.pdf>PDC Entry Points 2.0</a>
<li><a href=http://puffin.external.hp.com/docs/os_interface.pdf>OS Interface 2.0</a>
       </ol>
<li><b>Bus controllers/bridges/adaptors</b>
       <ol type=a>
<li><a href=http://puffin.external.hp.com/docs/lasi_ers.ps>LASI Core Bus Adapter (including lan, scsi, serial, lpt controllers)</a>
<li><a href=http://puffin.external.hp.com/docs/dino_ers.ps>Dino PCI bridge</a>,
and <a href=http://puffin.external.hp.com/docs/Dino_3_1_Errata.html>Errata</a>
<li><a href=http://puffin.external.hp.com/docs/elroy_ers.ps>Elroy ERS (Edited for Open Source)</a>
<li>Astro <a href=http://puffin.external.hp.com/docs/astro_intro.ps>Overview</a>, <a href=http://puffin.external.hp.com/docs/astro_errors.ps>Error handling</a>,<a href=http://puffin.external.hp.com/docs/astro_ioc.ps>R2I Operations</a>, <a href=http://puffin.external.hp.com/docs/astro_regmap.ps>Registers Map</a>, <a href=http://puffin.external.hp.com/docs/astro_runway.ps>Runway Interface</a>, <a href=http://puffin.external.hp.com/docs/astro_sysmap.ps>System Mamory Map</a>
       </ol>

<li><a href=http://puffin.external.hp.com/docs/sti.pdf>Stinger graphics</a>
<li><a href=http://www.lsilogic.com/techlib/techdocs/io_standard/770_2_0.pdf>NCR 53C700/710/720 SCSI I/O Prozessoren</a>
    <small>(Die Doku ist tatsächlich für den 770, von dem gesagt wird, er sei kompatibel)</small>
<li>Intel <a href=http://developer.intel.com/design/network/datashts/290219.htm>i82596DX/SX</a> und <a href=http://developer.intel.com/design/network/datashts/290218.htm>i82596CA</a> Ethernet Controller
</ol>

<h4>Cross-Tools bauen/erzeugen:</h4>
<p>
<pre>
cd /usr/src
sudo make TARGET=hppa cross-tools
</pre>
</p>
<p>
Der Cross-Tools "Bau-Prozess" kann auf der libc-Ebene versagen,
das ist okay, da die libc Unterstützung noch nicht fertig ist.
</p>

<h4>Erzeugen der boot.lif Datei mit Hilfe der cross-tools:</h4>
<p>
<pre>
cd /sys/arch/hppa/stand
make obj
set cross=(/usr/cross/hppa/usr/bin)
make MACHINE=hppa MACHINE_ARCH=hppa \
	"AS=$cross/as" "CC=$cross/cc" \
	"CPP=$cross/cpp" "LD=$cross/ld" \
	"AR=$cross/ar" "STRIP=$cross/strip" \
	"LORDER=$cross/lorder" "NM=$cross/nm" \
	"RANLIB=$cross/ranlib" "SIZE=$cross/size"
</pre>
</p>
<p>
Dann hat man eine <a href=http://hppa.fries.net/#boot_lif><em>boot.lif</em></a>
Datei, um dann im obj-Verzeichnis zu booten.
Dieses Image kann ein <em>diskless</em> kernel image enthalten, wenn eins in
 <em>sys/arch/hppa/compile/SHEPHERD_PIE/bsd</em> enthalten war.
<br>
Der Kernel cross-build Prozess ist dem für das Booten ähnlich, konsultiere einfach
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=config&apropos=0&sektion=0
&manpath=OpenBSD+Current&format=html>config(8)</a>
und
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=options&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html>options(8)</a>
für die Kernel build Options und Konfigurationen.
</p>
<h4>Bisherige Entwicklung:</h4>
<pre>
BOOT_ADMIN&gt; boot lan isl

Booting





&gt;&gt; OpenBSD/hppa BOOT 0.5
boot&gt; boot bsd
booting lf0a:/bsd: 991232+61440+208896 total=0x15a408 start 0x13000
[preserving 82952 bytes of bsd symbol table ]
Copyright (c) 1982, 1986, 1989, 1991, 1993
The Regents of the University of California.  All rights reserved.
Copyright (c) 1995-1999 OpenBSD. All right Reserved.  http://www.OpenBSD.org

OpenBSD 2.6-current (SHEPHERD_PIE) #1938: Sun Dec 12 13:02:59 EST 1999
    mickey@lucifier:/sys/arch/hppa/compile/SHEPHERD_PIE
HP9000/712/80 (King Gecko) PA-RISC 1.1
real mem = 16777216 (73728 reserved for PROM, 12582912 used by OpenBSD)
avail mem = 14028800
using 200 buffers containing 819200 bytes of memory
mainbus0 (root) [flex fff80000]
pdc0 at mainbus0
mem0 at mainbus0 hpa fffbf000: viper rev 0, ctrl 40400100&lt;eisa_prf&gt;, size 16M
cpu0 at mainbus0 hpa fffbe000: PA7000 v0.0, lev 1, cat A, 80 MHz clock
cpu0: shadows, 128K/128K D/I cache, 64 shared TLB, 8 shared BTLB
lasi0 at mainbus0 hpa f0100000 irq 28: ver 0
gsc0 at lasi0
"PS/2 port" at gsc0 (type a, sv 84) hpa f0108100 not configured
"PS/2 port" at gsc0 (type a, sv 84) hpa f0108000 not configured
"floppy controller" at gsc0 (type a, sv 83) hpa f010a000 not configured
"Advanced audio (no beeper)" at gsc0 (type a, sv 7b) hpa f0104000 not configured
lpt0 at gsc0 hpa f0102000 irq 7
com0 at gsc0 hpa f0105000 irq 5: ns16550a, 16 byte fifo
ie0 at gsc0 hp f0107000 irq 8: LASI/i82596CA rev 0, address 08:00:09:1b:3c:08
"Core SCSI" at gsc0 (type a, sv 82) hpa f0106000 not configured
sti0 at mainbus0 hpa f8000000: HPA208LC1280 rev 8.4, rom @ 0xf0080000
sti0: 2048x1024 frame buffer, 1280x1024 display, offset 0x0
sti0: 8x16 font type 1, 16 bpc, charset 0-255

</pre>
</p>
<small>Die Info wurde wurde vom Bildschirm abgetippt, entschuldige jegliche Rechtschreibfehler</small>
<hr>
Um die <a href=http://hppa.fries.net/#boot_lif>boot.lif</a> Dateien zu benutzen
musst du deinen Server vorbereiten und deine Maschine anweisen, vom Netzwerk zu booten:
<ol><li>Server Setup</li><br>
  <ul><li>
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=rbootd&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html>rbootd</a> muss aufgesetzt werden<br>
    <ul><li><bold>/etc/<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=rbootd&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html>rbootd</a>.conf </bold> enthält eine Zeile pro Maschine
		die du eingegeben hast, um vom Server zu booten.  Jede Zeile enthält die
		Ethernet Addresse der Client hppa Maschine, und den Dateinamen
		die vom tftp server geladen werden soll.  Zum Beispiel:
	<pre>
	8:0:9:70:c4:11    <a href=#boot_lif>boot.lif</a>    # 9000/720
	8:0:9:19:fb:a0    <a href=#boot_lif>boot.lif</a>    # 9000/725
	</pre>
	</li></ul></li>
     <li> Weiteres zum Server-Setup unter : <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html>diskless(8)</a>.</li>
 </ul>
<li>Client Network Boot</li><br>
<ul><li>BOOT_ADMIN <br>
	um zum BOOT_ADMIN Prompt zu gelangen, musst du die <em>\<esc\></em> Taste drücken sobald
	Maschine aktiv wird. Sobald sie nach bootbaren Geräten sucht, tippe 'a' um
	zum 'BOOT_ADMIN' prompt zu gelangen.
    </li>
    <li>network boot command <br>
	Einmal am 'BOOT_ADMIN' prompt angelangt, tippe:
<pre>
	BOOT_ADMIN> boot lan isl
</pre>
	... und du bist auf dem Weg boot.lif zu booten!
    </li>
</ul>
</ol>
<hr>
<a href=plat.html><img height=24 width=24 src=../back.gif border=0 alt=OpenBSD></a> 
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: hppa.html,v 1.40 ]
<br>
$Translation: hppa.html,v 1.4 2000/06/15 19:01:19 jufi Exp $
<br>
<small>$OpenBSD: hppa.html,v 1.4 2000/06/15 19:11:42 jufi Exp $</small>
</body>
</html>
