<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD-Patchbranches</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="stable">
<meta name="keywords" content="openbsd,anoncvs,updates,stable">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2005 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238E">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color=#e00000>Patchbranches</font><hr></h2>

<p>
<ul><h3>Inhaltsverzeichnis</h3>
<li><a href="#whatis">Was ist der Patchbranch?</a>
<li><a href="#getting">Den Patchbranch beziehen</a>
<li><a href="#building">Ein System aus dem Patchbranch übersetzen</a>
</ul>
</p>
<hr>

<a name="whatis"></a>
<h3><font color=#0000e0>Was ist der Patchbranch?</font></h3>

<p>
OpenBSD hat beginnend mit 2.7 einen Source-Tree, der Patches und Fixes
enthält - d.&nbsp;h. zum einen die Patches, die auf der
<a href="errata.html">Errataseite</a> aufgeführt werden, und zum
anderen weitere simple Korrekturen, die keinen solchen Eintrag
verdienen. Dieser Source-Tree steht neben dem current-Quelltext über
<a href="anoncvs.html">anoncvs</a> zur Verfügung. Benutzer können sich
aussuchen, welchem Branch sie folgen wollen:<p>
<ul> 
<li>Bei dem letzten Release bleiben und die Patches per Hand einspielen.
<li>Den <b>Patchbranch</b> benutzen, der die wichtigsten Patches
    enthält.
<li>Den <b>current-Quelltext</b> verwenden, um die neuesten
    Funktionalitäten zu nutzen.
</ul>
<p>
<!-- Das <a href="../plus.html">Daily Changelog</a> enthält (neben
anderen Dingen) Details darüber, welche Änderungen in den
Patchbranch aufgenommen wurden. -->
Generell gilt, dass alle Patches innerhalb von 48 Stunden nachdem ein
Eintrag in die <a href="errata.html">Errataliste</a> erfolgte in den
Patchbranch eingefügt werden. Andere Patches für das jeweilige Release
können ebenfalls eingefügt werden, was aber von den folgenden
Bedingungen abhängig ist:
<ul>
<li>Die Patches müssen einfach, schnell und offensichtlich 100%ig
    korrekt sein.
<li>Einträge in die Errataliste werden für Fehler gemacht, die viele
    Leute betreffen. Andere Patches werden aber auch dann eingefügt,
    wenn zwar nur wenige Leute betroffen sind, diese aber besonders
    stark.
<li>Bitte frage nicht nach großen Subsystemen oder Patches, die
    eingefügt werden sollen. Den Patchbranch zu pflegen kostet viel
    Zeit und Mühe, die sinnvoller investiert wäre, unser nächstes
    Release besser zu machen.
<li>Ausnahme der obigen Regeln sind OpenSSH-Patches, die in jedem Fall
    eingefügt werden.
</ul>
<p>

<a name="getting"></a>
<h3><font color=#0000e0>Einen Stablebranch beziehen</font></h3>

<p>
Um den Patchbranch für ein spezielles Release von OpenBSD zu
bekommen, kannst du entweder den bereits existierenden Source-Tree
aktualisieren (von <a href="ftp.html">FTP</a> oder der
<a href="orders.html">CD</a>) oder den Quelltext frisch von
einem <a href="anoncvs.html">AnonCVS</a>-Server beziehen (Vorsicht:
Das ist eine ganze Menge Quelltext!).
Instruktionen, um den Patchbranch zu bekommen, gibt es in der
Sektion <b>Den Anfang mit AnonCVS finden</b> der
<a href="anoncvs.html#starting">AnonCVS-Dokumentation</a>.
Denk daran, dass die Patchbranches nicht dafür vorgesehen sind, um
von einem Release auf ein anderes zu wechseln, z.&nbsp;B. von 3.7 auf
3.8. Sie sind nur sinnvoll, um die Patches auf dem aktuellen Stand zu
halten. Wenn du versuchst, von einem Release auf das nächste mittels
Quelltext zu wechseln, lies bitte die
<a href="../faq/de/upgrade38.html">Upgradeanleitung</a>. Außerdem
kannst du nicht von -current zurück auf -stable wechseln, da es dabei
Versionsprobleme mit den Bibliotheken gäbe.

<a name="building"></a>
<h3><font color=#0000e0>Ein System aus dem Patchbranch
übersetzen</font></h3>
Sobald du erstmal einen Source-Tree über
<a href="anoncvs.html">anoncvs</a> heruntergeladen hast, musst du das
System neu übersetzen. Folgende Schritte sind dafür notwendig:

<ul>
 <li>den Kernel neu übersetzen
 <li>mit dem neuen Kernel neustarten
 <li>die Binaries neu übersetzen
</ul>

<h4><font color=#0000e0>Den Kernel neu übersetzen</font></h4>

<p>
Um den Standardkernel aus -stable zu übersetzen:
<ul><pre>
# <strong>cd /usr/src/sys/arch/i386/conf</strong>
# <strong>/usr/sbin/config GENERIC</strong>
# <strong>cd /usr/src/sys/arch/i386/compile/GENERIC</strong>
# <strong>make clean &amp;&amp; make depend &amp;&amp; make</strong>
</pre></ul>

<p>
Ersetze <i>i386</i> mit deiner Architektur, z.&nbsp;B.
<i>sparc</i>, <i>alpha</i>, etc.

<h4><font color=#0000e0>Mit dem neuen Kernel neustarten</font></h4>

<p>
Um mit dem neu übersetzten Kernel zu booten:
<ul><pre>
# <strong>cd /usr/src/sys/arch/i386/compile/GENERIC</strong>
# <strong>cp /bsd /bsd.old</strong>          <i>(Eine Kopie des alten Kernels aufbewahren)</i>
# <strong>cp bsd /bsd</strong>               <i>(Den neuen Kernel an seinen Platz kopieren)</i>
# <strong>reboot</strong>
</pre></ul>

<p>
Ersetze die Architektur wie zuvor (statt <i>i386</i> nimmst du deine).
Falls dein System Schwierigkeiten hat, mit dem neuen Kernel zu
booten, nimm einfach wieder den alten, der jetzt <i>bsd.old</i> heißt.

<h4><font color=#0000e0>Die Binaries neu übersetzen</font></h4>

<p> Um die Systembinaries neu zu übersetzen:
<ul><pre>
# <strong>rm -rf /usr/obj/*</strong>
# <strong>cd /usr/src</strong>
# <strong>make obj</strong>
# <strong>cd /usr/src/etc &amp;&amp; env DESTDIR=/ make distrib-dirs</strong>
# <strong>cd /usr/src</strong>
# <strong>make build</strong>
</pre></ul>

<p>Das wird eine Weile dauern&nbsp;...
<hr>
<a href=index.html><img height=24 width=24 src=../back.gif border=0 alt="OpenBSD"></a>
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br><small>
<!--
Originally [OpenBSD: stable.html,v 1.16 ]<br>
$Translation: stable.html,v 1.32 2006/04/24 17:44:27 paldium Exp $<br>
-->
$OpenBSD: stable.html,v 1.30 2006/04/25 08:25:47 saad Exp $
</small>
</body>
</html>
