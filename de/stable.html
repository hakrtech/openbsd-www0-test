<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD Patch Branches</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="stable">
<meta name="keywords" content="openbsd,anoncvs,updates,stable">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-1998 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">

<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif">
<p>
<h2><font color=#e00000>Patch Branches</font><hr></h2>

<p>
<ul><h3>Inhaltsverzeichnis</h3>
<li><a href="#whatis">Was ist der patch branch?</a>
<li><a href="#getting">Den patch branch holen</a>
<li><a href="#building">Mittels patch branch einen neuen "build" erzeugen</a>
</ul>
</p>
<hr>

<a name="whatis"></a>
<h3><font color=#0000e0>Was ist der patch branch?</font></h3>

<p>
Beginnend mit Version 2.7 hat OpenBSD  einen source
tree, der wichtige Patches und Fixes von der
<a href="errata.html">errata</a> Seite  und andere unwichtige, die keinen
errata-Eintrag verdienen, enthält und macht ihn via
via <a href="anoncvs.html">CVS</a> zusätzlich zum 
current source erhältlich.  User können sich aussuchen welchem Zweig (branch)
sie folgen wollen:
<ul> 
<li>Bei der letzten Version blieben und die Patches per Hand einspielen.
<li>Den <b>patch branch</b> benutzen, der die wichtigsten Patches enthält.
<li>Der <b> current source</b> für alle, die den neuesten Features folgen wollen/müssen,
</ul>
<p>
Das <a href="../plus.html">Daily Changelog</a> hat die Details welche Patches in den 
patch branch aufgenommen wurden. ALs generelle Regel gilt, dass alle <a href="errata.html">Errata</a>-Einträge
innerhalb von 48 Stunden in den patch branch eingefügt werden, nachdem der Errata-Eintrag erfolgt ist.
Andere Patches für die jeweilige Version können ebenfalls eingefügt werden, das hängt aber von 
folgenden Bedingungen ab:
<ul>
<li>Die Patches müssen einfach, schnell und offensichtlich 100% korrekt sein.
<li>Errata Einträge werden für Bugs gemacht, die viele Leute betreffen. Andere Patches
werden dann eingefügt, wenn sie ein paar Leute besonders betreffen.
<li>Bitte frage nicht nach grossen Susbsystemen oder Patches, die eingefügt werden sollen.
Den patch branch zu pflegen kostet viel Zeit und Mühe die besser investiert wäre um unsere nächste
Version besser zu machen.
<li>Als Ausnahmen von der obigen Regel werden OpenSSH Patches in jedem Fall in den patch branch eingefügt.
</ul>
<p>

<a name="getting"></a>
<h3><font color=#0000e0>Einen "stable branch" holen</font></h3>

<p>
Um den patch branch für eine spezielle Version von OpenBSD zu bekommen,
kannst du entweder den bereits existierenden Source tree updaten
(von <a href="ftp.html">FTP</a> oder der <a href="orders.html">CD</a>)
oder du kannst den Source Code frisch von einem 
<a href="anoncvs.html">AnonCVS</a> Server beziehen (Vorsicht: Das ist eine ganze Menge Source !)
Instruktionen, um den patch branch zu bekommen gibt es in der <b>Der Anfang mit AnonCVS</b>-Sektion
der <a href="anoncvs.html#starting">AnonCVS Dokumentation</a>.
 
Denk daran, dass die patch branches nicht gut sind, um von einer Version zu einer
anderen zu wechseln, z.B. von 2.5 zu 2.6. Sie sind nur sinnvoll, um die Patches 
auf dem aktuellen Stand zu halten. Wenn du versuchst, von einer Version zur nächsten
mit source zu wechseln, besuche und lese bitte auch die
<a href="../faq/upgrade-minifaq.html">upgrade-minifaq</a>-Seite.

<a name="building"></a>
<h3><font color=#0000e0>Mittels patch branch einen neuen "build" erzeugen</font></h3>
Sobald du erstmal einen source tree via <a href="anoncvs.html">anoncvs</a> geholt hast,
musst du das System neu bauen/erzeugen.  Die Stufen, um das zu erreichen sind:

<ul>
 <li>Den Kernel neu bauen
 <li>Rebooten mit dem neuen Kernel
 <li>Die Binaries neu bauen
</ul>

<h4><font color=#0000e0>Den Kernel neu bauen</font></h4>

<p>
Um den Standardkernel aus stable zu bauen:
<ul><pre>
# <strong>cd /usr/src/sys/arch/i386/conf</strong>
# <strong>/usr/sbin/config GENERIC</strong>
# <strong>cd /usr/src/sys/arch/i386/compile/GENERIC</strong>
# <strong>make clean &amp;&amp; make depend &amp;&amp; make</strong>
</pre></ul>

<p>
Ersetze <i>i386</i> mit deiner Architektur, z.B.
<i>sparc</i>, <i>alpha</i>, etc.

<h4><font color=#0000e0>Rebooten mit dem neuen Kernel</font></h4>

<p>
Um mit dem neu kompilierten Kernel zu booten:
<ul><pre>
# <strong>cd /usr/src/sys/arch/i386/compile/GENERIC</strong>
# <strong>cp /bsd /bsd.old</strong>          <i>(Eine Kopie des alten Kernels ausfbewahren)</i>
# <strong>cp bsd /bsd</strong>               <i>(Den neuen Kernel an seinen Platz kopieren)</i>
# <strong>reboot</strong>
</pre></ul>

<p>
Wie oben ersetze die Architektur, anstatt von <i>i386</i> nimm deine. Wenn dein System 
Schwierigkeiten hat, mit dem neuen Kernel zu booten, kannst du einfach wieder mit dem alten
Kernel booten, der jetzt  
<i>bsd.old</i> heisst.

<h4><font color=#0000e0>Die Binaries neu bauen</font></h4>

<p> Um die System Binaries neu zu erzeugen:
<ul><pre>
# <strong>cd /usr/src</strong>
# <strong>rm -r /usr/obj/*</strong>
# <strong>make obj &amp;&amp; make build</strong>
</pre></ul>

<p>Das wird eine Weile dauern...
<hr>
<a href=index.html><img height=24 width=24 src=../back.gif border=0 alt=OpenBSD></a>
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br><small>
Originally [OpenBSD: stable.html,v 1.4 ]
<br>
$Translation: stable.html,v 1.3 2000/06/12 12:03:47 wim Exp $
<br><small>$OpenBSD: stable.html,v 1.3 2000/06/12 12:05:47 wvdputte Exp $</small>
</body>
</html>

