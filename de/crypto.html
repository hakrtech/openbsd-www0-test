<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict Level 2//EN//2.0">
<html>
<head>
<title>Kryptografie in OpenBSD</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD Kryptografie">
<meta name="keywords" content="openbsd,Kryptografie,openssh,openssl,kerberos">
<meta name="keywords" content="ipsec,photuris,isakmp,ike,blowfish,des,rsa,dsa">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1997 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">
<img align=left alt="[OpenBSD]" height=166 width=197 SRC="../images/blowfish-notext.jpg">
<br>
<br>
<br>
Das Mantra eines jeden guten Sicherheitsingenieurs ist : "Sicherheit
ist keine Produkt, sondern ein Prozess !" Es steckt mehr dahinter
als starke Kryptografie in ein System zu integrieren, es bedeutet das gesamte
System so zu entwerfen, dass alle Sicherheitsmassnahmen, inklusive der 
Kryptografie, zusammen arbeiten. 
<br>
<br>
-- Bruce Schneier, Autor von "Applied Cryptography".
<br clear=all>
<h2><font color=#e00000>Cryptography</font><hr></h2>

<strong>Index</strong><br>
<a href=#why>Warum liefern wir Kryptografie aus?</a>.<br> 
<a href=#ssh>OpenSSH</a>.<br> 
<a href=#prng>Pseudo Zufallszahlen Generatoren</a> (PRNG): ARC4, ...<br>
<a href=#hash>Kryptografische Hash Funktionen</a>: MD5, SHA1, ...<br>
<a href=#trans>Symmetrische Verschlüsselungsverfahren</a>: DES, Blowfish, ...<br>

<a href=#people>Internationale Kryptologen gesucht</a><br>
<a href=#papers>Weitere Quellen</a><br>
<p>
<hr>

<a name=why></a>
<h3><font color=#e00000>Warum liefern wir Kryptografie aus ?</font></h3><p>

In drei Worten:  <strong>weil wir können</strong>.<p>

Das OpenBSD Projekt ist in Kanada beheimatet.<p>

Die <a href=../ECL.html>Export Kontrollliste von Kanada</a>
beinhaltet keine signifikaten Beschränkungen bezüglich des
Exports von Kryptologischer Software, und ist sogar noch offener,
was den Export frei-erhältlicher kryptologischer Software angeht.
Marc Plumb hat 
<a href=http://insight.mcmaster.ca/org/efc/pages/doc/crypto-export.html>
einige Nachforschungen betrieben, um die Kryptologiegesetze zu prüfen
</a>.
<p>

Daher hat das OpenBSD-Projekt Kryptologie in zahlreichen Orten im Betriebsystem
integriert. Wir verlangen, dass die kryptologische Software, die wir benutzen
wollen, 
<a href=policy.html>frei erhältlich ist und guten Lizenzen unterliegt</a>.
Wir benutzen Kryptografie mit garstigen Lizenzen nicht direkt.
Wir verlangen ausserdem, dass solche Software aus Ländern mit vernünftigen
Exportbedingungen kommt, da wir nicht die Gesetze irgendeines Landes brechen 
wollen.
Die kryptografischen Komponenten, die wir momentan benutzen, wurden in
Argentinien, Australien, Kanada, Deutschland, Griechenland, Norwegen und
Schweden geschrieben.
<p>

Wenn wir OpenBSD Versionen oder Snapshots machen, erzeugen wir diese
in freien Ländern, um sicherzustellen, dass sowohl Sourcen, als auch
Binaries frei von Beschränkungen sind.
In der Vergangenheit wurden unsere Versionen in Kanada, Schweden und
Deutschland erzeugt.
<p>

OpenBSD wird mit Kerberos IV ausgeliefert.  Die Codebase, die wir benutzen
ist die exportierbare KTH-basierte Version aus Schweden.
Unsere X11-Sourcen wurden ebenfalls so erweitert, dass sie Gebrauch von
Kerberos IV machen.
Kerberos V Unterstützung wird möglicherweise in 1999 erscheinen, aber
zur Zeit existiert einfach keine frei exportierbare Version von
Kerberos V.
<p>

Heutzutage ist Kryptografie eine wichtige Sache, um die 
<a href=security.html>Sicherheit</a> eines Betriebsystems zu 
erhöhen. Die in OpenBSD integrierte Kryptografie kann in folgende
Bereiche klassifiziert werden :
<p>

<a name=ssh></a>
<h3><font color=#e00000>OpenSSH</font></h3><p>

Was ist das erste, was die Leute tun, nachdem sie OpenBSD installiert 
haben ?  Sie installieren Secure Shell (
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=ssh>ssh</a>)
aus dem Ports-Tree oder den Paketen auf den FTP-Servern. Bis vor 
einiger Zeit zumindest.
<p>

Seit der Version 2.6 hat OpenBSD 
<a href="http://www.openssh.com/">OpenSSH</a> integriert , eine absolut
freie und nicht-patentierte Version von ssh. 
<a href="http://www.openssh.com/">OpenSSH</a> interagiert mit ssh Version 1
und hat viele weitere Features.
<ul>
<li>
Alle Teile restriktiver Natur wurden entfernt (also Patente, siehe
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=ssl>ssl</a>)
jegliche lizensierte oder patentierte Komponenten stammen aus externen
Libraries/Bibliotheken.
</li>
<li>
wurde um das Protokoll Version 1.5 erweitert.
</li>
<li>
beinhaltet Unterstützung für 
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=kerberos>kerberos</a>
Authenfizierung und Ticket-Passing.
</li>
<li>
unterstützt Einmal-Passwörter durch 
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=skey>skey</a>.
</li>
</ul>
<p>

Wir haben eine Version mit freier Lizenz genommen und sie OpenBSD-fiziert.
Wir umgehen das USA-basierte Patent von RSA, indem wir einen einfachen Weg 
anbieten, die libcrypto und libssl Libraries mit RSA einfach herunterzuladen
und zu installieren. 
Diese Pakete basieren auf OpenSSL. Leute, die ausserhalb der USA leben, können
den von RSA patentierten Code frei benutzen, solange sie ihn nicht für
kommerzielle Zwecke einsetzen.
Es sieht so aus, als ob Firmen innerhalb der USA RSA-patentierten Code
ebenfalls frei benutzen können, solange RSA keine Hauptrolle beim 
Geldverdienen spielt.
<p>

Aber auf diesem Wege kriegt fast jeder ein eingebautes ssh.
<p>

<a name=prng></a>
<h3><font color=#e00000>Pseudo Zufallszahlen Generatoren</font></h3><p>

Ein Pseudo Zufallszahlengenerator (PRNG = Pseudo Random Number Generator) versorgt Applikationen mit einem Strom
von Zahlen, die einen erheblichen Einfluss auf die Sicherheit des Systems haben:
<p>

<ul>
<li>Es sollte für einen Aussenstehender unmöglich sein, weitere Zahlen vorauszusagen,
sogar mit Kenntnis der bisherigen Zahlen.
<li>Die generierten Zahlen sollten keine sich wiederholenden Muster aufweisen,
d.h. der PRNG sollte einen sehr langen  Kreislauf haben.
</ul>
<p>

Ein PRNG ist eigentlich nur ein Algorithmus, bei dem mit den selben Startwerten
auch die selben Ergebnisse herauskommen.
Bei einem Multi-User-System gibt es viele Möglichkeiten den PRNG mit
Zufallsdaten zu füttern.
Der OpenBSD Kernel benutzt das Maus-Interrupt-Timing, Netzwerk-Daten-Interrupt-
Verzögerungen, die Zeit zwischen Tastendrücken und Festplatten IO-Informationen
um Zufallszahlen zu bekommen.
Zufallszahlen stehen den Kernel-Routinen zur Verfügung und werden an 
"Userland"-Programme weitergegeben.
Bisher werden Zufallszahlen hierbei benutzt :<p>

<ul>
<li>Dynamische sin_port Zuweisung in bind(2).
<li>PIDs von Prozessen.
<li>IP Datagramm IDs.
<li>RPC Transaktions IDs (XID).
<li>NFS RPC Transaktions IDs (XID).
<li>DNS Abfrage-IDs.
<li>Inode generation numbers, siehe getfh(2) und fsirand(8).
<li>Timing Störungen in traceroute(8).
<li>Stärkere vorübergehende Namen für mktemp(3) und mkstemp(3)
<li>Zufälligkeit zum  TCP ISS hinzugefügt, um Spoofing-Angriffe zu
	verhindern.
<li>
	random padding in IPSEC esp_old Paketen.
<li>Um salts für die verschiedenen Passwort-Algorithmen zu generieren..
<li>Um vorgetäuschte S/Key Herausforderungen zu generieren.
<li>In <a href=http://www.physnet.uni-hamburg.de/provos/photuris/>photurisd</a> 
        und <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd>isakmpd</a>
	um einen guten Beweis für den Schlüssel-Austausch zu haben.
</ul>

<p>
<a name=hash></a>
<h3><font color=#e00000>Kryptografische Hash Funktionen</font></h3><p>

Eine Hash Funktion komprimiert ihre eingegebenen Daten zu einer
Zeichenkette konstanter Länge.
Für eine kryptografische Hash-Funktion ist es undurchführbar folgendes zu finden:

<ul>
<li>Zwei Eingaben, die die selbe Ausgabe erzeugen (Resistent gegen Kollisionen),
<li>Eine andere Eingabe für eine gegeben Eingabe mit der selben Ausgabe
	(2nd preimage resistant).
</ul>
<p>

In OpenBSD werden MD5, SHA1, und RIPEMD-160 als kryptografische Hash-Funktionen benutzt,
z.B. hier:<p>
<ul> 
<li>In <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=skey>S/Key</a>
    um Einmal-Passwörter bereitzustellen.
<li>In <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec>IPsec</a>,
    <a href=http://www.physnet.uni-hamburg.de/provos/photuris/>photurisd</a>
    und
    <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd>isakmpd(8)</a>
    um die Herkunft von Daten zu authentifizieren und Packetintegrität zu gewährleisten.
<li>Um MD5 Passwörter im FreeBSD-Stil bereitzustellen (kein Standard), siehe
    <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=passwd.conf&sektion=5>
    passwd.conf(5)</a>
<li>Für TCP SYN Cookie Unterstützung (kein Standard), siehe
    <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=options&sektion=4>
    options(4)</a>
<li>In libssl zum digitalen Signieren von Nachrichten.
</ul>
<p>

<p>
<a name=trans></a>
<h3><font color=#e00000>Symmetrische Verschlüsselungsalgorithmen</font></h3><p>

Symmetrische Verfahren werden benutzt um Daten zu ver- und entschlüsseln.
Normalerweise werden sie mit einem Schlüsel zur Ver- und einem Schlüssel zur 
Entschlüsselung gebraucht. Die Sicherheit eines symmetrischen Algorithmus sollte
wirklich nur auf den Schlüsseln beruhen.
<p>

OpenBSD stellt symmetrische Verfahren wie DES, 3DES, Blowfish und Cast für Kernel-
und Userland-Programme zur Verfügung, die an vielen Plätzen, wie z.B. an diesen benutzt
werden :
<p>
<ul>
<li>In der libc zum Erstellen von
    <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=blf_key>Blowfish</a>
    Passwörtern.  Dazu siehe auch das <a href=../papers/bcrypt-paper.ps>USENIX paper</a>
    .
<li>In
    <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec>IPsec</a>
    um Vertrauen in die Netzwerkschicht zu bringen.
<li>In Kerberos und einer handvoll "kerberisierter" Applikationen, wie
    <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=telnet>telnet</a>,
    <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=cvs>cvs</a>,
    <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=rsh>rsh</a>,
    <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=rcp>rcp</a>,
    und
    <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=rlogin>rlogin</a>.
<li>In <a href=http://www.physnet.uni-hamburg.de/provos/photuris/>
    photurisd</a> und
    <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd>isakmpd</a>
    um den Austausch von IPsec Shlüsselmaterial zu schützen.
<li>In AFS um die Nachrichten zu schützen, die über das Netzwerk gehen,
    und Vertrauen in den Zugriff auf entfernte Dateisysteme zu gewährleisten.
<li>In libssl um Applikationen über das kryptografisch sichere und zudem
    de-facto-Standard 
    ssl-Protokoll laufen zu lassen.
</ul>

<p>
<a name=people></a>
<h3><font color=#e00000>Internationale Kryptologen gesucht</font></h3><p>

Natürlich braucht unser Projekt Leutem, die an diesen Systemen arbeiten. 
Wenn ein Nicht-amerikanischer Kryptologe, den die oben erwähnten Zwänge
nicht betreffen, an Mitarbeit an unserer eingebettenen Kryptologie 
interessiert ist, soll er uns kontakten.
<p>

<p>
<a name=papers></a>
<h3><font color=#e00000>Weitere Quellen</font></h3><p>

Eine Reihe von Leuten aus dem OpenBSD-Team haben Vorträge und Aufsätze über
die Veränderungen geschrieben, die sie in OpenBSD eingeführt haben.
Die Postscript-Versionen sind hier erhältlich:
<p>

<ul>
<li>A Future-Adaptable Password Scheme.<br>
    <a href=../events.html#usenix99>Usenix 1999</a>,
    by <a href=mailto:provos@openbsd.org>Niels Provos<a/>,
    <a href=mailto:dm@openbsd.org>David Mazieres</a>.<br>
    <a href=../papers/bcrypt-paper.ps>paper</a> and
    <a href=../papers/bcrypt-slides.ps>slides</a>.
<p>
<li>Cryptography in OpenBSD: An Overview.<br>
    <a href=../events.html#usenix99>Usenix 1999</a>,
    by <a href=mailto:deraadt@openbsd.org>Theo de Raadt</a>,
    <a href=mailto:niklas@openbsd.org>Niklas Hallqvist</a>,
    <a href=mailto:art@openbsd.org>Artur Grabowski</a>,
    <a href=mailto:angelos@openbsd.org>Angelos D. Keromytis</a>,
    <a href=mailto:provos@openbsd.org>Niels Provos</a>.<br>
    <a href=../papers/crypt-paper.ps>paper</a> and
    <a href=../papers/crypt-slides.ps>slides</a>.
</ul>

<p>
<hr>
<a href=index.html><img height=24 width=24 src=../back.gif border=0 alt=OpenBSD></a>
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: crypto.html,v 1.50 ]
<br>
$Translation: crypto.html,v 1.7 2000/04/06 19:14:43 jufi Exp $
<br>
$OpenBSD: crypto.html,v 1.2 2000/04/10 11:50:32 wvdputte Exp $
</small>

</body>
</html>
