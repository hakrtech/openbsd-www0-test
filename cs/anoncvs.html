<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-2">
<title>OpenBSD AnonCVS</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="Jak získat po Internetu update OpenBSD pomocí anonymního CVS">
<meta name="keywords" content="openbsd,anoncvs,updates">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2002 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">Anonymní CVS</font></h2>

<hr>

<h3>Obsah</h3>

<ul>
<li><a href="#anoncvs">Co je anonymní CVS?</a>
<li><a href="#CVS">Co je CVS?</a>
<li><a href="#starting">Zaèínáme pou¾ívat anonymní CVS</a>
<li><a href="#using">Sta¾ení a upgradování stromu zdrojových kódù pomocí CVS</a>
<li><a href="#CVSROOT">Dostupné anonymní CVS servery</a>
<li><a href="#CRYPTO">Získání kryptografických zdrojových kódù pomocí cvs(1)</a>
<li><a href="#EXAMPLE">Pøíklady pou¾ití cvs(1)</a>
<li><a href="#WHICH">rsh(1) nebo ssh(1)?</a>
<li><a href="#SUP">Mirroring repozitáøe CVS pomocí sup(1)</a>
<li><a href="#MIRROR">Nakonfigurování mirroru anoncvs</a>
</ul>

<hr>

<h3><a name="anoncvs"><font color="#0000e0">Co je anonymní CVS?</font></a></h3>

<p>
Anonymní CVS je metoda, jak udr¾et èerstvou va¹i lokální kopii
zdrojových kódù OpenBSD, s ohledem na zmìny provedené v 'current'
(právì se vyvíjející verzi). Pomocí této metody je také mo¾né
najít errata patche aktuální verze (release).
</p>

<p>
Nejvìt¹í výhodou updatu pomocí anonymního CVS je fakt, ¾e pracuje
pøímo s centrálním repozitáøem zdrojových kódù, pøípadnì s
mirrorem. S CVS máte k dispozici celou sadu pøíkazù pro
synchronizaci a update va¹ich zmìn s dal¹ími zmìnami, pro diffy
(opravy), zmìny historie a dal¹í akce vzhledem k centrálnímu
repozitáøi.
</p> 

<p>
Projekt OpenBSD momentálnì pou¾ívá pìt hlavních repozitáøù:
</p>

<ul>
  <li><b>src</b> - v¹echny zdrojové kódy operaèního systému OpenBSD</li>
  <li><b>ports</b> - <a href="ports.html">OpenBSD porty</a> (ports tree)</li>
  <li><b>www</b> - oficiální www stránky OpenBSD </li>
  <li><b>X11</b> - OpenBSD adaptace projektu
      <a href="http://www.XFree86.org/">XFree86-3</a></li>
  <li><b>XF4</b> - OpenBSD adaptace 
      <a href="http://www.XFree86.org/">XFree86-4</a></li>
</ul>

<p>
Anonymní CVS je zkrátka "tolerantní" systém správy zdrojových kódù
<strong>respektující</strong> zmìny, které jste udìlali ve va¹ich
lokálních zdrojových kódech a sna¾í se radìji udìlat
<strong>v¹echno pro update</strong> celého stromu zdrojových kódù,
ne¾ jen vytvoøit seznam problémù, které bude potøeba vyøe¹it.
</p>

<h3><a name="CVS"><font color="#0000e0">Co je CVS?</font></a></h3>

<p>
<a href="why-cvs.html">CVS je systém pro správu stromu zdrojových kódù OpenBSD.</a>
Obsahuje centrální repozitáø v¹ech oficiálnì vydaných zdrojových
kódù (a jejich zmìn) a umo¾òuje vývojáøùm udr¾ovat jejich lokální
kopii èerstvou, ov¹em s ohledem na jimi provedené zmìny. Vývojáøi
s <b>právem zapisovat</b> mohou ulo¾it zmìny v kódu pøímo do
stromu zdrojových kódù OpenBSD, zatímco u¾ivatelé anonymního CVS
mají pouze <b>právo èíst</b>, a tak udr¾ovat jejich lokální kopii
zdrojových kódù èerstvou.</p>

<p>
Hlavní síla CVS je v jeho schopnostech inteligentnì<sup>TM</sup>
synchronizovat zmìny zdrojových kódù va¹í lokální kopie s
centrálním repozitáøem. To znamená, ¾e kdy¾ zmìníte nìjaký modul a
provedete update, nebudou va¹e zmìny prostì jen "pøekopírovány".
CVS se spí¹e pokusí "slouèit" zmìny v centrálním repozitáøi se
zmìnami, které jste provedli ve va¹í lokální kopii.
</p>

<p>
V pøípadì, ¾e se CVS nepodaøí va¹e zmìny slouèit se stromem,
provede tzv. "soft fallback". Vrátí se k pùvodní verzi a pokraèuje
v updatu dal¹ích modulù.
</p>

<h3><a name="starting"><font color="#0000e0">Zaèínáme pou¾ívat
anonymní CVS</font></a></h3>

<p>
Poslední verze CVS je dostupná na <a href="http://www.cvshome.org/">Cyclic</a>u.
Verze star¹í ne¾ 1.6 nejsou pro pou¾ití doporuèovány a mo¾ná
nebudou fungovat. V pøípadì, ¾e ji¾ máte OpenBSD nainstalované,
nemusíte si dìlat starosti, proto¾e je CVS souèástí systému.
</p>

<p>
Lidé, kteøí vlastní originální OpenBSD CD mají mo¾nost stáhnout si
z adresáøe <i>CVS/</i> checkout modulu <b>src</b> a ten updatovat.
První update potom nebude trvat tak dlouho, jako sta¾ení
kompletního stromu OpenBSD. CD je mo¾no pou¾ít dvìma zpùsoby:
</p>

<ul>
<li>Zkopírujte strom CVS z CD do <i>/usr/src</i> (pøedpokládá se, ¾e máte CD namountované v /mnt):
<pre>
        # <b>cd /mnt; pax -rw CVS Makefile [a-z]* /usr/src</b>
</pre>
<li>Pou¾ijte union mount (viz. <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_union&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">mount_union(8)</a>)
na CD a zapisovatelný adresáø. (Funguje pouze pøi kompilaci ze
stromu)
<pre>
        # <b>mount -t union -o -b /mnt /usr/src</b>
</pre>
</ul>

<p>
Pokud nemáte k dispozici CD, pou¾ijte <a 
href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">cvs(1)</a>
pro "<b>checkout</b>" repozitáøe. Detailnìj¹í popis je v <a
href="#using">následující kapitole</a>.
</p>

<p>
Takto bude <i>/usr/src</i> oblast pro checkout, kde budou v¹echny
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">cvs(1)</a>
pøíkazy fungovat správnì.
</p>

<h3><a name="using"><font color="#0000e0">Sta¾ení a upgradování
stromu zdrojových kódù pomocí CVS </font></a></h3>

<p>
CVS bylo navr¾eno pro jednoduché sta¾ení a update zdrojových kódù.
V první øadì musíte vìdìt, zda chcete stáhnout <i>current</i>
(aktuální verzi) nebo patche (opravy). Strom current obsahuje
okam¾ité (vývojové) zmìny, zatímco patche obsahují oficiální
release s aplikovanými patchi <a href="errata.html">errata</a>.
Definici pojmu <i>current</i> najdete v <a
href="../faq/upgrade-minifaq.html#1.1">Upgrade Mini-FAQ</a>.

<p>Jakmile se rozhodnete pro jeden z tìchto stromù, musíte vybrat
anonymní CVS server, který hodláte pou¾ít. Seznam tìchto serveru
je <a href="#CVSROOT">ní¾e</a>. Existují tøi zpùsoby, jak
pøistupovat k tìmto serverùm.
</p>

<dl>
<dt><b>ssh</b><dd>
Secure Shell lze kromì jiného také pou¾ít pro pøístup k anonymním
CVS serverùm. Proto¾e jsou data kryptována, je tento zpùsob
<em>doporuèovaný</em>, zvlá¹tì kdy¾ je od OpenBSD verze 2.6
OpenSSH dodáván pøímo v distribuci.
<dt><b>rsh</b><dd>Remote Shell mohou u¾ivatelé bez pøístupu k <a
href="http://www.openssh.com/">ssh</a> pou¾ít jen na nìkolika
serverech.
<dt><b>pserver</b><dd>
pserver je urèen hlavnì pro u¾ivatele za firewally, které
znemo¾òují pøedchozí dva zpùsoby.
</dl>

<p>
<b>POZNÁMKA:</b>
U¾ivatelé, kteøí chtìjí pou¾ít rsh musí nejdøíve nastavit
promìnnou <var>CVS_RSH</var>.

<ul>
<li>Korn/Bourne shell:
<pre>
        $ <b>export CVS_RSH=/usr/bin/rsh</b>
</pre>
<li>csh/tcsh:
<pre>
        % <b>setenv CVS_RSH /usr/bin/rsh</b>
</pre>
</ul>

<p>
Pokud jste si tedy vybrali, který <a href="#CVSROOT">anonymní CVS
server</a> a kterou metodu chcete pou¾ít, mù¾ete zaèít s CVS. Ti,
kteøí vlastní OpenBSD CD mohou provést CVS checkout (zkopírování
zdrojových kódù na disk, popsáno <a href="#starting">vý¹e</a>).
Pokud nemáte po ruce CD, pou¾ijte následující metodu, která stáhne
strom zdrojových kódù OpenBSD do <i>/usr/src</i>:
</p>

<pre>
        # <b>cd /usr; cvs checkout -P src</b>
</pre>

<p>
Takto stáhnete strom <i>current</i>. Ov¹em dost u¾ivatelù
potøebuje jenom strom patchù. Pro sta¾ení patchù musíte zadat
název tagu. Napøíklad:
</p>

<pre>
        # <b>cd /usr; cvs checkout -P -rOPENBSD_3_2 src</b>
</pre>
<p>
Pøípadnì OPENBSD_3_1 pro verzi 3.1, etc.

<p>V souèasné dobì obsahuje zdrojové kódy release s aplikovanými
patchi errata pouze tag OPENBSD_3_2.

<h3><a name="CVSROOT"><font color="#0000e0">
Dostupné anonymní CVS servery</font></a></h3>

<p>Existují dvì úrovnì pøístupových práv:

<dl>
<dt><strong>Pøístup read-write (ètení/zápis) pro vývojáøe:</strong>
<dd>
Vývojáøi, kteøí potøebují zapisovat zmìny do stromu zdrojových
kódù musí mít konto na strojích OpenBSD. Získání tohoto pøístupu
je výsledkem práce na zdrojových kódech spolu s ostatními vývojáøi
OpenBSD. Prostì a jednodu¹e - kdy¾ nìkdo odvede dobrou práci a
doká¾e, ¾e umí pracovat s týmem, dostane konto.
</dl>

<dl>
<dt><strong>Pøístup read-only (pouze pro ètení) pro ka¾dého:</strong>
<dd>
Kdokoliv mù¾e èíst repozitáø CVS. Tato kopie repozitáøe read-write
je èasto mirrorována (zrcadlena) a pokud ji chcete pou¾ít, musíte
nastavit environmentální promìnnou <var>CVSROOT</var> na jednu z
následujících hodnot:
<p>
<em>Pøeètìte si prosím poznámku o <a href="#WHICH">ssh vs. rsh</a>
uvedenou ní¾e!</em>
<p>
<ul>
<li><strong>CVSROOT=anoncvs@anoncvs1.usa.openbsd.org:/cvs</strong><br>
Stroj také známý jako <strong>anoncvs@anoncvs4.usa.openbsd.org</strong>.<br>
umístìn v Redwood City, Kalifornie, západ USA.<br>
spravuje <a href="mailto:millert@openbsd.org">Todd Miller</a>.<br>
protokoly: rsh, ssh, ssh port 2022, pserver.<br>
update ka¾dé 4 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.usa.openbsd.org:/cvs</strong><br>
Stroj také známý jako <strong>anoncvs3.usa.openbsd.org</strong>.<br>
umístìn na University of Colorado, Boulder, západ USA.<br>
spravuje <a href="mailto:millert@openbsd.org">Todd Miller</a>.<br>
protokoly: rsh, ssh, ssh port 2022, pserver.<br>
update ka¾dé 4 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs5.usa.openbsd.org:/cvs</strong><br>
Stroj také známý jako <strong>squid.nas.nasa.gov</strong>.<br>
umístìn v Ames Research Center, Moffett Field, Kalifornie, USA.<br>
spravuje <a href="mailto:allison@mail.arc.nasa.gov">Tyler Allison</a>.<br>
protokoly: pouze ssh.<br>
update ka¾dé 3 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@mirror.arc.nasa.gov:/cvs</strong><br>
umístìn v Ames Research Center, Moffett Field, Kalifornie, USA.<br>
spravuje <a href="mailto:allison@mail.arc.nasa.gov">Tyler Allison</a>.<br>
protokoly: pouze ssh.<br>
update ka¾dé 3 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs6.usa.openbsd.org:/cvs</strong><br>
Stroj také známý jako <strong>openbsd.citi.umich.edu</strong>.<br>
umístìn na University of Michigan, støední USA.<br>
spravuje <a href="mailto:rees@umich.edu">Jim Rees</a>.<br>
protokoly: ssh, ssh port 2022.<br>
update ka¾dých 12 hodin.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs1.ca.openbsd.org:/cvs</strong><br>
Stroj také známý jako <strong>anoncvs.ca.openbsd.org</strong>, 
<strong>openbsd.sunsite.ualberta.ca</strong><br>
umístìn v Edmontonu, Alberta, Kanada.<br>
spravuje <A HREF="mailto:beck@ualberta.ca">Bob Beck</A>.<br>
protokoly: ssh, rsh, ssh port 2022, pserver<br>
update ka¾dé 2 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.comstyle.com:/cvs</strong><br>
Stroj také známý jako <strong>openbsd.comstyle.com</strong><br>
umístìn v Torontu, Ontario, Kanada.<br>
spravuje <A HREF="mailto:brad@comstyle.com">Brad Smith</A>.<br>
protokoly: ssh, ssh port 2022<br>
update ka¾dé 2 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.tw.openbsd.org:/cvs</strong><br>
Stroj také známý jako <strong>OpenBSD.csie.NCTU.edu.tw</strong>.<br>
umístìn v Taipei, Taiwan.<br>
spravuje <a href="mailto:lkchu@OpenBSD.csie.NCTU.edu.tw">Liang-Kai Chu</a>.<br>
protokoly: ssh, rsh, ssh port 2022.<br>
update ka¾dých 12 hodin.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.no.openbsd.org:/cvs</strong><br>
Stroj také známý jako <strong>cvs.inet.no</strong>.<br>
umístìn v Norsku.<br>
spravuje <a href="mailto:cvsadmin@inet.no">Michael Shuldman</a>.<br>
protokoly: ssh, rsh, ssh port 2022.<br>
update ka¾dé 4 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.se.openbsd.org:/cvs</strong><br>
Stroj také známý jako <strong>anoncvs.stacken.kth.se</strong>.<br>
umístìn ve ©védsku.<br>
spravuje <a href="mailto:anoncvs@stacken.kth.se">Magnus Holmberg</a>.<br>
protokoly: ssh, rsh, ssh port 2022.<br>
update ka¾dé 3 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.be.openbsd.org:/cvs</strong><br>
Stroj také známý jako <strong>badlands.rug.ac.be</strong>.<br>
umístìn v Belgii.<br>
spravuje <a href="mailto:wvdputte@reptile.rug.ac.be">Wim Vandeputte</a>.<br>
protokoly: ssh, ssh port 2022.<br>
update ka¾dé 3 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.nl.openbsd.org:/cvs</strong><br>
Stroj také známý jako <strong>anoncvs.calyx.nl</strong>.<br>
umístìn v Amsterdamu, Holandsko.<br>
spravuje <a href="mailto:nick@calyx.net">Nick Merrill</a> a
<a href="mailto:alex@calyx.nl">Alexander Grendel</a>.<br>
protokoly: ssh.<br>
update ka¾dé 3 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.jp.openbsd.org:/cvs</strong><br>
Stroj také známý jako <strong>kankoromochi.econ.nagasaki-u.ac.jp</strong>.<br>
umístìn na Nagasaki Univ. Faculty of Economics, Japonsko.<br>
spravuje <a href="mailto:sigh@net.nagasaki-u.ac.jp">SUZUKI Hitoshi</a>.<br>
protokoly: ssh, pserver.<br>
update ka¾dé 3 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.cz.openbsd.org:/cvs</strong><br>
Stroj také známý jako <strong>com-os2.ms.mff.cuni.cz</strong>.<br>
umístìn na Fakultì MFF, Karlova Univerzita, Praha, Èeská republika.<br>
spravuje <a href="mailto:galambos@com-os2.ms.mff.cuni.cz">Leo Galambos</a>.<br>
protokoly: ssh, ssh port 2022.<br>
update ka¾dé 3 hodiny.<br>
<p>
<li><strong>CVSROOT :pserver:anoncvs@cvs.bsdfr.org:/cvs</strong><br>
umístìn ve Francii<br>
spravuje <a href="mailto:jch@oleane.net">Jean-Claude Christophe</a>.<br>
protokoly: pserver<br>
update ka¾dých 24 hodin.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.de.openbsd.org:/cvs</strong><br>
Host je také znám pod jménem <strong>grappa.unix-ag.uni-kl.de</strong>.<br>
umístìn na University of Kaiserslautern, Nìmecko<br>
spravuje <A HREF="mailto:hgw@d1906.inka.de">Hans-G&uuml;nter Weigand</A>
a <A HREF="mailto:naddy@openbsd.org">Christian Weisgerber</A>.<br>
protokoly: rsh, ssh, ssh port 2022, pserver<br>
update ka¾dých 6 hodin z cvsup.leo.org.<br>
<p>
<li><strong>CVSROOT=anoncvs@exokernel.lcs.mit.edu:/cvs</strong><br>
umístìn na M.I.T, východní USA.<br>
spravuje ????<br>
protokoly: ssh, ???<br>
update ka¾dých ? hodin<br>
<p>
<li><strong>CVSROOT=anoncvs@xyzzy.gsnig.org:/cvs</strong><br>
Umístìn v G&ouml;teborgu, ©védsko<br>
spravuje <A HREF="mailto:martin@openbsd.org">Martin Fredriksson</A>.<br>
protokoly: ssh port 2022<br>
update ka¾dé 4 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@stl-isaas.ey.com:/cvs</strong><br>
Umístìn v St. Louis, MO, západní USA<br>
spravuje <A HREF="mailto:aaron11@sprynet.com">Aaron Miller</A>.<br>
protokoly: ssh, ssh port 2022, pserver<br>
update ka¾dé 3 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@openbsd.groupbsd.org:/cvs</strong><br>
Umístìn v Hillsborough NC, východ USA<br>
spravuje <A HREF="mailto:randy@openbsd.org">Randy Lewis</A> a
<A HREF="mailto:jason@openbsd.org">Jason Wright</A>.<br>
protokoly: ssh, pserver<br>
update ka¾dé 4 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.mx.openbsd.org:/cvs</strong><br>
Umístìn v Campus Iztacala, Universidad Aut&oacute;noma de M&eacute;xico<br>
spravuje <A HREF="mailto:jcortes@openbsd.org.mx">Jorge A. Cort&eacute;s</A>.<br>
protokoly: ssh<br>
update ka¾dé 3 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.pl.openbsd.org:/cvs</strong><br>
Stroj také známý jako <strong>anoncvs1.pl.openbsd.org</strong>, 
<strong>incredible.bmtmc.gda.pl</strong><br>
Umístìn v BMT Maritime Consultants, Gdansk, Polsko<br>
spravuje <A HREF="mailto:detergent@incredible.bmtmc.gda.pl">
Adam Naguszewski</A>.<br>
protokoly: ssh, pserver<br>
update ka¾dé 3 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@rt.fm:/cvs</strong><br>
Umístìn v Lake in the Hills, Illinois, USA<br>
spravuje <A HREF="mailto:jcs@rt.fm">
Joshua Stein</A>.<br>
protokoly: ssh<br>
update ka¾dé 3 hodiny.<br>
<P>
<li><strong>CVSROOT=anoncvs@shellhung.org:/cvs</strong><br>
Umístìn v Hong Kongu, Èína<br>
spravuje <A HREF="mailto:shell@shellhung.org">
Shell Hung</A>.<br>
protokoly: pserver, ssh<br>
update ka¾dé 3 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@cvs.openbsd.cz:/cvs</strong><br>
Umístìn v Praze, Èeská republika.<br>
spravuje <A HREF="mailto:vladya@openbsd.cz">Vladimír Kotal</A>.<br>
protokoly: ssh, pserver.<br>
update ka¾dé 4 hodiny.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.openbsd.org.ua:/cvs</strong><br>
Umístìn v Kyjevì, Ukrajina.<br>
spravuje <A HREF="mailto:hunter@dg.net.ua">Sergey Smitienko</A>.<br>
protokoly: ssh.<br>
update ka¾dých 6 hodin.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs2.openbsd.org.ua:/cvs</strong><br>
Umístìn v Kyjevì, Ukrajina<br>
maintained by <A HREF="mailto:violent@death.kiev.ua">Igor Grabin</A>.
Dostupný pouze z Ukrajiny.<br>
protocoly: pserver<br>
update ka¾dých 6 hodin.<br>
<p>
<li><strong>CVSROOT=anoncvs@openbsd.bug.it:/cvs</strong><br>
Umístìn v Modenì, Itálie<br>
spravuje <A HREF="mailto:jwk@bug.it">Giacomo Cariello</A>.<br>
protokoly: ssh, heslo "openbsd"<br>
update ka¾dých 6 hodin.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.openbsd.It:/cvs</strong><br>
Dostupný také jako <strong>anoncvs.studentas.It</strong><br>
Umístìn v LITNET NOC, Academical and Research Network, Kaunas, Lithuania.<br>
spravuje <A HREF="mailto:helpas@aic.It">Donatas Budvytis</a>.<br>
protokoly: ssh<br>
update ka¾dé 3 hodiny z anoncvs.openbsd.org.<br>
</ul>


<p>
<em>Poznámka:</em> Pokud je zde vá¹ server napsán se ¹patnými
údaji prosím kontaktujte
<a href="mailto:beck@openbsd.org"><tt>beck@openbsd.org</tt></a>
</p>

<p>
Mo¾ná budete chtít pou¾ít <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute&amp;sektion=8&amp;format=html">traceroute(8)</a>
pro nalezení nejbli¾¹ího serveru. Problémy se serverem by mìly být
oznamovány <b>maintainerovi</b> konkrétního serveru.
</dl>

<h3><a name="CRYPTO"><font color="#0000e0">Získání
kryptografických zdrojových kódù pomocí cvs(1)</font></a></h3>

<p>
<strong>DÙLE®ITÁ POZNÁMKA:</strong>
Existuje nìkolik vìcí souvisejících s kryptografickým softwarem,
které by mìly ka¾dého zajímat:
<ul>
<li>Zdrojové kódy OpenBSD jsou z Kanady, <a
href="http://insight.mcmaster.ca/org/efc/pages/doc/crypto-export.html">
vyvíjeny kanadským obèanem</a>
a podle <a href="http://axion.physics.ubc.ca/ECL.html">Seznamu
exportních naøízení Kanady</a>
je export kryptografického software z Kanady do svìta legalní.
<p>
<li>
V pøípadì ¾e ¾ijete mimo USA nebo Kanadu, nemìli byste stahovat
kryptografické èásti zdrojových kódù OpenBSD z anonymních CVS
serverù umístìných v USA. Jedná se konkrétnì o soubory:
<ul>
<li>src/kerberosIV/*
<li>src/kerberosV/*
<li>src/lib/libdes/*
<li>src/lib/libc/crypt/crypt.c
<li>src/lib/libc/crypt/morecrypt.c
<li>src/sys/crypto
<li>src/sys/netinet
<li>src/usr.sbin/afs/src/rxkad/*
<li>XF4/xc-mit/lib/Xdmcp/Wraphelp.c
<li>XF4/xc-old/lib/Xdmcp/Wraphelp.c
<li>XF4/xc/lib/Xdmcp/Wraphelp.c
 </ul>
Podle amerického seznamu povoleného exportu zbraní ITAR mù¾e být
¹ifrovací software exportován z USA pouze do Kanady.
<p>
<li>
Projekt OpenBSD hledá anonymní CVS servery. V pøípadì, ¾e byste
mohli pomoci, ètìte, prosím, dále.
</ul>

<h3><a name="EXAMPLE"><font color="#0000e0">Pøíklady pou¾ití cvs(1)</font></a></h3>

<P>
 POZNÁMKA: Pokud chcete updatovat branch (napøíklad patch branch) na
 <i>current</i>, mìli byste pøidat volbu <code>-A</code> k cvs pøíkazu,
tato volba se ale pøi normálním pou¾ívání cvs pøili¹ neu¾ije.
Nìkteré star¹í verze OpenBSD dokumentace doporuèovaly pou¾ivání této volby
v mnoha pøíkladech. V souèasnosti ji¾ nedoporuèujeme pou¾ívat tuto volbu,
pokud to není nezbytnì nutné.

<p>
Pøíklad pou¾ití anonymního CVS serveru:
<pre>
% <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
% <strong>cd /tmp</strong>
% <strong>cvs get src/sys/arch/sparc</strong>
    [zkopíruje soubory z repozitáøe na disk]
% <strong>cvs log src/sys/arch/sparc/sparc/locore.s</strong>
    [zobrazí commit log pro daný soubor]
% <strong>cvs diff -bc -r1.1 -r1.5 src/sys/arch/sparc/sparc/locore.s</strong>
    [zobrazí zmìny mezi revizí 1.1 a 1.5]
</pre>

<p>
<a name="pserver">
Pokud chcete pou¾ít cvs ``pserver'' (pøímé TCP spojení místo ssh nebo rsh) musíte pou¾ít login:</a>

<pre>
% <strong>setenv CVSROOT :pserver:anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
% <strong>cvs login</strong>
(Logování na anoncvs@anoncvs1.ca.openbsd.org)
CVS password: <strong>anoncvs</strong>
    [Zapí¹e øádku do  ~/.cvspass (jméno souboru lze zmìnit CVS_PASSFILE).    ]
    [Ukázková øádka z mého ~/.cvspass po napsání 'blah' do násl. øádky       ]
    [password is:                                                            ]
    [:pserver:anoncvs@anoncvs5.usa.openbsd.org:/cvs Au'yc                    ]
    [Po zalogování bude fungovat libovolný následující CVSROOT               ]
% <strong>cvs get ksrc-i386 ksrc-common</strong>
    [Stáhne pouze to, co je nezbytné pro rekompilaci kernelu i386            ]
</pre>

<p>
Ukázka, jak lze pomocí anonymního cvs updatovat strom zdrojových kódù:
<ul><li>V první øade je tøeba stáhnout základní strom:

<p> (Pokud chcete <i>current</i>):
<pre>
        # <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
        # <strong>cd /usr</strong>
        # <strong>cvs -q get -P src</strong>
</pre>

<p> (Pokud chcete pouze patche pro 3.2):
<pre>
        # <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
        # <strong>cd /usr</strong>
        # <strong>cvs -q get -rOPENBSD_3_2 -P src</strong>
</pre>
</li>

<li> Kdykoliv pozdìji pak pro update stromu:
<p> (Pokud chcete <i>current</i>):
<pre>
        # <strong>cd /usr/src</strong>
        # <strong>cvs -q up -Pd</strong>
</pre>

<p> (Pokud chcete pouze patche pro 3.2):
<pre>
        # <strong>cd /usr/src</strong>
        # <strong>cvs -q up -rOPENBSD_3_2 -Pd</strong>
</pre>

Poka¾dé, kdy¾ spustíte CVS, synchronizuje vá¹ strom v /usr/src.
Tím se neznièí va¹e lokální zmìny, ale CVS slouèí zmìny va¹e s
oficiálními. Pokud pou¾íváte adresáøe obj (teï nemyslím symbolické
linky obj), asi budete chtít pøidat cvs parametr "-I obj", který
nenechá cvs vypisovat varování o v¹ech adresáøích obj, které
nejsou v repozitáøi.
<p>
<li>
POZNÁMKY: Pokud updatujete strom zdrojových kódù, který jste
pùvodnì stáhli z jiného serveru (nebo z CD),
<strong>musíte</strong> pøidat do optionù cvs <em>-d
$CVSROOT</em>.

<pre>
        # <strong>cd /usr/src</strong>
        # <strong>cvs -d $CVSROOT -q up -Pd</strong>
</pre>
</li>
</ul>

<p>
<a name="ports">Pou¾ití</a> <a href="ports.html">portù</a> je
podobné src:
<ul><li>
<p>(Pokud sledujete <i>current</i>):
<pre>
        # <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
        # <strong>cd /usr</strong>
        # <strong>cvs -q get -P ports</strong>
</pre>
</li>
<p> (Pokud sledujete vìtev patchù pro 3.2):
<pre>
 	# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
	# <strong>cd /usr</strong>
	# <strong>cvs -q get -rOPENBSD_3_2 -P ports</strong>
</pre>
<li> Kdykoliv pozdìji pak budete chtít updatovat strom:
<p>(Pokud sledujete <i>current</i>):
<pre>
        # <strong>cd /usr</strong>
        # <strong>cvs -q up -Pd ports</strong>
</pre>
<p> (Pokud sledujete vìtev patchù pro 3.2):
<pre>
	# <strong>cd /usr</strong>
	# <strong>cvs -q up -rOPENBSD_3_2 ports</strong>
</pre>
</li>
</ul>

Parametr <i>-q</i> je ve vý¹e uvedené ukázce volitelný a pouze
minimalizuje výstup cvs. Milovníci nìkolikaobrazovkových výstupù
ho mohou s klidem vynechat.

<p>
Pokud chcete pouze vytvoøit diff lokálnì patchovaného modulu (v
tomto pøípadì <i>cd.c</i>) vèetnì vytvoøeného bug reportu:
<pre>
        # <strong>cd /usr</strong>
        # <strong>cvs diff -u src/sys/scsi/cd.c &gt; /tmp/patch</strong>
</pre>

<p>
Dal¹í informace o CVS naleznete na <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">manuálové
stránce cvs(1)</a>.

<h4>Strom zdrojových kódù X11</h4>

<p>
Mirrory nnonymního CVS obsahují i strom zdrojových kódù X11 (XFree86). 
Vý¹e uvedený návod mù¾ete pou¾ít pro update stromu se zdrojovými kódy
XFree86 z druhého CD.
Mù¾ete kopírovat nebo stahovat strom zdrojových kódu XFree86 3 pomocí
CVS modulu X11, i kdy¾ strom se zdrojovými kódy XFree86 4 je v modulu XF4.
Existují dva zpùsoby, jak dostat zdrojové kódy XF4 do adresáøe
<i>/usr/XF4</i>:

<ul>
<li>zkopírujte strom (pøedpokládá se, ¾e máte namountované 3. CD v /mnt):
<pre>
        # <strong>cd /mnt; cp -Rp XF4 /usr</strong>
</pre>
<li>pou¾ijte union mount na CD se zapisovatelným adresáøem.
<pre>
        # <strong>mount -t union -o -b /mnt/XF4 /usr/XF4</strong>
</pre>
</ul>
Teï je <i>/usr/XF4</i> pøipraveno pro pou¾ití cvs, tak¾e mù¾ete
napø. updatovat na -current (ale opìt musíte mít nastavenu
promìnnou <var>CVSROOT</var>):

<pre>
        # <strong>cd /usr/XF4</strong>
        # <strong>cvs -q update -Pd</strong>
</pre>

<p>
<strong>Upozornìní:</strong>
Pokud pou¾íváte cvs, mìli byste si dát pozor, aby vá¹ pracovní
adresáø byl buï koøenem stromu, který hodláte pou¾ít nebo zvlá¹tní
místo, jako /tmp. Urèité pøíkazy (jako tøeba "get") mohou v
pracovním adresáøi vytvoøit podadresáøe a následný update mù¾e
tyto podadresáøe pozmìnit.

<p>
Anonymní CVS umo¾òuje zaèínajícím vývojáøùm nauèit se pracovat s
CVS a pomalu se zapojit do vývojového procesu je¹tì pøed získáním
pøístupu pro zápis (commit). S dobrými výsledky pak pozdìji
získají vývojáøský pøístup. Stejnì tak je ulehèena práce lidem,
kteøí vytváøí jejich "diffy" proti stromu CVS.

<h3><a name="WHICH"><font color="#0000e0">rsh(1) nebo ssh(1)?</font></a></h3>

<p>
Implicitnì pou¾ívá pro komunikaci s CVS serverem CVS klient ssh 
("secure shell": <a href="http://www.openssh.com/">OpenSSH</a>).

<p>
Øada míst s CVS repozitáøem z bezpeènostních dùvodù ji¾ rsh nepodpporuje.
Lokální problémy jako firewally nebo nedokonalé emulátory protokolù jako
napøíklad slirp mohou rovnì¾ znemo¾nit pou¾ití rsh. Pøesto, pokud je rsh
k dispozici, je tøeba nastavit promìnnou prostøedí <var>CVS_RSH</var> aby 
ukazovala na rsh (typicky <strong>/usr/bin/rsh</strong>).

<p>
Pokud lokální politika zakazuje odchozí spojení na standardní ssh
port, namísto nìj je mo¾né pou¾ít port 2022. Poznamenejme v¹ak, ¾e
ne v¹echny anoncvs servery akceptují ssh spojení na tomto portì.
Dále, vìt¹ina anoncvs serverù ji¾ neakceptuje tzv.
<strong>none</strong> ¹ifru, která je v posledních verzích ssh z
bezpeènostních dùvodù vypnutá (none ¹ifra umo¾òovala pøihlá¹ení
bez autentizace). A v neposlední øadì vás upozoròujeme, abyste
odolali poku¹ení zapnout v ssh kompresi: CVS ji¾ kompresi provádí.

<p>
Abyste pøekonali léèky a omezení uvedená vý¹e, mù¾ete do svého konfiguraèního
souboru ssh <strong>$HOME/.ssh/config</strong> uvést napøíklad:
<pre>
        Host anoncvs.ca.openbsd.org
            Compression no
            Port 2022
</pre>

<p>
CVS je pøi startu ponìkud ukecanìj¹í, tak¾e mo¾ná budete chtít udìlat nìco takového:
<pre>
        <strong>% setenv CVS_CLIENT_PORT -1</strong>
</pre>

<p>
<h3><a name="SUP"><font color="#0000e0">Mirroring repozitáøe CVS
pomocí sup(1)</font></a></h3>

<p>
U¾ivatelé, kteøí se rozhodli mirrorovat CVS strom OpenBSD jej
mohou stahovat z <em>anoncvs.usa.openbsd.org</em> nebo
<em>anoncvs1.usa.openbsd.org</em> (jsou to dva rùzné stroje). Jde
pouze o strom cvs, <b>ne</b> o checkout. Pou¾itelný je tedy pouze
pokud chcete rychle provádìt cvs operace (diff, annotate,...) nebo
pokud máte nìkolik stromù zdrojových kódù a chcete jen pøená¹et
nová data.
<p>
Ukázkový supsoubor:
<pre>
        cvs host=anoncvs.usa.openbsd.org hostbase=/ base=/home delete
</pre>
<p>
Provede mirror cvs stromu do /home/cvs se sup soubory v /home/sup. Kompletní cvs strom OpenBSD má v souèasné dobì okolo 1.3 gigabytù.

<h3><a name="MIRROR"><font color="#0000e0">Nakonfigurování mirroru anoncvs</font></a></h3>

<p>
Pokud chcete být novým mirrorem anoncvs, kontaktujte prosím <a
href="mailto:sup@openbsd.org">maintainera</a>.
Anonymní mirrory potøebují zhruba 1.7GB diskového prostoru a okolo
32MB swapu na jednoho u¾ivatele (za pøedpokladu, ¾e provádí
nároènou operaci - men¹í operace jsou sice skromnìj¹í, ale poøád
nároènìj¹í ne¾ ftp nebo sup). Takový mirror by mìl mít výbornou
sí»ovou konektivitu pro oblast, kterou má obsluhovat. Dokument,
který popisuje konfiguraci anonymního CVS serveru je <a
href="../anoncvs.shar">zde</a>.

<h3><font color="#0000e0">Závìreèné poznámky</font></h3>
Po upgradu va¹eho stromu zdrojových kódù by bylo lep¹í pøeèíst si
zmìny na zaèátku <KBD>/usr/src/Makefile</KBD>, ne¾ je zaènete
kompilovat. Také byste mìli zkompilovatnový kernel, ne¾ zaènete s
<KBD>make build</KBD>. V urèitých pøípadech (pokud <KBD>config
GENERIC</KBD> spadne) je nutné pøekompilovat a nainstalovat
utilitu <KBD>config</KBD>, ne¾ zaènete s kompilací kernelu.

<p>
Poslední dùle¾itá poznámka - upgrade z release na current mù¾e být
daleko slo¾itìj¹í kvùli závislostem (dependencies), které èasto
nejsou samozøejmé. Pøed vytvoøením stromu je doporuèováno nejprve
nainstalovat poslední snapshot.

<hr>
<a href="index.html"><img height="24" width="24" src="../back.gif"
border="0" alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<small>
<br>
Originally [OpenBSD: anoncvs.html,v 1.179 ]
<br>
$Translation: anoncvs.html,v 1.19 2002/11/23 16:32:12 certik Exp $
<br>
$OpenBSD: anoncvs.html,v 1.17 2002/11/23 20:07:40 jufi Exp $
</small>
</body>
</html>
