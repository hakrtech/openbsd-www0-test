<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<meta name="resource-type" content="document">
<meta name="description" CONTENT="OpenBSD kolekce portù a packages">
<meta name="keywords" content="openbsd,ports">
<meta name="distribution" content="global">
<meta name="copyright" content="copyright 1997-2001 by the OpenBSD">
<title>OpenBSD Ports and Packages</title>
<link rev="made" href="mailto:www@openbsd.org">
</head>

<body text="#000000" bgcolor="#FFFFFF" link="#23238E">

<img height="30" width="141" src=../images/smalltitle.gif alt="[OpenBSD]" >

<h2><font color=#e00000>Porty &amp; Packages</font></h2>

<hr>

<h3><font color="#0000e0">Index</font></h3>
 <ul>
<li><a href="#Motivation">Motivace</a></li> 
<li><a href="#Get">Jak získat balíky</a></li>
<li><a href="#stable">Update portù a balíkù pro verzi OpenBSD</a></li> 
<li><a href="#Manage">Správa nainstalovaných balíkù</a></li>
<li><a href="#Use">Pou¾ívání portù</a></li> 
<li><a href="#Life">®ivotní cyklus stromu portù</a></li> 
<li><a href="#XFree86">Porty a XFree86/a></li> 
<li><a href="#Example">Pøíklad pou¾ití Ports Tree</a></li>
<li><a href="#Advanced">Zdokonalené pøíklady pou¾ití Ports Tree</a></li>
<li><a href="#Create">Vytváøení nových portù</a></li> 
<li><a href="#Lag">Kdy¾ Port zaostává za Hlavní Verzí</a></li>
<li><a href="#Help">Problémy a kontakty</a></li
</ul>

<hr>
<h3><font color=#0000e0><a name="Motivation">Motivace</a></font></h3>

OpenBSD je dost kompletní systém, který stojí na vlastních základech, ale
stále je tu spousta software, který je potøeba. Je tu ale problém co
zahrnout a také obèasný problém s licencemi a exportními restrikcemi.
OpenBSD by mìlo být malým stand-alone UNIX-like operaèním systémem,
nìkteré vìci prostì nemohou být standardnì v systému zahrnuty.

<p>
<strong><font color="#e00000">
Porty &amp; packages NEprocházejí bezpeènostním auditem jako nativní kód z
OpenBSD. Aèkoli chceme udr¾et kvalitu balíkù vysoko, nemáme dostatek
lidských zdrojù abychom zajistili tu samou úroveò robustnosti a
b ezpeènosti.
</font></strong>

<p>
Sbírka portù, originálnì pocházející z
<a href="http://www.freebsd.org/">FreeBSD</a>, vyplòuje tuto díru.
Základní koncept je mít pro ka¾dý software pocházející od tøetích stran
Makefile, který zodpovídá za to
<ul>
<li>kde stáhnout 
<li>jak stáhnout 
<li>na èem to závisí (pokud na nìèem),
<li>jak zmìnit zdrojové soubory (pokud je to potøeba),
<li>a jak nakonfigurovat, zkompilovat a nainstalovat.
</ul>
Tato informace je ulo¾ena v adresáøové struktuøe v adresáøi /usr/ports. 

<p>
Balíky jsou binárnì ekvivalentní portùm. Zkompilovaný port se stane
balíkem, který mù¾e být registrován do systému pomocí 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;format=html">pkg_add(1)</a>

<p>
<strong><font color="#e00000">
Balíky vypadají jako jednoduchý soubor <code>.tgz</code>, ale mìly by být
v¾dy pøidávány pomocí 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1&format=html">pkg_add(1)</a>, 
proto¾e v nich mohou být dodateèné informace, které umí zpracovat pouze 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1&format=html">pkg_add(1)</a> 
.</font></strong>
Tip: Balíky a obyèejné <strong>.tgz</strong> soubory rozli¹íte pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&sektion=1&format=html">pkg_info(1)</a>.

<h3><font color="#0000e0"><a name="Get">Jak získat balíky</a></font></h3>

Velká sbírka pøed-kompilovaných balíkù je k dispozici pro vìt¹inu
architektur. 
<ul>
<li>Na CD-Rom (který si mù¾ete objednat <a href="orders.html">zde</a>),
<li>Na <a href="ftp.html">ftp mirrorech</a>.
<li>Ze seznamu balíkù na webu:
<ul>
<li><a href="http://www.openbsd.org/3.0_packages/">Balíky pro OpenBSD 3.0</a>
<li><a href="http://www.openbsd.org/2.9_packages/">Balíky pro OpenBSD 2.9</a>
<li><a href="http://www.openbsd.org/2.8_packages/">Balíky pro OpenBSD 2.8</a>
<li><a href="http://www.openbsd.org/2.7_packages/">Balíky pro OpenBSD 2.7</a>
</ul>
</ul>


Pøidání balíku je lehké jako
<code>pkg_add pkgname.tgz</code>.
Pokud taháte balíky z jednoho zdroje (package repository), nastavte
PKG_PATH na URL repository v pøípadì, ¾e bude potøeba tahat dal¹í
balíky jako závislosti.

<p>
Na pøíklad, k tomu abyste nainstalovali balík Gimp pro vydání 3.0 na i386
z ftp (vèetnì závislostí), udìlejte:

<pre>
    # setenv PKG_PATH ftp://ftp.openbsd.org/pub/OpenBSD/3.0/packages/i386/
    # pkg_add ${PKG_PATH}gimp-1.2.2.tgz
</pre>

<h3><a name="stable"><font color="#0000e0">Update portù a balíkù pro verzi OpenBSD</font></a></h3>
<p>
Vydání 2.7 pøi¹lo spolu se stabilní vìtví pro strom portù.
<p>
Na pøíklad, takto nainstalujete stabilní vìtev pro vydání 3.0:
<pre>
    $ cd /usr/ports
    $ cvs -q -d anoncvs@some.anon.server:/cvs up -r OPENBSD_3_0 -Pd
</pre>
<p>
Poèínaje vydáním 2.8 jsou k dispozici také vybrané binární balíky, Díky
<a href="mailto:naddy@openbsd.org">Christian Weisgerber</a> za práci pøi
koordinaci zmìn ve stabilní vìtvi. Podívejte se prosím na 
<a href="../pkg-stable.html">stránka se stabilními balíky</a> k tomu, abyste
na¹li informace o updatovaných balících a dùle¾itých updatech ve stabilní
vìtvi.
</p>
<p>
Jména balíkù jsou <strong>v¾dy</strong> zmìnìna v pøípadì update balíku,
abychom se vyhnuli risku ze zmatení mezi balíkem z release a balíku s
opravenou chybou.
</p>

<h3><font color="#0000e0"><a name="Manage">Správa nainstalovaných balíkù</a></font></h3>

Manuálová stránka <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=packages&sektion=7&format=html">packages(7)</a>
obsahuje u¾iteèné informace jak zacházet s nainstalovanými balíky, øe¹it
konflikty (soubory které u¾ existují) a závislosti.
<p>
Na OpenBSD 2.8, updatujete balík následovnì:
<ul>
<li>Vyma¾ete balík pomocí 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&sektion=1&format=html">pkg_delete(1)</a> 
<li>Pøidáte nový balík pomocí 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1&format=html">pkg_add(1)</a> 
</ul>
Toto je lehce nevhodné, proto¾e balíky mají svoje závislosti a museli
byste vymazat velký poèet balíkù kvùli update.

<h3><font color="#0000e0"><a name="Use">Pou¾ívání portù</a></font></h3>

Pokud daný balík na va¹í architektuøe neexistuje, mù¾ete poøád zkompilovat
port. Nìkteøí u¾ivatelé navíc chtìjí z rùzných dùvodù kompilovat v¹echno
ze zdrojových souborù.

<p>
Mù¾ete stáhnout vydání pøes ftp z adresáøe pub/OpenBSD/[verze] (kde [verze] je
èíslo release) z nìkterého z <a href="ftp.html">mirrorù</a>.
Verze releasù jsou ty samé co se dodávají na CDROM a pro¹ly vìt¹ím
testováním jako snapshot.
Dal¹í informace naleznete v manuálové stránce
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ports&sektion=7&format=html">ports(7)</a>.

<h3><font color="#0000e0"><a name="Life">®ivotní cyklus stromu portù</a></font></h3>

<p>
Strom portù se stejnì jako zbytek OpenBSD neustále mìní. 
<p>
Strom portù current <strong>nemusí být</strong> pou¾it s pøedchozím
vydáním. To je kvùli
zmìnám, typicky s procesem make, který vy¾aduje kód zalo¾ený na
OpenBSD-current. 
<p>Strom portù funguje jako jedna entita. Není zaruèeno, ¾e updatování
jednoho adresáøe bude pracovat, proto¾e závislosti v balíku vás mohou
donutit upgradovat a rekompilovat velké èásti stromu portù. Je dùraznì
doporuèováno abyste nesledovali ports-current pokud nejste pøipraveni
poradit si s rùznými problémy.
<a href="mail.html">Mailing listy</a> jako napø.
<code>ports-changes@openbsd.org</code> nebo
<code>tech@openbsd.org</code> budou pravdìpodobnì cenným zdrojem
informací. 

<p>Radíme vám abyste na produkèních strojích sledovali ports-stable:
budeme se sna¾it udr¾ovat stalbe ports tree s ohledem na problémy a 
budeme poskytovat také binární updaty.

<p>Poznámka: Mizení distfiles není problém, proto¾e 
ftp.openbsd.org udr¾uje kompletní repository. Dokonce zmìna checksumù není
problémem: mù¾ete zadat pøíkaz:
<pre>
	make checksum REFETCH=true 
</pre>
abyste se ujistili, ¾e stahujete ten správný distfile pro vá¹ strom portù.

Pro definice <i>current</i> a <i>stable</i>, se podívejte na
<a href="../faq/upgrade-minifaq.html#1.1">Upgrade 
Mini-FAQ</a>.


<p>Seznam <a href="../portsplus/index.html">denních zmìn</a> v portech a v ports-current 
je k dispozici.

<p>
Strom ports-current mù¾ete získat z: 
<ul>
<li><a href="anoncvs.html">Anonymního CVS</a> (podívejte se na link).
Pøíkaz je <strong>cvs get ports</strong>.
<li>Anonymní ftp z
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/ports.tar.gz">
ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/ports.tar.gz</a>.
	Tento archív je updatován jednou za noc.
<li><a href="cvsup.html">CVSup</a>. Podívejte se na pøíklad pou¾ití CVSup
v <a href="cvsup.html#checkout">checkout mode</a>.
<li>Va¹eho web browseru pøes
<a href="http://www.openbsd.org/cgi-bin/cvsweb/ports/">CVS
	web interface</a>.
</ul>

<h3><font color="#0000e0"><a name="XFree86">Porty a XFree86</a></font></h3>
Existuje speciální postup v konfiguraci XFree86 pro OpenBSD umo¾òující
pou¾ít strom portù k instalování aplikací zalo¾ených na imake do 
/usr/local.

<p>Poèínaje verzí 2.9 OpenBSD se dodává s XFree86 4.0.3. 
Pou¾íváte-li minulé verze OpenBSD spolu s binárkami z XFree86 projektu, budete
mo¾ná muset aplikovat patch v 
<code>/usr/ports/infrastructure/patches/patch-xfree-4.0</code>
na standardní binární distribuci XFree86 4.0.x aby mohlo pracovat se stromem
portù z OpenBSD.

<h3><a name="Example"><font color="#0000e0">Pøíklad pou¾ití stromu portù</font></h3>

<p>
Pøedpokládejme ¾e jste zvládli stáhnout strom portù a chcete zkompilovat a
nainstalovat utilitu pro archivování <strong>unzip</strong>. Mìli byste
udìlat nìco jako:

<pre>
    % cd /usr/ports/archivers/unzip
    % su
    # make
    # make install
    # exit
</pre>

Jednoduché, ¾e ? Hlavnì poté, kdy¾ si uvìdomíte co se dìlo na pozadí: 
<ul>
<li>Sta¾ení zdrojových souborù unzip z ftp,
<li>Kontrola integrity archivu zdrojových souborù,
<li>Rozbalení zdrojových souborù unzipu,
<li>Aplikování patchù specifických pro OpenBSD,
<li>Konfigurace a kompilace programu,
<li>Vytvoøení binárního balíku pod /usr/ports/packages,
<li>Instalace balíku.
</ul>

<p>
S OpenBSD 3.0 vìt¹ina portù automaticky provádí build balíku, pøedtím ne¾ jsou nainstalovány.

<p>
Jak jsou porty kompilovány, adresáø /usr/ports/distfiles se plní se
zdrojovými kódy programù a /usr/ports/packages binárními balíky. U¾ivatelé
se ¹patnou konektivitou se mohou podívat na 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mirroring-ports&amp;sektion=7&amp;format=html">mirroring-ports(7)</a> 
pro efektivní cestu jak stáhnout v¹echny distfiles najednou. V OpenBSD-current
mù¾ete pou¾ít skript /usr/ports/infrastructure/fetch/clean-old abyste se
zbavili starých distfiles.
Poznamenejme ¾e CD s OpenBSD zahrnuje strom portù a vybrané balíky. Pokud
chcete mít distfiles, budete je muset získat nezávisle. 

<h3><font color="#0000e0"><a name="Advanced"></a>Zdokonalené pøíklady pou¾ití Ports Tree</font></h3>

<p>
Strom portù má pro zku¹eního u¾ivatele mnoho vlastností, které mohou být pro nìj 
hodnotným nástrojem pøesahujícím rámec základní instalce. Zku¹ení u¾ivatelé
si mohou pohrát s makefile soubory (pøeètìte si nejprve manuálovou stránku
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a>
nebo nastavte rùzné promìnné z pøíkazové øádku nebo v 
<tt>/etc/mk.conf</tt>. Tyto promìnné jsou detailnì popsány v manuálové stránce 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bsd.port.mk&amp;sektion=5&amp;format=html">bsd.port.mk(5)</a>
a dokumentech uvedených ní¾e.
</p>

<h3><font color="#0000e0"><a name="Create">Vytváøení nových portù</a></font></h3>
<p>
Pokud se zajímáte o to, jak pomoci v expanzi stromu portù v OpenBSD, mìli
byste si nejprve pøeèist <a href="porting.html">porting.html</a>. Tato
stránka zmiòuje sekci o portování z 
<a href="http://www.freebsd.org/porters-handbook/">FreeBSD handbook</a> stejnì
jako rady a politiku specifickou pro OpenBSD.

<h3><font color="#0000e0"><a name="Lag">Kdy¾ Port zaostává za Hlavní Verzí</a></font></h3>

<p>
Kolekce portù je projekt dobrovolníkù. Nìkdy projekt jednodu¹e nemá
tolik vývojáøù aby mohlo v¹echno být udr¾ováno up-to-date.
Vývojáøi si docela vybírají co povaøují za zajímavé a co mohou ve svém
prostøedí otestovat. Na va¹ich <a href="goals.html#funding">darech</a>
mù¾e záviset to, na jakých platformých budou porty testovány.
</p>

<p>
Nìkteré jednotlivé porty tak mohou zaostávat za oficiální verzí. 
Kolekce portù mù¾e mít verzi z ledna, zatímco nová verze byla vývojáøi 
vypu¹tìna v Kvìtnu tøi mìsíce pøedtím. 
Èasto je to vìdomé rozhodnutí; nová verze mù¾e mít na OpenBSD problémy, které se 
maintainer pokou¹í vyøe¹it nebo mù¾e jednodu¹e být hor¹í ne¾ stará verze:
OpenBSD mù¾e mít odli¹né 
<a href="goals.html">cíle</a> ne¾ vývojáøi oficiální verze,
co¾ mù¾e nìkdy vyústit ve výbìr návrhu a implementace, které mohou být z 
pohledu OpenBSD vývojáøe nevhodné. Update mù¾e být také odlo¾en, proto¾e nová
verze není pova¾ována za kritický update.
</p>

<p>
Pokud opravdu potøebujete novou verzi portu, mìli byste se zeptat <tt>MAINTAINERa</tt>
portu aby updatoval port (podívejte se <a href="#Help">ní¾e</a> jak najít kdo
je maintainer); pokud mù¾ete poslat patche, tím lépe. Abyste vytvoøili správné 
patch, mìli byste se podívat na <a href="porting.html">dokumentaci pro vytváøení
portù</a>.
</p>

<h3><font color="#0000e0"><a name="#Help">Problémy a kontakty</a></font></h3>

<p>
Pokud máte potí¾e s existujícími porty, po¹lete prosím mail maintainerovi
portu. Abyste zjistili, kdo je maintainerem daného portu, napi¹te napø.
<pre>
       % cd /usr/ports/archivers/unzip
       % make show VARNAME=MAINTAINER
</pre>
Jako alternativu, pokud není maintainer nebo ho nemù¾ete zastihnout,
po¹lete mail do OpenBSD ports mailing listu 
<a href="mailto:ports@openbsd.org">ports@openbsd.org</a>.
Prosím nepou¾ívejte mailing list misc@openbsd.org pro otázky ohlednì portù.
Opravy jsou v¾dy vítány, ale v ka¾dém pøípadì poskytnìte:
<ul>
<li>Výstup z <code>uname -a</code>,
<li>Verzi va¹eho OpenBSD, vèetnì patchù, které jste aplikovali.
<li>Kompletní popis problému.
</ul>
Pro porty, které se nezkompilovaly správnì, je skoro v¾dy vy¾adován
kompletní výstup. Pro toto mù¾ete pou¾ít skript portslogger, který najdete v
/usr/ports/infrastructure/build. Pøíklad pou¾ití portsloggery mù¾e být:

<pre>
       % cd /usr/ports/archivers/unzip
       % su
       # mkdir -p ~/portslogs
       # make clean install 2&gt;&amp;1 | /usr/ports/infrastructure/build/portslogger \
               ~/portslogs
</pre>

Poté co toto provedete byste mìli mít log soubor vyprodukovaný build procesem 
ve va¹em adresáøi ~/portslogs a ten mù¾ete poslat maintainerovi. Dále se ujistìte,
¾e nepou¾íváte pro build ¾ádné speciální options, napø. v /etc/mk.conf.

<p>
Dal¹í mo¾nosti:
<ul>
<li>Pou¾ijte <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=script&sektion=1&format=html">script(1)</a>
pro vytvoøení kompletního zápisu kompilaèního procesu. Nema¾te informaci z configure.
    <li>Pøipojte výstup z <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&sektion=1&format=html">pkg_info(1)</a>
pokud se vám zdá by» i vzdálenì, ¾e by mohl pomoci. 
    <li><a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&sektion=1&format=html">gcc(1)</a>
internal  compiler errors vás ¾ádají abyste ohlásili chybu do mailing
listu gcc. To ¹etøí èas pokud postupujete podle jejich návodu a poskytnete
aspoò rùzné soubory vyprodukované pomocí <tt>gcc -save-temps</tt>.
</ul>

<hr>
<a href="index.html"><img height="24" width="24" src="../back.gif" border="0" alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: ports.html,v 1.65 ]
<br>
$Translation: ports.html,v 1.18 2002/05/23 23:26:55 certik Exp $
<br>
</small>
</body>
</html>
