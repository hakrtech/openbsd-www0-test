<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD patch vìtve</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="stable">
<meta name="keywords" content="openbsd,anoncvs,updates,stable">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-1998 by OpenBSD.">
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-2">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238E">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color=#e00000>Vìtve patchù</font><hr></h2>

<p>
<ul><h3>Obsah</h3>
<li><a href="#whatis">Co je vìtev patchù?</a>
<li><a href="#getting">Jak dostat vìtev patchù</a>
<li><a href="#building">Build z vìtve patchù</a>
</ul>
</p>
<hr>

<a name="whatis"></a>
<h3><font color=#0000e0>Co je vìtev patchù?</font></h3>

<p>
Poèínaje verzí 2.7, OpenBSD disponuje zdrojovým stromem, který obsahuje
dùle¾ité patche a opravy (tj. ty které jsou na 
<a href="errata.html">errata</a> plus dal¹í, které jsou zøejmé a jednoduché,
ale nezaslou¾í si poznámku v errata)
a dává je k dispozici prostøednictvím <a href="anoncvs.html">CVS</a>
spolu se souèasnými zdrojovými kódy.
U¾ivatelé mají tedy na výber ze tøí mo¾ností:<p>
<ul>
<li>Vezmìte poslední release a aplikujte patche ruènì.
<li>Pou¾ijte <b>vìtev patchù</b> ve které jsou aplikovány nejdùle¾itìj¹í patche.
<li>Pou¾ijte <b>souèasný zdrojový kód</b> pro nejnovìj¹í zmìny.
</ul>
<p>
<a href="../plus.html">Daily Changelog</a> popisuje, které z post-release
patchù byly zahrnuty do vìtve patchù. Obecná pravidla jsou taková, ¾e 
v¹echny polo¾ky v <a href="errata.html">Errata</a> budou zahrnuty do patch
vìtve do 48 hodin od uvedení v errata.
Ostatní post release patche mohou být také zahrnuty, a to za jistých podmínek:
<ul>
<li>Patch musí být jednoduchý, krátký a zøejmì 100% správný.
<li>Polo¾ky v errata jsou pøidávány pro chyby, které postihují mnoho lidí.
    Ostatní patche mohou být zahrnuty do patch vìtve, pokud postihují
    málo lidí av¹ak drastickým zpùsobem.
<li>Nepo¾adujte prosím slouèení patchù velkých subsystémù do patch vìtve.
    Udr¾ování stromu patchù vy¾aduje spoustu úsilí, které by mohlo být 
    lépe vynalo¾eno na zlep¹ování dal¹ích verzí OpenBSD.
<li>Vyjímkou z pravidel vý¹e jsou verze OpenSSH, které budou pøidávány do patch
    vìtve.
</ul>
<p>

<a name="getting"></a>
<h3><font color=#0000e0>Jak dostat stabilní vìtev</font></h3>

<p>
Pøi obdr¾ení vìtve patchù dané verze OpenBSD mù¾ete updatovat ji¾ existující
zdrojový strom (z <a href="ftp.html">FTP</a> nebo <a href="orders.html">CD</a>)
nebo mù¾ete stáhnout zdrojový strom z <a href="anoncvs.html">AnonCVS</a> serveru.
Instrukce pro získání vìtve patchù a pro jejich aktualizaci jsou popsány
v sekci <b>Zaèínáme pou¾ívat anonymní CVS</b> dokumentace o 
<a href="anoncvs.html#starting">AnonCVS</a>.
Poznamenejme, ¾e vìtev patchù nepomù¾e s upgradem z jedné verze OpenBSD
na jinou, napø. z  2.7 na 2.8. Pouze poskytuje prostøedky pro aktualizaci
patchù v rámci dané verze.
Pokud chcete pøejít od jedné verze k jiné pøes zdrojové kody, nav¹tivte prosím
 <a href="../faq/upgrade-minifaq.html">upgrade-minifaq</a>.
Rovnì¾ nemù¾ete postupovat smìrem zpìt, napø. z -current zpátky ke -stable,
kvùli problémùm s verzemi knihoven.

<a name="building"></a>
<h3><font color=#0000e0>Build z OpenBSD vìtve patchù</font></h3>
Jakmile jednou získáte zdrojový strom pøes <a href="anoncvs.html">anoncvs</a>,
musíte pøedìlat (rebuild) systém. Kroky jsou následující:

<ul>
 <li>Rebuild kernelu
 <li>Reboot s novým kernelem
 <li>Rebuild binárek
</ul>

<h4><font color=#0000e0>Rebuild kernelu</font></h4>

<p>
Pro rebuild pùvodního kernelu ze stable:
<ul><pre>
# <strong>cd /usr/src/sys/arch/i386/conf</strong>
# <strong>/usr/sbin/config GENERIC</strong>
# <strong>cd /usr/src/sys/arch/i386/compile/GENERIC</strong>
# <strong>make clean &amp;&amp; make depend &amp;&amp; make</strong>
</pre></ul>

<p>
Nahraïte <i>i386</i> svou architekturou
<i>sparc</i>, <i>alpha</i>, apod.

<h4><font color=#0000e0>Reboot s novým kernelem</font></h4>

<p>
Reboot s novì zkompilovaným kernelem provedete takhle:
<ul><pre>
# <strong>cd /usr/src/sys/arch/i386/compile/GENERIC</strong>
# <strong>cp /bsd /bsd.old</strong>          <i>(Ulo¾te starý kernel jako zálohu)</i>
# <strong>cp bsd /bsd</strong>               <i>(Nakopírujte nový kernel na své místo</i>
# <strong>reboot</strong>
</pre></ul>

<p>
Jako vý¹e nahradíte svou architekturu za <i>i386</i>. Pokud má systém problémy
s novým jádrem, mù¾ete snadno pøejít zpìt a rebootovat se starým kernelem,
nyní s názvem  <i>bsd.old</i>.

<h4><font color=#0000e0>Rebuild binárek</font></h4>

<p> Rebuild systémových binárek provedete takto:
<ul><pre>
# <strong>cd /usr/src</strong>
# <strong>rm -r /usr/obj/*</strong>
# <strong>make obj &amp;&amp; make build</strong>
</pre></ul>

<p>Co¾ bude nìjakou dobu trvat...
<hr>
<a href=index.html><img height=24 width=24 src=../back.gif border=0 alt=OpenBSD></a>
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: stable.html,v 1.11 ]
<br>
$Translation: stable.html,v 1.11 2004/05/04 08:56:40 certik Exp $
<br>
$OpenBSD: stable.html,v 1.8 2004/05/07 01:25:32 saad Exp $
</small>

</body>
</html>
