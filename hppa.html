<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD/hppa</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD/hppa page">
<meta name="keywords" content="openbsd,hppa">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">

<h2>OpenBSD/hppa</h2>

<hr>

This port is aimed to support the following HP 9000 models:
705, 710, <b>712</b>, <b>715</b>, 720, <b>725</b>,
730, <b>735</b>, 750, <b>755</b>, J200, J210, J210XC, C100, C110,
B132L, B160L, B180L, C132L, C160L, C180L
(bold means "known to be working").
Other similiar to those hardware configurations may be supported
as far as if they based upon:
<ul>
<li>HP PA-RISC 7000, 7100, 7150, 7100LC, 7200, 7300LC processors;
<li>Viper (others ?) memory controller;
<li>LASI, ASP, WAX bus/IO controller;
<li>and EISA bus controller;
<li>NCR53C700, NCR53C710, NCR53C720 SCSI I/O Processor;
<li>Venom, CRX-8, CRX-24, HCRX-8, HCRX-24 video controllers;
<li>HIL or PS/2 keyboard and mouse;
<li>EISA devices will work, but they won't be usefull for booting,
	but some of those manufactured by HP for 700/800 systems.
</ul>
Systems which may work (eventualy): 
<ul>
<li>pa8k-based systems (in 32-bit mode);
<li>HP 9000 834, 835, 836, 844, 845, 846;
<li>HP 9000 E23, E25, E35, E45, E55;
<li>HP 3000 908, 918, 928, 938;
<li>Hitachi VQ200, VQ210, and some other non-HP workstations;
<li>Precision Book from RDI Computer Corporation (well, unlikely)
<li>HP VME and VXI single board systems (requires VME at least)
</ul>
<br>
Hardware is needed for this project,
see <a href="want.html">"Wanted List"</a>. (contact <a href=mailto:mickey@openbsd.org>mickey</a>).

<h3><strong>Status:</strong></h3>
Got System autoconfig using <a href=http://hppa.fries.net/#boot_lif>bootable images</a>, heading for single-user.

<h3><strong>History:</strong></h3>
<ul>
<li>i82596-based ethernet (if_ie), in uncached memory mode
<li>Most of the MD kernel code written
<li>DDB support except watchpoints and single-stepping
<li>disk boot working
<li>Stinger (*CRX-*) graphics boards driver
<li>LASI, ASP, WAX and EISA bus adapters
<li>com, lpt, fdc drivers (no fd yet ;)
<li>PDC driver
<li>kernel bootstrap working
<li>network boot working through the LIF image
<li>cross-tools compiling/working
</ul>

<h4>Build cross-tools:</h4>
<p>
<pre>
cd /usr/src
sudo make TARGET=hppa cross-tools
</pre>
</p>
<p>
cross-tools build process may fail in the libc stage, consider that's
all right, since libc support is not finished yet.
</p>

<h4>Build boot.lif file using cross-tools:</h4>
<p>
<pre>
cd /sys/arch/hppa/stand
make obj
set cross=(/usr/cross/hppa/usr/bin)
make MACHINE=hppa MACHINE_ARCH=hppa \
	"AS=$cross/as" "CC=$cross/cc" \
	"CPP=$cross/cpp" "LD=$cross/ld" \
	"AR=$cross/ar" "STRIP=$cross/strip" \
	"LORDER=$cross/lorder" "NM=$cross/nm" \
	"RANLIB=$cross/ranlib" "SIZE=$cross/size"
</pre>
</p>
<p>
One will have a <a href=http://hppa.fries.net/#boot_lif><em>boot.lif</em></a>
file to boot then in the obj-directory.
That image may include <em>diskless</em> kernel image if one was available
in the <em>sys/arch/hppa/compile/SHEPHERD_PIE/bsd</em>.
<br>
Kernel cross-build process is similiar to the one for boot, consult
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=config&apropos=0&sektion=0
&manpath=OpenBSD+Current&format=html>config(8)</a>
and
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=options&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html>options(8)</a>
for kernel build options and configuration.
</p>
<h4>Recent development:</h4>
<pre>
BOOT_ADMIN&gt; boot lan isl

Booting





&gt;&gt; OpenBSD/hppa BOOT 0.5
boot&gt; boot bsd
booting lf0a:/bsd: 991232+61440+208896 total=0x15a408 start 0x13000
[preserving 82952 bytes of bsd symbol table ]
Copyright (c) 1982, 1986, 1989, 1991, 1993
The Regents of the University of California.  All rights reserved.
Copyright (c) 1995-1999 OpenBSD. All right Reserved.  http://www.OpenBSD.org

OpenBSD 2.6-current (SHEPHERD_PIE) #1938: Sun Dec 12 13:02:59 EST 1999
    mickey@lucifier:/sys/arch/hppa/compile/SHEPHERD_PIE
HP9000/712/80 (King Gecko) PA-RISC 1.1
real mem = 16777216 (73728 reserved for PROM, 12582912 used by OpenBSD)
avail mem = 14028800
using 200 buffers containing 819200 bytes of memory
mainbus0 (root) [flex fff80000]
pdc0 at mainbus0
mem0 at mainbus0 hpa fffbf000: viper rev 0, ctrl 40400100&lt;eisa_prf&gt;, size 16M
cpu0 at mainbus0 hpa fffbe000: PA7000 v0.0, lev 1, cat A, 80 MHz clock
cpu0: shadows, 128K/128K D/I cache, 64 shared TLB, 8 shared BTLB
lasi0 at mainbus0 hpa f0100000 irq 28: ver 0
gsc0 at lasi0
"PS/2 port" at gsc0 (type a, sv 84) hpa f0108100 not configured
"PS/2 port" at gsc0 (type a, sv 84) hpa f0108000 not configured
"floppy controller" at gsc0 (type a, sv 83) hpa f010a000 not configured
"Advanced audio (no beeper)" at gsc0 (type a, sv 7b) hpa f0104000 not configured
lpt0 at gsc0 hpa f0102000 irq 7
com0 at gsc0 hpa f0105000 irq 5: ns16550a, 16 byte fifo
ie0 at gsc0 hp f0107000 irq 8: LASI/i82596CA rev 0, address 08:00:09:1b:3c:08
"Core SCSI" at gsc0 (type a, sv 82) hpa f0106000 not configured
sti0 at mainbus0 hpa f8000000: HPA208LC1280 rev 8.4, rom @ 0xf0080000
sti0: 2048x1024 frame buffer, 1280x1024 display, offset 0x0
sti0: 8x16 font type 1, 16 bpc, charset 0-255

</pre>
</p>
<small>info was typed from screen, sorry for typos</small>
<hr>
In order to use the <a href=http://hppa.fries.net/#boot_lif>boot.lif</a> files
you must prepare your server and instruct your machine to boot off the network:
<ol><li>Server setup</li><br>
  <ul><li>
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=rbootd&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html>rbootd</a> must be setup and started<br>
    <ul><li><bold>/etc/<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=rbootd&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html>rbootd</a>.conf </bold> contains a single line per machine
		you ented to boot from the server.  Each line contains the
		ethernet address of the client hppa machine, and the filename
		to be loaded from the tftp server.  For example:
	<pre>
	8:0:9:70:c4:11    <a href=#boot_lif>boot.lif</a>    # 9000/720
	8:0:9:19:fb:a0    <a href=#boot_lif>boot.lif</a>    # 9000/725
	</pre>
	</li></ul></li>
     <li> For further reading on server setup for network booting in general, see also: <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html>diskless(8)</a>.</li>
 </ul>
<li>Client Network Boot</li><br>
<ul><li>BOOT_ADMIN <br>
	In order to get to the BOOT_ADMIN prompt, you must hit <em>\<esc\></em> as the
	machine is coming up.  Once it probes bootable devices, type 'a' for
	the 'BOOT_ADMIN' prompt.
    </li>
    <li>network boot command <br>
	Once at the 'BOOT_ADMIN' prompt, type:
<pre>
	BOOT_ADMIN> boot lan isl
</pre>
	... and you are on your way to booting boot.lif!
    </li>
</ul>
</ol>
<hr>
<a href=plat.html><img height=24 width=24 src=back.gif border=0 alt=OpenBSD></a> 
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br>
<small>$OpenBSD: hppa.html,v 1.35 2000/02/28 21:16:32 mickey Exp $</small>

</body>
</html>
