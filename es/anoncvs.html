<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD por AnonCVS</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="How to get OpenBSD updates via Internet using Anonymous CVS">
<meta name="keywords" content="openbsd,anoncvs,updates">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-1998 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">

<img alt="[OpenBSD]" height=30 width=141 SRC="../images/smalltitle.gif">
<p>
<h2><font color="#e00000">CVS Anónimo</font><hr></h2>

<p>
<ul><h3>Tabla de Contenidos</h3>
<li><a href="#anoncvs">¿Qué es CVS Anónimo</a>
<li><a href="#CVS">¿Qué es CVS?</a>
<li><a href="#starting">Cómo Empezar a Usar CVS Anónimo.</a>
<li><a href="#using">Usar CVS para Bajar y Actualizar el Árbol de
Fuentes.</a>
<li><a href="#CVSROOT">Servidores Anónimos de CVS Disponibles.</a>
<li><a href="#CRYPTO">Obtener Código Criptográfico por CVS.</a>
<li><a href="#EXAMPLE">Ejemplo de Utilización de CVS.</a>
<li><a href="#WHICH">¿Usar rsh(1) o ssh(1)?</a>
<li><a href="#SUP">Replicar el Repositorio de CVS mediante SUP(1).</a>
<li><a href="#MIRROR">Configurar una Réplica de AnonCVS.</a>
</ul>
</p>
<hr>


<a name="anoncvs"></a>
<h3><font color="#0000e0">Qué es CVS Anónimo?</font></h3>

<p>
CVS Anónimo es un método para mantener una copia local del árbol de fuentes
de OpenBSD actualizada con respecto a los cambios hechos a los fuentes de
OpenBSD-current.
</p>

<p>
La mayor ventaja de CVS Anónimo sobre otras técnicas de actualización de
código fuente es que funciona directamente contra un repositorio o réplica
central de código fuente.
Esto quiere decir que Vd. puede usar todas las órdenes disponibles de CVS
para controlar la fusión y actualizar los cambios que aplique con otros
cambios en los fuentes, y para obtener ficheros diff, cambiar historiales y
otras acciones contra el repositorio central.
</p> 

<p>
El Proyecto OpenBSD tiene actualmente tres repositorios principales de
fuentes:
</p>

<ul>
        <li><b>src</b> - Hospeda todo el código fuente del Sistema Operativo
	OpenBSD.
        <li><b>ports</b> - Hospeda los <a href="./ports.html">Portes para 
	OpenBSD</a>.
        <li><b>www</b> - Hospeda todas las páginas web de OpenBSD (incluida
	ésta).
</ul>

<p>
Resumiendo, el poder real de usar CVS Anónimo es que éste es un sistema de
control de código fuente &laquo;tolerante&raquo;;  <strong>respeta</strong>
los cambios que el usuario ha llevado a cabo en sus fuentes locales y
<strong>se esfuerza</strong> en actualizar el árbol completo de fuentes del
usuario, en lugar de dejar una lista de problemas arcanos que deberán ser
resueltos antes de continuar.
</p>

<a name="CVS"></a>
<h3><font color="#0000e0">¿Qué es CVS?</font></h3>

<p>
<a href="why-cvs.html">CVS es el sistema de control de código fuente que se
usa para gestionar el árbol de fuentes de OpenBSD.</a>
Implementa un repositorio central para todas las revisiones oficiales y
cambios del código fuente, mientras permite que los desarrolladores mantengan
copias locales del código fuente con los cambios que éstos hayan aplicado.
Los desarrolladores con &laquo;<b>permiso de acceso con escritura</b>&raquo; 
pueden entregar los cambios realizados directamente al árbol de fuentes de 
OpenBSD, mientras que los usuarios de &laquo;CVS Anónimo&raquo; disponen de 
&laquo;<b>permiso de acceso con lectura</b>&raquo; y pueden mantener sus 
copias locales de los fuentes actualizadas y realizar búsquedas y consultas 
en el repositorio central.
</p>

<p>
La mayor ventaja de CVS es la de ser capaz de llevar a cabo fusiones
inteligentes de los cambios que haya habido en el repositorio central con los 
cambios que haya hecho el usuario en su copia local.
Esto significa que si Vd. efectúa un cambio en un módulo y lleva a cabo una
actualización, sus cambios no son rechazados, sino que CVS se esforzaría en
fusionarlos con los del repositorio central.
</p>

<p>
En el supuesto caso en que los cambios no pudieran ser completamente
fusionados, entonces CVS le enviaría los cambios a su copia local con
comentarios sobre éstos, perservando un copia intacta de su versión y 
continuando con la actualización del resto de módulos que Vd. hubiera 
requerido.
</p>

<a name="starting"></a>
<h3><font color="#0000e0">Cómo Empezar a Usar CVS Anónimo.</font></h3>

<p>
La última versión de CVS está disponible en 
<a href="http://download.cyclic.com/pub/">Cyclic</a>.
Se recomienda no usar versiones anteriores a la 1.6, ya que pueden no
funcionar.
Si ya tiene OpenBSD instalado, CVS va incluido.
</p>

<p>
Aquéllas personas que posean un CD de OpenBSD puede que hayan visto los
directorios <i>CVS</i> en él.
Hay una razón para esto;  el CD tiene una parte del módulo <b>src</b> de 
OpenBSD que sirve para continuar la actualización desde ella.
Si usa este árbol la actualización inicial de CVS será más rápida que si
actualiza todo el árbol de fuentes de OpenBSD partiendo desde cero.
Hay dos modos de usar el CD:
</p>

<ul>
<li>Para copiar el árbol de CVS desde el CD a <i>/usr/src</i> (suponiendo que
el CD esté montado en /mnt):
<pre>
	# <b>cd /mnt; pax -rw CVS Makefile [a-z]* /usr/src</b>
</pre>
<li>Usar un montaje de unión con el CD en un directorio en el que se pueda
escribir (esto se puede usar cuando sólo se compile desde el árbol):
<pre>
	# <b>mount -t union -o -b /mnt /usr/src</b>
</pre>
</ul>

<p>
Quienes no tengan un CD a mano pueden usar 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1&format=html">cvs(1)</a> para &laquo;<b>descargar</b>&raquo; el repositorio de fuentes.
Este método se discute en la <a href="#using">próxima sección</a>.
</p>

<p>
Después de esto, <i>/usr/src</i> será una buena área de descarga en donde
todas las órdenes de 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1&format=html">cvs(1)</a> funcionarán sin problemas.
</p>

<a name="using"></a>
<h3><font color="#0000e0">Usar CVS para Bajar y Actualizar el Árbol de
Fuentes.</font></h3>

<p>
CVS se diseñó para que fuera un modo sencillo de bajarse y actualizar los
fuentes, y por tanto no es difícil usarlo.
Para empezar, el usuario debe saber qué servidor de CVS Anónimo va a usar.
Hay una <a href="#CVSROOT">lista</a> de estos servidores en esta página.
Sin embargo, nótese que hay sólo tres modos de acceder a estos servidores:
</p>

<ul>
<li><b>ssh</b> - `Secure Shell'.
Es el modo <b>recomendado</b> de acceder a los servidores de CVS anónimo, ya 
que utiliza cifrado.
Desde OpenBSD 2.6, OpenSSH viene incluido en la distribución normal.
<li><b>rsh</b> - `Remote Shell'.
Se puede utilizar en algunos de los servidores para los usuarios que no
dispongan de acceso a <a href="http://www.openssh.com/es">ssh</a>.
<li><b>pserver</b> - `pserver'.
Es útil principalmente para usuarios que se encuentren detrás de cortafuegos 
que bloqueen las otras dos conexiones.
</ul>

<p>
<b>NOTA:</b> Los usuarios que deseen usar ssh, primero deben configurar la
variable <i>CVS_RSH</i> para ssh.

<ul>
<li> Para shells como Bourne o Korn:
<pre>
	$ <b>export CVS_RSH="/usr/bin/ssh"</b>
</pre>
<li> Para shells basadas en CSH:
<pre>
	$ <b>setenv CVS_RSH /usr/bin/ssh</b>
</pre>
</ul>

<p>
Una vez que haya escogido qué <a href="#CVSROOT">Servidor de CVS Anónimo</a>
va a usar y qué método utilizará, puede empezar a usar cvs.
Quienes dispongan de los CDs pueden empezar con la descarga de CVS existente
en el CD usando el <a href="#starting">método antes mencionado</a> para bajar
los fuentes a su sistema.
Este método pone el árbol de fuentes de OpenBSD en <i>/usr/src</i>.
</p>

<p>
<ul><pre>
# <b>cd /usr; cvs checkout src</b>
</ul></pre>
</p>

<p>
La línea de órdenes anterior descargará los fuentes más actuales.
Muchos de Vds. sólo querrán los fuentes de la revisión, sobre todo si está
&laquo;parcheando&raquo; su sistema.
Para descargar los fuentes de la revisión lo debe especificar como una opción
con parámetro en la línea de órdenes;  por ejemplo:
</p>

<p>
<ul><pre>
# <b>cd /usr; cvs checkout -rOPENBSD_2_6 src</b>
</ul></pre>
O OPENBSD_2_5 para 2.5, etc...
</p>


<a name="CVSROOT"></a>
<h3><font color="#0000e0">Servidores Anónimos de CVS Disponibles.</font></h3>

<p>
Existe dos niveles de acceso al árbol de fuentes:
There are two levels of source tree access:

<dl>
<dt><strong>Acceso de lectura/escritura para desarrolladores:</strong>
<dd>Los desarrolladores que necesiten enviar cambios al árbol de fuentes
deben tener una cuenta en las máquinas de OpenBSD.
La obtención de este acceso es el resultado de su trabajo sobre los fuentes
con otros desarrolladores de OpenBSD.
Si alguien hace un buen trabajo y muestra que puede trabajar con el equipo,
entonces obtendrá una cuenta.
</dl>

<dl>
<dt><strong>Acceso de sólo-lectura para todos:</strong>
<dd>Cualquiera puede acceder con permiso de sólo lectura a los repositorios
de CVS.
Las copias del repositorio principal de CVS de sólo lectura se replican con
frecuencia.
Para poder usarlas, configure su variable de entorno <strong>CVSROOT</strong>
con uno de los siguientes valores:
<p>
<a href="#rvs"><strong>¡Por favor, lea la nota sobre el uso de ssh vs. rsh!</strong></a>
<p>
<ul>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs1.usa.openbsd.org:/cvs</strong><br>
También conocido como <strong>anoncvs@anoncvs4.usa.openbsd.org</strong>.<br>
ubicado en California (Oeste de EE.UU.).<br>
mantenido por <a href="mailto:millert@openbsd.org">Todd Miller</a>.<br>
protocolos: sólo pserver.<br>
actualizado cada 4 horas.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.usa.openbsd.org:/cvs</strong><br>
También conocido como <strong>anoncvs3.usa.openbsd.org</strong>.<br>
ubicado en la Universidad de Colorado, Boulder (Oeste de EE.UU.).<br>
mantenido por <a href="mailto:Todd.Miller@cs.colorado.edu">Todd Miller</a>.<br>
protocolos: rsh, ssh, ssh puerto 2022, pserver.<br>
actualizado cada 6 horas.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs5.usa.openbsd.org:/cvs</strong><br>
También conocido como <strong>squid.nas.nasa.gov</strong>.<br>
ubicado en Ames Research Center, Moffett Field, California (EE.UU.).<br>
mantenido por <a href="mailto:allison@mail.arc.nasa.gov">Tyler Allison</a>.<br>
protocolos: sólo ssh.<br>
actualizado cada 3 horas.<br>
<li><strong>CVSROOT=anoncvs@mirror.arc.nasa.gov:/cvs</strong><br>
ubicado en Ames Research Center, Moffett Field, California (EE.UU.).<br>
mantenido por <a href="mailto:allison@mail.arc.nasa.gov">Tyler Allison</a>.<br>
protocolos: sólo ssh.<br>
actualizado cada 3 horas.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs6.usa.openbsd.org:/cvs</strong><br>
También conocido como <strong>openbsd.citi.umich.edu</strong>.<br>
ubicado en la Universidad de Michigan, (Centro de EE.UU.).<br>
mantenido por <a href="mailto:rees@umich.edu">Jim Rees</a>.<br>
protocolos: ssh, ssh puerto 2022.<br>
actualizado cada 12 horas.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs1.ca.openbsd.org:/cvs</strong><br>
También conocido como <strong>anoncvs.ca.openbsd.org</strong>, 
<strong>openbsd.sunsite.ualberta.ca</strong><br>
ubicado en Edmonton, Alberta (Canadá).<br>
mantenido por <a href="mailto:beck@ualberta.ca">Bob Beck</a><br>
protocolos: ssh, rsh, ssh puerto 2022, pserver<br>
actualizado cada 2 horas.<br>
<p>
<li><strong>CVSROOT=anoncvs@valkyrie.secureops.com:/cvs</strong><br>
ubicado en Montreal, Quebec, Canadá.<br>
mantenido por <a href="mailto:drbones@darkelves.com">Patrick Ethier</a>.<br>
protocolos: ssh<br>
actualizado cada 24 horas, a las 3 a.m. EST.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.uk.openbsd.org:/cvs</strong><br>
También conocido como <strong>dumpty.wonderland.org</strong>.<br>
ubicado en Londres (R.U.).<br>
mantenido por <a href="mailto:peter@wonderland.org">Peter Galbavy</a>.<br>
protocolos: rsh.<br>
actualizado cada 12 horas.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.tw.openbsd.org:/cvs</strong><br>
También conocido como <strong>OpenBSD.csie.NCTU.edu.tw</strong>.<br>
ubicado en Taipei (Taiwán).<br>
mantenido por <a href="mailto:lkchu@OpenBSD.csie.NCTU.edu.tw">Liang-Kai Chu</a>.<br>
protocolos: rsh, ssh, ssh puerto 2022.<br>
actualizado cada 12 horas.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.no.openbsd.org:/cvs</strong><br>
También conocido como <strong>cvs.inet.no</strong>.<br>
ubicado en Noruega.<br>
mantenido por <a href="mailto:cvsadmin@inet.no">Michael Shuldman</a>.<br>
protocolos: rsh, ssh, ssh puerto 2022.<br>
actualizado cada 4 horas.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.se.openbsd.org:/cvs</strong><br>
También conocido como <strong>anoncvs.stacken.kth.se</strong>.<br>
ubicado en Suecia.<br>
mantenido por <a href="mailto:anoncvs@stacken.kth.se">Magnus Holmberg</a>.<br>
protocolos: rsh, ssh, ssh puerto 2022.<br>
actualizado cada 3 horas.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.be.openbsd.org:/cvs</strong><br>
También conocido como <strong>badlands.rug.ac.be</strong>.<br>
ubicado en Bélgica.<br>
mantenido por <a href="mailto:wvdputte@reptile.rug.ac.be">Wim Vandeputte</a>.<br>
protocolos: ssh, ssh puerto 2022.<br>
actualizado cada 3 horas.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.jp.openbsd.org:/cvs</strong><br>
También conocido como <strong>kankoromochi.econ.nagasaki-u.ac.jp</strong>.<br>
ubicado en la Facultad de Económicas de la Universidad de Nagasaki (Japón).<br>
mantenido por <a href="mailto:sigh@net.nagasaki-u.ac.jp">SUZUKI Hitoshi</a>.<br>
protocolos: ssh, pserver.<br>
actualizado cada 3 horas.<br>
<li><strong>CVSROOT=anoncvs@anoncvs.cz.openbsd.org:/cvs</strong><br>
También conocido como <strong>com-os2.ms.mff.cuni.cz</strong>.<br>
ubicado en la Facultad de Matemáticas y Físicas, Charles University, en Praga
(República Checa).<br>
mantenido por <a href="mailto:galambos@com-os2.ms.mff.cuni.cz">Leo Galambos</a>.<br>
protocolos: ssh, ssh puerto 2022.<br>
actualizado cada 3 horas.<br>
<li><strong>CVSROOT=anoncvs@anoncvs1.au.openbsd.org:/cvs</strong><br>
También conocido como <strong>anoncvs.au.openbsd.org</strong>, 
<strong>anoncvs.openbsd.aba.net.au</strong><br>
ubicado en Carlton, Victoria (Australia).<br>
mantenido por <a href="mailto:mwp@aba.net.au">Micheal Paddon</a><br>
protocolos: ssh<br>
actualizado cada 4 horas.<br>
<li><strong>CVSROOT=anoncvs@dolphin.mtmc.ru:/cvs</strong><br>
ubicado en Moscú, Russia<br>
mantenido por <a href="mailto:jc@mtmc.ru">John Chertihin</a><br>
protocolos: rsh, ssh<br>
actualizado cada 24 horas (a la 1am, hora de Moscú)<br>
<li><strong>CVSROOT :pserver:anoncvs@gloup.linuxfr.org:/cvs</strong><br>
También conocido como <strong>gloup.linuxfr.org</strong><br>
ubicado en París (Claranet), FRANCE<br>
mantenido por: <a href="mailto:seisen@linuxfr.org">Fabien Seisen</a><br>
protocolos: pserver, ssh<br>
actualizado cada 24 horas ( a las 2am GMT )<br>
<li><strong>CVSROOT=anoncvs@cvs.bsdfr.org:/cvs</strong><br>
ubicado en Francia.<br>
mantenido por: <a href="mailto:jch@oleane.net>Jean-Claude Christophe</a><br>
protocolos: pserver<br>
actualizado cada 24 horas.<br>
<li><strong>CVSROOT=anoncvs@exokernel.lcs.mit.edu:/cvs</strong><br>
ubicado en M.I.T, (Este de EE.UU.).<br>
mantenido por ????<br>
protocolos: ssh, ???<br>
actualizado cada ? horas.<br>
<li><strong>CVSROOT=anoncvs@xyzzy.gsnig.org:/cvs</strong><br>
ubicado en G&ouml;teborg, Suecia<br>
mantenido por martin@openbsd.org<br>
protocolos: ssh port 2022<br>
actualizado cada 4 horas.<br>
<li><strong>CVSROOT=anoncvs@stl-isaas.ey.com:/cvs</strong><br>
ubicado en St. Louis, MO (Este de EE.UU.).<br>
mantenido por <a href="mailto:aaron11@sprynet.com">Aaron Miller</a><br>
protocolos: ssh, ssh puerto 2022, pserver<br>
actualizado cada 3 horas.<br>
<li><strong>CVSROOT=anoncvs@openbsd.groupbsd.org:/cvs</strong><br>
ubicado en Hillsborough NC (Este de EE.UU.).<br>
mantenido por <a href="mailto:jason@openbsd.org">Jason Wright</a><br>
protocolos: ssh<br>
actualizado cada 4 horas.<br>
<li><strong>CVSROOT=anoncvs@headend-vlan1-cm19.fibertel.com.ar:/cvs</strong><br>
ubicado en Buenos Aires (Argentina)<br>
mantenido por ????<br>
protocolos: ssh?, ???<br>
actualizado cada ? horas.<br>
</ul>


<p>
<em>Nota:</em> Si su servidor se encuentra en esta lista con información
inexacta o desconocida, por favor contacte con 
<a href="mailto:beck@openbsd.org"><tt>beck@openbsd.org</tt></a>
</p>

<p>
Para saber qué servidor se encuentra geográficamente más cerca de Vd. puede 
usar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute&sektion=8&format=html">traceroute(8)</a>.
Para los problemas que puedan surgirle con algún servidor debe dirigirse al
<b>mantenedor</b> del servidor en cuestión.
</p>
</dl>

<a name="CRYPTO"></a>
<h3><font color=2#0000e0">Obtener Código Criptográfico por CVS</font></h3>

<p>
<strong>NOTA IMPORTANTE:</strong>
Hay algunos temas relacionados con el software criptográfico que todos
deberían conocer:
<ul>
<li>Los fuentes de OpenBSD son de Canadá.
Según este 
<a href="http://insight.mcmaster.ca/org/efc/pages/doc/crypto-export.html">estudio de un particular canadiense</a> y la 
<a href="http://axion.physics.ubc.ca/ECL.html">lista de Controles sobre la
Exportación de Canadá</a>, es legal exportar software criptográfico desde
Canadá al resto del Mundo.
<p>
<li>Sin embargo, si se encuentra Vd. fuera de los EE.UU. o Canadá no debe
coger las secciones criptográficas de los fuentes de OpenBSD desde un sevidor
anoncvs ubicado en los EE.UU.  Los ficheros en cuestión son:
<ul>
<li>src/kerberosIV/*
<li>src/lib/libdes/*
<li>src/lib/libc/crypt/crypt.c
<li>src/lib/libc/crypt/morecrypt.c
<li>src/sys/netinet
<li>src/usr.sbin/afs/src/rxkad/*
<li>X11/xc/lib/Xdmcp/Wraphelp.c
</ul>
A causa de la lista ITAR de municiones de los EE.UU., el software
criptográfico sólo puede ser exportado a Canadá desde los EE.UU.
<p>
<li>El proyecto OpenBSD está buscando más servidores anoncvs;  siga leyendo
si desea saber cómo puede ayudar.
</ul>

<a name="EXAMPLE"></a>
<h3><font color="#0000e0">Ejemplo de Utilización de CVS.</font></h3>

<p>
Un ejemplo del uso de anoncvs en un servidor de CVS sería:
<ul>
<pre>
% <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
% <strong>cd /tmp</strong>
% <strong>cvs get src/sys/arch/sparc</strong>
    [copia los ficheros desde el repositorio a su máquina]
% <strong>cvs log src/sys/arch/sparc/sparc/locore.s</strong>
    [muestra el log de entrega del fichero que se escoja]
% <strong>cvs diff -bc -r1.1 -r1.5 src/sys/arch/sparc/sparc/locore.s</strong>
    [muestra los cambios entre las revisiones 1.1 y 1.5]
</pre>
</ul>

<p>
<a name="pserver">Para usar un cvs ``pserver'' (una conexión tcp directa en
lugar de usar ssh o rsh) debe hacer un ingreso de login una sola vez:</a>

<ul>
<pre>
    [ *NOTA* Debe usar la versión 1.8 o superior de cvs ]
% <strong>setenv CVSROOT :pserver:anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
% <strong>cvs login</strong>
(Logging in to anoncvs@anoncvs1.ca.openbsd.org)
CVS password: <strong>anoncvs</strong>
    [escribe un línea en ~/.cvspass (nombre del fichero anulado por CVS_PASSFILE)]
    [Un línea de ejemplo de mi ~/.cvspass después de escribir 'blah' en la
    contraseña anterior es:
    :pserver:anoncvs@anoncvs5.usa.openbsd.org:/cvs Au'yc
    ...después del primer ingreso de login funcionarán el resto de órdenes
    del CVSROOT visto anteriormente]
% <strong>cvs get ksrc-i386 ksrc-common</strong>
    [le permite bajar SÓLO lo necesario para reconstruir un núcleo para i386]
</pre>
</ul>

<p>
Un ejemplo de cómo alguien que usara anoncvs con regularidad actualizaría su
árbol de fuentes:
<ul><li>Primero empezaría por obtener un árbol inicial:

<ul>
<pre>
# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
# <strong>cd /usr</strong>
# <strong>cvs -q get -PA src</strong>
</pre>
</ul>
</li>

<li>Más tarde, para &laquo;actualizar&raquo; su árbol:

<ul>
<pre>
# <strong>cd /usr/src</strong>
# <strong>cvs -q up -PAd</strong>
</pre>
</ul>

Y cada vez que ejecutara lo anterior sincronizaría su árbol en /usr/src.
Esto no destruiría ninguno de sus cambios locales, sino que intentaría
fusionar los cambios.
Si fuera a usar directorios obj (no enlaces simbólicos obj) es probable que
quisiera añadir &quot;-I obj&quot; a la línea de órdenes de cvs;  de este
modo evitaría que cvs lanzara un aviso sobre todos los directorios obj que
fuera encontrando y que no estuvieran en el repositorio.

<p>
<li> NOTA: si está actualizando un árbol de fuentes que ya había bajado desde
un servidor diferente, o desde un CD, <strong>debe</strong> añadir la opción
<em>-d $CVSROOT</em> a cvs.
También debe configurar la variable de entorno <em>CVS_IGNORE_REMOTE_ROOT</em>.

<ul>
<pre>
# <strong>cd /usr/src</strong>
# <strong>cvs -d $CVSROOT -q up -PAd</strong>
</pre>
</ul>

</li>
</ul>

<p>
El <a name="ports">uso</a> de los <a href="ports.html">portes</a> es parecido
al de src:

<ul>
<li>
<pre>
# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
# <strong>cd /usr</strong>
# <strong>cvs -q get -PA ports</strong>
</pre>
</li>

<li>Más tarde, para &laquo;actualizar&raquo; este árbol:
<pre>
# <strong>cd /usr</strong>
# <strong>cvs -q up -PAd ports</strong>
</pre>
</li>
</p>
</ul>

En el ejemplo anterior, <i>-q</i> es opcional, sólo sirve para minimizar la salida
de cvs.
Aquéllos que quieran ver pantallas llenas de mensajes lo pueden omitir.

<p>
o para hacer un diff de un módulo local parcheado (en el ejemplo siguiente
<i>cd.c</i>) para incluirlo con un informe de error:

<ul>
<pre>
# <strong>cd /usr</strong>
# <strong>cvs diff -u src/sys/scsi/cd.c > /tmp/patch</strong>
</pre>
</ul>
</p>

<p>
La página de manual de 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1&format=html">CVS(1)</a>
(incluida con los fuentes de CVS) tiene mucha más
información sobre cómo se puede usar CVS.

<p>
<strong>Árbol de fuentes de X11</strong>
<br>
Las réplicas de anoncvs también disponen del árbol de fuentes de X11 de
OpenBSD.
Puede adaptar las órdenes anteriores para actualizar su árbol de
fuentes de X11 desde el segundo CD.
Puede hacer esto copiándolo, o usando un montaje &quot;union&quot; para
obtener los fuentes de X11 en <i>/usr/X11</i>:

<ul>
<li>copie el árbol desde el CD (se asume que el segundo CD ha sido
montado en /mnt):

<pre>
        # <strong>cd /mnt; cp -Rp X11 /usr</strong>
</pre>

<li>use un montaje &quot;union&quot; con el CD montado en un directorio
para el que tenga permisto de escritura:

<pre>
        # <strong>mount -t union -o -b /mnt/X11 /usr/X11</strong>
</pre>
</ul>

Después de esto, <i>/usr/X11</i> estará preparado para ser usado por
cvs.
Por ejemplo, puede actualizarlo con los fuentes de &quot;-current&quot;
(se asume que ya ha configurado la variable de entorno <b>CVSROOT</b>):

<ul>
<pre>
        # <strong>cd /usr/X11</strong>
        # <strong>cvs -q update -PAd</strong>
</pre>
</ul>

<p>
<strong>Aviso:</strong>
Cuando use cvs debe tomar la precaución de que su directorio actual sea el
directorio raíz del árbol que tome como referencia, o que sea en un sitio
aparte como /tmp.
Algunas órdenes como &quot;get&quot; pueden crear un &laquo;sub-árbol&raquo;
en el directorio actual y una actualización posterior producirá, de modo
recursivo, información sobre este &laquo;sub-árbol&raquo;.

<p>
El servicio anoncvs ofrece la oportunidad a desarrolladores de aprender a 
operar con CVS y a meterse de lleno en el proceso de desarrollo antes de
obtener acceso absoluto;  como resultado de buenas habilidades y resultados
de alta calidad, se les otorgará en su momento acceso de desarrollador.
También aquéllos que entreguen parches pueden crear sus diffs relativos al
árbol de CVS, lo que facilitará la integración.


<a name="WHICH"></a>
<h3><font color="#0000e0">¿Usar rsh(1) o ssh(1)?</font></h3>

<p>
<a name="rvs"><strong>Anoncvs: rsh vs. ssh</strong>
<br>

El cliente de CVS usa rsh para comunicarse con el servidor de CVS por
definición.
Muchos de los sitios CVS han dejado de ofrecer soporte para rsh por razones
de seguridad; otros problemas como un cortafuegos o un emulador de protocolo 
imperfecto como slirp pueden evitar que se pueda usar rsh.
La alternativa es usar una conexión de &laquo;shell segura&raquo;: 
<a href="http://www.openssh.com/es">OpenSSH (*Libre y Gratis*)</a> o 
<a href="http://www.cs.hut.fi/ssh/">ssh (versión comercial y no comercial)</a>.

<p>
Los repositorios anoncvs de OpenBSD tienen implementado soporte para el
protocolo SSH1, no el protocolo SSH2 debido a su aplicación de una
&laquo;política de licencia para uso estrictamente no comercial&raquo;.

<p>
Una vez que ssh está instalado, hay que configurar la variable de entorno
<strong>CVS_RSH</strong> para que señale a ssh (generalmente 
<strong>/usr/local/bin/ssh</strong>).
Si su servidor no le permite conectar por el puerto 22 (predefinido en ssh),
use el puerto 2022.

<p>
No intente activar la compresión ya que CVS comprime de por sí.
Use algo como lo que sigue en su fichero <strong>$HOME/.ssh/config</strong>.
Nota: No todos los sevidores anoncvs permiten conexiones ssh por el puerto 
2022.
La mayoría de servidores han dejado de aceptar el cifrado
<strong>none</strong>, ya que éste está desactivado en las versiones más
recientes de ssh por razones de seguridad.
<pre>
	Host anoncvs.ca.openbsd.org
	    Port 2022
</pre>

<p>
El inicio de CVS es un poco ruidoso;  para silenciarlo un poco puede hacer
lo siguiente:

<ul>
<pre>
<strong>setenv CVS_CLIENT_PORT -1</strong>
</pre>
</ul>

<p>
Si desea cambiar de un servidor de CVS a otro (si el que usa normalmente está
caído, o por cualquier otra razón), la variable de entorno que le permitirá
hacerlo es:

<ul>
<pre>
<strong>setenv CVS_IGNORE_REMOTE_ROOT</strong>
</pre>
</ul>

También necesitará usar la opción <strong>-d</strong> como se menciona
anteriormente.

<a name="SUP"></a>
<h3><font color=#0000e0>Replicar el Repositorio de CVS mediante SUP(1).</font></h3>

<p>
Los usuarios que quieran replicar el árbol de CVS de OpenBSD, pueden
hacerlo desde <em>anoncvs.usa.openbsd.org</em>.
Éste es el árbol de CVS, <b>no</b> una copia del árbol de fuentes.
Sólo le será útil para poder llevar a cabo operaciones rápidas de cvs
(diff, annotate, etc...), o si tiene múltiples árboles de fuentes y
sólo quiere transferir nuevos datos una vez (entonces puede obtener una
copia del árbol desde su réplica local de cvs).

<p>
Un fichero sup (<i>supfile</i>) de ejemplo sería:

<pre>
       cvs host=anoncvs.usa.openbsd.org hostbase=/ base=/home delete
</pre>

<p>
que replicaría el árbol de cvs en /home/cvs con los ficheros de datos
de sup en /home/sup.
El árbol de cvs completo de OpenBSD es algo menos de un gigabyte de
tamaño.

<a name="MIRROR"></a>
<h3><font color="#0000e0">Configurar una nueva réplica de anoncvs.</font></h3>

<p>
Si desea que su servidor sea un réplica nueva de anoncvs, por favor contacte
con el <a href="mailto:sup@openbsd.org">mantenedor</a> de anoncvs.
Las réplicas de anoncvs requieren alrededor de 1GB de espacio en disco, y hacen uso
de hasta 4MB de memoria de swap por cada usuario de anoncvs (suponiendo que
el usuario haga una operación grande;  aunque las operaciones más pequeñas
usan menos recursos, el impacto de las operaciones de cvs sigue siendo mayor
que las de ftp o sup).
Por tanto, las máquinas para anoncvs deberían estar dotadas de una excelente
conexión de red para el área que van a servir.
Se encuentra disponible un <a href="../anoncvs.shar">documento</a> que describe
la configuración de servidores anoncvs.

<h3><font color="#0000e0">Notas finales:</font></h3>

Después de actualizar el árbol de fuentes, es necesario leer los comentarios
al principio de <kbd>/usr/src/Makefile</kbd> antes de intentar compilar.
También se debe compilar un nuevo núcleo <strong>antes</strong> de hacer un
<kbd>make build</kbd> si es posible.
En algunos casos puede ser necesario recompilar e instalar la utilidad
<kbd>config</kbd> antes de compilar el núcleo.
Si <kbd>config GENERIC</kbd> falla, probablemente se deba a esto último.
<p>
Es importante saber que actualizar desde una revisión al árbol actual
recompilando los fuentes puede ser bastante difícil debido a las dependencias
que a menudo no son claras.
Por tanto, sugerimos que instale primero el último &quot;snapshot&quot; antes
de intentar compilar un árbol desde los fuentes.

<hr>
<a href="index.html"><img height=24 width=24 src="../back.gif" border=0 alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: anoncvs.html,v 1.108 ]<br>
$Translation: anoncvs.html,v 1.8 2000/05/23 19:39:57 wim Exp $<br>
$OpenBSD: anoncvs.html,v 1.7 2000/05/26 06:54:15 wvdputte Exp $
</small>

</body>
</html>
