<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict Level 2//EN//2.0">
<html>
<head>
<title>Criptografía en OpenBSD</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD cryptography">
<meta name="keywords" content="openbsd,cryptography,openssh,openssl,kerberos">
<meta name="keywords" content="ipsec,photuris,isakmp,ike,blowfish,des,rsa,dsa">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1997 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">
<img align="left" alt="[OpenBSD]" height="166" width="197" src="../images/blowfish-notext.jpg">
<br>
<br>
<br>
&#8211;&#8211;El &quot;mantra&quot; de cualquier buen ingeniero de seguridad es :
&laquo;La seguridad no es un producto, sino un proceso.&raquo;  Es algo más
que diseñar criptografía fuerte en un sistema;  es diseñar el sistema por
completo de manera que todas las medidas de seguridad, incluyendo la
criptografía, funcionen juntas.&#8212;&#8212;<br>
<!-- 
"The mantra of any good security engineer is: "Security is a not a
product, but a process." It's more than designing strong cryptography
into a system; it's designing the entire system such that all security
measures, including cryptography, work together."<br>
-->
<br>
-- Bruce Schneier, autor de "Applied Cryptography".
<br clear="all">
<h2><font color="#e00000">Criptografía</font><hr></h2>

<strong>Índice</strong><br>
<a href="#why">¿Por qué Incluimos Criptografía?</a>.<br> 
<a href="#ssh">OpenSSH</a>.<br> 
<a href="#prng">Generadores de Números Pseudoaleatorios</a> (PRNG): ARC4, ...<br>
<a href="#hash">Funciones de Hash Criptográficas</a>: MD5, SHA1, ...<br>
<a href="#trans">Transformaciones Criptográficas</a>: DES, Blowfish, ...<br>
<a href="#hardware">Soporte para Hardware Criptogr&aacute;fico</a><br>
<a href="#people">Se Buscan Criptógrafos Internacionales</a><br>
<a href="#papers">Otros Textos</a><br>
<p>
<hr>

<a name="why"></a>
<h3><font color="#e00000">¿Por qué Incluimos Criptografía?</font></h3><p>

En dos palabras:  <strong>porque podemos</strong>.<p>

El proyecto OpenBSD está localizado en Canadá.<p>

La <a href="../ECL.html">Lista sobre Controles a la Exportación de Canadá</a>
no impone ninguna restricción significativa a la exportación de software
criptográfico, y es incluso más explícita sobre la exportación de software de
libre disponibilidad.
Marc Plumb ha hecho un 
<a href="http://insight.mcmaster.ca/org/efc/pages/doc/crypto-export.html">estudio para comprobar las leyes sobre criptografía</a>.
<p>

Por tanto el proyecto OpenBSD ha integrado criptografía en muchas partes del
sistema operativo.
Una condición &laquo;sine qua non&raquo; que exigimos del software 
criptográfico que usamos es que sea de <a href="policy.html">dominio público
y licencias decentes</a>.
No hacemos uso directo de criptografía con patentes restrictivas.
También exigimios que provenga de países con leyes sobre la exportación
útiles, ya que no deseamos quebrantar las leyes de ningún país.
Los componentes criptográficos que usamos hoy en día fueron escritos en
Argentina, Australia, Canadá, Alemania, Grecia, Noruega, y Suecia.
<p>

Cuando creamos revisiones de las versiones de OpenBSD o
&quot;snapshots&quot; construimos los binarios para éstas en países libres,
para asegurarnos de que los fuentes y binarios que ponemos a disposición de
los usuarios están libres de toda sospecha.  En el pasado hemos construido
nuestras versiones de binarios en Canadá, Suecia y Alemania.<p>

OpenBSD sale con Kerberos IV incluido.  El código base que usamos es el de la
versión exportable de Suecia, basada en KTH.
Nuestros fuentes del entorno gráfico X11 han sido ampliados para el uso de 
Kerberos IV.
Soporte para Kerberos V aparecerá, probablemente, en 1.999;  pero de momento 
no existe una versión exportable y libre de Kerberos V.<p>

La criptografía es hoy un importante medio para mejorar la 
<a href="security.html">seguridad</a> en un sistema operativo.
La criptografía que se usa en OpenBSD se puede clasificar según varios
aspectos, descritos a continuación.<p>

<a name="ssh"></a>
<h3><font color="#e00000">OpenSSH</font></h3><p>

¿Qué es lo que la mayor parte de los usuarios hacen después de instalar
OpenBSD?
Instalar Secure Shell 
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh">ssh(1)</a>) del
árbol de portes o de los paquetes conseguidos por FTP.
Hasta ahora así ha sido.<p>

Desde la llegada de la versión 2.6, OpenBSD contiene 
<a href="http://www.openssh.com/es/">OpenSSH</a>, una versión de ssh totalmente
libre y sin los gravámenes de patentes.
<a href="http://www.openssh.com/es/">OpenSSH</a> interacciona con la versión 1
de ssh y además añade muchas características:
<ul>
   <li>todos los componentes de naturaleza restrictiva (o sea, patentes (ver
       <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl">ssl(3)</a>))
       han sido eliminados de forma directa del código fuente;  cualquier
       componente bajo licencia o patentado se escoge de bibliotecas
       externas;</li>
  
  <li>ha sido actualizado para dar soporte al protocolo 1.5 de ssh;</li>

  <li>contiene además soporte para autenticación con 
      <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kerberos">kerberos(1)</a>;</li>

  <li>soporte para autenticación con contraseña de uso de una sola vez con 
      <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skey">skey(1)</a>.</li>
</ul>
<p>

En OpenBSD tomamos una versión con licencia libre de ssh y la hicimos al
estilo OpenBSD.
La patente para los EE.UU. de RSA la evitamos ofreciendo un método fácil para
descargar e instalar un paquete con RSA activado, que contenga versiones de
las bibliotecas compartidas de libcrypto y libssl.
Estos paquetes están basados en 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=openssl&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">OpenSSL(1)</a>.
Las personas que vivan fuera de los EE.UU. pueden usar con total libertad el
código patentado de RSA, mientras que aquellas personas que vivan dentro de
los EE.UU. lo pueden usar con libertad siempre y cuando no sea con fines 
lucrativos.
Parece ser que las compañías (no individuos) dentro de los EE.UU. también
pueden usar las bibliotecas de RSA, siempre y cuando no sea con fines
lucrativos.<p>

De este modo casi todos obtendrán ssh integrado.<p>

<a name="prng"></a>
<h3><font color="#e00000">Generadores de Números Pseudoaleatorios</font></h3><p>

Un generador de números pseudoaleatorios (PRNG - Pseudo Random Number
Generator) provee a las aplicaciones con una fuente de números que tienen
ciertas propiedades importantes para la seguridad del sistema:<p>

<ul>
   <li>Debería ser imposible que un extraño pudiera predecir la salida del
       generador de números aleatorios, incluso si conoce la salida anterior.

   <li>Los números generados no deberían tener patrones que se repitieran, lo
       que quiere decir que el PRNG debería tener una longitud de ciclo muy
       larga.
</ul>
<p>

Un PRNG es por lo general un algoritmo en el que los mismos valores iniciales
producirán las misma secuencia de salidas.
En un sistema operativo multiusuario existen muchos recursos que permiten
alimentar el PRNG con datos aleatorios.
El núcleo de OpenBSD usa el interruptor de tiempo del ratón, las señales de
interrupción de datos de la red, las señales producidas entre diferentes
pulsaciones de teclado y la información de E/S del disco, para alimentar la
entropía.
Los números aleatorios están disponibles para las rutinas del núcleo y se
exportan mediante dispositivos a programas en los directorios de usuarios. 
Hasta ahora, los números aleatorios se usan en las siguientes partes:<p>

<ul>
   <li>Asignación dinámica de sin_port en bind(2).
   <li>PIDs de procesos.
   <li>IDs de datagramas de IP.
   <li>IDs de transacción de RPC (XID).
   <li>IDs de transacción de NFS RPC (XID).
   <li>IDs de requerimiento de DNS.
   <li>Números de generación de I-nodos (ver getfh(2) y fsirand(8)).
   <li>Perturbaciones de tiempo en traceroute(8).
   <li>Nombres temporales más robustos para mktemp(3) y mkstemp(3).
   <li>Aleatoriedad añadida al valor TCP ISS para la protección contra
       ataques de &quot;spoofing&quot;.
   <li>Relleno aleatorio en los paquetes esp_old de IPSEC.
   <li>Generación de &laquo;sales&raquo; para los varios algoritmos de las
       contraseñas.
   <li>Generación de retos S/Key falsos.
   <li>En <a    href="http://www.physnet.uni-hamburg.de/provos/photuris/">photurisd</a> y <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd">isakmpd(8)</a>, proveer pruebas vivas de intercambios de claves.
</ul>

<p>
<a name="hash"></a>
<h3><font color="#e00000">Funciones de Hash Criptográficas</font></h3><p>

Una Función de &quot;Hash&quot; comprime sus datos de entrada en una cadena
de tamaño constante.
Para una Función &quot;Hash&quot; Criptográfica no es factible encontrar:

<ul>
   <li>dos entradas que tengan la misma salida (resistencia a la colisión);
   <li>una entrada diferente para una entrada dada con la misma salida
       (resistencia a 2ª preimagen).
</ul>
<p>

MD5, SHA1 y RIPEMD-160, se usan en OpenBSD como Funciones de &quot;Hash&quot;
Criptográficas, v.g.:<p>

<ul>
   <li>En <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skey">S/Key</a> para proveer contraseñas de uso de una sola vez.
   
   <li>En <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec">IPsec(4)</a>, <a href="http://www.physnet.uni-hamburg.de/provos/photuris/">photurisd</a> 
   e <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd">isakmpd(8)</a> para autenticar el origen de los datos de los paquetes y asegurar la 
   integridad de los paquetes.
   
   <li>Para las contraseñas MD5 de estilo FreeBSD (no activadas por
   definición), ver 
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&sektion=4">options(4)</a>
   
   <li>Para soporte de &quot;cookies&quot; TCP SYN (no activado por
   definición), ver 
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&sektion=4">options(4)</a>
   
   <li>En libssl para la firma digital en los mensajes.
</ul>
<p>

<p>
<a name="trans"></a>
<h3><font color="#e00000">Transformaciones Criptográficas</font></h3><p>

Las Transformaciones Criptográficas se usan para cifrar y descifrar datos.
Éstas son comúnmente utilizadas con una clave de cifrado para cifrar datos y
con una clave de descifrar para descifrarlos.
La seguridad de una Transformación Criptográfica debería descansar sólo en el
material de la clave.<p>

OpenBSD provee transformaciones como DES, 3DES, Blowfish y Cast para el
núcleo del sistema y los programas en directorios de usuario, y se usan en
muchas partes, como por ejemplo:<p>

<ul>
   <li>En libc para crear contraseñas con 
   <a    href="http://www.openbsd.org/cgi-bin/man.cgi?query=blf_key">Blowfish(3)</a>.
   Ver también las <a href=../papers/bcrypt-paper.ps>ponencias de USENIX</a>
   sobre este tema.

   <li>En 
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec">IPsec(4)</a>
   para proveer confidencialidad en la red.
   
   <li>En Kerberos y unas cuantas aplicaciones &laquo;kerberizadas&raquo;, 
   como 
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=telnet">telnet(1)</a>, 
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs">cvs(1)</a>,
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rsh">rsh(1)</a>,
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcp">rcp(1)</a> y 
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rlogin">rlogin(1)</a>.
   
   <li>En 
   <a href="http://www.physnet.uni-hamburg.de/provos/photuris/">photurisd</a>
   e 
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd">isakmpd(8)</a>
   para proteger los intercambios en los que se negocie material de clave
   IPsec.
   
   <li>En AFS para proteger los mensajes que pasan por la red, dando
   confidencialidad para el acceso remoto a los sistemas de archivos.
   
   <li>En libssl para dejar que las aplicaciones se comuniquen mediante el
   protocolo &laquo;de facto&raquo; criptográficamente seguro, SSL.
</ul>

<p>
<a name="hardware"></a>
<h3><font color="#e00000">Soporte para Hardware Criptogr&aacute;fico</font></h3><p>

A partir de la versi&oacute;n 2.7 de OpenBSD existe soporte para algo
de hardware criptogr&aacute;fico.

<ul>
<li><b>IPSEC crypto dequeue</b><br>

Hemos modificado IPSEC para poder implementar algunas funciones
criptogr&aacute;ficas.
La mayor parte del software de IPSEC necesita usar criptograf&iacute;a
para procesar cada paquete, lo que requiere cierta
sincronizaci&oacute;n.
Para usar el hardware de un modo correcto y r&aacute;pido, es necesario
separar estos dos componentes, como hemos hecho nosotros.
De este modo se mejoran incluso los resultados obtenidos del software.

<p>
<li><b>HiFn 7751</b><br>

Las tarjetas que usen 
<a href="http://www.hifn.com/products/7751.htm">HiFn 7751</a>
se pueden utilizar como aceleradoras criptogr&aacute;ficas (o sea,
<a href="http://www.powercrypt.com">PowerCrypt</a>).
Con el uso de una Hifn 7751 en cada extremo de un tunel se obtienen
unos resultados de 63Mbits por segundo para 3DES/SHA1 ESP, una
mejor&iacute;a de casi un 600% en una CPU P3/550.
Estamos trabajando para mejorar unos cuantos puntos, pero desde el 13
de abril de 2.000, el c&oacute;digo se considera ya estable.
Hemos desarrollado nuestro propio dispositivo para el soporte de este
chip, en lugar de usar el dispositivo de 
<a href="http://www.powercrypt.com">powercrypt</a> (desarrollado en los
EE.UU.), as&iacute; como nuestros enlaces del dispositivo con IPSEC.

<p>
El 7751 est&aacute; actualmente considerado como lento de acuerdo con
las normativas de la industria, y muchos distribuidores disponen de
chips m&aacute;s veloces (en la actualidad, incluso el HiFn tiene un
chip m&aacute;s veloz aunque m&aacute;s caro).
Estamos trabajando en el desarrollo del soporte de otros chips como:

<p>
<ul>
<li><a href="http://www.ire.com/OEM/OEMTechnologyDefault.htm">IRE 2141</a>
<li><a href="http://www.bluesteelnet.com/product.html">Bluesteelnet 5501</a>
<li><a href="http://www.pcc.pijnenburg.nl/pcc-ises.htm">Pijnenburg PCC-ISES</a>
<li>tal vez el de
<a href="http://www.3com.com/promotions/3c990promo/index.html">3com 3c990</a>
<li>y otros.
</ul>


<p>
IRE y Bluesteelnet han sido muy amables, y nos han ofrecido toda la
informaci&oacute;n necesaria para el desarrollo del soporte para su
hardware.
Hay otros fabricantes en nuestra lista, pero nos estamos centrando
primero en ofrecer soluciones r&aacute;pidas y econ&oacute;micas.
Intel, y 3com en menor medida, todav&iacute;a no entienden
c&oacute;mo podr&iacute;an benficiarse ofreci&eacute;ndonos la
documentaci&oacute;n de sus tarjetas criptogr&aacute;ficas, por lo que
si Vd. desea contactar con ellos y animarles a hacerlo, lo puede hacer
por cuenta propia.

<p>
Si alguien quiere ayudar en el desarrollo de controladores,
<a href="#people">puede unirse a nosotros</a>.

<p>
<li><b>Intel 82802AB/82802AC Firmware Hub RNG</b><br>

El chip 82802 (que se encuentra en las placas base i810, i820 e i840)
contiene un generador de n&uacute;meros aleatorios (RNG).
Para IPSEC de alto rendimiento se requiere m&aacute;s entrop&iacute;a de
n&uacute;meros aleatorios.
Desde el 10 de abril de 2.000, disponemos de soporte para el RNG.
A&ntilde;adiremos m&aacute;s soporte para otros RNGs que se encuentran
en chips criptogr&aacute;ficos.

<p>
<li><b>OpenSSL</b><br>

Tenemos esquemas para el soporte de tarjetas criptogr&aacute;ficas que
pueden funcionar con RSA o DSA, y exportar las funciones de todas las
tarjetas criptogr&aacute;ficas a OpenSSL para que los programas de
modo usuario (o sea, <a href="http://www.openssh.com/es/">ssh</a>, 
<a href="http://www.modssl.org/">apache https</a>, etc...) puedan
beneficiarse de ello.

<p>
<a name="people"></a>
<h3><font color="#e00000">Se Buscan Criptógrafos Internacionales</font></h3><p>

Nuestro proyecto necesita personas que trabajen en estos sistemas.
Si algún criptógrafo, que no sea estadounidense y que cumpla los requisitos 
que se han enumerado en esta página, está interesado en ayudar con 
criptografía integrada en OpenBSD, por favor contacte con nosotros.<p>

<p>
<a name="papers"></a>
<h3><font color="#e00000">Otros Textos</font></h3><p>

Los miembros del equipo de OpenBSD han escrito unas cuantas ponencias sobre
los cambios en criptografía que ellos han aplicado a OpenBSD.
Las versiones en postscript de estos documentos estan disponibles como
sigue.<p>

<ul>
   <li>A Future-Adaptable Password Scheme.<br>
       <a href="../events.html#usenix99">Usenix 1999</a>,
       por <a href="mailto:provos@openbsd.org">Niels Provos<a/>,
       <a href="mailto:dm@openbsd.org">David Mazieres</a>.<br>
       <a href="../papers/bcrypt-paper.ps">ponencia</a> y 
       <a href="../papers/bcrypt-slides.ps">diapositivas</a>.
<p>
  <li>Cryptography in OpenBSD: An Overview.<br>
      <a href="../events.html#usenix99">Usenix 1999</a>,
      por <a href="mailto:deraadt@openbsd.org">Theo de Raadt</a>,
      <a href="mailto:niklas@openbsd.org">Niklas Hallqvist</a>,
      <a href="mailto:art@openbsd.org">Artur Grabowski</a>,
      <a href="mailto:angelos@openbsd.org">Angelos D. Keromytis</a>,
      <a href="mailto:provos@openbsd.org">Niels Provos</a>.<br>
      <a href="../papers/crypt-paper.ps">ponencia</a> y 
      <a href="../papers/crypt-slides.ps">diapositivas</a>.
</ul>

<p>
<hr>
<a href="index.html"><img height=24 width=24 src="../back.gif" border=0 alt="OpenBSD"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: crypto.html,v 1.53 2000/04/13 13:10:58 deraadt Exp ]<br>
$Translation: crypto.html,v 1.5 2000/04/14 12:47:23 horacio Exp $<br>
$OpenBSD: crypto.html,v 1.4 2000/04/14 12:57:21 wvdputte Exp $
</small>

</body>
</html>
