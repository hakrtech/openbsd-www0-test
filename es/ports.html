<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="resource-type" content="document">
<meta name="description" CONTENT="How OpenBSD can make use of the FreeBSD ports">
<meta name="keywords" content="openbsd,ports">
<meta name="distribution" content="global">
<meta name="copyright" content="copyright 1997-1999 by the OpenBSD project">

<title>Portes y Paquetes de OpenBSD</title>
<link rev="made" HREF="mailto:www@openbsd.org">

<body text="#000000" bgcolor="#FFFFFF" link="#23238E">

<img height="30" width="141" src="../images/smalltitle.gif" alt="[OpenBSD]" >

<h2><font color="#e00000">La Colecci&oacute;n de Portes y
Paquetes</font><hr></h2>

<h3><font color="#0000e0">Motivaciones</font></h3>

OpenBSD es un sistema bastante completo por s&iacute; solo, pero hay
grandes cantidades de software que a algunos usuarios les
gustar&iacute;a ver a&ntilde;adido.  Sin embargo existe un dilema sobre
hasta d&oacute;nde llega el l&iacute;mite de lo que se puede incluir,
as&iacute; como problemas ocasionales con las licencias y las
restricciones a la exportaci&oacute;n.  Partiendo de la base de que
OpenBSD es un sistema operativo de tipo Unix, hay algunas cosas que no
se pueden incluir en la distribuci&oacute;n del sistema.

<p>
<strong><font color="#e00000">
La colecci&oacute;n de portes y paquetes NO recibe la misma
auditor&iacute;a de seguridad que sigue OpenBSD.  Aunque nos esforzamos
en mantener la gran calidad de la colecci&oacute;n de paquetes, no
disponemos de los suficientes recursos humanos como para poder asegurar
el mismo nivel de estabilidad y fiabilidad.
</font></strong>

<p>
La colecci&oacute;n de portes, que al principio se tom&oacute; de la
colecci&oacute;n de <a href="http://www.freebsd.org/es/">FreeBSD</a>,
rellena este vac&iacute;o.  El concepto es el de disponer, para cada
software proveniente de terceras partes, un fichero Makefile que
controle
<ul>
<li>de d&oacute;nde cogerlo,
<li>c&oacute;mo llevar a cabo la recogida,
<li>de qu&eacute; depende (si hay dependencias),
<li>c&oacute;mo aplicar cambios en los fuentes (si fuera necesario),
<li>y c&oacute;mo configurarlo, compilarlo e instalarlo.
</ul>

Esta informaci&oacute;n se mantiene en una jerarqu&iacute;a de
directorios bajo el directorio /usr/ports.

<p>
Los paquetes son los equivalentes binarios de los portes.  Un porte
compilado se convierte en un paquete que se puede registrar en el
sistema usando pkg_add(1).

<p>
<strong><font color="#e00000">
Los paquetes parecen simples archivos <code>.tar.gz</code>, pero se
deben a&ntilde;adir siempre usando 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1&format=html">pkg_add(1)</a>, 
ya que puede haber informaci&oacute;n adicional que s&oacute;lo 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1&format=html">pkg_add(1)</a>
sabe c&oacute;mo gestionar.
</font></strong>
Una pista:  puede distinguir entre los paquetes y los archivos .tar.gz
usando <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&sektion=1&format=html">pkg_info(1)</a>.

<h3><font color="#0000e0">C&oacute;mo Obtener los Paquetes</font></h3>

Existe una gran colecci&oacute;n de paquetes precompilados disponibles
para las arquitecturas m&aacute;s comunes.

<ul>
<li>En el CDROM (que puede adquirir
    <a href="orders.html">aqu&iacute;</a>),
<li>En las <a href="ftp.html">r&eacute;plicas de ftp</a>.
</ul>

A&ntilde;adir un paquete es tan sencillo como hacer 
<code>pkg_add pkgname.tar.gz</code>.  Si va a obtener los paquetes de
una &uacute;nica fuente (un repositorio de paquetes), configure
PKG_PATH para que se&ntilde;ale la URL de ese repositorio.

<p>
Por ejemplo, para instalar el paquete gimp para la versi&oacute;n 2.7
en una m&aacute;quina i386 desde el sitio de ftp (incluyendo las
dependencias), haga lo siguiente:

<pre>
    # setenv PKG_PATH ftp://ftp.openbsd.org/pub/OpenBSD/2.7/packages/i386/
    # pkg_add gimp-1.1.17.tar.gz
</pre>

<h3><font color="#0000e0">Gesti&oacute;n de paquetes
instalados</font></h3>
 
La p&aacute;gina de manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=packages&sektion=7&format=html">packages(7)</a>
contiene informaci&oacute;n de utilidad sobre las forma de gestionar
paquetes instalados, resolver conflictos (ficheros que ya existan) y
gestionar las dependencias.

<p>
A partir de OpenBSD 2.7, para actualizar un paquete debe:
<ul>
<li>Eliminar el paquete viejo usando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&sektion=1&format=html">pkg_delete(1)</a>
<li>A&ntilde;adir el paquete nuevo usando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1&format=html">pkg_add(1)</a>
</ul>

Esto no es muy conveniente, ya que los paquetes podr&iacute;an accionar
las dependencias, y entonces tendr&iacute;a que eliminar un subgrupo de
paquetes grande para una actualizaci&oacute;n.


<h3><font color=#0000e0>C&oacute;mo usar los portes</font></h3>

Si un paquete dado no existe para su arquitectura, a&uacute;n es
posible compilar el porte.  Adem&aacute;s, algunos usuarios
querr&aacute;n compilarlo todo desde el c&oacute;digo fuente por varios
motivos.

<p>
Puede bajarse por ftp la versi&oacute;n oficial correspondiente desde
el directorio pub/OpenBSD/[versi&oacute;n] (en donde [versi&oacute;n]
es el n&uacute;mero de la versi&oacute;n) de cualquiera de las 
<a href="ftp.html">r&eacute;plicas de ftp</a>.  Las versiones oficiales
(&quot;releases&quot;) son las que vienen en el CDROM, y han pasado
m&aacute;s pruebas que cualquier versi&oacute;n de prueba
(&quot;snapshots&quot;).  Puede encontrar m&aacute;s informaci&oacute;n
al respecto en la p&aacute;gina de manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ports&sektion=7&format=html">ports(7)</a>.

<h3><font color="#0000e0">Actualizaci&oacute;n de los portes para una
versi&oacute;n oficial de OpenBSD</font></h3>

<p>
El &aacute;rbol de portes, como el resto del &aacute;rbol de OpenBSD,
est&aacute; cambiando constantemente.  El ciclo de vida normal del
&aacute;rbol de portes es de este modo:
<ul>
<li>Seguir tras la &uacute;ltima versi&oacute;n de OpenBSD durante unos
    pocos meses despu&eacute;s del lanzamiento oficial.
<li>Empezar a seguir tras OpenBSD-current unos dos meses antes del
    lanzamiento de la pr&oacute;xima versi&oacute;n.
</ul>

El cambio de estado se publicar&aacute; en las 
<a href="mail.html">listas de correo</a>.

<p>
El &aacute;rbol de portes funciona como una entidad &uacute;nica.
Actualizar un solo directorio no garantiza que vaya a funcionar, ya que
las dependencias de un paquete puede forzarle a actualizar y recompilar
una amplia parte del &aacute;rbol de portes.  Se recomienda que los
usuarios no sigan los portes de current a menos que est&eacute;n
preparados para los consiguientes problemas.  Por ejemplo, algunas
versiones del paquete de portes podr&iacute;a haber dejado de estar
disponible.  Por tanto, tendr&iacute;a que obtener y usar una
versi&oacute;n m&aacute;s nueva del &aacute;rbol de portes.
N&oacute;tese que el &aacute;rbol de ports-current se comprueba con el
de OpenBSD-current, y <strong>NO</strong> est&aacute; garantizado que
funcione con la versi&oacute;n estable anterior.  Se recomienda
encarecidamente a los usuarios que no hagan seguimientos de
ports-current a menos que est&eacute;n dispuestos a hacer un
seguimiento completo de OpenBSD-current, incluidos los fuentes.  Las 
<a href="mail.html">listas de correo</a> como la de
<code>source-changes@openbsd.org</code> o <code>tech@openbsd.org</code>
ser&aacute;n probablemente de gran ayuda.

<p>
El &aacute;rbol ports-current se puede obtener por medio de:
<ul>
<li><a href="anoncvs.html">CVS An&oacute;nimo</a> (ver enlace).
La orden es, esencialmente, <strong>cvs get ports</strong>.
<li>FTP An&oacute;nimo en 
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/ports.tar.gz">ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/ports.tar.gz</a>.
Este archivo se actualiza cada noche.
<li><a href="cvsup.html">CVSup</a>.  Vea el ejemplo de c&oacute;mo usar
CVSup en <a href="cvsup.html#checkout">modo checkout</a>.
<li>su navegador de http, mediante la 
<a href="http://www.openbsd.org/cgi-bin/cvsweb/ports/">interfaz de web
de CVS</a>.
</ul>

<h3><font color=#0000e0>Portes y XFree</font></h3>

<p>
Hay algo de magia especial en los ficheros de configuraci&oacute;n de
XFree de OpenBSD, que permite al &aacute;rbol de portes instalar en
/usr/local aplicaciones basadas en imake.

<p>
En la actualidad, OpenBSD no incluye XFree 4.0.x por varios motivos.
Esta magia especial de los portes no funciona con la
distribuci&oacute;n de XFree 4.0.x.  Si quiere que funcione con el
&aacute;rbol de portes de OpenBSD, tendr&aacute; que aplicar el parche
que hay en
<code>/usr/ports/infrastructure/patches/patch-xfree-4.0</code> a una
distribuci&oacute;n binaria de XFree 4.0.x.

<h3><font color="#0000e0">Ejemplo del uso del &aacute;rbol de
Portes</font></h3>

<p>
Suponiendo que hubiera conseguido obtener un &aacute;rbol de portes y
que quisiera compilar e instalar la herramienta de descompresi&oacute;n
de archivos <strong>unzip</strong>, podr&iacute;a hacer algo parecido a
esto:

<pre>
    % cd /usr/ports/archivers/unzip
    % su
    # make
    # make install
    # exit
</pre>

F&aacute;cil, &iquest;no es cierto?  Especialmente si consideramos todo
lo que ha ocurrido en un plano de fondo:
<ul>
<li>Bajar los fuentes de unzip desde un sito de ftp,
<li>Comprobar la integridad del archivo de fuentes,
<li>Extraer los fuentes de unzip,
<li>Aplicar parches espec&iacute;ficos de OpenBSD,
<li>Configurar y compilar el programa,
<li>Crear un paquete binario en /usr/ports/packages,
<li>Instalar ese paquete.
</ul>

<p>
En OpenBSD 2.7, una gran parte de los portes compilan paquetes de forma
autom&aacute;tica cuando se instalan.  En OpenBSD current, casi todos
los portes siguen esa normativa.

<p>
Seg&uacute;n se van compilando portes, el directorio
/usr/ports/distfiles se va llenando con fuentes de programas, y
/usr/ports/packages se va llenando con paquetes de binarios.  Los
usuarios con mala conexi&oacute;n pueden ver en la p&aacute;gina de
manual de mirror-distfiles(7) una buena referencia sobre un modo
eficiente de bajarse todos los distfiles de una vez.  Note que el CD de
OpenBSD s&oacute;lo incluye el &aacute;rbol de fuentes y los paquetes
seleccionados.  Si quiere tener los fuentes de los programas en
distfiles, tendr&aacute; que obtenerlos por un medio distinto.


<h3><font color="#0000e0">Crear nuevos portes</font></h3>

<p>
Si est&aacute; interesado en ayudar a expandir el &aacute;rbol de
portes de OpenBSD, antes que nada deber&iacute;a leer 
<a href="porting.html">porting.html</a>.  Esa p&aacute;gina hace
referencia a la secci&oacute;n de portes del 
<a href="http://www.freebsd.org/handbook/">FreeBSD handbook</a>
as&iacute; como a la pol&iacute;tica de OpenBSD al respecto y algunas
pistas que le servir&aacute;n de ayuda.

<h3><font color="#0000e0">Problemas y Direcci&oacute;n de
Contacto</font></h3>

<p>
Si tiene alg&uacute;n problema con los portes, o si necesita
informaci&oacute;n sobre c&oacute;mo crear nuevos portes, por favor
env&iacute;e un mensaje a la lista de correo sobre portes de OpenBSD
<a href="mailto:ports@openbsd.org">ports@openbsd.org</a>.
Las correcciones siempre se agradecen pero en cualquier caso, por favor
incluya:
<ul>
<li>La salida de <code>uname -a</code>,
<li>Su versi&oacute;n de OpenBSD, incluido cualquier parche que haya
    instalado,
<li>Una descripci&oacute;n completa del problema.

</ul>

<hr>
<a href="index.html"><img height=24 width=24 src="../back.gif" border=0 alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: ports.html,v 1.35 2000/07/27 17:02:06 espie Exp ]<br>
$Translation: ports.html,v 1.9 2000/07/01 15:27:36 horacio Exp $<br>
$OpenBSD: ports.html,v 1.10 2000/07/30 22:48:15 horacio Exp $
</small>
</body>
</html>
