<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD/hppa</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="documento">
<meta name="description" content="página de OpenBSD/hppa">
<meta name="keywords" content="openbsd,hppa">
<meta name="distribution" content="global">
<meta name="copyright" content="Este documento es copyright 1996-2000 de OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<h2>OpenBSD/hppa</h2>

<hr>

Este porte est&aacute; dirigido hacia el soporte para los siguientes
modelos de HP 9000:
705, 710, <b>712</b>, <b>715</b>, 720, <b>725</b>, 730, <b>735</b>,
750, <b>755</b>, J200, J210, J210XC, C100, C110, B132L, B160L, B180L,
C132L, C160L, C180L
(los modelos en negrilla son los que se sabe que funcionan).
Otros modelos con configuraciones de <i>hardware</i> similares a
&eacute;stos es posible que tengan soporte siempre que:
<ul>
  <li>Procesadores HP PA-RISC 7000, 7100, 7150, 7100LC, 7200, 7300LC;
  <li>Controladores de memoria Viper (¿otros?);
  <li>Controladores de bus / E/S LASI, ASP y WAX;
  <li>y controlador de bus EISA;
  <li>Procesador de E/S SCSI NCR53C700, NCR53C710, NCR53C720;
  <li>Controladores de v&iacute;deo Venom, CRX-8, CRX-24, HCRX-8 y
      HCRX-24;
  <li>Teclado y rat&oacute;n HIL o PS/2;
  <li>Los dispositivos EISA funcionar&aacute;n, pero no servir&aacute;n
      para el arranque, excepto algunos de los fabricados por HP para
      sistemas 700/800.
</ul>
Sistemas que pueden funcionar:
<ul>
  <li>Sistemas basados en pa8k (en modo de 32 bits);
  <li>HP 9000 834, 835, 836, 844, 845, 846;
  <li>HP 9000 E23, E25, E35, E45, E55;
  <li>HP 3000 908, 918, 928, 938;
  <li>Hitachi VQ200, VQ210, y algunas otras estaciones de trabajo que
      no sean HP;
  <li>Precision Book de RDI Computer Corporation (no creo)
  <li>Sistemas de placa &uacute;nica HP VME y VXI (requiere como
      m&iacute;nimo VME)
</ul>
<br>
Se necesita <i>hardware</i> para este proyecto;  vea la 
<a href="want.html">lista de <i>hardware</i> buscado</a>.
Contacte con <a href="mailto:mickey@openbsd.org">mickey</a>.

<h3><strong>Estado actual:</strong></h3>
Tiene el sistema autoconfig usando 
<a href="http://hppa.lucifier.net/#boot_lif">im&aacute;genes de
arranque</a>, en modo monousuario.

<h3><strong>Cronolog&iacute;a:</strong></h3>

<p>
Este proyecto vio la luz durante uno de aquellos d&iacute;as en los
que los &uacute;nicos sistemas operativos para m&aacute;quinas HP
PA-RISC eran
<a href="http://www.cs.utah.edu/projects/flux/lites/html">Lites</a> y
<a href="http://www.osf.org/mall/os/pa-mklinux">MkLinux</a>.
Estos dos constituyeron una fuente principal de informaci&oacute;n y
c&oacute;digo para el desarrollo inicial del porte OpenBSD/hppa.  El
sistema <a href="http://www.cs.utah.edu/~mike/hpbsd/hpbsd.html">HPBSD</a>
tiene el gravamen de ser c&oacute;digo propietario de HP y estar bajo
licencia USL, y no se encuentra a disposici&oacute;n p&uacute;blica.
Uno de los principales beneficios provenientes de los anteriores
intentos de desarrollar portes (adem&aacute;s del c&oacute;digo, por
supuesto), es el soporte para HP PA-RISC en GCC y binutils, que permite
la r&aacute;pida compilaci&oacute;n de un entorno de herramientas
cruzadas para el desarrollo.

<p>
M&aacute;s tarde, HP decidi&oacute; patrocinar un porte de
<a href="http://thepuffingroup.com/parisc/">Linux</a> para
m&aacute;quinas PA-RISC, que dio como resultado la liberaci&oacute;n de
parte de documentaci&oacute;n hasta el momento propietaria, aun cuando
su objetivo sea una clase de m&aacute;quinas 9000 distintas.

<p>
Aqu&iacute; est&aacute; la cronolog&iacute;a del porte OpenBSD/hppa
hasta el presente <small>(no lleva fechas, pero use 
<a href="anoncvs.html">cvs</a> para ver qu&eacute; ha ocurrido y
cu&aacute;ndo ocurri&oacute;)</small>:

<ul>
  <li>Reescrito el controlador de sti, con espicificaciones que se han
      liberado
  <li>La tabla de s&iacute;mbolos del n&uacute;cleo cargada por /boot
      (&iexcl;depurado simb&oacute;lico!)
  <li>init(8) se ejecuta sin problemas, pero subsiguientes shell en
      modo monousuario <u>se apaga</u>, lo que probablemente significa
      que encontr&oacute; alg&uacute;n problema al iniciar.
  <li>root em nfs, swap en nfs
  <li>Ethernet basada en i82596 (if_ie), en modo de memoria no
      cach&eacute;
  <li>La mayor parte del c&oacute;digo del n&uacute;cleo MD escrito
  <li>Soporte para DDB excepto watchpoints y single-stepping
  <li>Disco de arranque funciona
  <li>Controlador de placas de gr&aacute;ficos Stinger (*CRX-*)
  <li>Adaptadores de bus LASI, ASP, WAX y EISA
  <li>Controladores com, lpt, fdc (no fd todav&iacute;a ;)
  <li>Controlador PDC
  <li>Arranque del n&uacute;cleo (kernel bootstrap) funciona
  <li>Arranque de red funciona mediante la imagen LIF
  <li>Compilaci&oacute;n con herramientas cruzadas funciona
</ul>

<h4>Documentaci&oacute;n</h4>

<p>
<small>(la mayor parte ha sido liberada por HP para el proyecto
<a href="http://thepuffingroup.com/parisc/">Linux/parisc</a>)</small>:

<ol type="1">
<li><a href="http://devresource.hp.com/devresource/Docs/Refs/PA1_1/">HP PA-RISC CPUs</a>
   <ol type="a">
   <li><a href="http://puffin.external.hp.com/docs/PCXL_ers.ps">PA7100LC CPU ERS</a>
   <li><a href="http://puffin.external.hp.com/docs/pcxl2_ers.ps">PA7300LC CPU ERS</a>
   </ol>
<li><b>C&oacute;digo dependiente del procesador / interfaz del
    c&oacute;digo dependiente de la E/S</b><br>
    <small>(cap&iacute;tulos seleccionados de &quot;PA-RISC I/O
    Architecture Specification&quot;)</small>
   <ol type="a">
   <li><a href="http://puffin.external.hp.com/docs/pdc32.pdf">PDC 1.1</a>
   <li><a href="http://puffin.external.hp.com/docs/iodc.pdf">IODC 1.1</a>
   <li><a href="http://puffin.external.hp.com/docs/ver_nums.pdf">Ubicaci&oacute;n del N&uacute;mero de Identificaci&oacute;n y Versi&oacute;n</a>
   <li><a href="http://puffin.external.hp.com/docs/data_formats.pdf">Formatos de Datos de Memoria 2.0</a>
   <li><a href="http://puffin.external.hp.com/docs/pdc.pdf">Procedimientos de PDC 2.0</a>
   <li><a href="http://puffin.external.hp.com/docs/pdce.pdf">Puntos de Entrada de PDC 2.0</a>
   <li><a href="http://puffin.external.hp.com/docs/os_interface.pdf">OS Interface 2.0</a>
   </ol>
<li><b>Controladores de bus/puentes/adaptadores</b>
   <ol type="a">
<li><a href="http://puffin.external.hp.com/docs/lasi_ers.ps">Adaptador de Bus Core LASI (incluidos los controladores de lan, scsi, serial, lpt)</a>
<li><a href="http://puffin.external.hp.com/docs/dino_ers.ps">Dino PCI bridge</a>,
    y <a href="http://puffin.external.hp.com/docs/Dino_3_1_Errata.html">Errata</a>
<li><a href="http://puffin.external.hp.com/docs/elroy_ers.ps">Elroy ERS (Editado para C&oacute;digo Abierto)</a>
<li>Astro <a href="http://puffin.external.hp.com/docs/astro_intro.ps">Overview</a>, 
    <a href="http://puffin.external.hp.com/docs/astro_errors.ps">Manejo de errores</a>,
    <a href="http://puffin.external.hp.com/docs/astro_ioc.ps">Operaciones R2I</a>, 
    <a href="http://puffin.external.hp.com/docs/astro_regmap.ps">Mapas de Registros</a>, 
    <a href="http://puffin.external.hp.com/docs/astro_runway.ps">Runway Interface</a>, 
    <a href="http://puffin.external.hp.com/docs/astro_sysmap.ps">Mapa de la Memoria del Sistema</a>
<li><a href=http://puffin.external.hp.com/docs/sti.pdf>Stinger graphics</a>
<li><a href=http://www.lsilogic.com/techlib/techdocs/io_standard/770_2_0.pdf>NCR 53C700/710/720 SCSI I/O Processors</a>
    <small>(en realidad el documento es para 770, que dicen que es
    compatible)</small>
<li>Controladoras Ethernet <a href=http://developer.intel.com/design/network/datashts/290219.htm>i82596DX/SX</a> y <a href=http://developer.intel.com/design/network/datashts/290218.htm>i82596CA</a> de Intel.
    </ol>
</ol>

<h4>Herramientas de compilaci&oacute;n cruzada:</h4>
<p>

En la actualidad el <em>binutils</em> del &aacute;rbol no se puede usar
para generar herramientas de compilaci&oacute;n cruzada.  Para ello
deber&aacute; usar un &aacute;rbol de la versi&oacute;n 2.7, ya que la
2.8 y posteriores no funcionar&aacute;n.

<p>
<pre>
cd /usr/src
sudo make TARGET=hppa cross-tools
</pre>

<p>
El proceso para compilar estas herramientas puede fallar en libc;
consid&eacute;relo normal ya que el soporte para libc todav&iacute;a no
est&aacute; acabado.

<a name="boot_lif"></a>
<h4>Compilar el fichero boot.lif usando las herramientas de
compilaci&oacute;n cruzada</h4>
<p>

<pre>
cd /sys/arch/hppa/stand
make obj
set cross=(/usr/cross/hppa/usr/bin)
make MACHINE=hppa MACHINE_ARCH=hppa \
	&quot;AS=$cross/as&quot; &quot;CC=$cross/cc&quot; \
	&quot;CPP=$cross/cpp&quot; &quot;LD=$cross/ld&quot; \
	&quot;AR=$cross/ar&quot; &quot;STRIP=$cross/strip&quot; \
	&quot;LORDER=$cross/lorder&quot; &quot;NM=$cross/nm&quot; \
	&quot;RANLIB=$cross/ranlib&quot; &quot;SIZE=$cross/size&quot;
</pre>

<p>
Entonces se dispondr&aacute; de un fichero 
<a href="http://hppa.lucifier.net/#boot_lif"><em>boot.lif</em></a> para
arrancar en el directorio objetivo.  Esa imagen incluye una imagen del
n&uacute;cleo <em>sin disco</em>, si ya exist&iacute;a una disponible
en <em>sys/arch/hppa/compile/SHEPHERD_PIE/bsd</em>.
<br>
El proceso para una compilaci&oacute;n cruzada del núcleo es parecido
al seguido para la compilaci&oacute;n del arranque;  consulte las
p&aacute;gina de manual 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">config(8)</a>
y 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">options(8)</a>
para conocer las opciones de compilaci&oacute;n y configuraci&oacute;n
del n&uacute;cleo.

<h4>Desarrollo reciente:</h4>
<pre>
BOOT_ADMIN&gt; boot lan isl

Booting





&gt;&gt; OpenBSD/hppa BOOT 0.5
boot&gt; boot bsd
booting lf0a:/bsd: 991232+61440+208896 total=0x15a408 start 0x13000
[preserving 82952 bytes of bsd symbol table ]
Copyright (c) 1982, 1986, 1989, 1991, 1993
The Regents of the University of California.  All rights reserved.
Copyright (c) 1995-1999 OpenBSD. All right Reserved.  http://www.OpenBSD.org

OpenBSD 2.6-current (SHEPHERD_PIE) #1938: Sun Dec 12 13:02:59 EST 1999
    mickey@lucifier:/sys/arch/hppa/compile/SHEPHERD_PIE
HP9000/712/80 (King Gecko) PA-RISC 1.1
real mem = 16777216 (73728 reserved for PROM, 12582912 used by OpenBSD)
avail mem = 14028800
using 200 buffers containing 819200 bytes of memory
mainbus0 (root) [flex fff80000]
pdc0 at mainbus0
mem0 at mainbus0 hpa fffbf000: viper rev 0, ctrl 40400100&lt;eisa_prf&gt;, size 16M
cpu0 at mainbus0 hpa fffbe000: PA7000 v0.0, lev 1, cat A, 80 MHz clock
cpu0: shadows, 128K/128K D/I cache, 64 shared TLB, 8 shared BTLB
lasi0 at mainbus0 hpa f0100000 irq 28: ver 0
gsc0 at lasi0
&quot;PS/2 port&quot; at gsc0 (type a, sv 84) hpa f0108100 not configured
&quot;PS/2 port&quot; at gsc0 (type a, sv 84) hpa f0108000 not configured
&quot;floppy controller&quot; at gsc0 (type a, sv 83) hpa f010a000 not configured
&quot;Advanced audio (no beeper)&quot; at gsc0 (type a, sv 7b) hpa f0104000 not configured
lpt0 at gsc0 hpa f0102000 irq 7
com0 at gsc0 hpa f0105000 irq 5: ns16550a, 16 byte fifo
ie0 at gsc0 hp f0107000 irq 8: LASI/i82596CA rev 0, address 08:00:09:1b:3c:08
&quot;Core SCSI&quot; at gsc0 (type a, sv 82) hpa f0106000 not configured
sti0 at mainbus0 hpa f8000000: HPA208LC1280 rev 8.4, rom @ 0xf0080000
sti0: 2048x1024 frame buffer, 1280x1024 display, offset 0x0
sti0: 8x16 font type 1, 16 bpc, charset 0-255

</pre>

<small>la informaci&oacute;n fue tomada de la pantalla, perd&oacute;n
por los errores</small>
<hr>
Para poder usar los ficheros 
<a href="http://hppa.lucifier.net/#boot_lif">boot.lif</a>, debe preparar
su servidor y dar instrucciones a su m&aacute;quina para que arranque
desde la red:

<ol>
  <li>Configuraci&oacute;n del Servidor
  <ul>
    <li>En m&aacute;quinas m&aacute;s antiguas (705, 7[1235]0,
    715 antiguas),
    <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=rbootd&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html>rbootd</a>
    debe estar configurado y activado.<br>
    
    <ul>
      <li><strong>/etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rbootd&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">rbootd</a>.conf</strong>
      contiene una sola l&iacute;nea por cada m&aacute;quina que se
      introdujo para arrancar desde el servidor.  Cada l&iacute;nea
      contiene la direcci&oacute;n ethernet de la m&aacute;quina
      cliente hppa y el nombre del fichero que se debe cargar desde el
      servidor tftp.  Por ejemplo:

      <pre>
      8:0:9:70:c4:11    <a href="#boot_lif">boot.lif</a>    # 9000/720
      8:0:9:19:fb:a0    <a href="#boot_lif">boot.lif</a>    # 9000/725
      </pre>
      </li>
      </ul>
    </li>
    <li>Las m&aacute;quinas m&aacute;s recientes (712, 715 nuevas, 725)
    no buscar&aacute;n rbootd, pero requieren una configuraci&oacute;n de
    <strong>bootp/tftp</strong>.<br>
      <ul>
      <li><strong>/etc/<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=bootptab&apropos=0&sektion=5&manpath=OpenBSD+Current&format=html>bootptab</a></strong> contiene un bloque de informaci&oacute;n para cada m&aacute;quina.  Por ejemplo:
	<pre>
	# 9000/715
	moron:\
        	ha=0800095f5a6e:\
        	bf=boot.lif:\
        	hd=:\
        	ht=ethernet:\
        	ip=192.168.3.43:\
        	rp=/netboot/moron/root:\
        	sm=255.255.255.0:\
        	td=/tftpboot:
	</pre>
      </li>
	<li>
	Cree el directorio <em>/tftpboot</em> y copie
	<a href="#boot_lif">boot.lif</a> en &eacute;ste.<br>
	</li>
	<li>
	Ponga una entrada para su hppa en el fichero
	<strong>/etc/ethers</strong>:<br>
	<pre>
	08:00:09:5f:5a:6e	moron
	</pre>  
	</li>
	<li>
	Ponga una entrada para 'moron' en el fichero
	<strong>/etc/hosts</strong>:<br>
	<pre>
	10.0.0.42	moron
	</pre>  
	</li>
	<li>
	Create directory /usr/local/exports/moron/root and put <a href=http://hppa.lucifier.net/root/dev/MAKEDEV>/dev/MAKEDEV</a>,
	Cree el directorio <em>/usr/local/exports/moron/root</em> y
	ponga <a href=http://hppa.lucifier.net/root/dev/MAKEDEV>/dev/MAKEDEV</a>, <a href=http://hppa.lucifier.net/root/sbin/init>/sbin/init</a> y <a href=http://hppa.lucifier.net/root/bin/ksh>/bin/ksh</a>		
	en sus sitios relativos.
	</li>
	<li>
	Ponga un entrada en <strong>/etc/exports</strong> para que el
	directorio <em>root</em> sea exportado al cliente:
	<pre>
	/usr/local/exports/moron/root moron
	</pre>  
	</li>
	<li>
	Recuerde que tendr&aacute; que activar <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=bootpd&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html>bootpd</a> ,<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=tftpd&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html>tftpd</a> y <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=rarpd&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html>rarpd</a> 
	en <em>/etc/inetd.conf</em>, y reiniciar <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html>inetd</a>.
      </li>
      	<li>
	Acu&eacute;rdesde tambi&eacute;n de activar <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=nfsd&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html>nfs_server</a> y <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=portmap&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html>portmap</a> 
	en <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html>/etc/rc.conf</a>.
	</li>
      </ul>
    </li>
    <li>Para m&aacute;s informaci&oacute;n general sobre la configuraci&oacute;n de un servidor para el arranque por red, lea la p&aacute;gina del manual de <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html>diskless(8)</a>.</li>
    </ul>
  <li>Arranque del cliente por red</li><br>
  <ul>
    <li>BOOT_ADMIN<br>
	Para obtener el punto de ingreso de BOOT_AMIN, debe pulsar
	<em>\<esc\></em> en cuanto la m&aacute;quina se encienda.  Una
	vez que haya comprobado los dispositivos que se pueden
	arrancar, escriba 'a' para obtener el punto de ingreso
	'BOOT_ADMIN'.
    <li>orden de arranque por red<br>
	En cuanto se encuentre en el punto de ingreso 'BOOT_ADMIN',
	escriba:
    <pre>
	BOOT_ADMIN&gt; boot lan isl
    </pre>
        &iexcl;...y empezar&aacute; a arrancar boot.lif!
  </ul>
</ol>

<hr>

<a href="plat.html"><img height="24" width="24" src="../back.gif" border="0" alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: hppa.html,v 1.48 2001/07/18 19:56:09 mickey Exp ]<br>
$Translation: hppa.html,v 1.17 2001/07/22 18:46:01 horacio Exp $<br>
$OpenBSD: hppa.html,v 1.14 2001/07/22 20:02:16 jufi Exp $
</small>

</body>
</html>
