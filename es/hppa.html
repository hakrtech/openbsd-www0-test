<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD/hppa</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD/hppa page">
<meta name="keywords" content="openbsd,hppa">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<h2>OpenBSD/hppa</h2>

<hr>

Este porte está dirigido hacia el soporte para los siguientes modelos de 
HP 9000:
705, 710, <b>712</b>, <b>715</b>, 720, <b>725</b>,
730, <b>735</b>, 750, <b>755</b>, J200, J210, J210XC, C100, C110, B132L,
B160L, B180L, C132L, C160L, C180L
(los modelos en negrita son los que se sabe que funcionan).
Otros modelos con configuraciones de hardware similares a éstos es posible
que tengan soporte siempre que:
<ul>
  <li>HP PA-RISC 7000, 7100, 7150, 7100LC, 7200, 7300LC processors;
  <li>Controladores de memoria Viper (¿otros?);
  <li>Controladores de bus / E/S LASI, ASP y WAX;
  <li>y controlador de bus EISA;
  <li>Procesador de E/S SCSI NCR53C700, NCR53C710, NCR53C720;
  <li>Controladores de vídeo Venom, CRX-8, CRX-24, HCRX-8 y HCRX-24;
  <li>Teclado y ratón HIL o PS/2;
  <li>Los dispositivos EISA funcionarán, pero no servirán para el arranque,
      excepto algunos de los fabricados por HP para sistemas 700/800.
</ul>
Sistemas que pueden funcionar:
<ul>
  <li>Sistemas basados en pa8k (en modo de 32 bits);
  <li>HP 9000 834, 835, 836, 844, 845, 846;
  <li>HP 9000 E23, E25, E35, E45, E55;
  <li>HP 3000 908, 918, 928, 938;
  <li>Hitachi VQ200, VQ210, y algunas otras estaciones de 
      trabajo que no sean HP;
  <li>Precision Book de RDI Computer Corporation (no creo)
  <li>Sistemas de placa única HP VME y VXI (requiere como mínimo VME)
</ul>
<br>
Se necesita hardware para este proyecto;  vea la <a href="want.html">lista de
hardware buscado</a>.
Contacte con <a href="mailto:mickey@openbsd.org">mickey</a>.

<h3><strong>Estado Actual:</strong></h3>
Ha conseguido funcionar el autoconfig del sistema usando una
<a href="http://hppa.fries.net/#boot_lif">imagen de arranque</a>, en modo
monousuario.

<h3><strong>Cronología:</strong></h3>
<ul>
  <li>init(8) execs sin problemas, pero subsiguiente shell en modo
      monousuario <u>se apaga</u>, lo que probablemente significa que 
      encontró algún problema al iniciar.
  <li>root em nfs, swap en nfs
  <li>Ethernet basada en i82596 (if_ie), en modo de memoria no caché
  <li>La mayor parte del código del núcleo MD escrito
  <li>Soporte para DDB excepto watchpoints y single-stepping
  <li>Disco de arranque funciona
  <li>Controlador de placas de gráficos Stinger (*CRX-*)
  <li>Adaptadores de bus LASI, ASP, WAX y EISA
  <li>Controladores com, lpt, fdc (no fd todavía ;)
  <li>Controlador PDC
  <li>Arranque del núcleo (kernel bootstrap) funciona
  <li>Arranque de red funciona mediante la imagen LIF
  <li>Compilación con herramientas cruzadas funciona
</ul>

<h4>Herramientas de Compilación Cruzada:</h4>
<p>
<pre>
cd /usr/src
sudo make TARGET=hppa cross-tools
</pre>

<p>
El proceso para compilar estas herramientas puede fallar en libc;
considérelo normal ya que el soporte para libc todavía no está acabado.

<h4>Compilar el fichero boot.lif usando las herramientas de compilación
cruzada</h4>
<p>

<pre>
cd /sys/arch/hppa/stand
make obj
set cross=(/usr/cross/hppa/usr/bin)
make MACHINE=hppa MACHINE_ARCH=hppa \
	"AS=$cross/as" "CC=$cross/cc" \
	"CPP=$cross/cpp" "LD=$cross/ld" \
	"AR=$cross/ar" "STRIP=$cross/strip" \
	"LORDER=$cross/lorder" "NM=$cross/nm" \
	"RANLIB=$cross/ranlib" "SIZE=$cross/size"
</pre>

<p>
Entonces se dispondrá de un fichero 
<a href="http://hppa.fries.net/#boot_lif"><em>boot.lif</em></a> para arrancar
en el directorio objetivo.
Esa imagen incluye una imagen del núcleo <em>sin disco</em>, si ya existía 
una disponible en <em>sys/arch/hppa/compile/SHEPHERD_PIE/bsd</em>.
<br>
El proceso para una compilación cruzada del núcleo es parecido al seguido
para la compilación del arranque;  consulte las página de manual 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">config(8)</a>
y 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">options(8)</a>
para conocer las opciones de compilación y configuración del núcleo.

<h4>Desarrollo Reciente:</h4>
<pre>
BOOT_ADMIN&gt; boot lan isl

Booting





&gt;&gt; OpenBSD/hppa BOOT 0.5
boot&gt; boot bsd
booting lf0a:/bsd: 991232+61440+208896 total=0x15a408 start 0x13000
[preserving 82952 bytes of bsd symbol table ]
Copyright (c) 1982, 1986, 1989, 1991, 1993
The Regents of the University of California.  All rights reserved.
Copyright (c) 1995-1999 OpenBSD. All right Reserved.  http://www.OpenBSD.org

OpenBSD 2.6-current (SHEPHERD_PIE) #1938: Sun Dec 12 13:02:59 EST 1999
    mickey@lucifier:/sys/arch/hppa/compile/SHEPHERD_PIE
HP9000/712/80 (King Gecko) PA-RISC 1.1
real mem = 16777216 (73728 reserved for PROM, 12582912 used by OpenBSD)
avail mem = 14028800
using 200 buffers containing 819200 bytes of memory
mainbus0 (root) [flex fff80000]
pdc0 at mainbus0
mem0 at mainbus0 hpa fffbf000: viper rev 0, ctrl 40400100&lt;eisa_prf&gt;, size 16M
cpu0 at mainbus0 hpa fffbe000: PA7000 v0.0, lev 1, cat A, 80 MHz clock
cpu0: shadows, 128K/128K D/I cache, 64 shared TLB, 8 shared BTLB
lasi0 at mainbus0 hpa f0100000 irq 28: ver 0
gsc0 at lasi0
"PS/2 port" at gsc0 (type a, sv 84) hpa f0108100 not configured
"PS/2 port" at gsc0 (type a, sv 84) hpa f0108000 not configured
"floppy controller" at gsc0 (type a, sv 83) hpa f010a000 not configured
"Advanced audio (no beeper)" at gsc0 (type a, sv 7b) hpa f0104000 not configured
lpt0 at gsc0 hpa f0102000 irq 7
com0 at gsc0 hpa f0105000 irq 5: ns16550a, 16 byte fifo
ie0 at gsc0 hp f0107000 irq 8: LASI/i82596CA rev 0, address 08:00:09:1b:3c:08
"Core SCSI" at gsc0 (type a, sv 82) hpa f0106000 not configured
sti0 at mainbus0 hpa f8000000: HPA208LC1280 rev 8.4, rom @ 0xf0080000
sti0: 2048x1024 frame buffer, 1280x1024 display, offset 0x0
sti0: 8x16 font type 1, 16 bpc, charset 0-255

</pre>

<small>la información fue tomada de la pantalla, perdón por los errores</small>
<hr>
Para poder usar los ficheros 
<a href="http://hppa.fries.net/#boot_lif">boot.lif</a>, debe preparar su
servidor y dar instrucciones a su máquina para que arranque desde la red:

<ol>
  <li>Configuración del Servidor
  <ul>
    <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rbootd&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">rbootd(8)</a>
    debe estar configurado y activado.
    
    <ul>
      <li><b>/etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rbootd&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">rbootd</a>.conf</b>
      contiene una sola línea por cada máquina que se introdujo para arrancar
      desde el servidor.
      Cada línea contiene la dirección ethernet de la máquina cliente hppa y
      el nombre del fichero que se debe cargar desde el servidor tftp.
      Por ejemplo:

      <pre>
      8:0:9:70:c4:11    <a href="#boot_lif">boot.lif</a>    # 9000/720
      8:0:9:19:fb:a0    <a href="#boot_lif">boot.lif</a>    # 9000/725
      </pre>
    </ul>
    <li>Si necesita leer más en general sobre cómo configurar un servidor para 
        arrancar desde la red, lea:
	<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">diskless(8)</a>.
  </ul>
  <p>
  <li>Arranque del Cliente de Red
  <ul>
    <li>punto de ingreso (prompt) BOOT_ADMIN<br>
        Para obtener el punto de ingreso de BOOT_AMIN, debe pulsar 
	<em>\<esc\></em> en cuanto la máquina se encienda.
	Una vez que haya comprobado los dispositivos que se pueden arrancar,
	escriba 'a' para obtener el punto de ingreso 'BOOT_ADMIN'.
    <li>orden de arranque por red<br>
        En cuanto se encuentre en el punto de ingreso 'BOOT_ADMIN', escriba:
    <pre>
	BOOT_ADMIN&gt; boot lan isl
    </pre>
        ¡...y empezará a arrancar boot.lif!
  </ul>
</ol>

<hr>

<a href="plat.html"><img height="24" width="24" src="../back.gif" border="0" alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: hppa.html,v 1.36 2000/03/23 18:10:27 mickey Exp ]<br>
$Translation: hppa.html,v 1.4 2000/04/05 14:29:39 horacio Exp $<br>
$OpenBSD: hppa.html,v 1.2 2000/04/05 21:00:50 wvdputte Exp $
</small>

</body>
</html>
