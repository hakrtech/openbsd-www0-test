<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD CVSync</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta http-equiv="Content-Type" content="text/html; charset=GB2312">
<meta name="description" content="How to get OpenBSD updates via Internet using CVSync">
<meta name="keywords" content="openbsd,cvsync,updates">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 2003-2006 by OpenBSD.">
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#23238E">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a> 

<h2><font color="#e00000">CVSync</font></h2>
<hr>

<h3>内容索引</h3>
<ul>
  <li><a href="#CVSync">什么是CVSync?</a></li>  
  <li><a href="#CVS">什么是CVS?</a></li>
  <li><a href="#starting">开始使用CVSync</a></li>
  <li><a href="#using">使用CVS更新你的源码树</a></li>
  <li><a href="#CVSROOT">可用的CVSync服务器</a></li>
</ul>

<hr>


<h3><a name="CVSync"><font color="#0000e0">什么是CVSync?</font></a></h3>

<p> 
<b>CVSync</b>是一个用于从远程服务器主机上的主 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1">cvs(1)</a>库分发和更新源码树的软件包.OpenBSD源码的维护，用的是位于加拿大的一个中心开发机器上的CVS库.通过使用CVSync，OpenBSD用户可以很简单的让他们自己的源码树保持最新.
</p>

<p> 
<b>CVSync</b>使用所谓拉模式的更新方式.在拉模式作用下，客户在需要的时候，询问服务器以获取更新.服务器被动的等待它的客户发出更新请求.因而，所有等更新由客户端发起，服务器从不主动发送更新请求.用户必须手动运行<b>CVSync</b> 
  客户端来获取更新，或者设置一个<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&amp;sektion=8">cron(8)</a> 
  作业定期自动运行.
</p>

<p>
术语<b>CVSync</b>，大写表示，指代整个软件包.它的主要组件是运行于客户端机器的<tt>cvsync</tt>，还有运行在每个OpenBSD CVSync镜像站点的服务器端 <tt>cvsyncd</tt>.</p>

<p> 
<b>CVSync</b> 被设计为比<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sup&amp;sektion=1&amp;format=html">sup(1)</a> 
  和<a href="cvsup.html">CVSup</a>更快速和灵活.
</p>

<p> OpenBSD项目当前有五个主要的源码库：</p>

<ul>
  <li><b>src</b> - 存放OpenBSD操作系统的所有源码.</li>
  <li><b>ports</b> - 存放<a href="../ports.html">OpenBSD Ports</a>.</li>
  <li><b>www</b> - 存放所有OpenBSD web页(包括现在这个).</li>
  <LI><B>x11</B> - 存放OpenBSD对<a href="http://www.xfree86.org/"></A><A 
href="http://www.xfree86.org/">XFree86-3</A> 软件计划的改编版本.现在这仅仅是历史了，大多数用户已经不在使用. 
  <LI><B>xf4</B> - 存放OpenBSD x 树. </LI>
  </ul>

<h3><a name="CVS"><font color="#0000e0">什么是CVS?</font></a></h3>

<p> 
CVS是用于管理OpenBSD源码树的源码控制系统.详细说明请参考<a href="anoncvs.html#CVS">这里</a>.注意CVS和CVSync是完全不同的程序. 
  尽管CVS可被用作远程文件访问，但没有对大规模的网络源码发布作优化，而CVSync对完成这样的任务更有效.
</p>

<h3> 
<a name="starting"><font color="#0000e0">开始使用CVSync</font></a>
</h3>

<p> 
如果你只是担心如何运行CVSync，推荐你从<a href="ftp.html">ftp mirror sites下载</a>cvsync包，而不是自行从<tt>net/cvsync</tt> port来build. 
</p>

<p> 
想进一步了解CVSync，请访问<a href="http://www.cvsync.org/">project homepage</a>. 
</p>

<p> 为了使用CVSync镜像OpenBSD库.可能要用到如下的配置文件：</p>

<pre>
	config {
	    hostname anoncvs.de.openbsd.org
	    # If your network link is a T1 or faster, comment out the following line.
	    compress
	    collection {
		name openbsd release rcs
		prefix /cvs
		umask 002
	    }
	}
</pre>
<p> 
该文件告诉cvsync去<b>anoncvs.de.openbsd.org</b> 刷新所有的OpenBSD发布，这里本地库所在目录的<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=umask&amp;sektion=2">umask(2)</a> 要允许组具有写权限.
</p>

<p> 
假设该文件另存为<tt>cvs-syncfile</tt>,用下面的命令调用cvsync 
</p>
<pre>
        cvsync -c cvs-syncfile
</pre>

<h3><a name="using"> 
<font color="#0000e0">使用CVS更新你的源码树</font> 
</a></h3>

<p> 
check out任何其中一个CVSync库很简单了,对Korn/Bourne shells：
</p>
<pre>
        # cd /usr
        # CVSROOT=/cvs cvs checkout src
</pre>
<p> 上述操作将check out最新的源码树.很多人只想要release源码，特别是你在patch你的系统的时候.为了checkout release源码，你必须在你的命令行指定一个标签，例如：</p>
<pre>
        # cd /usr
        # cvs checkout -rOPENBSD_3_5 src
</pre>
<p> 
<tt>对3.4，用OPENBSD_3_4</tt>等等.
</p>

<h3> 
<a name="CVSROOT"><font color="#0000e0">可用的CVSync服务器</font></a> 
</h3>

<p>下列CVSync服务器可用：</p>

<p>
<ul>
  <li><strong>cvsync.de.openbsd.org</strong><br>
  Location: University of Erlangen-Nuremberg, Erlangen, Germany.<br>
  Maintained by <a href="mailto:grunk@pestilenz.org">Alexander von Gernler</a>.<br>
  Updated every 2 hours.<br>
  <p>
  <li><strong>anoncvs1.usa.openbsd.org</strong><br>
  Host also known as <strong>anoncvs.usa.openbsd.org, anoncvs4.usa.openbsd.org</strong>.<br>
  Location: Redwood City, CA, USA.<br>
  Maintained by <a href="mailto:millert@openbsd.org">Todd Miller</a>.<br>
  Updated every 2 hours.<br>
  <p>
  <li><strong>anoncvs3.usa.openbsd.org</strong><br>
  Location: National Center for Atmospheric Research, Boulder, CO, USA.<br>
  Maintained by <a href="mailto:millert@openbsd.org">Todd Miller</a>.<br>
  Updated every 2 hours.<br>
  <p>
  <li><strong>cvsync.catai.net</strong><br>
  Host also known as <strong>anoncvs.catai.net</strong>.<br>
  Location: Vienna, Austria.<br>
  Maintained by <a href="mailto:martin@openbsd.org">Martin Reindl</a>.<br>
  Updated every 2 hours from anoncvs.de.openbsd.org.<br>
  <p>
  <li><a href="http://anoncvs.de.openbsd.org/"><strong>anoncvs.de.openbsd.org</strong></a><br>
  Host also known as <strong>grappa.unix-ag.uni-kl.de</strong>.<br>
  Location: University of Kaiserslautern, Kaiserslautern, Germany.<br>
  Maintained by <a href="mailto:naddy@openbsd.org">Christian Weisgerber</a>.<br>
  Updated every 6 hours.<br>
  <p>
  <li><a href="http://mirror.osn.de/"><strong>mirror.osn.de</strong></a><br>
  Location: Nrnberg, Germany.<br>
  Maintained by <a href="mailto:aw@osn.de">Armin Wolfermann</a>.<br>
  Updated every 4 hours from anoncvs1.usa.openbsd.org.<br>
  <p>
  <li><a href="http://www.allbsd.org/"><strong>cvsync.allbsd.org</strong></a><br>
  Location: Tokyo, china.<br>
  Maintained by <a href="mailto:hrs@allbsd.org">Hiroki Sato</a>.<br>
  <p>
  <li><strong>cvsync.openbsd.nu</strong><br>
  Location: Stockholm, Sweden.<br>
  Maintained by <a href="mailto:kent@openbsd.nu">Kent Riboe</a>.<br>
  Updated every 3 hours from cvsync.de.openbsd.org.<br>
  <p>
  <li><strong>openbsd.cc.ntu.edu.tw</strong><br>
  Location: NTU, Taipei, Taiwan.<br>
  Maintained by <a href="mailto:lkchu@ntuee.net">Liang-Kai Chu</a>.<br>
  Updated every 2 hours.<br>
  <p>
  <li><a href="http://mirror.sg.depaul.edu/"><strong>mirror.sg.depaul.edu</strong></a><br>
  Location: DePaul University, Chicago, IL, USA.<br>
  Maintained by <a href="mailto:mirror-admin@sg.depaul.edu">Eric Pancer</a>.<br>
  Updated every 2 hours.<br>
  <p>
  <li><a href="http://csociety.org/cvsup.html"><strong>cvsync.csociety.org</strong></a><br>
  Location: Purdue University, West Lafayette, IN, USA.<br>
  Maintained by <a href="mailto:will@csociety.purdue.edu">Will Andrews</a>.<br>
  <p>
  </ul>

<p> 
<EM>说明:</EM> 如果你列在这里的服务器信息不准确或者不完全，请联系<A 
href="mailto:beck@openbsd.org"><TT>beck@openbsd.org</TT></A> 或<A 
href="mailto:naddy@openbsd.org"><TT>naddy@openbsd.org</TT></A> </p>
<P>
你可能想用<A href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute&amp;sektion=8">traceroute(8)</A>来找出距离你最近的服务器.若发现服务器的问题请报告给我们的<B>维护人员.</B>
</P>
<P>
当前(截止 August 21, 2006)，CVS库大小为：
</P>
<table>
  <tr>
    <td width="20"></td>
    <td><strong>openbsd-ports</strong></td>
    <td>- <b>222</b>MB</td>
  </tr>
  <tr>
    <td></td>
    <td><strong>openbsd-src</strong></td>
    <td>- <b>1396</b>MB</td>
  </tr>
  <tr>
    <td></td>
    <td><strong>openbsd-www</strong></td>
    <td>- <b>247</b>MB</td>
  </tr>
  <tr>
    <td></td>
    <td><strong>openbsd-x11</strong></td>
    <td>- <b>200</b>MB</td>
  </tr>
  <tr>
    <td></td>
    <td><strong>openbsd-xf4</strong></td>
    <td>- <b>562</b>MB</td>
  </tr>
  <tr>
    <td></td>
    <td><strong>openbsd-cvsroot</strong></td>
    <td>- <b>408</b>MB</td>
  </tr>
</table>
<ul>
  <li>
</ul>
<p> 
这个库的大小现在以大约每年<b>400</b>MB的速率增长<strong></strong>.
</p>
<p> 
<strong>重要说明:</strong>有一些与密码学软件相关的问题每个人都应该注意的：
</p>
<ul>
  <li> 
    <p> 
源码出自加拿大. 参看调查研究<a href="http://www.efc.ca/pages/doc/crypto-export.html"></a><a href="http://www.efc.ca/pages/doc/crypto-export.html"> 
      researched by a Canadian individual</a> ，以及根据<a href="http://axion.physics.ubc.ca/ECL.html"> 
      described in the Export Control list of Canada</a>, 从加拿大往世界各地输出密码学软件是合法的.</p>
  </li>
  <li> 
    <p> 然后，如果你不在美国或者加拿大，你不应该从防止在美国的匿名CVS服务器上获取OpenBSD源码的密码学部分. 可能的文件有... </p>
    <ul>
      <li><tt>src/kerberosIV/*</tt></li>
      <li><tt>src/kerberosV/*</tt></li>
      <li><tt>src/lib/libdes/*</tt></li>
      <li><tt>src/lib/libc/crypt/crypt.c</tt></li>
      <li><tt>src/lib/libc/crypt/morecrypt.c</tt></li>
      <li><tt>src/sys/crypto</tt></li>
      <li><tt>src/sys/netinet</tt></li>
      <li><tt>src/usr.sbin/afs/src/rxkad/*</tt></li>
      <li><tt>XF4/xc-mit/lib/Xdmcp/Wraphelp.c</tt></li>
      <li><tt>XF4/xc-old/lib/Xdmcp/Wraphelp.c</tt></li>
      <li><tt>XF4/xc/lib/Xdmcp/Wraphelp.c</tt></li>
    </ul>
    <p> 
     由于 USA ITAR munitions list，加密软件只能从美国输出到加拿大.
    </p>
  </li>
</ul>

<p> 
OpenBSD计划在寻求更多的CVSync服务器--如果你感兴趣,请联系<a href="mailto:naddy@openbsd.org">Christian 
  Weisgerber</a>了解配置细节.
</p>

<hr>
<a href="index.html"><img height="24" width="24" src="../back.gif" border="0" alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: cvsync.html,v 1.41 ]<br>
$Translation: cvsync.html,v 1.4 2007/01/01 14:55:00 jufi Exp $<br>
-->
$OpenBSD: cvsync.html,v 1.4 2007/01/01 14:54:23 jufi Exp $</small>
</body>
</html>
