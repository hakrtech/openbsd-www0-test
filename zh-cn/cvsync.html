<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD CVSync</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<meta name="description" content="How to get OpenBSD updates via Internet using CVSync">
<meta name="keywords" content="openbsd,cvsync,updates">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 2003-2004 by OpenBSD.">
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#23238E">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>

<h2><font color="#e00000">CVSync</font></h2>
<hr>

<h3>内容索引</h3>
<ul>
  <li><a href="#CVSync">什么是CVSync?</a></li>  
  <li><a href="#CVS">什么是CVS?</a></li>
  <li><a href="#starting">开始使用CVSync</a></li>
  <li><a href="#using">使用CVS更新你的源码树</a></li>
  <li><a href="#CVSROOT">可用的CVSync服务器</a></li>
</ul>

<hr>


<h3><a name="CVSync"><font color="#0000e0">什么是CVSync?</font></a></h3>

<p> <b>CVSync</b>是一个用于从远程服务器主机上的主 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1">cvs(1)</a> 
  库分发和更新源码树的软件包。OpenBSD源码的维护，用的是位于加拿大的一个中心开发机器上的CVS库。通过使用CVSync，OpenBSD用户可以很简单的让他们自己的源码树保持最新。</p>

<p> <b>CVSync</b>使用所谓拉模式的更新方式。在拉模式作用下，客户在需要的时候，询问服务器以获取更新。服务器被动的等待它的客户发出更新请求。因而，所有等更新由客户端发起，服务器从不主动发送更新请求。用户必须手动运行<b>CVSync</b> 
  客户端来获取更新，或者设置一个<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&amp;sektion=8">cron(8)</a> 
  作业定期自动运行。</p>

<p> 术语<b>CVSync</b>，大写表示，指代整个软件包。它的主要组件是运行于客户端机器的<tt>cvsync</tt>，还有运行在每个OpenBSD 
  CVSync站点的服务器端 <tt>cvsyncd</tt>。</p>

<p> <b>CVSync</b> 被设计为比<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sup&amp;sektion=1&amp;format=html">sup(1)</a> 
  和CVSup更快速和灵活。</p>

<p> OpenBSD项目当前有五个主要的源码库：</p>

<ul>
  <li><b>src</b> - 存放OpenBSD操作系统的所有源码。</li>
  <li><b>ports</b> - 存放<a href="./ports.html">OpenBSD Ports</a>。</li>
  <li><b>www</b> - 存放所有OpenBSD web页(包括现在这个)。</li>
  <li><b>x11</b> - 存放OpenBSD对<a href="http://www.XFree86.org/">XFree86-3</a> 软件计划的改编版本。</li>
  <li><b>xf4</b> - 存放OpenBSD对<a href="http://www.XFree86.org/">XFree86-4</a> 软件计划的改编版本。</li>
</ul>

<h3><a name="CVS"><font color="#0000e0">什么是CVS?</font></a></h3>

<p> CVS是用于管理OpenBSD源码树的源码控制系统。详细说明请参考<a href="../anoncvs.html#CVS">这里</a>。注意CVS和CVSync是完全不同的程序。 
  尽管CVS可被用作远程文件访问，但没有对大规模的网络源码发布作优化，而CVSync对完成这样的任务更有效。</p>

<h3> <a name="starting"><font color="#0000e0">开始使用CVSync</font></a> </h3>

<p> 如果你只是担心如何运行CVSync，推荐你从<a href="ftp.html">ftp mirror sites下载</a>cvsync包，而不是自行从<tt>net/cvsync</tt> 
  port来build。 </p>

<p> 想进一步了解CVSync，请访问<a href="http://www.cvsync.org/">project homepage</a>. </p>

<p> 为了使用CVSync镜像OpenBSD库。可能要用到如下的配置文件：</p>

<pre>
	config {
	    hostname anoncvs.de.openbsd.org
	    # If your network link is a T1 or faster, comment out the following line.
	    compress
	    collection {
		name openbsd release rcs
		prefix /cvs
		umask 002
	    }
	}
</pre>
<p> 该文件告诉cvsync去<b>anoncvs.de.openbsd.org</b> 刷新所有的OpenBSD发布，这里本地库所在目录的<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=umask&amp;sektion=2">umask(2)</a> 
  要允许组具有写权限。</p>

<p> 假设该文件另存为<tt>cvs-syncfile</tt>,用下面的命令调用cvsync </p>
<pre>
        cvsync -c cvs-syncfile
</pre>

<h3><a name="using"> <font color="#0000e0">使用CVS更新你的源码树</font> </a></h3>

<p> check out任何其中一个CVSync库很简单了,对Korn/Bourne shells：</p>
<pre>
        # cd /usr
        # CVSROOT=/cvs cvs checkout src
</pre>
<p> 对csh及其派生</p>
<pre>
        # cd /usr
        # setenv CVSROOT /cvs
        # cvs checkout src
</pre>

<p> 上述操作将check out最新的源码数。很多人只想要release源码，特别是你在patch你的系统的时候。为了checkout release源码，你必须在你的命令行指定一个标签，例如：</p>
<pre>
        # cd /usr
        # cvs checkout -rOPENBSD_3_5 src
</pre>
<p> <tt>对3.4，用OPENBSD_3_4</tt>等等。</p>

<h3> <a name="CVSROOT"><font color="#0000e0">可用的CVSync服务器</font></a> </h3>

<p>下列CVSync服务器可用：</p>

<p>
<ul>
<li><strong>anoncvs1.usa.openbsd.org</strong><br>
located in Redwood City, California, western USA;<br>
maintained by <a href="mailto:millert@openbsd.org">Todd Miller</a>.<br>
Updated every 2 hours.<br>

<p>
<li><strong>anoncvs3.usa.openbsd.org</strong><br>
located at the University of Colorado, Boulder, western USA;<br>
maintained by <a href="mailto:millert@openbsd.org">Todd Miller</a>.<br>
Updated every 2 hours.<br>

<p>
<li><a href="http://anoncvs.de.openbsd.org/"><strong>anoncvs.de.openbsd.org</strong></a><br>
Host also known as <strong>grappa.unix-ag.uni-kl.de</strong>,<br>
located at the University of Kaiserslautern, Germany;<br>
maintained by <a href="mailto:naddy@openbsd.org">Christian Weisgerber</a>.<br>
Updated every 6 hours.<br>

<p>
<li><a href="http://www.allbsd.org/"><strong>cvsync.allbsd.org</strong></a><br>
located in Tokyo, Japan;<br>
maintained by <a href="mailto:hrs@allbsd.org">Hiroki Sato</a>.<br>

<p>
<li><a href="http://csociety.org/cvsup.html"><strong>cvsync.csociety.org</strong></a><br>
located at Purdue University, Indiana, USA;<br>
maintained by <a href="mailto:will@csociety.purdue.edu">Will Andrews</a>.<br>

<p>
<li><strong>cvsync.linux.org.tr</strong><br>
located at ULAKBIM, Ankara, Bilkent, Turkey;<br>
maintained by <a href="mailto:bdd@mindcast.org">Berk D. Demir</a>.<br>
Updated every 2 hours from anoncvs.usa.openbsd.org.<br>

<p>
<li><a href="http://mirror.osn.de/"><strong>mirror.osn.de</strong></a><br>
located in N&uuml;rnberg, Germany;<br>
maintained by <a href="mailto:aw@osn.de">Armin Wolfermann</a>.<br>
Updated every 4 hours from anoncvs1.usa.openbsd.org.<br>

<p>
<li><a href="http://anoncvs.erisiandiscord.de/"><strong>anoncvs.erisiandiscord.de</strong></a><br>
located in Darmstadt, Germany;<br>
maintained by <a href="mailto:sturm@openbsd.org">Nikolay Sturm</a>.<br>
Updated every 3 hours from cvsup.uk.openbsd.org.<br>

<p>
<li><a href="http://anoncvs2.de.openbsd.org/"><strong>anoncvs2.de.openbsd.org</strong></a><br>
located in Erlangen, Germany;<br>
maintained by <a href="mailto:grunk@pestilenz.org">Alexander von Gernler</a>.<br>
Updated every 2 hours.<br>
</ul>

<p> <em>说明:</em> 如果你列在这里的服务器信息不准确或者不完全，请联系<a
href="mailto:beck@openbsd.org"><tt>beck@openbsd.org</tt></a> 或<a href="mailto:naddy@openbsd.org"><tt>naddy@openbsd.org</tt></a> 
</p>
<p> 你可能想用<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute&amp;sektion=8">traceroute(8)</a>来找出距离你最近的服务器。若发现服务器的问题请报告给我们的<b>维护人员。</b></p>
<p> 当前(截止 December 17, 2003)，CVS库大小为：</p>
<table>
<tr><td width="20"></td>
    <td><strong>openbsd-ports</strong></td>
    <td>- <b>140</b>MB</td></tr>
<tr><td></td>
    <td><strong>openbsd-src</strong></td>
    <td>- <b>1140</b>MB</td></tr>
<tr><td></td>
    <td><strong>openbsd-www</strong></td>
    <td>- <b>104</b>MB</td></tr>
<tr><td></td>
    <td><strong>openbsd-x11</strong></td>
    <td>- <b>200</b>MB</td></tr>
<tr><td></td>
    <td><strong>openbsd-xf4</strong></td>
    <td>- <b>442</b>MB</td></tr>
<tr><td></td>
    <td><strong>openbsd-cvsroot</strong></td>
    <td>- <b>257</b>MB</td></tr>
</table>
<p> 这个库的大小现在以大约每年<b>225</b>MB的速率增长<strong></strong>。</p>
<p> <strong>重要说明:</strong>有一些与密码学软件相关的问题每个人都应该注意的：</p>
<ul>
  <li> 
    <p> 源码出自加拿大。 参看调查研究<a href="http://www.efc.ca/pages/doc/crypto-export.html"></a><a href="http://www.efc.ca/pages/doc/crypto-export.html"> 
      researched by a Canadian individual</a> ，以及根据<a href="http://axion.physics.ubc.ca/ECL.html"> 
      described in the Export Control list of Canada</a>, ，从加拿大往世界各地输出密码学软件是合法的。</p>
  </li>
  <li> 
    <p> 然后，如果你不在美国或者加拿大，你不应该从防止在美国的匿名CVS服务器上获取OpenBSD源码的密码学部分。 可能的文件有... </p>
    <ul>
      <li><tt>src/kerberosIV/*</tt></li>
      <li><tt>src/kerberosV/*</tt></li>
      <li><tt>src/lib/libdes/*</tt></li>
      <li><tt>src/lib/libc/crypt/crypt.c</tt></li>
      <li><tt>src/lib/libc/crypt/morecrypt.c</tt></li>
      <li><tt>src/sys/crypto</tt></li>
      <li><tt>src/sys/netinet</tt></li>
      <li><tt>src/usr.sbin/afs/src/rxkad/*</tt></li>
      <li><tt>XF4/xc-mit/lib/Xdmcp/Wraphelp.c</tt></li>
      <li><tt>XF4/xc-old/lib/Xdmcp/Wraphelp.c</tt></li>
      <li><tt>XF4/xc/lib/Xdmcp/Wraphelp.c</tt></li>
    </ul>
    <p> 由于 USA ITAR munitions list，加密软件只能从美国输出到加拿大。</p>
  </li>
</ul>

<p> OpenBSD计划在寻求更多的CVSync服务器--如果你感兴趣,请联系<a href="mailto:naddy@openbsd.org">Christian 
  Weisgerber</a>了解配置细节。</p>

<hr>
<a href="index.html"><img height="24" width="24" src="../back.gif" border="0" alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: cvsync.html,v 1.20 2004/07/07 12:11:34 naddy Exp ]<br>
$Translation: cvsync.html,v 1.1 2004/07/27 10:14:00 ci Exp $<br>
$OpenBSD: cvsync.html,v 1.1 2004/07/27 10:45:13 jufi Exp $
</small>
</body>
</html>
