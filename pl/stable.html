<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>Drzewo ³atek OpenBSD</title>
<link rev=made href=mailto:www@openbsd.org>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<meta name="resource-type" content="document">
<meta name="description" content="stable">
<meta name="keywords" content="openbsd,anoncvs,updates,stable">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2005 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color=#e00000>Drzewo ³atek</font><hr></h2>

<p>
<ul><h3>Spis tre¶ci</h3>
<li><a href="#whatis">Co to jest drzewo ³atek (ang. patch branch)?</a>
<li><a href="#getting">Pobranie drzewa ³atek</a>
<li><a href="#building">Kompilacja systemu OpenBSD z drzewa ³atek</a>
</ul>
</p>
<hr>

<a name="whatis"></a>
<h3><font color=#0000e0>Co to jest drzewo ³atek (ang. patch branch)?</font></h3>

<p>
Pocz±wszy od wersji 2.7, OpenBSD udostêpnia ¼ród³a zawieraj±ce wszystkie
wa¿ne ³atki i poprawki (tj. ³atki z <a href="errata.html">erraty</a> plus
inne poprawki, które s± oczywiste, proste i nie tak wa¿ne by konieczne
by³o ich opisanie w erracie) dostêpne przez <a href="anoncvs.html">CVS</a>
jako dodatek do bie¿±cego kodu ¼ród³owego. U¿ytkownik dostajê do wyboru trzy
opcje:<p>
<ul>
<li>Sprawdzaæ nasze najnowsze wydanie i dokonywaæ poprawek samodzielnie.
<li>Korzystaæ z <b>drzewa ³atek</b>, które uwzglêdnia wszystkie
    najwa¿niejsze poprawki.
<li>Korzystaæ z <b>bie¿±cego kodu ¼ród³owego</b> aby mieæ wszystkie
    naj¶wie¿sze rozwi±zania.
</ul>
<p>
<!--<a href="plus.html">Codzienna informacja o zmianach (ang. daily changelog)</a>
wyszczególnia, które powydaniowe (ang. post-release) ³atki znalaz³y siê w
drzewie ¼róde³. -->
Podstawow± zasad± jest w³±czanie wszystkich zmian do
drzewa ³atek, które znalaz³y siê w <a href="errata.html">Erracie</a> w
przeci±gu 48 godzin od jej opublikowania. Inne ³atki mog± zostaæ do³±czone
je¶li spe³niaj± kilka poni¿szych warunków:

<ul>
<li>Poprawka musi byæ mo¿liwe prosta, krótka i oczywi¶cie w 100 % poprawna.
<li>B³êdy opisane w Erracie dotycz± wielu ludzi. Inne poprawki zostan±
    naniesione nawet je¶li nie jest to problem o ogólnym zasiêgu ale
    jego skutki mog± byæ do¶æ drastyczne.
<li>Dlaczego wieksze zmiany nie s± nanoszone na ¼ród³a? Utrzymywanie
    drzewa ¼róde³ i nanoszenie poprawek wymaga pewnych nak³adów czasu
    i ¶rodków - lepiej wykorzystaæ je na rozwój nowej wersji systemu. 
<li>Jako wyj±tek do powy¿szych regu³ ka¿de nowe wydanie OpenSSH jest
    w³±czane do drzewa ³atek.
</ul>
<p>

<a name="getting"></a>
<h3><font color=#0000e0>Pobranie drzewa ³atek</font></h3>

<p>
Drzewo ³atek dla konkretnej wersji OpenBSD mo¿na uzyskaæ w prosty
sposób uaktualniaj±c istniej±ce ¼ród³a (uzyskane z <a href="ftp.html">FTP</a>
lub <a href="orders.html">p³yty CD</a>) lub pobieraj±c kompletne
drzewo z serwera <a href="anoncvs.html">AnonCVS</a>. Opis czynno¶ci
niezbêdnych do uaktualnienia (b±dz pobrania) drzewa ³atek znajduje
siê w sekcji <b>Zaczynamy u¿ywaæ Anonimowy CVS</b> w
<a href="anoncvs.html#starting">Dokumentacji AnonCVS</a>. Proszê mieæ
na uwadze to, ¿e drzewo ³atek nie umo¿liwia przej¶cia z jednego wydania
OpenBSD do drugiego, np. z wersji 3.7 do 3.8. Mo¿liwe jest tylko
utrzymywanie aktualnego systemu w danej wersji. Je¶li planujesz
przej¶cie do nowej wersji z pewno¶ci± zainteresuje Ciê dokument
<a href="faq/upgrade38.html">upgrade-minifaq</a>. Nie ma mo¿liwo¶ci
tak¿e "powrotu" do wersji -stable z wersji -current z powodu ró¿nych
problemów z bibliotekami.

<a name="building"></a>
<h3><font color=#0000e0>Kompilacja systemu OpenBSD z drzewa ³atek</font></h3>
Posiadaj±c ju¿ ¼ród³a uzyskane przez <a href="anoncvs.html">anoncvs</a>,
nale¿y skompilowaæ ca³y system. Wa¿na jest kolejno¶æ w jakiej nale¿y
to zrobiæ:

<ul>
 <li>Kompilacja j±dra
 <li>Ponowne uruchomienie komputera z nowym kernelem
 <li>Kompliacja systemu
</ul>

<h4><font color=#0000e0>Kompilacja kernela</font></h4>

<p>
Oto skrócona instrukcja kompilacji kernela:
<ul><pre>
# <strong>cd /usr/src/sys/arch/i386/conf</strong>
# <strong>/usr/sbin/config GENERIC</strong>
# <strong>cd /usr/src/sys/arch/i386/compile/GENERIC</strong>
# <strong>make clean &amp;&amp; make depend &amp;&amp; make</strong>
</pre></ul>

<p>
W zale¿no¶ci od posiadanej architektury sprzêtowej zamieñ <i>i386</i>
na <i>sparc</i>, <i>alpha</i>, itd.

<h4><font color=#0000e0>Ponowne uruchomienie komputera z nowym kernelem
</font></h4>

<p>

Reboot komputera:
<ul><pre>
# <strong>cd /usr/src/sys/arch/i386/compile/GENERIC</strong>
# <strong>cp /bsd /bsd.old</strong>          <i>(Kopia zapasowa dotychczasowego j±dra)</i>
# <strong>cp bsd /bsd</strong>               <i>(Nowy kernel)</i>
# <strong>reboot</strong>
</pre></ul>

<p>
Podobnie jak w poprzednim przyk³adzie je¶li posiadasz inna architekturê
odpowienio zmodyfikuj frazê <i>i386</i>. Je¶li uruchomienie systemu z nowym
j±drem nie powiedzie siê, mo¿na w prosty sposób przywróciæ poprzenie
ustawienie ³aduj±c poprzedni kernel, który teraz nazywa siê <i>bsd.old</i>.

<h4><font color=#0000e0>Kompilacja systemu</font></h4>

<p> Aby skompilowaæ system operacyjny nale¿y wykonaæ poni¿sze kroki:
<ul><pre>
# <strong>rn -rf /usr/obj/*<strong>
# <strong>cd /usr/src</strong>
# <strong>make obj</strong>
# <strong>cd /usr/src/etc &amp;&amp; env DESTDIR=/ make distrib-dirs</strong>
# <strong>cd /usr/src</strong>
# <strong>make build</strong>
</pre></ul>

<p>Czynno¶æ ta zajmie trochê czasu...
<hr>
<a href=index.html><img height=24 width=24 src=back.gif border=0 alt=OpenBSD></a>
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: stable.html,v 1.16 ]<br>
$Translation: stable.html,v 1.5 2006/04/21 01:03:53 tkniaz Exp $<br>
-->
$OpenBSD: stable.html,v 1.3 2006/04/21 09:28:54 jufi Exp $
</small>
</body>
</html>

