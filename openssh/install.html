<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenSSH Portable Release for Linux/Solaris/etc</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="the OpenSSH project portable 
	version install instructions">
<meta name="keywords" content="openbsd,portable,install,instructions">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1999 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">

<img alt="[OpenSSH]" height=30 width=141 SRC="images/smalltitle.gif">
<p>
<h2><font color=#e00000>Portable OpenSSH - Installation instructions</font><hr></h2>

<OL>
<LI><U>Prerequisites</U>
<P>
	You will need working installations of 
	<A HREF="ftp://ftp.freesoftware.com/pub/infozip/zlib/">Zlib</A> and 
	<A HREF="http://www.openssl.org">OpenSSL</A> (version 0.9.5a or later).
	Redhat Linux RPMS of OpenSSL are 
	<A HREF="http://violet.ibs.com.au/openssh/files/support/">also 
	available</A>.
</P>
<P>
	OpenSSH can utilise 
	<A HREF="http://www.kernel.org/pub/linux/libs/pam/">Pluggable Authentication
	Modules</A> (PAM) if your system supports it. PAM is standard on Redhat 
	and Debian Linux and on Solaris.
</P>
<P>
	If you wish to build the GNOME passphrase requester, you will need the 
	<A HREF="http://www.gnome.org/">GNOME</A> libraries and headers.
</P>
<P>
	Alternatively, Jim Knoble <jmknoble@pobox.com> has written an <A 
	HREF="http://www.ntrnet.net/~jmknoble/software/x11-ssh-askpass/index.html">
	excellent X11 passphrase requester</A>. This is maintained separately.
</P>
<P>
	If you are planning to use OpenSSH on a Unix which lacks a Kernel random
	number generator (<I>/dev/urandom</I>), and do not wish the built-in 
	entropy collection code. you may want to install the 
	<A HREF="http://www.lothar.com/tech/crypto/">Entropy Gathering Daemon</A>.
	You will also need to specify the <B>--with-egd-pool</B> 
	option to <I>./configure</I>.
</P>
<P>
	OpenSSH has only been tested with 
	<A HREF="ftp://ftp.gnu.org/gnu/make/">GNU make</A>. It may work with other
	'make' programs, but you are on your own.
</P>
</LI>
<LI><U>Building / Installation</U>
<P>
	To install OpenSSH with default options:
</P>
<PRE>
./configure
make
make install
</PRE>
<P>
	This will install the OpenSSH binaries in <I>/usr/local/bin</I>, 
	configuration files in <I>/usr/local/etc</I>, the server in 
	<I>/usr/local/sbin</I>, etc. To specify a 
	different installation prefix, use the <B>--prefix</B> option to 
	configure:
</P>
<PRE>
./configure --prefix=/opt
make
make install
</PRE>
<P>
	Will install OpenSSH in <I>/opt/{bin,etc,lib,sbin}</I>. You can also 
	override specific paths, for example:
</P>
<PRE>
./configure --prefix=/opt --sysconfdir=/etc/ssh
make
make install
</PRE>
<P>
	This will install the binaries in <I>/opt/{bin,lib,sbin}</I>, but will 
	place the configuration files in <I>/etc/ssh</I>.
<P>
	If you are using PAM, you will need to manually install a PAM
	control file as <I>/etc/pam.d/sshd</I> (or wherever your system
	prefers to keep them). A generic PAM configuration is included as
	<I>contrib/sshd.pam.generic</I>, you may need to edit it before using it 
	on your system. If you are using a recent version of Redhat Linux, the
	config file in <I>contrib/redhat/sshd.pam</I> should be more useful.
</P>
<P>
	There are a few other options to the configure script:
</P>
<DL>
<DT>--with-rsh=PATH</DT>
<DD>
	Specifies the path to your rsh program. Normally <I>./configure</I> will 
	search the current <B>$PATH</B> for <I>rsh</I>. You may need to 
	specify this option if rsh is not in your path or has a different name.
</DD>
<DT>--without-pam</DT>
<DD>
	Disables PAM support. PAM is automatically detected and switched on if 
	found.
</DD>
<DT>--with-random=/some/file</DT>
<DD>
	Specifies an alternate source of random numbers (the default is 
	<I>/dev/urandom</I>). Unless you are absolutly sure of what you are doing, 
	it is best to leave this alone.
</DD>
<DT>--with-egd-pool=/some/file</DT>
<DD>
	Enables Entropy Gathering Daemon support and to specify a EGD pool 
	socket. You may want to use this if your Unix does not support the 
	<I>/dev/urandom</I> device (or similar). The file argument refers to the 
	EGD pool file, not the  EGD program itself. Please refer to the EGD 
	documentation.
</DD>
<DT>--with-lastlog=FILE</DT>
<DD>
	Specifies the location of the lastlog file. <I>./configure</I> searches 
	a few locations for lastlog, but may not find it if lastlog is installed 
	in a different place.
</DD>
<DT>--without-lastlog</DT>
<DD>
	Disables lastlog support entirely.
</DD>
<DT>--with-kerberos4=PATH</DT>
<DD>
	Enables Kerberos IV support. You will need to have the Kerberos 
	libraries and header files installed for this to work. Use the 
	optional PATH argument to specify the root of your Kerberos installation.
</DD>
<DT>--with-afs=PATH</DT>
<DD>
	Enables AFS support. You will need to have the Kerberos IV and the 
	AFS libraries and header files installed for this to work. Use the 
	optional PATH argument to specify the root of your AFS installation. 
	AFS requires Kerberos support to be enabled.
</DD>
<DT>--with-skey</DT>
<DD>
	Enables S/Key one time password support. You will need the S/Key 
	libraries and header files installed for this to work.
</DD>
<DT>--with-tcp-wrappers</DT>
<DD>
	Enables TCP Wrappers (<I>/etc/hosts.allow|deny</I>) support. You will need 
	<I>libwrap.a</I> and <I>tcpd.h</I> installed.
</DD>
<DT>--with-md5-passwords</DT>
<DD>
	Enables the use of MD5 passwords. Enable this if your operating system 
	uses MD5 passwords without using PAM.
</DD>
<DT>--with-utmpx</DT>
<DD>
	Enables utmpx support. utmpx support is automatic for some platforms.
</DD>
<DT>--without-shadow</DT>
<DD>
	Disables shadow password support.
</DD>
<DT>--with-ipaddr-display</DT>
<DD>
	Forces the use of a numeric IP address in the <B>$DISPLAY</B> 
	environment variable. Some broken systems need this.
</DD>
<DT>--with-default-path=PATH</DT>
<DD>
	allows you to specify a default <B>$PATH</B> for sessions started by 
	sshd. This replaces the standard path entirely. Use this if you have 
	troubles	with the server not finding scp.
</DD>
<DT>--with-pid-dir=PATH</DT>
<DD>
	Specifies the directory in which the ssh.pid file is created.
</DD>
<DT>--with-xauth=PATH</DT>
<DD>
	Specifies the location of the xauth binary
</DD>
<DT>--with-ipv4-default</DT>
<DD>
	Instructs OpenSSH to use IPv4 by default for new connections. Normally 
	OpenSSH will try attempt to lookup both IPv6 and IPv4 addresses. 
	On Linux/glibc-2.1.2 this causes long delays in name resolution. 
	If this option is specified, you can still attempt to connect to IPv6 
	addresses using the command line option <B>-6</B>.
</DD>
<DT>--with-ssl-dir=DIR</DT>
<DD>
	Allows you to specify where your OpenSSL libraries are installed.
</DD>
<DT>--with-4in6</DT>
<DD>
	Check for IPv4 in IPv6 mapped addresses and convert them to
	real (AF_INET) IPv4 addresses. Works around more IPv6 quirks on Linux.
</DD>
</DL>
<P>
	If you need to pass special options to the compiler or linker, you
	can specify these as enviornment variables before running 
	<I>./configure</I>.For example:
</P>
<PRE>
CFLAGS="-O -m486" LFLAGS="-s" LIBS="-lrubbish" LD="/usr/foo/ld" ./configure
</PRE>
</LI>
<LI><U>Configuration</U>
<P>
	The runtime configuration files are installed by in 
	<I>${prefix}/etc</I> or whatever you specified as your <B>--sysconfdir</B> 
	(<I>/usr/local/etc</I> by default).
</P>
<P>
	The default configuration should be instantly usable, though you should 
	review it to ensure that it matches your security requirements.
</P>
<P>
	To generate a host key, run "make host-key". Alternately you can do so
	manually using the following commands: 
</P>
<PRE>
/usr/bin/ssh-keygen -b 1024 -f /etc/ssh/ssh_host_key -N ''
/usr/bin/ssh-keygen -d -f /etc/ssh/ssh_host_dsa_key -N ''
</PRE>
<P>
	Replacing <I>/etc/ssh</I> with the correct path to the configuration 
	directory. (<I>${prefix}/etc</I> or whatever you specified with 
	<B>--sysconfdir</B> during configuration)
</P>
<P>
	If you have configured OpenSSH with EGD support, ensure that EGD is
	running and has collected some Entropy.
</P>
<P>
	For more information on configuration, please refer to the manual pages 
	for sshd, ssh and ssh-agent.
</P>
</LI>
</OL>

<p>
<hr>
<a href=index.html><img height=24 width=24 src=back.gif border=0 alt=OpenSSH></a>
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br>
<small>$OpenBSD: install.html,v 1.4 2000/12/26 09:48:51 jufi Exp $</small>

</body>
</html>


