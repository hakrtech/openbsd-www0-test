<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD AnonCVS</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="the main OpenBSD page">
<meta name="keywords" content="openbsd,main">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">

<img alt="[OpenBSD]" SRC="images/smalltitle.gif">

<p>
<h3>CVS Access:</h3>
CVS is used to manage the OpenBSD source tree. This allows
developers to work on a local source tree and commit their changes when
ready.  Also <strong>anyone</strong> can edit source files on their
local machines, and automatically track and merge in any changes made
in the OpenBSD CVS repository. Additionally they can easily see the
logs of, check out, or "diff" the source files in the OpenBSD source
tree.
</p>

<p>
Most importantly, the <strong>anoncvs</strong> service does NOT
delete the changes you make in your local copy of the source tree --
read on for more details!
</p>

<p>
The latest version of CVS is available at
<a href=ftp://ftp.cyclic.com/pub/cvs/>Cyclic</a>.
Versions earlier than 1.6 are not recommended, and may not work.
If you already have OpenBSD installed, CVS is included.
</p>

<p>
There are two levels of source tree access:
</p>

<dl>
<dt><strong>Read-write access for developers:</strong>
<dd>Developers who need to commit changes to the source tree must have
an account on the OpenBSD machines.  Getting this access will be a
natural result of working on the sources with other OpenBSD developers.
If someone does some good work and shows they can work with the team,
they will get an account.
</dl>

<dl>
<dt><strong>Read-only access for everyone:</strong>
<dd>Anyone can access the read-only CVS repositories. These copies
of the read-write CVS repository are mirrored often. To use one,
set your <strong>CVSROOT</strong> environment variable to one of
the following values:
<p>
<strong>Please see the note about using ssh vs. rsh below!</strong>
<p>
<ul>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.usa.openbsd.org:/cvs</strong><br>
Host also known as <strong>anoncvs.openbsd.org</strong>,
<strong>anoncvs@anoncvs1.usa.openbsd.org</strong>,
<strong>anoncvs@anoncvs4.usa.openbsd.org</strong> and
<strong>anoncvs2.isc.org</strong>.<br>
located in California, western USA.<br>
maintained by <a href=mailto:niklas@openbsd.org>Niklas Hallqvist</a>.<br>
protocols: ssh only.<br>
updated every 4 hours.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs2.usa.openbsd.org:/cvs</strong><br>
Host also known as <strong>hydra.heuris.com</strong>.<br>
located in St. Louis, Missouri, mid-western USA.<br>
maintained by <a href=mailto:johns@heuris.com>John Stone</a>.<br>
protocols: rsh, ssh, ssh port 2022.<br>
updated every 12 hours.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs3.usa.openbsd.org:/cvs</strong><br>
Host also known as <strong>freestuff.cs.colorado.edu</strong>.<br>
located at the University of Colorado, Boulder, western USA.<br>
maintained by <a href=mailto:Todd.Miller@cs.colorado.edu>Todd Miller</a>.<br>
protocols: ssh, ssh port 2022.<br>
updated every 6 hours.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.uk.openbsd.org:/cvs</strong><br>
Host also known as <strong>dumpty.wonderland.org</strong>.<br>
located in London, UK.<br>
maintained by <a href=mailto:peter@wonderland.org>Peter Galbavy</a>.<br>
protocols: rsh.<br>
updated every 12 hours.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.tw.openbsd.org:/cvs</strong><br>
Host also known as <strong>hercules.secc.fju.edu.tw</strong>.<br>
located in Taipei, Taiwan.<br>
maintained by <a href=mailto:shawn@openbsd.org>Shawn Hsiao</a>.<br>
protocols: rsh, ssh, ssh port 2022.<br>
updated every 12 hours.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.no.openbsd.org:/cvs</strong><br>
located in Norway.<br>
maintained by <a href=mailto:micheals@openbsd.org>Michael Shuldman</a>.<br>
protocols: rsh, ssh, ssh port 2022.<br>
updated every 4 hours.<br>
</ul>
<p>
You may want to use `traceroute' to find out which server is nearest you.
Problems with a server should be reported to the <b>maintainer</b> of the
server in question.
</dl>
</p>
<p>
<strong>IMPORTANT NOTE:</strong>
There are a few issues relating to cryptographic software that everyone
should be aware of:
<ul>
<li>The OpenBSD sources are from Canada.
As
	<a href=http://insight.mcmaster.ca/org/efc/pages/doc/crypto-export.html>
	researched by a Canadian individual</a>
and as
	<a href=http://axion.physics.ubc.ca/ECL.html>
	described in the Export Control list of Canada</a>
is legal to export crypto software from Canada to the world.
<p>
<li>However, if you are outside the USA or Canada, you should not
fetch the cryptographic sections of the OpenBSD sources from an
anoncvs server located in the USA. The files in question are...
<ul>
<li>src/kerberosIV/*
<li>src/lib/libc/crypt/crypt.c
<li>src/lib/libc/crypt/morecrypt.c
</ul>
Because of the USA ITAR munitions list,
crypto software may only be exported to Canada from the USA.
<p>
<li>The OpenBSD project is looking for more anoncvs servers -- read
on to find out how you can help.
</ul>
</p>

<p>
A sample use of an anoncvs CVS server would be:
<pre>
% setenv CVSROOT anoncvs@anoncvs.usa.openbsd.org:/cvs
% cd /tmp
% cvs get src/sys/arch/sparc
    [copies the files from the repository to your machine]
% cvs log src/sys/arch/sparc/sparc/locore.s
    [shows the commit log for the chosen file ]
% cvs diff -bc -r1.1 -r1.5 src/sys/arch/sparc/sparc/locore.s
    [shows the changes between revisions 1.1 and rev 1.5]
</pre>
</p>

<p>
Here is how someone using anoncvs regularily would update his
source tree:
<pre>
# setenv CVSROOT anoncvs@anoncvs.usa.openbsd.org:/cvs
# cd /usr
# cvs -q get -PA src
</pre>
or similarily later on he might try:
<pre>
# cd /usr
# cvs -q up -PAd src
</pre>
Everytime you ran this it would syncronize your /usr/src tree. It would
not destroy any of your local changes, rather it would attempt to merge
changes in. If you use obj directories (not obj symbolic links) you may
wish to append "-I obj" to the cvs command line, this will keep cvs from
spitting out a warning about all the obj directories it is going to
encounter which are not in the repository.
</p>

<p>
or to make a diff of a locally patched module (here cd.c) to include with
a bug report:
<pre>
# cd /usr
# cvs diff -u src/sys/scsi/cd.c > /tmp/patch
</pre>
</p>

<p>
The CVS man page (included with the CVS sources) has much more
information about how CVS can be used.
</p>

<p>
<strong>Warning:</strong>
When using cvs you should take care that your current directory is either
the root of the tree you're referencing or in a separate place such as /tmp.
Some commands such as "get" can create an arbitrary sub-tree in the current
directory, and a subsequent update will recursively flesh out this sub-tree.
</p>

<p>
The anoncvs service gives fledgling developers a chance to learn CVS
operation and get thoroughly involved in the development process
before getting "commit" access -- as a result of showing useful
skills and high quality results they will naturally later be given
developer access.  As well, people providing patches can create
their "diff"s relative to the CVS tree, which will ease integration.
</p>

<p>
<strong>Anoncvs rsh vs. ssh</strong>
<br>
By default, the CVS client uses rsh to talk to the CVS server.  Many
of the CVS sites no longer supprt rsh for security reasons or a local
problem like a firewall or imperfect protocol emulator such as slirp
may prevent you from using rsh.
The alternative is a to use a "secure shell" connection using
<a href=http://www.cs.hut.fi/ssh>ssh</a>.  This is a commerical product
offered by <a href=http://www.ssh.fi>SSH Communications Security Ltd</a>,
however they make a free unix version available that can be easily
installed under OpenBSD.  You can download the unix version from
<a href=http://www.cs.hut.fi/ssh>http://www.cs.hut.fi/ssh</a> or one of
the mirrors listed there.
</p>
<p>
In this case,
one sets the environment variable <strong>CVS_RSH</strong> to point
to ssh (typically <strong>/usr/local/bin/ssh</strong>). To reduce the
performance hit the anoncvs server would take it is recommended (and
requested) that you disable encryption.  If your local site prevents
you from connecting out to port 22 (which ssh defaults to using) use
port 2022.
</p>

<p>
Do not be tempted to turn on compression since CVS already compresses.
Use something like the following in your <strong>$HOME/.ssh/config</strong>
file.  Note that not all anoncvs servers allow ssh connections on
port 2022.
</p>
<pre>
	Host anoncvs.usa.openbsd.org
	    Cipher none
	    Port 2022
</pre>

<p>
CVS is a little noisy starting up; to quiet it a bit you may want to
do this:
<pre>
setenv CVS_CLIENT_PORT -1
</pre>
</p>

<p>
If you wish to change from one CVS server to another (say your normal one is
down, or for any other reason), the environment variable which will let you
do this is
<pre>
setenv CVS_IGNORE_REMOTE_ROOT
</pre>
</p>

<p>
If you wish to be a new anoncvs mirror site, please contact the anoncvs
<a href=mailto:deraadt@theos.com>maintainer</a>.
Anoncvs mirrors require about 300MB of disk, and use up to 4MB of swap
per anoncvs user (assuming the user does a large operation; while smaller
operations use fewer resources, anoncvs still makes much more of an
impact than ftp or sup).  Such anoncvs machines should have excellent
network connectivity for the area they are expected to serve.  A
<a href=anoncvs.shar>document</a>
which describes the setup of anoncvs servers is available.
</p>

</dl>

<hr>
<a href=index.html><img src=back.gif border=0 alt=OpenBSD></a> 
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br><small>$OpenBSD: anoncvs.html,v 1.14 1997/06/13 02:22:24 downsj Exp $</small>

</body>
</html>
