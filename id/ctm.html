<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
   <TITLE>CTM</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">

<center>
<img alt="CTM untuk OpenBSD" src="../images/bsdctm.gif" width="401" height="126">
</center>

<H3><font color="#0000e0">Apakah CTM itu?</font></H3>

<P>
CTM adalah sebuah sistem yang didesain oleh Poul-Henning Kamp untuk membuat 
perubahan pada struktur kode sumber tersedia pada basis khusus lewat email.
Ini merupakan cara bagus untuk tetap terkini dengan struktur kode sumber saat ini
atau susunan CVS jika anda mempunyai hubungan internet yang lambat, misal dengan
modem.

<P> CTM OpenBSD mendistribusikan semua modul susunan CVS OpenBSD ditambah pemeriksaan 
  beberapa versi modul-modul tersebut. CTM memakai lebar data sangat sempit dalam 
  mendistribusikan perubahan pada struktur, dan dimampatkan <tt><b>gzip -9</b></tt>. 
  Berbeda dengan <a href="cvsup.html">CVSup</a>, CTM tertulis dalam bahasa C biasa 
  dan oleh karenanya tersedia untuk platform apapun yang didukung oleh OpenBSD. 
  CTM mengimplementasikan sesuatu yang disebut sistem dorong, sementara itu semua 
  cara lain untuk akses ke susunan CVS OpenBSD merupakan sistem tarik. 
<p> Untuk <b>any</b> masalah, saran, dan pertanyaan tentang CTM, hubungi pengelola 
  CTM <a href="mailto:hgw@d1906.inka.de">Hans G&uuml;nter Weigand</a>. <small>(Mohon 
  tidak bertanya ke orang lain tentang CTM, karena mereka sibuk melakukan hal 
  lain. Terima kasih.)</small> 
<H3><font color="#0000e0">Bagaimana ini bekerja?</font></H3>

<P> Gagasan dasar dari CTM adalah anda bisa mendaftar ke daftar mailing khusus 
  untuk sebuah CVS atau struktur kode sumber tertentu. Setiap hari anda menerima 
  email berisi seluruh perubahan selama waktu tersebut. Serangkaian besar perbedaan 
  disebut <b>delta</b>. Sebenarnya, server CTM membuat delata baru setiap 12 jam. 
<P> Anda memulai dengan rangkaian baru, untuk kemudian delta berikut dengan perbaikan. 
  Untuk memulai menggunakan CTM anda harus mengambil rangkaian dasar terakhir 
  dan semua delta yang dibuat setelahnya. Sekali setelah anda memproses hal tersebut, 
  anda dapat mendapat delta berikutnya yang anada terima dari daftar mailing. 
  Rangkaian dasar dibagi menjadi 1400kB per bagian untuk memudahkan mendapatkannya 
  pada jalur yang jelek. 
<P> Rangkaian dasar dibuat setiap 50 delta terkait, sehingga anda tidak pernah 
  harus mendapatkan lebih dari 50 delta sekali pengambilan. 
<P> Saat ini ada dua berkas rangkaian dasar. Untuk sementara waktu lalu kami membuat 
  berkas <tt><b>tar.gz</b></tt> secara manual, tetapi kami kembali ke delta dasar 
  CTM yang sebenarnya. Baru-baru ini berisi checksum <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5&amp;sektion=1">md5(1)</a> 
  dan dibuat otomatis, maka lebih aman sedikit. Anda dapat membedakan dua jenis 
  rangkaian dasar lewat namanya. Sebuah contoh untuk berkas <tt><b>tar.gz</b></tt> 
  adalah<tt><b> OpenBSD-cvs.1450.tar.gz</b></tt>, tempat dimana delta dasar bernama 
  <tt><b>OpenBSD-cvs.1500A.gz</b> seharusnya berada</tt>. Lihat di bawah ini untuk 
  petunjuk lengkap. 
<H3><font color="#0000e0">Berapa lebardata yang digunakan CTM?</font></H3>

<P> Anda mendapatkan rangkaian dasar dan semua delta terkini yang bersesuaian 
  lewat ftp dari situs tersebut dibawah. Ukurannya adalah: 
<ul>
  <li>Kira-kira 215MB untuk OpenBSD-cvs. 
  <li>Kira-kira 40MB untuk OpenBSD-cvs-x11. 
  <li>Kira-kira 65MB untuk OpenBSD-cvs-xf4. 
  <li>Kira-kira 83MB untuk OpenBSD-src. 
  <li>Kira-kira 36MB untuk OpenBSD-src-x11. 
  <li>Kira-kira 4MB untuk OpenBSD-ports. <br>
    Ingat bahwa ini adalah ukuran termampat. Berkas termekarkan sekitar lima kali 
    lebih besar. 
  <li>Delta saling terkait bervariasi dari 10kB sampai 500kB, dan kadang-kadang 
    sampai dua megabyte. 
  <li>CTM selalu membagi delta dalam pesan email 100kB yang bisa disatukan otomatis. 
  <li>Jika delta lebih dari 5MB, tidak dikirim lewat email. Daripada itu, anda 
    akan menerima pemberitahuan untuk mendapatkan delta lewat ftp. Pengkinian 
    CTM yang besar jarang terjadi, lebih dulu, biasanya terjadi hanya setelah 
    impor besar sesuatu seperti binutils, Perl, gcc, XFree86, dll.., atau membuat 
    tanda pada gudang CVS. 
</ul>

<H3><font color="#0000e0">Bagaimana saya mengunakan CTM?</font></H3>

<UL>
  <LI>Mendaftar ke daftar mailing CTM mailing untuk rangkaian sumber yang anda 
    inginkan. 
    <p> Ada beberapa daftar mailing terkait pada CTM. Terdapat daftar untuk pengkinian 
      gudang CVS, sebuah daftar struktur kode sumber, sebuah daftar untuk kedua 
      bagian X11, dan satu daftar untuk struktur port, ditambah sebuah daftar 
      pesan log pembuatan delta CTM yang sedang berjalan. 
    <p> Perintah berikut akan mendaftarkan anda pada daftar yang sesuai: 
    <p> Untuk gudang CVS (modul CVSROOT, ports, src dan www, tetapi tidak X11 
      dan XF4): 
    <pre>
	echo subscribe OpenBSD-cvs | mail majordomo@OpenBSD.org
</pre>
    Untuk modul X11 dari gudang CVS: 
    <pre>
	echo subscribe OpenBSD-cvs-x11 | mail majordomo@OpenBSD.org
</pre>
    Untuk modul XF4 dari gudang CVS: 
    <pre>
	echo subscribe OpenBSD-cvs-xf4 | mail majordomo@OpenBSD.org
</pre>
    Untuk pemeriksaan salinan modul src: 
    <pre>
	echo subscribe OpenBSD-src | mail majordomo@OpenBSD.org
</pre>
    Untuk pemeriksaan salinan modul X11: 
    <pre>
	echo subscribe OpenBSD-src-x11 | mail majordomo@OpenBSD.org
</pre>
    Untuk pemeriksaan salinan modul ports: 
    <pre>
	echo subscribe OpenBSD-ports-ctm | mail majordomo@OpenBSD.org
</pre>
    Untuk daftar log CTM: 
    <pre>
	echo subscribe ctm-log | mail majordomo@OpenBSD.org
</pre>
    <p> 
  <li>Pasang program CTM dari paket atau dari koleksi port. Anda bisa menmukan 
    portnya di <tt><b>/usr/ports/devel/ctm</b></tt>. 
</ul>
<b>Catatan:</b> The examples below just cover OpenBSD-cvs for clarity. The other 
source sets are handled in the same fashion. 
<p><ul>

<li>Download the base set from an FTP site. You'll find it in the
subdirectory <tt><b>base/OpenBSD-cvs</b></tt>.  Get all files in
that directory.  Once you have them all you can create the base set
file and unpack it with the following commands, depending on the type
of file you got:

<pre>
	cat split/OpenBSD-cvs.1500A.gz.* &gt; OpenBSD-cvs.1500A.gz
	cd target
	ctm -v -v -v .../OpenBSD-cvs.1500A.gz
</pre>
<p>
or

<pre>
	cat split/OpenBSD-cvs.1450.tar.gz.* &gt; OpenBSD-cvs.1450.tar.gz
	cd target
	tar -xzvf .../OpenBSD-cvs.1450.tar.gz
</pre>

<p>
where <tt><b>split</b></tt> is the directory in which you have
placed the files you downloaded and <tt><b>target</b></tt> is the
place you have chosen for unpacking the source set.

<p> It is not necessary to keep these base set files around, if
you're sure you've got a complete tree.  But you can keep the base set
file(s) for backup purposes.  However, be sure to note the number of
the base set before continuing.

<p>
<li>You now need to get the deltas which have been generated since the
base set.  Go to one of the FTP sites listed below into the subdirectory
<tt><b>OpenBSD-cvs</b></tt> and download every file whose number is
<em>larger</em> than the number of the base set you used. Then apply
these deltas:

<pre>
	cd target
	ctm -v -v -v deltas/OpenBSD-cvs.*
</pre>

<p>
where <tt><b>target</b></tt> is the directory where your source set
tree is, and <tt><b>deltas</b></tt> is where you have stored the
deltas.

<p>
<LI>Wait until you get your first delta from the mailing list.
<p>
<LI>Unpack, assemble, and apply the CTM delta using <tt><b>ctm_rmail</b></tt>.
<p>

<pre>
	ctm_rmail -p /tmp -d deltas -b target folder
</pre>

<p>
where <tt><b>folder</b></tt> is the mail folder containing the delta
mail.  This will decode the CTM delta and save it in the
<tt><b>deltas</b></tt> directory.  The delta will be a file of the
form <tt><b>OpenBSD-cvs.<var>XXXX</var>.gz</b></tt>, where <var>XXXX</var>
is the number of the delta.  Then the delta will be applied to the
directory tree located at <tt><b>target</b></tt>, the place where you
unpacked the base set.

<p>
Repeat this last step every time you receive a delta from the
mailing list.  If you like, you can automate this step using procmail,
maildrop, or any similar program from the
<a href="ports.html">ports collection</a>.
</ul>

<p>
Here is the list of FTP servers carrying CTM deltas:

<ul>
<li>The primary FTP server can be reached at:
<p>
<a href="ftp://openbsd.rug.ac.be:/pub/OpenBSD-ctm/">
     ftp://openbsd.rug.ac.be:/pub/OpenBSD-ctm/
</a>.
<p>
This server is automatically updated by the CTM delta generation process.
Base sets are
available as big single files in the <tt><b>base</b></tt> directory.
The split files are in <tt><b>base-split</b></tt>.
</ul>

<ul>
<li><a href="ftp://ctm.se.OpenBSD.org:/pub/OpenBSD-ctm/">
     ftp://ctm.se.OpenBSD.org:/pub/OpenBSD-ctm/
</a>
<p>
This server is updated by CTM deltas received from the mailing lists.  It
additionally has the split base deltas in the <tt><b>base</b></tt>
subdirectory, mirrored from
<a href="ftp://openbsd.rug.ac.be:/pub/OpenBSD-ctm/">
     ftp://openbsd.rug.ac.be:/pub/OpenBSD-ctm/
</a>.
</ul>

<ul>
<li><a href="ftp://ctm.OpenBSD.org:/pub/OpenBSD-ctm/">
     ftp://ctm.OpenBSD.org:/pub/OpenBSD-ctm/
</a>
<p>
is identical to
<p>
<li><a href="ftp://ctm.ca.OpenBSD.org:/pub/OpenBSD-ctm/">
     ftp://ctm.ca.OpenBSD.org:/pub/OpenBSD-ctm/
</a>
<p>
and is a mirror of
<a href="ftp://ctm.se.OpenBSD.org:/pub/OpenBSD-ctm/">
     ftp://ctm.se.OpenBSD.org
</a>
.
</ul>

<p>
<b>NOTE:</b> <a href="mailto:hgw@d1906.inka.de">I'm</a> very interested
      in finding other sites around the world that would like to
      mirror these deltas.
<p>

<h3><font color="#0000e0">Haruskah saya memilih struktur kode sumber atau susunan 
  CVS?</font></h3>

<P>
This depends on your diskspace, among other factors.  Since CTM
doesn't deal very well with files which have been modified locally,
the better choice is surely the <a href="anoncvs.html">CVS</a>
repository.  You can check out your working copy of the source tree
from your CVS repository then, can track a stable branch,
and keep your local modifications in
your source tree.  CVS is smart enough to merge in your local changes.
You can also use the full range of CVS commands except commands like
<tt><b>cvs commit</b></tt> and <tt><b>cvs tag</b></tt>.

<p>
The drawback, however, is the amount of diskspace it takes.  A
checked-out source tree takes about 370MB or so, but if you have your
own CVS repository you need more than 1Gb for it, <b>plus</b> another
370MB for the checked out tree.
This doesn't count the 100MB or more (depending on the architecture)
you will need for generated files during a build, i.e. compiling the sources.

<p>
If you just get the source tree, you will need to deal with local
modifications.  One way to do this is to use the <b>union</b> filesystem,
(see <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_union&amp;sektion=8">mount_union(8)</a>)
although there have been reports that the <b>union</b> filesystem can be 
unstable if both the upper and lower layers reside on the same physical 
filesystem.  If you place your upper and lower layers on separate 
filesystems you should have no problems.  A sample of this is as follows:

<p>
Suppose your CTM-updated tree is in <tt><b>/usr/src-ctm</b></tt>, and
your real source tree, the one you make your modifications to and do
your builds from, is in <tt><b>/usr/src</b></tt>.
<tt><b>/usr/src</b></tt> should be initially an empty directory.  The
following command will set up the union mount:

<pre>
	mount -t union -o -b /usr/src-ctm /usr/src
</pre>

<p>
Modifications made to files in <tt><b>/usr/src</b></tt> will become a
file contained within <tt><b>/usr/src</b></tt>, hiding the one in
<tt><b>src-ctm</b></tt>.  If changes are made via CTM to the
underlying <tt><b>src-ctm</b></tt> tree, those changes will <b>not</b>
be seen if there is a file in the upper layer hiding it.

<p>
You should periodically unmount the
union and search for files which are local to the union filesystem.

<pre>
	umount /usr/src
	find /usr/src -type f
</pre>

<p>
The commands <tt><b>ls -W</b></tt> and <tt><b>rm -W</b></tt> will be
useful too, as objects named "whiteouts" in <tt><b>/usr/src</b></tt>
will also hide files in <tt><b>src-ctm</b></tt>.

<p>
If you get the CVS repository, you can use the <tt><b>cvs checkout</b></tt>
command to check out a source tree from it.  Each time you update
with CTM you can use the <tt><b>cvs update</b></tt> command to
update your source repository.

<p>
To get an initial src repository:
<pre>
	cd /usr
	cvs -qd YOUR_CVS_REPOSITORY checkout -P src
</pre>
<p>
and after each CTM update:
<pre>
	cd /usr/src
	cvs -q update -Pd
</pre>

<H3><font color="#0000e0">Seberapa stabil CTM untuk OpenBSD?</font></H3>

CTM telah digunakan lebih dari lima tahun pada OpenBSD, dan pada FreeBSD dalam 
waktu yang lebih lama. CTM sangat handal dan stabil. 
<h3><font color="#0000e0">Bagaimana masa depan CTM?</font></h3>

Terdapat sejumlah perubahan (kecil) dan optimasi yang mungkin. Diantaranya: 
<ul>
  <li> CTM tidak pernah mengirim sebuah perubahan melebihi 5MB lewat email. Hal 
    in bisa dikembalikan dengan dua cara: Ukuran terbesar perubahan harus ditingkatkan, 
    atau sebuah antrian harus dipasang, hanya untuk sejumlah pesan yang dikirmkan 
    setiap hari. Misal, jika sebuah perubahan berukuran 6MB, dibagi menjadi 96 
    bagian pesan email. Semua bagian diletakkan dalam sebuah antrian. Pada hari 
    pertama, 50 pesan pertama dikirimkan, pada hari kedua 46 sisanya, ditambah 
    4 pesan dari perubahan selanjutnya. 
  <li> Peranti lunak CTM dapat ditulis ulang, atau paling tidak diperbaiki untuk 
    hal yang lebih baik. Implementasi C nya bukan contoh pemrograman yang bagus. 
    Merupakan kesempatan yang bagus juga untuk menambahkan fitur baru, seperti 
    penandaan CTM dengan PGP. 
</ul>

Kirim email ke <a href="mailto:hgw@d1906.inka.de">dia</a> tentang pendapat dan 
harapan anda! 
<H3><font color="#0000e0">Keterangan lanjut</font></H3>

Jika anda ingin mempelajari lebih lanjut tentang CTM,tempat yang bagus untuk memulai 
adalah Buku saku FreeBSD di: 
<ul>
<li> <a href="http://www.FreeBSD.org/handbook/ctm.html">
         http://www.FreeBSD.org/handbook/ctm.html
     </a>
</ul>

Ada juga halaman manual untuk semua peralatan CTM. 
<h3><font color="#0000e0">Rangkuman:</font></h3>

<p>
<ul>
  <li> Daftar mailing: 
    <ul>
   <li><tt>echo subscribe OpenBSD-cvs | mail majordomo@OpenBSD.org</tt>
   <li><tt>echo subscribe OpenBSD-cvs-x11 | mail majordomo@OpenBSD.org</tt>
   <li><tt>echo subscribe OpenBSD-cvs-xf4 | mail majordomo@OpenBSD.org</tt>
   <li><tt>echo subscribe OpenBSD-src | mail majordomo@OpenBSD.org</tt>
   <li><tt>echo subscribe OpenBSD-src-x11 | mail majordomo@OpenBSD.org</tt>
   <li><tt>echo subscribe OpenBSD-ports-ctm | mail majordomo@OpenBSD.org</tt>
   <li><tt>echo subscribe ctm-log | mail majordomo@OpenBSD.org</tt>
   </ul>
<p>
  <li> FTP (untuk rangkaian dasar dan perubahan yang diperlukan): 
    <ul>
   <li> <a href="ftp://openbsd.rug.ac.be:/pub/OpenBSD-ctm/">
        ftp://openbsd.rug.ac.be:/pub/OpenBSD-ctm/</a>
   <li> <a href="ftp://ctm.OpenBSD.org:/pub/OpenBSD-ctm/">
        ftp://ctm.OpenBSD.org:/pub/OpenBSD-ctm/</a>
   <li> <a href="ftp://ctm.ca.OpenBSD.org:/pub/OpenBSD-ctm/">
        ftp://ctm.ca.OpenBSD.org:/pub/OpenBSD-ctm/</a>
   <li> <a href="ftp://ctm.se.OpenBSD.org:/pub/OpenBSD-ctm/">
        ftp://ctm.se.OpenBSD.org:/pub/OpenBSD-ctm/</a>
   </ul>
</ul>

<p> Catatan dan pengumuman penting tentang CTM akan dikirimkan ke daftar mailing 
  announce@OpenBSD.org. 
<p>

<H3><font color="#0000e0">Penghargaan</font></H3>

<ul>
  <li> Poul-Henning Kamp (phk@FreeBSD.org) yang membuat CTM bisa mendapatkan perubahan 
    yang berlangsung
  <li> Theo de Raadt (deraadt@theos.com) yang membuat OpenBSD bisa menyediakan 
    kode sumber yang diperlukan untuk membuat perubahan CTM pada cvs.OpenBSD.org 
    (sekarang dibuat di tempat lain), dan untuk keajaiban nameserver
  <li> Todd C. Miller (millert@OpenBSD.org) yang membuat dan mengelola daftar 
    mailing CTM
  <li> Bob Beck (beck@OpenBSD.org), Artur Grabowski (art@OpenBSD.org), Magnus 
    Holmberg (mho@OpenBSD.org) dan Wolfram Schneider (wosch@FreeBSD.org) yang 
    menyediakan ruang ftp untuk rangkaian dasar dan perubahan pada ctm.*OpenBSD.org 
  <li> Thomas Graichen (graichen@OpenBSD.org) for starting CTM for
     OpenBSD and maintaining it all those years

  <li> Wim Vandeputte (wvdputte@OpenBSD.org) yang menyediakan host bagi CTM saat 
    ini
  <li> ... dan semua yang telah membantu secara tidak langsung
</ul>


<p> Logo OpenBSD/CTM didesain untuk Proyek OpenBSD oleh <a href="mailto:flipk@openbsd.org">Phillip 
  F Knaack</a>. 
<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../back.gif" border="0" alt="OpenBSD" /></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>Originally [OpenBSD: ctm.html,v 1.23 ]<br>
$Translation: ctm.html,v 1.1 2003/05/18 15:42:18 ferywu Exp $<br>
$OpenBSD: ctm.html,v 1.1 2003/05/19 19:05:57 jufi Exp $</small>

</body>
</html>
