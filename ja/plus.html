<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD-current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD-current changes">
<meta name="keywords" content="openbsd,current,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2004 by OpenBSD.">
<style>
<!--
td { line-height: 130%; }
body { line-height: 130%; }
-->
</style>
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">OpenBSD 3.6 と OpenBSD-current との間の変更点</font></h2>
<hr>

<p>
以下は機種に依存しない部分の主な変更点の一覧で、
これらはかなり頻繁に問い合わせがくる変更点でもあります。
ports に関する変更も行われており、それらについては折をみてそれぞれの
<a href="plat.html">プラットフォーム</a>に関するページに記載されます。

<p>
<a href="ports.html">ports</a> コレクションの変更点については、
<a href="../portsplus/ja/index.html">ここ</a>に記述されています。

<p>
注: <font color="#e00000">パッチの存在する問題については、朱書きで記されています。</font>

<p>
<h3>
他のリリースの変更点については、こちらをご覧ください。</a><br>
<a href="../plus20.html">2.0</a>、
<a href="../plus21.html">2.1</a>、
<a href="../plus22.html">2.2</a>、
<a href="../plus23.html">2.3</a>、
<a href="../plus24.html">2.4</a>、
<a href="../plus25.html">2.5</a>、
<a href="../plus26.html">2.6</a>、
<a href="../plus27.html">2.7</a>、
<a href="../plus28.html">2.8</a>、
<a href="plus29.html">2.9</a>、
<a href="plus30.html">3.0</a>、
<a href="plus31.html">3.1</a>、
<a href="plus32.html">3.2</a>、
<a href="plus33.html">3.3</a>、
<a href="plus34.html">3.4</a>、
<a href="plus35.html">3.5</a>、
<a href="plus36.html">3.6</a>。
<br>
</h3>

<p>
<h3><font color="#0000e0">私たちは OpenBSD-current 上で作業しています。</font></h3><p>
以下のリストは、10月 9日までに加えられた (ほとんど) すべての変更を要約したものです。
<p>

<ul>
<!-- ^ 20041010 -->
<li> サイズやエンディアンが違うクロスターゲット環境でも <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nm&sektion=1">nm(1)</a> が動くようにしました。
<li> void PCI メモリ領域をテストするさいに 32ビットの値で 64ビットテストをおこなわなくしました。
<li> PHY リセットにさらに 500マイクロ秒の遅延を追加しました。これは DP83840A で必要です。
<li> 1000base*X のオートネゴシエーションと 1000baseT における master-mode をサポートしました。NetBSD から。
<!-- ^ 20041009 -->
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hotplug&sektion=4">hotplug(4)</a> キューがフルのときに末尾ポインタ (tail pointer) を正しく更新するようにしました。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> における、null 参照を削除しました。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kbd&sektion=8">kbd(8)</a> における 2、3のバッファオーバーランを修正。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&sektion=8">ipsecadm(8)</a> のモニタコマンドのメッセージの最後をこえてインクリメントしないようにしました。
<!-- ^ 20041008 -->
<li> Gigabit Ethernet ten-bit インターフェイスのための Generic なドライバ <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gentbi&sektion=4">gentbi(4)</a> を追加しました。 NetBSD から。
<li> mii.h に 1000base*X オートネゴシエーションのための定数を追加しました。また if_media.h に 1000baseT の nic-to-nic master mode のための定数を追加しました。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-agent&sektion=1">ssh-agent(1)</a> で、 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bind&sektion=2">bind(2)</a> が失敗したときにエージェント用のソケットを unlink しないようにしました。
<li> 新しく -p オプションと 'p' コマンドが <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=top&sektion=1">top(1)</a> に追加されました。これはただひとつのプロセスだけを見るのに使います。
<!-- ^ 20041007 -->
<li> Intel チップの乗った <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&sektion=4">dc(4)</a> デバイスで、受信と送信でバスを同等に共有するようにしました。これは高負荷時におけるフォーワーディング性能を向上させます。
<li> TCP congestion window のサイズを 1セグメントから 2セグメント に変更し、ESTABLISHED 状態に移ったときのウインドウサイズと一致させるようにしました。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> インターフェイスで、変数を unshadow 化し <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a> を unbreak しました。
<!-- ^ 20041006 -->
<li> ifstated(8) で、facility ではなく priority によって <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vsyslog&sektion=3">vsyslog(3)</a> を呼び出すようにしました。
<li> Drop the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8">spamd(8)</a> のデフォルト passtime を 25分に落としました。これによって、quadratic な再送スケジュールをもつメーラは 26分ごとに再送できることになってしまいますが。
<li> パッケージツールの新しいオブジェクトシステムに多くの変更を加えました。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=it&sektion=4">it(4)</a> ハードウェアモニタと接続しているときは、チップをリセットしないようにしました。これはファンがジェットエンジン・モードになるのを防ぎます。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> advertisements を送信しているさい、 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=splsoftnet&sektion=9">splsoftnet(9)</a> が ip_output() を呼びだすのを防ぐようにしました。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8">spamd(8)</a> greylister のデフォルト返り値を 450 から 451 に変更しました。後者のコードのほうがメーラクラスタには有効で、それらが次回、同じ IP から再送する確率が高くなります。
<li> -S オプションをつけたときの <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tput&sektion=1">tput(1)</a> のバッファオーバーフローを修正しました。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> の peer ID にゼロを許可しないようにしました。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a> クライアントで接続が失敗したときの扱いを前よりもきれいにしました。
<li> Davicom USB DM960ベース Ethernet デバイス用の新しい <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=udav&sektion=4">udav(4)</a> ドライバ。From NetBSD.
<!-- ^ 20041005 -->
<li> struct iso_dnode における doff_t フィールドを u_quad_t に変更しました。これで 2GB より大きな DVD やその他の ISO ファイルシステムも読めるようになります。
<li> man ページのクリーンアップいろいろ。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=amd&sektion=8">amd(8)</a> を <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=select&sektion=2">select(2)</a> から <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=poll&sektion=2">poll(2)</a> を使うよう変更。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8">disklabel(8)</a> の fstype により多くの文字を使えるようにしました。これで type ISO9660 が途中で切られることはなくなります。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> 等のパッキングリストのアイテム番号を基本的なクラス階層構造に編成しなおしました。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a> で、offset 値の平均ではなくメジアンをとるように変更。
<!-- ^ 20041004 -->
<li> 新しい i386 用の<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nvram&sektion=4&arch=i386">nvram(4)</a> ドライバです。いまのところ読み込み専用ですが。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=grep&sektion=1">grep(1)</a>で、境界における <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mmap&sektion=2">mmap(2)</a> の最適化をやめました。改行のさいにいくつか問題があったので (PR#3940, PR#3941)。
<!-- ^ 20041003 -->
<li> バッファがすべて格納できるほど十分大きくなるまで、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diff&sektion=1">diff(1)</a> が継続的に <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getdirentries&sektion=2">getdirentries(2)</a> をやり直すようにしました。
<li> より新しい <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&sektion=1">gcc(1)</a> バージョンのために &lt;stdbool.h&gt; をもとに戻しました。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=msgs&sektion=1">msgs(1)</a> における <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fseek&sektion=3">fseek(3)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftell&sektion=3">ftell(3)</a> その他のクリーンアップ。
<!-- ^ 20041002 -->
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=em&sektion=4">em(4)</a> で IO領域を計算するさいに 1 だけ大きかった問題を修正。
<li> デフォルトの listener に対して <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=socket&sektion=2">socket(2)</a> の ENOPROTOSUPPORT が失敗しても <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> が死ななくなりました。
<li> カーソルページが LRU ページになったときの libdb <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hash&sektion=3">hash(3)</a> におけるメモリ汚染の問題を修正しました。
<!-- ^ 20041001 -->
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8">ftpd(8)</a> で、子プロセスを <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fork&sektion=2">fork(2)</a>する前に <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=accept&sektion=2">accept(2)</a> のエラーをチェックするようにしました。From FreeBSD.
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpc&sektion=8">lpc(8)</a> での segfault と 1つはみ出る問題を解決。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rl&sektion=4">rl(4)</a> の MAC address を big-endian アーキテクチャでも正しく取得できるようにしました。 
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bus_dma&sektion=9">bus_dma(9)</a> magic を <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rl&sektion=4">rl(4)</a> に追加。
<li>  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> がチョーキングに忙がしいとき、助けになるような偽の netmask を表示するようにしました。
<li> YP marker が  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=master.passwd&sektion=5">master.passwd(5)</a> ファイルに存在する場合、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8">adduser(8)</a> がつねに新規のユーザをその前に追加するようにしました。 (PR#3727)
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rl&sektion=4">rl(4)</a> に対する Ethernet オートコンフィギュレーションの修正。From FreeBSD.
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a> のクライアント・ディスパッチ関数を殺さないエラー一覧に <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=recvfrom&sektion=2">recvfrom(2)</a> の ECONNREFUSED を追加しました。いまはクライアント側のソケットには <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=connect&sektion=2">connect(2)</a> が使われています。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=le&sektion=4&manpath=OpenBSD+3.6">le(4)</a> で ifmedia 構造体をもっているふりをするのをやめました。これでいくつかの panic が治っています (PR#3407, PR#3661)。
<!-- ^ 20040930 -->
<li> BIND 9.3.0 マージで失われていた <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=snprintf&sektion=3">snprintf(3)</a> の文字列クリーニングを追加しなおしました。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> で欠けていた NULL 化を修正し、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflog&sektion=4">pflog(4)</a> が不適切に状態をアンカーのせいにしてしまうのを修正しました。また、 pfctl -vvs[nr] の状態カウンタの表示を訂正しました。
<li> インストーラのリファクタリングおよび縮小化。
<!-- ^ 20040929 -->
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xman&sektion=1">xman(1)</a> における、検索文字列を読み込むときのバッファオーバーランを修正 (X.Org bugzilla #1481)。
<li> 最近の大容量ディスクに対する <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8">disklabel(8)</a> の出力をきれいにしました。 (PR#3847 に基づく)
<li> ISC BIND 9.3.0 をインポート・マージしました。ローカルな変更は残しています。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpr&sektion=1">lpr(1)</a> エラー・パスのいくつかのメモリリークを修正。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&sektion=8">sudo(8)</a> を 1.6.8p1 へバージョンアップ。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login_tis&sektion=8">login_tis(8)</a> を追加。これは TIS Firewall Toolkit authentication をサポートしています。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> に 'prepend-neighbor (おとなりの前に追加する)' 機能を追加。
<li> Alpha マシンをクラッシュさせる原因だった、 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rl&sektion=4">rl(4)</a> におけるアラインされていないアクセスを修正 (PR#3795)。
<!-- ^ 20040928 -->
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gem&sektion=4">gem(4)</a> が <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vlan&sektion=4">vlan(4)</a>-サイズ化されたフレームを扱えるようにしました。
<!-- ^ 20040927 -->
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mii&sektion=4">mii(4)</a> が個別のファンクション・ポインタではなく、通常のエントリポイントの構造体を使うように設計し直しました。 From NetBSD.
<!-- ^ 20040926 -->
<li> kx(1) をツリーから削除。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=file&sektion=1">file(1)</a> における、すてきなバッファサイズ確保 (PR#3924)。
<li> OpenBSD/sgi の X をサポート。
<!-- ^20040925 -->
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vfprintf&sektion=3">vfprintf(3)</a> における「1つ行きすぎ問題 (off-by-one)」を修正。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=which&sektion=1">which(1)</a> の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=free&sektion=3">free(3)</a> でクラッシュする問題を修正。
<li> Path MTU Discovery サポートを <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&sektion=4">ipsec(4)</a>-in-UDP に追加。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=trpt&sektion=8">trpt(8)</a> が使う TCP セグメントサイズをユーザランドに渡すようにした。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a> のクライアント側のソケットで <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=connect&sektion=2">connect(2)</a> するよう変更。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a> において、 NAT-T の keepalive を処理しないよう修正。<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li> パッケージツールの <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&sektion=1">pkg_delete(1)</a> で、そのユーザあるいはグループがもう必要なくなったときは削除するようにして、 @newuser/@newgroup サポートを丸めた。
<li> osi および mask キーワードを <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&sektion=8">route(8)</a> から削除。
<!-- ^ 20040924 -->
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=3">sysctl(3)</a> の KERN_INTRCNT_CNT が int のかわりに quad を返すよう変更。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&sektion=8">route(8)</a> に多少の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=read&sektion=2">read(2)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=write&sektion=2">write(2)</a> のエラーチェックを追加。
<li> 複数クライアントモードにおける <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a> の -n オプションの扱いを修正。
<li> FreeBSD や NetBSD のように、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&sektion=4">bpf(4)</a> の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kqueue&sektion=2">kqueue(2)</a> コードが kn_data を使用可能なバイト数で埋めるようにしました。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a> が SIGCHLD を処理したあと、その子プロセスに決してシグナルを送ることのないように徹底しました。
<!-- ^ 20040923 -->
<li> MIDI_MAXWRITE よりも大きいブロックを書きこむ際の割り込みをサポートしていない <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=midi&sektion=4">midi(4)</a> UARTs を許可。
<li> 64-bit int 値を表示するのに libsa を使った 32-bit コードを許可するコードを追加 (デフォルトでは #ifdef されてます)。
<li> syncache にクラスタを割り当てるか否かを決定するときに、リンク層ヘッダを考慮に入れるようにしました。
<li> XML パーサライブラリの libexpat 1.95.6 をツリーに追加しました。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&sektion=8">route(8)</a> からソースルーティングのサポートを削除しました。
<!-- ^ 20040922 -->
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_create&sektion=1">pkg_create(1)</a> およびその仲間において、パッキング要素として @newuser と @newgroup の最初のサポートを追加。
<li> X が走っているとき、スクリーンを暗くする <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsdisplay&sektion=4">wsdisplay(4)</a> の設定が変更されたときに、それが起動するのを防ぐようにしました。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&sektion=5">pf.conf(5)</a> に 'no-scrub' キーワードを追加しました。これは特定のトラフィックがノーマライザをバイパスできるようにするものです。 
<li> 標準の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xinit&sektion=1">xinit(1)</a> rc ファイルで <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xconsole&sektion=1">xconsole(1)</a> をアイコン化するようにしました。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&sektion=8">route(8)</a> の show コマンドで、route ラベルを表示します。
<!-- ^ 20040921 -->
<li> IPX-in-IP コードまわりの <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=m_gethdr&sektion=9">m_gethdr(9)</a> に対するパラメータをちゃんとしました。
<li> IPv6 に対する <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> の no-route キーワードを修正。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&sektion=1">gzip(1)</a> において、拡張子 '.gz' を探すときに、ファイル名の最初ではなく最後から探すようにしました。これにより例えば foo.bar がコマンドラインから与えられたが見つからなかった場合、foo.bar.gz を試すことができます。
<li> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=brelse&sektion=9">brelse(9)</a> で、バッファ上でセットされたフラグを保護するために <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=splx&sektion=9">splx(9)</a> を後でおこなうようにしました。
<li> 82550 ベースの <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fxp&sektion=4">fxp(4)</a> カードで、ダイナミック・スタンバイを禁止しました。
<!-- ^ 20040920 -->
<li>New <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnode&sektion=9">vnode(9)</a>-related manual pages for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vflushbuf&sektion=9">vflushbuf(9)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vwakeup&sektion=9">vwakeup(9)</a>.
<li>Check for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=waitpid&sektion=2">waitpid(2)</a> errors in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8">disklabel(8)</a>.
<li>Fix an off-by-one in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=awi&sektion=4">awi(4)</a>'s WEP algorithm selection code.
<li>Install PostScript docs for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=yacc&sektion=1">yacc(1)</a>.
<li>Set NOLINT for GNU code, there's just no way it's ever going to work.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a> with -s, only call <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=settimeofday&sektion=2">settimeofday(2)</a> if the offset is larger than 180 seconds. Otherwise, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adjtime&sektion=2">adjtime(2)</a> can cope with the offset sensibly.
<li>Move the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a> startup earlier in /etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8">rc(8)</a>, and use the -s flag unconditionally.
<li>New -s flag for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a>, which sets the time using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=settimeofday&sektion=2">settimeofday(2)</a> before daemonizing. This removes the need to run <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&sektion=8">rdate(8)</a> early in /etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8">rc(8)</a>.
<li>In libpthread, allow a thread in the FD[RW]_WAIT states to be suspended.
<li>Fix the build process for the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahc&sektion=4">ahc(4)</a> microcode.
<li>New %z and %t modifiers to *<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=printf&sektion=3">printf(3)</a> for displaying size_t and ptrdiff_t respectively.
<li>Add a framework in the package tools to distinguish packages added manually by the user from those added as dependencies for other packages.
<li>Enable @shell keyword in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> etc., adding and removing an /etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=shells&sektion=5">shells(5)</a> entry as required.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamlogd&sektion=8">spamlogd(8)</a> respect the -I option, and change its <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&sektion=4">bpf(4)</a> filter so that it only looks at TCP S/SA packets. From PR#3914.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&sektion=8">sendmail(8)</a> to version 8.13.1.
<li>More <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcmcia&sektion=4">pcmcia(4)</a> CIS fixes. From NetBSD.
<!-- ^ 20040918 -->
<li>Set the keyboard encoding earlier in /etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8">rc(8)</a>.
<li>Clean up state creation and destruction reference counting in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&sektion=4">pfsync(4)</a>, fixing problems with adaptive timeouts, max-states limits and rule leaks.
<li>Fix a segfault in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hack&sektion=6">hack(6)</a> (PR#3923).
<li>Reset MINCLSIZE back to the old value so that clusters are created as soon as the packet is bigger than the standard header size. This is a conservative measure for this release.
<li>More signal flag race fixes, in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a> this time.
<li>Don't ignore next-payload type NAT-OA in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a>.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> etc. warn about use of the deprecated @dirrm keyword.
<!-- ^ 20040917 -->
<li>Handle route labels in RTM_CHANGE messages.
<li>In the installer, set the console device speed before selecting it as the console, unbreaking Soekris boxes when booted without a cable attached.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&sektion=8">dhcpd(8)</a> calling <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inet_ntoa&sektion=3">inet_ntoa(3)</a> twice per log message.
<li>Handle '%ll' with positional arguments correctly in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=printf&sektion=3">*printf(3)</a>.
<li>Don't remove a cloned peer immediately when it goes back to IDLE, keep it around for a while. That way, if it went away because a capabilities negotiation failed, it doesn't come back later with the same (incompatible) capabilities and so fail again.
<li>Unbreak <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=MD5FileChunk&sektion=3">MD5FileChunk(3)</a> when passed a zero length, and so make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=MD5File&sektion=3">MD5File(3)</a> work again.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a> print the th_seq field from truncated TCP headers, e.g. in an icmp frag-needed-but-DF-set error.
<li>Give TCP some extra smarts (SS_ISSENDING) so that it doesn't send partial segments when the socket layer is still busy sending to it. Inspired by FreeBSD and NetBSD.
<li>New '-T tcp' button for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a> to force interpretation as TCP.
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a> about NFSv3.
<li>Correct an off-by-one in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fmt_scaled&sektion=3">fmt_scaled(3)</a>, allowing it to show 1099512676352 == 2.0T properly.
<li>Fix more signal flag races, this time in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=comsat&sektion=8">comsat(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rpc.rstatd&sektion=8">rpc.rstatd(8)</a>.
<li>Drop the 'fallback interface' code from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&sektion=8">dhcpd(8)</a>, and store enough state to send a relayed request back to the right place.
<li>Fix an off_t-&gt;int truncation in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rwhod&sektion=8">rwhod(8)</a>, found by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lint&sektion=1">lint(1)</a>.
<li>Add some additional <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcmcia&sektion=4">pcmcia(4)</a> CIS sanity checks.
<!-- ^ 20040916 -->
<li>Several manual page fixes.
<li>Fix a stack of compiler warnings in libkvm.
<li>Restore <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hotplugd&sektion=8">hotplugd(8)</a>'s ability to handle events queued before the daemon starts.
<li>New -Dvar=value option for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_create&sektion=1">pkg_create(1)</a>.
<li>Don't use a double where an int will do in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&sektion=8">sshd(8)</a>.
<li>Add a negative index check in the hardware sensor <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=3">sysctl(3)</a> handler.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount&sektion=8">mount(8)</a> dump attribute caching parameters in verbose mode.
<li>Fix races on the signal flags in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&sektion=8">inetd(8)</a>.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_nfs&sektion=8">mount_nfs(8)</a>'s noac option turn attribute caching off instead of on.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&sektion=8">rdate(8)</a> accept NTP responses with stratum 0.
<li>A bunch of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lint&sektion=1">lint(1)</a>-inspired cleanup in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a>.
<!-- ^ 20040915 -->
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> etc. about GNU info directories.
<li>Remove all use of system() in favour of System()/VSystem() in the package tools.
<li>Fix a file descriptor leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=df&sektion=1">df(1)</a>.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> complain when configuration files can't be installed.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> etc., use the uid/gid cache module and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=perl&sektion=1">perl(1)</a>'s own chown() function instead of system('chown',...).
<li>Change arg 4 of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kvm_openfiles&sektion=3">kvm_openfiles(3)</a> to unsigned so that KVM_NO_FILES is in range.
<li>Add mtree and uid/gid cache modules and an error wrapper to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> etc.
<li>Remove a gcc-specific constructs from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&sektion=8">inetd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&sektion=8">syslogd(8)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>, treat ENOBUFS from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmsg&sektion=2">sendmsg(2)</a> like EAGAIN and retry later.
<li>Add support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree&sektion=8">mtree(8)</a> to the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> framework.
<li>A bunch of de<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lint&sektion=1">lint(1)</a>ing, especially signal handlers with unused signo, and other unused variables.
<li>3.6 -&gt; 3.6-current.
<!-- ^ 20040914 -->
</ul>
<p>

このリストは、そのほとんどが機種に依存しない変更点について記載したものです。特定の
機種に依存する変更点のリストについては、その機種のページをチェックしてみてください。
もし、そちらにリストされた変更点がない場合は、(1) 変更点がドキュメント化されていな
い &nbsp; か、(2) こちらの方に記載されている &nbsp; かのいずれかでしょう。<br><br>

<hr>
<p>
<h3>
他のリリースの変更点については、こちらをご覧ください。</a><br>
<a href="../plus20.html">2.0</a>、
<a href="../plus21.html">2.1</a>、
<a href="../plus22.html">2.2</a>、
<a href="../plus23.html">2.3</a>、
<a href="../plus24.html">2.4</a>、
<a href="../plus25.html">2.5</a>、
<a href="../plus26.html">2.6</a>、
<a href="../plus27.html">2.7</a>、
<a href="../plus28.html">2.8</a>、
<a href="plus29.html">2.9</a>、
<a href="plus30.html">3.0</a>、
<a href="plus31.html">3.1</a>、
<a href="plus32.html">3.2</a>、
<a href="plus33.html">3.3</a>、
<a href="plus34.html">3.4</a>、
<a href="plus35.html">3.5</a>、
<a href="plus36.html">3.6</a>。
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="../back.gif" border=0 alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: plus.html,v 1.937 ]
$Translation: plus.html,v 1.80 2005/01/27 21:56:28 euske Exp $
-->
$OpenBSD: plus.html,v 1.68 2005/01/28 14:07:57 saad Exp $
</small>

</body>
</html>
