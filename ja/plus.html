<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD-current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD-current changes">
<meta name="keywords" content="openbsd,current,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2002 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">OpenBSD 3.3 と OpenBSD-current との間の変更点</font></h2>
<hr>

<p>
以下は、機種に依存しない主な変更点の部分的なリストで、これらは、
皆さんがかなり頻繁に問い合わされる変更点でもあります。ports に
関する変更も行われており、それらについては、ときどき、それぞれの
<a href="plat.html">機種</a>に関するページに記載されています。

<p>
<a href="ports.html">ports</a> コレクションの変更点については、
<a href="../portsplus/index.html">ここ</a>に記述されています。

<p>
注: <font color="#e00000">パッチの存在する問題については、朱書きで記されています。</font>

<p>
<h3>
他のリリースの変更点については、こちらをご覧ください。</a><br>
<a href="../plus20.html">2.0</a>、
<a href="../plus21.html">2.1</a>、
<a href="../plus22.html">2.2</a>、
<a href="../plus23.html">2.3</a>、
<a href="../plus24.html">2.4</a>、
<a href="../plus25.html">2.5</a>、
<a href="../plus26.html">2.6</a>、
<a href="../plus27.html">2.7</a>、
<a href="../plus28.html">2.8</a>、
<a href="plus29.html">2.9</a>、
<a href="plus30.html">3.0</a>、
<a href="plus31.html">3.1</a>、
<a href="plus32.html">3.2</a>、
<a href="plus33.html">3.3</a>。
<br>
</h3>

<p>
<h3><font color="#0000e0">私たちは OpenBSD-current 上で作業しています。</font></h3><p>
以下のリストは、5 月 2 日までに加えられた (ほとんど) すべての変更を要約したものです。
<p>

<ul>
<!-- ^ 20030503 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=what&amp;sektion=1">what(1)</a> をさらに POSIX 準拠に。
<!-- XXX i386 pmap の発見的なコミット。「助けて」メールを mickey@ に送信。 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skeyaudit&amp;sektion=1">skeyaudit(1)</a> の -a モードにおけるファイルディスクリプタのリークを除去し、stdin、stdout および stderr に関する、さらなる偏執狂的修正を実施。
<li>Doug Gwyn の移植可能な <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=alloca&amp;sektion=3">alloca(3)</a> をアセンブラではないバージョンがまだ存在するプラットフォームに追加し、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a> の alloca() の代わりに使用。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&amp;sektion=4">pciide(4)</a> で、非常に改善された SIS チップセットサポートを追加。
<!-- ^ 20030502 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=eso&amp;sektion=4">eso(4)</a> が sparc64 および (おそらく) macppc で動くように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnode&amp;sektion=9">vnode(9)</a> に対する多数の修正および追加。詳細は<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/kern/vfs_subr.c#rev1.90">チェックインのコメント</a>を参照。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lynx&amp;sektion=1">lynx(1)</a> を IPv6 サポートを含む 2.8.4release, patchset 1d に更新。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> のなりすまし防止ルールがラベルを持つことを許容。
<!-- ^ 20030501 -->
<li>chroot 環境下での実行において、シェアードモジュール用に、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apachectl&amp;sektion=8">apachectl(8)</a> が壊れずに再起動できるようにする試みの継続。
<li>知らないものとの比較を無視する試みではなく、知っているものだけを比較することで、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck_ffs&amp;sektion=8">fsck_ffs(8)</a> の前方互換性を改善。
<li>NetBSD エミュレーション下で、新たに重要度の下がった omsync() が動くように。
<li>安全な文字列関数のための継続的な戦いのすべての部分で、いくつかの <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strvis&amp;sektion=3">strvis(3)</a> を <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strnvis&amp;sektion=3">strnvis(3)</a> に変更。
<li>MySQL のクラッシュの原因となる、いくつかの pthread のシグナルのバグを修正 (PR#3178, PR#3238)。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> のテーブルの anchor へのロードを許容。表示およびフラッシュ以外の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> のテーブルオプションは -a に忠実に。
<!-- ^ 20030430 -->
<li>スタティックにリンクされたプログラムから呼び出された場合に、libc 中のダイナミックリンカスタブ関数が -1 を返すように。
<li>ターゲットのアーキテクチャがシェアードライブラリをサポートしている場合にのみ、シェアード版の libXv を構築。
<li>omsync() システムコールを COMPAT_25 のあいまいさに委ねるように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_nfs&amp;sektion=8">mount_nfs(8)</a> への noac オプションの解析を修正。
<li>netinet/tcp_input.c で、デッドロック回避のためのバグ修正の際に組み込まれ、積年のタイポを修正 (TCP/IP Illustrated 第 2 巻の図 28.30)。
<li>モジュールの二重ロードによってシステムクラッシュを発生させていた <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lkm&amp;sektion=4">lkm(4)</a> のバグを修正。
<!-- ^ 20030429 -->
<li>ELF の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dlfcn&amp;sektion=3">dlfcn(3)</a> 呼び出しをスレッドセーフに。
<li>ports の支援のため、/usr/local/lib/X11/fonts を <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fontconfig&amp;sektion=3">fontconfig(3)</a> の検索リストに追加。
<li>いくつかの欠落していた X サーバの鍵の記述を追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a> の持つ <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mmap&amp;sektion=2">mmap(2)</a> のシグネチャーの変更を再導入し、古いシステムコールを omquery() にもう一度リネーム。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skeyaudit&amp;sektion=1">skeyaudit(1)</a> の -a モードで、鍵ファイルを一度だけクローズ。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5&amp;sektion=1">md5(1)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd-setup&amp;sektion=8">spamd-setup(8)</a> で、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=exit&amp;sektion=3">exit(3)</a> の代わりに main() から戻るように。
<li>KerberosIV の、さらにいくつかの際限のない <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sscanf&amp;sektion=3">sscanf(3)</a> 呼び出しを修正。なおも続く。
<li>競合状態の危険性回避のため、procfs の vnode の処理中に、早期にロックを行うように。
<!-- ^ 20030428 -->
<li>XFree の wsfb ドライバの潜在的な二重解放の危険性を除去。
<li>anchor サポートのための <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> のテーブル構造体を用意。
<li>sys/dev で、多数の文字列のクリーンアップを実施。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> の fifo 'C set' コマンドを修正 (PR#3148)。
<!-- ^ 20030427 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rpcgen&amp;sektion=1">rpcgen(1)</a> で、いくつかの文字列長の推測作業を除去するために <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strdup&amp;sektion=3">strdup(3)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=asprintf&amp;sektion=3">asprintf(3)</a> を使用。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rpc.yppasswdd&amp;sektion=8">rpc.yppasswdd(8)</a> で、*printf() の %u 用に十分な空間を割り当て。
<li>libXp のシェアードライブラリの依存関係の正常化。
<li>ディレクトリのリネームの際の fat32 ファイルシステムへの悪影響を除去。
<!-- ^ 20030426 -->
<li>NetBSD から移植された、新しい sysctl hw.sensor インターフェイスで使用するための、新しい <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lm&amp;sektion=4">lm(4)</a> (National Semiconductor LM78、LM79 およびその互換チップ) および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=viaenv&amp;sektion=4">viaenv(4)</a> (VT82C686A サウスブリッジ) ハードウェアモニタドライバを追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=funopen&amp;sektion=3">funopen(3)</a> の定義がそのプロトタイプにマッチするように (PR#3236)。
<li>最近の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a>-uses-mmap() API の変更を取り消し。
<li>ハードウェアモニタリングセンサ用に、新しい <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=3">sysctl(3)</a> にノード hw.sensors を追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=asprintf&amp;sektion=3">asprintf(3)</a> の失敗が <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mktemp&amp;sektion=1">mktemp(1)</a> の一時ファイル名を上書き破壊することはないという仮定を行わないように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inet_net_pton&amp;sektion=3">inet_net_pton(3)</a> で IPv4 の場合、すべてのアドレスクラスについて同じ方法でネットマスクを推論 (たとえば、マルチキャストネットワークでは常に */4 と仮定しない、など)。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> で、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=asprintf&amp;sektion=3">asprintf(3)</a> をより移植し易いものへの改造と、その -1 に対する戻り値をチェック。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=edquota&amp;sektion=8">edquota(8)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tn3270&amp;sektion=1">tn3270(1)</a> の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sscanf&amp;sektion=3">sscanf(3)</a> の文字列に対するサイズを追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a> の関数のシグネチャーが <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mmap&amp;sektion=2">mmap(2)</a> のそれにマッチするように。
<li>手動で指定された範囲の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> の NAT プロキシポートに対する割り当ての修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> で、NAT プロキシの仕様の第二ポートが指定されている場合に、それを正確にコピー。
<!-- ^ 20030425 -->
<li>AFS ライブラリの <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&amp;sektion=3">strlcpy(3)</a> の不正な境界を修正 (PR#3228)。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pdisk&amp;sektion=8&amp;arch=mac68k">pdisk(8/MAC68K)</a> で、いくつかのバッファ長問題を修正するため、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=asprintf&amp;sektion=3">asprintf(3)</a> を使用。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute&amp;sektion=8">traceroute(8)</a> のパケットサイズオプションを取り扱う場合に、正しい変数の限界をチェック。
<li>会話的にポリシーを生成する場合に、EOF の検出を適正に。
<!-- ^ 20030424 -->
<li>起動時の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflogd&amp;sektion=8">pflogd(8)</a> による syslog メッセージの生成をストップ。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5&amp;sektion=1">md5(1)</a> の、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strchr&amp;sektion=3">strchr(3)</a> を <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strrchr&amp;sektion=3">strrchr(3)</a> と交換。
<li>アップグレードの際、/altroot ファイルシステムを 'noauto' のようなものと仮定し、アップグレードの fstab からそれを除外。
<!-- ^ 20030423 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lynx&amp;sektion=1">lynx(1)</a> のニュースサーバ名をファイルから読み込む際に適正な境界チェックを実行。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a> の glob は、ティルダと大括弧の拡張を同様に実行。
<!-- ^ 20030422 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gre&amp;sektion=4">gre(4)</a> の IP 入力で、ヘッダが mbuf の最初の領域に格納されていることを仮定する代わりに <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=m_pullup&amp;sektion=9">m_pullup(9)</a> を使用。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1">make(1)</a> は '--' の後で、コマンドライン引数の解釈を停止するように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1">make(1)</a> で中括弧を拡張する際、より良い境界チェックを実行。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a> で、load_size オブジェクトのフィールドに負の値を設定するのは間違っていると思われるため、これを設定しないように。
<!-- ^ 20030421 -->
<li>Kelberos V の realm を追加する際に、名前の最後の NULL 文字もコピー。
<!-- ^ 20030420 -->
<li>authpf.conf がない場合に、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8">authpf(8)</a> は終了すべきなので、そのように変更 (PR#3217)。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ubsec&amp;sektion=4">ubsec(4)</a> の出力統計情報を修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> をその CVS に同期し、バージョンを 1.6.7p4 に更新。
<li>libwrap で、いくつかの typedef を完全主義で変更。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rd&amp;sektion=4">rd(4)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnd&amp;sektion=4">vnd(4)</a> で、文字列のクリーンアップと特別な偏執狂的修正。
<li>文字列クリーンアップ運動推進中。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&amp;sektion=4">dc(4)</a> に Davicom DM9009 チップのサポートを追加。
<!-- ^ 20030419 -->
<li>MAP_FIXED が要求された場合に、これが有効になっていなければ、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a> が (ENOMEM の代わりに) EINVAL を返すようにすることで、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a> をより一層支援。
<li>読み込み可能なディレクトリに対して、自動的に実行権を付与するための新しい -x オプションを <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_msdos&amp;sektion=8">mount_msdos(8)</a> に追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a> の新しい <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a> の部分の問題を修正し、Emacs 21 が異常終了しないように。
<!-- ^ 20030418 -->
<li>IPv6 の終了点だけが指定された場合にも <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tun&amp;sektion=4">tun(4)</a> が動作するように。
<li>4.3BSD のさらなるコマンドをいくつかのフロッピーで使用するため、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a> の代わりに追加。more は less。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&amp;sektion=8">cron(8)</a> のいくつかの戻り値を char から int に変更。
<!-- ^ 20030417 -->
<li>新しい <a href="http://marc.theaimsgroup.com/?l=openbsd-misc&m=105056000801065&w=2">i386 W^X</a> の仕組みをサポートするための変更。
<li>i386 が ELF に<a href="http://marc.theaimsgroup.com/?l=openbsd-misc&m=105055555830978&w=2">移行</a>。現時点ではバイナリアップグレードのみ可能。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a> で新しい <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a> システムコールを使用。現時点では i386 のみ。
<li>インストーラが 'route show' の代わりに 'route -n show' を使用することで、歯ぎしりしたくなるような遅延を回避。
<li>カーネルの ELF ローダで、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a> が既に使用中の領域を自分自身で上書きしてしまわないよう、確実にするため <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uvm&amp;sektion=9">uvm(9)</a> を使用。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a> のクラッシュの原因となるバッファオーバーフローを修正 (PR#3090)。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apachectl&amp;sektion=8">apachectl(8)</a> は <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;sektion=8">rc.conf(8)</a> からの $httpd_flags に忠実に。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_mfs&amp;sektion=8">mount_mfs(8)</a> の競合状態を除去。
<!-- ^ 20030416 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a> のいくつかの割り当てのバグを修正。
<li>カーネル中のスタンドアローンの ISO9660 ドライバで、パス名の余分なスラッシュを除去。これにより、CD の root からのファイルのロードが可能に。
<li>サーバのシャットダウンまたはリスタート時に、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">httpd(8)</a> のシェアードモジュールをアンロードする行をアンコメント。
<li>引き続き、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=named&amp;sektion=8">named(8)</a> の多数の文字列を修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> が基本的な HFSC の統計情報を表示可能に。
<li>elf2ecoff(1) の大規模なクリーンアップ。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rip6query&amp;sektion=8">rip6query(8)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route6d&amp;sektion=8">route6d(8)</a> で、正しい <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getaddrinfo&amp;sektion=3">getaddrinfo(3)</a> のバッファサイズを割り当て。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=audioctl&amp;sektion=1">audioctl(1)</a>、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=size&amp;sektion=1">size(1)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> で、ポインタの計算用に <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=snprintf&amp;sektion=3">snprintf(3)</a> の戻り値を使用しないように。
<!-- ^ 20030415 -->
<li>いくつかのデバイスにおける問題のため、「ATAPI デバイス検出の際の大きな遅延」の修正を取り消し。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp&amp;sektion=1">sftp(1)</a> で欠落していた <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=globfree&amp;sektion=3">globfree(3)</a> を追加。
<li>*printf() の整数から文字列への変換のための、多数の短いスペースの割り当てを修正。
<li>XFree86 4.3.0 のマージによる <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm&amp;sektion=1">xdm(1)</a> の OpenBSD のロゴのいくつかの問題を修正。
<li>パケットの送信用キューへのキューイングに成功したことを確認できるまで、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping&amp;sektion=8">ping(8)</a> のシーケンス番号を増加させないように。
<li>プロセスのタイトルに <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=at&amp;sektion=1">at(1)</a> のジョブ番号を含めるように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a> のヘルプ文をファイルに分離し、ブートフロッピーの構築サイズを減少。
<li>ssh-over-<a href="http://www.sctp.de/sctp.html">sctp</a> を容易にするため、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> がソケットを生成するためのハードコードされた SOCK_* 型の使用を停止。
<li>クリーンシャットダウン時に <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> はその fifo および pid ファイルを unlink するように (PR#3199)。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping&amp;sektion=8">ping(8)</a> が -s0 オプションで長さ 0 のパケット送信を許容。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> で、いくつかの <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=snprintf&amp;sektion=3">snprintf(3)</a> のバッファ長を修正。
<!-- ^ 20030414 -->
<li>メモリマップを置く場所の (特に <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a> 用の) ヒントを用意するため、新しい <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a> システムコールを追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&amp;sektion=1">systrace(1)</a> で <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=open&amp;sektion=2">open(2)</a> フラグの表示の際の最後の NULL 文字用に確実にスペースを残すように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=extattrctl&amp;sektion=8">extattrctl(8)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mopd&amp;sektion=8">mopd(8)</a> の間違ったフォーマット文字列を修正。
<li>長い uptime のマシンでの <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=timeout_add&amp;sektion=9">timeout_add(9)</a> の回り込みを防止。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=grops&amp;sektion=1">grops(1)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a> のいくつかの不正な size_t の値を修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a> をバージョン 381 に更新。
<!-- ^ 20030413 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> が <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setrlimit&amp;sektion=2">setrlimit(2)</a> を使用してファイルディスクリプタのリミットを設定するように。
<li>他のプログラムへのバンドリングを促進するため、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcat&amp;sektion=3">strlcat(3)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&amp;sektion=3">strlcpy(3)</a> のライセンスを緩和。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> スタイルの HFSC キューイングの最初のサポート。
<li>最近の 'packages のように見える X (X looks like a package)' 関連のものを取り消し。
<li>XFree86-current から expat-1.95.4 をマージ。
<li>ATAPI デバイス検出の際の大きな遅延を修正。
<!-- ^ 20030412 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> の Makefile が LDSTATIC フラグに忠実に。
<li>一連の問題を解決するため、キュー ID の割り当てを <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> からカーネルに移動。
<!-- ^ 20030411 -->
<li>スキャンすべき全プロセスリスト中にゾンビはいないため、PR#2230 の以前の修正は意味を持たず、これを取り消し。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&amp;sektion=4">wi(4)</a> デバイスの失敗時にバス空間を割り当て解除。
<li>ステータス行に十分なスペースが残っている場合にのみ、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a> の -d プロンプトを表示するように (PR#3189)。
<!-- ^ 20030410 -->
<li>ファイルシステムのマウント時のプロセスの root と作業ディレクトリの据え付け時に、ゾンビをそのままにしておくように (PR#2230)。 <!-- Yes, #2230, not #2030 as the committer said. Grr. -->
<li>カーネルの <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malloc&amp;sektion=9">malloc(9)</a> 診断コード中のひとつ違い (off-by-one) エラーを修正。
<li>X サーバの xkb メモリを正しく初期化。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xman&amp;sektion=1">xman(1)</a> 中のいくつかのファイルディスクリプタのリークを修正 (PR#3186)。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a> が新しいセンチネル情報を割り当てる際の壊れた sizeof() を修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> の 'missing CRL dir' 警告メッセージをデバッグメッセージに降格。 <!-- Someone must really hate that warning. -->
<li>カーネル中の pf_state 構造体は、現在はルールと anchor の両方を指し示すので、anchor 上に生成されたステータスがルールオプションを適切に利用可能に。
<li>4.4BSD.dist ファイル中に記述の存在する /etc/isakmpd/crls ディレクトリが存在していないと言って <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> が警告を出力しないよう、このディレクトリを生成。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> で、オプションの解析前に行末の空白を除去 (OpenSSH バグ <a href="http://bugzilla.mindrot.org/show_bug.cgi?id=528">528</a>)。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> の Kerberos IV サポートを無効化。
<!-- ^ 20030409 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> 中の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=select&amp;sektion=2">select(2)</a> のエラーハンドリングを修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a> は、前回の 'M-x compile' コマンドを記憶しておくように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">httpd(8)</a> の dbm の処理に欠落していた free() を追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=osiop&amp;sektion=4">osiop(4)</a> に対する、さらなる修正。
<!-- ^ 20030408 -->
<li>いくつかの古いスタイル (user.group) の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chown&amp;sektion=8">chown(8)</a> を POSIX スタイルの user:group に変更。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=savecore&amp;sektion=8">savecore(8)</a> の NULL 被参照を修正。
<li>いくつかの欠落していた NetBSD の著作権情報を <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a> に追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ktutil&amp;sektion=8">ktutil(8)</a> がネットワーク越えでも正常に稼働するように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adventure&amp;sektion=6">adventure(6)</a> の文字列のハンドリング (今回は str[ln]* だけではなく) の改善。
<li>ports は XF4 のインストールのためのチェックを行うことができるので、偽の packages 情報を追加。
<li>XFree 配布スクリプトで <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">ksh(1)</a> を <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1">csh(1)</a> の代わりに使用。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> は、不正な ICMP タイプ (&gt;40) およびコード (&gt;255) を排除するように。
<li>取得すべきパケット状態カウンタの不正な状態の原因となっていた、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> の新しい鍵再生成コードのタイポを修正。
<!-- ^ 20030407 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> を 1.6.7p3 に更新。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kvm_mkdb&amp;sektion=8">kvm_mkdb(8)</a> の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&amp;sektion=3">strlcpy(3)</a> のバッファ長を適正に取り扱うように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=osiop&amp;sektion=4">osiop(4)</a> に対する多数の修正。
<li>(文字列関数の修正の一環として) <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sort&amp;sektion=1">sort(1)</a> で、古いスタイルの - および + のフォーマット指定子のハンドリングを改善。
<!-- ^ 20030406 -->
<li>disklabel の d_packname および d_typename フィールドが NULL ターミネイトされたフィールドではない場合に、そうであるとして仮定しないように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lam&amp;sektion=1">lam(1)</a> の境界チェックのひとつ違い (off-by-one) エラーを修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> の CIDR マスクの解析部を単純化。
<li>指定さえたインターフェイスにのみ適用するための <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> のキュースペックを許容するため、'queue foo on $i_bar' の文法を追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_linux&amp;sektion=8">compat_linux(8)</a> における termios のサポートする速度のリストに 230400 を追加。
<li>多くの NULL テストを省略できるよう、ルールベースの先頭の暗黙の 'pass all' に従うパケットの通過許可時にデフォルトルールを使用。
<li>`デフォルト' の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> ルールを追加し、デフォルトのタイムアウトを格納するために使用。
<li>XFree86 4.3.0 のマージの際に欠落していた、いくつかの更新されたバージョンのシェアードライブラリを追加。
<!-- ^ 20030405 -->
<li>多数の文字列関数をすべてのツリーにわたって修正。
<li>OpenSSL の ASN.1 解析部の不正な境界チェックを修正。
<!-- ^ 20030404 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a> への以前の realloc() の変更を取り消し。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sectok_fmt_fid&amp;sektion=3">sectok_fmt_fid(3)</a> が文字列長パラメータを取るよう更新され、新しい API に合わせて libsectok のメジャーバージョンを更新。
<li>XFree86 4.3.0 のマージに伴ない、ports のライブラリは結局 /usr/local/lib/X11 に入れられることになったので、付加的な記述を追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> を 1.6.7p2 に更新。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=user&amp;sektion=8">user(8)</a> の空のグループテストを修正 (PR#3178)。
<li>PRIQ キュー ID の割り当てが改善され、異なるインターフェイス上の同一優先度のキューが正しく動くように。
<!-- ^ 20030403 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a> のメモリリークを修正するため、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=realloc&amp;sektion=3">realloc(3)</a> を使用。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipcomp&amp;sektion=4">ipcomp(4)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4">ipsec(4)</a> のいくつかのクリーンアップ。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> に欠落していた初期化を追加 (OpenSSH バグ <a href="http://bugzilla.mindrot.org/show_bug.cgi?id=526">#526</a>)。
<li>インターフェイスが <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=altq&amp;sektion=9">altq(9)</a> をサポートしない場合、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> はエラーメッセージ中にインターフェイス名を表示するように。
<li>現在の secsh の新しいモード案に従って、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> に自動鍵再生成を追加し、いくつかの鍵再生成バグを修正。
<!-- ^ 20030402 -->
<li>直接モードの <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&amp;sektion=4">bpf(4)</a> のイベントにおける <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kqueue&amp;sektion=2">kqueue(2)</a> の通知を修正 (PR#3175)。
<li>XFree86 4.3.0 をマージ。
<li>ある種の過剰な偏執狂的挙動を修正するため、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> をバージョン 1.6.7p1 に更新。
<li>OpenSSH のバージョンが 3.6 に増加。<br>
    <a href="stable.html"><font color="#00b000">[安定版への適用]</font></a>
<!-- ^ 20030401 -->
<li>icmp6 の mbuf のリークを修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a> は、環境変数が unset されたかのように、空の環境変数を仮定。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipcomp&amp;sektion=4">ipcomp(4)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4">ipsec(4)</a> の暗号化エラーのハンドリングの際の、いくつかのメモリ解放後のアクセス (use-after-FREE) を修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipcomp&amp;sektion=4">ipcomp(4)</a> に欠落していた splx() を追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setusercontext&amp;sektion=3">setusercontext(3)</a> に対するクリーンアップと付加的な偏執狂的改修。
<li>カーネルの <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> ルール構造体を参照する状態がない場合にのみ、それを削除。
<!-- ^ 20030331 -->
<li>TCP_DEBUG が定義されている場合に、有用なように netinet/tcp_debug.c のコンパイルを許容。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahc&amp;sektion=4">ahc(4)</a> のデュアルチャネル 7899 カードの検出を修正。
<li>カーネル内でデバイス名を組み立てる際に、手動ではなく snprintf を使用。
<li>ユーザにより、何らかの理由で <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=1">passwd(1)</a> がアボートさせられた場合に、より一貫性のあるメッセージを出力するように。
<li>なおも残る、ツリーからの strcpy、sprintf および strcat 呼び出しの<a href="http://marc.theaimsgroup.com/?l=openbsd-misc&m=104958817430379&w=2">根絶</a>のための作業を開始。
<!-- ^ 20030330 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> のログ機能の不具合を修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&amp;sektion=8">sendmail(8)</a> のアドレス解析部のバッファオーバーフローを修正するため、8.12.9 に更新。この修正は OpenBSD 3.3 の CD に反映されるので、3.3 の errata ではないことに注意。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iha&amp;sektion=4">iha(4)</a> に対するさらなる修正。
<!-- ^ 20030329 -->
<li>ストリップされた実行形式の pmdb がコアを吐かないように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> にマッチしたリストをログ出力中に表示するように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> は、うす汚ないスパマーによって浪費させられた時間がどれほどのものか、厳密に報告するように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pwd_mkdb&amp;sektion=8">pwd_mkdb(8)</a> に欠落していた <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strdup&amp;sektion=3">strdup(3)</a> のエラーチェックを追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login_passwd&amp;sektion=8">login_passwd(8)</a> を setuid(root) から setuid(_shadow) に変更。
<li>OCHIO* バイナリ互換のためのハックを <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ch&amp;sektion=4">ch(4)</a> から除去。 <!-- 2002/10/17 のチェックインでこれについて警告済 -->
<!-- ^ 20030328 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&amp;sektion=4">ccd(4)</a> デバイスのサイズを受け取った場合に、そのオープンを試行する前にデバイスが初期化済かどうかをチェック。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=3">sysctl(3)</a> で制御可能なカーネルの <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a> のリストに USER_LDT を追加。
<li>SMP ブランチを 3.3 に同期。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=osiop&amp;sektion=4">osiop(4)</a> との hard-won の実績をベースとした <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iha&amp;sektion=4">iha(4)</a> の REQUEST_SENSE ハンドリング。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt&amp;sektion=3">getopt(3)</a> を呼び出す場合には、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpr&amp;sektion=1">lpr(1)</a> の -q オプションを期待するように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpr&amp;sektion=1">lpr(1)</a> の -f および -h オプションのハンドリングを修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> の不正な cbq および priq フラグのエラーハンドリングを改善。
<li>3.3 -> 3.3-current。
<!-- ^ 20030327 -->
</ul>
<p>

このリストは、そのほとんどが機種に依存しない変更点について記載したものです。特定の
機種に依存する変更点のリストについては、その機種のページをチェックしてみてください。
もし、そちらにリストされた変更点がない場合は、(1) 変更点がドキュメント化されていな
い &nbsp; か、(2) こちらの方に記載されている &nbsp; かのいずれかでしょう。<br><br>

<hr>
<p>
<h3>
他のリリースの変更点については、こちらをご覧ください。</a><br>
<a href="../plus20.html">2.0</a>、
<a href="../plus21.html">2.1</a>、
<a href="../plus22.html">2.2</a>、
<a href="../plus23.html">2.3</a>、
<a href="../plus24.html">2.4</a>、
<a href="../plus25.html">2.5</a>、
<a href="../plus26.html">2.6</a>、
<a href="../plus27.html">2.7</a>、
<a href="../plus28.html">2.8</a>、
<a href="plus29.html">2.9</a>、
<a href="plus30.html">3.0</a>、
<a href="plus31.html">3.1</a>、
<a href="plus32.html">3.2</a>、
<a href="plus33.html">3.3</a>。
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="../back.gif" border=0 alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: plus.html,v 1.876 ]
<br>
$Translation: plus.html,v 1.52 2003/05/10 01:03:41 toshi Exp $
<br>
$OpenBSD: plus.html,v 1.41 2003/05/10 13:16:11 jufi Exp $
</small>

</body>
</html>
