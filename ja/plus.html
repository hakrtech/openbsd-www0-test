<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD-current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD-current changes">
<meta name="keywords" content="openbsd,current,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2002 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">OpenBSD 3.3 と OpenBSD-current との間の変更点</font></h2>
<hr>

<p>
以下は、機種に依存しない主な変更点の部分的なリストで、これらは、
皆さんがかなり頻繁に問い合わされる変更点でもあります。ports に
関する変更も行われており、それらについては、ときどき、それぞれの
<a href="plat.html">機種</a>に関するページに記載されています。

<p>
<a href="ports.html">ports</a> コレクションの変更点については、
<a href="../portsplus/index.html">ここ</a>に記述されています。

<p>
注: <font color="#e00000">パッチの存在する問題については、朱書きで記されています。</font>

<p>
<h3>
他のリリースの変更点については、こちらをご覧ください。</a><br>
<a href="../plus20.html">2.0</a>、
<a href="../plus21.html">2.1</a>、
<a href="../plus22.html">2.2</a>、
<a href="../plus23.html">2.3</a>、
<a href="../plus24.html">2.4</a>、
<a href="../plus25.html">2.5</a>、
<a href="../plus26.html">2.6</a>、
<a href="../plus27.html">2.7</a>、
<a href="../plus28.html">2.8</a>、
<a href="plus29.html">2.9</a>、
<a href="plus30.html">3.0</a>、
<a href="plus31.html">3.1</a>、
<a href="plus32.html">3.2</a>、
<a href="plus33.html">3.3</a>。
<br>
</h3>

<p>
<h3><font color="#0000e0">私たちは OpenBSD-current 上で作業しています。</font></h3><p>
以下のリストは、4 月 12 日までに加えられた (ほとんど) すべての変更を要約したものです。
<p>

<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> が <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setrlimit&amp;sektion=2">setrlimit(2)</a> を使用してファイルディスクリプタのリミットを設定するように。
<li>他のプログラムへのバンドリングを促進するため、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcat&amp;sektion=3">strlcat(3)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&amp;sektion=3">strlcpy(3)</a> のライセンスを緩和。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> スタイルの HFSC キューイングの最初のサポート。
<li>最近の 'packages のように見える X (X looks like a package)' 関連のものを取り消し。
<li>XFree86-current から expat-1.95.4 をマージ。
<li>ATAPI デバイス検出の際の大きな遅延を修正。
<!-- ^ 20030412 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> の Makefile が LDSTATIC フラグに忠実に。
<li>一連の問題を解決するため、キュー ID の割り当てを <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> からカーネルに移動。
<!-- ^ 20030411 -->
<li>スキャンすべき全プロセスリスト中にゾンビはいないため、PR#2230 の以前の修正は意味を持たず、これを取り消し。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&amp;sektion=4">wi(4)</a> デバイスの失敗時にバス空間を割り当て解除。
<li>ステータス行に十分なスペースが残っている場合にのみ、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a> の -d プロンプトを表示するように (PR#3189)。
<!-- ^ 20030410 -->
<li>ファイルシステムのマウント時のプロセスの root と作業ディレクトリの据え付け時に、ゾンビをそのままにしておくように (PR#2230)。 <!-- Yes, #2230, not #2030 as the committer said. Grr. -->
<li>カーネルの <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malloc&amp;sektion=9">malloc(9)</a> 診断コード中のひとつ違い (off-by-one) エラーを修正。
<li>X サーバの xkb メモリを正しく初期化。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xman&amp;sektion=1">xman(1)</a> 中のいくつかのファイルディスクリプタのリークを修正 (PR#3186)。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a> が新しいセンチネル情報を割り当てる際の壊れた sizeof() を修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> の 'missing CRL dir' 警告メッセージをデバッグメッセージに降格。 <!-- Someone must really hate that warning. -->
<li>カーネル中の pf_state 構造体は、現在はルールと anchor の両方を指し示すので、anchor 上に生成されたステータスがルールオプションを適切に利用可能に。
<li>4.4BSD.dist ファイル中に記述の存在する /etc/isakmpd/crls ディレクトリが存在していないと言って <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> が警告を出力しないよう、このディレクトリを生成。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> で、オプションの解析前に行末の空白を除去 (OpenSSH バグ <a href="http://bugzilla.mindrot.org/show_bug.cgi?id=528">528</a>)。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> の Kerberos IV サポートを無効化。
<!-- ^ 20030409 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> 中の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=select&amp;sektion=2">select(2)</a> のエラーハンドリングを修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a> は、前回の 'M-x compile' コマンドを記憶しておくように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">httpd(8)</a> の dbm の処理に欠落していた free() を追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=osiop&amp;sektion=4">osiop(4)</a> に対する、さらなる修正。
<!-- ^ 20030408 -->
<li>いくつかの古いスタイル (user.group) の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chown&amp;sektion=8">chown(8)</a> を POSIX スタイルの user:group に変更。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=savecore&amp;sektion=8">savecore(8)</a> の NULL 被参照を修正。
<li>いくつかの欠落していた NetBSD の著作権情報を <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a> に追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ktutil&amp;sektion=8">ktutil(8)</a> がネットワーク越えでも正常に稼働するように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adventure&amp;sektion=6">adventure(6)</a> の文字列のハンドリング (今回は str[ln]* だけではなく) の改善。
<li>ports は XF4 のインストールのためのチェックを行うことができるので、偽の packages 情報を追加。
<li>XFree 配布スクリプトで <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">ksh(1)</a> を <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1">csh(1)</a> の代わりに使用。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> は、不正な ICMP タイプ (&gt;40) およびコード (&gt;255) を排除するように。
<li>取得すべきパケット状態カウンタの不正な状態の原因となっていた、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> の新しい鍵再生成コードのタイポを修正。
<!-- ^ 20030407 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> を 1.6.7p3 に更新。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kvm_mkdb&amp;sektion=8">kvm_mkdb(8)</a> の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&amp;sektion=3">strlcpy(3)</a> のバッファ長を適正に取り扱うように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=osiop&amp;sektion=4">osiop(4)</a> に対する多数の修正。
<li>(文字列関数の修正の一環として) <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sort&amp;sektion=1">sort(1)</a> で、古いスタイルの - および + のフォーマット指定子のハンドリングを改善。
<!-- ^ 20030406 -->
<li>disklabel の d_packname および d_typename フィールドが NULL ターミネイトされたフィールドではない場合に、そうであるとして仮定しないように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lam&amp;sektion=1">lam(1)</a> の境界チェックのひとつ違い (off-by-one) エラーを修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> の CIDR マスクの解析部を単純化。
<li>指定さえたインターフェイスにのみ適用するための <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> のキュースペックを許容するため、'queue foo on $i_bar' の文法を追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_linux&amp;sektion=8">compat_linux(8)</a> における termios のサポートする速度のリストに 230400 を追加。
<li>多くの NULL テストを省略できるよう、ルールベースの先頭の暗黙の 'pass all' に従うパケットの通過許可時にデフォルトルールを使用。
<li>`デフォルト' の <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> ルールを追加し、デフォルトのタイムアウトを格納するために使用。
<li>XFree86 4.3.0 のマージの際に欠落していた、いくつかの更新されたバージョンのシェアードライブラリを追加。
<!-- ^ 20030405 -->
<li>多数の文字列関数をすべてのツリーにわたって修正。
<li>OpenSSL の ASN.1 解析部の不正な境界チェックを修正。
<!-- ^ 20030404 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a> への以前の realloc() の変更を取り消し。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sectok_fmt_fid&amp;sektion=3">sectok_fmt_fid(3)</a> が文字列長パラメータを取るよう更新され、新しい API に合わせて libsectok のメジャーバージョンを更新。
<li>XFree86 4.3.0 のマージに伴ない、ports のライブラリは結局 /usr/local/lib/X11 に入れられることになったので、付加的な記述を追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> を 1.6.7p2 に更新。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=user&amp;sektion=8">user(8)</a> の空のグループテストを修正 (PR#3178)。
<li>PRIQ キュー ID の割り当てが改善され、異なるインターフェイス上の同一優先度のキューが正しく動くように。
<!-- ^ 20030403 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a> のメモリリークを修正するため、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=realloc&amp;sektion=3">realloc(3)</a> を使用。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipcomp&amp;sektion=4">ipcomp(4)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4">ipsec(4)</a> のいくつかのクリーンアップ。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> に欠落していた初期化を追加 (OpenSSH バグ <a href="http://bugzilla.mindrot.org/show_bug.cgi?id=526">#526</a>)。
<li>インターフェイスが <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=altq&amp;sektion=4">altq(4)</a> をサポートしない場合、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> はエラーメッセージ中にインターフェイス名を表示するように。
<li>現在の secsh の新しいモード案に従って、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> に自動鍵再生成を追加し、いくつかの鍵再生成バグを修正。
<!-- ^ 20030402 -->
<li>直接モードの <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&amp;sektion=4">bpf(4)</a> のイベントにおける <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kqueue&amp;sektion=2">kqueue(2)</a> の通知を修正 (PR#3175)。
<li>XFree86 4.3.0 をマージ。
<li>ある種の過剰な偏執狂的挙動を修正するため、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> をバージョン 1.6.7p1 に更新。
<li>OpenSSH のバージョンが 3.6 に増加。<br>
    <a href="stable.html"><font color="#00b000">[安定版への適用]</font></a>
<!-- ^ 20030401 -->
<li>icmp6 の mbuf のリークを修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a> は、環境変数が unset されたかのように、空の環境変数を仮定。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipcomp&amp;sektion=4">ipcomp(4)</a> および <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4">ipsec(4)</a> の暗号化エラーのハンドリングの際の、いくつかのメモリ解放後のアクセス (use-after-FREE) を修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipcomp&amp;sektion=4">ipcomp(4)</a> に欠落していた splx() を追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setusercontext&amp;sektion=3">setusercontext(3)</a> に対するクリーンアップと付加的な偏執狂的改修。
<li>カーネルの <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> ルール構造体を参照する状態がない場合にのみ、それを削除。
<!-- ^ 20030331 -->
<li>TCP_DEBUG が定義されている場合に、有用なように netinet/tcp_debug.c のコンパイルを許容。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahc&amp;sektion=4">ahc(4)</a> のデュアルチャネル 7899 カードの検出を修正。
<li>カーネル内でデバイス名を組み立てる際に、手動ではなく snprintf を使用。
<li>ユーザにより、何らかの理由で <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=1">passwd(1)</a> がアボートさせられた場合に、より一貫性のあるメッセージを出力するように。
<li>なおも残る、ツリーからの strcpy、sprintf および strcat 呼び出しの<a href="http://marc.theaimsgroup.com/?l=openbsd-misc&m=104958817430379&w=2">根絶</a>のための作業を開始。
<!-- ^ 20030330 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> のログ機能の不具合を修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&amp;sektion=8">sendmail(8)</a> のアドレス解析部のバッファオーバーフローを修正するため、8.12.9 に更新。この修正は OpenBSD 3.3 の CD に反映されるので、3.3 の errata ではないことに注意。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iha&amp;sektion=4">iha(4)</a> に対するさらなる修正。
<!-- ^ 20030329 -->
<li>ストリップされた実行形式の pmdb がコアを吐かないように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> にマッチしたリストをログ出力中に表示するように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> は、うす汚ないスパマーによって浪費させられた時間がどれほどのものか、厳密に報告するように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pwd_mkdb&amp;sektion=8">pwd_mkdb(8)</a> に欠落していた <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strdup&amp;sektion=3">strdup(3)</a> のエラーチェックを追加。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login_passwd&amp;sektion=8">login_passwd(8)</a> を setuid(root) から setuid(_shadow) に変更。
<li>OCHIO* バイナリ互換のためのハックを <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ch&amp;sektion=4">ch(4)</a> から除去。 <!-- 2002/10/17 のチェックインでこれについて警告済 -->
<!-- ^ 20030328 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&amp;sektion=4">ccd(4)</a> デバイスのサイズを受け取った場合に、そのオープンを試行する前にデバイスが初期化済かどうかをチェック。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=3">sysctl(3)</a> で制御可能なカーネルの <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a> のリストに USER_LDT を追加。
<li>SMP ブランチを 3.3 に同期。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=osiop&amp;sektion=4">osiop(4)</a> との hard-won の実績をベースとした <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iha&amp;sektion=4">iha(4)</a> の REQUEST_SENSE ハンドリング。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt&amp;sektion=3">getopt(3)</a> を呼び出す場合には、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpr&amp;sektion=1">lpr(1)</a> の -q オプションを期待するように。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpr&amp;sektion=1">lpr(1)</a> の -f および -h オプションのハンドリングを修正。
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> の不正な cbq および priq フラグのエラーハンドリングを改善。
<li>3.3 -> 3.3-current。
<!-- ^ 20030327 -->
</ul>
<p>

このリストは、そのほとんどが機種に依存しない変更点について記載したものです。特定の
機種に依存する変更点のリストについては、その機種のページをチェックしてみてください。
もし、そちらにリストされた変更点がない場合は、(1) 変更点がドキュメント化されていな
い &nbsp; か、(2) こちらの方に記載されている &nbsp; かのいずれかでしょう。<br><br>

<hr>
<p>
<h3>
他のリリースの変更点については、こちらをご覧ください。</a><br>
<a href="../plus20.html">2.0</a>、
<a href="../plus21.html">2.1</a>、
<a href="../plus22.html">2.2</a>、
<a href="../plus23.html">2.3</a>、
<a href="../plus24.html">2.4</a>、
<a href="../plus25.html">2.5</a>、
<a href="../plus26.html">2.6</a>、
<a href="../plus27.html">2.7</a>、
<a href="../plus28.html">2.8</a>、
<a href="plus29.html">2.9</a>、
<a href="plus30.html">3.0</a>、
<a href="plus31.html">3.1</a>、
<a href="plus32.html">3.2</a>、
<a href="plus33.html">3.3</a>。
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="../back.gif" border=0 alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: plus.html,v 1.871 ]
<br>
$Translation: plus.html,v 1.48 2003/04/15 03:02:47 toshi Exp $
<br>
$OpenBSD: plus.html,v 1.38 2003/04/15 17:16:33 jufi Exp $
</small>

</body>
</html>
