<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD Patch Branches</title>
<link rev=made href=mailto:www@openbsd.org>
<meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
<meta name="resource-type" content="document">
<meta name="description" content="stable">
<meta name="keywords" content="openbsd,anoncvs,updates,stable">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-1998 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color=#e00000>パッチブランチ</font><hr></h2>

<p>
<ul><h3>目次</h3>
<li><a href="#whatis">パッチブランチとは何ですか?</a>
<li><a href="#getting">パッチブランチの入手</a>
<li><a href="#building">パッチブランチからの構築</a>
</ul>
</p>
<hr>

<a name="whatis"></a>
<h3><font color=#0000e0>パッチブランチとは何ですか?</font></h3>

<p>
OpenBSD プロジェクトでは OpenBSD 2.7 以降, 重要なパッチと修正
(<a href="errata.html">errata</a> および, errata
に含まれていないような単純で明らかなもの)
を取り込んだソースツリーを提供するようになりました.
これは最新のソースと同じように <a href="anoncvs.html">CVS</a> 経由で
入手することができます.  つまり修正パッチを利用する方法には, 次の 3 種類があります.<p>
<ul>
<li>最新のリリースを使い, 手動で修正パッチを適用する.
<li><b>パッチブランチ</b>を利用する.  これには重要な修正パッチの大部分が含まれています.
<li><b>最新のソース</b>を利用する.  これには最新の機能すべてが含まれています.
</ul>
<p>
<a href="plus.html">日々の更新ログ</a>には, リリース後に作成され,
パッチブランチに取り込まれた修正パッチが書かれます.  一般的に, 公開された
<a href="errata.html">errata</a> はすべて, それが発行された時点から
48 時間以内にパッチブランチに取り込まれます. また, リリース後に作成されたその他の修正パッチも,
たとえば次のような条件が満たされていれば同様に取り込まれることがあります.
<ul>
<li>修正パッチが単純で短く, 100% 正しいことが明らかなもの.
<li>多くの人々に影響するバグによる errata の場合.  あるいは
    限られた人々に非常に大きな影響を与えるバグの修正は
    パッチブランチに取り込まれる場合があります.
<li>大きなサブシステムや修正パッチの取り込みを要求するのはやめてください.
    パッチブランチの保守は非常に大変な作業であり, 次のリリースを
    改善するための時間を削ることになります.
<li>ただし, OpenSSH のリリースバージョンはパッチブランチに取り込まれます.
    これは上にあげたルールに対する一つの例外です.
</ul>
<p>

<a name="getting"></a>
<h3><font color=#0000e0>パッチブランチの入手</font></h3>

<p>
OpenBSD のあるリリースに対応するパッチブランチを入手するには,
(<a href="ftp.html">FTP</a> 経由, あるいは <a href="orders.html">CD</a> を使って)
入手したソースツリーの一番上 (訳注: /usr/src) で更新を行なうか,
<a href="anoncvs.html">AnonCVS</a> サーバから新たにソースツリーを入手するという方法があります.
パッチブランチの入手と最新を維持する方法については,
<a href="anoncvs.html#starting">AnonCVS の文書</a>の<b>はじめに
(Getting Started)</b> の節に記載されています.  ただし,
パッチブランチはリリース間のアップグレード (たとえば 2.7 から 2.8)
を行なうわけではありませんのでご注意ください.
これはそのリリースにおいて最新の修正パッチが適用された
バージョンを維持する手段を提供するというだけです.
ソースを用いてリリース間アップグレードを行なう場合は
<a href="../faq/ja/upgrade-minifaq.html">upgrade-minifaq</a>
をご覧ください.  それともう一つ, -current から -stable へ戻ることはできません.
これはライブラリのバージョンに互換性がないためです.

<a name="building"></a>
<h3><font color=#0000e0>パッチブランチからの構築</font></h3>
<a href="anoncvs.html">anoncvs</a> 経由でソースツリーを入手したら,
システムを再構築する必要があります.  再構築には次の段階があります.

<ul>
 <li>カーネルの再構築
 <li>構築した新しいカーネルを使って再起動
 <li>バイナリの再構築
</ul>

<h4><font color=#0000e0>カーネルの再構築</font></h4>

<p>
stable の標準カーネルを再構築するには, 次のようにします.
<ul><pre>
# <strong>cd /usr/src/sys/arch/i386/conf</strong>
# <strong>/usr/sbin/config GENERIC</strong>
# <strong>cd /usr/src/sys/arch/i386/compile/GENERIC</strong>
# <strong>make clean &amp;&amp; make depend &amp;&amp; make</strong>
</pre></ul>

<p>
<i>i386</i> の部分をお使いのアーキテクチャ
(たとえば <i>sparc</i>, <i>alpha</i> など) に置き換えてください.

<h4><font color=#0000e0>構築した新しいカーネルを使って再起動</font></h4>

<p>
新しく構築したカーネルを使って再起動します.
<ul><pre>
# <strong>cd /usr/src/sys/arch/i386/compile/GENERIC</strong>
# <strong>cp /bsd /bsd.old</strong>          <i>(古いカーネルのバックアップをとる)</i>
# <strong>cp bsd /bsd</strong>               <i>(新しいカーネルを上書きコピーする)</i>
# <strong>reboot</strong>
</pre></ul>

<p>
これも先ほどと同様に, <i>i386</i> の部分をお使いのアーキテクチャに置き換えてください.
もしシステムが新しいカーネルで起動しない場合は, <i>bsd.old</i> という名前の古いカーネルを
使って再起動することで, 元の状態に復帰することができます.

<h4><font color=#0000e0>バイナリの再構築</font></h4>

<p>次のようにして, システムバイナリの再構築を行ないます.
<ul><pre>
# <strong>cd /usr/src</strong>
# <strong>rm -r /usr/obj/*</strong>
# <strong>make obj &amp;&amp; make build</strong>
</pre></ul>

<p>この作業にはしばらく時間がかかるでしょう.
<hr>
<a href=index.html><img height=24 width=24 src=../back.gif border=0 alt=OpenBSD></a>
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: stable.html,v 1.10 ]
<br>
$Translation: stable.html,v 1.5 2002/06/18 04:35:40 toshi Exp $
<br>
$OpenBSD: stable.html,v 1.5 2002/06/18 06:01:43 jufi Exp $
</small>
</body>
</html>
