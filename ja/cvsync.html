<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD CVSync</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
<meta name="description" content="How to get OpenBSD updates via Internet using CVSync">
<meta name="keywords" content="openbsd,cvsync,updates">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 2003-2004 by OpenBSD.">
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#23238E">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>

<h2><font color="#e00000">CVSync</font></h2>
<hr>

<h3>目次</h3>
<ul>
<li><a href="#CVSync">CVSync とは ?</a></li>
<li><a href="#CVS">CVS とは ?</a></li>
<li><a href="#starting">CVSync を使い始めるために</a></li>
<li><a href="#using">CVS を使用したソースツリーの更新</a></li>
<li><a href="#CVSROOT">利用可能な CVSync サーバ</a></li>
</ul>

<hr>


<h3><a name="CVSync"><font color="#0000e0">CVSync とは ?</font></a></h3>

<p>
<b>CVSync</b> は、リモートサーバ上のマスタ <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1">cvs(1)</a>
リポジトリからソースツリーを配布したり、更新したりするためのソフトウェアパッケージです。
OpenBSD のソースは、カナダの中央開発機上の CVS リポジトリでメンテナンスされています。
CVSync を使用して、OpenBSD ユーザは、
簡単に自分自身のソースツリーを更新することができます。
</p>

<p>
<b>CVSync</b> はプルモデルと呼ばれる更新方法を使用しています。プルモデルでは、
それぞれのクライアントはサーバに、更新が必要かどうか、そしてそれはいつなのか
を問い合わせます。サーバはクライアントからの更新要求を受動的に待機します。
このように、すべての更新はクライアント側から行われ、決してサーバ側から頼まれてもいない更新を行うことはありません。
ユーザは、更新するために手動で <b>CVSync</b> クライアントを実行するか、これを自動的に、定期的に実行させるために
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&amp;sektion=8">cron(8)</a>
ジョブを設定しなければなりません。
</p>

<p>
<a>CVSync</b> という用語は、このとおりに大文字で始まり、このソフトウェアパッケージ全体のことを
指しています。その主要な構成部品は、それぞれのユーザマシン上で実行されるクライアント
<tt>cvsync</tt> と、また、それぞれの OpenBSD CVSync ミラーサイト上で実行されるサーバ
<tt>cvsyncd</tt> です。
</p>

<p>
<b>CVSync</b> は <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sup&amp;sektion=1&amp;format=html">sup(1)</a>
や CVSup より高速かつ柔軟であることを意図しています。
</p> 

<p>
OpenBSD プロジェクトでは、現状で以下の 5 個のソースリポジトリを持っています。
</p>

<ul>
  <li><b>src</b> - OpenBSD オペレーティングシステム用のすべてのソースコードを格納。</li>
  <li><b>ports</b> - <a href="./ports.html">OpenBSD Ports</a> を格納。</li>
  <li><b>www</b> - (このページを含む) すべての OpenBSD の web ページを格納。</li>
  <li><b>x11</b> - OpenBSD 用の
      <a href="http://www.XFree86.org/">XFree86-3</a> ソフトウェアを格納。</li>
  <li><b>xf4</b> - OpenBSD 用の
      <a href="http://www.XFree86.org/">XFree86-4</a> ソフトウェアを格納。</li>
</ul>

<h3><a name="CVS"><font color="#0000e0">CVS とは ?</font></a></h3>

<p>
CVS は OpenBSD のソースツリーを管理するために使用されているソースコードコントロールシステムです。
これについてのより詳しいことは、<a href="anoncvs.html#CVS">こちら</a>に記述されています。
CVS と CVSync は完全に異なるプログラムであるということに注意してください。
CVS は、リモートのファイルアクセスに使用することができますが、
ネットワーク経由で大規模なソースツリーの配布を行うように最適化されているわけではありません。
一方で、CVSync は桁違いに簡単に、より効果的にこの目的を達成することができます。
</p>

<h3>
<a name="starting"><font color="#0000e0">CVSync を使い始めるために</font></a>
</h3>

<p>
もし、CVSync の実行だけに専念したい場合には、自分のマシンの
<tt>net/cvsync</tt> の ports から構築する代わりに、
<a href="ftp.html">ftp ミラーサイト</a>から cvsync の packages
をダウンロードすることをお勧めします。
</p>

<p>
CVSync についてのより詳しい情報は、
<a href="http://www.cvsync.org/">プロジェクトのホームページ</a>を参照してください。
</p>

<p>
OpenBSD のリポジトリを CVSync でミラーするためには、
以下の設定ファイルを使用することができるはずです。
</p>

<pre>
	config {
	    hostname anoncvs.de.openbsd.org
	    # If your network link is a T1 or faster, comment out the following line.
	    compress
	    collection {
		name openbsd release rcs
		prefix /cvs
		umask 002
	    }
	}
</pre>

<p>
これは、<b>anoncvs.de.openbsd.org</b> から、ローカルリポジトリへのグループ書き込み可能なパーミッションの
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=umask&amp;sektion=2">umask(2)</a>
で、すべての OpenBSD のディストリビューションの更新を CVSync に検出させる設定です。
</p>

<p>
このファイルを <tt>cvs-syncfile</tt> としてセーブするものとして、
cvsync を起動するために以下のコマンドを使用します。
</p>
<pre>
        cvsync -c cvs-syncfile
</pre>

<h3><a name="using">
<font color="#0000e0">CVS を使用したソースツリーの更新</font>
</a></h3>

<p>
まず、CVSync されたリポジトリのいずれかひとつを単純にチェックアウトしましょう。
Korn/Bourne シェルでは以下のようにします。
</p>
<pre>
        # cd /usr
        # CVSROOT=/cvs cvs checkout src
</pre>
<p>
csh 系のシェルでは以下のようにします。
</p>
<pre>
        # cd /usr
        # setenv CVSROOT /cvs
        # cvs checkout src
</pre>

<p>
上記の操作で、ほとんどの現在のソースがチェックアウトされます。多くの方は、
特にシステムにパッチを適用する場合にリリースのソースが必要になるだけでしょう。
リリースのソースをチェックアウトするためには、たとえば以下の例のように、
コマンドにタグを指定する必要があります。
</p>
<pre>
        # cd /usr
        # cvs checkout -rOPENBSD_3_5 src
</pre>
<p>
これが 3.4 でしたら、<tt>OPENBSD_3_4</tt> のようにしてください。
</p>

<h3>
<a name="CVSROOT"><font color="#0000e0">利用可能な CVSync サーバ</font></a>
</h3>

<p>以下の CVSync サーバが利用可能です。</p>

<p>
<ul>
<li><strong>anoncvs1.usa.openbsd.org</strong><br>
所在地は、米国カルフォルニア州のレッドウッドシティ、<br>
メンテナンスは <a href="mailto:millert@openbsd.org">Todd Miller</a> です。<br>
2 時間ごとに更新されています。<br>

<p>
<li><strong>anoncvs3.usa.openbsd.org</strong><br>
所在地は、米国コロラド州ボウルダーのコロラド大学、<br>
メンテナンスは <a href="mailto:millert@openbsd.org">Todd Miller</a> です。<br>
2 時間ごとに更新されています。<br>

<p>
<li><a href="http://anoncvs.de.openbsd.org/"><strong>anoncvs.de.openbsd.org</strong></a><br>
このホストは、<strong>grappa.unix-ag.uni-kl.de</strong> としても知られています。<br>
所在地は、ドイツのカイザースラウテルン大学、<br>
メンテナンスは <a href="mailto:naddy@openbsd.org">Christian Weisgerber</a> です。<br>
6 時間ごとに更新されています。<br>

<p>
<li><a href="http://www.allbsd.org/"><strong>cvsync.allbsd.org</strong></a><br>
所在地は、日本の東京、<br>
メンテナンスは <a href="mailto:hrs@allbsd.org">佐藤 広生</a> です。<br>

<p>
<li><a href="http://csociety.org/cvsup.html"><strong>cvsync.csociety.org</strong></a><br>
所在地は、米国インディアナ州のバーデュー大学、<br>
メンテナンスは <a href="mailto:will@csociety.purdue.edu">Will Andrews</a> です。<br>

<p>
<li><strong>cvsync.linux.org.tr</strong><br>
所在地はトルコのビルケントの ULAKBIM、<br>
メンテナンスは <a href="mailto:bdd@mindcast.org">Berk D. Demir</a> です。<br>
2 時間ごとに anoncvs.usa.openbsd.org から更新されています。<br>

<p>
<li><a href="http://mirror.osn.de/"><strong>mirror.osn.de</strong></a><br>
所在地はドイツのニュルンベルグ、<br>
メンテナンスは <a href="mailto:aw@osn.de">Armin Wolfermann</a> です。<br>
4 時間ごとに cvsup.uk.openbsd.org から更新されています。<br>

<p>
<li><a href="http://anoncvs.erisiandiscord.de/"><strong>anoncvs.erisiandiscord.de</strong></a><br>
所在地はドイツのダルムシュタット、<br>
メンテナンスは <a href="mailto:sturm@openbsd.org">Nikolay Sturm</a> です。<br>
3 時間ごとに cvsup.uk.openbsd.org から更新されています。<br>

<p>
<li><a href="http://anoncvs2.de.openbsd.org/"><strong>anoncvs2.de.openbsd.org</strong></a><br>
所在地はドイツのエアランゲン、<br>
メンテナンスは <a href="mailto:grunk@pestilenz.org">Alexander von Gernler</a> です。<br>
2 時間ごとに更新されています。<br>
</ul>

<p>
<em>注:</em> もし、あなたのサーバが、不正確な情報や知らない情報で
ここにリストアップされていた場合、
<a href="mailto:beck@openbsd.org"><tt>beck@openbsd.org</tt></a> か
<a href="mailto:naddy@openbsd.org"><tt>naddy@openbsd.org</tt></a> に御連絡ください。
</p>
<p>
あなたは、どのサーバが最も自分に近いところにあるのかを見つけるために、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute&amp;sektion=8&amp;format=html">traceroute(8)</a>
を使いたいと思うかも知れません。
サーバに関する問題は、問題のサーバの<b>メンテナ</b>に報告すべきです。 
</p>
<p>
現時点 (2003 年 12 月 17 日時点) では、CVS リポジトリのサイズは以下のとおりです。
</p>
<table>
<tr><td width="20"></td>
    <td><strong>openbsd-ports</strong></td>
    <td>- <b>140</b>MB</td></tr>
<tr><td></td>
    <td><strong>openbsd-src</strong></td>
    <td>- <b>1140</b>MB</td></tr>
<tr><td></td>
    <td><strong>openbsd-www</strong></td>
    <td>- <b>104</b>MB</td></tr>
<tr><td></td>
    <td><strong>openbsd-x11</strong></td>
    <td>- <b>200</b>MB</td></tr>
<tr><td></td>
    <td><strong>openbsd-xf4</strong></td>
    <td>- <b>442</b>MB</td></tr>
<tr><td></td>
    <td><strong>openbsd-cvsroot</strong></td>
    <td>- <b>257</b>MB</td></tr>
</table>
<p>
全体のリポジトリのサイズは、
現状では、年間 <b>225</b>MB 程度の割合で増加しています。
</p>
<p>
<strong>重要な注意事項:</strong>
誰もが知っておくべきこととして、暗号ソフトウェアに関しては
若干の問題があります。
</p>
<ul>
  <li>
    <p>
    OpenBSD のソースはカナダからのものなので、
    <a href="http://www.efc.ca/pages/doc/crypto-export.html">
    カナダの個人によって研究されたもの</a>として、また、
    <a href="http://axion.physics.ubc.ca/ECL.html">
    カナダの輸出制限リストの記述</a>にあるように、
    カナダから世界に向けての暗号ソフトウェアの輸出は合法的なものです。
    </p>
  </li>
  <li>
    <p>
    しかしながら、あなたが、米国やカナダ以外の地域に住んでいるのなら、
    あなたは米国内にある CVSync サーバから OpenBSD のソースの
    暗号セクションを持っていくべきではありません。問題のファイルは次のとおりです。
    </p>
    <ul>
      <li><tt>src/kerberosIV/*</tt></li>
      <li><tt>src/kerberosV/*</tt></li>
      <li><tt>src/lib/libdes/*</tt></li>
      <li><tt>src/lib/libc/crypt/crypt.c</tt></li>
      <li><tt>src/lib/libc/crypt/morecrypt.c</tt></li>
      <li><tt>src/sys/crypto</tt></li>
      <li><tt>src/sys/netinet</tt></li>
      <li><tt>src/usr.sbin/afs/src/rxkad/*</tt></li>
      <li><tt>XF4/xc-mit/lib/Xdmcp/Wraphelp.c</tt></li>
      <li><tt>XF4/xc-old/lib/Xdmcp/Wraphelp.c</tt></li>
      <li><tt>XF4/xc/lib/Xdmcp/Wraphelp.c</tt></li>
    </ul>
    <p>
    米国の ITAR 軍需品リストによって、暗号ソフトウェアは、
    米国からカナダだけに対して輸出されたものかも知れないのです。
    </p>
  </li>
</ul>

<p>
OpenBSD プロジェクトでは、さらなる CVSync サーバを募集しています。
ですので、もし、あなたがこれに興味があるなら、設定の詳細に関して、ぜひ
<a href="mailto:naddy@openbsd.org">Christian Weisgerber</a> に連絡を取ってください。
</p>

<hr>
<a href="index.html"><img height="24" width="24" src="../back.gif" border="0" alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: cvsync.html,v 1.19 ]
<br>
$Translation: cvsync.html,v 1.7 2004/07/03 12:38:19 toshi Exp $
<br>
$OpenBSD: cvsync.html,v 1.7 2004/07/08 17:25:28 jufi Exp $
</small>

</body>
</html>
