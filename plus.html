<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD -current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD -current changes">
<meta name="keywords" content="openbsd,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2012 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">OpenBSD -current changelog</font></h2>
<hr>

<p>
This selection is intended to include all important
and all user-visible changes.
For a complete record of all changes, please see the "source-changes"
mailing list, called "OpenBSD CVS"
in the <a href="mail.html#Archives">archives</a>,
or use <a href="anoncvs.html#CVS">CVS</a>.

<p>
Machine specific changes are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>,
<a href="plus50.html">5.0</a>,
<a href="plus51.html">5.1</a>.
<br>
</h3>

<p>
<h3><font color="#0000e0">Changes made between OpenBSD 5.1 and -current</font></h3><p>
<p>

<ul>
<!-- 2012/03/18 -->
<li>Clarification the nwkey text in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&manpath=OpenBSD%20Current&sektion=8&format=html">ifconfig(8)</a>.
<li>Update to libXt 1.1.3 (fixes some broken bold fonts).
<!-- 2012/03/17 -->
<li>Add a <code>wrap-search</code> option to turn off wrapping of searches in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> copy mode.
<li>Some terminals (eg mintty) have cursor styles 5 and 6, now allow them to be set in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a>.
<li>Bugfix to call recalculate_sizes() when changing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> window with the mouse.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> <code>-q</code> option to <code>set-option</code> for turning off info message.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vldc&manpath=OpenBSD%20Current&arch=sparc64&sektion=4&format=html">vldc(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hvctl&manpath=OpenBSD%20Current&arch=sparc64&sektion=4&format=html">hvctl(4)</a>, allows sparc64 control domain to talk to the sun4v hypervisor.
<li>Do not clear to end of line if the line is full. Fixes missing last character in rightmost <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> pane.
<li>Use the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> region lower rather than the pane size to work out where the bottom line is.
<li>Redirect libevent logging to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a>'s log.
<li>Bugfix to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> so after wrapping a line in a pane, the cursor will move to the next line.
<li>Some updates to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&manpath=OpenBSD%20Current&sektion=8&format=html">rc.conf(8)</a> manpage to reflect reality.
<!-- 2012/03/16 -->
<li>No longer leak <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ypldap&manpath=OpenBSD%20Current&sektion=8&format=html">ypldap(8)</a> ypldap_addr structures when doing dns lookups.
<li>Display L3 cache information on amd64 architecture for AMD CPUs.
<!-- 2012/03/15 -->
<li>Take cd9660 support off the "obviously a floppy" i386 and amd64 install media, to make more space.
<li>Improve <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&manpath=OpenBSD%20Current&sektion=4&format=html">ipsec(4)</a>/ENC interaction to avoid unnecessarily dropping some packets.
<li>Add AMD Hudson-2 chipset to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=azalia&manpath=OpenBSD%20Current&sektion=4&format=html">azalia(4)</a>.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nviic&manpath=OpenBSD%20Current&sektion=4&format=html">nviic(4)</a> match the NVIDIA MCP89 chipset.
<li>Direct IPv6 packets with Ethernet encapsulation into the appropriate input routine, so two IPv4 networks can bridge over an IPv6 link with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gif&manpath=OpenBSD%20Current&sektion=4&format=html">gif(4)</a>.
<li>When using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xterm&manpath=OpenBSD%20Current&sektion=1&format=html">xterm(1)</a> with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a>, parse terminfo when starting up to work out the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xterm&manpath=OpenBSD%20Current&sektion=1&format=html">xterm(1)</a> version.
<li>Use the correct dir for php in the default <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nginx&manpath=OpenBSD%20Current&sektion=8&format=html">nginx(8)</a> config.
<li>Accept empty/nonexistant ldap attributes when we want a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ypldap&manpath=OpenBSD%20Current&sektion=8&format=html">ypldap(8)</a> list, allowing empty groups to show up.
<li>Fix regression in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&manpath=OpenBSD%20Current&sektion=1&format=html">ssh(1)</a> so root is always excluded from the test for /etc/nologin.
<li>Fix leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ypldap&manpath=OpenBSD%20Current&sektion=8&format=html">ypldap(8)</a> ue_netid_line when freeing the old user tree.
<!-- 2012/03/14 -->
<li>Store context before moving the cursor when wrapping, to fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> bug causing drawing over the status line.
<li>Fix booting on the Thecus N1200.
<li>Close a race in uipc_socket.c that could corrupt a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=socket&apropos=0&sektion=0&manpath=OpenBSD+Current&arch=i386&format=html">socket(2)</a> sockbuf. Bugfix for "receive 1" panic.
<li>Remove inline version of m_copym2 in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ubsec&manpath=OpenBSD%20Current&sektion=4&format=html">ubsec(4)</a>. Workaround to stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ubsec&manpath=OpenBSD%20Current&sektion=4&format=html">ubsec(4)</a> gets stuck after receiving a packet of a particular length.
<li>Update to util-macros 1.17.
<li>Remove the NO_HELP conditional directives, as <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&manpath=OpenBSD%20Current&sektion=1&format=html">mg(1)</a> will not compile if they are defined.
<li>Repair function in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bc&manpath=OpenBSD%20Current&sektion=1&format=html">bc(1)</a> when used with different scales.
<!-- 2012/03/13 -->
<li>Correctly move back <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd&manpath=OpenBSD%20Current&sektion=8&format=html">smtpd(8)</a> envelope from offload tree to msg tree. Fixes crash seen on mailservers under load.
<li>Fix some rotation issues in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intel&manpath=OpenBSD%20Current&sektion=4&format=html">intel(4)</a> driver.
<li>Fix check for xf86Modes.h. Fixes <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeonold&manpath=OpenBSD%20Current&sektion=4&format=html">radeonold(4)</a> driver build issues caused by caching of the (previously wrong) result.
<li>Don't call wdcintr() for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&manpath=OpenBSD%20Current&sektion=4&format=html">pciide(4)</a> channels that aren't properly initialized or don't have any drives on them. Fixes a panic seen on sparc64 machines with Acer Labs chipset.
<li>Added manpages for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=__thrsigdivert&manpath=OpenBSD%20Current&sektion=2&format=html">__thrsigdivert(2)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=__thrsleep&manpath=OpenBSD%20Current&sektion=2&format=html">__thrsleep(2)</a>, and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=__thrwakeup&manpath=OpenBSD%20Current&sektion=2&format=html">__thrwakeup(2)</a>.
<li>Rough regression tests of the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bc&manpath=OpenBSD%20Current&sektion=1&format=html">bc(1)</a> math library added.
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pgrep&manpath=OpenBSD%20Current&sektion=1&format=html">pgrep(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkill&manpath=OpenBSD%20Current&sektion=1&format=html">pkill(1)</a> to only match processes, not threads.
<!-- 2012/03/12 -->
<li>Update to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=makedepend&manpath=OpenBSD%20Current&sektion=1&format=html">makedepend(1)</a> 1.0.4 and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=imake&manpath=OpenBSD%20Current&sektion=1&format=html">imake(1)</a> 1.0.5.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeonold&manpath=OpenBSD%20Current&sektion=4&format=html">radeonold(4)</a> to build on macppc and sparc64.
<li>Add <code>-P/-F</code> flags to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> break-pane.
<!-- 2012/03/11 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> a cursor positioning bug is fixed.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mfi&manpath=OpenBSD%20Current&sektion=4&format=html">mfi(4)</a> documents support for Dell PERC H310.
<li>The PCI database gains knowledge of HP Smart Array P220i/P222/P420/P420i/P421/P721m/P822.
<li>Xenocara's bsd.xorg.mk switched from Python 2.6 to 2.7.
<!-- 2012/03/10 -->
<li>The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=acpi&apropos=0&sektion=0&manpath=OpenBSD+Current&arch=i386&format=html">acpi(4)</a> aml_evalexpr() function is fixed to use 64 bit unsigned integers, and a check is made the <code>_REG</code> method is available before calling.
<li>Xenocara libXcursor is updated to 1.1.13, libXdmcp to 1.1.1, libXext to 1.3.1, libXft to 2.3.0, libXinerama to 1.1.2, libXmu to 1.1.1, libXpm to 3.5.10, libXrender to 0.9.7, libXt to 1.1.2, libXtst to 1.2.1, libXv to 1.0.7, libXvMC to 1.0.7, libXxf86dga to 1.1.3, libXxf86vm to 1.1.2, libdmx to 1.1.2, libxkbfile to 1.0.8, and glproto to 1.4.15.
<li>TCP initial window increased to 14600 bytes as in <a href="http://tools.ietf.org/html/draft-ietf-tcpm-initcwnd-02" >http://tools.ietf.org/html/draft-ietf-tcpm-initcwnd-02</a>; <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&manpath=OpenBSD%20Current&sektion=3&format=html">sysctl(3)</a> <code>net.inet.tcp.rfc3390</code> now defaults to 2 to reflect that.
<li>In Xenocara, update bitmap to 1.0.6, libXres to 1.0.6, util-macros to 1.16.12, libXScrnSaver to 1.2.2 and libXau to 1.0.7.
<li>In /etc/rc (see <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&manpath=OpenBSD%20Current&sektion=8&format=html">rc(8)</a>) <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ypbind&manpath=OpenBSD%20Current&sektion=8&format=html">ypbind(8)</a> is now started after <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ypldap&manpath=OpenBSD%20Current&sektion=8&format=html">ypldap(8)</a>, because it needs to talk to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ypserv&manpath=OpenBSD%20Current&sektion=8&format=html">ypserv(8)</a> (which in turn <em>is</em> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ypldap&manpath=OpenBSD%20Current&sektion=8&format=html">ypldap(8)</a>).
<li><code>PS_EXITING</code> flag introduced to better differentiate between the process and the main thread exiting. 
<li>Signal dispatching has (at least temporarily) been changed to give <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sigwait&manpath=OpenBSD%20Current&sektion=3&format=html">sigwait(3)</a> priority over <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ptrace&manpath=OpenBSD%20Current&sektion=2&format=html">ptrace(2)</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ypldap&manpath=OpenBSD%20Current&sektion=8&format=html">ypldap(8)</a> won't stumble over nonexistent users when creating groups, but simply leave that one out and continue with the next user entry.
<!-- 2012/03/09 -->
<li>In Xenocara, update libpciaccess to 0.13.
<li>When creating PF rules the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=relayd&manpath=OpenBSD%20Current&sektion=8&format=html">relayd(8)</a> daemon takes care to set <code>onrdomain</code> and <code>prio</code> to ensure proper functioning.
<li>A new, simplified vmmap (memory allocator) added to the kernel.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> server start now serialized via lockfile. Bugfix for window name not reflecting what is currently happening.
<!-- 2012/03/08 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&manpath=OpenBSD%20Current&sektion=1&format=html">dc(1)</a> calculator <code>length(0.000)</code> will now behave exactly as GNU <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&manpath=OpenBSD%20Current&sektion=1&format=html">dc(1)</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bc&manpath=OpenBSD%20Current&sektion=1&format=html">bc(1)</a> now initializes the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=editline&manpath=OpenBSD%20Current&sektion=3&format=html">editline(3)</a> library even in <code>-c</code> mode.
<li>On the landisk platform the pixman library had to be disabled, because it triggers an internal <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&manpath=OpenBSD%20Current&sektion=1&format=html">gcc(1)</a> error.
<!-- 2012/03/07 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd&manpath=OpenBSD%20Current&sektion=8&format=html">smtpd(8)</a> the fsqueue will no longer panic for a missing queue directory (<code>ENOENT</code>), but simply continue with the next entry. And more reliability improvements take place.
<li>Support for AMD Hudson-2 is added to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=piixpm&manpath=OpenBSD%20Current&sektion=4&format=html">piixpm(4)</a>.
<!-- 2012/03/06 -->
<li>An example in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=queue&manpath=OpenBSD%20Current&sektion=3&format=html">queue(3)</a> manpages is fixed to compile without warnings.
<li>The xtsscale Xenocara program uses <code>__progname</code> from crt0.o instead of <code>argv[0]</code> for messages.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nginx&manpath=OpenBSD%20Current&sektion=8&format=html">nginx(8)</a> is updated to 1.0.13.
<li>For <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=glxpcib&manpath=OpenBSD%20Current&sektion=4&arch=i386&format=html">glxpcib(4/i386)</a> support for an I2C-bus SMB controller found on a AMD CS5536 companion device is added.
<li>Check added to network stack to see if a route is still valid when getting the cached route entry of a pcb (protocol control block), and that correct routing table is used.
<li>Add the <code>_POSIX_MONOTONIC_CLOCK</code> symbol and the <code>_SC_MONOTONIC_CLOCK</code> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysconf&manpath=OpenBSD%20Current&sektion=3&format=html">sysconf(3)</a> variable.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&manpath=OpenBSD%20Current&sektion=8&format=html">tftp-proxy(8)</a> now fills in default values for <code>rtableid</code>/<code>onrdomain</code>/<code>prio</code> when creating PF rules.
<li>Disable the use of unsafe builtin <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&manpath=OpenBSD%20Current&sektion=1&format=html">gcc(1)</a> functions (strcat, strcpy, stpcpy) making them easier to spot in the object files. Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=stpcpy&manpath=OpenBSD%20Current&sektion=3&format=html">stpcpy(3)</a> to the list of unsafe functions.
<li>Clarification of :*: in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&manpath=OpenBSD%20Current&sektion=5&format=html">passwd(5)</a> manpage.
<li>The detection of the <a href="http://www.rfc-editor.org/rfc/rfc6396.txt">RFC 6396</a> encoding of the <code>MP_REACH_NLRI</code> attribute is improved for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpctl&manpath=OpenBSD%20Current&sektion=8&format=html">bgpctl(8)</a>.
<!-- 2012/03/05 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pms&manpath=OpenBSD%20Current&sektion=4&format=html">pms(4)</a> support for a special ALPS protocol (using interleaved PS/2 packets) is added, as is used on touchpads for Dell laptops E6xxx and E5500, possibly others.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.d&manpath=OpenBSD%20Current&sektion=8&format=html">rc.d(8)</a> bits are added for the new standalone <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftpd&manpath=OpenBSD%20Current&sektion=8&format=html">tftpd(8)</a> daemon. 
<li>An old but still current paper on encrypting virtual memory is now available on the <a href="papers/">papers</a> website.
<!-- 2012/03/04 -->
<li>New threads now inherit their TCB (thread control block) address from their parent thread.
<li>The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> commands <code>new-window</code> and <code>split-window</code> now support the option <code>-F</code> to specify a format when printing the window location with the <code>-P</code> flag.
<li>The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> commands <code>send-keys</code> and <code>bind-key</code> now accept hex values for the <code>key</code> argument.
<li>Add <code>A</code> and <code>I</code> keys for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> vi-like status line editing.
<li>In preparation for getline and getdelim additions to libc, getline() occurrences are renamed to get_line().
<!-- 2012/03/03 -->
<li>Document sem_timedwait() in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sem_wait&manpath=OpenBSD%20Current&sektion=3&format=html">sem_wait(3)</a>.
<li>Fix the logic deciding whether to return PCI_COMMAND_MASTER_ENABLE in the Loongson emulated pci functions #2 and #3.
<li>Don't print the device name twice in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=yds&manpath=OpenBSD%20Current&sektion=4&format=html">yds(4)</a> attach error messages.
<li>Added many regression tests for rthreads.
<li>The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> command <code>paste-buffer</code> now offers a <code>-p</code> option to enable "bracketed paste" mode.
<li>The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> wlmouse offset is now corrected to be part of the client, not the server.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> <code>move-pane</code> command (like <code>join-pane</code> but allows the same window). Also <code>-b</code> flag to <code>join-pane</code> and <code>move-pane</code> to place the pane to the left or above.
<!-- 2012/03/02 -->
<li>Fix handling of "offend" (OFFset from the END of the arg list) arguments in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&manpath=OpenBSD%20Current&sektion=1&format=html">systrace(1)</a>.
<li>Add printf attribute to a couple of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> functions.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nsd&manpath=OpenBSD%20Current&sektion=8&format=html">nsd(8)</a> to version 3.2.10.
<li>Don't include ou=People in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ypldap.conf&manpath=OpenBSD%20Current&sektion=5&format=html">ypldap.conf(5)</a> basedn, as <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ypldap&manpath=OpenBSD%20Current&sektion=8&format=html">ypldap(8)</a> has netid support, and groups are usually stored outside of People.
<li>Added the new standalone <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftpd&manpath=OpenBSD%20Current&sektion=8&format=html">tftpd(8)</a> to base, a persistent event driven tftp daemon.
<!-- 2012/03/01 -->
<li>Sync gcc3 and gcc4 knowledge of the kernel printf capabilities with reality.
<li>Use UE_GET_ADDR to get endpoint address (remove direction bit) in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uaudio&manpath=OpenBSD%20Current&sektion=4&format=html">uaudio(4)</a>. Fixes devices using sych endpoints.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=zaudio&manpath=OpenBSD%20Current&sektion=4&arch=zaurus&format=html">zaudio(4/zaurus)</a> is play only, so return ENXIO on any attempt to open the device for recording. Fixes full-duplex apps (including sndiod) unable to fall back to play-only mode.
<li>Support the ASIX AX88772B <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=axe&manpath=OpenBSD%20Current&sektion=4&format=html">axe(4)</a> USB ethernet controller.
<!-- 2012/02/29 -->
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&manpath=OpenBSD%20Current&sektion=1&format=html">ssh-keygen(1)</a> conversion of RSA1 keys to public PEM and PKCS8.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malloc&manpath=OpenBSD%20Current&sektion=3&format=html">malloc(3)</a> test for the retrieved page address not being NULL. This turns free((void*)1) into an bogus pointer error instead of a segfault.
<!-- 2012/02/28 -->
<li>Support the Roland UM-ONE <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=umidi&manpath=OpenBSD%20Current&sektion=4&format=html">umidi(4)</a> device.
<li>Update to pixman 0.22.4, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xev&manpath=OpenBSD%20Current&sektion=1&format=html">xev(1)</a> 1.2.0, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xwd&manpath=OpenBSD%20Current&sektion=1&format=html">xwd(1)</a> 1.0.5, and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xwininfo&manpath=OpenBSD%20Current&sektion=1&format=html">xwininfo(1)</a> 1.1.2.
<li>Luna88k multi-processor support, step 3. GENERIC.MP configuration file based on mvme88k.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mos&manpath=OpenBSD%20Current&sektion=4&format=html">mos(4)</a> support for the MosChip MCS7832, a low pin count version of the MCS7830.
<li>Updated the list of supported four digit models in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&manpath=OpenBSD%20Current&sektion=4&arch=hppa&format=html">intro(4/hppa)</a>.
<li>Mention in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=se&manpath=OpenBSD%20Current&sektion=4&format=html">se(4)</a> some additional phys (physical layer interfaces) that may be able to attach.
<li>Copy p_tcb (user-space thread-control-block address) on fork, for non-__HAVE_MD_TCB archs.
<li>Added sys/dev/pci/pcidevs codes for Realtek RTL8192CE, Nvidia nForce 780a SLI and nForce 200 chipsets.
<li>Always try to reclaim <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=jme&manpath=OpenBSD%20Current&sektion=4&format=html">jme(4)</a> transmitted frames to prevent watchdog timeouts when there is no link present.
<li>Add checks to rthreads when trying to unlock an uninitialized mutex to make sure it returns EPERM.
<!-- 2012/02/26 -->
<li>The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mandoc&manpath=OpenBSD%20Current&sektion=1&format=html">mandoc(1)</a> program now replaces bogus characters with <code>?</code> instead of just dropping them.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=man&manpath=OpenBSD%20Current&sektion=7&format=html">man(7)</a>, support the <code>.OP</code> macro (for compatibility only).
<li>On the mips64 and sh platforms the per-thread errno should be fixed.
<li>The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ix&manpath=OpenBSD%20Current&sektion=4&format=html">ix(4)</a> interrupt routine uses a shorter path to reenable interrupts and gains other tweaks which result in a doubled performance on 82599.
<!-- 2012/02/25 -->
<li>In the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gus&manpath=OpenBSD%20Current&sektion=4&arch=i386&format=html">gus(4/i386)</a> driver MIDI registers will only be used if they are actually available. This fixes an issue which caused the driver to be disabled on 1999-08-22, but the happy-end can finally be seen in i386 GENERIC.
<li>For the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=elroy&manpath=OpenBSD%20Current&sektion=4&arch=hppa&format=html">elroy(4/hppa)</a> driver an integer truncation error is fixed which caused systems to freeze hard.
<li>The process tracing facilities will work again on processors without floating-point registers/state. (Had been broken by the large extension of the 20th.)
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> the <code>show-options</code> and <code>window-show-options</code> commands can now be used to show just a single specified option.
<li>Minor tweaks and cleanups in the amd64 code of the kernel have been observed.
<!-- 2012/02/24 -->
<!-- 2012/02/23 -->
<li>pthread_yield(3) is renamed to sched_yield(3).
<li>Manual pages are created for the <code>pthread_condattr_t</code> type.
<li>The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&manpath=OpenBSD%20Current&sektion=1&format=html">tmux(1)</a> <code>display-message</code> command is extended by a <b>-F</b> option which can be used to specify a format string to control output formatting.
<li>New functions are added to the thread library: pthread_mutex_timedlock(3), pthread_condattr_getclock(3) and pthread_condattr_setclock(3); also, <code>PTHREAD_MUTEX_NORMAL</code> mutexes learn about self-deadlocks.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=snmpd&manpath=OpenBSD%20Current&sektion=8&format=html">snmpd(8)</a> gains the MIB module for gathering information from OpenBSD's packet filter.
<!-- 2012/02/22 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&manpath=OpenBSD%20Current&sektion=2&format=html">chroot(2)</a> mode nginx(8) first <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chdir&manpath=OpenBSD%20Current&sektion=2&format=html">chdir(2)</a>s to the <code>PREFIX</code> directory before it starts to create it's temporary directories.
<!-- 2012/02/21 -->
<li>The pthread_suspend_np(3) and pthread_resume_np(3) function are no longer functional and become <code>ENOTSUP</code> stubs.
<!-- 2012/02/20 -->
<li>A lot of work is being done for making process tracing work with rthreads.
<li>In Xenocara, update xf86-video-geode 2.11.13 and xf86-video-dummy to 0.3.5.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kdump&manpath=OpenBSD%20Current&sektion=1&format=html">kdump(1)</a> fixes an integer flip which could have happened for a kernel trace record with <code>ktr_len</code> of <code>SIZE_MAX</code> and would have caused a zero byte data allocation. It also learns more system calls and refactors output routines as well as the output produced by the latter.
<li>A lot of work is being done on regression tests for threads.
<!-- 2012/02/19 -->
<li>Bugfix in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&manpath=OpenBSD%20Current&sektion=8&format=html">tcpdump(8)</a> to correctly check BGP prefix lengths in withdrawn routes.
<li>Fix return value documentation errors in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usbhid&manpath=OpenBSD%20Current&sektion=3&format=html">usbhid(3)</a>.
<li>Allow for more vars in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&manpath=OpenBSD%20Current&sektion=1&format=html">ksh(1)</a> hash table, improve hash function, increase hash table size sooner.
<!-- 2012/02/18 -->
<li>Initialize the scope, policy, and inherit members in pthread_attr_init() so that their pthread_attr_get* don't return bogus values.
<li>Update nginx in base to 1.0.12 and sync its <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcre&manpath=OpenBSD%20Current&sektion=3&format=html">pcre(3)</a> with the version in ports.
<li>Update to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkfontdir&manpath=OpenBSD%20Current&sektion=1&format=html">mkfontdir(1)</a> 1.0.7, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkfontscale&manpath=OpenBSD%20Current&sektion=1&format=html">mkfontscale(1)</a> 1.1.0, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=oclock&manpath=OpenBSD%20Current&sektion=1&format=html">oclock(1)</a> 1.0.3, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xclipboard&manpath=OpenBSD%20Current&sektion=1&format=html">xclipboard(1)</a> 1.1.2, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xclock&manpath=OpenBSD%20Current&sektion=1&format=html">xclock(1)</a> 1.0.6, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xcmsdb&manpath=OpenBSD%20Current&sektion=1&format=html">xcmsdb(1)</a> 1.0.4, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xcompmgr&manpath=OpenBSD%20Current&sektion=1&format=html">xcompmgr(1)</a> 1.1.6, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xfd&manpath=OpenBSD%20Current&sektion=1&format=html">xfd(1)</a> to 1.1.1 and util-macros to 1.16.1.
<!-- 2012/02/17 -->
<li>Add DIAGNOSTICS to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bsd.port.mk&manpath=OpenBSD%20Current&sektion=5&format=html">bsd.port.mk(5)</a>, for easy grepping through logs, and no longer label "warning messages" as "errors".
<!-- 2012/02/16 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkill&manpath=OpenBSD%20Current&sektion=1&format=html">pkill(1)</a> will now exit usage() with STATUS_BADUSAGE rather than STATUS_ERROR, in agreement with the man page.
<li>Set __isthreaded in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pthread_create&manpath=OpenBSD%20Current&sektion=3&format=html">pthread_create(3)</a>, i.e. even if a forked child creates a new thread. Fixes an rthread bug to properly represents whether a process is multi-threaded or not.
<li>Do an explicit "sync" instruction before returning from cache routines on mips64 (nop on R5k/RM52xx, but required on RM7k).
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kevent&manpath=OpenBSD%20Current&sektion=2&format=html">kevent(2)</a> support for msdosfs to make applications monitoring fs mounts happy.
<!-- 2012/02/15 -->
<li>Enable rthreads by default (threads now in kernel not userspace), and add additional pthreads regression tests.
<li>Hold struct filedesc's fd_lock in more places. Fixes hangs in rthreaded processes calling <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fork&manpath=OpenBSD%20Current&sektion=2&format=html">fork(2)</a>.
<li>No longer attempt to enable MSI on 82571/82572 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=em&manpath=OpenBSD%20Current&sektion=4&format=html">em(4)</a> Gigabit ethernet controllers (to workaround "Byte Enables 2 and 3 Are Not Set" hardware bug).
<!-- 2012/02/13 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_create&manpath=OpenBSD%20Current&sektion=1&format=html">pkg_create(1)</a> now warns when <code>@option no-default-conflict</code> has been set without explicit <code>@conflict</code>.
</ul>
<p>

<hr>
<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>,
<a href="plus50.html">5.0</a>,
<a href="plus51.html">5.1</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="back.gif" border=0 alt="OpenBSD"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus.html,v 1.1217 2012/03/24 07:39:15 brett Exp $</small>

</body>
</html>
