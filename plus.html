<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD -current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD -current changes">
<meta name="keywords" content="openbsd,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2009 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">OpenBSD -current changelog</font></h2>
<hr>

<p>
This is a partial list of the major machine-independent changes
(i.e., these are the changes people ask about most often).  Machine
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>.
<br>
</h3>

<p>
<h3><font color="#0000e0">Changes made between OpenBSD 4.9 and -current</font></h3><p>
<p>

<ul>
<!-- 2011/03/13 -->
<li>Fixed handling of VIS_ALL in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vis&sektion=3&format=html">vis(3)</a>.
<li>Added Wake on LAN support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=re&sektion=4&format=html">re(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vr&sektion=4&format=html">vr(4)</a>.
<li>Added 'wol' and '-wol' options to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&sektion=8&format=html">ifconfig(8)</a> to enable and disable Wake on LAN on a system in standby or suspend mode.
<li>Updated xkbcomp to version 1.2.1.
<li>Synchronized ctype definitions for the UTF-8 locale to FreeBSD, fixing width of various zero-width characters.
<li>Replaced type daddr_t (64-bit disk address) by type daddr_32t (32-bit disk address) in all archs machine-dependent code (bios, boot...). The bootblocks only do 32-bit block spanning for now.
<!-- 2011/03/12 -->
<li>Removed <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groff&sektion=1&format=html">groff(1)</a> from base.
<li>Make sparc and sparc64 libc division and remainder use a better fitted register.
<li>Prevent a race in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sosplice&sektion=9&format=html">sosplice(9)</a>.
<li>Fixed <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=relayd&sektion=8&format=html">relayd(8)</a> client timeout.
<li>Make ext2fs utilities use type daddr32_t because they can only operate with a 32-bit block number range for now.
<li>Updated xkeyboard-config to version 2.1.
<li>Replace the old, broken KERN_PROC ABI and its matching functions in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kvm&sektion=3&format=html">kvm(3)</a> with the stable-ABI versions that are currently named KERN_PROC2, kvm_get{proc,argv,envv}2().
<li>In i386 machine-dependent parts, provide distinct segments for the %fs and %gs selectors to use by default, with per-rthread base offsets and with sysarch() functions, I386_{GET,SET}_{FS,GS}BASE, for fetching and setting those base offsets. This is necessary for both rthread and Linux compat support.
<li>Fixed a bug that caused nbr addr_tree corruption in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldpd&sektion=8&format=html">ldpd(8)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldpd&sektion=8&format=html">ldpd(8)</a> log the fact that a session was not accepted because of missing HELLOs.
<!-- 2011/03/11 -->
<li>Clean <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bios&sektion=4&arch=i386&format=html">bios(4/i386)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bios&sektion=4&arch=amd64&format=html">bios(4/amd64)</a> stack garbage before passing buffer to biosd_io().
<li>Added <tt>-z &lt;output_zone&gt;</tt> to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=date&sektion=1&format=html">date(1)</a> for changing the specified time zone.
<li>Make sure extra arguments are not passed to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=date&sektion=1&format=html">date(1)</a>.
<li>Prevent <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=which&sektion=1&format=html">which(1)</a> -a option from changing the exit status.
<!-- 2011/03/10 -->
<li>Added support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=admtemp&sektion=4&format=html">admtemp(4)</a> for detecting the NXP SA56004X.
<li>Implemented options --print-provides, --print-requires and --print-requires-private in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg-config&sektion=1&format=html">pkg-config(1)</a>.
<li>Make pkg_config honour PKG_CONFIG_DEBUG_SPEW.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1&format=html">ssh(1)</a> GSSAPI authentication to detect when a server-side failure causes authentication failure and don't count such failures against MaxAuthTries. Fixes bz#1244.
<!-- 2011/03/09 -->
<li>Make IPv6 stack log MAC address changes in the IPv6 neighbour discovery protocol cache as "ndp info overwritten". Makes the behaviour similar to ARP.
<li>Make <tt>smtpctl show stats</tt> display inet4 and inet6 repartition for incoming sessions.
<li>Moved <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.subr&sektion=8&format=html">rc.subr(8)</a> redirections into the rc_cmd itself instead of rc_start and rc_stop so scripts don't need to set it.
<li>Implemented UDP mode for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpbench&sektion=1&format=html">tcpbench(1)</a> and switch it to use libevent.
<li>Print <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=em&sektion=4&format=html">em(4)</a> debugging info via <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&sektion=8&format=html">ifconfig(8)</a> debug command instead of using a global em_display_debug_stats variable.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&sektion=1&format=html">ksh(1)</a> substitute '~' for $HOME in the \W prompt case. Matches bash behaviour.
<li>Prevent <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.subr&sektion=8&format=html">rc.subr(8)</a> from losing rc_{pre,post} when <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.d&sektion=8&format=html">rc.d(8)</a> override rc_{start,stop}.
<li>Fixed truncation of IPv6 addresses in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd&sektion=8&format=html">smtpd(8)</a> mail delivery path.
<!-- 2011/03/08 -->
<li>Fixed a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4&format=html">carp(4)</a> reconfiguration problem.
<li>Build xcb by default in Xenocara.
<li>Added <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vrng&sektion=4&arch=sparc64&format=html">vrng(4/sparc64)</a> to sparc64 GENERIC kernel.
<li>Fixed extended partition searching in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&sektion=8&arch=i386&format=html">biosboot(8/i386)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&sektion=8&arch=amd64&format=html">biosboot(8/amd64)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cdboot&sektion=8&arch=i386&format=html">cdboot(8/i386)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cdboot&sektion=8&arch=amd64&format=html">cdboot(8/amd64)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&sektion=8&arch=i386&format=html">installboot(8/i386)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&sektion=8&arch=amd64&format=html">installboot(8/amd64)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pxeboot&sektion=8&arch=i386&format=html">pxeboot(8/i386)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pxeboot&sektion=8&arch=amd64&format=html">pxeboot(8/amd64)</a>.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&sektion=8&format=html">ospfd(8)</a> to send out LS updates larger than the MTU.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&sektion=8&format=html">ospfd(8)</a> use IP_MAXPACKET instead of IBUF_READ_SIZE as upper bound for packet building.
<!-- 2011/03/07 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&sektion=1&format=html">tmux(1)</a> prevent tiled producing a corrupt layout when only one column is needed.
<li>Added support to pass through escape sequences to the underlying terminal in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&sektion=1&format=html">tmux(1)</a>.
<li>Updated xterm to version 269.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usbhidaction&sektion=1&format=html">usbhidaction(1)</a> use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fork&sektion=2&format=html">fork(2)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=exec&sektion=3&format=html">exec(3)</a> instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=system&sektion=3&format=html">system(3)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_create&sektion=1&format=html">pkg_create(1)</a> run <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=makewhatis&sektion=8&format=html">makewhatis(8)</a> when verbose mode is set.
<li>Added editline support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bc&sektion=1&format=html">bc(1)</a>.
<li>Removed NTFS from alpha GENERIC kernel.
<li>Prevent <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mandoc&sektion=1&format=html">mandoc(1)</a> from leaking information about software used into PostScript and PDF documents.
<li>Clean up date handling in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mandoc&sektion=1&format=html">mandoc(1)</a>: always store dates as strings, not as seconds since the Epoch; for input, try the three most common formats everywhere; for unrecognized format, just pass the date though verbatim; when there is no date at all, still use the current date.
<!-- 2011/03/06 -->
<li>Make sure <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isp&sektion=4&format=html">isp(4)</a> MEMORYBARRIER(SYNC_REG) performs a read/write bus_space_barrier, instead of a read barrier only, as it is used in read-modify-write cycles.
<li>Added to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.subr&sektion=8&format=html">rc.subr(8)</a> an "rc_bg" variable that is undefined by default and allows to start a daemon in the background.
<!-- 2011/03/05 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt&sektion=3&format=html">getopt(3)</a> ignore leading '-' in optstring if POSIXLY_CORRECT is set. Fixes PR6267.
<li>Fixed potential crash when GZIP variable set and more than 512 command line arguments specified. Closes PR 6573.
<li>Improved sparc64 machine-dependent code by removing tests already performed by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bus_space_barrier&sektion=9&format=html">bus_space_barrier(9)</a>.
<li>Fixed DMA errors with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&sektion=4&format=html">dc(4)</a> on sparc64.
<li>Improved <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8&format=html">disklabel(8)</a> auto-allocation scheme.
<!-- 2011/03/04 -->
<li>Prevent <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usb&sektion=4&format=html">usb(4)</a> devices from being non-functional because of a too long reset.
<li>Improved <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&sektion=1&format=html">tmux(1)</a>.
<li>Fixed bug in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=azalia&sektion=4&format=html">azalia(4)</a> resume.
<li>Added -H to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ls&sektion=1&format=html">ls(1)</a> (follow symlink) as required by POSIX.
<li>Added <tt>-W &lt;whiteexp&gt;</tt> to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamlogd&sektion=8&format=html">spamlogd(8)</a>. Adjusts the time for whiteexp in hours.
<li>Prevent <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mpi&sektion=4&format=html">mpi(4)</a> from reading garbled replies.
<li>Added -H to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=grep&sektion=1&format=html">grep(1)</a> (opposite of -h) to always print name.
<!-- 2011/03/03 -->
<li>Fixed passing of arguments from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8&format=html">spamd(8)</a> to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8&format=html">pfctl(8)</a>. Fixes PR6142.
<li>Prevent division-by-zero in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=zts&sektion=4&arch=zaurus&format=html">zts(4/ZAURUS)</a> when scaling down to the screen resolution.
<li>Resized MAXDSIZ up to 2G on macppc and socppc.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&sektion=8&format=html">cron(8)</a> reset the SIGPIPE signal handler immediately before executing a command.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=at&sektion=1&format=html">at(1)</a> use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dirfd&sektion=3&format=html">dirfd(3)</a> instead looking into struct dirent.
<li>Added a -P option to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&sektion=1&format=html">tmux(1)</a>. Detaches to HUP the client's parent process.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd&sektion=8&format=html">smtpd(8)</a> log correctly ip addresses on big-endian machines.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping6&sektion=8&format=html">ping6(8)</a> compare minimum amount of bytes between what was received and what was sent out and print additional information explaining payload size differences.
<!-- 2011/03/02 -->
<li>Fixed broken handling of ios_base::showpos in libstdc++-v3.
<li>Added the socket splicing fields of struct socket to <tt>netstat -vP</tt> output for debugging.
<li>Fixed a bug in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=atexit&sektion=3&format=html">atexit(3)</a> __cxa_finalize().
<li>Allow &lt;sys/stdarg.h&gt; to use va_arg macro as a local variable name.
<li>Fixed a segmentation fault in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rtadvd&sektion=8&format=html">rtadvd(8)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&sektion=4&format=html">pfsync(4)</a> use ip6_output for sending IPv6 frames instead of assuming everything is IPv4 and using ip_output.
<li>Define HANDLE_PRAGMA_PACK_PUSH_POP just like on other platforms in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&sektion=1&format=html">gcc(1)</a> to get #pragma pack and #pragma push work in order to be compatible with MS compilers as it is used by some projects like chromium.
<li>Make sure <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8&format=html">disklabel(8)</a> editor save the start and end sector of the OpenBSD area every time a user updates its bounds.
<li>Synchronized <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scsi&sektion=4&format=html">scsi(4)</a> ASC/ASCQ errors with &lt;<a href="http://www.t10.org/lists/asc-num.txt">http://www.t10.org/lists/asc-num.txt</a>&gt;.
<!-- 2011/02/28 -->
</ul>
<p>

This list mentions mostly platform-independent changes.  For a list of changes
made in a particular platform, please check the page for that platform.  If you
find them not listed there, the changes are either (1) not being documented or
(2) are documented here.<br><br>

<hr>
<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="back.gif" border=0 alt="OpenBSD"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus.html,v 1.1195 2011/03/26 19:42:14 jj Exp $</small>

</body>
</html>
