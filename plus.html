<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD -current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD -current changes">
<meta name="keywords" content="openbsd,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2009 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">OpenBSD -current changelog</font></h2>
<hr>

<p>
This is a partial list of the major machine-independent changes
(i.e., these are the changes people ask about most often).  Machine
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>.
<br>
</h3>

<p>
<h3><font color="#0000e0">Changes made between OpenBSD 4.7 and -current</font></h3><p>
<p>

<ul>
<!-- 2010/06/13 -->
<li>Adjusted FTP reply codes in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8&format=html">ftpd(8)</a> (in error conditions) to conform to RFC 959.
<li>Segmentation fault prevented in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lock&sektion=1&format=html">lock(1)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldapd&sektion=8&format=html">ldapd(8)</a>, fixed a btree reference counting when opening the database with a file descriptor directly using btree_open_fd().
<!-- 2010/06/12 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospf6d&sektion=8&format=html">ospf6d(8)</a> stop preventing dynamic route redistribution because of a "dispatch_rtmsg no nexthop" error was emitted in wrong cases; fixed a use after <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=free&sektion=3&format=html">free(3)</a>, fixed a segfault.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospf6ctl&sektion=8&format=html">ospf6ctl(8)</a> print additional new line after 'Number of Links' in show database router.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfctl&sektion=8&format=html">ospfctl(8)</a> print 'Number of Routers' in show database network.
<!-- 2010/06/11 -->
<li>Fixed a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ypldap&sektion=8&format=html">ypldap(8)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scsi&sektion=4&format=html">scsi(4)</a>, Restore an unusual XS_SENSE semantic; Fixes <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&sektion=8&format=html">restore(8)</a> problems seen on certain tape drives.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldapd&sektion=8&format=html">ldapd(8)</a>, Wrap searches in a read-only transaction so it is guaranteed to see a consistent snapshot of the database.
<li>Implemented IP-FORWARD-MIB for IPv4 in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=snmpd&sektion=8&format=html">snmpd(8)</a>.Add support for Intel AES-NI and the CLMUL_ instructions, plus a few others that are needed to omplement accelerated AES (and AES-GCM mode) on newer Intel cores.
<!-- 2010/06/10 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldapd&sektion=8&format=html">ldapd(8)</a>, track changes in btree_txn_* API, pass a NULL btree when also passing a transaction.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldapd&sektion=8&format=html">ldapd(8)</a>, when a btree NULL pointer is passed to a function that accept both btree and a transaction, the btree is taken from the transaction.
<li>Fixes in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sort&sektion=1&format=html">sort(1)</a>: clarify sort's various modes of operation; -m is overridden by -C and -c; ordering options should not appear after -k.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldapd&sektion=8&format=html">ldapd(8)</a>, append a "tombstone" meta page after a database has been compacted. This allows other processes to pick up the change and re-open the file.
<li>Added minimal initial -Tps support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mandoc&sektion=1&format=html">mandoc(1)</a>.
<li>Allowed configure queue expiry in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd&sektion=5&format=html">smtpd(5)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck_ffs&sektion=8&format=html">fsck_ffs(8)</a>, added missing headers needed for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=opendev&sektion=3&format=html">opendev(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=close&sektion=3&format=html">close(3)</a>.
<li>Declare safepri at the MD level on each platform, so that the kern_synch.c does not have to deal with it as a common.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ikectl&sektion=8&format=html">ikectl(8)</a>, added a command to revoke a certificate and generate a CRL; make the ca install command install the CRL as well.
<li>Added a -S flag to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iked&sektion=8&format=html">iked(8)</a> to do the same as ``set passive'' but matches the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8&format=html">isakmpd(8)</a> flag.
<li>Added new commands to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iked&sektion=8&format=html">iked(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ikectl&sektion=8&format=html">ikectl(8)</a>, the couple/decouple commands will set loading of the learned flows and SAs to the kernel the active/passive commands are required to use iked with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sasyncd&sektion=8&format=html">sasyncd(8)</a>.
<li>Stopped printing FEC twice in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldpd&sektion=8&format=html">ldpd(8)</a>.
<li>Added another tree in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iked&sektion=8&format=html">iked(8)</a> to lookup policy SAs by peer address.
<!-- 2010/06/09 -->
<li>Removed the CRYPTO_ALGORITHM_ALL define from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crypto&sektion=4&format=html">crypto(4)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&sektion=8&format=html">ospfd(8)</a>, restricted the interface scope embedding to link local nexthops.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&sektion=8&format=html">ospfd(8)</a>, fixed an infinite loop hit when the prefixlen is not devidable by 32 by decoding prefixes corectly.
<li>Fixed time on Mostek time-of-day chips with dead batteries.
<li>Moved the logging of FEC changes to the LDE and print the FEC and label information.
<li>Allow FFS file system to be mounted by a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8&format=html">disklabel(8)</a> UID.
<li>Fixed MPLS pop operation to make PHP work again.
<li>Reworked UI messages in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1&format=html">pkg_add(1)</a>.
<!-- 2010/06/08 -->
<li>Properly enable <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vscsi&sektion=4&format=html">vscsi(4)</a> on the longsoon platform.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&sektion=8&format=html">ospfd(8)</a> calculate size of update packet with IPv6 header and reserve space for IPsec.
<li>Introduce a diskmap pseudo device which allows userland to open a disk specified via its disklabel UID.
<li>Merged <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mandoc&sektion=1&format=html">mandoc(1)</a> bits that will be going into 1.10.1.
<!-- 2010/06/07 -->
<li>Fixed various problems of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=auich&sektion=4&format=html">auich(4)</a> on SiS 7012 based chips.
<li>Reworked the way onboard devices attach on Sun 4/110 systems.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8&format=html">tcpdump(8)</a>, added minimal decode support for IKEv2 exchange types and payloads.
<li>Fixed a bug which prevented diskless station to boot (PR6382).
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldpd&sektion=8&format=html">ldpd(8)</a> store all labels in ldpd in host byte order without any additional shifting.
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iked&sektion=8&format=html">iked(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ikectl&sektion=8&format=html">ikectl(8)</a> enabled in the build.
</ul>
<p>

This list mentions mostly platform-independent changes.  For a list of changes
made in a particular platform, please check the page for that platform.  If you
find them not listed there, the changes are either (1) not being documented or
(2) are documented here.<br><br>

<hr>
<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="back.gif" border=0 alt="OpenBSD"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus.html,v 1.1164 2010/06/21 22:18:30 deraadt Exp $</small>

</body>
</html>
