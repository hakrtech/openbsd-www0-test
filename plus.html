<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD-current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD-current changes">
<meta name="keywords" content="openbsd,current,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2005 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">Changes made between OpenBSD 3.7 and OpenBSD-current</font></h2>
<hr>

<p>
This is a partial list of the major machine-independent changes
(i.e., these are the changes people ask about most often).  Port
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
Changes to the <a href="ports.html">ports</a> collection are documented
<a href="portsplus/index.html">here</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<a href="plus37.html">3.7</a>.
<br>
</h3>

<p>
<h3><font color="#0000e0">We are working on OpenBSD-current.</font></h3><p>
The following list sums up (almost) all the changes made up to March 29.
<p>

<ul>
<!-- ^ 2005/03/30 -->
<li>Enable StackGhost on sparc64: a really nifty protection mechanism we developed for this architecture.
<li>Add new RAID management program: <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bioctl&sektion=8">bioctl(8)</a>.
<li>Add support for UDF filesystem (generally used on DVDs).
<li>DNS resolver now automatically updates itself when it detects <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=resolv.conf&sektion=5">resolv.conf</a> has changed.
<li>Add lladdr command to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&sektion=8">ifconfig(8)</a> to set MAC address.
<li>Switch i386 over to DWARF-based exception handling.
<li>On zaurus, handle apm_battlow flag by suspending.
<li>Improve security of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=checknr&sektion=1">checknr(1)</a>: handle argv correctly and make sure to NUL terminate all arguments when copying.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strcasestr&sektion=3">strcasestr(3)</a> to libc: a case-insensitive version of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strstr&sektion=3">strstr(3)</a>.
<li>Remove line-length limitations in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diff3&sektion=1">diff3(1)</a>.
<li>Add -F option to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=arp&sektion=8">arp(8)</a> to force replacement of entries.
<li>Zaurus now allows power button to suspend (2 seconds) or nice halt (6 seconds) if machdep.kbdreset=1.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&arch=i386&sektion=8">fdisk(8)</a> to set partition flag with explicit value.
<li>New thread-safe version of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=realpath&sektion=3">realpath(3)</a> that does not use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chdir&sektion=2">chdir(2)</a> at all.
<li>Initial support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tctrl&arch=sparc&sektion=8">tctrl(4)</a> device on SPARCBooks (currently limited to power change events and battery status retrieval).
<li>Improve <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tctrl&arch=sparc&sektion=8">tctrl(4)</a> on sparc: program PCMCIA and power icons on 2nd line of LCD screen.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>, check for IFF_UP when validating routes.
<!-- ^ 2005/03/29 -->
<li>Always use network byte order in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a> when stuffing port numbers into IPSEC ID packets.
<li>Clean up some <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=de&sektion=4">de(4)</a> code and fix Intel 21143 in full-duplex mode.
<li>OpenCVS: start using the public-domain <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=yacc&sektion=1">yacc(1)</a>-based date parser. cvs dates can be ugly and this simplifies things quite a bit.
<li>Recognize Radeon 9200 PRO variants.
<li>Print UDF filesystem type in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8">disklabel(8)</a>.
<li>Fix an issue with ABNT2 keyboards that was stealing the slash key from .br users.
<li>Make linewrap computation more POSIX-compliant in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&sektion=1">dc(1)</a> programs.  Adjust regression tests accordingly.
<li>Add support for relocation type R_ALPHA_SREL32 to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=Xserver&sektion=1">Xserver(1)</a>'s ELF loader.
<li>Rip out <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8">httpd(8)</a>'s homegrown md5 and sha-1 implementations, use ours.
<li>Change root login shell to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&sektion=1">ksh(1)</a>. And there was much rejoicing.
<!-- ^ 2005/03/28 -->
<li>Use USB timeout periods instead of SCSI timeout periods in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=umass&sektion=4">umass(4)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uhub&sektion=4">uhub(4)</a> less chatty at startup.
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt&sektion=3">getopt(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=logresolve&sektion=8">logresolve(8)</a>.
<li>Dynamic call stack support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&sektion=1">dc(1)</a>.
<li>De-#ifdef the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=em&sektion=4">em(4)</a> driver because it just leads to bugs.
<li>Fix potential crash in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bge&sektion=4">bge(4)</a>.
<li>Utilize new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kbd&sektion=8">kbd(8)</a> -l support on the install media.
<li>Support another <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fxp&sektion=4">fxp(4)</a> variant.
<li>Provide support for the -l option in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kbd&sektion=8">kbd(8)</a> even if kvm support is not compiled in.
<li>Improve <a href="hppa.html">hppa</a> support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_hpux&sektion=8">compat_hpux(8)</a>.
<li>Shrink handling of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kbd&sektion=8">kbd(8)</a> in the install scripts.
<li>Simplify privsep state engine in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a>.
<li>Add an Objective-C regression test.
<li>On the <a href="zaurus.html">zaurus</a>, delay slightly at reboot time to permit disk to de-cache or de-spin or whatever it is doing (attempting to avoid some filesystem corruptions).
<li>Repair boot argument parsing on the <a href="zaurus.html">zaurus</a>.
<li>Enable multicast support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=atw&sektion=4">atw(4)</a>.
<li>Enable swap encryption by default.  Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl.conf&sektion=5">sysctl.conf(5)</a> to disable if you wish.
<li><a href="hppa.html">hppa</a> tape and cdrom booting now work.
<li>Use font adding on the SPARCbook; use the ROM font in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pninek&sektion=4&arch=sparc">pninek(4)</a> so that the kernel messages line up with the rom messages.
<li>Enable font adding on <a href="sparc.html">sparc</a>.
<li>Ongoing development in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&sektion=8">osfpd(8)</a>.
<li>Fix a SIGCHLD signal race in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&sektion=8">osfpd(8)</a>.
<li>A variety-pack of shrinkage in the ramdisk install script.
<li>Adjust wording in a few APIWARNings.
<li>Pad hppa ramdisk to 64K, resolves issues with some ROMS.
<li>Fix APIWARNS on i386; ie. cope with moving to version 3 of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&sektion=1">gcc(1)</a>.
<li>Prepare for more RAID-like functionality in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&sektion=4">ccd(4)</a>.
<li>In a few programs, do not assume that optopt is valid in non-error return cases from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt&sektion=3">getopt(3)</a>.
<li>If the full memory window is not mappable in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcic&sektion=4">pcic(4)</a> (because of lots of BIOS mappings) try to use smaller mappings.
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt&sektion=3">getopt(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=htpasswd&sektion=1">htpasswd(1)</a>.
<li>Since scsi START_STOP is an optional command, do not require it to work.  This may help some <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=umass&sektion=4">umass(4)</a> devices.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vlan&sektion=4">vlan(4)</a> error counter repair.
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahc&sektion=4">ahc(4)</a> to prefer memory mapped IO.
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=microuptimet&sektion=9">microuptime(9)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sppp&sektion=4">sppp(4)</a>, because mono_time is no longer always there.
<li>If scsi disks are found to contain more than the maximum supported blocks, truncate to maximum size.
<li>Support <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bcrypt&sektion=3">bcrypt(3)</a> passwords in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=htpasswd&sektion=1">htpasswd(1)</a>.
<li>Missing range check in vfs_hang_addrlist().
<li>Support another <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcmcia&sektion=4">pcmcia(4)</a> <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ne&sektion=4">ne(4)</a> variant.
<li>Continuing work on OpenCVS...
<!-- ^ 2005/03/23 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=zx&sektion=4&arch=sparc">zx(4)</a>, use a shutdown hook to put display back in PROM-compatible mode.
<li>Fix 32-bit mode in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cgfourteen&sektion=4&arch=sparc">cgfourteen(4)</a>.
<li>On SPARCbooks, cope if the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pninek&sektion=4&arch=sparc">pninek(4)</a> blitter does not wake up.
<li>Power control changes for SPARCbooks.
<li>Fix some detach crashes in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ath&sektion=4">ath(4)</a>.
<li>Packet counting fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipw&sektion=4">ipw(4)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iwi&sektion=4">iwi(4)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ral&sektion=4">ral(4)</a>, and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ural&sektion=4">ural(4)</a>.
<li>Print MAC address on startup in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ural&sektion=4">ural(4)</a>.
<li>Various improvements to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&sektion=8">ospfd(8)</a>, mostly catching up to shared <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> sections.
<li>Fix various bugs in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sppp&sektion=4">sppp(4)</a> that help the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=san&sektion=4">san(4)</a> T1 driver.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&sektion=8">ospfd(8)</a> chunks to /etc/rc and /etc/rc.conf.
<li>Silence underrun/overrun errors in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=auich&sektion=4">auich(4)</a> driver.
<li>Fix chipset version errors in the i810 agp driver.
<li>Handle :: effects in LD_LIBRARY_PATH in the i386 codepath through <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&sektion=1">ld.so(1)</a>.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a> compile when nat traversal is disabled.
<li>bind 9.3.1.
<li>More sane interrupt priority levels, thereby fixing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=com&sektion=4">com(4)</a> IO on the zaurus.
<li>Avoid leaking <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=keynote&sektion=3">keynote(3)</a> sessions in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a>.
<li>Be more careful in sparc <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_svr4&sektion=8">compat_svr4(8)</a>.
<li>Crank to 3.7-current
<!-- ^ 2005/03/20 -->
</ul>
<p>

This list mentions mostly platform-independent changes.  For a list of changes
made in a particular platform, please check the page for that platform.  If you
find them not listed there, the changes are either (1) not being documented or
(2) are documented here.<br><br>

<hr>
<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<a href="plus37.html">3.7</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="back.gif" border=0 alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus.html,v 1.952 2005/04/01 03:56:24 cloder Exp $</small>

</body>
</html>
