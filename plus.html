<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD-current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD-current changes">
<meta name="keywords" content="openbsd,current,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2005 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">Changes made between OpenBSD 3.9 and OpenBSD-current</font></h2>
<hr>

<p>
This is a partial list of the major machine-independent changes
(i.e., these are the changes people ask about most often).  Port
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
There is a separate <a href="portsplus/index.html">list of Changes to the ports collection</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>.
<br>
</h3>

<p>
<h3><font color="#0000e0">We are working on OpenBSD-current.</font></h3><p>
<p>

<ul>
<!-- middle of 2006/03/16 -->
<li>Change internal packet encapsulation of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tun&sektion=4">tun(4)</a>.
<li>Fix some "reload" bugs in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifstated&sektion=8">ifstated(8)</a>.
<li>Make AMD PowerNow speed control stuff print nice dmesg lines.
<li>Fix a quirk of ^C in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vi&sektion=1">vi(1)</a>.
<li>Add sysctl_int_lower() API, consequence of which is that root can now lower the machdep.allowaperture variable without rebooting.
<li>Some i386 laptops need more physmem segments (consequence of the kernel moving up by 1MB).
<li>A few small fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>.
<li>If <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=poll&sektion=2">poll(2)</a> is interrupted, remember ot clear the pollfds array.
<li>The zaurus no longer needs to use the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&sektion=4">xf86(4)</a> aperture.
<li>Fix %A printing in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8">spamd(8)</a>.
<li>Move parsing of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconctl.conf&sektion=5">wsconctl.conf(5)</a> to earlier in the /etc/rc sequence, so that people can use their remapped control key earlier.
<li>Install <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apm&sektion=4">apm(4)</a> utilities on amd64 so that the hw.setperf sysctl for CPU speed can be conveniently manipulated through them.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=BN_is_prime&sektion=3">BN_is_prime(3)</a> to realize that 2 is prime.  It took the OpenSSL people what... 8 years to fix this?
<li>Fix amd64's <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=exp&sektion=3">exp(3)</a> implementation which was broken in certain cases by switching to the C version.
<li>Repair anonymous logins without passwords in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8">ftpd(8)</a>.
<li>Some churn in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ami&sektion=4">ami(4)</a>, heading towards improvements...
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>, implement Unicast Reverse Path Forwarding (uRPF) which optionally verifies that a packet is received on the interface that holds the route back to the packet's source address. This makes it an automatic ingress filter, but only when routing is fully symmetric.
<li>Add support for Sony CLIE PEG-T625 (and other new) devices in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uvisor&sektion=4">uvisor(4)</a>.
<li>Move the i386 kernel up 1MB in virtual address space to provide more space for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isadma&sektion=4">isadma(4)</a>.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> to work with stdin input (pkg_add -).
<li>On alpha, protect sgmap extents with splvm().
<li>On i386, use pause instructions during IPI lock spinning.
<li>Slightly improve the situation with multi-function <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcmcia&sektion=4">pcmcia(4)</a> cards.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compress&sektion=1">compress(1)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&sektion=1">gzip(1)</a> work without /dev/stdin and /dev/stdout.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a>, allow configuration directives to contain spaces, if wrapped in double quotes.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a>, set TCP_NODELAY flag for all connections not just interactive ones - fixes poor network performance and protocol stalls under some network conditions.
<li>On the i386, fix userldt handling (consequence of recent i386 W^X changes) which causes a crash if a LDT-using process does an execve(). 
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount&sektion=8">mount(8)</a>, add -s flag which skips a mount if the file system is already mounted, handy for MFS partitions.
<li>Switch from using PCI <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=le&sektion=4">le(4)</a> driver to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcn&sektion=4">pcn(4)</a>.
<li>Handle emc6d100 and emc6w201 in the i2c <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adt&sektion=4">adt(4)</a> driver.
<li>Fix local arbitrary command execution vulnerability on local/local and remote/remote copies in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcp&sektion=1">rcp(1)</a>.
<li>Change the install script question 'Do you expect to run the X Window System?' to have 'no' as a default answer, to prevent people accidentially hitting return on the prompt on machines that don't need it.
<li>Fix a few subtle bugs in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vi&sektion=1">vi(1)</a>.
<li>Support IAPP pre-standard port 2313 in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hostapd&sektion=8">hostapd(8)</a>.
<li>A output formatting bug (missing space in command line printing) was recently introduced into <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ps&sektion=1">ps(1)</a>.
<li>Grok %z in the format string warning code for the older gcc we have in the tree.
<li>Foil potential <a href="http://en.wikipedia.org/wiki/Timing_attack">timing attacks</a> in login by using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bcrypt&sektion=3">bcrypt(3)</a> on non-existent users as well, instead of DES.
<li>On amd64, properly route ISA interrupts through ioapics.
<li>Some obscure fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfdf&sektion=8">ospfd(8)</a>.
<li>Support the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iic&sektion=4">iic(4)</a> controller found in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=amdpm&sektion=4">amdpm(4)</a>.
<li>Now AMD PowerNow K8 support works on i386 and amd64, so that hw.setperf can adjust the processor speed.
<li>Serial port support on the Zaurus was busted by the recent clock changes because of an interrupt mask mistake.
<li>Improve the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iic&sektion=4">iic(4)</a> scanning for ADM1030 and ADM1031 devices (supported by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=admtmp&sektion=4">admtemp(4)</a>).
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=grep&sektion=1">grep(1)</a> do proper handling for patterns which include newlines.
<li>Using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcibios&sektion=4&arch=i386">pcibios(4)</a> information, properly initialize the VIA VT8233, and support SiS 962.
<li>Fix the long delay probe for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adb&sektion=4&arch=macppc">adb(4)</a> on some machines (in particular, the powerpc Mac Mini).
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>, group block parameters were reset to default (duh, that is wrong).
<li>Repair a really stupid (and old) bug in spanning-tree <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bridge&sektion=4">bridge(4)</a> support.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> work with scp (see PKG_PATH).
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a>, implement diffie-hellman-group-exchange-sha256 key exchange method (which is now default when client/server support it).
<li>In the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=com&sektion=4">com(4)</a> driver, add support for the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cardbus&sektion=4">cardbus(4)</a> Sony Ericsson GC89 UMTS/GPRS/GSM modem.
<li>For all you Road Warriors in need of more dynamic IPSEC, in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecctl&sektion=8">ipsecctl(8)</a>, add dynamic option ("ike dynamic esp") which uses the system hostname as source identifier instead of the IP address. See <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec.conf&sektion=5">ipsec.conf(5)</a>.
<li>Repair UDMA for the Via VT8237 in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&sektion=4">pciide(4)</a> driver.
<li>Fix a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mmap&sektion=2">mmap(2)</a> related panic.
<li>Fit <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mt&sektion=1">mt(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=eject&sektion=1">eject(1)</a> onto all the install media.
<li>Add some <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=acpi&sektion=4">acpi(4)</a> debugging support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ddb&sektion=4">ddb(4)</a>.
<li>Move remaining bits of the network stack to use splnet instead of splimp, see <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spl&sektion=9">spl(9)</a>.
<li>OpenCVS development continues with new energy.
<li>Stop trying to allocate rotationally optimal blocks in FFS, since modern disks don't care.
<li>Repair stdin handling in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sdiff&sektion=1">sdiff(1)</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tun&sektion=4">tun(4)</a> is not a point-to-point interface, but a tunnel.
<li>Fix a buffer cache race in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnd&sektion=4">vnd(4)</a>.
<li>Fix a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cap_mkdb&sektion=1">cap_mkdb(1)</a>.
<li>Fix a bug in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&sektion=1">tar(1)</a> that cut short our filename lengths by one miserable character.
<li>Initial 1-Wire <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=onewire&sektion=4">onewire(4)</a> bus support, including drivers for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gpioow&sektion=4">gpioow(4)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=owid&sektion=4">owid(4)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=owtemp&sektion=4">owtemp(4)</a>.
<li>More churn in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a>.
<li>In X11, support 10-bit color DAC video cards on Alpha TGA2 cards.
<li>Do underlining in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=zx&sektion=1&arch=sparc">zx(4)</a> sparc/sparc64 video driver.
<li>Fix an old bug on ARM-based machines, that would very rarely and very randomly deliver a SIGBUS that was not expected or wanted by anyone.
<li>Display cpu states right away (not delayed) in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=top&sektion=1">top(1)</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=art&sektion=4">art(4)</a> now works on sparc64 as well. 
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ami&sektion=4">ami(4)</a>, support a few more re-licensed parts by ACER, FSC, Intel and NEC.
<li>Support Compaq Flash Socket CF 10/100 card in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ne&sektion=4">ne(4)</a>.
<li>Support National Semiconductor DP83847 DsPHYTER PHY in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nsphyter&sektion=4">nsphyter(4)</a>.
<li>Some repair to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vic&sektion=4">vic(4)</a> so that it might soon work for VMWARE.
<li>Handle National Semicondutor lm96000 in the i2c <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adt&sektion=4">adt(4)</a> driver.
</ul>
<p>

This list mentions mostly platform-independent changes.  For a list of changes
made in a particular platform, please check the page for that platform.  If you
find them not listed there, the changes are either (1) not being documented or
(2) are documented here.<br><br>

<hr>
<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<a href="plus37.html">3.7</a>.
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="back.gif" border=0 alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus.html,v 1.1002 2006/03/16 17:20:29 deraadt Exp $</small>

</body>
</html>
