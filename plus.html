<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD-current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD-current changes">
<meta name="keywords" content="openbsd,current,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2002 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color=#e00000>Changes made between OpenBSD 3.1 and OpenBSD-current</font><hr></h2>

<p>
This is a partial list of the major machine-independent changes
(i.e., these are the changes people ask about most often).  Port
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
Changes to the <a href="ports.html">ports</a> collection are documented
<a href="portsplus/index.html">here</a>.

<p>
Note: <font color=#e00000>Problems for which patches exist are marked in red</font>.

<p>
<h3>
<a href="plus20.html">For changes leading up to OpenBSD 2.0, click here</a>.<br>
<a href="plus21.html">For changes leading up to OpenBSD 2.1, click here</a>.<br>
<a href="plus22.html">For changes leading up to OpenBSD 2.2, click here</a>.<br>
<a href="plus23.html">For changes leading up to OpenBSD 2.3, click here</a>.<br>
<a href="plus24.html">For changes leading up to OpenBSD 2.4, click here</a>.<br>
<a href="plus25.html">For changes leading up to OpenBSD 2.5, click here</a>.<br>
<a href="plus26.html">For changes leading up to OpenBSD 2.6, click here</a>.<br>
<a href="plus27.html">For changes leading up to OpenBSD 2.7, click here</a>.<br>
<a href="plus28.html">For changes leading up to OpenBSD 2.8, click here</a>.<br>
<a href="plus29.html">For changes leading up to OpenBSD 2.9, click here</a>.<br>
<a href="plus30.html">For changes leading up to OpenBSD 3.0, click here</a>.<br>
<a href="plus31.html">For changes leading up to OpenBSD 3.1, click here</a>.<br>
<br>
</h3>

<hr>
This file is not currently maintained, because the people who can edit
and maintain it are WAY too busy to keep it updated.  Eventually we hope
to catch up.  Really.
<hr>

<p>
<h3><font color=#0000e0>We are working on OpenBSD-current.</font></h3><p>
The following list sums up (almost) all the changes made up to May 24th.
<ul>
<li>Support mixed IPv4/IPv6 address lists in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keysign">ssh-keysign(8)</a>.
<li>Remove obsolete <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dm&sektion=8&manpath=OpenBSD+3.0">dm(8)</a>.
<li>Hunt for biodone() calls not made at splbio() <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spl&sektion=9">spl(9)</a>, and fix them.
<li>Improve <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_cd9660&sektion=8">cd9660</a> filesystem read-ahead performance.
<li>Support software brightness and backlight control on various macppc models.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl&sektion=8">wsconsctl(8)</a> to control brightness and backlight on displays which
support this.
<li>New libc IEEE floating-point code and libm routines for hppa.
<li>splassert (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spl&sektion=9">spl(9)</a>) on i386.
<li>More steps toward the death of unsafe string functions.
<li>splassert (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spl&sektion=9">spl(9)</a>) on sparc64.
<li>Add a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=creator&sektion=4&arch=sparc64">creator(4)</a> driver for sparc64 Creator and Creator3D cards.
<li>Jumbo <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpr&sektion=1">lpr(1)</a> changes including IPv6 support, new features, and bugfixes.
<li>Still more hppa memory management and low-level code fixes.
<li>Simple pmap optimization on macppc.
<li>Did we mention the cleaning of the installation scripts, adding functionality yet reducing size?
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ddb&sektion=4">ddb(4)</a> to do a stack trace into the kernel message buffer.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isp&sektion=4">isp(4)</a> fixes.
<li><font color=#e00000><strong>SECURITY FIX: Fix incorrect ACL check when using BSD authentication in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&sektion=8">sshd(8)</a>.</strong></font><br>
    <a href="errata.html#sshbsdauth">A source code patch is available</a>.<br>
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<li>Fix a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&sektion=1">mg(1)</a>.
<li>New systrace facility.
<li>Better Cyrix cpu support.
<li>ECN support.
<li>Support SNTP in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&sektion=8">rdate(8)</a>.
<li>Fix infinite SIGFPE loop situations on vax.
<li>Remove unnecessary setuid bit from binaries that either do not need it or
whose functionality requiring root privileges should only be invoked by root
anyways, or which can be changed into a setgid bit for a specific group.
<li>Switch <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skey&sektion=1">skey(1)</a> management to per-user directories instead of a flat file and drop setuid bit on related tools.
<li>Lots of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ppp&sektion=8">ppp(8)</a> goodies.
<li>New splassert (see <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spl&sektion=9">spl(9)</a>) debug functionality on sparc.
<li>Enable Altivec instructions in macppc kernels.
<li>Support more Hifn cards (7814, 7851, 7854) via the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nofn&sektion=4">nofn(4)</a> driver.
<li>OpenSSL 0.9.7.
<li>Completely rework <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=at&sektion=1">at(1)</a> and related binaries, and make them POSIX-compliant.
<li>More use of hardware crypto cards functionality via <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ubsec&sektion=4">ubsec(4)</a>.
<li>More hppa memory management fixes.
<li>binutils 2.11.2.
<li>Add per-gid filtering to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>.
<li>Switch <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=at&sektion=1">at(1)</a> to be setgid crontab as well.
<li>Handle host names resolving in several addresses in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<li>Fix compilation warnings for various userland programs.
<li>Add a new user, crontab, and change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&sektion=8">cron(8)</a> from being setuid root to being setgid crontab.
<li>Add per-uid filtering to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>.
<li>More <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usb&sektion=4">usb(4)</a> support updates.
<li>More <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ubsec&sektion=4">ubsec(4)</a>
hackery to get it to do more crypto operations, and hack
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hifn&sektion=4">hifn(4)</a>
and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lofn&sektion=4">lofn(4)</a>
to work with this.
<li>Your average extensive cleaning of the installation scripts, adding functionality yet reducing size.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adb&sektion=4&arch=powerpc">adb(4)</a> french keyboard layout on macppc.
<li>Switch ELF platforms to the native <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gprof&sektion=1">gprof(1)</a>.
<li>Obtain a better licence for the hppa spmath routines.
<li>Add an <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=url&sektion=4">url(4)</a> driver for Realtek RTL8150L-based USB cards.
<li>mvme88k pmap bugfixes.
<li>Various <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usb&sektion=4">usb(4)</a> driver updates.
<li>Remove <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rlogin&sektion=1&manpath=OpenBSD+3.0">rlogin(1)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rlogind&sektion=8&manpath=OpenBSD+3.0">rlogind(8)</a> and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rexecd&sektion=8&manpath=OpenBSD+3.0">rexecd(8)</a>.
<li>Fix several wrong computations in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&sektion=8">newfs(8)</a>.
<li>Workaround ghost pcibus detection in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pchb&sektion=4">pchb(4)</a>.
<li>Add a tuner driver for the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fms&sektion=4">fms(4)</a> radio cards.
<li>Allow userland to know which <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> rule created a specific state.
<li>Prevent a 3.0 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsmoused&sektion=8&arch=i386">wsmoused(8)</a> binary from panic'ing the kernel.
<li>Enable privsep by default in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&sektion=8">sshd(8)</a>.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=find&sektion=1">find(1)</a>'s -anewer and -cnewer options behaviour.
<li>Sprinkle ptrdiff_t and size_t types instead of int all over the tree.
<li>Support LBA48 addressing in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wdc&sektion=4">wdc(4)</a>.
<li>Bring back TURBOchannel alpha hardware support.
<li>Fix a slightly incorrect behaviour of the device cloning in UKC (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot_config&sektion=8">boot_config(8)</a>).
<li><font color=#e00000><strong>SECURITY FIX: cause the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=exec&sektion=3">exec(3)</a> to fail if we are unable to allocate resources when dup-ing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=null&sektion=4">/dev/null(4)</a> to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fd&sektion=4">fd(4)</a>'s 0-2 for setuid programs.</strong></font><br>
    <a href="errata.html#fdalloc2">A source code patch is available</a>.<br>
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<li>Extended Attributes code updates.
<li>Improve PS/2 mouse port detection in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pckbc&sektion=4">pckbc(4)</a>.
<li>Better <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hifn&sektion=4">hifn(4)</a> initialization and memory usage.
<li>Extensive cleaning of the installation scripts, adding functionality yet reducing size. No, you're not having a deja vu.
<li>Fix ethernet interrupt level on sparc, and rework the sparc interrupt framework.
<li>Better color depth detection in Xwsfb.
<li>64-bit fixes in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vmstat&sektion=8">vmstat(8)</a>.
<li>Improve dma processing in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bge&sektion=4">bge(4)</a>.
<li><font color=#e00000><strong>RELIABILITY FIX: constrain readdirplus request count in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_nfs&sektion=8">nfs(8)</a> filesystem.</strong></font><br>
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<li>Switch macppc console from the rcons engine to the rasops engine.
<li>Extensive cleaning of the installation scripts, adding functionality yet reducing size. Yes, once again.
<li>Add IEEE754 floating point completion code on alpha.
<li>Improve dma processing in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gx&sektion=4">gx(4)</a>.
<li>Build the XFree86 GLX extension on sparc64.
<li>Hunt for outdated prototypes for character devices entry points and fix them.
<li>Switch mvme88k to the new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=MAKEDEV&sektion=8&arch=mvme68k">MAKEDEV(8)</a> generation framework.
<li>Implement the -s option in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=m4&sektion=1">m4(1)</a>, for it to be POSIX-compliant.
<li>Kill all mvme68k kernel compilation warnings.
<li>Assorted mac68k code cleanups.
<li>Shared key support in hostap mode in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&sektion=4">wi(4)</a>.
<li>Make Xwsfb support <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tga&sektion=4&arch=alpha">tga(4)</a> cards on alpha.
<li>Fix a lock leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ami&sektion=4">ami(4)</a>.
<li><font color=#e00000><strong>SECURITY FIX: update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&sektion=8">sudo(8)</a> to sudo 1.6.6.</strong></font><br>
    <a href="errata.html#sudo">A source code patch is available</a>.<br>
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<li><font color=#e00000><strong>RELIABILITY FIX: avoid buffer overrun on PASV from a malicious server in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&sektion=1">ftp(1)</a>.</strong></font><br>
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<li>Add a Soundforte radio driver, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sfr&sektion=4&arch=i386">sfr(4)</a>.
<li>Add dynamic interface -&gt; address translation in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>.
<li>Add kernel hooks on ethernet interfaces, triggered by address changes.
<li>Extended Attributes code updates.
<li>Enable the Freetype library on sparc64.
<li>Add queueing in the kernel crypto framework.
<li>Make the system includes C++ friendly.
<li>Allow explicit filtering of non-reassembled fragments in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>.
<li>Support more hardware and fix stability issues in the mac68k <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sn&sektion=4&arch=mac68k">sn(4)</a> network driver.
<li>Improved Lithuanian keyboard map for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&sektion=4">wscons(4)</a>.
<li><font color=#e00000><strong>SECURITY FIX: fix a buffer overflow in AFS/Kerberos token handling in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&sektion=8">sshd(8)</a>, and send a complete ticket.</strong></font><br>
    <a href="errata.html#sshafs">A source code patch is available</a>.<br>
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<li>Fix a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&sektion=1">mg(1)</a>.
<li>Assorted hppa memory management fixes.
<li>Allow fractional delays in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=top&sektion=1">top(1)</a>.
<li>Enable upgrade functionality again on alpha installation media.
<li>Extensive cleaning of the installation scripts, adding functionality yet reducing size.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1">cvs(1)</a> create the .cvspass file on a login operation if it does not exist, rather than failing.
<li>Extend mac68k disklabels to 16 partitions, like all the other platforms.
<li>Add cddb support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cdio&sektion=1">cdio(1)</a>.
<li>Support more network cards with the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&sektion=4">dc(4)</a> driver.
<li>Improve sparc pmap behaviour in some low memory conditions.
<li>sendmail 8.13.
<li>Switch mvme68k to the new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=MAKEDEV&sektion=8&arch=mvme68k">MAKEDEV(8)</a> generation framework.
<li>Improve the library logic in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld&sektion=1">ld(1)</a> to increase speed and decrease memory usage on a.out platforms.
<li>New mvme68k installation media.
<li>Change fpu probe routine on mac68k.
<li>Fix an obscure bug in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sed&sektion=1">sed(1)</a>.
<li>Support more wireless cards with the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&sektion=4">wi(4)</a> driver, and fix a few issues within.
<li>Fix 64-bit issues in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<li>Remove the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wx&sektion=4&manpath=OpenBSD+3.0">wx(4)</a> driver,
which had been deprecated in favor of the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gx&sektion=4">gx(4)</a> driver.
</ul>
<p>

This list mentions mostly platform-independent changes.  For a list of changes
made in a particular platform, please check the page for that platform.  If you
find them not listed there, the changes are either (1) not being documented or
(2) are documented here.<br><br>

<hr>
<p>
<h3>
<a href="plus20.html">For changes leading up to OpenBSD 2.0, click here</a>.<br>
<a href="plus21.html">For changes leading up to OpenBSD 2.1, click here</a>.<br>
<a href="plus22.html">For changes leading up to OpenBSD 2.2, click here</a>.<br>
<a href="plus23.html">For changes leading up to OpenBSD 2.3, click here</a>.<br>
<a href="plus24.html">For changes leading up to OpenBSD 2.4, click here</a>.<br>
<a href="plus25.html">For changes leading up to OpenBSD 2.5, click here</a>.<br>
<a href="plus26.html">For changes leading up to OpenBSD 2.6, click here</a>.<br>
<a href="plus27.html">For changes leading up to OpenBSD 2.7, click here</a>.<br>
<a href="plus28.html">For changes leading up to OpenBSD 2.8, click here</a>.<br>
<a href="plus29.html">For changes leading up to OpenBSD 2.9, click here</a>.<br>
<a href="plus30.html">For changes leading up to OpenBSD 3.0, click here</a>.<br>
<a href="plus31.html">For changes leading up to OpenBSD 3.1, click here</a>.<br>
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="back.gif" border=0 alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus.html,v 1.828 2002/06/18 01:44:05 jsyn Exp $</small>

</body>
</html>
