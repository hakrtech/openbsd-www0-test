<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD-current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD-current changes">
<meta name="keywords" content="openbsd,current,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2006 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">Changes made between OpenBSD 3.9 and OpenBSD-current</font></h2>
<hr>

<p>
This is a partial list of the major machine-independent changes
(i.e., these are the changes people ask about most often).  Port
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
There is a separate <a href="portsplus/index.html">list of Changes to the ports collection</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>.
<br>
</h3>

<p>
<h3><font color="#0000e0">We are working on OpenBSD-current.</font></h3><p>
<p>

<ul>
<!-- 2006/04/06 -->
<!-- 2006/04/05 -->
<li>Update to BIND 9.3.2
<li>Endian fix for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=an&sektion=4&format=html">an(4)</a>, now also enabled on hppa, hppa64 and macppc.
<li>Reap child processes asynchronously in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hotplugd&sektion=8&arch=i386&format=html">hotplugd(8)</a>.
<!-- 2006/04/04 -->
<li>Add power hook to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bge&sektion=4&format=html">bge(4)</a>.
<li>Enable <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tqphy&sektion=4&format=html">tqphy(4)</a> for macppc found on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xl&sektion=4&format=html">xl(4)</a> cards.
<li>Add "set nexthop self" support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8&format=html">bgpd(8)</a>.
<li>DMA fixes for xscale ARM when changing DMA completion handler.
<li>Remove bundled dbm and regex lib from httpd, it picks up our dbm anyhow.
<!-- 2006/04/03 -->
<li>Installation fixes for Zaurus C3200, avoids a known problem in zbsdmod.
<li>When parsing file urls in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&sektion=1&format=html">ftp(1)</a>, ignore http_proxy.
<li>Don't nul-terminate GSSAPI buffers in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1&format=html">ssh(1)</a>.
<!-- 2006/04/02 -->
<li>Fix interactivity issues in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ami&sektion=4&format=html">ami(4)</a> and remove a busywait.
<li>Prevent panic in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iwi&sektion=4&format=html">iwi(4)</a> if pre-3.0 firmware is being loaded.
<li>Fix for timestamp setting problem over nfs.
<li>Fix for ctrl-W in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&sektion=1&format=html">mg(1)</a>.
<li>Lots of small non-invasive changes in preparation for FFS2.
<li>Allow 32-bit session-ids in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1&format=html">ssh(1)</a> now that sha256 kex is used.
<!-- 2006/04/01 -->
<li>Make som channels in ICH IDE/SATA controllers native to be able to use the maximum number of disks.
<li>Fix for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sensorsd&sektion=8&format=html">sensorsd(8)</a>, it will now probe all sensors even if gaps are found in the list.
<li>Plug huge memleak in libc regarding how the semantics around telldir() works.
<!-- 2006/03/31 -->
<li>Fix memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sasyncd&amp;sektion=8&amp;format=html">sasyncd(8)</a>.
<li>Add sysctl to retrieve routing table statistics.
<li>Small steps taken in preparation for FFS2.
<!-- 2006/03/30 -->
<li>Add support for GSM modem SIEMENS ES75 on usb.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iop&amp;sektion=4&amp;format=html">iop(4)</a> to amd64 GENERIC.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a>, make sure we handle truncated files while converting keys, and also prevent duplicate log messages when privsep=yes.
<li>Add percent escape chars to the IdentityFile option in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh_config&amp;sektion=5&amp;format=html">ssh_config(5)</a>.
<!-- 2006/03/29 -->
<li>When <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> asks y/n, it will now also accept "F" to force yes to all further questions.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1&amp;format=html">ftp(1)</a>, allow fetching zero-length files, and also fix progress-meter for &gt;2G files.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=it&amp;sektion=4&amp;format=html">it(4)</a> detection on newer ASUS boards for i386 and amd64.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ami&amp;sektion=4&amp;format=html">ami(4)</a> sync_cache command so it can run asynchronously.
<!-- 2006/03/28 -->
<li>Enable MPI-401 MIDI UART on amd64 GENERIC.
<li>Imported Perl 5.8.8
<li>Add simple printer for IEEE 802.1AB LLDP to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8&amp;format=html">tcpdump(8)</a>.
<li>Add Intel 82801GB SATA support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&amp;sektion=4&amp;format=html">pciide(4)</a>.
<li>Add more space to memory columns in the vm page for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systat&amp;sektion=1&amp;format=html">systat(1)</a>.
<!-- 2006/03/27 -->
<li>Sync <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=em&amp;sektion=4&amp;format=html">em(4)</a> with Intels FreeBSD em (5.1.5) driver, adds support for 82563 PCI Express chipsets and a few fixes.
<li>Added some HiFn, Safenet and Bluesteel crypto cards to GENERIC on alpha.
<li>Rework of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iwi&amp;sektion=4&amp;format=html">iwi(4)</a>, enabling s/w antenna diversity, upgrade firmware to v3.0 layout and reworked rings allocation.
<li>Sync <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ixgb&amp;sektion=4&amp;format=html">ixgb(4)</a> with Intels FreeBSD ixgb (5.0.1) driver.
<li>Add support for Realtek RT8111B PCI Express Gbit MAC.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pstat&amp;sektion=8&amp;format=html">pstat(8)</a>, check for syncer vnodes before calling fs specific routines, so NFS and ext2fs gets correctly handled.
<!-- 2006/03/26 -->
<li>Split serial on macppc so zs devices are ttya and tty00 supports <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=com&amp;sektion=4&amp;format=html">com(4)</a> devices.
<li>Sync libpcap with tcpdump.org's 0.9 APIs.
<li>Added support for accessing 8-bit ISA I/O through the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gpio&amp;sektion=4&amp;format=html">gpio(4)</a> framework. Makes Acrosser AR-B1662 boards work.
<li>Added support for Falcom Samba GPRS modem in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uftdi&amp;sektion=4&amp;format=html">uftdi(4)</a> driver.
<li>Dont allow gpio ping change if /dev/gpio was opened in read-only mode.
<li>Per-file I/O accounting is now possible to show in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstat&amp;sektion=1&amp;format=html">fstat(1)</a>.
<!-- 2006/03/25 -->
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&amp;sektion=4&amp;format=html">bpf(4)</a> to ignore packets based on their direction.
<li>Fixup IP checksum when modifying IP header fields in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;format=html">pf(4)</a>.
<!-- 2006/03/24 -->
<li>Fixes for the receive filter in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sis&amp;sektion=4&amp;format=html">sis(4)</a> when enabling/disabling promiscous mode.
<li>On <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&amp;sektion=1&amp;format=html">dc(1)</a>, show error message if the argument is a directory.
<li>Added support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=umsm&amp;sektion=4&amp;format=html">umsm(4)</a> serial interface for Qualcomm MSM EVDO modems. Enabled on amd64, hppa, hppa64, i386 and macppc.
<!-- 2006/03/23 -->
<li>Turn on PCI parity checking on sparc64, and set the PCI latency timer for bus master devices.
<li>Fix for adb keyboard caps key problem, if remapped to a dead key.
<!-- 2006/03/22 -->
<li>Fix for broken amd64 mpbios'es on VT8237 and nForce4 chipsets. Fixes interrupt routing for SATA on those when running GENERIC.MP. 
<li>Various fixes from the NetBSD coverity runs.
<li>Add support for macros in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec.conf&amp;sektion=5&amp;format=html">ipsec.conf(5)</a>.
<li>Change the way <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&amp;sektion=8&amp;format=html">bgpd(8)</a> selects nexthops. Required for complex setups e.g. where an additional IGP is running.
<li>Add a new SHOW imsg to send optional attributes in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&amp;sektion=8">bgpd(8)</a> - used to show communities in bgpctl output.
<li>Rework signal handling in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8">ftp-proxy(8)</a>.
<li>Add a helper pci_find_device() function to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pci&amp;sektion=4">pci(4)</a> to enumerate the PCI bus.
<li>Plug a memory leak and fix a possible crash in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usbhid&amp;sektion=3">usbhid(3)</a>.
<li>In the /etc/security script, deal with the fact that some shell scripts may contain binary characters.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>, fix an infinite loop in case of an error in the archive header.
<li>Implement the Michael MIC as defined in IEEE 802.11i for TKIP.  This generates a weak 64-bit digest protected by an additional key - required for future IEEE 802.11i/WPA support.
<li>Better error checking in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ural&amp;sektion=4">ural(4)</a> read and show real MAC/BBP rev as determined, instead of the hardcoded RT2570.
<li>Fix panic on iMac G5 (iSight) in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smu&amp;apropos=0&amp;sektion=0&amp;manpath=OpenBSD+Current&amp;arch=macppc&amp;format=html">smu(4)</a> due to a missing kernel unlock.
<li>Fix an out-of-bounds memory access in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">ksh(1)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=m4&amp;sektion=1">m4(1)</a>, add limited support for format builtin in gnu-m4 mode. This is used by some autoconf scripts.
<li>Allow the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&amp;sektion=4">wscons(4)</a> wsfb X server to run without the need for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&amp;sektion=4">xf86(4)</a> aperture to be set.
<li>In the X server, use /dev/pci to access the PCI configuration space on i386 and amd64, instead of directly accessing the addresses from userland.
<li>A large amount of memory leak plugging in various system utilities inspired by Coverity reports, as well as ruling out of hypothetical NULL dereferences.
<li>Many changes in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> to be more careful with types.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>, make sure the command fifo is ready before returning - fixes a startup race when interacting with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecctl&amp;sektion=8">ipsecctl(8)</a>.
<li>Improve  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lint&amp;sektion=1">lint(1)</a> to reduce more false positives and thus make the output more useful.
<li>Fix some memory leaks in ssh's <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gssapi&amp;sektion=3">gssapi(3)</a> code.
<li>Change powerpc's BLKDEV_IOSIZE down to 2KB like on all other platforms.
<li>Recognize more Intel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pci&amp;sektion=4">pci(4)</a> devices as found on the Acer Travelmate 3012WTMi laptop.
<li>Plug memory leak and potential NULL dereference in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hash&amp;sektion=3">hash(3)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=asa&amp;sektion=1">asa(1)</a> use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt&amp;sektion=3">getopt(3)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&amp;sektion=8">init(8)</a>, plug potential memory leaks in error path.
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcn&amp;sektion=4">pcn(4)</a> to recognize Am79c976 and Am79c978.
<li>On sparc64, use OFW nodes to enumerate the PCI bus. This makes detection of devices hiding behind bridges more reliable.
<li>Extend PCI bus enumeration to allow architecture-specific hooks.
<li>Plug potential memory and descriptor leaks in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp&amp;sektion=1">sftp(1)</a>.
<li>Provide new amd64-specific implementation of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=exp&amp;sektion=3">exp(3)</a>.
<li>Plug memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=revnetgroup&amp;sektion=8">revnetgroup(8)</a>.
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=it&amp;sektion=4">it(4)</a> to probe IT8712F-a and SiS950 devices.
<li>Rework tty handling in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bc&amp;sektion=1">bc(1)</a> so that things get cleaned up reliably on abort.
<li>Place reasonable bounds on memory usage of bufferevents in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=event&amp;sektion=3">libevent</a>.
<li>Provide implementations of the C99 math functions <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=trunc&amp;sektion=3">trunc(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=truncf&amp;sektion=3">truncf(3)</a>.
<li>Plug memory leaks and a possible NULL dereference in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&amp;sektion=1">systrace(1)</a>.
<li>Make isadma happier on alpha by honoring the 'high' parameter in _bus_dmamem_alloc_range.
<li>Change implementation of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=delay&amp;sektion=9">delay(9)</a> on alpha to use rpcc instruction.
<li>Plug memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usbhid&amp;sektion=3">usbhid(3)</a>.
<li>Clean up <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fts&amp;sektion=3">fts(3)</a> leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cp&amp;sektion=1">cp(1)</a>.
<li>Clean up file descriptor leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8">authpf(8)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ptrace&amp;sektion=2">ptrace(2)</a> single-stepping work on alpha.
<li>Fix an off-by-one error in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1">csh(1)</a> error handling.
<li>Simplify descriptor cleanup in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">ksh(1)</a>, helping us to avoid any descriptor leaks that may have existed.
<li>Fix an off-by-one error in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping6&amp;sektion=8">ping6(8)</a>.
<li>Drastically simplify handling of SCSI vs. AMI commands in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ami&amp;sektion=4">ami(4)</a> driver.  This is the first step to supporting more RAID features.
<li>Correctly deal with -I (interactive) option in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcs&amp;sektion=1">rcs(1)</a> co command.
<li>Improve clarity of messages in SGI installer.
<li>Fix some off-by-one errors in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=talkd&amp;sektion=8">talkd(8)</a>.
<li>Delint various size_t/ssize_t/int mismatches in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1">cvs(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcs&amp;sektion=1">rcs(1)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcs&amp;sektion=1">rcs(1)</a>, set exit code when checking out a specific revisions fails.
<li>Fix value of hw.cpuspeed sysctl on certain Pentium III models (early stepping 1 Coppermines).  (<a href="http://cvs.openbsd.org/cgi-bin/query-pr-wrapper?full=yes&amp;numbers=4966">PR 4966</a>).
<li>Turn EXTENT_ALIGN into an inline function, shaves 100 bytes from RISC kernels.
<li>Remove unused code from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=siop&amp;sektion=4">siop(4)</a>, shaves half a KB from kernel.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mincore&amp;sektion=2">mincore(2)</a> to pass byte count to UVM functions, rather than page count.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lmc&amp;sektion=4">lmc(4)</a> driver, consolidate error message array to shrink kernel by about 1KB.
<li>Clean up and ANSIfy <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tip&amp;sektion=1">tip(1)</a> code and fix some latent bugs.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcs&amp;sektion=1">rcs(1)</a> co command honor the -q option.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scp&amp;sektion=1">scp(1)</a>, display error messages even when remote stdout is not initialized.
<li>Optimize <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tun&amp;sektion=4">tun(4)</a> by using mbuf clusters instead of mbuf chains for large packets.
<li>Fix some "reload" bugs in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifstated&amp;sektion=8">ifstated(8)</a>.
<li>Make AMD PowerNow speed control stuff print nice dmesg lines.
<li>Fix a quirk of ^C in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vi&amp;sektion=1">vi(1)</a>.
<li>Add sysctl_int_lower() API, consequence of which is that root can now lower the machdep.allowaperture variable without rebooting.
<li>Some i386 laptops need more physmem segments (consequence of the kernel moving up by 1MB).
<li>A few small fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&amp;sektion=8">bgpd(8)</a>.
<li>If <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=poll&amp;sektion=2">poll(2)</a> is interrupted, remember to clear the pollfds array.
<li>The zaurus no longer needs to use the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&amp;sektion=4">xf86(4)</a> aperture.
<li>Fix %A printing in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>.
<li>Move parsing of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconctl.conf&amp;sektion=5">wsconctl.conf(5)</a> to earlier in the /etc/rc sequence, so that people can use their remapped control key earlier.
<li>Install <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apm&amp;sektion=4">apm(4)</a> utilities on amd64 so that the hw.setperf sysctl for CPU speed can be conveniently manipulated through them.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=BN_is_prime&amp;sektion=3">BN_is_prime(3)</a> to realize that 2 is prime.  It took the OpenSSL people what... 8 years to fix this?
<li>Fix amd64's <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=exp&amp;sektion=3">exp(3)</a> implementation which was broken in certain cases by switching to the C version.
<li>Repair anonymous logins without passwords in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8">ftpd(8)</a>.
<li>Some churn in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ami&amp;sektion=4">ami(4)</a>, heading towards improvements...
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>, implement Unicast Reverse Path Forwarding (uRPF) which optionally verifies that a packet is received on the interface that holds the route back to the packet's source address. This makes it an automatic ingress filter, but only when routing is fully symmetric.
<li>Add support for Sony CLIE PEG-T625 (and other new) devices in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uvisor&amp;sektion=4">uvisor(4)</a>.
<li>Move the i386 kernel up 1MB in virtual address space to provide more space for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isadma&amp;sektion=4">isadma(4)</a>.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a> to work with stdin input (pkg_add -).
<li>On alpha, protect sgmap extents with splvm().
<li>On i386, use pause instructions during IPI lock spinning.
<li>Slightly improve the situation with multi-function <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcmcia&amp;sektion=4">pcmcia(4)</a> cards.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compress&amp;sektion=1">compress(1)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&amp;sektion=1">gzip(1)</a> work without /dev/stdin and /dev/stdout.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a>, allow configuration directives to contain spaces, if wrapped in double quotes.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a>, set TCP_NODELAY flag for all connections not just interactive ones - fixes poor network performance and protocol stalls under some network conditions.
<li>On the i386, fix userldt handling (consequence of recent i386 W^X changes) which causes a crash if a LDT-using process does an execve(). 
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount&amp;sektion=8">mount(8)</a>, add -s flag which skips a mount if the file system is already mounted, handy for MFS partitions.
<li>Switch from using PCI <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=le&amp;sektion=4">le(4)</a> driver to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcn&amp;sektion=4">pcn(4)</a>.
<li>Handle emc6d100 and emc6w201 in the i2c <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adt&amp;sektion=4">adt(4)</a> driver.
<li>Fix local arbitrary command execution vulnerability on local/local and remote/remote copies in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcp&amp;sektion=1">rcp(1)</a>.
<li>Change the install script question 'Do you expect to run the X Window System?' to have 'no' as a default answer, to prevent people accidentially hitting return on the prompt on machines that don't need it.
<li>Fix a few subtle bugs in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vi&amp;sektion=1">vi(1)</a>.
<li>Support IAPP pre-standard port 2313 in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hostapd&amp;sektion=8">hostapd(8)</a>.
<li>A output formatting bug (missing space in command line printing) was recently introduced into <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ps&amp;sektion=1">ps(1)</a>.
<li>Grok %z in the format string warning code for the older gcc we have in the tree.
<li>Foil potential <a href="http://en.wikipedia.org/wiki/Timing_attack">timing attacks</a> in login by using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bcrypt&amp;sektion=3">bcrypt(3)</a> on non-existent users as well, instead of DES.
<li>On amd64, properly route ISA interrupts through ioapics.
<li>Some obscure fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&amp;sektion=8">ospfd(8)</a>.
<li>Support the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iic&amp;sektion=4">iic(4)</a> controller found in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=amdpm&amp;sektion=4">amdpm(4)</a>.
<li>Now AMD PowerNow K8 support works on i386 and amd64, so that hw.setperf can adjust the processor speed.
<li>Serial port support on the Zaurus was busted by the recent clock changes because of an interrupt mask mistake.
<li>Improve the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iic&amp;sektion=4">iic(4)</a> scanning for ADM1030 and ADM1031 devices (supported by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=admtmp&amp;sektion=4">admtemp(4)</a>).
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=grep&amp;sektion=1">grep(1)</a> do proper handling for patterns which include newlines.
<li>Using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcibios&amp;sektion=4&amp;arch=i386">pcibios(4)</a> information, properly initialize the VIA VT8233, and support SiS 962.
<li>Fix the long delay probe for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adb&amp;sektion=4&amp;arch=macppc">adb(4)</a> on some machines (in particular, the powerpc Mac Mini).
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&amp;sektion=8">bgpd(8)</a>, group block parameters were reset to default (duh, that is wrong).
<li>Repair a really stupid (and old) bug in spanning-tree <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bridge&amp;sektion=4">bridge(4)</a> support.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a> work with scp (see PKG_PATH).
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a>, implement diffie-hellman-group-exchange-sha256 key exchange method (which is now default when client/server support it).
<li>In the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=com&amp;sektion=4">com(4)</a> driver, add support for the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cardbus&amp;sektion=4">cardbus(4)</a> Sony Ericsson GC89 UMTS/GPRS/GSM modem.
<li>For all you Road Warriors in need of more dynamic IPSEC, in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecctl&amp;sektion=8">ipsecctl(8)</a>, add dynamic option ("ike dynamic esp") which uses the system hostname as source identifier instead of the IP address. See <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec.conf&amp;sektion=5">ipsec.conf(5)</a>.
<li>Repair UDMA for the Via VT8237 in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&amp;sektion=4">pciide(4)</a> driver.
<li>Fix a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mmap&amp;sektion=2">mmap(2)</a> related panic.
<li>Fit <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mt&amp;sektion=1">mt(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=eject&amp;sektion=1">eject(1)</a> onto all the install media.
<li>Add some <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=acpi&amp;sektion=4">acpi(4)</a> debugging support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ddb&amp;sektion=4">ddb(4)</a>.
<li>Move remaining bits of the network stack to use splnet instead of splimp, see <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spl&amp;sektion=9">spl(9)</a>.
<li>OpenCVS development continues with new energy.
<li>Stop trying to allocate rotationally optimal blocks in FFS, since modern disks don't care.
<li>Repair stdin handling in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sdiff&amp;sektion=1">sdiff(1)</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tun&amp;sektion=4">tun(4)</a> is not a point-to-point interface, but a tunnel.
<li>Fix a buffer cache race in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnd&amp;sektion=4">vnd(4)</a>.
<li>Fix a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cap_mkdb&amp;sektion=1">cap_mkdb(1)</a>.
<li>Fix a bug in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a> that cut short our filename lengths by one miserable character.
<li>Initial 1-Wire <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=onewire&amp;sektion=4">onewire(4)</a> bus support, including drivers for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gpioow&amp;sektion=4">gpioow(4)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=owid&amp;sektion=4">owid(4)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=owtemp&amp;sektion=4">owtemp(4)</a>.
<li>More churn in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>.
<li>In X11, support 10-bit color DAC video cards on Alpha TGA2 cards.
<li>Do underlining in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=zx&amp;sektion=1&amp;arch=sparc">zx(4)</a> sparc/sparc64 video driver.
<li>Fix an old bug on ARM-based machines, that would very rarely and very randomly deliver a SIGBUS that was not expected or wanted by anyone.
<li>Display cpu states right away (not delayed) in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=top&amp;sektion=1">top(1)</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=art&amp;sektion=4">art(4)</a> now works on sparc64 as well. 
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ami&amp;sektion=4">ami(4)</a>, support a few more re-licensed parts by ACER, FSC, Intel and NEC.
<li>Support Compaq Flash Socket CF 10/100 card in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ne&amp;sektion=4">ne(4)</a>.
<li>Support National Semiconductor DP83847 DsPHYTER PHY in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nsphyter&amp;sektion=4">nsphyter(4)</a>.
<li>Some repair to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vic&amp;sektion=4">vic(4)</a> so that it might soon work for VMWARE.
<li>Handle National Semicondutor lm96000 in the i2c <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adt&amp;sektion=4">adt(4)</a> driver.
</ul>
<p>

This list mentions mostly platform-independent changes.  For a list of changes
made in a particular platform, please check the page for that platform.  If you
find them not listed there, the changes are either (1) not being documented or
(2) are documented here.<br><br>

<hr>
<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<a href="plus37.html">3.7</a>.
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="back.gif" border=0 alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus.html,v 1.1011 2006/05/19 17:14:57 pvalchev Exp $</small>

</body>
</html>
