<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD-current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD-current changes">
<meta name="keywords" content="openbsd,current,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2002 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">Changes made between OpenBSD 3.3 and OpenBSD-current</font></h2>
<hr>

<p>
This is a partial list of the major machine-independent changes
(i.e., these are the changes people ask about most often).  Port
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
Changes to the <a href="ports.html">ports</a> collection are documented
<a href="portsplus/index.html">here</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>.
<br>
</h3>

<p>
<h3><font color="#0000e0">We are working on OpenBSD-current.</font></h3><p>
The following list sums up (almost) all the changes made up to April 22.
<p>

<ul>
<li>Do a proper bounds check when reading in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lynx&amp;sektion=1">lynx(1)</a> news server name from a file.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a>'s glob now does tilde and brace expansion as well.
<!-- ^ 20030422 -->
<li>On <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gre&amp;sektion=4">gre(4)</a> IP input, use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=m_pullup&amp;sektion=9">m_pullup(9)</a> instead of assuming the header is in the first mbuf's data region.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1">make(1)</a> stop parsing command line arguments after a '--'.
<li>Better bounds checks when expanding curly braces in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1">make(1)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a>, don't set the object load_size field to a negative value because this is likely to be wrong.
<!-- ^ 20030421 -->
<li>Copy the null at the end of the name when adding a realm in Kerberos V.
<!-- ^ 20030420 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8">authpf(8)</a> die the way it should when authpf.conf is missing (PR#3217.)
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ubstat&amp;sektion=4">ubstat(4)</a> output statistics.
<li>Sync <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> with its CVS and bump the version to 1.6.7p4.
<li>Some typedef perfectionism in libwrap.
<li>String cleanup and extra paranoia in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rd&amp;sektion=4">rd(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnd&amp;sektion=4">vnd(4)</a>.
<li>The string cleanup drive continues.
<li>Add support for the Davicom DM9009 chip to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&amp;sektion=4">dc(4)</a>.
<!-- ^ 20030419 -->
<li>Help <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a> further by making <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a> return EINVAL (instead of ENOMEM) if MAP_FIXED was requested but is unavailable.
<li>New -x option for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_msdos&amp;sektion=8">mount_msdos(8)</a> to automagically make directories executable if they're readable.
<li>Unbreak Emacs 21 by fixing a problem with the new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a> part of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a>.
<!-- ^ 20030418 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tun&amp;sektion=4">tun(4)</a> work when only IPv6 endpoints are specified.
<li>Add 4.3BSD's more command for use on some floppies instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a>. More is less.
<li>Change some return values in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&amp;sektion=8">cron(8)</a> from char to int.
<!-- ^ 20030417 -->
<li>Changes to support the new <a href="http://marc.theaimsgroup.com/?l=openbsd-misc&m=105056000801065&w=2">i386 W^X</a> scheme.
<li><a href="http://marc.theaimsgroup.com/?l=openbsd-misc&m=105055555830978&w=2">Move</a> i386 to ELF, a binary upgrade is required for now.
<li>Use the new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a> syscall in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a>, i386 only for now.
<li>Avoid teeth-gnashing delays by making the installer use 'route -n show' instead of 'route show'.
<li>In the kernel ELF loader, use the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uvm&amp;sektion=9">uvm(9)</a> to make sure that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a> doesn't overwrite an area that's already in use.
<li>Fix a buffer overflow that was causing a crash in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a> (PR#3090.)
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apachectl&amp;sektion=8">apachectl(8)</a> now honours $httpd_flags from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;sektion=8">rc.conf(8)</a>.
<li>Remove a race condition in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_mfs&amp;sektion=8">mount_mfs(8)</a>.
<!-- ^ 20030416 -->
<li>Fix some allocation bugs in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a>.
<li>In the kernel's standalone ISO9660 driver, collapse extra slashes in the pathname. This allows files to be loaded from the root of a cd.
<li>Uncomment the line that unloads <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">httpd(8)</a> shared modules on a server shutdown or restart.
<li>Many string fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=named&amp;sektion=8">named(8)</a>, more to come.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> can now display basic HFSC stats.
<li>Much cleanup in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=elf2ecoff&amp;sektion=1">elf2ecoff(1)</a>.
<li>Allocate the right <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getaddrinfo&amp;sektion=3">getaddrinfo(3)</a> buffer size in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rip6query&amp;sektion=8">rip6query(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route6d&amp;sektion=8">route6d(8)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=audioctl&amp;sektion=1">audioctl(1)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=size&amp;sektion=1">size(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>, don't use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=snprintf&amp;sektion=3">snprintf(3)</a>'s return value for pointer arithmetic.
<!-- ^ 20030415 -->
<li>Back out the 'long ATAPI detection delay' fix due to problems with some devices.
<li>Add a missing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=globfree&amp;sektion=3">globfree(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp&amp;sektion=1">sftp(1)</a>.
<li>Correct a number of short space allocations for *printf() integer-to-string conversions.
<li>Fix some problems with the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm&amp;sektion=8">xdm(8)</a> OpenBSD logo, caused by the XFree86 4.3.0 merge.
<li>Don't increment the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping&amp;sektion=1">ping(1)</a> sequence number until we know the packet has been successfully queued for sending.
<li>Include the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=at&amp;sektion=1">at(1)</a> job number in the process title.
<li>Put <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a>'s help text back into a separate file, and allow a reduced-size build for the boot floppies.
<li>Stop using hardcoded SOCK_* types when creating sockets in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a>, to facilitate ssh-over-<a href="http://www.sctp.de/sctp.html">sctp</a>.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> unlink its fifo and pid file on a clean shutdown (PR#3199.)
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping&amp;sektion=8">ping(8)</a> to send zero-length packets with the -s0 option.
<li>Some <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=snprintf&amp;sektion=3">snprintf(3)</a> buffer length fixes in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>.
<!-- ^ 20030414 -->
<li>Add new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a> system call, to provide hints (especially to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a>) on where to put memory mappings.
<li>Make sure <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&amp;sektion=1">systrace(1)</a> leaves space for the trailing null when displaying <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=open&amp;sektion=2">open(2)</a> flags.
<li>Fix bad format strings in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=extattrctl&amp;sektion=8">extattrctl(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mopd&amp;sektion=8">mopd(8)</a>.
<li>Prevent <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=timeout_add&amp;sektion=9">timeout_add(9)</a> from wrapping around on machines with a long uptime.
<li>Fix some bogus size_t values in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=grops&amp;sektion=1">grops(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a>.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a> to version 381.
<!-- ^ 20030413 -->
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> set file descriptor limits with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setrlimit&amp;sektion=2">setrlimit(2)</a>.
<li>Relax the license on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcat&amp;sektion=3">strlcat(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&amp;sektion=3">strlcpy(3)</a> to encourage their bundling with other programs.
<li>Initial support for HFSC queueing, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>-style.
<li>Back out recent 'X looks like a package' stuff.
<li>Merge in expat-1.95.4 from XFree86-current.
<li>Fix long delays when detecting ATAPI devices.
<!-- ^ 20030412 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a>'s Makefile now honours the LDSTATIC flag.
<li>Move queue ID assignment into the kernel and away from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a>, solving a bunch of problems.
<!-- ^ 20030411 -->
<li>Back out the earlier fix for PR#2230, which is a no-op since zombies aren't on the allproc list being scanned. 
<li>De-allocate bus space on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&amp;sektion=4">wi(4)</a> device failures.
<li>Only print the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a> -d prompt if there's enough space left on the status line (PR#3189.)
<!-- ^ 20030410 -->
<li>When fixing up process root and working directories after a filesystem mount, leave zombies well alone. (PR#2230.) <!-- Yes, #2230, not #2030 as the committer said. Grr. -->
<li>Fix an off-by-one in kernel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malloc&amp;sektion=9">malloc(9)</a> diagnostic code.
<li>Correctly initialise xkb memory in the X server.
<li>Plug some file descriptor leaks in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xman&amp;sektion=1">xman(1)</a> (PR#3186.)
<li>Fix a broken sizeof() in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a> when allocating a new sentinel_info.
<li>Demote the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> 'missing CRL dir' moan to a debug message. <!-- Someone must really hate that warning. -->
<li>The kernel pf_state structure now points to both a rule and an anchor, so states created on anchors can use rule options properly.
<li>Create the /etc/isakmpd/crls directory from 4.4BSD.dist to stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> complaining about its absence.
<li>Strip trailing whitespace before parsing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> options (OpenSSH bug <a href="http://bugzilla.mindrot.org/show_bug.cgi?id=528">528</a>.)
<li>Disable <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a>'s Kerberos IV support.
<!-- ^ 20030409 -->
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>'s <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=select&amp;sektion=2">select(2)</a> error handling.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a> now remembers the previous 'M-x compile' command.
<li>Add a missing free() in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">httpd(8)</a>'s dbm processing.
<li>More fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=osiop&amp;sektion=4">osiop(4)</a>.
<!-- ^ 20030408 -->
<li>Change some old-style <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chown&amp;sektion=8">chown(8)</a>s (user.group) to POSIX user:group style.
<li>Fix a null deref in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=savecore&amp;sektion=8">savecore(8)</a>.
<li>Add some missing NetBSD copyright information to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ktutil&amp;sektion=8">ktutil(8)</a> work properly over the network.
<li>Improvements to string handling (not str[ln]* for once) in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adventure&amp;sektion=6">adventure(6)</a>.
<li>Add fake package information so ports can check for XF4 installation.
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">ksh(1)</a> instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1">csh(1)</a> for XFree distrib scripts.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> reject invalid ICMP types (&gt;40) and codes (&gt;255.)
<li>Fix a typo in the new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> rekeying code that was causing the wrong packet state counter to be fetched.
<!-- ^ 20030407 -->
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> to 1.6.7p3.
<li>Handle buffer length for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&amp;sektion=3">strlcpy(3)</a> properly in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kvm_mkdb&amp;sektion=8">kvm_mkdb(8)</a>.
<li>Many fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=osiop&amp;sektion=4">osiop(4)</a>.
<li>Improve (as part of string function fixes) <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sort&amp;sektion=1">sort(1)</a>'s handling of old-style + and - format specifiers.
<!-- ^ 20030406 -->
<li>Don't treat disklabel fields d_packname and d_typename as null-terminated fields when they're not.
<li>Fix a bounds-check off-by-one in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lam&amp;sektion=1">lam(1)</a>.
<li>Simplify <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a>'s parsing of CIDR masks.
<li>Add 'queue foo on $i_bar' syntax to allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> queue specs to apply only to specified interfaces.
<li>Add 230400 to the list of speeds supported by termios under <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_linux&amp;sektion=8">compat_linux(8)</a>.
<li>Use the default rule when a packet passes due to the implicit 'pass all' at the top of the rulebase, eliminating many NULL tests.
<li>Add a `default' <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> rule and use it to store the default timeouts.
<li>Add some shared library version updates missed in the XFree86 4.3.0 merge.
<!-- ^ 20030405 -->
<li>Many string function fixes all over the tree.
<li>Fix a bad bounds check in OpenSSL's ASN.1 parser.
<!-- ^ 20030404 -->
<li>Back out the earlier realloc() change to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a>.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sectok_fmt_fid&amp;sektion=3">sectok_fmt_fid(3)</a> to take a string length parameter, and crank libsectok's major version for the new API.
<li>With the XFree86 4.3.0 merge, add an additional definition so that ports libs end up in /usr/local/lib/X11.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> to 1.6.7p2.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=user&amp;sektion=8">user(8)</a>'s empty group test (PR#3178.)
<li>Improve PRIQ queue id assignment, so same-priority queues on different interfaces work properly.
<!-- ^ 20030403 -->
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=realloc&amp;sektion=3">realloc(3)</a> instead of leaking memory in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a>.
<li>Some cleanup in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipcomp&amp;sektion=4">ipcomp(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4">ipsec(4)</a>.
<li>Add a missing initialisation in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> (OpenSSH bug <a href="http://bugzilla.mindrot.org/show_bug.cgi?id=526">#526</a>.)
<li>When an interface doesn't support <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=altq&amp;sektion=4">altq(4)</a>, have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> print the interface name in the error message.
<li>Add automatic <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> rekeying in accordance with the current secsh newmodes draft, and fix some rekeying bugs.
<!-- ^ 20030402 -->
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kqueue&amp;sektion=2">kqueue(2)</a> notification of immediate-mode <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&amp;sektion=4">bpf(4)</a> events (PR#3175.)
<li>Merge in XFree86 4.3.0.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> to version 1.6.7p1, to fix some overzealous paranoia.
<li>Bump OpenSSH version to 3.6.1.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<!-- ^ 20030401 -->
<li>Fix an mbuf leak in icmp6.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a> treat empty environment variables as if they were unset.
<li>Fix some use-after-FREE when handling crypto errors in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipcomp&amp;sektion=4">ipcomp(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4">ipsec(4)</a>.
<li>Add a missing splx() in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipcomp&amp;sektion=4">ipcomp(4)</a>.
<li>Clean up and additional paranoia in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setusercontext&amp;sektion=3">setusercontext(3)</a>.
<li>Only remove a kernel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> rule structure when no states refer to it.
<!-- ^ 20030331 -->
<li>Helpfully, allow netinet/tcp_debug.c to compile when TCP_DEBUG is defined.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahc&amp;sektion=4">ahc(4)</a>'s probe of dual-channel 7899 cards.
<li>Use snprintf to construct device names in the kernel, instead of hand-rolling.
<li>Give a more consistent message when <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=1">passwd(1)</a> is aborted one way or another by the user.
<li>Begin the process of <a href="http://marc.theaimsgroup.com/?l=openbsd-misc&m=104958817430379&w=2">eradicating</a> the remaining strcpy, sprintf, and strcat calls from the tree.
<!-- ^ 20030330 -->
<li>Fix logging bustage in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&amp;sektion=8">sendmail(8)</a> to 8.12.9 to fix a buffer overflow in address parsing. Note that this fix went onto the OpenBSD 3.3 CDs and so is not a 3.3 erratum.
<li>More fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iha&amp;sektion=4">iha(4)</a>.
<!-- ^ 20030329 -->
<li>Stop pmdb dumping core on stripped executables.
<li>Show in log output the list against which <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> matched.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> report exactly how much of the filthy spammer's time was wasted.
<li>Add a missing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strdup&amp;sektion=3">strdup(3)</a> error check in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pwd_mkdb&amp;sektion=8">pwd_mkdb(8)</a>.
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login_passwd&amp;sektion=8">login_passwd(8)</a> from setuid(root) to setuid(_shadow).
<li>Remove OCHIO* binary compatability hacks from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ch&amp;sektion=4">ch(4)</a>. <!-- Warned about in the checkin on 17 Oct 2002 -->
<!-- ^ 20030328 -->
<li>When retrieving the size of a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&amp;sektion=4">ccd(4)</a> device, check the device is initialised before attempting to open it.
<li>Add USER_LDT to the list of kernel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a> controllable via <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=3">sysctl(3)</a>.
<li>Sync the SMP branch to 3.3.
<li>Improve <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iha&amp;sektion=4">iha(4)</a>'s REQUEST_SENSE handling based on hard-won experience with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=osiop&amp;sektion=4">osiop(4)</a>.
<li>Actually look for the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpr&amp;sektion=1">lpr(1)</a> -q option when calling <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt&amp;sektion=3">getopt(3)</a>.
<li>Fix handling of -f and -h options to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpr&amp;sektion=1">lpr(1)</a>.
<li>Improve error handling for invalid <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> cbq and priq flags.
<li>3.3 -> 3.3-current.
<!-- ^ 20030327 -->
</ul>
<p>

This list mentions mostly platform-independent changes.  For a list of changes
made in a particular platform, please check the page for that platform.  If you
find them not listed there, the changes are either (1) not being documented or
(2) are documented here.<br><br>

<hr>
<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="back.gif" border=0 alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus.html,v 1.874 2003/04/23 22:20:37 deraadt Exp $</small>

</body>
</html>
