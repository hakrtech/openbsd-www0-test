<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD-current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD-current changes">
<meta name="keywords" content="openbsd,current,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2004 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">Changes made between OpenBSD 3.6 and OpenBSD-current</font></h2>
<hr>

<p>
This is a partial list of the major machine-independent changes
(i.e., these are the changes people ask about most often).  Port
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
Changes to the <a href="ports.html">ports</a> collection are documented
<a href="portsplus/index.html">here</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>.
<br>
</h3>

<p>
<h3><font color="#0000e0">We are working on OpenBSD-current.</font></h3><p>
The following list sums up (almost) all the changes made up to October 9.
<p>

<ul>
<!-- ^ 20041010 -->
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nm&sektion=1">nm(1)</a> to work on cross targets of different sizes as well as endianness.
<li>Don't use 64-bit tests on 32-bit values when testing for void PCI memory regions.
<li>Add another 500 microseconds of delay after a PHY reset, the DP83840A needs it.
<li>Add 1000base*X autonegotiation and 1000baseT master-mode support. From NetBSD.
<!-- ^ 20041009 -->
<li>Update the tail pointer correctly when the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hotplug&sektion=4">hotplug(4)</a> queue is full.
<li>Remove a null dereference in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>.
<li>Fix a couple of buffer overruns in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kbd&sektion=8">kbd(8)</a>.
<li>Don't ever increment past the end of a message in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&sektion=8">ipsecadm(8)</a>'s monitor command.
<!-- ^ 20041008 -->
<li>Add a generic driver, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gentbi&sektion=4">gentbi(4)</a>, for Gigabit Ethernet ten-bit interfaces. From NetBSD.
<li>Add constants to mii.h for 1000base*X autonegotiation, and a constant for 1000baseT nic-to-nic master mode to if_media.h.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-agent&sektion=1">ssh-agent(1)</a>, don't unlink the agent socket if <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bind&sektion=2">bind(2)</a> fails.
<li>New -p option and 'p' command to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=top&sektion=1">top(1)</a>, to show just a single process.
<!-- ^ 20041007 -->
<li>On Intel-chipped <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&sektion=4">dc(4)</a> devices, share the bus evenly between receive and transmit, improving forwarding performance under heavy load.
<li>Set the TCP congestion window to two segments instead of one, matching the window size when entering the ESTABLISHED state.
<li>Unshadow a variable and unbreak <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a> on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> interfaces.
<!-- ^ 20041006 -->
<li>Call <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vsyslog&sektion=3">vsyslog(3)</a> with a priority, not a facility in ifstated(8).
<li>Drop the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8">spamd(8)</a> default passtime to 25 minutes, so that mailers with a quadratic retry schedule that causes a retry at 26 minutes are allowed through.
<li>Lots of work on the package tools' new object system.
<li>Don't reset the chip when attaching an <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=it&sektion=4">it(4)</a> hardware monitor, stopping the fans going into jet engine mode.
<li>When sending <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> advertisements, protect the call to ip_output() with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=splsoftnet&sektion=9">splsoftnet(9)</a>.
<li>Change the default return code from the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8">spamd(8)</a> greylister from 450 to 451. The latter code works better with mailer clusters, makeing them more likely to retry from the same IP address the next time.
<li>Fix a buffer overflow in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tput&sektion=1">tput(1)</a> with the -S option.
<li>Don't allow a peer ID of zero in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>.
<li>Handle connection failures more gracefully in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a> client.
<li>New <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=udav&sektion=4">udav(4)</a> driver for Davicom USB DM960-based Ethernet devices. From NetBSD.
<!-- ^ 20041005 -->
<li>Change the doff_t field in struct iso_dnode to u_quad_t, so that DVDs and other ISO filesystems larger than 2GB can be read.
<li>Stacks of manpage cleanup.
<li>Switch <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=amd&sektion=8">amd(8)</a> from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=select&sektion=2">select(2)</a> to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=poll&sektion=2">poll(2)</a>.
<li>Allow for an additional character in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8">disklabel(8)</a> fstype, so that type ISO9660 isn't truncated.
<li>Reorganise <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> etc.'s packing list items code into a basic class hierarchy.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a>, take the median value for the offset instead of taking an average.
<!-- ^ 20041004 -->
<li>New <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nvram&sektion=4&arch=i386">nvram(4)</a> driver for i386, read-only for now.
<li>Remove a marginal <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mmap&sektion=2">mmap(2)</a> optimisation from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=grep&sektion=1">grep(1)</a> that was causing some newline problems (PR#3940, PR#3941).
<!-- ^ 20041003 -->
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diff&sektion=1">diff(1)</a> continually retry <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getdirentries&sektion=2">getdirentries(2)</a> until our buffer is large enough to store it all.
<li>Unbust &lt;stdbool.h&gt; for newer <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&sektion=1">gcc(1)</a> versions.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fseek&sektion=3">fseek(3)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftell&sektion=3">ftell(3)</a> and other cleanup in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=msgs&sektion=1">msgs(1)</a>.
<!-- ^ 20041002 -->
<li>Fix an off-by-one when calculating IO space for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=em&sektion=4">em(4)</a>.
<li>Don't die in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> if <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=socket&sektion=2">socket(2)</a> fails with ENOPROTOSUPPORT for a default listener.
<li>Fix memory corruption in libdb <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hash&sektion=3">hash(3)</a> when the cursor page becomes the LRU page.
<!-- ^ 20041001 -->
<li>Check for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=accept&sektion=2">accept(2)</a> errors before <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fork&sektion=2">fork(2)</a>ing the child process in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8">ftpd(8)</a>. From FreeBSD.
<li>Fix a segfault and an off-by-one in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpc&sektion=8">lpc(8)</a>.
<li>Get the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rl&sektion=4">rl(4)</a> MAC address right on big-endian architectures.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bus_dma&sektion=9">bus_dma(9)</a> magic to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rl&sektion=4">rl(4)</a>.
<li>Helpfully display the bogus netmask that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> is busy choking on.
<li>If the YP marker is present in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=master.passwd&sektion=5">master.passwd(5)</a> file, have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8">adduser(8)</a> insert new users before it (PR#3727).
<li>Ethernet autonegotiation fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rl&sektion=4">rl(4)</a>. From FreeBSD.
<li>Add ECONNREFUSED to the list of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=recvfrom&sektion=2">recvfrom(2)</a> errors that don't kill <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a>'s client dispatch function, now that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=connect&sektion=2">connect(2)</a> is used on the client socket. 
<li>Don't pretend to have an ifmedia structure in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=le&sektion=4&manpath=OpenBSD+3.6">le(4)</a>, fixing some panics (PR#3407, PR#3661).
<!-- ^ 20040930 -->
<li>Add back some <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=snprintf&sektion=3">snprintf(3)</a> string cleaning lost in the BIND 9.3.0 merge.
<li>Correct a missing NULLification in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>, stopping <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflog&sektion=4">pflog(4)</a> incorrectly attributing states to anchors, and fixing state counter display for pfctl -vvs[nr].
<li>Some refactoring and shrinkage in the installer.
<!-- ^ 20040929 -->
<li>Fix a buffer overrun in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xman&sektion=1">xman(1)</a> when reading the search string (X.Org bugzilla #1481).
<li>Clean up <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8">disklabel(8)</a> output for modern large disks (based on PR#3847).
<li>Import and merge ISC BIND 9.3.0, keeping local changes.
<li>Fix memory leaks in a few <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpr&sektion=1">lpr(1)</a> error paths.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&sektion=8">sudo(8)</a> to version 1.6.8p1.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login_tis&sektion=8">login_tis(8)</a>, supporting TIS Firewall Toolkit authentication.
<li>Add 'prepend-neighbor' feature to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>.
<li>Fix unaligned accesses in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rl&sektion=4">rl(4)</a> that were crashing on alphas (PR#3795).
<!-- ^ 20040928 -->
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gem&sektion=4">gem(4)</a> handle <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vlan&sektion=4">vlan(4)</a>-sized frames.
<!-- ^ 20040927 -->
<li>Reorganise <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mii&sektion=4">mii(4)</a> to use a structure of standard entry points instead of separate function pointers, and add a 'reset' entry point. From NetBSD.
<!-- ^ 20040926 -->
<li>Remove kx(1) from the tree.
<li>Nicer buffer size allocation for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=file&sektion=1">file(1)</a> (PR#3924).
<li>Add X support for OpenBSD/sgi.
<!-- ^20040925 -->
<li>Correct an off-by-one in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vfprintf&sektion=3">vfprintf(3)</a>.
<li>Fix a crash on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=free&sektion=3">free(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=which&sektion=1">which(1)</a>.
<li>Add Path MTU Discovery support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&sektion=4">ipsec(4)</a>-in-UDP.
<li>Pass the TCP segment size up to userland for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=trpt&sektion=8">trpt(8)</a> to use.
<li>Do a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=connect&sektion=2">connect(2)</a> on client-side sockets in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a>.
<li>Don't process NAT-T keepalives in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a>.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Round off package tools @newuser/@newgroup support by making <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&sektion=1">pkg_delete(1)</a> delete the user/group if no longer needed.
<li>Drop osi and mask keywords from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&sektion=8">route(8)</a>.
<!-- ^ 20040924 -->
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=3">sysctl(3)</a> KERN_INTRCNT_CNT to return a quad instead of an int.
<li>Add some <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=read&sektion=2">read(2)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=write&sektion=2">write(2)</a> error checks to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&sektion=8">route(8)</a>.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a>'s handling of the -n option in multiplex client mode.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&sektion=4">bpf(4)</a>'s <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kqueue&sektion=2">kqueue(2)</a> code fill in kn_data with the number of available bytes, like FreeBSD and NetBSD.
<li>Make sure <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a> never send signals to their child processes after handling a SIGCHLD for them.
<!-- ^ 20040923 -->
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=midi&sektion=4">midi(4)</a> UARTs that don't support interrupts on output to write blocks larger than MIDI_MAXWRITE.
<li>Add code (#ifdef'd out by default) to allow 32-bit code using libsa to print 64-bit int values.
<li>Allow for the link-layer header when deciding whether or not to allocate a cluster in the syncache.
<li>Add libexpat 1.95.6, an XML parser library, to the tree.
<li>Remove source-routing support from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&sektion=8">route(8)</a>.
<!-- ^ 20040922 -->
<li>Initial support for @newuser and @newgroup packing elements in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_create&sektion=1">pkg_create(1)</a> and friends.
<li>If X is running, stop the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsdisplay&sektion=4">wsdisplay(4)</a> screen blanker firing when its settings are changed.
<li>Add 'no-scrub' <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&sektion=5">pf.conf(5)</a> keyword, allowing specific traffic to bypass the normaliser.
<li>Iconify <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xconsole&sektion=1">xconsole(1)</a> in the standard <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xinit&sektion=1">xinit(1)</a> rc file.
<li>Display route labels with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&sektion=8">route(8)</a>'s show command.
<!-- ^ 20040921 -->
<li>Get parameters to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=m_gethdr&sektion=9">m_gethdr(9)</a> the right way round in IPX-in-IP code.
<li>Fix the no-route <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> keyword for IPv6.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&sektion=1">gzip(1)</a>, look for the last instead of the first dot in a filename before tacking on a '.gz' extension, so foo.bar.gz is tried if foo.bar is given on the command line but doesn't exist.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=splx&sektion=9">splx(9)</a> later in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=brelse&sektion=9">brelse(9)</a> to protect flags being set on the buffer.
<li>Disable dynamic standby on 82550-based <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fxp&sektion=4">fxp(4)</a> cards.
<!-- ^ 20040920 -->
<li>New <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnode&sektion=9">vnode(9)</a>-related manual pages for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vflushbuf&sektion=9">vflushbuf(9)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vwakeup&sektion=9">vwakeup(9)</a>.
<li>Check for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=waitpid&sektion=2">waitpid(2)</a> errors in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8">disklabel(8)</a>.
<li>Fix an off-by-one in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=awi&sektion=4">awi(4)</a>'s WEP algorithm selection code.
<li>Install PostScript docs for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=yacc&sektion=1">yacc(1)</a>.
<li>Set NOLINT for GNU code, there's just no way it's ever going to work.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a> with -s, only call <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=settimeofday&sektion=2">settimeofday(2)</a> if the offset is larger than 180 seconds. Otherwise, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adjtime&sektion=2">adjtime(2)</a> can cope with the offset sensibly.
<li>Move the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a> startup earlier in /etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8">rc(8)</a>, and use the -s flag unconditionally.
<li>New -s flag for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a>, which sets the time using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=settimeofday&sektion=2">settimeofday(2)</a> before daemonizing. This removes the need to run <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&sektion=8">rdate(8)</a> early in /etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8">rc(8)</a>.
<li>In libpthread, allow a thread in the FD[RW]_WAIT states to be suspended.
<li>Fix the build process for the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahc&sektion=4">ahc(4)</a> microcode.
<li>New %z and %t modifiers to *<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=printf&sektion=3">printf(3)</a> for displaying size_t and ptrdiff_t respectively.
<li>Add a framework in the package tools to distinguish packages added manually by the user from those added as dependencies for other packages.
<li>Enable @shell keyword in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> etc., adding and removing an /etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=shells&sektion=5">shells(5)</a> entry as required.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamlogd&sektion=8">spamlogd(8)</a> respect the -I option, and change its <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&sektion=4">bpf(4)</a> filter so that it only looks at TCP S/SA packets. From PR#3914.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&sektion=8">sendmail(8)</a> to version 8.13.1.
<li>More <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcmcia&sektion=4">pcmcia(4)</a> CIS fixes. From NetBSD.
<!-- ^ 20040918 -->
<li>Set the keyboard encoding earlier in /etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8">rc(8)</a>.
<li>Clean up state creation and destruction reference counting in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&sektion=4">pfsync(4)</a>, fixing problems with adaptive timeouts, max-states limits and rule leaks.
<li>Fix a segfault in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hack&sektion=6">hack(6)</a> (PR#3923).
<li>Reset MINCLSIZE back to the old value so that clusters are created as soon as the packet is bigger than the standard header size. This is a conservative measure for this release.
<li>More signal flag race fixes, in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a> this time.
<li>Don't ignore next-payload type NAT-OA in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a>.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> etc. warn about use of the deprecated @dirrm keyword.
<!-- ^ 20040917 -->
<li>Handle route labels in RTM_CHANGE messages.
<li>In the installer, set the console device speed before selecting it as the console, unbreaking Soekris boxes when booted without a cable attached.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&sektion=8">dhcpd(8)</a> calling <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inet_ntoa&sektion=3">inet_ntoa(3)</a> twice per log message.
<li>Handle '%ll' with positional arguments correctly in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=printf&sektion=3">*printf(3)</a>.
<li>Don't remove a cloned peer immediately when it goes back to IDLE, keep it around for a while. That way, if it went away because a capabilities negotiation failed, it doesn't come back later with the same (incompatible) capabilities and so fail again.
<li>Unbreak <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=MD5FileChunk&sektion=3">MD5FileChunk(3)</a> when passed a zero length, and so make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=MD5File&sektion=3">MD5File(3)</a> work again.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a> print the th_seq field from truncated TCP headers, e.g. in an icmp frag-needed-but-DF-set error.
<li>Give TCP some extra smarts (SS_ISSENDING) so that it doesn't send partial segments when the socket layer is still busy sending to it. Inspired by FreeBSD and NetBSD.
<li>New '-T tcp' button for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a> to force interpretation as TCP.
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a> about NFSv3.
<li>Correct an off-by-one in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fmt_scaled&sektion=3">fmt_scaled(3)</a>, allowing it to show 1099512676352 == 2.0T properly.
<li>Fix more signal flag races, this time in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=comsat&sektion=8">comsat(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rpc.rstatd&sektion=8">rpc.rstatd(8)</a>.
<li>Drop the 'fallback interface' code from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&sektion=8">dhcpd(8)</a>, and store enough state to send a relayed request back to the right place.
<li>Fix an off_t-&gt;int truncation in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rwhod&sektion=8">rwhod(8)</a>, found by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lint&sektion=1">lint(1)</a>.
<li>Add some additional <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcmcia&sektion=4">pcmcia(4)</a> CIS sanity checks.
<!-- ^ 20040916 -->
<li>Several manual page fixes.
<li>Fix a stack of compiler warnings in libkvm.
<li>Restore <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hotplugd&sektion=8">hotplugd(8)</a>'s ability to handle events queued before the daemon starts.
<li>New -Dvar=value option for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_create&sektion=1">pkg_create(1)</a>.
<li>Don't use a double where an int will do in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&sektion=8">sshd(8)</a>.
<li>Add a negative index check in the hardware sensor <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=3">sysctl(3)</a> handler.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount&sektion=8">mount(8)</a> dump attribute caching parameters in verbose mode.
<li>Fix races on the signal flags in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&sektion=8">inetd(8)</a>.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_nfs&sektion=8">mount_nfs(8)</a>'s noac option turn attribute caching off instead of on.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&sektion=8">rdate(8)</a> accept NTP responses with stratum 0.
<li>A bunch of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lint&sektion=1">lint(1)</a>-inspired cleanup in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8">ntpd(8)</a>.
<!-- ^ 20040915 -->
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> etc. about GNU info directories.
<li>Remove all use of system() in favour of System()/VSystem() in the package tools.
<li>Fix a file descriptor leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=df&sektion=1">df(1)</a>.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> complain when configuration files can't be installed.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> etc., use the uid/gid cache module and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=perl&sektion=1">perl(1)</a>'s own chown() function instead of system('chown',...).
<li>Change arg 4 of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kvm_openfiles&sektion=3">kvm_openfiles(3)</a> to unsigned so that KVM_NO_FILES is in range.
<li>Add mtree and uid/gid cache modules and an error wrapper to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> etc.
<li>Remove a gcc-specific constructs from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&sektion=8">inetd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&sektion=8">syslogd(8)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>, treat ENOBUFS from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmsg&sektion=2">sendmsg(2)</a> like EAGAIN and retry later.
<li>Add support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree&sektion=8">mtree(8)</a> to the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> framework.
<li>A bunch of de<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lint&sektion=1">lint(1)</a>ing, especially signal handlers with unused signo, and other unused variables.
<li>3.6 -&gt; 3.6-current.
<!-- ^ 20040914 -->
</ul>
<p>

This list mentions mostly platform-independent changes.  For a list of changes
made in a particular platform, please check the page for that platform.  If you
find them not listed there, the changes are either (1) not being documented or
(2) are documented here.<br><br>

<hr>
<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="back.gif" border=0 alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus.html,v 1.937 2005/01/09 00:59:24 espie Exp $</small>

</body>
</html>
