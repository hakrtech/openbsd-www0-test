<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD-current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD-current changes">
<meta name="keywords" content="openbsd,current,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2004 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">Changes made between OpenBSD 3.5 and OpenBSD-current</font></h2>
<hr>

<p>
This is a partial list of the major machine-independent changes
(i.e., these are the changes people ask about most often).  Port
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
Changes to the <a href="ports.html">ports</a> collection are documented
<a href="portsplus/index.html">here</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>.
<br>
</h3>

<p>
<h3><font color="#0000e0">We are working on OpenBSD-current.</font></h3><p>
The following list sums up (almost) all the changes made up to May 29.
<p>

<ul>
<!-- ^ 20040530 -->
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bge&sektion=4">bge(4)</a> multicast reception.
<li>Add a description field for network interfaces, accessible via <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&sektion=8">ifconfig(8)</a> command 'description' and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ioctl&sektion=2">ioctl(2)</a>s SIOC[GS]IFDESCR.
<li>Use library CRC32 routines instead of a local implementation in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sk&sektion=4">sk(4)</a>.
<li>Fix a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccdconfig&sektion=8">ccdconfig(8)</a>.
<li>Remove multicast addresses and disable promiscuous mode when destroying a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> interface.
<li>Make  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&sektion=8">ifconfig(8)</a> up and down commands work as expected for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> devices.
<li>Create a few more USB devices by default in MAKEDEV(8).
<!--- ^ 20040529 -->
<li>Clean up <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scsi&sektion=4">scsi(4)</a> sense error logic and display. Based on NetBSD.
<li>Allow machine-dependent filesystem options to be passed for the root filesystem in src/distrib/miniroot.
<li>Remove the old package tools (src/usr.sbin/pkg_install) from the tree.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> detect the absence of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&sektion=4">ipsec(4)</a> and tcpmd5 capabilities at runtime.
<li>More helpful boot-time display for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=aac&sektion=4">aac(4)</a>.
<li>Fix a typo in umapfs' <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=unmount&sektion=2">unmount(2)</a> implementation.
<li>Backwards compatibility fixes in the hash functions, unbreaking <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skey&sektion=1">skey(1)</a> with sha1.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&sektion=4">bpf(4)</a> devices clonable.
<li>Make AFS <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=flock&sektion=2">flock(2)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fcntl&sektion=2">fcntl(2)</a> locks work on the local system.
<!-- ^ 20040528 -->
<li>Make accounting optional, with the new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8">config(8)</a> option (wait for it) ACCOUNTING.
<li>Allow login names longer than eight characters in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uucpd&sektion=8">uucpd(8)</a>.
<li>Fix a memory leak in a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> error path.
<li>When shutting the system down, finalise accounting before the VFS to avoid <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=panic&sektion=9">panic(9)</a>s.
<li>Fix TCP corruption on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rl&sektion=4">rl(4)</a> cards.
<li>Much better rulefile parsing for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=brconfig&sektion=8">brconfig(8)</a>.
<li>Pool efficiency improvements:
<ul>
  <li>Lower the default high watermark from UINT_MAX to 8 pages.
  <li>Modify uvm_km_getpage() to take a waitok flag and use it instead of uvm_km_alloc_poolpage1() for both the default and nointr pool allocators.
  <li>Use the default allocator for the mbuf and mbuf cluster pools.
</ul>
<!-- ^ 20040527 -->
<li>Correct a missing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=freeaddrinfo&sektion=3">freeaddrinfo(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a>.
<li>Fix a NetBSD merge error in the TCP syncache, allowing IPv6 to use it.
<li>Fix fd leaks in a few <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a> error paths.
<li>Call <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&sektion=1">ld.so(1)</a> contructors after setting up the debugger, similar to recent destructor changes.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cu&sektion=1">cu(1)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tip&sektion=1">tip(1)</a>, if one process dies then kill the other ourselves.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&sektion=8">rdate(8)</a> NTP mode, send a 64-bit random number as the 'current time' field, which the server copies back in its response. This avoids sending out the current system time, and makes it slightly harder for an attacker to send spoof replies on behalf of the real server.
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=_exit&sektion=2">_exit(2)</a> instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=exit&sektion=3">exit(3)</a> in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp&sektion=1">sftp(1)</a> child process.
<!-- ^ 20040526 -->
<li>Include the hostname in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&sektion=8">syslogd(8)</a> memory-buffered entries.
<li>Since the per-arch _dl_bcopy() in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&sektion=1">ld.so(1)</a> is in all cases a simple for loop and painstakingly optimised assembler, just use a single machine-independent version.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&sektion=1">ld.so(1)</a> _dl_find_symbol() to return a pointer to the container object.
<li>Handle interface removals gracefully in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&sektion=8">dhcpd(8)</a>, now that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=poll&sektion=2">poll(2)</a> wakes it up on interface detach.
<li>Wake up any <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=poll&sektion=2">poll(2)</a>ing process when a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&sektion=4">bpf(4)</a> descriptor is closed.
<li>If a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&sektion=4">bpf(4)</a>-monitored interface is detached, send any buffered packets up to userland.
<li>Scale the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bge&sektion=4">bge(4)</a> timeout value correctly.
<li>Since ULLONG_MAX+1 == 0 mod ULLONG_MAX+1, let the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> sc_counter wrap around all by itself. 
<!-- ^ 20040525 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bktr&sektion=4">bktr(4)</a> fixes from NetBSD and FreeBSD.
<li>Move the addition of atexit destructors right to the end of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&sektion=1">ld.so(1)</a> setup (after the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gdb&sektion=1">gdb(1)</a> helper code) so they can be debugged.
<li>If <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&sektion=1">ld.so(1)</a> is running under <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldd&sektion=1">ldd(1)</a>, exit earlier before a whole bunch of unnecessary setup gets done.
<li>Check ifp is valid before using it in carp_setroute(), avoiding a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=panic&sektion=9">panic(9)</a>.
<li>Helpfully, use the right function names in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a> error messages.
<li>Fix multicast problems with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sk&sektion=4">sk(4)</a>.
<li>Don't leak a socket in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ndp&sektion=8">ndp(8)</a>.
<li>Back out the recent <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fork1&sektion=9">fork1(9)</a> change due to compatibility problems.
<!-- ^ 20040524 -->
<li>New MaxAuthTries option for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd_config&sektion=5">sshd_config(5)</a>.
<li>Allow the retval parameter to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fork1&sektion=9">fork1(9)</a> to be NULL (as the manpage says) without causing a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=panic&sektion=9">panic(9)</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strtonum&sektion=3">strtonum(3)</a>ify <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflogd&sektion=8">pflogd(8)</a>.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gscsio&sektion=4">gscsio(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lmtemp&sektion=4">lmtemp(4)</a> I2C drivers.
<li>Add I2C framework (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iic&sektion=4">iic(4)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iic&sektion=9">iic(9)</a>) based on that in NetBSD and enable on i386.
<li>Fix a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=stat&sektion=2">stat(2)</a>-then-<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=open&sektion=2">open(2)</a> race in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a> when checking the policy file for root-only permissions.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&sektion=8">ipsecadm(8)</a> delete tcpmd5 SAs.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&sektion=8">ipsecadm(8)</a> so that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipcomp&sektion=4">ipcomp(4)</a> can be used.
<li><font color="#e00000"><strong>SECURITY FIX: With the introduction of IPv6 code in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm&sektion=1">xdm(1)</a>, one test on the 'requestPort' resource was deleted by accident.</strong></font> This makes xdm create the chooser socket even if XDMCP is disabled in xdm-config, by setting requestPort to 0. See <a href="http://bugs.xfree86.org/show_bug.cgi?id=1376">XFree86 bugzilla</a> for details.<br>
    <a href="errata.html#xdm">A source code patch is available</a>.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Fix a boot-time crasher in ahd(4).
<li>Add (to i386 and amd64) <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ehci&sektion=4">ehci(4)</a>, a USB Enhanced Host Controller Interface driver, for USB 2.0 support.
<li>Finally implement StackGhost buffer overflow exploit protection on sparc.
<li>Correct a missing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=splx&sektion=9">splx(9)</a> in an igmp_joingroup() error path.
<li>Fix VFS corruption (due to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&sektion=1">gcc(1)</a>) on i386 by out-of-lining the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spl&sektion=9">spl(9)</a> functions.
<!-- ^ 20040523 -->
<li>Fix size_t != off_t truncation in ahd(4).
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vmstat&sektion=8">vmstat(8)</a>'s disk columns wide enough to show transfer numbers for modern disks without writing into the next column.
<!-- ^ 20040522 -->
<li>Change the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> anchor path component separator from ':' to '/'. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> now requires any anchor spec containing the separator to be in quotes.
<li>Make /root/.klogin optional in /etc/mtree/special.
<li>Import and merge <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gdb&sektion=1">gdb(1)</a> version 6.1.
<li>Support RFC2796 Route Reflection in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>, removing the need for an IBGP mesh.
<li>Add support for dynamic network announcements in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpctl&sektion=8">bgpctl(8)</a>.
<li>Don't rely on ifp's validity when setting a floor on the TCP MSS in ip_input.c.
<li>Allow an <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a> user to cancel a port forward (OpenSSH bugzilla #756).
<li>Do a better job of copying <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> relative anchor paths out to userland.
<li>Use the new DLT_PPP_ETHER datalink type to print <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pppoe&sektion=8">pppoe(8)</a> frames in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a>.
<!-- ^ 20040521 -->
<li>Use the right buffer size for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&sektion=3">strlcpy(3)</a> in libreadline.
<li>Zero the ifreq structure before use when fetching interface info in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<li>Fix a missing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strdup&sektion=3">strdup(3)</a> error check in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>.
<li>Start work on adding the ahd(4) Adaptec PCI/PCI-X Ultra320 SCSI driver from FreeBSD.
<!-- ^ 20040520 -->
<li>Enable the fancy new i386 pagezero code by not resetting it to its old value after setting it up.
<li>Allow anchors within anchors in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>. More work to come.
<li>Don't recursively call nd6_output() when route allocation fails, just return a host unreachable error.
<li><font color="#e00000"><strong>SECURITY FIX: A heap overflow in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1">cvs(1)</a> server has been discovered that can be exploted by clients sending malformed requests.</strong></font> These clients can then run arbitrary code with the same privileges as the CVS server program.<br>
    <a href="errata.html#cvs2">A source code patch is available</a>.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Allow symbolic service- and protocol names in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a>, so e.g. "Protocol=tcp" now works.
<li><font color="#e00000"><strong>SECURITY FIX: A flaw in the Kerberos V <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kdc&sektion=8">kdc(8)</a> server could result in the administrator of a Kerberos realm having the ability to impersonate any principal in any other realm which has established a cross-realm trust with their realm.</strong></font> The flaw is due to inadequate checking of the "transited" field in a Kerberos request. For more details see <a href="http://www.pdc.kth.se/heimdal/advisory/2004-04-01/">Heimdal's announcement</a>.<br>
    <a href="errata.html#kerberos">A source code patch is available</a>.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Add word boundary tests to the regexes that find @-commands in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a> etc. packing lists.
<li>Fix SIGINT handling in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp&sektion=1">sftp(1)</a>.
<li>Upgrade <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=file&sektion=1">file(1)</a> to version 4.09.
<li>Updates to aic79xx code from FreeBSD in preparation for the upcoming ahd(4) driver.
<!-- ^ 20040519 -->
<li>Stop some <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fxp&sektion=4">fxp(4)</a> devices creating PCI errors in 10Mbps mode by disabling 'dynamic standby mode' in the EEPROM. From NetBSD.
<li>Handle CRC errors in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fxp&sektion=4">fxp(4)</a>.
<li>Fix a ssize_t != int overflow in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&sektion=8">rdate(8)</a>'s NTP code.
<li>Generate /etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ttys&sektion=5">ttys(5)</a> entries for all available <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pty&sektion=4">pty(4)</a> devices, now that more are available.
<li>Fix a missing initialisation in ISA <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ie&sektion=4&arch=i386">ie(4)</a>.
<li>Remove trailer encapsulation support from  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&sektion=8">ifconfig(8)</a>.
<li>Fix a reference counting bug in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> DIOCCHANGERULE.
<li>Fix a buffer overrun in ip_output() (FreeBSD PR#66386).
<li>Don't leak a mount structure when handling mount errors in nullfs.
<li>ANSIfy src/libc/gen/*.
<!-- ^ 20040518 -->
<li>Merge new binutils, fix local differences, and enable on arm.
<li>Import GNU binutils 2.14, minus testsuites, infodocs and I18N files.
<li>Bump the default data size to 75MB from 64MB, so that XF4 can be built on amd64 with the imminent binutils upgrade without changing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&sektion=5">login.conf(5)</a>.
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=file&sektion=1">file(1)</a> about the b.out (i960) binary format. From NetBSD.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&sektion=4">pfsync(4)</a>, make sure the return code gets initialised (pfsync_request_update()).
<li>Add basic COMMUNITIES attribute support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>'s filter language.
<li>Update libiberty's floatformat.[ch] to those from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gdb&sektion=1">gdb(1)</a> 6.1.
<!-- ^ 20040517 -->
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=arc4random&sektion=3">arc4random(3)</a> instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rand&sektion=3">rand(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8">httpd(8)</a> mod_rewrite and mod_ssl, cleaning up surrounding code in the latter on the way.
<li>Remove the now-unused <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&sektion=8">dhclient(8)</a> pidfile stuff from /etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8">rc(8)</a>.
<li>Add a separate link type, DLT_PPP_ETHER, for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pppoe&sektion=8">pppoe(8)</a> frames. From NetBSD.
<li>Don't skip the graceful shutdown of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> just because the system is being powered down.
<li>When <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> backs off because of physical interface problems, advertise this fact immediately instead of waiting for the next scheduled announcement.
<!-- ^ 20050416 -->
<li>Add a workaround in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ppp&sektion=8">ppp(8)</a> for the recent multipath routing changes.
<li>Fix a two-byte buffer overflow when printing sockaddr structs of unknown type in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&sektion=8">route(8)</a>.
<li>Correct error output for bad limit modifiers in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&sektion=1">csh(1)</a>.
<!-- ^ 20050415 -->
<li>Fix a reference-counting bug in fifofs that could cause certain non-blocking FIFO users (e.g. qmail) to consume 100% cpu.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Interpret <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&sektion=8">ipsecadm(8)</a> cpi and spi parameters as hex even if not preceded by '0x'.
<li>Unbreak <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pppoe&sektion=8">pppoe(8)</a> server mode by not doing the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&sektion=8">chroot(8)</a>. 
<li>Use a nointr <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pool&sektion=9">pool(9)</a> instead of generic <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malloc&sektion=9">malloc(9)</a> for pathname storage when doing name-to-inode lookups.
<!-- ^ 20040514 -->
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&sektion=8">newfs(8)</a> dump status information to stderr on receipt of SIGINFO if running in quiet (-q) mode.
<li>Allow the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&sektion=8">authpf(8)</a> shell to be overloaded by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&sektion=5">login.conf(5)</a> like the manpage says.
<li>Make the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&sektion=8">cron(8)</a> socket close-on-exec.
<li>Arrange for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&sektion=8">cron(8)</a> to check both cron and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=at&sektion=1">at(1)</a> databases for jobs if the newly-non-blocking cron socket returns EAGAIN.
<li>Display the right fields in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a>'s <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> parser.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> backoff work properly by heeding the raised advskew on received as well as sent packets.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&sektion=8">dhclient(8)</a>'s lease file handling work under the chroot.
<li>Add some new configuration functionality to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a>'s FIFO interface.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> interfaces to be destroyed by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&sektion=8">ifconfig(8)</a>.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&sektion=1">systrace(1)</a> examples in /etc/systrace (PR#3748).
<li>Better <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scsi&sektion=4">scsi(4)</a> sense display.
<!-- ^ 20040513 -->
<li>Replace the hand-crafted expr() parser in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=m4&sektion=1">m4(1)</a> with a standard <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lex&sektion=1">lex(1)</a>-and-<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=yacc&sektion=1">yacc(1)</a> combo. Easier to work on, and more standards compliant too.
<li>Fix msdosfs on 64-bit systems.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ppp&sektion=8">ppp(8)</a> breakage caused by the new multipath routing code.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login_passwd&sektion=8">login_passwd(8)</a> setuid root again, it's needed for 'secure' YP maps.
<li>Call <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tzset&sektion=3">tzset(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&sektion=8">dhcpd(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcrelay&sektion=8">dhcrelay(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mopd&sektion=8">mopd(8)</a>.
<!-- ^ 20040512 -->
<li>Don't print the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&sektion=8">sendmail(8)</a> version if the helpfile is missing.
<li>Build <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&sektion=8">sendmail(8)</a> with -D_FFR_QUEUERETURN_DSN, allowing faster expiration of spam bounces.
<li>Unbreak checksum generation when using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> scrub random-id.
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> routing loop detection so that visiting a packet more than four times is an error, instead of more than once.
<li>Don't abort <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lint&sektion=1">lint(1)</a> because a child process fails, just move onto the next file.
<!-- ^ 20040511 -->
<li>When doing user mounts, inherit the MNT_NOEXEC flag from the mount point. This stops users bypassing noexec by null-mounting the filesystem on top of itself.
<li>Filter and lock <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rbootd&sektion=8">rbootd(8)</a>'s <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&sektion=4">bpf(4)</a> descriptor before dropping privileges.
<li>Unbreak <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chsh&sektion=1">chsh(1)</a> after the recent <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pw_copy&sektion=3">pw_copy(3)</a> changes.
<li>Import and merge GNU readline 4.3p5.
<li>Double <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&sektion=1">ksh(1)</a>'s command line buffer size to 2K.
<li>Allow the banner page to be turned off by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpr&sektion=1">lpr(1)</a>.
<li>Add /usr/local/sbin to root's .cshrc, and move /usr/X11R6/bin before /usr/local/{bin,sbin} for both <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&sektion=1">csh(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&sektion=1">ksh(1)</a>.
<li>Remove a bunch of #ifdef ISO and #ifdef notyet crud from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nfsd&sektion=8">nfsd(8)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lint&sektion=1">lint(1)</a> understand the 'long long' type.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&sektion=8">cron(8)</a>'s accept socket non-blocking.
<li>Clobber the 'clobber' command in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mail&sektion=1">mail(1)</a>.
<li>When <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=user&sektion=8">user(8)</a> adds a new group, place it before the first '+' entry if one exists (part of a fix for PR#3727).
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strtonum&sektion=3">strtonum(3)</a>-ify <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&sektion=8">ipsecadm(8)</a> and add some more integer value checks.
<!-- ^ 20040510 -->
<li>Properly initialise <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> advskew for values greater than 240.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Remove unused variables in several programs on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lint&sektion=1">lint(1)</a>'s say-so.
<li>Use the freshly-generated MD5 digest for the SSH1 session ID instead of random stack garbage.
<li>Fix a null deref panic in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> TCP normaliser.
<!-- ^ 20040509 -->
<li>Swap <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=arc4random&sektion=3">arc4random(3)</a> for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rand&sektion=3">rand(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=awk&sektion=1">awk(1)</a> unless the user sets the seed, in which case swap <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=random&sektion=3">random(3)</a> for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rand&sektion=3">rand(3)</a>.
<li>Add a reference count for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&sektion=4">bpf(4)</a> descriptors, and don't free resources until processes sleeping on a descriptor have been woken up.
<li>Use a locked, filtered <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&sektion=4">bpf(4)</a> descriptor in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mopd&sektion=8">mopd(8)</a>.
<li>Replace <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rand&sektion=3">rand(3)</a> with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=arc4random&sektion=3">arc4random(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&sektion=1">ksh(1)</a>, unless the user sets the random seed manually in which case rand() is still used.
<li>Allow manually-keyed <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&sektion=4">ipsec(4)</a> AH in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>.
<li>Initialise <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ed&sektion=1">ed(1)</a>'s crypto using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=arc4random&sektion=3">arc4random(3)</a> instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rand&sektion=3">rand(3)</a>.
<li>Fix a few memory leaks in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=regex&sektion=3">regex(3)</a>.
<li>Resolve hostnames in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd.conf&sektion=5">dhcpd.conf(5)</a> at parse time (PR#3771).
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> back off on other interfaces on IP output errors until reliable delivery is restored.
<li>Use the right packet length in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a>'s <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&sektion=4">pfsync(4)</a> parser.
<!-- ^ 20040508 -->
<li>Enable 802.1q long packets for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vlan&sektion=4">vlan(4)</a> support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fxp&sektion=4">fxp(4)</a> on cardbus.
<li>Don't allow command substitution characters in the environment variables passed through to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient-script&sektion=8">dhclient-script(8)</a> by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&sektion=8">dhclient(8)</a>.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afsd&sektion=8">afsd(8)</a> drop privileges and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&sektion=2">chroot(2)</a> to the cache directory.
<li>Make the -w option work the same for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=grep&sektion=1">grep(1)</a>'s regex and fast paths.
<li>Implement <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysconf&sektion=3">sysconf(3)</a> values _SC_SEM_NSEMS_MAX and _SC_SEM_VALUE_MAX.
<li>Fix sizeof(pointer) bugs in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=amd&sektion=8">amd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstat&sektion=1">netstat(1)</a>.
<li>Add a fast path for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fgrep&sektion=1">fgrep(1)</a> and fix the -w option.
<li>Replace the kernel's RSA-derived MD5 implementation with code derived from Colin Plumb's PD version. 
<li>Add a filter option to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> to dump prefixes learned via UPDATEs into a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> table.
<li>Big FFS softdep merge with FreeBSD, fixing a number of bugs.
<!-- ^ 20040507 -->
<li>Some <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=snprintf&sektion=3">snprintf(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&sektion=3">strlcpy(3)</a> cleaning in the X server.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=grep&sektion=1">grep(1)</a> doing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fseek&sektion=3">fseek(3)</a> on stdin if it's a terminal.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=grep&sektion=1">grep(1)</a> treat a '^H' character as non-binary.
<li>Make  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient-script&sektion=8">dhclient-script(8)</a> work with half-bridge ADSL routers that don't provide a real default gateway (PR#3747).
<li>Apply The Process to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pppoe&sektion=8">pppoe(8)</a>: Create a filtered and locked <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&sektion=4">bpf(4)</a> descriptor, drop privileges and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&sektion=2">chroot(2)</a> to /var/empty.
<li>New _afs and _ppp users for privilege separation.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> capability negotiation bugs and speed it up when working with picky peers.
<li>Increase <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>'s socket buffer size to 64KB iff <!-- iff is not a typo --> IPsec or md5sig is in use.
<li>Fix a race condition in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> when a session is closed but there are updates in the buffer.
<li>Add strchr() and strrchr() to libkern.
<!-- ^ 20040506 -->
<li><font color="#e00000"><strong>SECURITY FIX: Check for integer overflow in procfs.</strong></font> Use of procfs is not recommended.<br>
    <a href="errata.html#procfs">A source code patch is available</a>.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>When a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> scrub rule with the 'reassemble tcp' option is in effect, use RFC1913 PAWS as a means of extending the TCP sequence space by 10 to 18 bits. This makes blind insertion attacks much more difficult, because the timestamp needs to be guessed as well as the TCP sequence number.
<li>Sprinkle <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strtonum&sektion=3">strtonum(3)</a> liberally all over <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&sektion=8">ifconfig(8)</a>.
<li>Match the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sha2&sektion=3">sha2(3)</a> functions up with the other hash types.
<li>Add a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&sektion=4">bpf(4)</a> write filter to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&sektion=8">dhclient(8)</a> and lock the descriptor.
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tzset&sektion=3">tzset(3)</a> before chrooting <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&sektion=8">dhclient(8)</a>.
<li>Create the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&sektion=8">dhclient(8)</a> privsep child before opening <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&sektion=4">bpf(4)</a>, creating the routing socket and opening the lease file.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&sektion=1">make(1)</a>, keep statistics for suffix transformations.
<!-- ^ 20040505 -->
<li>Remove <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bootpd&sektion=8">bootpd(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bootpef&sektion=8">bootpef(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bootpgw&sektion=8">bootpgw(8)</a> from the tree, their functionality is present in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&sektion=8">dhcpd(8)</a> and friends nowadays.
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nm&sektion=1">nm(1)</a> about ELF .plt*, .got*, .init and .fini sections.
<li>The TCP-specific route metrics are rarely used, so use a trimmed down version in the kernel (struct rt_kmetrics) and fake up a full-fat struct rt_metrics on demand for userland compatility.
<li>Apply bridge filter rules to frames destined for the local machine, so a single-interface bridge can do filtering and tagging.
<li>Add privilege separation to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&sektion=8">dhclient(8)</a>.
<li>Create /var/empty on the installer miniroot so some futuristic pie-in-the-sky privilege-separated <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&sektion=8">dhclient(8)</a> can work.
<!-- ^ 20040504 -->
<li>Convert <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping&sektion=8">ping(8)</a> to use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strtonum&sektion=3">strtonum(3)</a>.
<li>Add COMPAT_35 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8">config(8)</a> option for kernel binary compatibility with OpenBSD 3.5
<li>Add *Pad (do padding like *Final without finishing) and *FileChunk (digest a portion of a file) functions for each of the hash types in libc.
<li>Tweak <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ndbm&sektion=3">ndbm(3)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=semop&sektion=2">semop(2)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=shmget&sektion=2">shmget(2)</a> to match POSIX. Since this is an API change, crank libc's and libpthread's major version.
<li>Define bsd_signal(3) as required by XPG. Of course, it's just an alias for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=signal&sektion=3">signal(3)</a> here.
<li>New stdlib function <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strtonum&sektion=3">strtonum(3)</a>, a safe replacement for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=atoi&sektion=3">atoi(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strtol&sektion=3">strtol(3)</a> etc.
<li>Clean up properly if <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&sektion=4">wi(4)</a> PCMCIA attachment fails.
<li>Remove OpenBSD/pegasos. See the mailing list archives for some very good reasons why.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&sektion=8">cron(8)</a>'s crontab socket non-blocking.
<li>When setting PROT_NONE with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mprotect&sektion=2">mprotect(2)</a> on a wired entry, decrement the wired count and stop ntpd causing a panic (PR#3758).<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Some more fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strerror&sektion=3">strerror(3)</a>. Everything now goes via <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strerror_r&sektion=3">strerror_r(3)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cksum&sektion=1">cksum(1)</a> a link (in /bin) to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5&sektion=1">md5(1)</a> and remove the old program.
<li>Add support for cksum (three flavours), md4, sha256, sha384 and sha512 to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5&sektion=1">md5(1)</a>.
<!-- ^ 20040502 -->
<li>Fix a call to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disk_unbusy&sektion=9">disk_unbusy(9)</a> that lacked the third argument.
<li>Implement <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pthread_suspend_all_np&sektion=3">pthread_suspend_all_np(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pthread_resume_all_np&sektion=3">pthread_resume_all_np(3)</a>, needed by the Java HotSpot compiler. From FreeBSD.
<li>Fix the fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strerror&sektion=3">strerror(3)</a>.
<li>Do privilege revocation in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rbootd&sektion=8">rbootd(8)</a>.
<li>Fix a bug that could cause <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fxp&sektion=4">fxp(4)</a> to lock up for 15 seconds under heavy load.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<!-- ^ 20040501 -->
<li>Add _rbootd privilege separation/revocation user for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rbootd&sektion=8">rbootd(8)</a>.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&sektion=4">pfsync(4)</a> to be built in a kernel without <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a>.
<li>Start the 3.5-stable branch.
<li>Fix non-reentrancy and other bad stuff in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strerror&sektion=3">strerror(3)</a>.
<!-- ^ 20040530 -->
<li>Check <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a> payload lengths more carefully.
<li>Speedups and cleanups in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md4&sektion=3">md4(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5&sektion=3">md5(3)</a>.
<li>Fix alignment problems when copying <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sha2&sektion=3">sha2(3)</a>'s data pointer around.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nm&sektion=1">nm(1)</a> report empty a.out objects as having "no name list" instead of accusing them of having "bad format".
<!-- ^ 20040529 -->
<li>Replace the old RSA Data Security Inc. implementations of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md4&sektion=3">md4(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5&sektion=3">md5(3)</a> with code derived from Colin Plumb's public domain MD5 implementation.
<li>Wire <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdrop&sektion=8">tcpdrop(8)</a> into the build.
<li>Fix a null-dereference crasher in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>.
<li>Fix file descriptor leaks in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflogd&sektion=8">pflogd(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rpc.rusersd&sektion=8">rpc.rusersd(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd-setup&sektion=8">spamd-setup(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftpd&sektion=8">tftpd(8)</a>.
<li>Remove the old ISC DHCP code from the tree, much to Henning's delight.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a>, allow the PAGER environment variable to contain spaces.
<li>Update libevent to 0.8 + local changes.
<!-- XXX wtf Wed Apr 28 06:50:21 UTC 2004 usr.sbin/pkg_add/OpenBSD PackingList.pm -->
<li>Add some Zebra bug compatibility into <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>'s capabilities announcements.
<li>Put the IP addresses of users authenticated by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&sektion=8">authpf(8)</a> into the &lt;authpf-users&gt; table.
<li>Support AH as well as ESP flows for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> IPsec.
<li>Fix a bogus return statement in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> tables code when dealing with non-IP packets.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> peers to request route refreshes.
<li>Keep track of SAs inserted by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>, making it easier to remove them later.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> return-rst work on pure bridges.
<li>Remove the assumption, found in a number of places in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>, that af !=INET6 implies af==AF_INET.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a> print <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> packets as carp, and not VRRP.
<li>Some fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&sektion=4">pfsync(4)</a> statistics counters.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> sensitive to its physical interface: If the physical interface drops, so does the carp interface; and have all other carp interfaces back off (i.e. don't preempt, and set high advskew) so this host is unlikely to stay as master.
<li>Add IPv6 support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&sektion=8">authpf(8)</a>.
<!-- ^ 20040428 -->
<li>Generate an <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a> host key in /etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8">rc(8)</a>, just like the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a> host keys.
<li>Add IKE to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>'s IPsec support.
<li>Exit gracefully from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> with the -vvsq option if no queues are in use.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8">spamd(8)</a> pass a valid pointer as the fourth argument to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getaddrinfo&sektion=3">getaddrinfo(3)</a>.
<li>Add back a couple of missing break statements in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>, unbreaking tcpmd5.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>'s normaliser check that a TCP RST has exactly the right sequence number. The check only works when we're doing full fragment reassembly.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&sektion=8">ipsecadm(8)</a> looping forever when displaying zero-sized extensions.
<li>Allow only BGP traffic over the IPsec flows set up by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>.
<li>A number of quad fixes in libc.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a> to pass specified environment variables from client to server (OpenSSH bugzilla #815).
<li>Support RFC2918 "Route Refresh Capability for BGP-4" in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>.
<li>Fix incomplete removal of altq when loading a new rulebase that doesn't contain altq rules.
<!-- ^ 20040427 -->
<li>New program <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdrop&sektion=8">tcpdrop(8)</a> that uses the sysctl interface to drop TCP connections. Not built by default yet.
<li>Add a -n (no name lookup) flag to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systat&sektion=1">systat(1)</a>.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=select&sektion=2">select(2)</a>'s readability detection for NFS filehandles (PR#3757). Broken in the change to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=poll&sektion=2">poll(2)</a> backends, fix from UFS code.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8">spamd(8)</a>, clear the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getaddrinfo&sektion=3">getaddrinfo(3)</a> hints structure before use.
<li>Break an infinite recursion between tcp_output() and tcp_mtudisc() when the TCP MSS gets to be larger then the interface MTU. Connections will still stall, however.
<li>Allow TCP MSS below the failsafe 216 iff <!-- 'iff' is not a typo --> the interface MTU is less than 256.
<li>Back out (for now) the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=em&sektion=4">em(4)</a> buffer allocation increase (though not the deferred allocation) as it breaks older cards.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&sektion=8">cron(8)</a> to send mail to logins containing an underscore character.
<li>Add direct support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&sektion=4">ipsec(4)</a> between peers. Manual keying only for now.
<li>Much stricter checking of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&sektion=4">bpf(4)</a> code, preventing arbitrary reads and writes of kernel memory.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Allocate more buffers for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=em&sektion=4">em(4)</a> cards, but defer that allocation until <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&sektion=8">ifconfig(8)</a> up and remove it on interface shutdown.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&sektion=8">route(8)</a>'s display of the gateway when set using an explicit -gateway modifier.
<li>When IF_INPUT_ENQUEUE() queues an <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mbuf&sektion=9">mbuf(9)</a> with a cluster, check to see if the data in the cluster will fit into the mbuf and if so, copy the data and deallocate the cluster.
<li>For <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fxp&sektion=4">fxp(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sis&sektion=4">sis(4)</a>, permanently allocate only the minimum number of buffers. Allocate and deallocate receive buffers when <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&sektion=8">ifconfig(8)</a> brings the interface up and down respectively.
<li>Bandwidth checking fixes in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=altq&sektion=9">altq(9)</a>. Now a bandwidth of zero is allowed, producing a blackhole queue for CBQ and a realtime-only queue for HFSC.
<li>Add some <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=htonl&sektion=3">htonl(3)</a> paranoia around  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=arc4random&sektion=9">arc4random(9)</a> calls in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>, so that biases in the PRNG won't leak the firewall's byte order.
<li>Fix corruption of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>'s address pools when using more than 256 rules.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>In /etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8">rc(8)</a>, check that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4">carp(4)</a> interfaces really exist before attempting to bring them down at shutdown time.
<li>Start work on peer-to-peer IPsec support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> announce RFC2858 multiprotocol capabilities. Only IPv4 multicast is supported for now.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> prefer older (more stable) routes before resorting to comparison of BGP IDs and peer IP addresses.
<li>Add a reference count for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> anchor rules.
<!-- ^ 20040426 -->
<li>Since <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isprint&sektion=3">isprint(3)</a> doesn't consider all whitespace printable, also use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isspace&sektion=3">isspace(3)</a> for the binary file test in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&sektion=1">less(1)</a>.
<li>Fix float -&gt; quad conversion in libc.
<li>Prettier output from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpctl&sektion=8">bgpctl(8)</a>.
<li>Permit multiple default routes.
<li>A few more unionfs fixes.
<li>Respect access rights on a union filesystem (PR#745).
<li>Add a few pieces missed in the merge of OpenSSL 0.9.7d.
<li>Add input queue congestion flag support to a few interfaces that can't use the new IF_INPUT_ENQUEUE macro.
<li>Prevent an endless loop in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> with 'route-to lo0' rules (PR#3736).<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&sektion=8">authpf(8)</a> run <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> to change the rulebase instead of sucking in code from pfctl and doing it itself.
<li>Set MINCLSIZE back to its smaller pre-KAME IPv6 value, so now clusters will be used more often.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&sektion=4">pfsync(4)</a>, purge only a specific expired state instead of doing an expensive purge all expired states while running at a high <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spl&sektion=9">spl(9)</a>.
<li>Make sure the local address and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a> neighbor address are of the same address family.
<li>Use '|' instead of ':' as the field separator for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8">spamd(8)</a> database keys, in preparation for future IPv6 support.
<li>Fix a potential null dereference in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=3">ssl(3)</a> application utility code.
<!-- sbreserve() sb_mbmax -->
<li>Give <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=routed&sektion=8">routed(8)</a> a local copy of the radix tree code, so it doesn't get (re)broken by net/radix.c changes.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=3">ssl(3)</a> S/MIME work again.
<li>Add 'neighbor cloning' to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>, allowing a configuration to be specified for a network/prefixlength pair as well as the peer IP address. The configuration is cloned for each new peer in the given address range.
<li>Add tcpdrop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=3">sysctl(3)</a>, allowing a userland program terminate a TCP connection.
<li>Some string cleaning in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ddb&amp;sektion=4">ddb(4)</a>.
<li>Fix a missing return statement in in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&amp;sektion=8">bgpd(8)</a>'s control connection error path.
<li>Add multipath support to the radix tree, allowing multiple routes to a single destination (though it won't actually get you anywhere just yet). From KAME.
<li>Send <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4">pfsync(4)</a> packets for IPv6 protocols other than TCP, UDP and ICMP.
<li>Sync kernel radix tree code with 4.4BSD-Lite2 via NetBSD.
<li>Don't add a PF_GENERATED tag to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> synproxy generated packets for the second handshake, so they can match rules (and create state) on another interface.
<!-- ^ 20040425 -->
<li>Add a 'probability' modifier for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> rules, setting the likelihood with which a rule will trigger.
<li>Greatly simplify <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&amp;sektion=8">inetd(8)</a>'s hostname/address lookup code.
<li>Since OpenBSD has <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=openpty&amp;sektion=3">openpty(3)</a>, we may as well have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=telnetd&amp;sektion=8">telnetd(8)</a> use it.
<li>Initial support for IPv6 transport in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&amp;sektion=8">bgpd(8)</a>.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> config files to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=changelist&amp;sektion=5">changelist(5)</a> and /etc/mtree/special.
<li>Some additional TCP option length paranoia in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>'s normaliser.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstat&amp;sektion=1">netstat(1)</a> display the new tcps.rcvacktooold statistic counter.
<li>Sync &lt;tree.h&gt; with Niels Provos' version to get rid of a compiler warning for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=RB_NEXT&amp;sektion=3">RB_NEXT(3)</a>.
<!-- ^ 20040424 -->
<li>Port the gcc2 bounds checking support to gcc3, enabled with -Wbounded (see <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc-local&amp;sektion=1">gcc-local(1)</a>).
<li>Add some CMSG_ macros to get proper alignment in portalfs. From NetBSD.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>, make sure the KEY_LENGTH attribute is present when checking AES proposals as this is required when acting as responder to SafeNet peers.
<li>Silence <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt&amp;sektion=3">getopt(3)</a> errors in the privileged <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a> process.
<li>Don't display rubbish on the first output line from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vmstat&amp;sektion=8">vmstat(8)</a>, wait for the stats to stabilise.
<!-- ^ 20040423 -->
<li>Fix the calculation of a raw IPv6 UDP packet's checksum.
<li>For <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&amp;sektion=8">dhcpd(8)</a>'s ping probes, just use the pid for the ICMP id like <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping&amp;sektion=8">ping(8)</a> does, instead of some architecture-dependent wierdness.
<!-- ^ 20040422 -->
<li>Merge in new Omron LUNA port (luna88k), based on OpenBSD/mvme88k, NetBSD/luna68k and CMU Mach.
<li>As with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcrelay&amp;sektion=8">dhcrelay(8)</a>, set a write filter and lock the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&amp;sektion=4">bpf(4)</a> descriptor before privilege drop in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&amp;sektion=8">dhcpd(8)</a>.
<!-- ^ 20040421 -->
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pw_copy&amp;sektion=3">pw_copy(3)</a> to take the old entry as an additional parameter, allowing both a change of username and a check that the file hasn't changed since it was last read (fixes PR#3698). Adapted from FreeBSD.
<li>Set a write filter and lock <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcrelay&amp;sektion=8">dhcrelay(8)</a>'s <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&amp;sektion=4">bpf(4)</a> file descriptor before dropping privileges.
<li>Drop the port-changing options in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcrelay&amp;sektion=8">dhcrelay(8)</a> too, always use standard ports.
<li>New TCP stat counter tcps.rcvacktooold, counts the number of times we drop very old ACK packets when the sequence number isn't exactly right.
<li>Set the km_page allocator's low watermark to a value that allows the system to boot.
<li>Switch the build over to the new, improved <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&amp;sektion=8">dhcpd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcrelay&amp;sektion=8">dhcrelay(8)</a>.
<li>Remove the -p (listen port) option of new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&amp;sektion=8">dhcpd(8)</a>.
<!-- ^ 20040420 -->
<li>Bump the default kern.maxclusters to a value high enough to deter all but the most determined tweakers.
<li>Remove the GATEWAY <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a> option now that both IP forwarding and mbuf cluster allocation are configurable using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=3">sysctl(3)</a>.
<li>Introduce a new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=3">sysctl(3)</a> kern.maxclusters controlling (oddly enough) the maximum number of mbuf clusters. This deprecates the much-abused NMBCLUSTERS <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a> option.
<li>Use the km_page allocator as the backend for the mbuf and mbuf cluster pools.
<li>New km_page <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pool&amp;sektion=9">pool(9)</a> allocator running in an interrupt-safe kernel thread (kmthread).
<li>Resource starvation checks for sockets:
<ul>
  <li>Check the level of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mbuf&amp;sektion=9">mbuf(9)</a> cluster utilisation when doing an accepting a listen socket, and fail if usage is greater than 95% of the hard limit.
  <li>New API sbcheckreserve() returns ENOBUFS if more than 50% of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mbuf&amp;sektion=9">mbuf(9)</a> clusters are in use
  <li>Use sbcheckreserve() when accepting a connection, and on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setsockopt&amp;sektion=2">setsockopt(2)</a> for SO_SNDBUF and SND_RCVBUF, and allocate minimal buffers in in low-memory situations.
</ul>
<li>Stop propolice tripping an assert in gcc3.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> display an error if it can't open the /var/db/spamd database for writing, and return a proper error code.
<li>Cure the angst in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=user&amp;sektion=8">user(8)</a> caused by the non-existence of the /nonexistent directory.
<li>Correct new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&amp;sektion=8">dhcpd(8)</a>'s handling of very long lease times (PR#2888).
<li>Fix a propolice bug in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a> and unbreak MySQL (mysql bug id 1442).
<!-- ^ 20040419 -->
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> perform strict permission checks on ~/.ssh/config files and abort unless they're correct.
<li>If kernel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4">ipsec(4)</a> and/or <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipcomp&amp;sektion=4">ipcomp(4)</a> processing is disabled by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=3">sysctl(3)</a>, pass any packets through as raw IP to give userland a chance to handle them.
<li>Sync the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=em&amp;sektion=4">em(4)</a> driver with FreeBSD.
<li>Tidy up <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usb&amp;sektion=4">usb(4)</a> kernel configs in line with recent i386 changes.
<li><font color="#e00000"><strong>RELIABILITY FIX: Restore the ability to negotiate tags/wide/sync with some SCSI controllers</strong></font> (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=siop&sektion=4">siop(4)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=trm&sektion=4">trm(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iha&sektion=4">iha(4)</a>).<br>
    <a href="errata.html#scsi">A source code patch is available</a>.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Since <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&amp;sektion=8">dhcpd(8)</a> can now be invoked legitimately without an interface, don't abort when the user doesn't give any options.
<!-- ^ 20040418 -->
<li>New _tftpd user and group.
<li>Make sure <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=m_pullup2&amp;sektion=9">m_pullup2(9)</a> copies the M_CLUSTER flag when it creates a new mbuf (PR#3740).
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> block unconditionally when the input queue congestion flag is set, instead of doing CPU-intensive rule tests.
<li>If an interface input queue becomes full, set a new congestion flag in the queue structure. Since a full queue usually indicates processing overload, this flag can be used to allow other subsystems to cooperate in easing the situation.
<!-- ^ 20040417 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstat&amp;sektion=1">netstat(1)</a> show the number of mbuf clusters in use rather than the number of pages.
<li>Fix a ufs directory-related panic (PR#3672). Fix from FreeBSD.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Have the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1">cvs(1)</a> server check for attempts by a client to walk up the directory tree illegally.
<li>Undo a non-fix in shared memory <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=3">sysctl(3)</a> kern.shminfo.shmmni.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<font color="#e00000"><strong>SECURITY FIX: Pathname validation problems have been found in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1">cvs(1)</a></strong></font>, allowing malicious clients to create files outside the repository, allowing malicious servers to overwrite files outside the local CVS tree on the client and allowing clients to check out files outside the CVS repository.<br>
    <a href="errata.html#cvs">A source code patch is available</a>.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Some address family agnosticism in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&amp;sektion=8">bgpd(8)</a>.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpctl&amp;sektion=8">bgpctl(8)</a> show IPv6 peer addresses in neighbour view.
<!-- ^ 20040416 -->
<li>Now that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&amp;sektion=8">dhcpd(8)</a> doesn't need to continuously reopen the leases file for writing, have it <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=2">chroot(2)</a> to /var/empty and drop privileges after starting up.
<li>Only open the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&amp;sektion=8">dhcpd(8)</a> leases file once instead of every time it needs to be written.
<li>Set up new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&amp;sektion=8">dhcpd(8)</a>'s <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&amp;sektion=4">bpf(4)</a> listen filter for the right port.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mopd&amp;sektion=8">mopd(8)</a> do a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=2">chroot(2)</a> to /var/empty and drop its privileges.
<li>Massive <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=style&amp;sektion=9">style(9)</a> application to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>.
<li>Stop another instance of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&amp;sektion=8">syslogd(8)</a> from unlinking a socket that's in use.
<li>TCP packets are now allowed to have IPv4 options.
<li>Begin work of separating binary emulation type from the executable file format.
<!-- ^ 20040415 -->
<li>New user and group _mopd, for some obscure reason related to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mopd&amp;sektion=8">mopd(8)</a>.
<li>Enable all supported USB devices in the i386 GENERIC config.
<li>Pass the jobname to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpd&amp;sektion=8">lpd(8)</a>'s input filter via the -j option, some filters need it.
<li>When the syncache aborts a connection, don't set an ACK in the RST packet.
<li>Add entries for all supported USB devices to the GENERIC config on sparc64.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crypto&amp;sektion=9">crypto(9)</a>, add cases for sha2 algorithms in swcr_authcompute().
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systat&amp;sektion=1">systat(1)</a> screen updates after resuming from a ^Z.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> antispoof rules work with dynamic interfaces.
<li>Match on all characters of the interface name in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> parser.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Make sure privsep <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a> transitions into STATE_RUN even when writing to stdout with '-w -'.
<li>Implement AI_NUMERICSERV (from RFC3493) in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getaddrinfo&amp;sektion=3">getaddrinfo(3)</a>.
<li>Since the UDP checksum in mandatory in IPv6, drop any input packets where it's absent and make sure it's set even for error output.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&amp;sektion=8">dhcpd(8)</a> cleanup:
<ul>
  <li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt&amp;sektion=3">getopt(3)</a>.
  <li>Remove pidfile code.
  <li>Steal some already-sanitised code from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&amp;sektion=8">dhclient(8)</a>.
  <li>Remove code to handle network access methods we don't care about, only <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&amp;sektion=4">bpf(4)</a> is necessary here.
</ul>
<!-- ^ 20040414 -->
<li>Break out <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&amp;sektion=8">dhcpd(8)</a> into usr.sbin/dhcpd and begin The Process.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpd&amp;sektion=8">lpd(8)</a> treat 'o' format files (PostScript) from MacOS 10.1 the same as 'l', not 'f', since PostScript can contain binary data. From FreeBSD.
<li>Parse and handle RFC 2858 Multiprotocol Extensions in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&amp;sektion=8">bgpd(8)</a>.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a> to recover files larger than 4GB by using size_t instead of long.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&amp;sektion=8">dhclient(8)</a> retry up to ten times after a second's delay for interfaces showing no link.
<li>More careful IKE payload parsing in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a>.
<li>New _PATH_DEVFD and _PATH_VAREMPTY constants in &lt;paths.h&gt;.
<li>Fix a null deref in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&amp;sektion=8">syslogd(8)</a>.
<li>Have new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcrelay&amp;sektion=8">dhcrelay(8)</a> do a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=2">chroot(2)</a> to /var/empty and drop privileges.
<li>In libpthread, update curthread immediately after a thread switch.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>New _dhcp user and group for, funnily enough, the DHCP programs.
<!-- ^ 20040413 -->
<li>Refactor the installer's network initialisation code into IPv4-specific sections in preparation for IPv6.
<li>Start surgery on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcrelay&amp;sektion=8">dhcrelay(8)</a>:
<ul>
  <li>Move to /usr/src/usr.sbin/dhcrelay.
  <li>Kill pidfile code.
  <li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=daemon&amp;sektion=3">daemon(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt&amp;sektion=3">getopt(3)</a> instead of DIY.
</ul>
<li>Huge cleanup of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mopd&amp;sektion=8">mopd(8)</a>.
<li>Drop very old TCP ACK packets.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Implement a rate limit for TCP ACKs of 100pps, and use this more general mechanism for in-window SYN handling too.
<li>Safely handle aborts in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malloc&amp;sektion=3">malloc(3)</a> etc. without tripping the recursive call handler by mistake.
<li><font color="#e00000"><strong>RELIABILITY FIX: Under load "recent model" gdt(4) controllers will lock up.</strong></font><br>
    <a href="errata.html#gdt">A source code patch is available</a>.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<!-- ^ 20040412 -->
<li>Fix an accidental busy-wait in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sensorsd&amp;sektion=8">sensorsd(8)</a>.
<li>Increase the maximum number of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pty&amp;sektion=4">pty(4)</a> devices to 992. See the <a href="http://www.openbsd.org/faq/upgrade-minifaq.html">Upgrading Mini-FAQ</a> item 3.5.1 for upgrade instructions.
<li>Fix a typo in kern/tty_pty.c when generating <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pty&amp;sektion=4">pty(4)</a> device filenames, soon to be exposed by changes to pty.
<li>Compatiblity fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mpt&amp;sektion=4">mpt(4)</a>.
<!-- ^ 20040411 -->
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=snprintf&amp;sektion=3">snprintf(3)</a>'s handling with size==0, in line with a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vsnprintf&amp;sektion=3">vsnprintf(3)</a> change (rev. 1.5) from years ago.
<li>Fix a segmentation fault in Xlib when a .Xauthority file contains IPv6 XDM-AUTHORIZATION-1 data (NetBSD PR xsrc/25098).
<li>Rearrange the GENERIC config file so clonable interfaces are together, and without the now-unnecessary device count.
<!-- ^ 20040410 -->
<li>When libpthread is <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=poll&amp;sektion=2">poll(2)</a>ing for read- or writability of an fd on behalf of a thread, check the ERR, HUP and NVAL flags as well as the read or write flags.
<li>Sync <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uudecode&amp;sektion=1">uudecode(1)</a> with FreeBSD, including base64 support.
<li>Stop a number of network interfaces moaning about a failed <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mbuf&amp;sektion=9">mbuf(9)</a> allocations, the complaint uses mbufs and just makes things worse.
<li>Pass SIGINT and SIGQUIT through to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&amp;sektion=8">syslogd(8)</a>'s privsep child.
<li>Move the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> altq, OS fingerprint and table <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pool&amp;sektion=9">pool(9)</a>s from the default (interrupt context) kmem allocator to the much-larger nointr allocator.
<li>If <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newsyslog.conf&amp;sektion=5">newsyslog.conf(5)</a> doesn't list a user or group, create new files with the uid or gid from the existing file.
<li>Force <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1">cvs(1)</a> to use the libc <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt&amp;sektion=3">getopt(3)</a> implementation instead of its own.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> check that the file it's trying to open isn't really a directory.
<!-- ^ 20040409 -->
<li>More <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a> optimiser fixes for mvme88k
<li>Swap the last two parameters to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=TAILQ_FOREACH_REVERSE&amp;sektion=3">TAILQ_FOREACH_REVERSE(3)</a> in line with FreeBSD and NetBSD.
<li>Use a more efficient <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=realloc&amp;sektion=3">realloc(3)</a> size when displaying long lines in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a>. Speeds things up when, for example, your system crashes in the middle of a build leaving a pile of linefeedless binary crap in the typescript file.
<li>After going to the trouble of saving errno before it gets overwritten, use the saved value in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflogd&amp;sektion=8">pflogd(8)</a>'s error output.
<li>Don't try to close invalid file descriptors in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a> privsep code.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> set the timezone before privsep so the child has the right zone settings.
<li>Within <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&amp;sektion=8">dhclient(8)</a>'s new lease file naming scheme, allow for the -l filename override.
<li>On sparc and sparc64, don't compare a RAMDISK kernel's root filesystem time with the system time, they're unlikely to have much in common.
<!-- ^ 20040408 -->
<li>Zero out the key data pointer for unknown <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> key types.
<li>Merge in Perl 5.8.3 and <!-- 20040408 --> OpenSSL 0.9.7d. No lame new licenses for a change.
<li>Now that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&amp;sektion=8">dhclient(8)</a> needs an instance per interface, having a single lease file won't do so use /var/db/dhclient.leases.&lt;ifname&gt;.
<li>Make sure the list dereference when deleting all SAs in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> comes before the delete operation that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=free&amp;sektion=3">free(3)</a>s the list node.
<li>Fix /etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.local&amp;sektion=8">rc.local(8)</a>'s handling of ntpd_flags.
<li>Unbreak pxeboot(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pxeboot&amp;sektion=8&amp;arch=i386">8/i386</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pxeboot&amp;sektion=8&amp;arch=amd64">8/amd64</a>) build under gcc3.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&amp;sektion=8">dhclient(8)</a> to work on more than the first physical interface found.
<li>In several programs, fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt&amp;sektion=3">getopt(3)</a> calls containing option letters for which there's no corresponding case handler.
<li>ISO C function declarations for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1">make(1)</a>.
<li>Fix a sizeof(pointer) bug in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a>'s IPv6 options parser.
<li>Fix some misplaced braces in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&amp;sektion=8">route(8)</a>, making 'route add' a bit more -q.
<li>Enable /dev/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crypto&amp;sektion=4">crypto(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hifn&amp;sektion=4">hifn(4)</a> on cats machines.
<!-- ^ 20040407 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newsyslog&amp;sektion=8">newsyslog(8)</a>'s file renaming and copying operations set the same permissions in all cases.
<li>Fix double call of the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ktrace&amp;sektion=2">ktrace(2)</a> signal trap handler. <!-- XXX -->
<li>Add missing prototypes (in &lt;pwd.h&gt;) for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bcrypt&amp;sektion=3">bcrypt(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5crypt&amp;sektion=3">md5crypt(3)</a>.
<li>Fix some <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a> optimisation bugs on mvme88k.
<li>Fix a sizeof(wrongthing) bug in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afsd&amp;sektion=8">afsd(8)</a> that was breaking 64-bit machines.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a> print IKE DELETE payload contents.
<li>Remove the installer's special-case upgrade of the OpenSSL /usr/include symlinks.
<li>Fix a double-free in libpthread (PR#3730).
<li>Reenable libm compiler optimisation on sparc64, since it works properly with gcc3.
<!-- ^ 20040406 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sscanf&amp;sektion=3">sscanf(3)</a> -&gt; <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strtol&amp;sektion=3">strtol(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newsyslog&amp;sektion=8">newsyslog(8)</a>.
<li>Don't initialise <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ncurses&amp;sektion=3">ncurses(3)</a> until after options processing in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=backgammon&amp;sektion=6">backgammon(6)</a>.
<li>Plug the new-and-improved <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&amp;sektion=8">dhclient(8)</a> into the standard build.
<li>Fix a sizeof(pointer) bugs in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afsd&amp;sektion=8">afsd(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sup&amp;sektion=1">sup(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=visudo&amp;sektion=8">visudo(8)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>'s cache of m_tag_get() <!-- NOMAN --> results actually work.
<li>Check for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdopen&amp;sektion=3">fdopen(3)</a> failure in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vacation&amp;sektion=1">vacation(1)</a>.
<li>3.5 -&gt; 3.5-current.
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wskbd&amp;sektion=4">wskbd(4)</a>'s AltGr key handling so shift-altgr-other has the same effect as altgr-shift-other.
<li>Never allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> states propogated via <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4">pfsync(4)</a> to overwrite newer states held locally. If an overwrite is attempted, broadcast the newer version to the network to speed resynchronisation.
<li>Under Linux emulation, pass <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=madvise&amp;sektion=2">madvise(2)</a> straight through to the native syscall.
<!-- ^ 20040405 -->
<li><font color="#e00000"><strong>RELIABILITY FIX: Reply to in-window SYN with a rate-limited ACK.</strong></font><br>
    <a href="errata.html#tcp">A source code patch is available</a>.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Don't try to recreate the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xfs&amp;sektion=1">xfs(1)</a> logfile after dropping privileges.
<li>Don't abort <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xfs&amp;sektion=1">xfs(1)</a> gracelessly when handling an unimplemented protocol request.
<!-- ^ 20040404 -->
<li>Many manual page fixes.
<li>In a number of programs, don't close files that are known to be not open.
<li>Fix a missing initialisation in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a>'s privsep code.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>'s -v logging option do something useful.
<!-- ^ 20040403 -->
<li>Fix line breaks in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>'s log output.
<li>Allow non-GNU ANSI compilers (e.g. TenDRA) to build again by changing 'static inline' to 'static __inline'.
<li>Don't close descriptors we know aren't open in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&amp;sektion=8">syslogd(8)</a>.
<li>Drop arc4random_8() api from the kernel.
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rfork&amp;sektion=2">rfork(2)</a> so the RFMEM flag gives complete vmspace sharing including the stack, in line with other implementations.
<li>Add --line-buffered option to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=grep&amp;sektion=1">grep(1)</a> etc.
<li>Remove some unbounded recursions in the libc regex engine, found with certain expressions containing backreferences.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ls&amp;sektion=1">ls(1)</a>' column alignment when using the -h option.
<li>New <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=axe&amp;sektion=4">axe(4)</a> USB Ethernet driver.
<!-- ^ 20040402 -->
<li>Fix an off-by-one in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=procmap&amp;sektion=1">procmap(1)</a>.
<li>Better bounds checking in the ramdisk's strategy() routine.
<li>Limit the trust between local and remote instances of the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcp&amp;sektion=1">rcp(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scp&amp;sektion=1">scp(1)</a> programs.
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstat&amp;sektion=1">netstat(1)</a>'s -p option so that, when used without -s, it shows a list of sockets for the given protocol.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcmdsh&amp;sektion=3">rcmdsh(3)</a> work on hosts without an IPv4 address.
<li>Initialise the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kqueue&amp;sektion=2">kqueue(2)</a> subsystem in kernel main() instead of on first use.
<!-- ^ 20040401 -->
<li>Add IPv6 support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=openssl&amp;sektion=1">openssl(1)</a>'s s_client command, complete with the usual '-4' and '-6' switches.
<li>Reorder checks in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> so that the IP options check isn't skipped just because UseDNS=no.
<li>Make /usr/src/Makefile's cross-tools target work again.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&amp;sektion=8">inetd(8)</a> properly use the exec'd program's basename as argv[0] if no arguments are specified.
<li>Fix includes search order in GNU <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld&amp;sektion=1">ld(1)</a> to help cross-ld builds.
<li>Don't byte-swap a variable we'll need later in its original order in GNU <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld&amp;sektion=1">ld(1)</a>.
<li>On an msdos filesystem with long filenames support enabled, fix some false-positive name matches when an integer multiple of 13 characters match. From NetBSD.
<li>Some portability fixups in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>.
<li>tcpmd5 changes for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&amp;sektion=8">bgpd(8)</a>:
<ul>
  <li>Allow either the source or destination to be a wildcard in SA lookups (netinet/ip_ipsp.c:gettdbbysrcdst()).
  <li>Add support for the wildcard to pfkeyv2.
  <li>Use the new pfkeyv2 wildcard support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&amp;sektion=8">bgpd(8)</a> and remove the local address requirement for md5sig.
</ul>
<!-- ^ 20040331 -->
<li>Unbreak libc's regex engine compilation with -DREDEBUG.
<li>Change /etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8">rc(8)</a> so that a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> banner (configured via $spamd_flags) may contain spaces (PR#3720).
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pax&amp;sektion=1">pax(1)</a> how to expand GNU tar long links. From NetBSD.
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&amp;sektion=1">systrace(1)</a>'s handling of filename-too-long errors so it just fails the syscall instead of stopping the process. Fixes PR#3140.
<li>Some ELF name translation fixes in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nm&amp;sektion=1">nm(1)</a>.
<li>Add /etc/rc.conf.local to /etc/mtree/special.
<li>Lots more activity on the SMP branch.
<li>Wrap <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a> installation operations in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=perl&amp;sektion=1">perl(1)</a> eval{} blocks so it's possible to at least register what did work.
<li>Unknown entry types in a packing list now result in an error.
<!-- ^ 20040330 -->
</ul>
<p>

This list mentions mostly platform-independent changes.  For a list of changes
made in a particular platform, please check the page for that platform.  If you
find them not listed there, the changes are either (1) not being documented or
(2) are documented here.<br><br>

<hr>
<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="back.gif" border=0 alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus.html,v 1.926 2004/06/03 23:38:49 deraadt Exp $</small>

</body>
</html>
