<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD -current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD -current changes">
<meta name="keywords" content="openbsd,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2007 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">OpenBSD -current changelog</font></h2>
<hr>

<p>
This is a partial list of the major machine-independent changes
(i.e., these are the changes people ask about most often).  Port
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
There is a separate <a href="portsplus/index.html">list of Changes to the ports collection</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>.
<br>
</h3>

<p>
<h3><font color="#0000e0">Changes made between OpenBSD 4.4 and OpenBSD 4.5</font></h3><p>
<p>

<ul>
<!-- 2008/08/26 -->
<li>Updated libdrm to 2.3.1.
<li>Plug potential memory leak in the uvm_amap code.
<!-- 2008/08/25 -->
<li>Updated xterm to update 236.
<li>SGI machines now get an installXX.iso image to install from.
<li>Added support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usb&sektion=4&format=html">usb(4)</a> devices on sgi.
<!-- 2008/08/24 -->
<li>Make NFS correctly invalidate attribute cache entries in case the vnode mode changes.
<li>Added support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uvideo&sektion=4&format=html">uvideo(4)</a> for processing unit controls.
<li>Stop making <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sd&sektion=4&format=html">sd(4)</a> report CHS information, since it mostly is lies.
<!-- 2008/08/23 -->
<li>Updated xf86-video-chips to 1.2.0 and xf86-input-mouse to 1.3.0.
<li>Added support for Gunze touchpanels, found on Panasonic Toughbook CF-27.
<li>Updated xf86-video-ark to 0.7.0 and xf86-video-ast to 0.85.0.
<li>Make xf86-video-sunffb build on sparc64 machines.
<li>Updated the xenocara input code for: magellan, microtouch, mutouch, palmax, penmount, summa, tek4957, ur98 and vmmouse.
<li>Updated the xenocara input code for: acecad, calcomp, citron, digitaledge, dmc, dynapro, elo2300, elographics, fpit, hyperpen, jamstudio and xf86-input-joystick.
<li>Make mbstowcs() return the correct length of the wchar_t string in some cases.
<!-- 2008/08/22 -->
<li>Fixed the libc wcschr() function.
<li>For Vax machines, let <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lkms&sektion=4&format=html">lkms(4)</a> support VSXXX-AB tables in addition to the mice already supported.
<li>Smarter implementation of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=calloc&sektion=3&format=html">calloc(3)</a>, based on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mmap&sektion=2&format=html">mmap(2)</a> returning zero filled pages.
<li>Merge <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crunchgen&sektion=1&format=html">crunchgen(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crunchide&sektion=1&format=html">crunchide(1)</a> into one, and move to usr.sbin.
<li>Make sure OpenBSD sets _POSIX_JOB_CONTROL and _POSIX_SAVED_IDS to the correct values.
<li>Set the PIE address range on hppa, mips and sh to minimize mmap pressure.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&sektion=1&format=html">ftp(1)</a> commands which toggle settings take an explicit on or off argument.
<!-- 2008/08/21 -->
<li>In the libc getgrouplist code, after spotting a + record, continue scanning and pick up later groups in the file.
<li>Added sbus support code to xenocara to be able to support the sunffb driver.
<li>Updated the xf86-video-siliconmotion driver to 1.6.0.
<!-- 2008/08/20 -->
<li>Updated freetype in xenocara to 2.3.7.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1&format=html">ssh(1)</a> allow ForceCommand internal-sftp with arguments.
<li>Initial minimal graphics driver for VAXstation 3[58}x0 LEGSS option. Limited to 8 bit and no acceleration.
<li>Enabled support for socket maps in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&sektion=8&format=html">sendmail(8)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&sektion=1&format=html">gzip(1)</a> use and report errors the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inflate&sektion=3&format=html">inflate(3)</a> can return.
<!-- 2008/08/19 -->
<li>Allow devices attaching at boot to be disabled in UKC.
<li>Made it possible to enter DDB on macppc from a serial console.
<li>Added DLink DWA-110 to the list of supported <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rum&sektion=4&format=html">rum(4)</a> devices.
<!-- 2008/08/18 -->
<li>Added support for the "Firefox" VAXstation 3[58][24]0 workstation machines.
<li>Added <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=stge&sektion=4&format=html">stge(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gentbi&sektion=4&format=html">gentbi(4)</a> to hppa GENERIC and RAMDISK kernels.
<li>Updated pcc from the master repo. Can now compile both userland and kernel (with some patches).
<!-- 2008/08/17 -->
<!-- 2008/08/16 -->
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=m4&sektion=1&format=html">m4(1)</a> be more liberal in include handling and stop skipping spaces outside of paranthesis.
<!-- 2008/08/15 -->
<li>Added an option to force TCP lookups in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=resolv.conf&sektion=5&format=html">resolv.conf(5)</a> and extend nameserver declaration syntax to support port numbers.
<!-- 2008/08/14 -->
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=acpi&sektion=4&format=html">acpi(4)</a> dsdt parsing causing panics on the Asus eeePC 1000H when attaching the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=acpiasus&sektion=4&format=html">acpiasus(4)</a> driver.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_vnd&sektion=8&format=html">mount_vnd(8)</a> accept a sector size to be specified by the user when configuring a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnd&sektion=4&format=html">vnd(4)</a> device.
<!-- 2008/08/13 -->
<li>Added a VIDIOC_ENUM_FRAMESIZES ioctl to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uvideo&sektion=4&format=html">uvideo(4)</a> so applications can query the available formats and resolutions of a device.
<li>Initial import of a driver for the integrated random number generator of the UltraSPARC T2.
<!-- 2008/08/12 -->
<li>For amd64 and i386 on some newer Turion CPUs with the C1E 'feature', running a hlt instruction with both cores kills the timer. Disable that 'feature'.
<li>Added the 8139D PCI id to the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rl&sektion=4&format=html">rl(4)</a> device list.
<li>Fix out-of-bounds memory access in Mesa.
<li>Fix multiple addition errors for amd64 and i386 when extended partitions are just before an OpenBSD partition in an MBR.
<li>Added BIP, Broadcast/Multicast Integrity Protocol defined in P802.11w to provide integrity and replay protection for broadcast/multicast management frames.
<li>Make the 802.11 code maintain a count of TKIP and CCMP replayed frames.
<li>Initial implementation of the HMAC-MD5, HMAC-SHA1, HMAC-SHA256, AES-128-CMAC and AES Key Wrap algorithms.
<li>Basic ELF header bounds check in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8&format=html">config(8)</a> to avoid crashes on truncated kernels.
<!-- 2008/08/11 -->
<li>Add support for RX/TX checksum offload on newer <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=re&sektion=4&format=html">re(4)</a> chipsets.
<li>Plug a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&sektion=1&format=html">ksh(1)</a> when freeing I/O redirection in commands.
<li>Added hw.cpuspeed for all sparc64 CPU types.
<li>Added hw.setperf support for UltraSPARC-IIe-based sparc64 machines.
<li>Prevent buffer underrun in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fingerd&sektion=8&format=html">fingerd(8)</a>.
<!-- 2008/08/10 -->
<li>Stop demoting USB2 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uvideo&sektion=4&format=html">uvideo(4)</a> devices to USB1, instead let them attach to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ehci&sektion=4&format=html">ehci(4)</a> since we have isoc support.
<li>Add support for VAXstation 3[58][24]0 to the bootlocks, currently limited to serial console.
<li>Use STICK logic on UltraSPARC-IIe-based sparc64 machines to generate clock interrupts.
<li>Add hypervisor calls on sparc64 for the Sun4v random number generator interface.
<!-- 2008/08/09 -->
<li>Added support for isochronous xfer support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ehci&sektion=4&format=html">ehci(4)</a>.
<li>Add Jumbo support flag to MCP79-based <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nfe&sektion=4&format=html">nfe(4)</a> devices.
<li>Added fr-dvorak-be'po layout as fr.dvorak for PS/2 and USB keyboards.
<!-- 2008/08/08 -->
<li>Allow creation and use of ffs filesystems on non-512 byte sectorsize devices. Only i386 and sgi for now.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=relayd&sektion=8&format=html">relayd(8)</a> add a $SERVER_NAME variable which is "OpenBSD relayd" by default.
<li>Fix possible memory leaks in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=relayd&sektion=8&format=html">relayd(8)</a> chunked encoding handler.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=relayd&sektion=8&format=html">relayd(8)</a>, support HTTP responses that neither specify a Content-Length header nor chunked encoding.
<li>Do not latch the IPSec tdb to the inpcb unconditionally, since packets could get encrypted unintentionally.
<li>Add Longshine LCS-8031N to the list of supported <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ral&sektion=4&format=html">ral(4)</a> devices.
<li>Increment if_ierrors in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=upgt&sektion=4&format=html">upgt(4)</a> if we fail to extract the mbuf in the RX routine.
<li>Plug memory leak in m_pullup2().
<!-- 2008/08/07 -->
<li>Reenabled the routing priority again.
<li>Make sparc64 use %sys_tick to generate clock interrupts on systems that have it.
<li>Fix sparc64 SMP %tick interrupt handling. Sometimes clock would stop ticking on some CPUs because of lost ticks.
<li>Make sure the spanning tree <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bridge&sektion=4&format=html">bridge(4)</a> code account for STP frames in if_obytes and if_omcasts.
<li>Enabled ALTQ and VLAN on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tsec&sektion=4&format=html">tsec(4)</a> for the socppc platform.
<li>Do not wait in the socket code for a free buffer in sosend(). Fixes userland hangs if the system runs out of mbuf clusters.
</ul>
<p>

This list mentions mostly platform-independent changes.  For a list of changes
made in a particular platform, please check the page for that platform.  If you
find them not listed there, the changes are either (1) not being documented or
(2) are documented here.<br><br>

<hr>
<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="back.gif" border=0 alt="OpenBSD"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus.html,v 1.1120 2008/09/24 17:00:47 jj Exp $</small>

</body>
</html>
