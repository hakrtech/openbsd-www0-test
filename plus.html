<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD -current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD -current changes">
<meta name="keywords" content="openbsd,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2007 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">OpenBSD -current changelog</font></h2>
<hr>

<p>
This is a partial list of the major machine-independent changes
(i.e., these are the changes people ask about most often).  Port
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
There is a separate <a href="portsplus/index.html">list of Changes to the ports collection</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>.
<br>
</h3>

<p>
<h3><font color="#0000e0">Changes made between OpenBSD 4.1 and OpenBSD 4.2</font></h3><p>
<p>

<ul>
<!-- 2007/05/29 -->
<li>Fix race in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&sektion=4&format=html">softraid(4)</a> sync code.
<li>Added workarounds in the SHM code, fixes current opera with SHM.
<li>Make i386 machines with APM not attach ACPI by default.
<li>Improvements in the amd64 EST code for intel CPUs and support for CPU temperature sensors.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8&format=html">disklabel(8)</a> format to support larger disks and partitions.
<!-- 2007/05/28 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldd&sektion=1&format=html">ldd(1)</a> able to print dynamic linking information on libraries themselves.
<li>New driver for the Sparc v215/245 front panel LEDs added to sparc64 GENERIC.
<li>64-bit fixes in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&sektion=4&format=html">softraid(4)</a> code.
<li>Move <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=top&sektion=1&format=html">top(1)</a> to use curses instead of hand-crafted redraws.
<li>Another <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4&format=html">pf(4)</a> speed improvement. Delay packet checksumming in the PF code until we are sure we need to send RST/ICMP error messages back, and only do it then.
<li>Allow set-uid binaries to dump core into /var/crash if the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8&format=html">sysctl(8)</a> kern.nosuidcoredump is set to 2.
<li>Remove support in boot for the long list of different kernel names to look for.
<li>Removed unmaintained COMPAT_NETBSD code.
<li>For <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fxp&sektion=4&format=html">fxp(4)</a>, nudge the interrupt coalescing timeout to 128 ms. Lessens the interrupt load on busy <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fxp&sektion=4&format=html">fxp(4)</a> cards a lot.
<li>Small steps towards <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hoststated&sektion=8&format=html">hoststated(8)</a> reloads.
<li>Fixes for the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&sektion=4&format=html">softraid(4)</a> disk assembly code. Not usable yet.
<li>Improvement in the memory pool handling code, removing time from the pool header leads to better packet rates.
<li>Add a global-wd-mode command to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&sektion=1&format=html">mg(1)</a>, which toggles between the current and the old behavior of one global working directory.
<li>Enable interrupt holdoff on DP83816 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sis&sektion=4&format=html">sis(4)</a> chips. Significally improves performance of such devices under load.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8&format=html">bgpd(8)</a> to match on communities using 0 in the AS path.
<li>Large performance improvement for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4&format=html">pf(4)</a> by keeping information previously stored in a mbuf tag in the mbuf header directly.
<li>Fix for sparc64 machine dependent code for autoconf, fixes panics seen on Sun v215 machines.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcn&sektion=4&format=html">pcn(4)</a> to the macppc GENERIC and RAMDISK kernels.
<li>Make the internal random pool seed only from network interrupts, not once per packet due to drivers using interrupt mitigation more now.
<!-- 2007/05/27 -->
<li>Remove support for the old Archive/Wangtek catridge tape driver, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wt&sektion=4&format=html">wt(4)</a>.
<li>Lots of internal work on the various <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=package&sektion=5&format=html">package(5)</a> utilities.
<li>Clean up NFS and the nfssvc() system call, and remove old non-working kerberos code.
<li>Second step of making <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hoststated&sektion=8&format=html">hoststated(8)</a> reload checked in.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hoststated&sektion=8&format=html">hoststated(8)</a> to specify table templates in the configuration file and to inherit them from multiple services or relays.
<li>Completely rewritten <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ips&sektion=4&format=html">ips(4)</a> driver.
<li>On hppa, dynamically allocate IRQs for PCI devices on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=elroy&sektion=4&format=html">elroy(4)</a>.
<li>Enable <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ips&sektion=4&format=html">ips(4)</a> on amd64 GENERIC kernels.
<li>Make pcmcia-based <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malo&sektion=4&format=html">malo(4)</a> devices work on big endian arches too.
<li>Add additional truncation checks in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8&format=html">tcpdump(8)</a> when parsing and printing bgp packets.
<!-- 2007/05/26 -->
<li>Fix off-by-one in i386 bounce buffer allocator code.
<li>Fix off-by-one error in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1&format=html">cvs(1)</a> server code.
<li>Link <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_vnd&sektion=8&format=html">mount_vnd(8)</a> to the build scripts, and make usr/sbin/vnconfig a link pointing to it.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tht&sektion=4&format=html">tht(4)</a> to sparc64 GENERIC kernels.
<li>Add dynamic buffer cache to all platforms, instead of fixed amount of pages.
<li>First steps to implementing reload support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hoststated&sektion=8&format=html">hoststated(8)</a>.
<li>Enable <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bio&sektion=4&format=html">bio(4)</a> on all platforms.
<li>Initial import of a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=che&sektion=4&format=html">che(4)</a> driver for Chelsio 10GE ethernet cards.
<li>Add support in X11 to use the "W" axis for mouse and input devices.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=re&sektion=4&format=html">re(4)</a> to the sparc64 RAMDISK kernel.
<li>Fix for macppc machines which boot off 2940 scsi disks.
<!-- 2007/05/25 -->
<li>Make mount_vnd a C program, in order to completly replace <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnconfig&sektion=8&format=html">vnconfig(8)</a> in the future.
<li>Add cdrip and cdplay commands to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cdio&sektion=1&format=html">cdio(1)</a>.
<li>Protect against races in rthreads code when initializing mutexes.
<li>Remove y2k hack in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=date&sektion=1&format=html">date(1)</a>, if no century is specified, use this one.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&sektion=8&format=html">cron(8)</a> handle SIGPIPE when writing to sendmail, allows <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&sektion=8&format=html">cron(8)</a> to run jobs when sendmail is missing or broken and will log a warning instead.
<li>Rework TLB shootdown code for i386 and amd64, gives fairly large speed improvements.
<li>Added skeleton implementation of Xwscons, a kdrive based X server for wscons dumb framebuffer mode.
<li>Sanity check the time spec for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=touch&sektion=1&format=html">touch(1)</a>, and if no century is specified, use this one.
<!-- 2007/05/24 -->
<li>Initial driver for Marwell 88W8385 PCMCIA <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malo&sektion=4&format=html">malo(4)</a> device.
<li>Add support for W83627DHG hardware monitors chipsets in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lm&sektion=4&format=html">lm(4)</a> driver.
<li>Fix integer overflow in the freetype lib for xenocara X11.
<li>Improved partitioning and installation procedure for macppcs machines.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=at&sektion=1&format=html">at(1)</a> default to this century if not specified.
<li>Add ZD1211B-based Edimax EW-7317LDG Wireless Detector / USB Adaptor to the list of supported <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=zyd&sektion=4&format=html">zyd(4)</a> devices.
<!-- 2007/05/23 -->
<li>Add code to spin up secondary CPUs on macppc, still work in progress.
<li>Change dmesg printing of memory to MB instead of KB.
<li>Enabled <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=elroy&sektion=4&arch=hppa&format=html">elroy(4)</a> on hppa GENERIC and RAMDISK kernels.
<li>Fix in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4&format=html">pf(4)</a> for pppoe f_addrhook panics.
<!-- 2007/05/22 -->
<li>Add BCM5709 SerDes to the list of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bnx&sektion=4&format=html">bnx(4)</a> devices. Disabled for now.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&sektion=4&format=html">pciide(4)</a> support to hppa GENERIC and RAMDISK kernels.
<li>Prevent newly created interfaces from causing reload problems in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&sektion=8&format=html">ospfd(8)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8&format=html">bgpd(8)</a>, only try to merge an AS_SEQUENCE if there is a difference between the 4-byte AS path and the 2-byte one. If they are the same length, just use the new path instead of trying to merge.
<li>On TCP input when a partial ACK is received, check if congestion window is larger than acked bytes and update the window accordingly.
<li>Make Logitech Quickcam Notebook attach to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ugen&sektion=4&format=html">ugen(4)</a> and not <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uaudio&sektion=4&format=html">uaudio(4)</a>.
<li>Enable <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uts&sektion=4&format=html">uts(4)</a> - USB touchscreen support on amd64 and i386 GENERIC kernels.
<li>Add support for bluetooth adapter found on MSI S270 laptops in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ubt&sektion=4&format=html">ubt(4)</a> driver.
<!-- 2007/05/21 -->
<li>Add support for hppa 8700/pcvw2 CPUs.
<li>Ask hppa firmware for reset before trying ourselves, needed for four-digit b/c/j hppa models.
<li>Improved i386 and amd64 PCI interrupt code to handle several levels of PCI-PCI bridges, fixes mapping for devices that sit behind two such bridges and the firmware only provides mapping for the first.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=msk&sektion=4&format=html">msk(4)</a> to hppa GENERIC and RAMDISK kernels.
<li>Initial driver for the hppa <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=astro&sektion=4&arch=hppa&format=html">astro(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=elroy&sektion=4&arch=hppa&format=html">elroy(4)</a> chips.
<li>Add FFS2 support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ncheck_ffs&sektion=8&format=html">ncheck_ffs(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=clri&sektion=8&format=html">clri(8)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bridge&sektion=4&format=html">bridge(4)</a> mark packets with M_PROTO1 if <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gif&sektion=4&format=html">gif(4)</a> needs to use etherip encapsulation. Unbreaks remote ipsec bridges.
<!-- 2007/05/20 -->
<li>Handle extra open events in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sppp&sektion=4&format=html">sppp(4)</a> due to timeouts/retransmissions.
<li>Add -f option to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl&sektion=8&format=html">wsconsctl(8)</a>, to specify alternative control devices.
<li>Added <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xtsscale&sektion=1&format=html">xtsscale(1)</a>, used to calibrate <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uts&sektion=4&format=html">uts(4)</a> touchscreens.
<!-- 2007/05/19 -->
<li>Add support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=zmore&sektion=1&format=html">zmore(1)</a> to be called as <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=zless&sektion=1&format=html">zless(1)</a> too.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=em&sektion=4&format=html">em(4)</a> to hppa RAMDISK kernels.
<li>Kernel option added for PCIAGP on amd64 which lets i945 chipsets work, but disabled for now.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=aps&sektion=4&format=html">aps(4)</a> to amd64 GENERIC kernels.
<li>Add a GENERIC.MP configuration for mvme88k, not usable yet.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xl&sektion=4&format=html">xl(4)</a> to hppa GENERIC and RAMDISK kernels.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xl&sektion=4&format=html">xl(4)</a> have a brief pause after reset for PIO too.
<li>Add support for kernel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crash&sektion=8&format=html">crash(8)</a> dumps for arm-based platforms, with minimal support in libkvm.
<!-- 2007/05/18 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&sektion=8&format=html">newfs(8)</a>, do a bounds check to see if the inode table fits on the disk, prevents core dumps on really small filesystems.
<li>Lots of work on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=package&sektion=5&format=html">package(5)</a> tools, mostly internally visible.
<!-- 2007/05/17 -->
<li>Fall back to gethostname() on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1&format=html">ssh(1)</a> when outgoing connection is not on a socket, as in the case when ProxyCommand is used.
<li>Limit buffer cache memory to 30% on hppa machines.
<!-- 2007/05/16 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp-server&sektion=8&format=html">sftp-server(8)</a> stop reading and processing commands when buffers get nearly full so it doesn't get into a fatal() error later.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=install&sektion=1&format=html">install(1)</a>, allow stripping of files even if the destination filename starts with a dash.
<!-- 2007/05/15 -->
<li>Removed unused <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=catman&sektion=8&format=html">catman(8)</a>.
<li>Update the ifp of bridge cache entries if the entry is not static. This makes <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4&format=html">carp(4)</a> fail-over work over <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bridge&sektion=4&format=html">bridge(4)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&sektion=1&format=html">systrace(1)</a>, do not assume 4-byte alignment of memory when intercepting a string.
<li>Fix in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8&format=html">bgpd(8)</a> printconf for peers with the 'down' flag set.
<li>Wait for the correct fd for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&sektion=8&format=html">dhcpd(8)</a>.
<!-- 2007/05/14 -->
<li>Improve dmesg output from setroot() so "rootdev=0x400 rrootdev=0xd00 rawdev=0xd02" becomes "root on sd0a swap on sd0b dump on sd0b".
<li>Initial code for a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sli&sektion=4&format=html">sli(4)</a> driver for Emulex Fibre Channel controllers.
<li>Fix for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=msk&sektion=4&format=html">msk(4)</a> on MP systems, could cause reboots on heavily used machines.
<li>More <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=package&sektion=5&format=html">package(5)</a> improvements.
<!-- 2007/05/13 -->
<!-- 2007/05/12 -->
<li>Enable PowerNow on amd64 processors running MP kernels.
<li>Prevent core dumps in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tip&sektion=1&format=html">tip(1)</a> if strpbrk() returns NULL.
<li>Fix for Yukon-2 based <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=msk&sektion=4&format=html">msk(4)</a> cards, by taking alignment restrictions into account when setting up RAM buffer addresses. Makes FE chips work reliably.
<li>Various internal improvements on the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=package&sektion=5&format=html">package(5)</a> tools.
<li>Disable xenocara OpenGL on vax and sgi platforms, and Xprt on vax and landisk. Makes xenocara build on vax now.
<!-- 2007/05/11 -->
<li>Fix in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck_ffs&sektion=8&format=html">fsck_ffs(8)</a> for the fifth pass, make sure we do not end up with a partially initialized info struct.
<!-- 2007/05/10 -->
<li>Make sure <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=reboot&sektion=8&format=html">reboot(8)</a> doesn't try to power off some machines.
<li>Fix in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&sektion=4&format=html">pciide(4)</a> when receiving unexpected interrupts. Fixes cdrom hangs on sparc64.
<!-- 2007/05/09 -->
<li>Fix potential NULL dereference in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hoststated&sektion=8&format=html">hoststated(8)</a>.
<!-- 2007/05/08 -->
<li>Make IPv6 kill all packets with the RT Header type 0 extension or multiple routing headers.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4&format=html">pf(4)</a> drop all routing header packets too, unless the matching rule explicitly specifies 'allow-opts'.
<li>Make each pointer/mouse device under <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&sektion=4&format=html">wscons(4)</a> have its own calibration values.
<li>Rework <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ami&sektion=4&format=html">ami(4)</a> timeouts to handle the fact that they have no mechanism to take commands off them once submitted.
<li>Disable loadable font modules for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=Xorg&sektion=1&format=html">Xorg(1)</a> on static-only arches.
<!-- 2007/05/07 -->
<li>Fix for mips64 when receiving hardware interrupts while CPU is in usermode.
<li>Add POSIX compliant -g option to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ls&sektion=1&format=html">ls(1)</a>.
<li>Bump <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8&format=html">isakmpd(8)</a> crypto buffer logging to level 70 from 30.
<li>Make sure all Phase 1 negotiation failures are logged in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8&format=html">isakmpd(8)</a>.
<li>Lots of internal work on the various pkg_* utilities.
<!-- 2007/05/06 -->
<li>Plug realloc memory leaks in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cap_mkdb&sektion=1&format=html">cap_mkdb(1)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8&format=html">tcpdump(8)</a> not fail on non-RH0 routing headers.
<li>Fix SEGV in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8&format=html">tcpdump(8)</a> when parsing IPv6 packets with unknown or corrupted header options.
<!-- 2007/05/05 -->
<li>Add multiprocessor aware setperf mechanism to amd64.
<li>Add support for FFS2 in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dumpfs&sektion=8&format=html">dumpfs(8)</a>, and add -m flag to output <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&sektion=8&format=html">newfs(8)</a>-style commands to make a filesystem with the same settings.
<li>Provide hook in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&sektion=1&format=html">ld.so(1)</a> so rthreads can spinlock to protect from races.
<!-- 2007/05/04 -->
<li>Increase number of TX and RX descriptors in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tht&sektion=4&format=html">tht(4)</a> from 64 to 128 and make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tht&sektion=4&format=html">tht(4)</a> use TX checksumming in hardware.
<li>Removed unused strcpy and strcat calls from kernel.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4&format=html">carp(4)</a> routing table modification attempts exhibit routing messages to not confuse userland routing daemons.
<!-- 2007/05/03 -->
<li>Stop shipping CKSUM files for releases.
<li>Move the setroot() for all arches to a clean machine-independent version.
<li>Fixes for the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vic&sektion=4&format=html">vic(4)</a> device.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8&format=html">config(8)</a> file for macppc MP kernels. Not working yet.
<li>Fix a panic on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tun&sektion=4&format=html">tun(4)</a> on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=trunk&sektion=4&format=html">trunk(4)</a> if ioctl() is called with uninitialized ifreq.
<li>Enable support for more than 512M of RAM on mips64-based machines.
<li>Reduce the IPv6 header nest limit from 50 to 10.
<li>Enable fast channel switching for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malo&sektion=4&format=html">malo(4)</a> devices, makes apps like kismet happy.
<li>Fix in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=azalia&sektion=4&format=html">azalia(4)</a> for a bug that prevented full device names from being printed.
<li>Fix in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bge&sektion=4&format=html">bge(4)</a> for BCM5754/5787-based devices.
<!-- 2007/05/02 -->
<li>Support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtrr&arch=i386&sektion=4&format=html">mtrr(4)</a> on AMD Opteron CPUs.
<li>Add event handler to the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=azalia&sektion=4&format=html">azalia(4)</a> code to mute/unmute based on headphone presence. Also some fixes while there.
<li>Add FFS2 support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tunefs&sektion=8&format=html">tunefs(8)</a>.
<li><font color="#e00000"><strong>STABILITY FIX: Fix a divide-by-zero in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=Xorg&sektion=1&format=html">Xorg(1)</a> which can be triggered by a malicious client.</strong></font><br>
<a href="errata41.html#008_xorg">A source code patch is available</a>.<br>
<a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<!-- 2007/05/01 -->
<li>Do not rely on interrupts being configured by the PROM on Sparc64 machines, makes Simics boot a bit further, and doesn't harm real machines.
<li>Expose the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nx&sektion=4&format=html">nx(4)</a> temperature sensor into the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8&format=html">sysctl(8)</a> hw.sensors framework.
<li>Fix for link state announcements in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vge&sektion=4&format=html">vge(4)</a>.
<!-- 2007/04/30 -->
<li>If resolving a name fail for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8&format=html">ntpd(8)</a>, be more aggressive retrying, but with care.
<li><font color="#e00000"><strong>RELIABILITY FIX: Link state not correctly tracked in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&sektion=8&format=html">ospfd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ripd&sektion=8&format=html">ripd(8)</a>.</strong></font><br>
<a href="errata41.html#007_kroute">A source code patch is available</a>.<br>
<a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Enable FFS2 support in the GENERIC kernels.
<li>Add support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=df&sektion=1&format=html">df(1)</a> for reading ffs2 data directly from the device.
<li>Lots of updates in the various pkg_* tools.
<!-- 2007/04/29 -->
<li>Fix in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&sektion=4&format=html">softraid(4)</a> code for older compilers.
<li>Initial version of led_blink <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8&format=html">sysctl(8)</a> for the landisk platform.
<!-- 2007/04/28 -->
<li>Make amd64 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&arch=i386&&sektion=8&format=html">boot(8)</a> process skip reading <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&arch=i386&sektion=5&format=html">boot.conf(5)</a> if the Control key is pressed during boot.
<li>Add support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nx&sektion=4&format=html">nx(4)</a> for accessing the flash memory in the ROMUSB register area and read the board information on startup.
<li>Support for CPU throttling on MP systems in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apmd&arch=i386&sektion=8&format=html">apmd(8)</a>.
<!-- 2007/04/27 -->
<li><font color="#e00000"><strong>RELIABILITY FIX: Bugs in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8&format=html">spamd(8)</a> could corrupt the database.</strong></font><br>
<a href="errata41.html#003_spamd">A source code patch is available</a>.<br>
<a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li><font color="#e00000"><strong>STABILITY FIX: Incorrect spl level can lead to panics under heavy kqueue usage.</strong></font><br>
<a href="errata41.html#002_splnet">A source code patch is available</a>.<br>
<a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li><font color="#e00000"><strong>SECURITY FIX: Make sure IPv6 icmp code check return value from MGETHDR and fail if its NULL.</strong></font><br>
<a href="errata41.html#001_mbuf">A source code patch is available</a>.<br>
<a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<li>Import cwm-3 to the xenocara source tree and remove wm2 from it.
<li>Fixes in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pthreads&sektion=3&format=html">pthreads(3)</a> code for sizing the fd/fdp tables to help applications who increase nofiles using setrlimit().
<li>Check for Control Key being pressed on i386 boot, and if so, skip reading the boot.conf.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ripd&sektion=8&format=html">ripd(8)</a> inject a route for 224.0.0.9 on startup and remove it on exit, since it needs that route in order to work.
<!-- 2007/04/26 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8&format=html">disklabel(8)</a> always use the BIOS geometry if there is one provided.
<li><font color="#e00000"><strong>RELIABILITY FIX: On PPC based systems, handle AltiVec assist exceptions better, fixes a panic under certain situations.</strong></font><br>
<a href="errata41.html#006_altivec">A source code patch is available</a>.<br>
<a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<!-- 2007/04/25 -->
<li>Add a setperf mechanism for ICH speedstep on some Pentium 3/ICH systems.
<li>Enable <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tht&sektion=4&format=html">tht(4)</a> on amd64 and i386 GENERIC kernels.
<li>Add capacity to add one ntp server during install.
<li>Fix for alpha platform in the clock setting routines.
<!-- 2007/04/24 -->
<li>Fix endless loop code in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tht&sektion=4&format=html">tht(4)</a>.
<li>Also apply PowerNow setperf fix to amd64.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&sektion=8&format=html">init(8)</a> power down the machine on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=power&sektion=4&arch=sparc64&format=html">power(4)</a> button press instead of just halting it.
<li>Prevent NFS send failures from logging, since they aren't helpful anyway.
<li>Make the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=power&sektion=4&arch=sparc64&format=html">power(4)</a> on sparc64 map registers in I/O space if memory space fails.
<li>Fix for i386 SpeedStep/PowerNow state selection code, use number of states rather than the frequencies of the available states to distribute in the hw.setperf 0-100 range.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount&sektion=8&format=html">mount(8)</a> also mount FFS2 filesystems when given the -a flag.
<li>Add support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systat&sektion=1&format=html">systat(1)</a> for non-integral refresh intervals, possibly as low as 0.1s.
<!-- 2007/04/23 -->
<li>Fixes for command line parsing in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=join&sektion=1&format=html">join(1)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8&format=html">bgpd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpctl&sektion=8&format=html">bgpctl(8)</a> 4-byte AS compatible.
<li>Switch alpha to new timecounters.
<!-- 2007/04/22 -->
<li>Add driver for macppc "System identifier" driver.
<li>Rename the macppc LED driver to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xlights&sektion=4&arch=macppc&format=html">xlights(4)</a>.
<li>Fix memory leaks in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8&format=html">isakmpd(8)</a>.
<!-- 2007/04/21 -->
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4&format=html">ahci(4)</a> to sparc64 GENERIC kernels.
<li>Fix for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4&format=html">ahci(4)</a> on sparc64, prevents free panics.
<li>Introduce an SMP aware hw.setperf mechanism.
<li><font color="#e00000"><strong>SECURITY FIX: IPv6 type 0 route headers can be used to mount a DoS attack against hosts and networks.</strong></font><br>
<a href="errata41.html#005_route6">A source code patch is available</a>.<br>
<a href="stable.html"><font color="#00b000">[Applied to stable]</font></a></li>
<li>Add driver for the macppc Xserve LEDs.
<!-- 2007/04/20 -->
<li>Increase the firmware upload delay for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malo&sektion=4&format=html">malo(4)</a>, since 100ms is not enough for some X40s.
<!-- 2007/04/19 -->
<li>Fix for the PHY selection code in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gem&sektion=4&format=html">gem(4)</a>, gets rid of cuplicate PHY on SPARC64 Blade1000 machines.
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dumpfs&sektion=8&format=html">dumpfs(8)</a> about the "updated" flag.
<li>Make the vfs_cache not be O(n^2) in certain cases.
<!-- 2007/04/18 -->
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&sektion=1&format=html">less(1)</a> to version 382.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sili&sektion=4&format=html">sili(4)</a> to alpha GENERIC kernels.
<li>Endian fix for the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tht&sektion=4&format=html">tht(4)</a> firmware.
<li>Added microcode to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tht&sektion=4&format=html">tht(4)</a>, since Tehuti allows redistribution of it under a 4 clause BSD license.
<li>Plug memory leak in the xserver on client disconnect.
<li>Make sure <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck_ffs&sektion=8&format=html">fsck_ffs(8)</a> does not look for FFS1 alternate superblocks when checking a FFS2 file system.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nm&sektion=1&format=html">nm(1)</a>, fix a NULL dereference if the ELF symbol table size is zero.
<li>Make Alpha machines fill in the hw.serialno <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8&format=html">sysctl(8)</a> if possible.
<li>Fix for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&sektion=8&format=html">newfs(8)</a> when used with "-c".
<li>Fix a double free in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gif&sektion=4&format=html">gif(4)</a> mtag check loop.
<!-- 2007/04/17 -->
<li>Add support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ppp&sektion=8&format=html">ppp(8)</a> for setting the address of the ppp peer.
<li>Fix for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=acpi&sektion=4&format=html">acpi(4)</a> docking code.
<li>Add support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&sektion=1&format=html">ftp(1)</a> for proxies which require passwords.
<li>Fix in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&sektion=8&format=html">newfs(8)</a> for FFS2 case.
<!-- 2007/04/16 -->
<li>Fix debug info in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=acpi&sektion=4&format=html">acpi(4)</a> code when docking/undocking.
<li>Fix for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wdc&sektion=4&format=html">wdc(4)</a> drive detection, now detects certain microdrives plugged into Soekris boxes.
<li>Initial import of a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nx&sektion=4&format=html">nx(4)</a> driver for NetXen Inc multiport 10Gb and Gigabit ethernet cards.
<li>Fix macppc OpenFirmware code to allow booting and having root on a USB device.
<li>Initial import of the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tht&sektion=4&format=html">tht(4)</a> device, a driver for the Tehuti networks 10Gb ethernet cards.
<!-- 2007/04/15 -->
<li>Fix in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8&format=html">isakmpd(8)</a> for vpn peers that start rekeying on port 4500 when NAT-T is used.
<li>Fix for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cas&sektion=4&format=html">cas(4)</a> on platforms where page size isn't 8k.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systat&sektion=1&format=html">systat(1)</a> exit on "q" like <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=top&sektion=1&format=html">top(1)</a> does.
<!-- 2007/04/14 -->
<li>For <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sd&sektion=4&format=html">sd(4)</a> devices that are unable to report geometry, change the fake geometry used to allow for even larger devices.
<li>Introduce <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_vnd&sektion=8&format=html">mount_vnd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck_vnd&sektion=8&format=html">fsck_vnd(8)</a> commands to support <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&sektion=5&format=html">fstab(5)</a> usage of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnd&sektion=4&format=html">vnd(4)</a> images.
<!-- 2007/04/13 -->
<li>Add support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&sektion=8&format=html">newfs(8)</a> for creating FFS2 file systems. Make install media create FFS1 by default.
<li>New timecounter code for macppc.
<li>Fix panic in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ath&sektion=4&format=html">ath(4)</a> when attaching to some IBM/Lenovo T42/T60s.
<li>Allow more than one -t to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5&sektion=1&format=html">md5(1)</a> in order to accomodate faster CPUs.
<!-- 2007/04/12 -->
<li>Improved signal delivery for smp i386 systems.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=date&sektion=1&format=html">date(1)</a> use UTC instead of GMT0 when given "-u".
<li>For <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hoststated&sektion=8&format=html">hoststated(8)</a>, add a new relay "path" action to filter the URL path and arguments.
<!-- 2007/04/11 -->
<li>Enabled <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sili&sektion=4&format=html">sili(4)</a> on sparc64 GENERIC and RAMDISK kernels.
<!-- 2007/04/10 -->
<li>Add support for a fourth axis on wsmouse devices. Currently limited to USB mice.
<li>New <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bbc&sektion=4&format=html">bbc(4)</a> driver for the sparc64 BootBus Controller.
<li>New <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pmc&sektion=4&format=html">pmc(4)</a> driver for the NatSemi PC87317 SuperIO chip.
<li>Add support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsdb&sektion=8&format=html">fsdb(8)</a> for FFS2 also.
<li>Add support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&sektion=8&format=html">fsck(8)</a> to check FFS2 file systems.
<li>Another fix for msdos file system code, this time when renaming into existing destination.
<li>Prevent infinite loop mapping interrupts on sparc64 Openfirware code when "reg" property is missing.
<li>Next step in making <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&sektion=8&format=html">ospfd(8)</a> equal cost multipath aware, by making SPF calculation multipath aware.
<li>Fix a vnode leak in the FFS code.
<!-- 2007/04/09 -->
<li>Fix out-of-bounds memory access in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&sektion=8&format=html">dump(8)</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sili&sektion=4&format=html">sili(4)</a> enabled on amd64 and i386 GENERIC/RAMDISK kernels.
<!-- 2007/04/08 -->
<li>Enable <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ral&sektion=4&format=html">ral(4)</a> on sparc64 GENERIC kernels.
<li>Add support for NCQ error recovery and NCQ command submission in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sili&sektion=4&format=html">sili(4)</a> driver.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=file&sektion=1&format=html">file(1)</a> recognize mp3 files with an ID3v2 tag.
<!-- 2007/04/07 -->
<li>Bring back i945GM support for xenocara.
<li>Fixes in the pthreads code for file descriptors getting blocked when using fork(), causing deadlocks in the parent process.
<!-- 2007/04/06 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpctl&sektion=8&format=html">bgpctl(8)</a>, implement "show neighbor &lt;peer&gt; terse" to print all statistics in an easily parsable form.
<li>Add a pidfile argument to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflogd&sektion=8&format=html">pflogd(8)</a> so individual instances can be rotated via newsyslog.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cp&sektion=1&format=html">cp(1)</a> try to create sparse files when copying blocks of zeroes.
<!-- 2007/04/05 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bcw&sektion=4&format=html">bcw(4)</a> driver under development removed.
<li>Lots of work on the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sili&sektion=4&format=html">sili(4)</a> driver.
<!-- 2007/04/04 -->
<li>Import the older i810 videodriver into xenocara from the X.org version shipped with 3.9/4.0.
<li>Update Sendmail to 8.14.1.
<li><font color="#e00000"><strong>SECURITY FIX: Multiple security fixes for X.org applied.</strong></font><br>
<a href="errata41.html#004_xorg">A source code patch is available</a>.<br>
<a href="stable.html"><font color="#00b000">[Applied to stable]</font></a></li>
<!-- 2007/04/03 -->
<li>For <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bge&sektion=4&format=html">bge(4)</a> on sparc64, prefer the local-mac-address provided by the PROM.
<li>Improved heuristic for detecting SMP on old-world macppc machines.
<li>Add Sun Fire V215/250 to the list of supported sparc64 machines.
<!-- 2007/04/02 -->
<li>Implemented a DK INFO ioctl so userland may query scsi disks for product, vendor etc.
<li>Fix for error handling when creating directories with long names in msdos filesystems.
<li>Do not make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkfs&sektion=8&format=html">mkfs(8)</a> reserve space for bad sector replacement, since modern disks to it themselves.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftpd&sektion=8&format=html">tftpd(8)</a> be more forgiving about tftp requests coming from 255.255.255.255.
<!-- 2007/04/01 -->
<!-- 2007/03/31 -->
<!-- 2007/03/30 -->
<li>Initial import of a driver for the sparc64 Host/PCIe bridge found on the Sun Fire v215/245/445 machines.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&sektion=8&format=html">syslogd(8)</a> retain the memory buffers on a SIGHUP if the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslog.conf&sektion=5&format=html">syslog.conf(5)</a> remains unchanged.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&sektion=4&format=html">ccd(4)</a> accept an interleave of 0.
<li>Make an exception for the VT8521 SATA so <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4&format=html">ahci(4)</a> wont attach to it, will revert to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&sektion=4&format=html">pciide(4)</a> until it is fixed.
<!-- 2007/03/29 -->
<li>Enable <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=acx&sektion=4&format=html">acx(4)</a> on macppc GENERIC kernels now that it works on big endian boxes.
<li>Rework the prefixlen parsing in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd.conf&sektion=5&format=html">bgpd.conf(5)</a> so filtering IPv6 prefixes finally works.
<li>Fix bug in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=acx&sektion=4&format=html">acx(4)</a> HW DMA setup, makes TX work on big endian machines.
<!-- 2007/03/28 -->
<li>Add support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpctl&sektion=8&format=html">bgpctl(8)</a> for "show rib community &lt;community&gt;".
<!-- 2007/03/27 -->
<li>For <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4&format=html">carp(4)</a>, do not pick up IPv6 link local IPs on address deletions.
<li>Add base64 support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cksum&sektion=1&format=html">cksum(1)</a> and friends.
<li>Add Sierra Wireless Aircard 580 to the list of supported <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=umsm&sektion=4&format=html">umsm(4)</a> devices.
<li>Fixes in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8&format=html">tcpdump(8)</a> for bus errors on sparc64 when dumping 802_11_RADIO packets.
<li>First step of making <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&sektion=8&format=html">ospfd(8)</a> equal cost multipath aware.
<!-- 2007/03/26 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4&format=html">ahci(4)</a> attach devices based on PCI class and interface fields, not just on a list of pci devices. This will cause disks to change from wd* to sd*.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8&format=html">ftpd(8)</a>, do not log when the slave gets killed because read() returns 0.
<li>Implement support for the NOOP smtp command in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8&format=html">spamd(8)</a>, and change the behaviour or the maxblack parameter.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&sektion=1&format=html">sendbug(1)</a> accept $VISUAL in addition to $EDITOR.
<!-- 2007/03/25 -->
<li>Added <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4&format=html">ahci(4)</a> support to i386 RAMDISK kernels.
<li>Synchronised <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4&format=html">carp(4)</a> advertisements on group demotion to reduce group failover to a few milliseconds.
<li>Add support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdrop&sektion=8&format=html">tcpdrop(8)</a> for the 2-address format fstat outputs, also enhance IPv6 support by unpacking [addr]:port format.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&sektion=8&format=html">ospfd(8)</a> re-originate the router LSA if the interface metric changes so the change can propagate instantly.
<!-- 2007/03/24 -->
<li>Yet another buffer fix for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&sektion=1&format=html">ftp(1)</a>.
<!-- 2007/03/23 -->
<li>On amd64, allow compilation of kernels with MULTIPROCESSOR defined but with DDB undefined.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8&format=html">ntpd(8)</a>, improve sensor polling interval to 30 seconds, just like ntp polls.
<li>Add new flag to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstat&sektion=1&format=html">netstat(1)</a> to restrict route display in conjunction with -r to routes in the same address family.
<!-- 2007/03/22 -->
<li>Replaced the shellscript <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&sektion=1&format=html">sendbug(1)</a> with a rewritten version.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8&format=html">httpd(8)</a> not output the version numbers to silence confused auditing programs.
<li>Fix wrong length check in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&sektion=1&format=html">ftp(1)</a>, previous version could ignore the "/" character.
<!-- 2007/03/21 -->
<li>Fix buffer overflow in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&sektion=1&format=html">ftp(1)</a> when parsing the .netrc file.
<li>Initial import of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sili&sektion=4&format=html">sili(4)</a>, a SATA chipset from Silicon Image.
<li>Add HUAWEI Mobile Connect E620 to the list of supported <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ubsa&sektion=4&format=html">ubsa(4)</a> devices.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dvmrpd&sektion=8&format=html">dvmrpd(8)</a>, add code to parse unicast routes learned from route report packets.
<li>Add support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_cd9660&sektion=8&format=html">mount_cd9660(8)</a> for mounting arbitrary sessions.
<li>Enable NCQ on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4&format=html">ahci(4)</a> based SATA controllers.
<li>Make libevent use arc4random() when generating the random IDs.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4&format=html">ahci(4)</a> enabled for i386 also.
<li>Add support for RFC3137 in ospfd to allow Stub Router Advertisements.
<!-- 2007/03/20 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8&format=html">pfctl(8)</a> enable basic ruleset optimization by default.
<li>Enable <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4&format=html">ahci(4)</a> on amd64 kernels, only attaches to jmicron controllers so far.
<li>Lots of work on the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4&format=html">ahci(4)</a> driver to get native support for some sata controllers instead of going over <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&sektion=4&format=html">pciide(4)</a>.
<li>Add support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hoststated&sektion=8&format=html">hoststated(8)</a> to specify a number of attempts to retry forwarded services.
<li>Add support for playing simple RIFF file (.wav) to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=aucat&sektion=1&format=html">aucat(1)</a>.
<li>Add delay to com_console so the fifo has time to flush itself before resetting, to avoid garbled dmesg output seen on some arm machines.
<li>Add line-buffering flag (-u) to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sed&sektion=1&format=html">sed(1)</a>.
<!-- 2007/03/19 -->
<li>Remove force-PIO workaround for landisk using the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&sektion=4&format=html">pciide(4)</a> driver.
<li>Make the SH-based landisk platform default to writeback cache in the CPU.
<li>Deactivate the pmap in cpu_exit, avoids quite a lot of TLB shootdowns in the reaper.
<li>Update libevent to 1.3b, keeping local changes.
<li>Luna88k LCD device is now controllable with the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lcd&sektion=4&format=html">lcd(4)</a>.
<li>Add FFS2 fields to the superblock, change fs tools to keep accessing the FFS1 fields.
<li>Make sure the privilege separated daemons do not signal "connection closed" upstream when receiving EINTR or EAGAIN.
<li>Move i386 to new timecounter code.
<li>Improvement in the way <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nmea&sektion=4&format=html">nmea(4)</a> takes the timestamp from the timedelta sensor when no PPS signal is available.
<!-- 2007/03/18 -->
<li>Initial import of a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&sektion=4&format=html">softraid(4)</a> device, providing a framework for I/O manipulation. Disabled for now.
<li>Add IP (v4 and v6) load balancing to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&sektion=4&format=html">carp(4)</a>, similar to the ARP balancing.
<li>Add Sierra Wireless Aircard 875 to the list of known-to-work <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=umsm&sektion=4&format=html">umsm(4)</a> devices.
<li>Enable <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pxammc&sektion=4&format=html">pxammc(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sdmmc&sektion=4&format=html">sdmmc(4)</a> on Zaurus RAMDISK kernels too.
<li>Initial support for PXA27x SD/SDIO/MMC controller on the Zaurus platform.
<li>Fix in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=locate&sektion=1&format=html">locate(1)</a> for filenames containing spaces.
<li>Add OX16PC945K to the list of supported <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=puc&sektion=4&format=html">puc(4)</a> devices.
<li>Fixes in the signal handling code when waking up. This fixes the majority of the rthreads lockings and hangups.
<!-- 2007/03/17 -->
<li>Start USB1 initialization later, so all USB2 controllers have completed before starting USB1 legacy emulation.
<li>Better delay handling for USB startup code, speeds up booting if you have lots of host controllers.
<li>Fixes for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hoststated&sektion=8&format=html">hoststated(8)</a> communication sockets, now shows relay statistics of all preforked processes.
<!-- 2007/03/16 -->
<li>Enabled <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wpi&sektion=4&format=html">wpi(4)</a> on amd64 GENERIC kernels.
<li>Make the upgrade script default to not <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&sektion=8&format=html">fsck(8)</a> non-root filesystems.
<li>Added <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uts&sektion=4&format=html">uts(4)</a>, a driver for USB touchscreens.
<li>Add support in the alpha platform for a couple of new Alpha models, AlphaServer 1200 and 4100.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8&format=html">tcpdump(8)</a>, make sure we recognise more vendor payloads in the IKE decoder.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8&format=html">bgpd(8)</a> multiprotocol extension code to RFC 4760.
<li>Make sure the distributed prefix has a metric != 0 in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&sektion=8&format=html">ospfd(8)</a>.
<li>New timecounter code for the sparc64 platform.
<!-- 2007/03/15 -->
<li>Add PCI id for Intels PCIe quad port fiber adapter to the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=em&sektion=4&format=html">em(4)</a> driver.
<li>Fix for UltraSPARC-IV CPU detection in OpenFirmware to prevent crashes.
<li>Make sure the OpenFirmware node can be found on UltraSPARC-IV CPUs.
<li>Fix in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcs&sektion=1&format=html">rcs(1)</a> where multiple input files for ci would have flags from previous files affect the later ones.
<li>Fix for pthread include file.
<!-- 2007/03/14 -->
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nmeaattach&sektion=8&format=html">nmeaattach(8)</a> to start a sensor in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8&format=html">rc(8)</a> scripts before starting <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&sektion=8&format=html">ntpd(8)</a> to give it time to cold start.
<li>Do not delete greylisted entries in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8&format=html">spamd(8)</a> database when whitelisting, they expire anyway and there could be a race when using -M and a retry comes in.
<li>Fixes for ext2fs code.
<!-- 2007/03/13 -->
<li>Fix for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=acx&sektion=4&format=html">acx(4)</a> devices running in HostAP mode, solves problem of getting DHCP leases from the AP when the network is quiet.
<li>Fix in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sort&sektion=1&format=html">sort(1)</a> for very large input files.
<li>Allow IP_TTL and IP_MINTTL to be specified in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hoststated.conf&sektion=5&format=html">hoststated.conf(5)</a> to support GTSM according to RFC 3682.
<li>Add quirk for Sony DSC-T10 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=umass&sektion=4&format=html">umass(4)</a> devices.
<!-- 2007/03/12 -->
<li>Fix for hanging or extremely slow "bgpctl show rib" commands in some cases.
<!-- 2007/03/11 -->
<li>Fixes for "hal" on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ath&sektion=4&format=html">ath(4)</a> 5210, 5211 and 5212 based devices on big endian systems.
</ul>
<p>

This list mentions mostly platform-independent changes.  For a list of changes
made in a particular platform, please check the page for that platform.  If you
find them not listed there, the changes are either (1) not being documented or
(2) are documented here.<br><br>

<hr>
<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="back.gif" border=0 alt="OpenBSD"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus.html,v 1.1058 2007/06/05 12:31:28 jj Exp $</small>

</body>
</html>
