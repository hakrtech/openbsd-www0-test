<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD-current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD-current changes">
<meta name="keywords" content="openbsd,current,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2004 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">Changes made between OpenBSD 3.5 and OpenBSD-current</font></h2>
<hr>

<p>
This is a partial list of the major machine-independent changes
(i.e., these are the changes people ask about most often).  Port
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
Changes to the <a href="ports.html">ports</a> collection are documented
<a href="portsplus/index.html">here</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>.
<br>
</h3>

<p>
<h3><font color="#0000e0">We are working on OpenBSD-current.</font></h3><p>
The following list sums up (almost) all the changes made up to April 3.
<p>

<ul>
<!-- ^ 20040404 -->
<li>Many manual page fixes.
<li>In a number of programs, don't close files that are known to be not open.
<li>Fix a missing initialisation in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a>'s privsep code.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>'s -v logging option do something useful.
<!-- ^ 20040403 -->
<li>Fix line breaks in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>'s log output.
<li>Allow non-GNU ANSI compilers (e.g. TenDRA) to build again by changing 'static inline' to 'static __inline'.
<li>Don't close descriptors we know aren't open in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&amp;sektion=8">syslogd(8)</a>.
<li>Drop arc4random_8() api from the kernel.
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rfork&amp;sektion=2">rfork(2)</a> so the RFMEM flag gives complete vmspace sharing including the stack, in line with other implementations.
<li>Add --line-buffered option to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=grep&amp;sektion=1">grep(1)</a> etc.
<li>Remove some unbounded recursions in the libc regex engine, found with certain expressions containing backreferences.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ls&amp;sektion=1">ls(1)</a>' column alignment when using the -h option.
<li>New <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=axe&amp;sektion=4">axe(4)</a> USB Ethernet driver.
<!-- ^ 20040402 -->
<li>Fix an off-by-one in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=procmap&amp;sektion=1">procmap(1)</a>.
<li>Better bounds checking in the ramdisk's strategy() routine.
<li>Limit the trust between local and remote instances of the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcp&amp;sektion=1">rcp(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scp&amp;sektion=1">scp(1)</a> programs.
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstat&amp;sektion=1">netstat(1)</a>'s -p option so that, when used without -s, it shows a list of sockets for the given protocol.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcmdsh&amp;sektion=3">rcmdsh(3)</a> work on hosts without an IPv4 address.
<li>Initialise the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kqueue&amp;sektion=2">kqueue(2)</a> subsystem in kernel main() instead of on first use.
<!-- ^ 20040401 -->
<li>Add IPv6 support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=openssl&amp;sektion=1">openssl(1)</a>'s s_client command, complete with the usual '-4' and '-6' switches.
<li>Reorder checks in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> so that the IP options check isn't skipped just because UseDNS=no.
<li>Make /usr/src/Makefile's cross-tools target work again.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&amp;sektion=8">inetd(8)</a> properly use the exec'd program's basename as argv[0] if no arguments are specified.
<li>Fix includes search order in GNU <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld&amp;sektion=1">ld(1)</a> to help cross-ld builds.
<li>Don't byte-swap a variable we'll need later in its original order in GNU <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld&amp;sektion=1">ld(1)</a>.
<li>On an msdos filesystem with long filenames support enabled, fix some false-positive name matches when an integer multiple of 13 characters match. From NetBSD.
<li>Some portability fixups in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>.
<li>tcpmd5 changes for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&amp;sektion=8">bgpd(8)</a>:
<ul>
  <li>Allow either the source or destination to be a wildcard in SA lookups (netinet/ip_ipsp.c:gettdbbysrcdst()).
  <li>Add support for the wildcard to pfkeyv2.
  <li>Use the new pfkeyv2 wildcard support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&amp;sektion=8">bgpd(8)</a> and remove the local address requirement for md5sig.
</ul>
<!-- ^ 20040331 -->
<li>Unbreak libc's regex engine compilation with -DREDEBUG.
<li>Change /etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8">rc(8)</a> so that a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> banner (configured via $spamd_flags) may contain spaces (PR#3720).
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pax&amp;sektion=1">pax(1)</a> how to expand GNU tar long links. From NetBSD.
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&amp;sektion=1">systrace(1)</a>'s handling of filename-too-long errors so it just fails the syscall instead of stopping the process. Fixes PR#3140.
<li>Some ELF name translation fixes in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nm&amp;sektion=1">nm(1)</a>.
<li>Add /etc/rc.conf.local to /etc/mtree/special.
<li>Lots more activity on the SMP branch.
<li>Wrap <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a> installation operations in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=perl&amp;sektion=1">perl(1)</a> eval{} blocks so it's possible to at least register what did work.
<li>Unknown entry types in a packing list now result in an error.
<!-- ^ 20040330 -->
</ul>
<p>

This list mentions mostly platform-independent changes.  For a list of changes
made in a particular platform, please check the page for that platform.  If you
find them not listed there, the changes are either (1) not being documented or
(2) are documented here.<br><br>

<hr>
<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="back.gif" border=0 alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus.html,v 1.917 2004/04/04 19:12:57 deraadt Exp $</small>

</body>
</html>
