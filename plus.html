<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD-current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD-current changes">
<meta name="keywords" content="openbsd,current,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2002 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color=#e00000>Changes made between OpenBSD 3.2 and OpenBSD-current</font><hr></h2>

<p>
This is a partial list of the major machine-independent changes
(i.e., these are the changes people ask about most often).  Port
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
Changes to the <a href="ports.html">ports</a> collection are documented
<a href="portsplus/index.html">here</a>.

<p>
Note: <font color=#e00000>Problems for which patches exist are marked in red</font>.

<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>.
<br>
</h3>

<p>
<h3><font color=#0000e0>We are working on OpenBSD-current.</font></h3><p>
The following list sums up (almost) all the changes made up to January 17.
<p>

<ul>
<li>Unbreak <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> nat random source port assignment. Now a rule has to actually ask for static-port in order to get it.
<li>Enable the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> 'static-port' keyword.
<li>Extensive <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld&sektion=1">ld(1)</a> changes to better protect ELF executables from tampering (see the <a href="http://www.openbsd.org/cgi-bin/cvsweb/src/gnu/usr.bin/binutils/bfd/elf.c?rev=1.13&content-type=text/x-cvsweb-markup">checkin comment</a> for details.)
<li>Add new output format option '-f' to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ncheck_ffs&sektion=8">ncheck_ffs(8)</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ncheck_ffs&sektion=8">ncheck_ffs(8)</a> no longer reports when the set[ug]id bits are set on directories, since these are meaningless in OpenBSD.
<li>Fix a missing YYERROR in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> parser.
<!-- ^ 20030117 -->
<li>Deal with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cd&sektion=4">cd(4)</a> drives that are picky about being asked to play the leadout track.
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/dev/pci/pcidevs.diff?r1=1.586&r2=1.587&f=h">Note with regret and sadness</a> that the <a href="http://www.yourvote.com/pci/">freely available PCI vendor and device list</a> is no longer available.
<li>Bring <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=protocols&sektion=5">protocols(5)</a> more into line with current reality.
<li>More improvements and device additions to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&sektion=4">pciide(4)</a>.
<!-- ^ 20030116 -->
<li>Explicity use the first path found by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=glob&sektion=3">glob(3)</a> instead of indexing with an uninitialised variable in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp&sektion=1">sftp(1)</a>.
<li>Small fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=whois&sektion=1">whois(1)</a>.
<li>Create PIC archives for a number of X libs, useful for ports that create shared libraries.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nfsstat&sektion=1">nfsstat(1)</a> displaying info for the no-longer-supported <a href="http://docs.freebsd.org/44doc/papers/nqnfs.html">NQNFS</a> protocol.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nfsstat&sektion=1">nfsstat(1)</a>'s filesystem id lookup, and a minor buffer overrun.
<li>Fix some minor bugs in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> radix table creation.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> recognise the '-T load' option like it used to.
<li>Plug a memory leak in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> radix table code when using PFR_FLAG_DUMMY.
<li>For the benefit of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&sektion=8">dhclient(8)</a>, allow outbound pings from the initial <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> rulebase installed by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8">rc(8)</a>.
<!-- ^ 20030115 -->
<li>Pull all the IP address parsing code of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> into one place.
<li>Goodbye libc_r and libnpthread, hello libpthread.
<li>Check for and report read errors in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5&sektion=1">md5(1)</a>.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp&sektion=1">sftp(1)</a> uploading or downloading non-regular files.
<li>/etc/weekly is now built (by default) in /var/tmp rather than /tmp.
<!-- ^ 20030114 -->
<li>Add an extra sanity check in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malloc&sektion=3">malloc(3)</a> to prevent size_t overflows.
<li>Better input checking and error handling in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> radix tables code.
<!-- ^ 20030113 -->
<li>Begin converting <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vmstat&sektion=8">vmstat(8)</a> with the -i option to use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=3">sysctl(3)</a> instead of kvm.
<li>Start work on NVIDIA nForce support.
<!-- ^ 20030112 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> radix tables now understand CIDR-notation IPv4 addresses.
<li>Some command-line fixes and tweaks to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rusers&sektion=1">rusers(1)</a>.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rm&sektion=1">rm(1)</a> with the -P option from overwriting files with multiple links.
<!-- ^ 20030111 -->
<li>Fix handling of addition and subtraction of negated addresses to radix tables in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a> only show the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=socket&sektion=2">socket(2)</a> error for the last address to which one tries to connect.
<li>Don't fill files full of holes with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftruncate&sektion=2">ftruncate(2)</a> after a write error in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcp&sektion=1">rcp(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scp&sektion=1">scp(1)</a>.
<li>Add a progress meter to the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp&sektion=1">sftp(1)</a> client.
<!-- ^ 20030110 -->
<li>Remove <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fetch&sektion=9&release=OpenBSD+3.2">fetch(9)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=store&sektion=9&release=OpenBSD+3.2">store(9)</a> from the kernel, and replace calls to them with their <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=copy&sektion=9">copy(9)</a> descendants.
<li>Various strl* return value checks in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<li>Initial support for queue statistics display for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> (-vsq option.)
<li>'Default-Phase-1-Configuration' -> 'Default-phase-1-configuration', 'Default-Phase-2-Suites' -> 'Default-phase-2-suites' in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a>.
<li>New radix table manipulation syntax for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&sektion=5">pf.conf(5)</a>, and a corresponding new -Tl option for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<li>Add support for active/inactive <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> radix tablesets in the kernel
<!-- ^ 20030109 -->
<li>Enable SET/ACK in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a> when acting as an ike-mode-cfg responder.
<li>Improvements and fixes to batch mode <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp&sektion=1">sftp(1)</a>.
<!-- ^ 20020108 -->
<li>Big <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&sektion=3">strlcpy/strlcat(3)</a> makeover for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&sektion=1">csh(1)</a>.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compress&sektion=1">compress(1)</a> from clobbering an existing output file if the input can't be opened.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&sektion=1">gcc(1)</a> attribute(sentinel) improvements.
<li>Improvements to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=whois&sektion=1">whois(1)</a>: Can specify port with -p; recursive IP lookup; INICHOST (-i) is now netsol.
<!-- ^ <li>In the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&sektion=1">gcc(1)</a> stack protector code, avoid using long integer addition on processors that don't support it. --> <!-- reverted anyway 20030112 - phew -->
<li>Remove old altq packet-classifier code from the kernel now that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> does its job instead.
<!-- ^ 20030107 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>'s string parser can handle strings beginning with an underscore, useful for all those new daemon usernames.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&sektion=8">authpf(8)</a> clean up after failed previous incarnations of itself.
<li>Don't allow s[eh]mmni to be set (via the newish <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8">sysctl(8)</a> interface) greater than 0xffff, to prevent id collisions due to wraparound.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> radix tables now spring into and out of existence on demand.
<li>Fix the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudoers&sektion=5">sudoers(5)</a> parser's handling of EOF not preceded by newline.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp&sektion=1">sftp(1)</a> from always adding u+w permissions to files pulled by get -p.
<li>Values set in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl.conf&sektion=5">sysctl.conf(5)</a> can contain spaces when quoted as for sh.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=shmctl&sektion=2">shmctl(2)</a> can now operate on segments marked for removal.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compress&sektion=1">compress(1)</a>, don't trip the 'may not mix -o, -c or -t' warning by mistake, and don't choke on stdin when compressing.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&sektion=1">mg(1)</a> the +number option, which moves the point to the given line of each file.
<li>Correct a couple of {dup,reply,route}-to problems related to nat pools.
<!-- ^ 20030106 -->
<li>Create a new group, _lkm, and install <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=modstat&sektion=8">modstat(8)</a> setgid to it instead of to kmem.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pstat&sektion=8">pstat(8)</a> now only does <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kvm_openfiles&sektion=3">kvm_openfiles(3)</a> for the -v option, the rest is obtained using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=3">sysctl(3)</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cp&sektion=1">cp(1)</a> sets permissions later, so -R works when copying directories with no write access. 
<li>Fix a null deref in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dlsym&sektion=3">dlsym(3)</a>.
<!-- ^ 20030105 -->
<li>Avoid a rare division-by-zero in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ps&sektion=1">ps(1)</a> that could occur on non-IEEE systems like the vax.
<li>Remove the endianness from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bktr&sektion=4">bktr(4)</a>. Enable on macppc.
<li>Make sure we don't try to free a null pointer in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=whois&sektion=1">whois(1)</a>.
<li>Change 'no-route' implementation from a flag in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> rule address to an address type.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> skip-step calculation honour the 'no-route' keyword.
<li>Remove code in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld&sektion=1">ld(1)</a> to force linking against a specific library version.
<li>Add console support for Polish and Turkish keyboard layouts.
<!-- ^ 20030104 -->
<li>Add the userland support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> radix tables to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&sektion=8">authpf(8)</a>.
<li>Remove reference to the now obsolete <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=screenblank&sektion=0&manpath=OpenBSD+3.2&arch=sparc">screenblank</a> from /etc/rc.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dig&sektion=1">dig(1)</a> time display on 64-bit big-endian targets.
<li>Do a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bridge&sektion=4">bridge(4)</a> routing update if the source interface is in the LEARNING state, not the destination interface.
<!-- ^ 20030103 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&sektion=1">ftp(1)</a> does a better job of detecting a failed cd command.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslog&sektion=3">syslog(3)</a> parse '%%m' correctly.
<li>Fix a null deref in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=at&sektion=1">at(1)</a>.
<li>Require a direction for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> rules that do routing.
<!-- ^ 20030102 -->
<li>When combining (route|reply)-to and translation in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> rules, make sure a state table insertion is only attempted once.
<li>Note (in the system copyright message) that it's now 2003.
<li>Update to sendmail 8.12.7.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a> display all <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> rule types instead of just pass/block rules.
<li>Make the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> radix table code handle duplicate table names and/or duplicate addresses in a single <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ioctl&sektion=2">ioctl(2)</a> call.
<!-- ^ 20030101 -->
<li>Remove the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> skip-step for rule action (scrub or no-scrub.)
<li>Properly update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> scrub rule statistics.
<li>Put <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> scrub rules into a ruleset separate to filter rules.
<li>Implement policy suggestions in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xsystrace&sektion=1">xsystrace(1)</a>.
<li>Adios amiga and sun3 platforms.
<!-- ^ 20021231 -->
<li>Don't overrun the buffer when listing route entries via <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=3">sysctl(3)</a>.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strtok_r&sektion=3">strtok_r(3)</a> breakage in libwrap that was causing EXCEPT rules to fail.
<li>Add a missing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=exit&sektion=3">exit(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<li>Correctly ignore the case where a directory with the desired executable name appears in one of the paths searched by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=execvp&sektion=3">exec[vl]p(3)</a>.
<li>Set a default <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> state table size of 10000 entries.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&sektion=5">pf.conf(5)</a>, change keyword 'ipv6-icmp-type' to 'icmp6-type' and instead of 'proto ipv6-icmp' allow 'icmp6'
<li>Fix a C++ compiler problem with Kerberos IV's krb.h, similar to the cdefs.h fix earlier.
<li>Avoid a null deref when parsing the command line of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&sektion=1">make(1)</a>.
<li>Allocate memory for connections to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8">spamd(8)</a> based on the -c command line option.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cd&sektion=4">cd(4)</a> try more often than other scsi devices, and don't ignore 'not ready' status from the bus.
<li>Add a parameter for the number of retries when waiting for a scsi device to come ready (scsi_test_unit_ready().)
<li>If <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=semop&sektion=2">semop(2)</a> has to do a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tsleep&sektion=9">tsleep(9)</a>, wake it back up at a much lower priority.
<li>Wait until a semaphore undo structure can be allocated if one isn't available immediately, and check that another hasn't been allocated to our process while we were waiting.
<li>Properly check SOCKS connection return code in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nc&sektion=1">nc(1)</a>.
<li>More firewire fixes. Concurrent devices support on the way.
<li>Remove outdated references to NFS as an installation source from the install notes.
<!-- ^ 20021230 -->
<li>Fix HOSTAP_FLAG_BITS in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&sektion=4">wi(4)</a>.
<li>Make 'pfctl -a name -s[rn]' show all rules or nats in all rulesets on anchor 'name'.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&sektion=8">authpf(8)</a>, set the macro '$user_id' to the username.
<li>Fix a couple of missed semaphore counter updates.
<li>Add kernel portion of radix table support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> rule source and destination addresses.
<!-- ^ 20021229 -->
<li>Remove an extraneous semicolon in &lt;sys/cdefs.h&gt; that broke some C++ compilers.
<li>Fix an amusingly incorrect <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=calloc&sektion=3">calloc(3)</a> size in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nc&sektion=1">nc(1)</a>.
<!-- ^ 20021228 -->
<li>Allow the log keyword in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> scrub rules.
<li>Some fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> ioctl handling.
<li>When <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> is routing a stateful connection, use the correct pool address.
<li>Fix kernel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>'s ability to match binat-anchor rules.
<li>Add a missing initialisation that was causing a crash in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>.
<!-- ^ 20021227 -->
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8">spamd(8)</a> support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8">rc(8)</a>. rc.conf and root's crontab.
<li>More paranoia checks in kernel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> routing.
<!-- ^ 20021226 -->
<li>Unbreak <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8">spamd(8)</a>'s connection timeout.
<li>Honour the -R and -N flags to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<li>Tweak <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&sektion=1">gcc(1)</a>'s handling of inline functions w.r.t. the stack protector.
<!-- ^ 20021225 -->
<li>New _spamd user and group for, uh, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8">spamd(8)</a>.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>'s display of 'control' keyword for CBQ rules.
<!-- ^ 20021224 -->
<li>Make libc/md/md5c.c compile again for big-endian machines.
<li>Avoid a null deref in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pppd&sektion=8">pppd(8)</a>.
<li>Remove a couple of extra <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntohs&sektion=3">ntohs(3)</a> calls in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&sektion=4">pfsync(4)</a>.
<li>Cleanup of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=atactl&sektion=8">atactl(8)</a>.
<!-- ^ 20021223 -->
<li>Update Perl's <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=Safe&sektion=0">Safe(3p)</a> module to 2.09, fixing a <a href="http://archive.develooper.com/perl5-porters@perl.org/msg87643.html">security hole</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newsyslog&sektion=8">newsyslog(8)</a> error messages now contain the line number.
<li>Have 'chroot -U' do a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setlogin&sektion=2">setlogin(2)</a> if the caller is, or can be made into, the session leader.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&sektion=8">chroot(8)</a> check for $SHELL defined as null as well as for undef.
<li>Increase the receive buffer length of the correct socket in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&sektion=8">syslogd(8)</a>.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>'s display of binat rules that use nat pools.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&sektion=8">authpf(8)</a> rules are now managed in their own anchor instead of at the end of the main rulebase. New *anchor rules are needed to activate authpf.
<!-- ^ 20021222 -->
<li>Make sure the queue identifier returned by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=msgget&sektion=2">msgget(2)</a> is greater than zero.
<li>Correctly display <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> rdr rules with no proxy port.
<li>Fix a missing initialisation in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<!-- ^ 20021221 -->
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8">spamd(8)</a>, which uses new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> features to stop spammers even hitting the mail server.
<li>Fix an Alpha-specific crash in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&sektion=4">pfsync(4)</a> by using bcopy() instead of structure assignment.
<li>Fix a use-after-free() in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mailwrapper&sektion=8">mailwrapper(8)</a>.
<li>Add a new kernel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pool&sektion=9">pool(9)</a> flag, PR_DEBUG, the use of which causes pool memory to be <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malloc&sektion=9">malloc(9)</a>'d using M_DEBUG.
<!-- ^ 20021220 -->
<li>Add new kernel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malloc&sektion=9">malloc(9)</a> type M_DEBUG.
<li>Also support CORENIC handles in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=whois&sektion=1">whois(1)</a>.
<li>Add dsiz and ssiz keywords to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ps&sektion=1">ps(1)</a> to show data size and stack size respectively.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=awk&sektion=1">awk(1)</a> to '<a href="http://cm.bell-labs.com/cm/cs/who/bwk/">one true awk</a>' version 20021213 (Friday 13th ed.)
<li>Add the -6 and -c registry shortcuts to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=whois&sektion=1">whois(1)</a>, and deal with VNIC handles starting with '!'.
<li>Better resolver error checking, a few fixes and a lot of message cleanup in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&sektion=8">ftp-proxy(8)</a>.
<li>Stop '-k' being used as an abbreviation for '--keep-locals' in GNU <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=as&sektion=1">as(1)</a>.
<li>Optimise <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> skip-step calculation to O(n) from O(n-squared).
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> 'no {binat,nat,rdr}' evaluation.
<!-- ^ 20021219 -->
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> (with the -vsn) option to display translation statistics as -vsr does for rules.
<li>When logging <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> rules from anchored rules, display the *anchor rule number, not the rule number within the anchored rules. (Hopefully both will be displayed sometime soon.)
<li>Make sure that state table entry display doesn't try to print rules that are no longer in place.
<li>Prevent changes to different rule types overwriting <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> DIOCCHANGE* tickets.
<li>Support a single destination port in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> rdr-anchor rules.
<li>Match <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> {binat,nat,rdr}-anchor parsing to what is actually supported.
<!-- ^ 20021218 -->
<li>Always compile in PRIQ and HFSC schedulers if ALTQ is included in the kernel.
<li>Make SysV shared memory and semaphore limits configurable via <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8">sysctl(8)</a>. Oh yes.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=whois&sektion=1">whois(1)</a> no longer barfs totally if just one of its query list is not found.
<li>Add PRIQ scheduler support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&sektion=1">su(1)</a> only calls <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setlogin&sektion=2">setlogin(2)</a> if it's the session leader (as noted in the setlogin manpage.)
<li>More <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compress&sektion=1">compress(1)</a>-works-like-<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&sektion=1">gzip(1)</a>: Add -r (recurse) option, and make it truncate existing files when extracting.
<li>Since <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> rule comparison is now done in userland, remove unused pf_compare* functions from the kernel.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> DIOCCHANGE* ioctls now require a ticket, to prevent races.
<li>Merge <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> nat, binat and rdr structures and pools into pf_rule.
<li>Fix the signedness of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl&sektion=8">wsconsctl(8)</a> variable display.focus, so a test against -1 now makes sense.
<!-- ^ 20021217 -->
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=imake&sektion=1">imake(1)</a> how to detect automagically the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&sektion=1">gcc(1)</a> stack protector.
<li>Now <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> supports other queue types, only try to create a root queue for CBQ.
<li>For some peculiar reason, support decoding in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ppt&sektion=6">ppt(6)</a>.
<li>Make linux emultation *stat64() work again.
<li>Convert <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=altq&sektion=9">altq(9)</a> disciplines HFSC, PRIQ and RIO to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>-based (CDNR and RED to come,) and remove other queuing disciplines.
<!-- ^ 20021216 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iostat&sektion=8">iostat(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systat&sektion=1">systat(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vmstat&sektion=8">vmstat(8)</a> now update their disk stats automatically when a device is detached.
<li>Enable login failure recording by default, by installing a blank /var/log/failedlogin (see <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login&sektion=1">login(1)</a>.)
<li>Fix some problems with the new inlined &lt;ctype.h&gt; functions on 64-bit architectures.
<!-- ^ 20021215 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cdio&sektion=1">cdio(1)</a> deal properly with multiline CDDB responses.
<!-- ^ 20021214 -->
<li>Add a second 'priority' queue to be specified in a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=rule">pf(rule)</a>, currently used for low-delay ToS packets. Great for ToS-savvy programs like <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a>.
<li>Revert <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nc&sektion=1">nc(1)</a> to the old behaviour, so it exits when the read descriptor is closed instead of requiring both read and write to close.
<li>Cosmetic fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scp&sektion=1">scp(1)</a>.
<li>Allow some ordering freedom for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> scrub rules.
<!-- ^ 20021213 -->
<li>Lots of firewire fixes. Add SCSI-over-FireWire support
<li>Compare all the bytes of a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> nat pools key, instead of comparing the first byte four times.
<li>Fix a linkage problem that stopped 'make build' working with DESTDIR set.
<!-- ^ 20021212 -->
<li>Remove setgid(kmem) from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=trpt&sektion=8">trpt(8)</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pstat&sektion=8">pstat(8)</a> can now get the tty list using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=3">sysctl(3)</a> insteam of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kvm_read&sektion=3">kvm_read(3)</a>.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&sektion=1">systrace(1)</a> logging so it works for non-translated calls too.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=close&sektion=2">close(2)</a> clobbering errno in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld&sektion=1">ld(1)</a>.
<li>Convert &lt;ctype.h&gt; macros into functions so they are consistent with those in libc.
<li>Change XDR.x_handy from int to u_int to avoid sign bugs.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ar&sektion=1">ar(1)</a> work more like its GNU and Solaris counterparts and not require an archive for the d,m,q and r operations.
<li>Fix an mbuf-related panic in kernel PF_KEY v2 code.
<li>More ANSIfication in /sbin.
<li>Fix a potential (non-exploitable) buffer overrun in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8">httpd(8)</a> macro FIX_PRECISION.
<li>Add missing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=snprintf&sektion=3">snprintf(3)</a> error check to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8">config(8)</a>.
<!-- ^ 20021211 -->
<li>When mounting the root partition via NFS, call <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inittodr&sektion=9">inittodr(9)</a> with the root filesystem's atime rather than its mtime (since it's likely to be read-only and pretty static.)
<li>Renumber some (debug only) <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tun&sektion=4">tun(4)</a> ioctls so they don't clash with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ppp&sektion=4">ppp(4)</a>.
<li>Make sure <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=user&sektion=8">user(8)</a> cleans up properly on failure by calling <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pw_abort&sektion=3">pw_abort(3)</a>.
<li>Check the interface is running first to avoid doing unnecessary STP processing in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bridge&sektion=4">bridge(4)</a>.
<li>Before <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login_getcapstr&sektion=3">login_getcapstr(3)</a> destroys the information, check that the value of $SHELL given to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a> is the same as the user's real shell.
<li>Remember to take the address of the structure on which we're using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bzero&sektion=3">bzero(3)</a> in the libc stack protector code. <!-- "bug fix" is not a terribly helpful checkin comment. -Andre -->
<li>Hack <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setsockopt&sektion=2">setsockopt(2)</a> under linux emulation so that SO_REUSEADDR works as expected.
<!-- ^ 20021210 -->
<li>Use libc's <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt_long&sektion=3">getopt_long(3)</a> instead of the private version found in a number of GNU programs.
<li>Fix a typo in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bridge&sektion=4">bridge(4)</a> so that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> actually gets applied to outbound frames...
<li>Yet more string function paranoia in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bridge&sektion=4">bridge(4)</a> to set the STP path cost.
<li>Add support for regular expression matches in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&sektion=1">systrace(1)</a> filters.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&sektion=1">systrace(1)</a>, don't allow 'permit' to be used on aliases.
<!-- ^ 20021209 -->
<li>Now that options to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> rules can mostly be in any order, check for and disallow repeated options.
<li>Handle '-' as stdin or stdout appropriately in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uniq&sektion=1">uniq(1)</a>.
<li>strncpy -> strlcpy in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compress&sektion=1">compress(1)</a> accept most of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&sektion=1">gzip(1)</a>'s long options. Some cleanup also.
<li>Continuing compatibility tweaks to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt_long&sektion=3">getopt_long(3)</a>.
<!-- ^ 20021208 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> queue options can now be in any order. The 'scheduler' keyword is no longer used.
<li>More rule shrinkage: The 'fromto' part of a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> is now optional and defaults to 'all', so e.g. 'block' == 'block all' == 'block from any to any'. <!-- Another uncommented feature, r1.244 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> anchor rules now support parameters, so 'anchor name proto tcp from any to any port smtp' works.
<li>Remove support for the '-a otp' flag from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=telnetd&sektion=8">telnetd(8)</a>. Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&sektion=5">login.conf(5)</a> instead.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&sektion=1">su(1)</a>'s -a flag work again.
<li>'pfctl -s' now prints out addresses in rules in the order they are entered.
<li>When <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=telnet&sektion=1">telnet(1)</a> receives a SIGPIPE when writing to the terminal, treat it like a user SIGQUIT.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> use the actual interface MTU instead of assuming 1500.
<li>Convert string key hashes in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> to network byte order.
<li>Fix a bug in Xaw that reads the wrong error return from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=open&sektion=2">open(2)</a>.
<!-- ^ 20021207 -->
<li>All the games set up the RNG with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=srandomdev&sektion=3">srandomdev(3)</a> instead of by lesser means.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a> set the transform from the Default-Phase-1-Configuration.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=srandomdev&sektion=3">srandomdev(3)</a> fall back to using sysctl if it can't open /dev/arandom.
<li>Make the libc <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt_long&sektion=3">getopt_long(3)</a> more compatible with GNU.
<li>Output from 'pfctl -v' is now valid input to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<li>Make section and tag comparisons in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a> case-insensitive.
<!-- ^ 20021206 -->
<li>Allow a null direction in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> rules, so e.g. 'block all' is now valid. <!-- Oh yes. Uncommented effect of r1.237 that introduced anchor rules. -->
<li>Add named rulesets support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>, invoked from 'anchor' rules in the main ruleset.
<li>Kernel memory allocation debugging can now be used anywhere - if the debugging pool is not yet initialised, it just does nothing.
<li>Fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt_long&sektion=3">getopt_long(3)</a>.
<li>Rule numbers are no longer output by 'pfctl -v'. Use '-v -v' to get them back.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scp&sektion=1">scp(1)</a> handle systems with odd block sizes better.
<!-- ^ 20021205 -->
<li>Drop unnecessary altq devices from the kernel.
<li>Pass correct sizes to memset in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping6&sektion=8">ping6(8)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bridge&sektion=4">bridge(4)</a> behave better when running spanning tree: Flush the dynamic MAC cache when the forwarding/blocking state changes, and only forward packets while in the forwarding state.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a> accept ACQUIRE requests with a null EXT_ADDRESS_SRC.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>, apply a netmask consistently.
<!-- ^ 20021204 -->
<li>Crank the major version numbers of the X libraries.
<li>Continuing cleanup and shrinkage of the installer scripts.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=arp&sektion=8">arp(8)</a> now prints the interface name with which an address is associated.
<li>Big cleanup up <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mixerctl&sektion=1">mixerctl(1)</a>.
<li>Import a GNUish <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt_long&sektion=3">getopt_long(3)</a> from NetBSD.
<li>Add -4 and -6 command line options to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a> to select the address family to use.
<li>Better MTU setting for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&sektion=4">pfsync(4)</a>.
<li>Correct a missed initialiser in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&sektion=4">raid(4)</a>.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> play nice and shut down its sockets when it's done.
<!-- ^ 20021203 -->
<li>Crank all (system) library major numbers now that propolice is in.
<li>Make a copy of rather than just refer to a string in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld&sektion=1">ld(1)</a>. Cures some ports linking problems.
<li>Allow options at the end of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> pass and block rules to come in any order.
<li>Make the bandwidth specifier optional in altq rules (as well as queue rules.) As a side effect, the altq rules can now have "bandwidth xx%" where the percentage is taken w.r.t. the interface bandwidth.
<li>Implement legacy functions <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ecvt&sektion=3">ecvt(3)</a>, fcvt(3) and gcvt(3) for standards compliance.
<li>Add <a href="http://www.trl.ibm.com/projects/security/ssp">propolice</a> stack attack protection into <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&sektion=1">gcc(1)</a>.
<li>Updated <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=unifdef&sektion=1">unifdef(1)</a>.
<!-- ^ 20021202 -->
<li>Don't have the X server drop privileges if started by root and from a non-standard config path.
<li>Tweaks and fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>'s ioctl code.
<!-- ^ 20021201 -->
<!-- ^ 20021130 -->
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a> about <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&sektion=4">pfsync(4)</a>.
<li>Add new pseudo-device <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&sektion=4">pfsync(4)</a>, exposing changes to the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> state table.
<li>Kill a null deref in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>.
<li>Wrap some noisy altq printf()s with #ifdef ALTQ_DEBUG.
<!-- ^ 20021129 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=file&sektion=1">file(1)</a> gets a new option, -b, which supresses the output of the pathname.
<li>Allow a qlimit to be specified in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> altq rules as well as in queue rules.
<li>Use a custom hash function (based on that in if_bridge.c) for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> source-hash nat pools instead of MD5.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a> checks for invalid icmp6 option length.
<!-- ^ 20021128 -->
<li>page_dir update fixed in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=realloc&sektion=3">realloc(3)</a>. MALLOC_OPTIONS=J is now honoured in realloc() as well.
<li>'fc -e' now works when <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&sektion=1">ksh(1)</a> is invoked in 'sh' mode.
<li>Allow usernames given to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a> to contain '@' characters, i.e. the hostname follows the last '@'.
<li>Tweaks to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> altq rules display.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=daemon&sektion=3">daemon(3)</a> closing descriptors that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a> needs.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> read correctly the tbrsize spec.
<li>Fix underflow and wraparound in socket timeout calculation.
<li>Make IPv6 work in Linux emulation mode, though not for IPv4-mapped addresses.
<!-- ^ 20021127 -->
<li>The bandwidth statement in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> queue rules is now optional.
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&sektion=5">pf.conf(5)</a> ordering so translation is now after queue...
<li>Parse more include files so that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kdump&sektion=1">kdump(1)</a> knows about more ioctls.
<li>Pass in the right structure to DIOCCHANGEADDR.
<!-- ^ 20021126 -->
<li>Fix 'pfctl -Fq' so <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=altq&sektion=9">altq(9)</a> gets flushed and reset properly.
<li>setuid() -> seteuid() in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8">ftpd(8)</a>.
<li>Tweak <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>'s handling of address families in rules.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> fetch the address properly for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lo&sektion=4">lo(4)</a> with LINK1 set.
<li>Use 1KB = 1000B instead of 1024B when dealing with bandwidth in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>.
<li>Fix URL CRLF injection bug in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lynx&sektion=1">lynx(1)</a>.
 <!-- Applied to 3.2-stable -->
<li>Add a missing check for snprintf errors in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=identd&sektion=8">identd(8)</a>.
<li>Protect arc4_getbyte() with an splhigh().
<li>Some cleanup in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=talkd&sektion=8">talkd(8)</a>.
<!-- ^ 20021125 -->
<li>When <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malloc&sektion=3">malloc(3)</a> stats dumps are enabled, warn if <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=atexit&sektion=3">atexit(3)</a> fails.
<li>Enforce new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&sektion=5">pf.conf(5)</a> ordering: options, normalization, translation, queue, filter.
<li>Copy TAILQs properly in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<!-- ^ 20021124 -->
<li>Remove a potential access-after-free in libc's syslog code.
<li>New manual page <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc-local&sektion=1">gcc-local(1)</a> documenting OpenBSD-specific changes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&sektion=1">gcc(1)</a>.
<li>So farewell, then, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=altqd&sektion=8&release=OpenBSD+3.2">altqd(8)</a> and friends.
<li>Better <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> altq rule error checking.
<li>Fix a potential null deref in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>'s parser, and some general cleanup.
<li>Make sure <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&sektion=8">authpf(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> don't try to issue ioctls when running with -n.
<!-- ^ 20021123 -->
<li>Implement 'nat pools' in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>, allow redirection using (nat, rdr, route-to, dup-to and reply-to) to multiple addresses.
<li>Improvements to the ELF loader.
<li>Some snprintf paranoia in BSD auth, also some extra initialisation.
<li>Added new example dir /usr/share/pf, and example queue rulebase /usr/share/pf/queue1 to show how cool pf+altq is.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&sektion=8">authpf(8)</a> accepting non-interactive sessions.
<li>'pfctl -v' displays altq and queue lines, including child queue assignment.
<li>Match the queue to the return type (icmp-unreach or RST) for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> block rules.
<li>Use a quad_t instead of an int, and fix rlimit sizing for >2GB machines.
<!-- ^ 20021122 -->
<li>Fix some <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strncpy&sektion=3">strncpy(3)</a> lengths in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=telnetd&sektion=8">telnetd(8)</a>.
<li>Add _tokenadm and _radius groups so their respective login programs can be setgid instead of setuid(root).
<li>Add _shadow group and change group and mode of /etc/spwd.db to match
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=atoll&sektion=3">atoll(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strerror&sektion=3">strerror_r(3)</a> to libc.
<li>Add simple multiple-card load balancing to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crypto&sektion=9">crypto(9)</a> and add a simplified driver registration API.
<li>Some int -> unsigned int in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a>.
<li>New -n option for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&sektion=8">syslogd(8)</a> to disable DNS lookups.
<!-- ^ 20021121 -->
<li>Correct a format string bug in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=routed&sektion=8">routed(8)</a>'s, er, Makefile.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=at&sektion=1">at(1)</a> breakage when two jobs are set for the same time.
<li>Correct a use-before-init in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xterm&sektion=1">xterm(1)</a>.
<!-- ^ 20021120 -->
<li>Create a simple lookup table mechanism [dev/pci/pci.c:pci_matchbyid()] to match PCI device IDs, and have several drivers use it.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vi&sektion=1">vi(1)</a> catalog updates: Fix Russian, add Polish and Ukrainian.
<li>Fix an off-by-one when reading ICMP types and codes by name in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<!-- ^ 20021119 -->
<li>Merge of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=altq&sektion=9">altq(9)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>, still some work left to do.
<li>Don't overwrite SIG{INT,QUIT,TERM} handlers in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a> if they're set to ignore. This mirrors <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rsh&sektion=1">rsh(1)</a> behaviour.
<!-- ^ 20021118 -->
<!-- ^ 20021117 -->
<li>Make sure <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skey&sektion=1">skey(1)</a> issues a fake challenge for a user without an S/Key file.
<!-- ^ 20021116 -->
<li>Enable the pthread library, but install it as libnpthreads so autoconf scripts don't pick it up and use it with -lpthread as well as using -pthread.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8">ftpd(8)</a>, prohibit user id changes once logged in, and run more stuff as the logged-in user.
<li>Add 'Default-Phase-1-Configuration' to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a>.
<li>Be more careful when loading RSA1 key files in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a>.
<!-- ^ 20021115 -->
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a>'s handling of multiple values and continuation lines.
<li>Improvements to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&sektion=1">ld.so(1)</a> symbol lookup failure messages.
<li>Allow DNS queries from the initial rulebase loaded by /etc/rc, so <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> can load at boot-time rulebases containing DNS entries.
<!-- ^ 20021114 -->
<li><font color="#e00000"><strong>SECURITY FIX: A buffer overflow in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=named&sektion=8">named(8)</a> could allow an attacker to execute code with the privileges of named. On OpenBSD, named runs as a non-root user in a chrooted environment which mitigates the effects of this bug.</strong></font><br>
    <a href="errata.html#named">A source code patch is available</a>.<br>
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<li>Create links from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=curses&sektion=3">curses(3)</a> libs to ncurses, to satisfy autoconfiguration scripts that expect the latter instead of checking properly.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> scrub rules now are subject to the same list expansion as other rules.
<li>Add label macro '$if' to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&sektion=5">pf.conf(5)</a>, now we can have interfaces in expansion lists.
<li>Add some missing pointer initialisations in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<!-- ^ 20021113 -->
<li>Add a null transform to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crypto&sektion=4">crypto(4)</a>, enabled via sysctl kern.cryptodevallowsoft=1.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&sektion=1">systrace(1)</a>'s determination of the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=execve&sektion=2">execve(2)</a> filename.
<li>Kernel IPsec code checks for short IP headers.
<!-- ^ 20021112 -->
<!-- ^ 20021111 -->
<!-- ^ 20021110 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&sektion=1">systrace(1)</a> checks for invalid system call numbers.
<!-- ^ 20021109 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&sektion=1">su(1)</a>'s login emultation mode work even more like <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login&sektion=1">login(1)</a>.
<li>Avoid a possible reference count leak in kernel file descriptor code.
<li>Remove bogus operations on the not-yet-existent file descriptor table in libc_r.
<!-- ^ 20021108 -->
<li>Implement simple vnodeops inheritance for specfs and fifofs,
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&sektion=1">ftp(1)</a> can now follow HTTP redirects.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scp&sektion=1">scp(1)</a> properly reflect check the exit status of its <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a> process if an error occurs.
<li>Fix some invalid pointers in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>'s <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ioctl&sektion=2">ioctl(2)</a> handler.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=makewhatis&sektion=8">makewhatis(8)</a> moaning about non-existent directories.
<li>Don't use the HostbasedAuthentication switch to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keysign&sektion=8">ssh-keysign(8)</a>; instead, add new option EnableSSHKeysign to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh_config&sektion=5">ssh_config(5)</a>.
 <!-- XXX not added to ssh_config manpage though -->
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupdel&sektion=8">groupdel(8)</a> check that the named group exists.
<li>Allow '$' as the last character of a username, to appease Samba.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&sektion=8">sshd(8)</a>'s -e option (log to stderr) work.
<li>Make the minimum file rotation size 512 bytes instead of 512Kbytes...
<li>Rearrange payload length check for ESP packets so packets with NULL encryption are tested also.
 <!-- Applied to 3.2-stable -->
<li>Don't allow a simple non-existent server to crash <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=altqstat&sektion=1">altqstat(1)</a>.
<!-- ^ 20021107 -->
<li>Solve problems static linking with -lpthread. (-static -pthread still broken.)
<li>Stop up a couple of memory leaks in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a>.
<li>Fix a few bugs in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount&sektion=8">mount(8)</a>, and make its command line arguments handling more consistent.
<li>Keep a correct reference count to the file referenced by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ioctl&sektion=2">ioctl(2)</a> under SVR4 emulation.
    <!-- Applied to 3.2-stable -->
<!-- ^ 20021106 -->
<li>Gracefully handle broken firewalls that block ECN-enabled TCP sessions by falling back to non-ECN.
<li>Some thread-safety fixes to libc.
<li>Add a cast to handle properly size_t larger than u_int in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a>.
<li>Fix some problems <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&sektion=1">gzip(1)</a> had displaying information on files > 2GB.
<!-- ^ 20021105 -->
<li>Serve <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> a strong draught of CIDR (e.g. can use 10/8 now instead of 10.0.0.0/8.)
<li>-STABLE branch created for 3.2. <a href="errata.html#smrsh">smrsh</a>, <a href="errata.html#pfpridge">pfbridge</a> and <a href="errata.html#kadmind">kadmind</a> errata fixes applied to it.<br>
<li>When checking a filename in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a>, don't fail when <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=realpath&sektion=3">realpath(3)</a> for the user's home directory - this happens legitimately when using AFS.
<!-- ^ 20021104 -->
<!-- ^ 20021103 -->
<li>Do a better job when comparing dynamic addresses in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> AF macros, operate on the whole address (all 128 bits) unless AF_INET is set.
<!-- ^ 20021102 -->
<!-- ^ 20021101 -->
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=perl&sektion=1">perl(1)</a>'s MakeMaker so manpages get installed the way we like.
<li>Plug a memory leak in IPv6 (ip6_output.c)
<!-- ^ 20021031 -->
<li>Make sure processes aren't added to the process list until they're completely initialised.
<li>Implement some 4.3BSD emulation functions in terms of setresuid() etc.
<li>Use the new setresuid() etc. calls for FreeBSD, HP-UX and Linux emulation of the same calls.
<li>Implement <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setresuid&sektion=2">[gs]etres[gu]id(2)</a> system calls. Minor version bump for libc and libc_r.
<li>Many fixes to signal and fd handing under threads.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> interface expansion.
<!-- ^ 20021030 -->
<li>Better GRE output from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a>.
<li>New -U option to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&sektion=8">chroot(8)</a> that sets the uid, gid and group vector from the password database.
<li>To a chorus of approval, add the 'set require-order [yes|no]' option to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&sektion=5">pf.conf(5)</a>.
<!-- ^ 20021029 -->
<li>Remove a bogus test in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&sektion=1">dd(1)</a> that stopped a perfectly legal seek on a character device.
<li>Merge mod_ssl 2.8.12, fixing a cross-site scripting bug and two off-by-ones.
 <!-- Applied to 3.2-stable -->
<li>Add a missing break statement in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&sektion=1">systrace(1)</a>'s arguments parsing code.
<!-- ^ 20021028 -->
<li>Add getdents64() support under Linux emulation.
<li>Merge in Perl 5.8.0.
<li>Have pool elements' sizes rounded up to the alignment passed to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pool_init&sektion=9">pool_init(9)</a> instead of relying on the architecture's ALIGNBYTES value.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&sektion=4">wi(4)</a> can now do pointless-but-common WEP encryption in software for Prism and Symbol cards. Useful if your card doesn't do weak IV avoidance (or if you trust your BSD more than your hardware manufacturer,) and also serves as a framework for better wireless crypto protocols.
<li>The installer unpacks siteXX.{tgz,tar.gz} files last so that site-specific tarballs always overwrite standard files.
<li>Remove the error-prone and robustness-principle-defying 'flags X' (as opposed to 'flags X/Y') syntax from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>
<li>Be a little less 32-bit-centric in libcrypto.
<!-- ^ 20021027 -->
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route6d&sektion=8">route6d(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rtsold&sektion=8">rtsold(8)</a> use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=poll&sektion=2">poll(2)</a> instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=select&sektion=2">select(2)</a> as well.
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=atoi&sektion=3">atoi(3)</a> to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strtoul&sektion=3">strtoul(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route6d&sektion=8">route6d(8)</a>.
<!-- ^ 20021026 -->
<li>Change a number of header files so NULL is now defined as 0L instead of 0, and so is the same size as a pointer.
<li>Add to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&sektion=8">chroot(8)</a> the ability to set the uid, gid and group vector after doing the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&sektion=2">chroot(2)</a> call.
<li>Some additional paranoia added to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&sektion=8">authpf(8)</a>.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> test rule labels as well when comparing rules.
<li>Fix a few instances where %ul was used instead of %lu.
<!-- ^ 20021025 -->
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=poll&sektion=2">poll(2)</a> instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=select&sektion=2">select(2)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping6&sektion=8">ping6(8)</a>
<li>More picky argument parsing in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute6&sektion=8">traceroute6(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping6&sektion=8">ping6(8)</a>.
<!-- ^ 20021024 -->
<li>A couple of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmpnam&sektion=3">tmpnam(3)</a>s become <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkstemp&sektion=3">mkstemp(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8">httpd(8)</a>.
<li>Lots of int -> u_long in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute6&sektion=8">traceroute6(8)</a>.
<!-- ^ 20021023 -->
<li>Correct an off-by-one in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&sektion=4">wi(4)</a>.
<li>Fix a printf format string typo in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> apply the netmask to addresses right away, so bogus netmasks show up as munges network numbers in -v output.
<!-- ^ 20021022 -->
<li>Correct a couple of typos in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>'s ioctl() code.
<li>Fix a null deref in libc_r.
<li>Make sure the user process tally is right when kernel stack space can't be allocated for the new proc.
<li>Correctly count the total number of processes in the system.
<li><font color="#e00000"><strong>SECURITY FIX: A buffer overflow can occur in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kadmind&sektion=8">kadmind(8)</a> daemon, leading to possible remote crash or exploit.</strong></font><br>
    <a href="errata.html#kadmin">A source code patch is available</a>.<br>
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<!-- ^ 20021021 -->
<li>Add partial support for the 21145 chip to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&sektion=4">dc(4)</a>.
<!-- ^ 20021020 -->
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xconsole&sektion=1">xconsole(1)</a> get a pseudoterminal using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=openpty&sektion=3">openpty(3)</a> instead of going all #ifdef.
<li>More NULL -> (void *)NULL, this time in XFree, to make sure varargs sentinel is pointer-width.
<!-- ^ 20021019 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pax&sektion=1">pax(1)</a> now honours @LongLink, and has a new option to stop the next volume prompt.
<!-- ^ 20021018 -->
<li>Improved media support and a boundary check fix for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&sektion=4">wi(4)</a>.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&sektion=8">route(8)</a> correctly interpret -prefixlen 32 (or 128 for IPv6) network as a host route.
<li>Enable uvm_tree_sanity() check #ifdef DEBUG.
<li>Fix a potential null deref in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&sektion=8">route(8)</a>'s arguments parser.
<li>Renumber <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ch&sektion=4">ch(4)</a> CHIO* ioctls. Old definitions renamed to OCHIO*, binary backwards compatibility will be left in intact until post-3.3.
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kdump&sektion=1">kdump(1)</a> to print AUDIO_* ioctls, and add a few missing syscall defines.
<li>Support <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fxp&sektion=4">fxp(4)</a> on big-endian architectures.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> allows protocols to be specified by a (valid) protocol number.
<li>Add a missing free() in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflogd&sektion=8">pflogd(8)</a>.
<!-- ^ 20021017 -->
<li>Treat manually- and auto-configured IPv6 address prefixes the same way.
<li>For positively POSIX reasons, implement <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isfdtype&sektion=3">isfdtype(3)</a>.
<li>Bring <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pax&sektion=1">pax(1)</a>'s date handling code back into sync with that in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=date&sektion=1">date(1)</a>. Four digit years parse now.
<li>Start to break out machine-dependent parts of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=MAKEDEV&sektion=8">MAKEDEV(8)</a> into separate files.
<li>Send <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&sektion=1">ksh</a>.kshrc label() and ilabel() output to /dev/tty insted of stdout, so command output streams doesn't get messed up.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&sektion=1">systrace(1)</a> supports system call-granularity privilege elevation!
<li>Correct a typo in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&sektion=1">systrace(1)</a> that was causing group predicates to be evaluated incorrectly.
<li>Range-check values given to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=atactl&sektion=8">atactl(8)</a>.
<li>Better mask comparison for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> binat.
<!-- ^ 20021016 -->
<li>Remove the setuid bit from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login&sektion=1">login(1)</a>. If run with a non-root euid, it invokes <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&sektion=1">su(1)</a> with the new -L flag.
<li>Add '-L' flag to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&sektion=1">su(1)</a> to make it work like <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login&sektion=1">login(1)</a>.
<li>Enable the META key in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&sektion=1">ksh(1)</a> for 7-bit locales.
<li>Make sure some varargs end-of-list sentinel NULLs are pointer-width.
<li>Fix a subtle dangling pointer bug in BSD auth.
<li>Sync Brazil's Daylight Savings Time handling with new reality.<br>
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=makewhatis&sektion=8">makewhatis(8)</a> grumbling about having Perl 5.8.x instead of 5.6.x.
<!-- ^ 20021015 -->
<li>In the X server, work around problems caused by certain MTRR configurations whose details are only available under NDA.
<li>Kernel tweaks and hacks in preparation for GCC 3.x (kern/subr_prf.c)
<li><font color="#e00000"><strong>A logic error in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pool&sektion=9">pool(9)</a> kernel memory allocator could cause memory corruption in low-memory situations, causing the system to crash.</strong></font><br>
    <a href="errata.html#pool">A source code patch is available</a>.<br>
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> can now binat a whole netblock with one rule.
<!-- ^ 20021014 -->
<li>Remove a potential null pointer deref in BSD authentication code.
<li>Fix a bad printf format string in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8">ftpd(8)</a>. Non-critical because it's only ever fed by parts of the authentication system which sanitise the input first.
<li>Do some more unsigned checks to system call parameters, as with the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setitimer&sektion=2">setitimer(2)</a> <a href="http://www.openbsd.org/errata31.html#kerntime">erratum</a>.<br>
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<!-- ^ 20021013 -->
<li>Prepare the GNU floating-point emulation code on i386 for ELF.
<!-- ^ 20021012 -->
<li>Update <a href="stable.html">stable</a> to OpenSSH 3.5.
<li>Catch some endianness nits and add zero-padding of keys in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&sektion=4">wi(4)</a>.
<li>Teach ALTQ CBQ the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> API. The old API remains for now.
<!-- ^ 20021011 -->
<li><font color="#e00000"><strong>RELIABILITY FIX: Network bridges running pf with scrubbing enabled could cause mbuf corruption, causing the system to crash.</strong></font><br>
    <a href="errata.html#pfbridge">A source code patch is available</a>.<br>
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<li>Fix a bug in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mbuf_tags&sektion=9">m_tag_copy_chain()</a>.
<!-- ^ 20021010 -->
<li>Hush up noisy IPv6 neighbor discovery. Can be made loud again using sysctl net.inet6.icmp6.nd6_debug.
<!-- ^ 20021009 -->
<li><font color="#e00000"><strong>SECURITY FIX: An attacker can bypass the restrictions imposed by sendmail's restricted shell, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smrsh&sektion=8">smrsh(8)</a>, and execute arbitrary commands with the privileges of his own account.</strong></font><br>
    <a href="errata.html#smrsh">A source code patch is available</a>.<br>
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<li>Make predicates part of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&sektion=1">systrace(1)</a>'s grammar.
<!-- ^ 20021008 -->
<li>Start work on a merge of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=altq&sektion=9">altq(9)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> functionality. Oh yes.
<li>Add a missing htons() in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=talkd&sektion=8">talkd(8)</a>.
<li>In pmdb, fix a crash that occurred when an attempt to set a breakpoint failed.
<li>Support SA_RESETHAND support to libc_r, in preparation for SA_SIGINFO support.
<li>Merge in Apache 1.3.27 and mod_ssl 2.8.11.
<li>New block-policy option to set the default response to a block rule.
<li>More rulebase reduction: "block return ..." now does The Right Thing, RST for TCP, ICMP for UDP, silent block otherwise.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> support for icmpv6 returns in response to block rules.
<li>New reply-to rule option for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>, works like route-to but applies to reply packets in a stateful connection.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8">httpd(8)</a> restarts work even when srm.conf is not present.
<li>Have the X server complain less about unknown scancodes.
<!-- ^ 20021007 -->
<li>Initialise the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uvm&sektion=9">uvm</a>_pglistalloc result list in the function, instead of requiring the caller to do it.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslog&sektion=3">syslog(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslog_r&sektion=3">syslog_r(3)</a> now take the new __syslog__ format attribute.
<li>Make the default <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8">httpd(8)</a> config files use php4 instead of php3.
<!-- ^ 20021006 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> expands lists left-to-right instead of right-to-left.
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> how to filter on the IP TOS field.
<!-- ^ 20021005 -->
<li>Fix list handling problem in ALTQ CBQ that showed up with three or more CBQ instances.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd&sektion=8&release=OpenBSD+3.2">smtpd(8)</a> has left the building.
<li>By default, add the -H option to the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sort&sektion=1">sort(1)</a> invoked by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=locate.updatedb&sektion=8">locate.updatedb(8)</a>.
<li>Give <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=window&sektion=1">window(1)</a> the stdarg treatment.
<li>When routing via <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>, use the outgoing interface as decided by the normal routing code, not the interface to which the rule applies.
<li>Fix cross-site scripting vulnerability (<a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2002-0840">CAN-2002-0840</a>) in the default error page of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8">httpd(8)</a>. Only applies under specific (and non-OpenBSD default) conditions.
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<!-- ^ 20021004 -->
<li>In kernel IP processing, block interrupts with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=splsoftnet&sektion=9">splsoftnet(9)</a> around interface address routing table manipulations.
<li>Make sure <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&sektion=4">wi(4)</a> doesn't accept out-of-range TX keys.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ami&sektion=4">ami(4)</a> matching I2O-configured devices.
<li>3.2 -> 3.2-current.
<!-- ^ 20021003 -->
</ul>
<p>

This list mentions mostly platform-independent changes.  For a list of changes
made in a particular platform, please check the page for that platform.  If you
find them not listed there, the changes are either (1) not being documented or
(2) are documented here.<br><br>

<hr>
<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="back.gif" border=0 alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus.html,v 1.856 2003/01/18 20:05:08 deraadt Exp $</small>

</body>
</html>
