<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD -current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD -current changes">
<meta name="keywords" content="openbsd,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2011 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">OpenBSD -current changelog</font></h2>
<hr>

<p>
This is a partial list of the major machine-independent changes
(i.e., these are the changes people ask about most often).  Machine
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>,
<a href="plus50.html">5.0</a>.
<br>
</h3>

<p>
<h3><font color="#0000e0">Changes made between OpenBSD 5.0 and -current</font></h3><p>
<p>

<ul>
<!-- 2011/08/28 -->
<li>Clear <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd&sektion=8&format=html">smtpd(8)</a> bounce envelope structure, to avoid wrong use when bounce_record_message() returns 0.
<li>Added support for the netid.byname YP map in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ypldap&sektion=8&format=html">ypldap(8)</a>.
<li>Updated mkfontscale to version 1.0.9, smproxy to 1.0.5, twm to 1.0.7, x11perf to 1.5.4, xkbcomp 1.2.3, xman to 1.1.2, xprop to 1.2.1, xrandr to 1.3.5, xset to 1.2.2, xterm 273 and DejaVu fonts to 2.33.
<li>Make sure <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lock&sektion=9&format=html">lock(9)</a> lockmgr() use a different address for the wchan when draining the lock.
<li>Fixed a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&sektion=3&format=html">strlcpy(3)</a> truncation test block in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd&sektion=8&format=html">smtpd(8)</a>.
<!-- 2011/08/27 -->
<li>Added initial support for a session-time filtering API in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd&sektion=8&format=html">smtpd(8)</a>.
<li>Prevent <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iked&sektion=8&format=html">iked(8)</a> from bypassing a signature verification caused by an incorrect check of the EVP_VerifyFinal return value.
<li>Update libX11 to version 1.4.4.
<!-- 2011/08/26 -->
<li>Prevent spurious disappearance of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=le&sektion=4&arch=vax&format=html">le(4/VAX)</a> on some systems.
<li>Prevent a bogus <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lcg&sektion=4&arch=vax&format=html">lcg(4/VAX)</a> device from attaching on KA45 and also repair console operation if the S3 switch is down.
<li>Fixed <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vsbus&sektion=4&arch=vax&format=html">vsbus(4/VAX)</a> verbose <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=autoconf&sektion=9&format=html">autoconf(9)</a> output.
<li>Added initial framework in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&sektion=1&format=html">tmux(1)</a> for more powerful formatting of command output and use it for list-{panes,windows,sessions}.
<li>Removed unused fatpackages from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1&format=html">pkg_add(1)</a>.
<li>Prevent watchdog timeouts in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=age&sektion=4&format=html">age(4)</a>.
<li>Added a dmesg warning about sloppy disk I/O to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnd&sektion=4&format=html">vnd(4)</a> devices to help identify bad distrib scripts/tools.
<!-- 2011/08/24 -->
<li>Added a tty_bell wrapper function, a pane-base-index option, support for line continuation with a backslash in the configuration file to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&sektion=1&format=html">tmux(1)</a>.
<!-- 2011/08/23 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=at&sektion=1&format=html">at(1)</a> use standard EXIT_SUCCESS/EXIT_FAILURE and STD{IN,OUT,ERR}_FILENO defines instead of using custom macros.
<li>Prevent that a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sosplice&sektion=9&format=html">sosplice(9)</a> timeout error in one direction from being also added to the other direction.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpbench&sektion=1&format=html">tcpbench(1)</a> TOS/TCLASS to be set with -T and accept the same keywords as in pf.conf.
<!-- 2011/08/22 -->
<li>Added support for Radeon 4250 in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeondrm&sektion=4&format=html">radeondrm(4)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&sektion=8&format=html">cron(8)</a> use standard EXIT_SUCCESS/EXIT_FAILURE and STD{IN,OUT,ERR}_FILENO defines instead of using custom macros.
<li>Moved powerpc to non-__STRICT_ALIGNMENT, as it always was.
<li>Reworked <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm&sektion=1&format=html">cwm(1)</a> warning on configuration parsing.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.d&sektion=8&format=html">rc.d(8)</a> read <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=amd&sektion=8&format=html">amd(8)</a> amd_master using print -rn, fixes problems if the file has multiple lines.
<!-- 2011/08/21 -->
<li>Fixed <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=touch&sektion=1&format=html">touch(1)</a> -t option.
<li>Fixed some watchdog timeouts seen when unplugging the cable from the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=alc&sektion=4&format=html">alc(4)</a> NIC while running or the NIC not working if the cable is not plugged in upon boot up.
<li>Fixed initial xkb_options setting in xf86-input-keyboard. Restores Ctrl+Alt+Backspace behaviour.
<li>Fixed serial mouse on X.
<!-- 2011/08/20 -->
<li>Fixed memory leaks in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&sektion=1&format=html">tmux(1)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4&format=html">ahci(4)</a> not waiting for FR to come on after setting the FRE bit in the port command register.
<li>Added support for -v (enable verbose logging on the command line) in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iscsid&sektion=8&format=html">iscsid(8)</a>.
<li>Updated x11proto to version 7.0.22 and util-macros to 1.15.0
<li>Decoupled <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ospfd&sektion=8&format=html">ospfd(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8&format=html">bgpd(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dvmrpd&sektion=8&format=html">dvmrpd(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldpd&sektion=8&format=html">ldpd(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ripd&sektion=8&format=html">ripd(8)</a> log_verbose() from log_init() so the verbose flag stays set with "ospfd -v" (previously only "-vd" worked).
<li>Fixed segfault on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpbench&sektion=1&format=html">tcpbench(1)</a> server when the remote end closes and reopens a connection.
<li>Added nanosecond precision to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=touch&sektion=1&format=html">touch(1)</a> and support for -d option.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mpe&sektion=4&format=html">mpe(4)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vlan&sektion=4&format=html">vlan(4)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ppp&sektion=4&format=html">ppp(4)</a> fix packet accounting in error cases.
<!-- 2011/08/19 -->
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=futimens&sektion=2&format=html">futimens(2)</a> instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=futimes&sektion=2&format=html">futimes(2)</a> to avoid converting to/from struct timeval in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crontab&sektion=1&format=html">crontab(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&sektion=8&format=html">vipw(8)</a>.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ums&sektion=4&format=html">ums(4)</a> probe bounds of absolute devices if available.
<li>Put libc and libm in line with the compiler on hppa64.
<li>Make sure the stack is properly aligned for using SSE instructions in crt0.
<!-- 2011/08/18 -->
<li>Added <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sti&sektion=4&format=html">sti(4)</a> at <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dio&sektion=4&arch=hp300&format=html">dio(4/HP300)</a> in hp300 GENERIC and RAMDISK kernels.
<li>Improved hp300 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sti&sektion=4&format=html">sti(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsdisplay&sektion=4&format=html">wsdisplay(4)</a> attachment on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dio&sektion=4&arch=hp300&format=html">dio(4/HP300)</a>.
<li>Prevent hp300 models 362 and 382 from skipping <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dio&sektion=4&arch=hp300&format=html">dio(4/HP300)</a> frame buffer select codes.
<li>Updated <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xterm&sektion=1&format=html">xterm(1)</a> to version 271.
<!-- 2011/08/17 -->
<li>Set the PSL_O bit on hppa64, like it's done for 64-bit capable CPUs on hppa.
<li>Fixed a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd&sektion=8&format=html">smtpd(8)</a> runner_remove_envelope().
<li>Prevent hppa64 locore.S from setting the PSL_S bit.
<li>Moved ramqueue_host pointer from ramqueue_envelope to ramqueue_message. This allows to save one pointer from each envelope stored in ram while still allowing O(1) host lookups by ramqueue_envelope.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd&sektion=8&format=html">smtpd(8)</a> know how to remove th new ramqueue structure.
<li>Improved <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd&sektion=8&format=html">smtpd(8)</a> rescheduling from O(n) to O(log n) with functions working on the new ramqueue structure.
<li>Added assembler implementation of the GCM mode using the Carry-less Multiplication (CLMUL) instruction found in the new Intel and future AMD CPUs for amd64.
<li>Added support for Synaptics touchpad in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsmouse&sektion=4&format=html">wsmouse(4)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1&format=html">pkg_add(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&sektion=1&format=html">pkg_delete(1)</a> syslog their activity by default.
<li>Make sure the installer set two rtsol <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8&format=html">sysctl(8)</a>s, not just the last one.
<!-- 2011/08/16 -->
</ul>
<p>

This list mentions mostly platform-independent changes.  For a list of changes
made in a particular platform, please check the page for that platform.  If you
find them not listed there, the changes are either (1) not being documented or
(2) are documented here.<br><br>

<hr>
<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>.
<a href="plus50.html">5.0</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="back.gif" border=0 alt="OpenBSD"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus.html,v 1.1200 2011/11/05 16:25:32 jj Exp $</small>

</body>
</html>
