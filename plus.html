<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD-current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD-current changes">
<meta name="keywords" content="openbsd,current,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2002 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">Changes made between OpenBSD 3.3 and OpenBSD-current</font></h2>
<hr>

<p>
This is a partial list of the major machine-independent changes
(i.e., these are the changes people ask about most often).  Port
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
Changes to the <a href="ports.html">ports</a> collection are documented
<a href="portsplus/index.html">here</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>.
<br>
</h3>

<p>
<h3><font color="#0000e0">We are working on OpenBSD-current.</font></h3><p>
The following list sums up (almost) all the changes made up to May 25.
<p>

<ul>
<!-- ^ 20030526 -->
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm&amp;sektion=1">xdm(1)</a>'s XDMCP queries (XFree86 bug <a href="http://bugs.xfree86.org/cgi-bin/bugzilla/show_bug.cgi?id=277">#277</a>.)
<li>Unbreak <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> binat rules after recent netmask check changes.
<!-- ^ 20030525 -->
<li>Improve <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a>'s netmask validity check.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> properly free buffers and initialise pointers when working on tables.
<li>Push <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> syslog output through <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strnvis&amp;sektion=3">strnvis(3)</a> first.
<!-- ^ 20030524 -->
<li>Fix an fdset leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a>.
<!-- ^ 20030523 -->
<li>Remove unsafe <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sprintf&amp;sektion=9&amp;manpath=OpenBSD+3.3">sprintf(9)</a> and vsprintf() functions from the kernel.
<!-- ^ 20030522 -->
<li>Ignore media changes for the first command issued to an <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sd&amp;sektion=4">sd(4)</a> device. See the <a href="http://helicon/cgi-bin/cvsweb/src/sys/scsi/sd.c#rev1.61">checkin comment</a> for details.
<li>Match kernel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vprintf&amp;sektion=9">vprintf(9)</a> prototype to that of userland.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getconf&amp;sektion=1">getconf(1)</a> return _POSIX_PATH_MAX instead of _POSIX_PIPE_MAX when asked for the former.
<!-- ^ 20030521 -->
<li>Now that kernels are built with propolice, build modules with it too.
<li>New hardware monitoring sensors driver <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=it&amp;sektion=4">it(4)</a>.
<li>Fix endianness problems in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&amp;sektion=4">dc(4)</a> that caused multicast reception to fail when using Centaur chips.
<li>Add a missing initialisation in altq HFSC.
<li>Add read-only NTFS support, ported from NetBSD. Not enabled in GENERIC.
<li>Add a flag to reverse the stereo on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=auich&amp;sektion=4">auich(4)</a>.
<!-- ^ 20030520 -->
<li>Limit the return value of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nice&amp;sektion=3">nice(3)</a> to -NZERO &le; nice &le; NZERO, where NZERO=20.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> fail hard when fed invalid hostnames and netmasks.
<li>Many games fixes from NetBSD.
<li>Allow the i386 and hppa bootloaders to skip the interactive portion altogether.
<li>Fix a badly broken switch statement affecting SO_DEBUG in tcp_input.c.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpr&amp;sektion=1">lpr(1)</a> from checking if the printed file is an executable. Leave this to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpd&amp;sektion=8">lpd(8)</a> filters.
<li>Use a decay filter to get better altq throughput statistics out of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a>.
<!-- ^ 20030519 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a>'s do_log(), use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslog_r&amp;sektion=3">syslog_r(3)</a> in code that can be called from a signal handler.
<li>Severely restrict the paths that privsep <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> can read from and write to.
<li>Use sockaddr_storage instead of sockaddr in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> to fix interface rescanning.
<li>Keep X.509 private keys only in the privileged part of privsep <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>.
<li>When using the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> SYN proxy, make sure ACKs are sent with the correct window size.
<li>Wait longer for slow USB devices to be ready for attachment.
<!-- ^ 20030518 -->
<li>Don't build libperl in the libraries pass of 'make build', as we want Perl's configure to pick up details of the libraries that the build may be changing. Another leapfrog-in-waiting.
<li>Add regen target in libkrb5 to remove (again) the dependency on an up-to-date asn1_compile.
<li>Complain more consistently about a missing 80-wire IDE cable (for UDMA mode &gt; 2.)
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&amp;sektion=8">syslogd(8)</a> don't use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&amp;sektion=3">strlcpy(3)</a> when printing strings out of struct utmp, since those strings aren't null terminated.
<li>Don't ARP for our IP address aliases, treat them as local.
<li>Merge in a number of USB SCSI device updates from NetBSD.
<li>Add experimental support for aes-ctr <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> ciphers.
<li>Apply some of the USB SCSI improvements to the FireWire code as well.
<li>Add string length bounds to an <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sscanf&amp;sektion=3">sscanf(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a>'s rhosts auth code.
<li>Pull in a fix for directory creation under <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&amp;sektion=1">systrace(1)</a>.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> rdr rules with address pools using bitmask and source-hash address selection.
<li>Allow inverse matching of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> tags.
<li>Fix media handling for Intel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&amp;sektion=4">dc(4)</a> devices.
<!-- ^ 20030517 -->
<li>Use the right buffer in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>'s connection handler.
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mmap&amp;sektion=2">mmap(2)</a> instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malloc&amp;sektion=3">malloc(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vfprintf&amp;sektion=3">vfprintf(3)</a> when more memory is needed to store arguments. See the <a href="http://helicon/cgi-bin/cvsweb/src/lib/libc/stdio/vfprintf.c#rev1.19">checkin comment</a> for why.
<li>New Renegotiate-on-HUP option for the [general] section of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&amp;sektion=5">isakmpd.conf(5)</a> will cause all Phase 2 SAs to be renegotiated.
<li>Fix a couple of signedness nits in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">ksh(1)</a>.
<li>Improvements to USB SCSI support.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a>'s up and down cursor movement.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">ksh(1)</a> use the libc <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dup2&amp;sektion=2">dup2(2)</a> instead of its own.
<li>Fare thee well, Kerberos IV.
<li>Another big-bucks firewall feature performed by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>: TCP SYN proxy, enabled with 'synproxy state' (this implies modulate state.)
<li>New AddressFamily option for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> that works like the -4 and -6 command line options (portable OpenSSH <a href="http://bugzilla.mindrot.org/show_bug.cgi?id=534">bug 534</a>.)
<li>Allow address comparison in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&amp;sektion=4">wi(4)</a> to work on sparc64.
<li>Prevent a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd-setup&amp;sektion=8">spamd-setup(8)</a> crash with a config file consisting of only invalid input.
<!-- ^ 20030516 -->
<li>Don't assume that rt-&gt;rt_ifp is valid in IPv6 neighbour discovery.
<li>Add new ConnectTimeout option to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a>.
<li>Disable Kerberos options to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> programs if Kerberos isn't compiled in, and warn if they're used.
<li>Have 'ssh -V' print the OpenSSL version properly, instead of trying to %s on a long. 
<li>Repair IPsec forwarding for IPv6, fixing PR#3231.
<li>Fix a hang in libwrap when the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hosts_access&amp;sektion=5">hosts_access(5)</a> file has a line containing &gt; 2048 characters. (NetBSD pr#15025.)
<li>Add multi-column output to the ls command of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp&amp;sektion=1">sftp(1)</a>.
<li>Wash untrusted input to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mail&amp;sektion=1">mail(1)</a> through <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vis&amp;sektion=3">vis(3)</a> before display.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>, don't store the private key in data structures we pass around a lot.
<li>Fix a missing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=freerrset&amp;sektion=3">freerrset(3)</a> in new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> dnsfp code.
<li>New <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fmt_scaled&amp;sektion=3">fmt_scaled(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scan_scaled&amp;sektion=3">scan_scaled(3)</a> functions in libutil, for writing and reading numbers with human-readable scales.
<li>Like for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8">sysctl(8)</a>, add a -q option to shut <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mixerctl&amp;sektion=1">mixerctl(1)</a>'s -w option up.
<li>Preliminary privilege separation support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>, not enabled by default for now.
<li>Fix deregistration of per-authentication method handlers in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=faithd&amp;sektion=8">faithd(8)</a> specify IPPROTO_TCP explicitly in anticipation of a day when <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getaddrinfo&amp;sektion=3">getaddrinfo(3)</a> supports sctp.
<!-- ^ 20030515 -->
<li>Prepare to move all KerberosV libraries to /usr/lib.
<li>More TCP scrubbing: Modulate TCP timestamps to frustrate NAT detection and prevent remote uptime guesses. New scrub option 'reassemble tcp'.
<li>Kill more unwanted <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=le&amp;sektion=4&arch=i386">le(4)</a> 'lost carrier' moans.
<li>Remove the rather short-lived kernel option LONGRUN, it's now standard except SMALL_KERNEL is defined.
<li>Enable <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> tagging support for rdr and binat rules.
<li>Add _isakmpd user and group for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> privsep.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> clients to send a BREAK to the remote server if it supports it (SSHv2 only.)
<li>Add _kdc and _kadmin users and groups for the respective KerberosV <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kdc&amp;sektion=8">kdc(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kadmind&amp;sektion=8">kadmind(8)</a> daemons.
<li>On i386, support Transmeta LongRun power management (kernel option LONGRUN, enabled by default.)
<li>Add a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> tag for each rule that matches, not just the last one.
<li>Remove gated stuff from /etc/rc and /etc/rc.conf.
<li>Add experimental support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> host key fingerprint verification using DNS records (dnsfp.) Not built by default. See src/usr.bin/ssh/README.dns for details and build instructions.
<li>Unbreak <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malloc&amp;sektion=3">malloc(3)</a> map_pages() failure test on 64-bit architectures.
<li>Back out many recent <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> changes until they're working right.
<li>Disable KerberosIV support in XFree.
<li>Make sure <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> privsep children die when the monitor parent goes away (OpenSSH <a href="http://bugzilla.mindrot.org/show_bug.cgi?id=560">bug 560</a>.)
<li>Upgrade <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflogd&amp;sektion=8">pflogd(8)</a> to use the new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&amp;sektion=4">bpf(4)</a> link type too.
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a> and libpcap about the new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflog&amp;sektion=4">pflog(4)</a> link type in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&amp;sektion=4">bpf(4)</a>.
<li>Upgrade <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&amp;sektion=4">bpf(4)</a> support for the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflog&amp;sektion=4">pflog(4)</a> link type to the 'official' and more extensible version from the <a href="http://www.tcpdump.org/">libpcap</a> people.
<li>Start stripping out KerberosIV support from programs.
<li>When handling a numeric nodename in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getaddrinfo&amp;sektion=3">getaddrinfo(3)</a>, set the canonical hostname to the numeric address as per <a href="http://www.ietf.org/rfc/rfc3493.txt">RFC3493</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vis&amp;sektion=3">vis(3)</a>'s VIS_SAFE behaviour match the manpage w.r.t <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isgraph&amp;sektion=3">isgraph(3)</a>.
<li>Allow tags to be specified for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> block rules (which aren't allowed to keep state.)
<li>Allow the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5">pf.conf(5)</a> scrub keyword to take a protocol specifier again.
<li>Remove KerberosIV support from KerberosV code.
<li>Add packet tag support for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> nat rules.
<li>Correct a string length problem and a missing null init in libreadline.
<li>Add kerberos-over-ssh2 support to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a>.
<li>Reapply the move of Ethernet definitions to &lt;net/ethertypes.h&gt;, but this time have &lt;netinet/if_ether.h&gt; read them in for compatibility reasons.
<li>New -q flag for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8">sysctl(8)</a> to suppress output from the -w option.
<li>Fix a circular dependency by removing libtelnet, instead compile the code directly into <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=telnet&amp;sektion=1">telnet(1)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=telnetd&amp;sektion=8">telnetd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tn3270&amp;sektion=1">tn3270(1)</a> from files in libexec/telnetd.
<li>Move contents of libkafs into libkrb5, leave libkafs as an empty dummy library.
<li>Fix a use-after-free in the new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> tagging code in the kernel.
<li>Enable the increasingly popular <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=em&amp;sektion=4">em(4)</a> driver by default on i386 RAMDISK* kernels.
<li>Sync <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdist&amp;sektion=1">rdist(1)</a> with freerdist version 0.92, minus the compress option.
<li>Don't build KerberosIV programs. Libraries still built for the moment.
<li>Move blktochr() and chrtoblk() into kernel MI code.
<li>Add [bc]devsw_lookup() kernel convenience functions.
<!-- ^ 20030514 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> make sure packet tagging is only used on stateful filter rules.
<li>Add NO_PROPOLICE kernel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a> option to build the kernel without the stack protector. Handy for install media.
<li>Fix a string length off-by-one in libreadline.
<li>Add userland portion of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> packet tagging support.
<li>Disable afs until it can be made to work sans KerberosIV.
<li>Force global 'time' structure to be quad_t aligned, unbreaking sparc <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=microtime&amp;sektion=9">microtime(9)</a> and possibly other things too.
<li>Add support in kernel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> for tagging packets, and filtering based on those tags.
<li>New <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mbuf&amp;sektion=9">mbuf(9)</a> tag PACKET_TAG_PF_TAG.
<li>Make sure <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lndir&amp;sektion=1">lndir(1)</a> doesn't try to use -1 as an array index when reading a directory.
<li>On ELF architectures, support the blocking of thread switches during non-thread-safe dynamic loader operations.
<li>Sync ELF identification indexes with the <a href="http://www.caldera.com/developers/gabi/2000-07-17/ch4.eheader.html">System V ABI</a> specs.
<li>Stop AM7990 (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=le&amp;sektion=4&arch=i386">le(4)</a>) devices emitting 'lost carrier' messages.
<li>Back out &lt;netinet/if_ether.h&gt; changes after they caused userland meltdown. 
<li>Add propolice stack-smash protector support to the kernel, and build the kernel using it on architectures that support propolice.
<li>Re-enable NULLFS, UMAPFS and UNION in the GENERIC kernel.
<li>Move Ethernet definitions from &lt;netinet/if_ether.h&gt; to new &lt;net/ethertypes.h&gt;, like NetBSD.
<li>Disable Kerberos V-to-IV conversion in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login_krb5&amp;sektion=8">login_krb5(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login_krb5-or-pwd&amp;sektion=8">login_krb5-or-pwd(8)</a>
<li>Stop building <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login_krb4&amp;sektion=8">login_krb4(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login_krb4-or-pwd&amp;sektion=8">login_krb4-or-pwd(8)</a>.
<li>Remove references to krb4 from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5">login.conf(5)</a>.
<li>Changes to the way protection fault traps are handled on i386, see the <a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/i386/i386/machdep.c#rev1.229">checkin comment</a> for details and Intel abuse.
<li>Merge in <a href="http://www.pdc.kth.se/heimdal/">Heimdal</a> KerberosV 0.6.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=user&amp;sektion=8">user(8)</a> from accepting usernames beginning with a slash.
<li>Don't report unsupported <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scsi&amp;sektion=4">scsi(4)</a> devices as offline.
<!-- ^ 20030513 -->
<li>When testing TCP window sizes in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>, don't apply the window scaling factor for SYN packets. Do, however, apply the scaling factor when testing ACKs.
<li>Fix a bug in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a> that was causing recursive dependency searches to fail.
<li>More <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> definitions for NAT-T, IKEv2 and EAP.
<li>Locking and other fixes to unionfs.
<li>Add BLOCK_SIZE attribute to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>, and rename AES ESP transform to AES_128_CBC.
<li>Add UDP encapsulation type definitions (not code) to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> with an eye to future NAT-T support.
<li>Adapt nullfs and umapfs to use common code from genfs.
<li>New genfs code for layered filesystem support.
<li>Wash print queue names through <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vis&amp;sektion=3">vis(3)</a> before output.
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ctags&amp;sektion=1">ctags(1)</a> to understand '//' comments, ignore declarations of function types, and accept __attribute__. From NetBSD.
<li>Correctly check for empty output from an <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=at&amp;sektion=1">at(1)</a> command (PR#3252.)
<li>New <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ddb&amp;sektion=4">ddb(4)</a> command 'show proc' which, er, shows process information.
<li>Sync <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=popa3d&amp;sektion=8">popa3d(8)</a> to version 0.6.2.
<li>Improvements and bugfixes to the installer's handing of ftp and http downloads.
<li>Reorder <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> IPv6 address comparison to check the least-significant bits first, since these are more likely to differ.
<li>Make sure the state search trees are properly in initialised when attaching <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>.
<li>Remove a number of KerberosV files that are not used by OpenBSD.
<li>When doing pubkey authentication in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a>, prefer agent-stored keys that are referred to in the config file. This can reduce the likelihood of the server disconnecting before it gets to a valid key when the agent is storing many keys.
<li>Start preparations to remove KerberosIV.
<li>Remove a number of redundant declarations in games/. From NetBSD.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=file&amp;sektion=1">file(1)</a> now recognises Ogg Vorbis audio files.
<li>Use the asn1_compile in src/usr.bin instead of that in src/kerberosV.
<li>More string fixes to libreadline, this time with no ABI changes.
<li>Fix a sign overflow in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1">csh(1)</a>.
<li>Merge in OpenSSL 0.9.7b (without IDEA, MDC2 and RC5.)
<li>Implement adaptive state table timeouts in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>, reducing the state timeout value inversely with the number of states present.
<!-- ^ 20030512 -->
<li>Break asn1_compile out from KerberosV into src/usr.bin.
<li>First phase of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> stateful TCP scrubbing: Frustrate TTL-based NIDS evasion by determining on the fly the highest TTL, and enforcing it as the minimim TTL for all subsequent packets.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a>, Do the xstrdup() of the remote_name inside channel_new() instead of making the caller do it.
<li>Start to fix the annoying asn1_compile leapfrog problem when upgrading KerberosV by putting the generated files into the tree.
<li>Make sure a hole at the end of a sparse file created by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=install&amp;sektion=1">install(1)</a> actually gets written on all filesystems.
<li>The installer now accepts absolutely absolute paths (relative to the installer's root directory, not the virtual mountpoint) for local sets.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;sektion=1">ssh-keygen(1)</a>'s -e option fail gracefully if the user specifies an SSH1 key. (NetBSD pr#20550.)
<li>Avoid offence to Klingons by spelling 'Kang' correctly. <!-- No, really. -->
<li>Merge in <a href="http://www.pdc.kth.se/heimdal/">Heimdal</a> KerberosV 0.6rc1.
<li>Since mfs doesn't try to force an unmount on receipt of a signal, there's no need to try to fix up processes' working dirs - the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=unmount&amp;sektion=2">unmount(2)</a> will fail.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>'s handling of the IPV6_ADDR ID-type.
<li>Remove an unnecessary <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntohs&amp;sektion=3">ntohs(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a>, unbreaking 'nat ... -&gt; $if port n' rules.
<!-- ^ 20030511 -->
<li>The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> return keyword now generates an ICMP unreachable message for all protocols other than TCP (rather than just UDP and ICMP.)
<li>Have the compiler generate warnings if unsafe string functions are used in the kernel.
<li>Back out libreadline string fixes until static build works.
<li>Consign <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=swapon&amp;sektion=2&amp;manpath=OpenBSD+2.5">swapon(2)</a> to COMPAT_25 in favour of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=swapctl&amp;sektion=2">swapctl(2)</a>.
<li>Clear unused and/or invalid globals in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8">authpf(8)</a> to prevent confusion.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8">authpf(8)</a> to spot (and reject) the new 'load...from' syntax.
<li>Support loading of anchors from the main <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> ruleset with new syntax 'load anchorname:rulesetname from filename'.
<!-- ^ 20030510 -->
<li>Allow for the null-terminator when calling <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&amp;sektion=3">strlcpy(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcvt&amp;sektion=3">gcvt(3)</a>.
<li>Remove a number of unnecessary executable mappings in the kernel, e.g. framebuffers and page tables don't really need to be x.
<!-- ^ 20030509 -->
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sha2&amp;sektion=3">sha2(3)</a> digest support to libc.
<li>Clear libc digest buffers allocated on the stack with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=memset&amp;sektion=3">memset(3)</a> before returning.
<li>Move <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setrgid&amp;sektion=3">setrgid(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setruid&amp;sektion=3">setruid(3)</a> from libc to libcompat.
<li>Move <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=insque&amp;sektion=3">insque(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lsearch&amp;sektion=3">lsearch(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=remque&amp;sektion=3">remque(3)</a> from libcompat to libc, since they are now POSIX functions.
<li>Don't leak socket fds in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> queue code, otherwise we can hit the file limit if many queues are defined.
<li>Fix a number of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=readlink&amp;sektion=2">readlink(2)</a> calls that forgot to leave space for the null-terminator that needs to be added manually.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> to 1.6.7p5.
<li>Add support for the userland portions of XFree86 <a href="http://dri.sourceforge.net/">DRI</a>. Not yet enabled by default.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1">csh(1)</a>, null-terminate the string returned by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=readlink&amp;sektion=2">readlink(2)</a> before passing it on.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mmap&amp;sektion=2">mmap(2)</a>'ing of the dynamic linker hints file when the file size exceeds one page.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a> from inlining <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strcpy&amp;sektion=3">strcpy(3)</a> so it can be more easily spotted in object files.
<!-- ^ 20030508 -->
<li>Add missing device name parameter when printing a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nofn&amp;sektion=4">nofn(4)</a> RNG underflow error.
<li>Fix a bad sizeof() in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xedit&amp;sektion=1">xedit(1)</a>.
<li>Fix some <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sscanf&amp;sektion=3">sscanf(3)</a> off-by-ones in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=makepsres&amp;sektion=1">makepsres(1)</a>.
<li>Remove a string memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld&amp;sektion=1">ld(1)</a>.
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xclock&amp;sektion=1">xclock(1)</a>'s default behaviour back to -norender.
<li>Fix a few instances of sizeof(pointer instead of object) in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=expand&amp;sektion=1">expand(1)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lbxproxy&amp;sektion=1">lbxproxy(1)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skeyinit&amp;sektion=1">skeyinit(1)</a> and in the Kerberos IV and BIND libraries.
<li>Plug a memory leak in the kernel ELF loader.
<li>In the installer, give the -h option to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a> so symlinks on the existing system are honoured.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lynx&amp;sektion=1">lynx(1)</a> try active FTP if passive mode fails. This was missed out in the recent upgrade.
<!-- ^ 20030507 -->
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdist&amp;sektion=1">rdist(1)</a> use POSIX <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=regex&amp;sektion=3">regex(3)</a>.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdist&amp;sektion=1">rdist(1)</a> to cope with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcmdsh&amp;sektion=3">rcmdsh(3)</a>'s new ability to handle command line options.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> rdr and binat rules work again on protocols other than TCP, UDP and ICMP.
<li>After a forced unmount, try to change process back into real directories now that namei() won't do lookups under the old mountpoint.
<li>Stop namei() doing lookups on unmounted volumes, prevents crashes with forced unmounts. From NetBSD.
<li>Don't use M_WAITOK to sleep on failures when allocating hashtables for IP protocols (in_pcbinit()). Fail and panic.
<li>Pretty up <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8">sysctl(8)</a> display units for hw.sensors.
<li>Only do <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setusercontext&amp;sektion=3">setusercontext(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skeyaudit&amp;sektion=1">skeyaudit(1)</a> when running as root.
<li>Don't use string functions on non-strings in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sd&amp;sektion=4">sd(4)</a>.
<li>Kill a small <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=asprintf&amp;sektion=3">asprintf(3)</a> memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skeyinfo&amp;sektion=1">skeyinfo(1)</a>, convert the username to seven-bit before doing the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skeylookup&amp;sektion=3">skeylookup(3)</a>.
<li>Make the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsirand&amp;sektion=8">fsirand(8)</a> functionality built into <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;sektion=8">newfs(8)</a> non-optional.
<!-- ^ 20030506 -->
<li>Allow command-line arguments in rshprog passed to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcmdsh&amp;sektion=3">rcmdsh(3)</a>.
<li>Add backquote to the list of characters escaped in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">ksh(1)</a>'s vi-{esc,tab}complete mode.
<li>Fix a couple of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sscanf&amp;sektion=3">sscanf(3)</a> off-by-ones in afs and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=makeinfo&amp;sektion=1">makeinfo(1)</a>.
<li>Write the correct amount of data when disconnecting <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tip&amp;sektion=1">tip(1)</a> on biz22.
<li>Another memory layout change on i386 to allow a larger MAXDSIZ (see the tech@ <a href="http://marc.theaimsgroup.com/?l=openbsd-tech&m=105216246825100&w=2">archive</a> for details.)
<li>Add a mail mode to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a> that does proper line wrapping, and add the '-f' command line option to set the mode.
<li>Properly restore the syncer vnode if <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=unmount&amp;sektion=2">unmount(2)</a> fails.
<!-- ^ 20030505 -->
<li>Use the right buffer size for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getcwd&amp;sektion=3">getcwd(3)</a> to avoid unnecessary truncation in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=at&amp;sektion=1">at(1)</a>.
<li>Replace local (and wrong) basename logic in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ln&amp;sektion=1">ln(1)</a> with a call to the real <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=basename&amp;sektion=3">basename(3)</a>.
<li>Don't leak an mbuf when dropping non-ARPHRD_ETHER arp packets.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a> <!-- XXX 3.3-stable -->
<!-- ^ 20030504 -->
<li>Compatibility improvements to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ossaudio&amp;sektion=3">ossaudio(3)</a>, mostly from NetBSD.
<li>Ditch <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;sektion=8">newfs(8)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_mfs&amp;sektion=8">mount_mfs(8)</a>'s homespun malloc() in favour of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mmap&amp;sektion=2">mmap(2)</a>.
<li>Prevent a couple of use-after-frees in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a>.
<li>Defensively zero the m_flags field in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mbuf&amp;sektion=9">mbuf(9)</a> structures allocated on the stack.
<!-- ^ 20030503 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=what&amp;sektion=1">what(1)</a> more POSIX-compliant.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skeyaudit&amp;sektion=1">skeyaudit(1)</a> leaking file descriptors in -a mode, and be more paranoid about stdin, stdout and stderr.
<li>Add Doug Gwyn's portable <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=alloca&amp;sektion=3">alloca(3)</a> on platforms for which no assembler version yet exists, and use instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a>'s alloca().
<li>Greatly improved SIS chipset support in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&amp;sektion=4">pciide(4)</a>.
<!-- ^ 20030502 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=eso&amp;sektion=4">eso(4)</a> work on sparc64 and (probably) macppc.
<li>A number of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnode&amp;sektion=9">vnode(9)</a> fixes and additions. See the <a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/kern/vfs_subr.c#rev1.90">checkin comment</a> for details.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lynx&amp;sektion=1">lynx(1)</a> to 2.8.4release, patchset 1d, including IPv6 support.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> antispoof rules to have labels.
<!-- ^ 20030501 -->
<li>Keep trying to unbreak <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apachectl&amp;sektion=8">apachectl(8)</a> restarts for shared modules when running under the chroot.
<li>Improve forward compatiblity of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck_ffs&amp;sektion=8">fsck_ffs(8)</a> by comparing only what we understand instead of trying to ignore what we don't.
<li>Make the newly deprecated omsync() work under NetBSD emulation.
<li>Several <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strvis&amp;sektion=3">strvis(3)</a> -&gt; <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strnvis&amp;sektion=3">strnvis(3)</a> changes, all part of the continuing Battle for Safe String Functions.
<li>Fix some pthreads signal bugs that were causing MySQL to crash (PR#3179, PR#3238.)<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a> <!-- XXX 3.3-stable -->
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> tables to be loaded into anchors. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> table options except show and flush now honour -a.
<!-- ^ 20030430 -->
<li>Have the dynamic linker stub functions in libc return -1 if called from a statically linked program. 
<li>Only build shared libXv if the target arch supports shared libraries.
<li>Consign the omsync() system call to COMPAT_25 obscurity.
<li>Fix parsing of the noac option to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_nfs&amp;sektion=8">mount_nfs(8)</a>.
<li>In netinet/tcp_input.c, correct a long-standing typo made when applying a deadlock-avoidance bug fix (TCP/IP Illustrated volume 2 fig. 28.30.)
<li>Fix a crasher in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lkm&amp;sektion=4">lkm(4)</a>, tripped when loading a module twice.
<!-- ^ 20030429 -->
<li>Make ELF <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dlfcn&amp;sektion=3">dlfcn(3)</a> calls thread-safe.
<li>Add /usr/local/lib/X11/fonts to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fontconfig&amp;sektion=3">fontconfig(3)</a>'s search list, to help ports.
<li>Add some missing X server key definitions.
<li>Re-introduce the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a>-has-<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mmap&amp;sektion=2">mmap(2)</a>'s-signature change, once again renaming the old syscall to omquery().
<li>Only close the keyfile once in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skeyaudit&amp;sektion=1">skeyaudit(1)</a> -a mode.
<li>Do a return from main() instead of an <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=exit&amp;sektion=3">exit(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5&amp;sektion=1">md5(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd-setup&amp;sektion=8">spamd-setup(8)</a>,
<li>Fix some more unbounded <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sscanf&amp;sektion=3">sscanf(3)</a> calls in KerberosIV, still more to come.
<li>Lock earlier when doing vnode ops in procfs to avoid a possible race condition.
<!-- ^ 20030428 -->
<li>Remove a potential double-free in the XFree wsfb driver.
<li>Prepare <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> table structures for anchor support.
<li>Much string cleanup in sys/dev.
<li>Fix the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> fifo 'C set' command (PR#3148.)
<!-- ^ 20030427 -->
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strdup&amp;sektion=3">strdup(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=asprintf&amp;sektion=3">asprintf(3)</a> to eliminate some string length guesswork in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rpcgen&amp;sektion=1">rpcgen(1)</a>.
<li>Allocate enough space for a *printf() %u in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rpc.yppasswdd&amp;sektion=8">rpc.yppasswdd(8)</a>.
<li>Correct libXp's shared library dependencies
<li>Fix fat32 filesystem corruption when renaming directories.
<!-- ^ 20030426 -->
<li>New <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lm&amp;sektion=4">lm(4)</a> (National Semiconductor LM78, LM79 and compatible) and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=viaenv&amp;sektion=4">viaenv(4)</a> (VT82C686A South Bridge) hardware monitor drivers, adapted from NetBSD to use the new sysctl hw.sensor interface.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=funopen&amp;sektion=3">funopen(3)</a>'s declaration match its prototype (PR#3236.)
<li>Back out the recent <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a>-uses-mmap() API change.
<li>Add new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=3">sysctl(3)</a> node hw.sensors for, er, hardware monitoring sensors.
<li>Don't assume that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=asprintf&amp;sektion=3">asprintf(3)</a> failures won't clobber the tempfile name in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mktemp&amp;sektion=1">mktemp(1)</a>.
<li>In the IPv4 case of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inet_net_pton&amp;sektion=3">inet_net_pton(3)</a>, infer the netmask the same way for all address classes (i.e. don't assume multicast networks are always */4.)
<li>Be more portable and check the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=asprintf&amp;sektion=3">asprintf(3)</a> return value against -1 in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a>.
<li>Add size bounds to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sscanf&amp;sektion=3">sscanf(3)</a> strings in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=edquota&amp;sektion=8">edquota(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tn3270&amp;sektion=1">tn3270(1)</a>.
<li>Match <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a>'s function signature to that of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mmap&amp;sektion=2">mmap(2)</a>.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> nat proxy port allocation for manually specified ranges.
<li>If one is given, properly copy the second port of a nat proxy spec in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a>.
<!-- ^ 20030425 -->
<li>Fix a bad <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&amp;sektion=3">strlcpy(3)</a> bound in the AFS library (PR#3228.)
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=asprintf&amp;sektion=3">asprintf(3)</a> to fix some buffer length problems in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pdisk&amp;sektion=8&amp;arch=mac68k">pdisk(8/MAC68K)</a>
<li>When handling the packet size option in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute&amp;sektion=8">traceroute(8)</a>, bounds check the right variable.
<li>Properly detect EOF when generating policy interactively.
<!-- ^ 20030424 -->
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflogd&amp;sektion=8">pflogd(8)</a> generating syslog messages on startup.
<li>Swap a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strchr&amp;sektion=3">strchr(3)</a> for a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strrchr&amp;sektion=3">strrchr(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5&amp;sektion=1">md5(1)</a>.
<li>When upgrading, treat the /altroot filesystem like a 'noauto' filesystem and omit it from the upgrade fstab.
<!-- ^ 20030423 -->
<li>Do a proper bounds check when reading in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lynx&amp;sektion=1">lynx(1)</a> news server name from a file.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a>'s glob now does tilde and brace expansion as well.
<!-- ^ 20030422 -->
<li>On <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gre&amp;sektion=4">gre(4)</a> IP input, use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=m_pullup&amp;sektion=9">m_pullup(9)</a> instead of assuming the header is in the first mbuf's data region.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1">make(1)</a> stop parsing command line arguments after a '--'.
<li>Better bounds checks when expanding curly braces in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1">make(1)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a>, don't set the object load_size field to a negative value because this is likely to be wrong.
<!-- ^ 20030421 -->
<li>Copy the null at the end of the name when adding a realm in Kerberos V.
<!-- ^ 20030420 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8">authpf(8)</a> die the way it should when authpf.conf is missing (PR#3217.)
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ubsec&amp;sektion=4">ubsec(4)</a> output statistics.
<li>Sync <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> with its CVS and bump the version to 1.6.7p4.
<li>Some typedef perfectionism in libwrap.
<li>String cleanup and extra paranoia in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rd&amp;sektion=4">rd(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnd&amp;sektion=4">vnd(4)</a>.
<li>The string cleanup drive continues.
<li>Add support for the Davicom DM9009 chip to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&amp;sektion=4">dc(4)</a>.
<!-- ^ 20030419 -->
<li>Help <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a> further by making <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a> return EINVAL (instead of ENOMEM) if MAP_FIXED was requested but is unavailable.
<li>New -x option for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_msdos&amp;sektion=8">mount_msdos(8)</a> to automagically make directories executable if they're readable.
<li>Unbreak Emacs 21 by fixing a problem with the new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a> part of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a>.
<!-- ^ 20030418 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tun&amp;sektion=4">tun(4)</a> work when only IPv6 endpoints are specified.
<li>Add 4.3BSD's more command for use on some floppies instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a>. More is less.
<li>Change some return values in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&amp;sektion=8">cron(8)</a> from char to int.
<!-- ^ 20030417 -->
<li>Changes to support the new <a href="http://marc.theaimsgroup.com/?l=openbsd-misc&m=105056000801065&w=2">i386 W^X</a> scheme.
<li><a href="http://marc.theaimsgroup.com/?l=openbsd-misc&m=105055555830978&w=2">Move</a> i386 to ELF, a binary upgrade is required for now.
<li>Use the new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a> syscall in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a>, i386 only for now.
<li>Avoid teeth-gnashing delays by making the installer use 'route -n show' instead of 'route show'.
<li>In the kernel ELF loader, use the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uvm&amp;sektion=9">uvm(9)</a> to make sure that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a> doesn't overwrite an area that's already in use.
<li>Fix a buffer overflow that was causing a crash in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a> (PR#3090.)
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apachectl&amp;sektion=8">apachectl(8)</a> now honours $httpd_flags from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;sektion=8">rc.conf(8)</a>.
<li>Remove a race condition in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_mfs&amp;sektion=8">mount_mfs(8)</a>.
<!-- ^ 20030416 -->
<li>Fix some allocation bugs in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a>.
<li>In the kernel's standalone ISO9660 driver, collapse extra slashes in the pathname. This allows files to be loaded from the root of a cd.
<li>Uncomment the line that unloads <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">httpd(8)</a> shared modules on a server shutdown or restart.
<li>Many string fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=named&amp;sektion=8">named(8)</a>, more to come.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> can now display basic HFSC stats.
<li>Much cleanup in elf2ecoff(1) (not installed by default.)
<li>Allocate the right <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getaddrinfo&amp;sektion=3">getaddrinfo(3)</a> buffer size in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rip6query&amp;sektion=8">rip6query(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route6d&amp;sektion=8">route6d(8)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=audioctl&amp;sektion=1">audioctl(1)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=size&amp;sektion=1">size(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>, don't use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=snprintf&amp;sektion=3">snprintf(3)</a>'s return value for pointer arithmetic.
<!-- ^ 20030415 -->
<li>Back out the 'long ATAPI detection delay' fix due to problems with some devices.
<li>Add a missing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=globfree&amp;sektion=3">globfree(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp&amp;sektion=1">sftp(1)</a>.
<li>Correct a number of short space allocations for *printf() integer-to-string conversions.
<li>Fix some problems with the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm&amp;sektion=1">xdm(1)</a> OpenBSD logo, caused by the XFree86 4.3.0 merge.
<li>Don't increment the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping&amp;sektion=8">ping(8)</a> sequence number until we know the packet has been successfully queued for sending.
<li>Include the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=at&amp;sektion=1">at(1)</a> job number in the process title.
<li>Put <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a>'s help text back into a separate file, and allow a reduced-size build for the boot floppies.
<li>Stop using hardcoded SOCK_* types when creating sockets in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a>, to facilitate ssh-over-<a href="http://www.sctp.de/sctp.html">sctp</a>.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> unlink its fifo and pid file on a clean shutdown (PR#3199.)
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping&amp;sektion=8">ping(8)</a> to send zero-length packets with the -s0 option.
<li>Some <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=snprintf&amp;sektion=3">snprintf(3)</a> buffer length fixes in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>.
<!-- ^ 20030414 -->
<li>Add new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mquery&amp;sektion=2">mquery(2)</a> system call, to provide hints (especially to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld.so&amp;sektion=1">ld.so(1)</a>) on where to put memory mappings.
<li>Make sure <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&amp;sektion=1">systrace(1)</a> leaves space for the trailing null when displaying <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=open&amp;sektion=2">open(2)</a> flags.
<li>Fix bad format strings in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=extattrctl&amp;sektion=8">extattrctl(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mopd&amp;sektion=8">mopd(8)</a>.
<li>Prevent <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=timeout_add&amp;sektion=9">timeout_add(9)</a> from wrapping around on machines with a long uptime.
<li>Fix some bogus size_t values in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=grops&amp;sektion=1">grops(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a>.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a> to version 381.
<!-- ^ 20030413 -->
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> set file descriptor limits with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setrlimit&amp;sektion=2">setrlimit(2)</a>.
<li>Relax the license on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcat&amp;sektion=3">strlcat(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&amp;sektion=3">strlcpy(3)</a> to encourage their bundling with other programs.
<li>Initial support for HFSC queueing, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>-style.
<li>Back out recent 'X looks like a package' stuff.
<li>Merge in expat-1.95.4 from XFree86-current.
<li>Fix long delays when detecting ATAPI devices.
<!-- ^ 20030412 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a>'s Makefile now honours the LDSTATIC flag.
<li>Move queue ID assignment into the kernel and away from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a>, solving a bunch of problems.
<!-- ^ 20030411 -->
<li>Back out the earlier fix for PR#2230, which is a no-op since zombies aren't on the allproc list being scanned. 
<li>De-allocate bus space on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&amp;sektion=4">wi(4)</a> device failures.
<li>Only print the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=less&amp;sektion=1">less(1)</a> -d prompt if there's enough space left on the status line (PR#3189.)
<!-- ^ 20030410 -->
<li>When fixing up process root and working directories after a filesystem mount, leave zombies well alone. (PR#2230.) <!-- Yes, #2230, not #2030 as the committer said. Grr. -->
<li>Fix an off-by-one in kernel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=malloc&amp;sektion=9">malloc(9)</a> diagnostic code.
<li>Correctly initialise xkb memory in the X server.
<li>Plug some file descriptor leaks in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xman&amp;sektion=1">xman(1)</a> (PR#3186.)
<li>Fix a broken sizeof() in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a> when allocating a new sentinel_info.
<li>Demote the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> 'missing CRL dir' moan to a debug message. <!-- Someone must really hate that warning. -->
<li>The kernel pf_state structure now points to both a rule and an anchor, so states created on anchors can use rule options properly.
<li>Create the /etc/isakmpd/crls directory from 4.4BSD.dist to stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a> complaining about its absence.
<li>Strip trailing whitespace before parsing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> options (OpenSSH bug <a href="http://bugzilla.mindrot.org/show_bug.cgi?id=528">528</a>.)
<li>Disable <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a>'s Kerberos IV support.
<!-- ^ 20030409 -->
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>'s <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=select&amp;sektion=2">select(2)</a> error handling.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a> now remembers the previous 'M-x compile' command.
<li>Add a missing free() in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">httpd(8)</a>'s dbm processing.
<li>More fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=osiop&amp;sektion=4">osiop(4)</a>.
<!-- ^ 20030408 -->
<li>Change some old-style <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chown&amp;sektion=8">chown(8)</a>s (user.group) to POSIX user:group style.
<li>Fix a null deref in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=savecore&amp;sektion=8">savecore(8)</a>.
<li>Add some missing NetBSD copyright information to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ktutil&amp;sektion=8">ktutil(8)</a> work properly over the network.
<li>Improvements to string handling (not str[ln]* for once) in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adventure&amp;sektion=6">adventure(6)</a>.
<li>Add fake package information so ports can check for XF4 installation.
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">ksh(1)</a> instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1">csh(1)</a> for XFree distrib scripts.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> reject invalid ICMP types (&gt;40) and codes (&gt;255.)
<li>Fix a typo in the new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> rekeying code that was causing the wrong packet state counter to be fetched.
<!-- ^ 20030407 -->
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> to 1.6.7p3.
<li>Handle buffer length for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&amp;sektion=3">strlcpy(3)</a> properly in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kvm_mkdb&amp;sektion=8">kvm_mkdb(8)</a>.
<li>Many fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=osiop&amp;sektion=4">osiop(4)</a>.
<li>Improve (as part of string function fixes) <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sort&amp;sektion=1">sort(1)</a>'s handling of old-style + and - format specifiers.
<!-- ^ 20030406 -->
<li>Don't treat disklabel fields d_packname and d_typename as null-terminated fields when they're not.
<li>Fix a bounds-check off-by-one in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lam&amp;sektion=1">lam(1)</a>.
<li>Simplify <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a>'s parsing of CIDR masks.
<li>Add 'queue foo on $i_bar' syntax to allow <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> queue specs to apply only to specified interfaces.
<li>Add 230400 to the list of speeds supported by termios under <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_linux&amp;sektion=8">compat_linux(8)</a>.
<li>Use the default rule when a packet passes due to the implicit 'pass all' at the top of the rulebase, eliminating many NULL tests.
<li>Add a `default' <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> rule and use it to store the default timeouts.
<li>Add some shared library version updates missed in the XFree86 4.3.0 merge.
<!-- ^ 20030405 -->
<li>Many string function fixes all over the tree.
<li>Fix a bad bounds check in OpenSSL's ASN.1 parser.
<!-- ^ 20030404 -->
<li>Back out the earlier realloc() change to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a>.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sectok_fmt_fid&amp;sektion=3">sectok_fmt_fid(3)</a> to take a string length parameter, and crank libsectok's major version for the new API.
<li>With the XFree86 4.3.0 merge, add an additional definition so that ports libs end up in /usr/local/lib/X11.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> to 1.6.7p2.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=user&amp;sektion=8">user(8)</a>'s empty group test (PR#3178.)
<li>Improve PRIQ queue id assignment, so same-priority queues on different interfaces work properly.
<!-- ^ 20030403 -->
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=realloc&amp;sektion=3">realloc(3)</a> instead of leaking memory in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a>.
<li>Some cleanup in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipcomp&amp;sektion=4">ipcomp(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4">ipsec(4)</a>.
<li>Add a missing initialisation in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> (OpenSSH bug <a href="http://bugzilla.mindrot.org/show_bug.cgi?id=526">#526</a>.)
<li>When an interface doesn't support <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=altq&amp;sektion=9">altq(9)</a>, have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a> print the interface name in the error message.
<li>Add automatic <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a> rekeying in accordance with the current secsh newmodes draft, and fix some rekeying bugs.
<!-- ^ 20030402 -->
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kqueue&amp;sektion=2">kqueue(2)</a> notification of immediate-mode <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bpf&amp;sektion=4">bpf(4)</a> events (PR#3175.)
<li>Merge in XFree86 4.3.0.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a> to version 1.6.7p1, to fix some overzealous paranoia.
<li>Bump OpenSSH version to 3.6.1.<br>
    <a href="stable.html"><font color="#00b000">[Applied to stable]</font></a>
<!-- ^ 20030401 -->
<li>Fix an mbuf leak in icmp6.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a> treat empty environment variables as if they were unset.
<li>Fix some use-after-FREE when handling crypto errors in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipcomp&amp;sektion=4">ipcomp(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4">ipsec(4)</a>.
<li>Add a missing splx() in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipcomp&amp;sektion=4">ipcomp(4)</a>.
<li>Clean up and additional paranoia in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setusercontext&amp;sektion=3">setusercontext(3)</a>.
<li>Only remove a kernel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> rule structure when no states refer to it.
<!-- ^ 20030331 -->
<li>Helpfully, allow netinet/tcp_debug.c to compile when TCP_DEBUG is defined.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahc&amp;sektion=4">ahc(4)</a>'s probe of dual-channel 7899 cards.
<li>Use snprintf to construct device names in the kernel, instead of hand-rolling.
<li>Give a more consistent message when <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=1">passwd(1)</a> is aborted one way or another by the user.
<li>Begin the process of <a href="http://marc.theaimsgroup.com/?l=openbsd-misc&m=104958817430379&w=2">eradicating</a> the remaining strcpy, sprintf, and strcat calls from the tree.
<!-- ^ 20030330 -->
<li>Fix logging bustage in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>.
<li>Update <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&amp;sektion=8">sendmail(8)</a> to 8.12.9 to fix a buffer overflow in address parsing. Note that this fix went onto the OpenBSD 3.3 CDs and so is not a 3.3 erratum.
<li>More fixes to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iha&amp;sektion=4">iha(4)</a>.
<!-- ^ 20030329 -->
<li>Stop pmdb dumping core on stripped executables.
<li>Show in log output the list against which <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> matched.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a> report exactly how much of the filthy spammer's time was wasted.
<li>Add a missing <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strdup&amp;sektion=3">strdup(3)</a> error check in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pwd_mkdb&amp;sektion=8">pwd_mkdb(8)</a>.
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login_passwd&amp;sektion=8">login_passwd(8)</a> from setuid(root) to setuid(_shadow).
<li>Remove OCHIO* binary compatability hacks from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ch&amp;sektion=4">ch(4)</a>. <!-- Warned about in the checkin on 17 Oct 2002 -->
<!-- ^ 20030328 -->
<li>When retrieving the size of a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&amp;sektion=4">ccd(4)</a> device, check the device is initialised before attempting to open it.
<li>Add USER_LDT to the list of kernel <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a> controllable via <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=3">sysctl(3)</a>.
<li>Sync the SMP branch to 3.3.
<li>Improve <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iha&amp;sektion=4">iha(4)</a>'s REQUEST_SENSE handling based on hard-won experience with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=osiop&amp;sektion=4">osiop(4)</a>.
<li>Actually look for the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpr&amp;sektion=1">lpr(1)</a> -q option when calling <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getopt&amp;sektion=3">getopt(3)</a>.
<li>Fix handling of -f and -h options to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpr&amp;sektion=1">lpr(1)</a>.
<li>Improve error handling for invalid <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a> cbq and priq flags.
<li>3.3 -&gt; 3.3-current.
<!-- ^ 20030327 -->
</ul>
<p>

This list mentions mostly platform-independent changes.  For a list of changes
made in a particular platform, please check the page for that platform.  If you
find them not listed there, the changes are either (1) not being documented or
(2) are documented here.<br><br>

<hr>
<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="back.gif" border=0 alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus.html,v 1.878 2003/05/28 02:50:24 deraadt Exp $</small>

</body>
</html>
