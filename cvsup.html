<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD CVSup</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="How to get OpenBSD updates via Internet using CVSup">
<meta name="keywords" content="openbsd,cvsup,updates">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 2000 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">

<img alt="[OpenBSD]" height=30 width=141 SRC="images/smalltitle.gif">
<p>
<h2><font color=#e00000>CVSup</font><hr></h2>

<p>
<ul><h3>Table Of Contents</h3>
<li><a href="#cvsup">What is CVSup?</a>
<li><a href="#starting">Getting Started Using CVSup.</a>
<li><a href="#using">Using CVS to Update your Source Tree.</a>
<li><a href="#CVSROOT">Available CVSup Servers.</a>
</ul>
</p>
<hr>


<h3><a name="cvsup"><font color=#0000e0>What is CVSup?</font></a></h3>

<p>
<b>CVSup</b> is a software package for distributing and updating source
trees from a master CVS repository on a remote server host. The OpenBSD
sources are maintained in a CVS repository on a central development machine
in Canada.  With CVSup, OpenBSD users can easily keep their own source trees
up to date. 
</p>

<p>
<b>CVSup</b> uses the so-called pull model of updating. Under the pull
model, each client asks the server for updates, if and when they are
wanted.  The server waits passively for update requests from its clients.
Thus all updates are instigated by the client.  The server never sends
unsolicited updates.  Users must either run the <b>CVSup</b> client
manually to get an update, or they must set up a cron job to run it
automatically on a regular basis. 
</p>

<p>
The term <b>CVSup</b>, capitalized just so, refers to the entire software
package. Its main components are the client <tt>cvsup</tt> which runs on
each user's machine, and the server <tt>cvsupd</tt> which runs at each of
the OpenBSD CVSup mirror sites. 
</p>

<p>
<b>CVSup</b> is intended to be both faster and more flexible than
<b>sup</b>, CVSup's predecessor.
</p> 

<p>
The OpenBSD Project currently has four main source repositories:
</p>

<ul>
        <li><b>src</b> - Houses all source code for the OpenBSD Operating System.
        <li><b>ports</b> - Houses the <a href="./ports.html">OpenBSD Ports</a>.
        <li><b>www</b> - Houses all OpenBSD web pages. (Including this one).
        <li><b>x11</b> - Houses OpenBSD's adaptation of the
            <a href="http://www.XFree86.org/">XFree86</a> software project.
</ul>

<h3><a name="CVS"><font color=#0000e0>What is CVS?</font></a></h3>

<p>
CVS is the source code control system used to manage the OpenBSD source
tree.</a>  It is described in more detail <a href=anoncvs.html#CVS>here</a>.

<h3>
<a name="starting"><font color=#0000e0>Getting Started Using CVSup.</font></a>
</h3>

<p>
The latest version of CVSup is available at
<a href=http://www.polstra.com/projects/freeware/CVSup/>
http://www.polstra.com/projects/freeware/CVSup/</a>.
</p>

<p>
The following configuration file might be used:
</p>

<pre>
        # Defaults that apply to all the collections
        *default release=cvs
        *default delete use-rel-suffix
        *default umask=002
        *default host=cvsup.uk.OpenBSD.org
        *default base=/cvs
        *default prefix=/cvs

        # If your network link is a T1 or faster, comment out the following line.
        *default compress

        OpenBSD-all
        #OpenBSD-src
        #OpenBSD-www
        #OpenBSD-ports
        #OpenBSD-x11
</pre>

<p>
This directs cvsup to refresh all OpenBSD distributions from
<b>cvsup.uk.OpenBSD.org</b> with a umask that permits group write
permission to the local repository.
</p>

<p>
Assuming this file is saved as <tt>cvs-supfile</tt>, the
following command would be used to envoke the cvsup GUI:
<pre>
        cvsup cvs-supfile
</pre>
whereas for batch mode, the following might be used:
<pre>
        cvsup -g -L 2 cvs-supfile
</pre>

<h3><a name="using">
<font color=#0000e0>Using CVS(1) to update your source tree.</font>
</a></h3>

<p>
It is now simple to checkout any one of the CVSup'd repositories:

<ul>
<li> For Korn/Bourne shells.
<ul><pre>
# <b>cd /usr</b>
# <b>CVSROOT=/cvs cvs checkout src</b>
</pre></ul>
<li> For CSH based shells.
<ul><pre>
# <b>cd /usr</b>
# <b>setenv CVSROOT /cvs</b>
# <b>cvs checkout src</b>
</pre></ul>
</ul>

<p>
The above will checkout the most current sources. Many of you will only
want the release sources, especially if you are patching your system.  To
checkout release sources you must specify a tag along with your command.
For example:
</p>

<p>
<ul><pre>
# <b>cd /usr</b>
# <b>cvs checkout -rOPENBSD_2_6 src</b>
</pre></ul>
Or OPENBSD_2_5 for 2.5, etc.
</p>

<h3>
<a name="CVSROOT"><font color=#0000e0>Available CVSup Servers.</font></a>
</h3>

<dl>
<dt><strong>The following CVSup servers are available:</strong>
<dd>

<p>
<li><strong>cvsup.uk.OpenBSD.org</strong><br>
located in Brighton, UK;
maintained by <a href=mailto:brian@OpenBSD.org>Brian Somers</a>.<br>
updated every 2 hours.<br>
<p>
<b>Available collections</b>:
<table>
<tr><td width=20><td><strong>OpenBSD-src</strong><td>- The <b>src</b> repository
<tr><td><td><strong>OpenBSD-ports</strong><td>- The <b>ports</b> repository
<tr><td><td><strong>OpenBSD-www</strong><td>- The <b>www</b> repository
<tr><td><td><strong>OpenBSD-x11</strong><td>- The <b>x11</b> repository
<tr><td><td><strong>OpenBSD-all</strong><td>- All OpenBSD repositories
</table>
</p>

<p>
<li><strong>cvsup.de.OpenBSD.org</strong><br>
located near Frankfurt am Main;
maintained by <a href=mailto:wosch@FreeBSD.org>Wolfram Schneider</a>.<br>
updated by CTM.<br>
<p>
<b>Available collections</b>:
<table>
<tr><td width=20><td><strong>openbsd-src-all</strong><td>- The <b>src</b> repository
<tr><td><td><strong>openbsd-ports-all</strong><td>- The <b>ports</b> repository
<tr><td><td><strong>openbsd-www-all</strong><td>- The <b>www</b> repository
<tr><td><td><strong>openbsd-cvs-all</strong><td>- All OpenBSD repositories except for x11
</table>
</p>

<p>
<li><strong>openbsd.ik.bme.hu</strong><br>
located in Hungary;
maintained by <a href=mailto:mohacsi@hera.ik.bme.hu>Mohacsi Janos</a>.<br>
Updated every 4 hours.<br>
<p>
<b>Available collections</b>:
<table>
<tr><td width=20><td><strong>OpenBSD-src</strong><td>- The <b>src</b> repository
<tr><td><td><strong>OpenBSD-ports</strong><td>- The <b>ports</b> repository
<tr><td><td><strong>OpenBSD-www</strong><td>- The <b>www</b> repository
<tr><td><td><strong>OpenBSD-x11</strong><td>- The <b>x11</b> repository
<tr><td><td><strong>OpenBSD-all</strong><td>- All OpenBSD repositories
</table>
</p>

<p>
<li><strong>cvs.bsdfr.org</strong><br>
located in France;
maintained by <a href=mailto:jch@oleane.net>Jean-Claude Christophe</a>.<br>
Updated every 12 hours.<br>
<p>
<b>Available collections</b>:
<table>
<tr><td width=20><td><strong>OpenBSD-src</strong><td>- The <b>src</b> repository
<tr><td><td><strong>OpenBSD-ports</strong><td>- The <b>ports</b> repository
<tr><td><td><strong>OpenBSD-www</strong><td>- The <b>www</b> repository
<tr><td><td><strong>OpenBSD-all</strong><td>- All OpenBSD repositories
</table>
</p>

</ul>

<p>
<EM>Note:</EM>, If your server is listed on here with inaccurate or
unknown information, please contact <A
HREF="mailto:beck@openbsd.org"><tt>beck@openbsd.org</tt></A>
<p>
You may want to use `traceroute' to find out which server is nearest you.
Problems with a server should be reported to the <b>maintainer</b> of the
server in question.
</dl>
<p>
Currently (as of April 11, 2000), the cvs repository sizes are
<table>
<tr><td width=20><td><strong>ports</strong><td>- <b>30</b>Mb
<tr><td><td><strong>src</strong><td>- <b>657</b>Mb
<tr><td><td><strong>www</strong><td>- <b>19</b>Mb
<tr><td><td><strong>x11</strong><td>- <b>195</b>Mb
</table>
<p>
There is an additional overhead of <b>25</b>Mb for the CVSROOT and sup
directories
<p>
<strong>IMPORTANT NOTE:</strong>
There are a few issues relating to cryptographic software that everyone
should be aware of:
<ul>
<li>The OpenBSD sources are from Canada.
As
	<a href=http://insight.mcmaster.ca/org/efc/pages/doc/crypto-export.html>
	researched by a Canadian individual</a>
and as
	<a href=http://axion.physics.ubc.ca/ECL.html>
	described in the Export Control list of Canada</a>
is legal to export crypto software from Canada to the world.
<p>
<li>However, if you are outside the USA or Canada, you should not
fetch the cryptographic sections of the OpenBSD sources from an
anoncvs server located in the USA. The files in question are...
<ul>
<li>src/kerberosIV/*
<li>src/lib/libdes/*
<li>src/lib/libc/crypt/crypt.c
<li>src/lib/libc/crypt/morecrypt.c
<li>src/sys/netinet
<li>src/usr.sbin/afs/src/rxkad/*
<li>X11/xc/lib/Xdmcp/Wraphelp.c
</ul>
Because of the USA ITAR munitions list,
crypto software may only be exported to Canada from the USA.
</ul>

<p>
The OpenBSD project is looking for more CVSup servers -- if you are
interested, please contact <a href=mailto:brian@OpenBSD.org>Brian Somers</a>
for configuration details.
</p>

<hr>
<a href=index.html><img height=24 width=24 src=back.gif border=0 alt=OpenBSD></a> 
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br><small>$OpenBSD: cvsup.html,v 1.6 2000/05/31 22:00:33 deraadt Exp $</small>

</body>
</html>
