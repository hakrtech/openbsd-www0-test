<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
    <meta name="resource-type" content="document">
    <meta name="description" content="De OpenBSD Port Test Gids">
    <meta name="keywords" content="openbsd,ports, test">
    <meta name="distribution" content="global">
    <meta name="copyright" content="copyright 2002-2004 OpenBSD.">
    <title>OpenBSD Port Test Gids</title>
  </head>

  <body text="#000000" bgcolor="#FFFFFF" link="#23238E">
    <a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src=
    "../images/smalltitle.gif" border="0"></a> 

    <h2><font color="#e00000">Port Test Gids</font></h2>
    <hr>

    <h2><font color="#0000e0">Inhoudsopgave</font></h2>

    <ul>
      <li><a href="#Introduction">Inleiding</a></li>

      <li><a href="#How">Hoe</a></li>

      <li><a href="#First">Eerste stap</a></li>

      <li><a href="#Testing">Testen</a></li>

      <li><a href="#Commenting">Opmerkingen maken</a></li>

      <li><a href="#More">Meer testen</a></li>
    </ul>
    <hr>

    <h2><a name="Introduction"><font color=
    "#0000e0">Introductie</font></a></h2>

    <p>De <a href="ports.html">ports tree</a> is een enorm stuk werk dat 
    OpenBSD gebruikers in staat stelt om programma's van derden gemakkelijk te 
    installeren zonder deze eerst afzonderlijk te patchen, te configureren en te
    installeren. Dit werk wordt gedaan door een groep vrijwilligers die hun tijd
    spenderen aan het porten en testen van applicaties op de verschillende 
    OpenBSD platformen. Veel mensen denken dat ze hier niet bij kunnen helpen 
    vanwege het feit dat ze niet genoeg kennis hebben; dit klopt niet, ze kunnen
    de porters wel degelijk helpen, zodat ze beter en sneller kunnen werken.</p>

    <h2><a name="How"><font color="#0000e0">Hoe</font></a></h2>

    <p>Het testen van updates of nieuwe ports die bekend worden gemaakt op de 
    <a href="mail.html">ports mailinglijst</a>. Door dit te doen kun je de 
    wachttijd van commits verkleinen en zo ook het aantal ports dat wordt 
    gecommit vergroten (veel ports worden niet gecommit vanwege het gebrek aan 
    testen!).</p>

    <h2><a name="First"><font color="#0000e0">Eerste stap</font></a></h2>

    <p>De ports tree wordt ontwikkeld met behulp van 
    <a href="../plus.html">OpenBSD-current</a>; er kan niet worden gegarandeerd 
    dat nieuwe ports op andere branches werken. Dit betekent ook dat je je 
    systeem en de ports moet upgraden naar -current (instructies hoe je dit moet
    doen staan op de <a href="anoncvs.html">anoncvs</a> en 
    <a href="../faq/current.html">"-current volgen"</a>) pagina's. Het is 
    tevens aan te raden dat je je inschrijft op de ports en ports-changes 
    <a href="mail.html">mailinglijsten</a>. Op deze manier zul je altijd op de 
    hoogte blijven van nieuwe of bijgewerkte ports en van veranderingen in de 
    ports tree.</p>

    <h2><a name="Testing"><font color="#0000e0">Testen</font></a></h2>

    <p>Er zijn twee soorten bijdragen op de mailinglijsten; nieuwe ports en 
    updates. De nieuwe ports worden meestal geplaatst als een toegevoegde 
    tarball of url. Het is een goed idee om deze uit te pakken in de
    <tt>/usr/ports/mystuff</tt> directory en van hier uit te testen.
    Updates worden 
    meestal geleverd als een diff tegen de -current ports tree, het is dus het 
    beste om de port te kopiëren naar <tt>mystuff/</tt> en hier de diff toe te 
    passen om een kapotte tree te voorkomen.</p>

    <p>Het stap-voor-stap bouwen is vereist om na te kunnen gaan dat ieder doel,
    zie 
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ports&amp;sektion=7&amp;">ports(7)</a>,
    succesvol wordt volbracht:</p>

    <ul>
      <li><i>fetch</i>
        <ul>
         <li>Nodig om na te gaan dat de distfile(s) juist zijn gedownload. 
         Probeer alle gespecificeerde <tt>MASTER_SITES</tt> af te gaan om te 
         controleren dat het goede bronnen zijn.</li>
        </ul>

      <li><i>checksum</i>
        <ul>
         <li>Nagaan of de distfiles die zijn gedownload overeenkomen met de 
 	 checksums in het <tt>distinfo</tt> bestand.</li>
        </ul>

      <li><i>extract</i>
	<ul><li>Elke distfile moet eerst zijn afhankelijkheden (zoals bzip2) 
	installeren.</li></ul>

      <li><i>patch</i>
        <ul>
         <li>Patches zouden aangebracht moeten worden zonder enige 
 	     waarschuwingen.
         <li>Er horen geen overgebleven <tt>.orig</tt> bestanden te zijn in de 
	     <tt>patches/</tt> map.
 	 <li>Een andere veel voorkomende fout is in meenemen van de RCS tags in 
	     de patch; dit zal voor een foute port zorgen als deze wordt in 
	     gechecked en de RCS tag wordt uitgebreid.
        </ul>

      <li><i>configure</i>
        <ul>
	 <li>Let op of de configure scripts de juiste informatie van je platform
	     herkennen.
	 <li>GNU libtool is berucht voor z'n ongewenste 'mogelijkheden' op 
	     OpenBSD, dus zorg dat de port een recente versie gebruikt die de 
	     juiste bibliotheken zal aanmaken op jouw architectuur.
   	 <li>Het configure script hoort geen 'verdwaalde' applicaties te vinden 
	     die al op je systeem zijn geïnstalleerd zonder expliciete 
	     afhankelijkheden in de port.
        </ul>

      <li><i>build</i>
        <ul>
     	 <li>Let op compilatiefouten en verdachte waarschuwingen.
         <li>Waarschuwingen over problemen met <a href=
      "http://www.openbsd.org/cgi-bin/man.cgi?query=tmpnam&amp;sektion=3&amp;">
      tmpnam(3)</a> horen opgelost te worden door het gebruik van
      <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkstemp&amp;sektion=3&amp;">
          mkstemp(3)</a>.</li>
	 <li>Verander de <tt>SEPARATE_BUILD</tt> variabele naar 'concurrent' en 
	 test of het compileren nog steeds werkt.
         <li>Kijk of de afhankelijkheid van GNU daadwerkelijk nodig is.
        </ul>

      <li><i>regress</i>
        <ul>
          <li>Kijken of er fouten zijn opgetreden (lege tests betekenen OK).
        </ul>


      <li><i>fake</i>
        <ul>
	 <li>Dit doel installeert de applicatie in een nepdirectory, dit om er 
	 zeker van te zijn dat tijdens het maken van de package het
	 basissysteem onaangetast blijft.
	 <li>De port mag <b>nooit</b> bestanden installeren buiten de nep 
	 directory (dus bijvoorbeeld naar <tt>/usr/local</tt>.
	 <li>GNU libtool heeft soms problemen met het herlinken van de 
	 bibliotheken tijdens het nepproces, op sommige architecturen.
        </ul>

      <li><i>package</i>
        <ul>
 	 <li>Het maken van de package kan fout gaan als pkg/PLIST* en/of 
	 pkg/PFRAG foutief zijn.</li>
        </ul>

      <li><i>install</i>
        <ul>
	 <li>De packages horen alle bestanden van hun package-lijsten succesvol 
	 te installeren en met de juiste permissies. Wees extra voorzichtig met 
	 bestanden waarbij setuid bits gezet zijn.
	 <li>Zorg dat het <tt>INSTALL</tt> script correct werkt, en dat het geen 
	 bestanden in <tt>/etc</tt> overschrijft.
        </ul>

      <li><i>deinstall</i>
        <ul>
	 <li>Dit hoort alle bestanden te verwijderen die geïnstalleerd zijn, 
	 behalve de bestanden in <tt>/etc</tt>.
	 <li>Zorg dat het <tt>DEINSTALL</tt> script werkt zoals verwacht.
        </ul>
    </ul>

    <p>Overgebleven bestanden in <tt>pkg/</tt> zoals DESCR en MESSAGE moeten 
    worden gecontroleerd op grammatica en spelfouten. De paragrafen moeten 
    geformatteerd zijn met behulp van 
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fmt&amp;sektion=1&amp;format=html">fmt(1)</a>
    en de regels mogen niet langer zijn dan 70 tekens.</p>

    <h2><a name="Commenting"><font color="#0000e0">Opmerkingen maken</font></a></h2>

    <p>Aan het eind van het testen komt een iets heel belangrijks: opmerkingen.
    Ook als de port goed werkt moeten er opmerkingen gemaakt worden. Als we tien
    berichten hebben waarin mensen zeggen dat de port het goed doet op 
    verschillende architecturen, dan zal het eerder gecommit worden. Als het 
    niet werkt, dan moet er aanvullende informatie worden gegeven.
    Er zijn tools beschikbaar voor deze taak, zoals 
    <a href="http://www.openbsd.org/cgi-bin/cvsweb/ports/infrastructure/build/portslogger">portslogger</a>,
    dit is een soort van een "intelligente tee" die de output naar een
    logbestand schrijft.</p>

    <p>Voorbeeld:<br>
    </p>

    <div style="margin-left: 2em">
      <table border="0" cellpadding="3" width="90%">
        <tr>
          <td nowrap bgcolor="#EEEEEE">
<pre>
    # make install 2&gt;&amp;1 | /usr/ports/infrastructure/build/portslogger .
</pre>
          </td>
        </tr>
      </table>
    </div>
    <br>
     <br>
     
    <p>Dit zal er voor zorgen dat de output naar een log bestand word geschreven 
    in de huidige directory.</p>

    <h2><a name="More"><font color="#0000e0">Meer testen</font></a></h2>

    <p>Controleer de Makefile van de port op spelfouten, onjuiste links, 
    nutteloze of ontbrekende variabelen, en verbeter de licentie en
    categorieën. 
    Voor de mensen met meer ervaring kunnen andere zaken testen zoals 
    <i>lib-depends-check</i>, patches uitpluizen, maar ook patches inzenden om 
    bugs op te lossen, 'flavors' toevoegen of andere verbeteringen.</p>

    <p>Deze diffs kunnen gemaakt worden met de <tt>-uNr --exclude=CVS</tt> 
    opties. Met <tt>cvs diff -uN</tt> kunnen patches worden gemaakt met behulp 
    van de CVS repository.</p>

<hr>
<a href="index.html"><img src="../back.gif" height="24" width="24" alt="OpenBSD" border="0"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a><br>
<small>
<!--
Originally [OpenBSD: porttest,v 1.19 ]<br>
$Translation: porttest.html,v 1.3 2005/08/06 10:14:58 jasper Exp $<br>
-->
$OpenBSD: porttest.html,v 1.1 2005/08/07 08:54:37 saad Exp $
</small>
</body>
</html>
