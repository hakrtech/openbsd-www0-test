<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD/mvme88k</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD/mvme88k page">
<meta name="keywords" content="openbsd,mvme88k">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2001 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">

<h2>OpenBSD/mvme88k</h2>
<img alt="[OpenBSD]" src="images/bsd_small.gif">

<hr>

<img align=right vspace=5 hspace=5 src="images/mvme187-1.jpg">
<h3><font color=#0000e0><i>Table of contents</i></font></h3>
<p>
<ul>
 <li><a href="#history">History of the port</a>
 <li><a href="#status">Current status</a>
 <li><a href="#howtoget">Where to get it</a>
 <li><a href="#hardware">Supported hardware list</a>
 <li><a href="#pics">More 88k pictures</a>
 <li><a href="#projects">Project list</a>
 <li><a href="#m187dmesg">MVME187 dmesg</a>
 <li><a href="#m188dmesg">MVME188 dmesg</a>
</ul>
</p>

<hr>
<a name=history>
<h3><font color=#0000e0><strong>History:</strong></font></h3>

<p>
The Motorola 88k processor is said to be the best RISC processor ever 
devised.  Its simplicity and elegance combine to make the mvme88k a 
hearty, robust platform. 
</p>
<p>
Nivas Madhur started the initial mvme88k port 
for the MVME187 card, but has since moved on to another employer.  
Steve Murphree, Jr. completed the port in November 1998.  The port has 
since had major changes including revamped autoconf and on-board SCSI 
driver.  New, greatly expanded VME bus support.  A working install 
process that correctly creates a Motorola VID block on the disks.
</p>
<hr>
<a name=status>
<h3><font color=#0000e0><strong>Current Status:</strong></font></h3>

<p>
The people working the most on OpenBSD/mvme88k are:
Steve Murphree, Jr., and Miod Vallat.
More would be nice :)
</p>

<p>
Email may be sent to the maintainer of the OpenBSD/mvme88k port at
<a href="mailto:smurph@OpenBSD.org">smurph@OpenBSD.org</a>.  
</p>

<p>
There is a snapshot available as of 2.4.  The port supports the MVME187 
Single Board Computer (SBC) as well as the MVME188 multi-processor board.  
(only uses 1 processor currently)  Support for the MVME197 is planned, 
but time is needed to get things going.  The installation tools and process 
as of the 2.5 release actually work.  OpenBSD/mvme88k can be installed or 
upgraded via tape ramdisk images as well as network and diskless installs.
</p>

<h3><font color=#0000e0><strong>New for 2.8:</strong></font></h3>

<p>
<ul>
<li>Support for the MVME188 is complete.
<li>VME bus devices auto vector, providing a more 'plug and play' type environment.
<li>OpenBSD/mvme88k now uses the Unified Virtual Memory System. (UVM)
</ul>
</p>

<hr>
<a name=howtoget>
<h3><font color=#0000e0><strong>Where to get it:</strong></font></h3>

<p>
<ul>
<li><a href=ftp.html>Snapshots are made available from time to time.</a>
<li><a href=ftp://ftp3.usa.openbsd.org/pub/OpenBSD/2.5/mvme88k/INSTALL.mvme88k>Installation information for the 2.5 release of OpenBSD/mvme88k</a>
</ul>
</p>

<p>
<hr>
<a name=hardware>
<h3><font color=#0000e0><strong>Supported hardware list:</strong></font></h3>

<h4>OpenBSD/mvme88k runs on the following classes of machines:</h4>
<ul>
<li> MVME187: Motorola 88100 based Single Board Computer (SBC)
<li> MVME188: Motorola 88100 based VME systems<br>
The MVME188 CPU boards come in different flavours, differing by the number of
processors (1, 2 or 4) and associated CMMUs. All existing configuration should
be supported, but this has only been tested on 1P64 (1 cpu, 4 cmmu) and 2P256 (2
cpu, 4 cmmu) boards.
</ul>

<h4>Supported devices</h4>

<ul>
<li> Floppy drives:
  <ul>
   <li> SCSI floppy disk drives
  </ul>

<li> Serial ports:
  <ul>
   <li> tty00, tty01, tty02 and tty03 on-board Cirrus Logic serial ports (MVME187)
   <li> ttya and ttyb on-board DUART serial ports (MVME188)
   <li> MVME332 8-port serial card
  </ul>

<li> Ethernet adapters:
  <ul>
   <li> on-board Intel Ethernet (MVME187)
   <li> MVME376 AMD Lance Ethernet. 
  </ul>

<li> SCSI controllers:
  <ul>
   <li> on-board "NCR" SCSI controller (MVME187)
   <li> MVME328 SCSI controller
  </ul>
</ul>

<h4>OpenBSD/mvme88k does *not* run on these machines (yet):</h4>
<ul>
 <li> MVME197: This is work in progress.
</ul>

<h4>Unsupported Devices. There are many more...</h4>
<ul>
 <li>Disk Controllers:
  <ul>
   <li> MVME327 SCSI controller
  </ul>
 
 <li>Ethernet Controllers:
  <ul>
   <li> MVME374 LANCE controller
  </ul>

 <li>WAN Controllers:
  <ul>
   <li> MVME333 WAN controller
  </ul>
</ul>

<hr>
<a name=projects>
<h3><font color=#0000e0>Project list:</font></h3>
<ul>
 <li>Continue work on MVME197 port (cmmu, built-in peripherals).
 <li>Start work on device drivers for unsupported VME cards.
 <li>Write code for new binutils (will fix ld bugs) and switch to ELF.
 <li>Shared libraries.
</ul>

<hr>

<a name=pics>
<h3><font color=#0000e0>mvme88k pictures:</font></h3>
<p>
The picture at the top of this page is a MVME 900 Series Chassis with a MVME187 
33 Mhz, 32 Megabyte RAM SBC board, 4 MVME332XT serial boards and an 
ARCHIVE 250 MB QIC Tape unit.  Its hostname is m187.  It is the primary build 
machine for the OpenBSD/mvme88k port.
</p>
<ul>
 <li><a href="images/mvme187-2.jpg">MVME187 Series 900 (rear view)</a>
 <li><a href="images/mvme187-3.jpg">MVME187 Series 900 (rear view w/terminal)</a>
 <li><a href="images/mvme187-4.jpg">MVME187 Series 900 (rear view close up)</a>
 <li><a href="images/mvme188-2.jpg">MVME188 Dual proc board</a>
 <li>More to come...
</ul>

<hr>

<a name=m187dmesg>
<h3><font color=#0000e0>MVME187 dmesg:</font></h3>
<p>
Check out the cool VME bus devices!  Err, also check out how many builds 
it took to get them working...
</p>
<pre>
OpenBSD 2.5 (XT) #404: Wed May 26 02:11:50 CDT 1999
    root@m187.smcomp.com:/usr/src/sys/arch/mvme88k/compile/XT

Model: Motorola MVME187 25Mhz
real mem  = 33550336
avail mem = 29126656
using 409 buffers containing 1675264 bytes of memory
mainbus0 (root) machine type MVME187
pcctwo0 at mainbus0 addr 0xfff00000: rev 0
setting interrupt ack vectors.
clock0 at pcctwo0 ipl 5
nvram0 at pcctwo0 offset 0xc0000: MK48T08 len 8192
cl0 at pcctwo0 offset 0x45000 ipl 3 console 
siop0 at pcctwo0 offset 0x47000 ipl 2: version 0 target 7
scsibus0 at siop0: 8 targets
siop0: target 0 now synchronous, period=100ns, offset=8
sd0 at scsibus0 targ 0 lun 0: &lt;COMPAQPC, DSP3053LS, 442C&gt; SCSI2 0/direct fixed
sd0: 511MB, 3117 cyl, 4 head, 83 sec, 512 bytes/sec, 1046532 sec total
vme0 at pcctwo0 offset 0x40000: system controller
vme0: using BUG parameters
vme0: 1phys 0x40000000-0xefff0000 to VME 0x40000000-0xefff0000
vme0: 2phys 0xff000000-0xff7f0000 to VME 0xff000000-0xff7f0000
vme0: 3phys 0x02000000-0x3fff0000 to VME 0x02000000-0x3fff0000
vme0: 4phys 0x00000000-0x00000000 to VME 0x00000000-0x00000000
vme0: vme to cpu irq level 1:1
vmes0 at vme0
ve0 at vmes0 addr 0xffff1200 vaddr 0xef000200 vec 0x74 ipl 3
ve0: address 00:00:77:83:9f:a6
ve0: 128 receive buffers, 32 transmit buffers
vs0 at vmes0 addr 0xffff9000 vaddr 0xef041000 vec 0x80 ipl 2: target 7
scsibus1 at vs0: 8 targets
sd1 at scsibus1 targ 0 lun 0: &lt;FUJITSU, M2624F-512, M405&gt; SCSI1 0/direct fixed
sd1: 496MB, 1429 cyl, 11 head, 64 sec, 512 bytes/sec, 1015812 sec total
cd0 at scsibus1 targ 1 lun 0: &lt;NEC, CD-ROM DRIVE:500, 1.2&gt; SCSI1 5/cdrom removable
vmel0 at vme0
ie0 at pcctwo0 offset 0x46000 ipl 3: address 08:00:3e:21:33:57
boot device: sd0
root on sd0a
rootdev=0x400 rrootdev=0x800 rawdev=0x802
</pre>

<a name=m188dmesg>
<h3><font color=#0000e0>MVME188 dmesg:</font></h3>
<p>
Here is a dmesg from a MVME188.
</p>
<pre>
Model: Motorola MVME188 25Mhz
MVME188 board configuration #5: 2 CPUs 4 CMMUs
CPU0 is attached with 2 MC88204 CMMUs
CPU1 is attached with 2 MC88204 CMMUs
CPU0 is master CPU
[ using 146999 bytes of bsd a.out symbol table ]
ddb enabled
Copyright (c) 1982, 1986, 1989, 1991, 1993
	The Regents of the University of California.  All rights reserved.
Copyright (c) 1995-2001 OpenBSD. All rights reserved.  http://www.OpenBSD.org

OpenBSD 2.9-current (GENERIC) #59: Thu Jun 14 01:18:03 GMT 2001
    miod@arzon:/src/current/src/sys/arch/mvme88k/compile/GENERIC
real mem  = 33550336
avail mem = 28381184 (6929 pages)
using 435 buffers containing 1781760 bytes of memory
mainbus0 (root) machine type MVME188
bugtty0 at mainbus0 addr 0xfff45000: bugtty
syscon0 at mainbus0 addr 0xfff00000: rev 1
clock0 at syscon0 ipl 5: VME188
sclock0 at syscon0 ipl 5: VME188
nvram0 at syscon0 offset 0x80000: MK48T02 len 2048
dart0 at syscon0 offset 0x82000 ipl 3 console (ttya) 
vme0 at syscon0 offset 0x85000: system controller
vmes0 at vme0
vs0 at vmes0 addr 0xffff9000 vaddr 0x2e59000 vec 0x80 ipl 2: target 7
scsibus0 at vs0: 8 targets
sd0 at scsibus0 targ 1 lun 0: &lt;FUJITSU, M2624F-512, M405&gt; SCSI1 0/direct fixed
sd0: 496MB, 1429 cyl, 11 head, 64 sec, 512 bytes/sec, 1015812 sec total
vs1 at vmes0 addr 0xffff9800 vaddr 0x2e5a800 vec 0x82 ipl 2: target 7
scsibus1 at vs1: 8 targets
ve0 at vmes0 addr 0xffff1200 vaddr 0x2e5b200 vec 0x74 ipl 1
ve0: address 00:00:77:83:9f:cc
ve0: 128 receive buffers, 32 transmit buffers
vmel0 at vme0
boot device: sd0
root on sd0a
rootdev=0x400 rrootdev=0x800 rawdev=0x802
</pre>

<hr>

<a href=plat.html><img height=24 width=24 src=back.gif border=0 alt=OpenBSD></a> 
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br>
<small>$OpenBSD: mvme88k.html,v 1.24 2001/11/21 08:31:08 miod Exp $</small>

</body>
</html>

