<html>
<head>
<title>6.0 - Networking</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-1999 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000" link= "#23238E">

<p>
<font color= "#0000e0">
<a href= "index.html">[Back to Main Index]</a>
<a href= "faq5.html">[To Section 5.0 - Kernel configuration and Disk Setup]</a>
<a href= "faq7.html">[To Section 7.0 - Keyboard controls]</a>
</font>
</p>

<p>
<h1>6.0 - Networking</h1>
<hr>
</p>

<br>

<p>
<a name= "6.1"</a>
<h2>6.1 - Initial Network Setup</h2>
</p>

<p>
<h3>Interfaces</h3>
</p>

<p>
Here we assume you have all your network interfaces working, and a basic
TCP/IP knowledge. If not, go to the <a href= "./faq5.html">Kernel Configuration
and Setup</a> section, and/or read a nice intro to TCP/IP. Other recommended
reading are the 
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&apropos=0&sektion=8&format=html">
ifconfig(8)</a> and 
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=netstat&apropos=0&sektion=1&format=html">
netstat(1)</a> man pages.
</p>

<p>
All your interfaces should be listed with:
</p>

<p>
<pre>
# ifconfig -a

lo0: flags=8009&lt;UP,LOOPBACK,MULTICAST&gt;
        inet 127.0.0.1 netmask 0xff000000
lo1: flags=8008&lt;LOOPBACK,MULTICAST&gt;
xl0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt;
        media: Ethernet 100baseTX half-duplex
        inet 10.1.1.1 netmask 0xffffff00 broadcast 10.1.1.255
sl0: flags=c010&lt;POINTOPOINT,LINK2,MULTICAST&gt;
        inet 10.1.1.1 netmask 0xffffff00 broadcast 10.1.1.255
sl0: flags=c010&lt;POINTOPOINT,LINK2,MULTICAST&gt;
sl1: flags=c010&lt;POINTOPOINT,LINK2,MULTICAST&gt;
ppp0: flags=8010&lt;POINTOPOINT,MULTICAST&gt;
ppp1: flags=8010&lt;POINTOPOINT,MULTICAST&gt;
tun0: flags=10&lt;POINTOPOINT&gt;
tun1: flags=10&lt;POINTOPOINT&gt;
enc0: flags=8&lt;LOOPBACK&gt;
</pre>
</p>

<p>
First there is lo0 the loopback interface. It MUST have the assigned address
of 127.0.0.1 no matter what network setup you use. The next important one is
xl0 in this example (could be neX or epX depending on the brand), which is
a board itself. Look it has UP and RUNNING flags on, as lo0 but no other
interface have them. That means oviously they are working. Your interface
could be down if you never configured it, and look like the other interfaces.
The others are not part of this section, as sl and ppp are for serial line
comunication, tun is a pseudo-device for tunneling and enc a pseudo-device for
encryption. 
</p>

<p>
If xl0 was uninitialized, you can assign it an address creating a ascii
file /etc/hostname.xl0 having a string like this:
</p>

<p>
<pre>
inet mona 255.255.255.0 NONE
</pre>
</p>

<p>        
This hostname 'mona' needs to have record in /etc/hosts:
</p>

<p>
<pre>
10.1.1.1        mona    mona.openbsd.org.ar
</pre>
<p>
What actually happens when you boot is that it looks up 'mona' in /etc/hosts, and then configures the interface to 10.1.1.1.
If you have multiple ethernet interfaces, this is probably a painful way to do things, and so you can also put the
number right in /etc/hostname.xl0:
<pre>
inet 10.1.1.1 255.255.255.0 NONE
</pre>

<p>
Now check that you have a file /etc/myname and a file /etc/mygate. If you
don't have them, you need to create them. If your gateway is a machine
named "wintermute" wich is also in the /etc/hosts, use this commands:
</p>

<p>
<pre>
# echo "mona" > /etc/myname
# echo "wintermute" > /etc/mygate
</pre>
</p>

<p>
Ok, you are done for a standalone system, but to activate your
configuration now (without rebooting) do:
</p>

<p>
<pre>
# sh /etc/netstart
</pre>
</p>

<p>
This will give you a few errors, but don't worry as all them are
concerning 127.0.0.x (loopback)
</p>

<p>
Note: if you want to use the system as a gateway, later there's a
"Firewall Setup" section, but you need to read all this first.
</p>

<p>
Now check your routes are ok (here we use -n to make it simpler to
look at):
</p>

<p>
<pre>
# netstat -rn
Routing tables

Internet:
Destination        Gateway            Flags     Refs     Use    Mtu
Interface
default            10.1.1.254         UGS         0        0      -  xl0
10.1.1/24          link#1             UC          0        0      -  xl0
10.1.1.1           127.0.0.1          UGHS        0        0      -  lo0
10.1.1.254         link#1             UHL         1        0      -  xl0
127/8              127.0.0.1          UGRS        0        0      -  lo0
127.0.0.1          127.0.0.1          UH          3       24      -  lo0
224/8              link#1             UCS         0        0      -  xl0

Encap:
Source address/netmask          Port  Destination address/netmask     Port Proto SA(Address/SPI/Proto)
</pre>
</p>

<p>
(The <tt>default</tt> gateway here is 10.1.1.254)
</p>

<p>
<h3>IP Aliasing</h3>
</p>

<p>
If you want to map more than one IP address on a single network interface,
you need to assign an "alias" to it. The way to do it on OpenBSD is
simply assigning the interface another IP with the "alias" option like
this:
</p>

<p>
<pre>
# ifconfig xl0 alias 10.1.1.2 netmask 255.255.255.255
</pre>
</p>

<p>
Here ne2 is assigned another IP number (remember it already has 10.1.1.1).
Note the netmask used! Don't use 255.255.255.0 in this kind of cases (both
numbers are on the same subnet), only ONE address should handle the subnet.
If you do such kind of misconfiguration, the following error appears:
</p>

<p>
<pre>
ifconfig:SIOCAIFADDR: File exists
</pre>
</p>

<p>
Now let's change the configuration file for this, /etc/ifaliases. Add to
it this line:
</p>

<p>
<pre>
xl0   10.1.1.2 255.255.255.255
</pre>
This means, simply, interface <tt>xl0</tt> should have an alias <tt>10.1.1.2</tt> with the netmask <tt>255.255.255.255</tt>.
</p>


<p>
<h3>DNS Client Setup</h3>
</p>

<p>
Let's assume your DNS servers are 125.2.3.4 and 125.2.3.5, and your
machine name belongs to the domain yourdomain.com.  You should have the following
lines to your /etc/resolv.conf file:
</p>

<p>
<pre>
domain yourdomain.com
nameserver 125.2.3.4
nameserver 125.2.3.5
</pre>
</p>

<p>
<h3>Gateway Setup</h3>
</p>

<p>
This is the basic information you need to set up your OpenBSD box as a gateway (also called a router.)  If you are using OpenBSD as a router on the Internet, we suggest that you also read the IP Filter setup instructions below
to block potentially malicious traffic.  Also, due to the low availability of IPv4 addresses from network service providers
and regional registries, you may want to look at Network Address Translation (next section of this document)
for information on conserving your IP address space.
</p>

<p>
If you want your OpenBSD machine to act as a dedicated router, and you
are building a custom kernel configuration for it, you can either compile
your kernel with options IPFORWARDING or GATEWAY.  (See <A HREF="faq12.html">section 12</a> for
further information on tuning NMBCLUSTERS if you are doing this.)  For the rest of us,
OpenBSD now has a sysctl mechanism to turn on and off IP Forwarding at boot.
If you want it to "forward" any packets between your interfaces, modify the /etc/sysctl.conf line that toggles
the forwarding variable on bootup:
</p>

<p>
<pre>
net.inet.ip.forwarding=1
</pre>
</p>

<p>
To make the changes without booting:
</p>

<p>
<pre>
# sysctl -w net.inet.ip.forwarding=1
net.inet.ip.forwarding: 0 -> 1
</pre>
</p>

<p>
Now modify the routes on the other hosts on both sides.  There are many possible uses of OpenBSD as a router, using software
such as <A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=routed&apropos=0&sektion=8&format=html">routed(8)</a>,
<A HREF="http://www.gated.org">gated</a>, <a href="http://www.mrtd.net">mrtd</a>, and <A href="http://www.zebra.org">zebra</a>.
OpenBSD has support in the ports collection for both gated and mrtd.
OpenBSD supports several T1, HSSI, ATM, FDDI, Ethernet, and serial (PPP/SLIP) interfaces.
</p>

<p>
<a name= "6.2"></a>
<h2>6.2 - IP Filter - ipf and ipnat setup</h2>
</p>
<p>
The IP Filter package was created to handle with two tasks, dealing with
packet level forwarding permissions <A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=ipf&apropos=0&sektion=8&format=html">ipf(8)</a> and mapping hosts/subnets to a range of
external addresses <A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=ipnat&apropos=0&sektion=8&format=html">ipnat(8)</a>. The configuration files for these two services are /etc/ipf.rules and
/etc/ipnat.rules.
</p>

<p>
You need to edit /etc/rc.conf to activate them at boot time. You also need to have 
net.inet.ip.forwarding=1 in your /etc/sysctl.conf (or your kernel needs to have IPFORWARDING
or GATEWAY options turned on.) You also need a kernel compiled with option
IPFILTER and IPFILTER_LOG (the GENERIC kernels do have these options).
</p>
<P>
If you have IP Filter compiled in to your kernel, but you don't have 
it turned on in your /etc/rc.conf file, you can still activate it easily. 
<Pre>
# ipf -Fa -f /etc/ipf.rules -E
# ipnat -CF -f /etc/ipnat.rules
</pre>
<P>
The <tt>-E</tt> flag on ipf 'enables' IP Filter.  <Tt>-Fa</tt> clears out any rules that you may have in there.  <tt>-f /etc/ipf.rules</tt> loads the rules from
/etc/ipf.rules.  
<p>
If you make changes to /etc/ipf.rules after ipf is loaded, you can reload your rules pretty easily!
<pre>
# ipf -Fa -f /etc/ipf.rules
</pre>
Same for ipnat...
<pre>
# ipnat -CF -f /etc/ipnat.rules
</pre>
This document will cover some basic ipf and ipnat configurations below.
There are a lot of nice examples in /usr/share/ipf/ for ipnat and ipf. We recommend
you to choose the one closer to what you want, and modify it to fit your needs.  You can find other IP Filter information
at the IP Filter <A HREF="http://false.net/ipfilter/">mailing list archive</a>, the <A HREF="http://cheops.anu.edu.au/~avalon/ip-filter.html">IP Filter web site</a>, and finally the <A HREF="http://www.swcp.com/~synk/ipf-howto.txt">the IP Filter HOWTO</a>.
</p>

<p>
<h3>IPF</h3>
</p>

<p>
Modify rc.conf so it has IPFILTER=YES. The file /etc/ipf.rules has a
simple yet powerful syntax. Here we deal with the most common ways of usage,
for a more strict definition see <A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=ipf&apropos=0&sektion=5&format=html">ipf(5)</a>. Here is assumed xl0 as the
external interface to internet, on this one uses to have more rules than
internal interfaces.
</p>

<p>
Configurations usually start letting everything come and go, and then
apply the necesary rules to block offending packets. So this is first:
</p>

<p>
<pre>
pass out from any to any
pass in from any to any 
</pre>
</p>

<p>
Now lets block any incoming connection to port 82 tcp (eg. there's an
internal network report agent using http running on several hosts):
</p>

<p>
<pre>
block in on xl0 proto tcp from any to any port = 82
</pre>
</p>

<p>
This rule means:
</p>

<p>
"Block all incoming packets on xl0 interface whose protocol is TCP no
matter destination/origin using port 82"
</p>
<p>
If you want to log all rejected packets add "log" after "block in", or
"log quick" if you don't want it to send a message to every console root is
logged in.
</p>

<p>
Also, a typical rule is to block rpc portmap:
</p>

<p>
<pre>
block in log on xl0 proto udp from any to any port = sunrpc
</pre>
</p>

<p>
<h3>IPNAT</h3>
</p>

<p>
Based on <a HREF="http://www.geektools.com/rfc/rfc1631.txt">RFC 1631</a>, ipnat provides an easy way to
map internal networks to a single routeable ("real") internet address. This is very useful if you don't have
officially asigned addresses for every host on your internal network. When
you set up private/internal networks, you can take advantage of reserved
address blocks (assigned in <A HREF="http://www.geektools.com/rfc/rfc1918.txt">RFC 1918</a>), such as:
<P>

10.0.0.0/8 (10.0.0.0 - 10.255.255.255)<br>
172.16.0.0/12 (172.16.0.0 - 172.31.255.255)<br>
192.168.0.0/16 (192.168.0.0 - 192.168.255.255)<br>

</pre>
</p>
<p>
To use ipnat, ipf must be activated.
As outlined above, for changes to stay effective
through reboots, you should make changes to /etc/rc.conf (where it has IPNAT and IPFILTER.)
You can manually activate ipf with the command below.
<pre>
# ipf -E
</pre>

<p>
Example: You have an internal network using 192.168.5.0, with a netmask of 255.255.255 0, and you want to give
it access to internet using OpenBSD (of course!), and a ppp connection using address 200.1.2.3, use this rule:
</p>

<p>
<pre>
map tun0 192.168.5.0/24 -> 200.1.2.3/32
</pre>
</p>

<p>
This rule means:
</p>

<p>
"Any IP connections going out tun0 from an address matching the first
24 bits of 192.168.5.0 should be mapped to the address 200.1.2.3 (only one
address since /32 means every bit)"
</p>
<P>
If you don't like using CIDR notation, IP Filter also allows you to use netmasks.  A functional 
equivalent to the example above, using netmasks looks like this:
<P>
<PRE>
map tun0 192.168.5.0/255.255.255.0 -> 200.1.2.3/255.255.255.255
</pre>

<p>
But here arises a problem. You are assigning a lot of addresses to only
one address. But the port numbers aren't changing, and it is very likely that
your workstations on 192.168.5.0/24 will use the same port numbers to initiate connections
from.  (If this doesn't make sense, don't worry, but keep reading.)  The way to go arount it is to map TCP and UDP ports to
a certain range with the option "portmap". Since ICMP doesn't even use ports, it is not covered by the
"portmap" rule.  (ICMP uses an ID field
usually based on a process number)
In our example, there are now two map rules to cover all of these protocols.  The end result looks like this:
</p>

<p>
<pre>
map tun0 192.168.5.0/24 -> 200.1.2.3/32 portmap tcp/udp 10000:65000
map tun0 192.168.5.0/24 -> 200.1.2.3/32
</pre>
</p>

<p>
If you have a dynamic address assignment (as in, you do not know what address they will give you when you connect), you can put
the interface name in place of the IP address.  Note that if you do this, you will have to run <tt>ipnat -CF -f /etc/ipnat.rules</tt> every time
your IP address changes (or, every time you dial up.)
</p>

<p>
<pre>
map tun0 192.168.5.0/24 -> tun0/32 portmap tcp/udp 10000:65000
map tun0 192.168.5.0/24 -> tun0/32<br>
</pre>

<p>
NAT is also able to help you in renumbering.  Say you were assigned a net block 35.8.9.0/22, and your internet provider can no longer
route thse addresses to you, or say you are switching providers.  Your new address block is 192.9.4.0/22, but to switch all 500 devices
you have on this block would be very time consuming! ipnat provides a feature called bimap:
<P>
<PRE>
bimap xl0 35.8.9.0/22 -> 192.9.4.0/22
</pre>
<P>
This will literally map every computer in 35.8.9.0 to a new address in 192.9.4.0.  The drawback of this feature is that the translation is not
consistent.  A computer that initiates a connection from 35.8.9.0 will get a random IP address from 192.9.4.0.  A future version of IP Filter
will allow for one-to-one translation (where 35.8.9.99 will always get mapped to 192.9.4.99).
<p>
And of course, there are other potential uses of NAT that are probably beyond the scope of this document.  

<p>
<h3>Redirecting ports</h3>
</p>

<p>
This is another very handy feature of IPNAT. If you have a host on the
internal network (using private addresses), and you want to let incoming
connections to it, you just need a simple redirect rule. For example, if you
have a web server on internal network at 10.2.2.7 listening on port 80, and 
want it to be accesible from the outside simply redirecting external IP 
120.2.3.4 on xl0, just add this rule to <kbd>/etc/ipnat.rules:</kbd>
</p>

<p>
<pre>
rdr xl0 120.2.3.4 port 80 -> 10.2.2.7 port 80
</pre>
</p>

<p>
When you write rules, it may help to visualize the packet flow.
</p>

<p>
<pre>
Internet <--> (xl0 120.2.3.4) OpenBSD (xl1 10.2.2.1) <--> LAN <--> (10.2.2.7 XYZ Web server)
</pre>
</p>

<p>
One last reminder that you must have net.inet.ip.forwarding=1 or option IPFORWARDING to use
IP Filter (ipf, ipnat). Also, redirect only
works for packets that are being routed through the OpenBSD box.  If a web browser from inside the NAT
(say, from 10.2.2.5 from the example above) tries to connect to port 80 on 120.2.3.4, nothing will happen.
</p>

<br>

<p>
<a name= "6.3"></a>
<h2>6.3 - IPSec</h2>
</p>

<p>
IPSec is partially documented in the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vpn&apropos=0&sektion=0&format=html">vpn(8)</a>
man page.  There are various files in <A HREF="http://www.openbsd.org/cgi-bin/cvsweb/src/share/ipsec/">/usr/share/ipsec/</a>
directory which can also assist you.  The manual pages for
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&apropos=0&sektion=4&format=html">ipsec(4)</a>,
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&apropos=0&sektion=8&format=html">ipsecadm(8)</a>,
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=photurisd&apropos=0&sektion=8&format=html">photurisd(8)</a>,
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=startkey&apropos=0&sektion=1&format=html">startkey(1)</a>,
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&apropos=0&sektion=8&format=html">isakmpd(8)</a> and
<a HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&apropos=0&sektion=5&format=html">isakmpd.conf(5)</a>
are also available!
</p>
<p> 
You should also check <a href="http://www.codetalker.com/greenbox/docs/vpn-24-minifaq.html">Codetalker</a> which has an FAQ
for setting up an IPSec VPN with OpenBSD.  It explains some basic IPSec concepts and how to apply them to a VPN setup.
</p>

<br>

<p>
<a name= "6.4"></a>
<h2>6.4 - DHCP</h2>
</p>

<p>To use the DHCP client <A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&apropos=0&sektion=8&format=html">dhclient(8)</a>
included with OpenBSD, edit /etc/hostname.xl0
(this is assuming your main ethernet interface is xl0.  Yours might be ep0 or fxp0 or something else!)
All you need to put in this hostname file is 'dhcp'
<pre>
# echo dhcp >/etc/hostname.xl0
</pre>
This will cause OpenBSD to automatically start the DHCP client on boot.  OpenBSD will gather its' IP address,
default gateway, and DNS servers from the DHCP server.  
<p>
If you want to use OpenBSD as a DHCP server <A href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhcpd&apropos=0&sektion=8&format=html">dhcpd(8)</a>,
edit /etc/rc.conf.  Set it up so that dhcpd_flags="-q" instead of dhcpd_flags=NO.
Put the interfaces that you want dhcpd to *listen* on in /etc/dhcpd.interfaces.
<pre>
# echo xl1 xl2 xl3 >/etc/dhcpd.interfaces
</pre>
Then, edit /etc/dhcpd.conf.
The options are pretty self explanatory.
<pre>
        option  domain-name "xyz.mil";
        option  domain-name-servers 192.168.1.3, 192.168.1.5;

        subnet 192.168.1.0 netmask 255.255.255.0 {
                option routers 192.168.1.1;

                range 192.168.1.32 192.168.1.127;
        }
</pre>
<p>
This will tell your dhcp clients that the domain to append to DNS requests is xyz.mil (so, if the user types in 'telnet joe' then it will
send them to joe.xyz.mil).  It will point them to DNS servers 192.168.1.3 and 192.168.1.5.  For hosts that are on the same network as
an ethernet interface on the OpenBSD machine, which is in the 192.168.1.0/24 range, it will assign them an IP address between
192.168.1.32 and 192.168.1.127.  It will set their default gateway as 192.168.1.1.
</p>

<br>

<p>
<a name= "6.5"></a>
<h2>6.5 - PPP </h2>
</p>

<p>
PPP is generally an easy thing to set up.  What follows is a basic intro based
on the information provided in <kbd>/etc/ppp</kbd> and the
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=ppp&apropos=0&sektion=8&format=html">
ppp(8)</a> manual pages. These are highly suggested reading before attempting
to setup PPP or even reading this FAQ entry.  If you have read these the 
following should look farmiliar because it is that info with a little bit of
elaboration.
</p>

<p>
First you will need to find out a little bit about how your ISP sets up its
PPP connections. Does it use scripted login, PAP, CHAP, do you have a dynamic
or static IP etc. This along with some basic info about your modem will allow
us to easily create a PPP dial in script for your ISP.
</p>

<p>
First we will create a PPP conf using what is already in 
<kbd>/etc/ppp/ppp.conf.sample</kbd> as a guide. The first section we come
to is the section labeled default. This is the best place to specify logging
options, your modem device and dial options. It will always be executed when
ppp is run. The following is the default section that comes standard with
<kbd>/etc/ppp/ppp.conf.sample</kbd> and an explanation of what each
parameter does:
</p>

<p>
<strong>
&lt;Default Section&gt; <br>
default:
</strong>
</p>

<p>
This parameter tells PPP to log output which pertains to the arguments you give the parameter.
</p>

<ul>
<pre><strong>
set log Phase Chat LCP IPCP CCP tun command     
</pre></strong>
</ul>						

This will set the default modem device on the system which here is com 2

<ul>
<pre><strong>
set device /dev/cua01				
</pre></strong>
</ul>

This parameter sets the speed of the serial device.
					
<ul>
<pre><strong>
set speed 115200				
</pre></strong>
</ul>

This will set the commands to follow when certian actions take place while dialing.  Abort the call if the number is busy, abort the
call if there is no carrier.  Wait 5 seconds for carrier. Issue AT and wait for response. If AT is ok then dial the number and
timeout if not connected in 40 seconds. Once dialed in wait for the CONNECT message to tell us we are connected.

<ul>
<pre><strong>
set dial "ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 5 \"\" AT OK-AT-OK ATE1Q0 OK\\dATDT\\T TIMEOUT 40 CONNECT"
</strong></pre>
</ul>						 

<p>
Now that the default modem options are set we will need to create a section
in the ppp.conf for our ISP.  Below are a few examples of what could be in
there and what type of isp they are tailored for.
</p>

<p>
<strong>
&lt;MyISP Section&gt;  <br>
myisp:
</strong>
</p>

This of course sets the number to dial for your isp.

<ul>
<pre><strong>
set phone 1234567			 
</strong></pre>
</ul>

This sets the login options.  It will abort login if there is no carrier with a timeout of 5 seconds.  It will then wait for the
login: prompt and send your login name, and then it will wait for the password prompt and send your password.

<ul>
<pre><strong>
set login "ABORT NO\\sCARRIER TIMEOUT 5 ogin:--ogin: ppp word: ppp"
</strong></pre>
</ul>

This sets the timeout for the entire login process.

<ul>
<pre><strong>
set timeout 120				
</strong></pre>
</ul>

This will set the ip address you expect your your side and for the remote side of the connection. The /0 bit tells the connection
that no bits of this ip address need to match and the whole thing can be replaced. This also sets your default netmask and gateway.

<ul>
<pre><strong>
set ifaddr 10.0.0.1/0 10.0.0.2/0 255.255.255.0 0.0.0.0
</strong></pre>
</ul>

This will make the default gateway the remote end of the ppp connection.

<ul>
<pre><strong>
add default HISADDR		
</strong></pre>
</ul>

This tells ppp to ask the peer for the nameserver addresses that should be used. This isnt always supported, but if it is
/etc/resolv.conf will automatically be updated.

<ul>
<pre><strong>
enable dns		
</strong></pre>
</ul>


<p>
<strong>
&lt;Pap/Chap Section&gt; <br>
</strong>
What if your ISP uses PAP or CHAP? Here is a configuration that will work
with both PAP or CHAP, PPP will decide which it needs to use.
</p>

<strong>
myispPAPCHAP:  <br>
</strong>

This line sets the phone number.

<ul>
<pre><strong>
set PHONE 1234567			 
</strong></pre>
</ul>

PPP will be waiting for the peer to suggest the use of either PAP or CHAP.

<ul>
<pre><strong>
set LOGIN				 
</strong></pre>
</ul>

This is where you specify your username.				

<ul>
<pre><strong>
set authname MyName			 
</strong></pre>
</ul>

This is where you specify your password.

<ul>
<pre><strong>
set authkey MyKey			
</strong></pre>
</ul>

This sets the login timeout to 120 seconds.

<ul>
<pre><strong>
set timeout 120				
</strong></pre>
</ul>

<p>
And then procede with the standard commands from above.
</p>

<strong>&lt;Static Ip Section&gt;</strong>
<p>
All you need to do is change the ifaddr parameter like so:
<p>

<p>
<pre>
set ifaddr 209.115.93.18 209.115.93.20
</pre>
</p>

<p>
In this example, your IP is 209.115.93.18, and the peer side IP is
209.115.93.20.
</p>

<p>
<font color= "#0000e0">
<a href= "index.html">[Back to Main Index]</a>
<a href= "faq5.html">[To Section 5.0 - Kernel configuration and Disk Setup]</a>
<a href= "faq7.html">[To Section 7.0 - Keyboard controls]</a>
</font>
</p>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt= "[back]"></a>
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: faq6.html,v 1.17 1999/06/28 18:55:20 ericj Exp $</small>
</p>
</body>
</html>
