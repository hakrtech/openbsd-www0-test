<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>4 - OpenBSD 4.1 Guia de Instala&ccedil;&atilde;o</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD FAQ page">
<meta name="keywords" content="openbsd,faq">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1998-2007 by OpenBSD.">
</head>

<!-- Passes validator.w3.org.  Please keep it this way -->

<body bgcolor="#ffffff" text="#000000">

<a href="../../pt/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif"
border="0"> 
</a>
<p>

<font color="#0000e0">
<a href="index.html">[&Iacute;ndice do FAQ]</a>
<a href="../faq3.html">[Para Se&ccedil;&atilde;o 3 - Obtendo o OpenBSD]</a>
<a href="../faq5.html">[Para Se&ccedil;&atilde;o 5 - Construindo o Sistema a partir da fonte]</a>
</font>

<h1><font color="#e00000">4 - Guia de Instala&ccedil;&atilde;o do OpenBSD 4.1</font></h1>
<hr>

<p>
<h3>Conte&uacute;do</h3>
<ul>
<li><a href="#Overview"			>4.1 - Vis&atilde;o geral do processo de 
	instala&ccedil;&atilde;o do OpenBSD</a>
<li><a href="#Checklist"		>4.2 - Lista de verifica&ccedil;&otilde;es 
	antes da instala&ccedil;&atilde;o</a>
<li><a href="#MkInsMedia"		>4.3 - Criando uma m&iacute;dia de  
	instala&ccedil;&atilde;o do OpenBSD</a>
    <ul>
    <li><a href="#UnixFlop"		>4.3.1 - Criando disquetes no Unix</a>
    <li><a href="#DosFlop"		>4.3.2 - Criando disquetes no Windows ou DOS</a>
    <li><a href="#MkCD-ROM"		>4.3.3 - Criando um CD de boot 
	(inicializa&ccedil;&atilde;o)</a>
    </ul>

<li><a href="#Boot"				>4.4 - Carregando a m&iacute;dia de 
	instala&ccedil;&atilde;o do OpenBSD</a>
<li><a href="#Install"			>4.5 - Executando a instala&ccedil;&atilde;o</a>
  <ul>
  <li><a href="#Start"			>4.5.1 - Iniciando a 
  	instala&ccedil;&atilde;o</a>
  <li><a href="#Disks"			>4.5.2 - Configurando os discos</a>
  <li><a href="#Hostname"		>4.5.3 - Configurando o nome do host</a>
  <li><a href="#Network"		>4.5.4 - Configurando a rede</a>
  <li><a href="#InstMedia"		>4.5.5 - Escolhendo a m&iacute;dia de 
  	instala&ccedil;&atilde;o</a>
  <li><a href="#Filesets"		>4.5.6 - Escolhendo o conjunto de arquivos</a>
  <li><a href="#Finish"			>4.5.7 - Finalizando</a>
  </ul>

<li><a href="#FilesNeeded"		>4.6 - Quais arquivos s&atilde;o 
	necess&aacute;rios para instala&ccedil;&atilde;o?</a>
<li><a href="#Partitioning"		>4.7 - Quando de espa&ccedil;o eu preciso para 
	uma instala&ccedil;&atilde;o do OpenBSD?</a>
<li><a href="#Multibooting"		>4.8 - Boot m&uacute;ltiplo com OpenBSD/i386</a>
<li><a href="#SendDmesg"		>4.9 - Enviando o seu dmesg para 
	dmesg@openbsd.org ap&oacute;s a instala&ccedil;&atilde;o</a>
<li><a href="#AddFileSet"		>4.10 - Adicionando arquivos ap&oacute;s a 
	instala&ccedil;&atilde;o</a>
<li><a href="#bsd.rd"			>4.11 - O que &eacute; 'bsd.rd'?</a>
<li><a href="#InstProb"			>4.12 - Problemas comuns de 
	instala&ccedil;&atilde;o</a>
  <ul>
  <li><a href="#cpq16m"			>4.12.1 - Meu Compaq s&oacute; reconhece 
  	16M de RAM</a>
  <li><a href="#noboot"			>4.12.2 - Meu i386 n&atilde;o da boot 
  	ap&oacute;s a instala&ccedil;&atilde;o</a>
  <li><a href="#sshhang"		>4.12.3 - Minha m&aacute;quina da boot, mas 
  	para na gera&ccedil;&atilde;o de chaves do OpenSSH</a>
  <li><a href="#noftplist"		>4.12.4 - Eu recebo a mensagem "Failed to 
  	change directory" quando executo a instala&ccedil;&atilde;o</a>
  <li><a href="#blankfdisk"		>4.12.5 - Minha tabela de 
  	parti&ccedil;&atilde;o do fdisk est&eacute; corrompida ou vazia!</a>
  </ul>

<li><a href="#site"				>4.13 - Customizando o processo de 
	instala&ccedil;&atilde;o</a>
<li><a href="#Multiple"			>4.14 - Como eu instalo um n&uacute;mero 
	similar de sistemas?</a>
<li><a href="#getdmesg"			>4.15 - Como eu obtenho o dmesg(8) para 
	reportar um problema de instala&ccedil;&atilde;o?</a>
</ul>
<hr>

<p>
<a name="Overview"></a>
</p><h2>4.1 - Vis&atilde;o geral do processo de instala&ccedil;&atilde;o do OpenBSD</h2>

<p>
O OpenBSD possui um robusto e adapt&aacute;vel procedimento de 
instala&ccedil;&atilde;o baseado em texto, e pode ser instalado a partir de 
um &uacute;nico disquete.
Muitas plataformas possuem procedimentos de instala&ccedil;&atilde;o similares;
No entanto elas se diferenciam em alguns detalhes.
Em todo caso, &eacute; aconselh&aacute;vel que voc&ecirc; leia o documento 
INSTALL espec&iacute;fico da sua plataforma no diret&oacute;rio 
<i>platform</i> do CD-ROM ou site FTP
(por exemplo, <tt>i386/INSTALL.i386</tt>, <tt>mac68k/INSTALL.mac68k</tt>
ou <tt>sparc/INSTALL.sparc</tt>).

<p>
O processo de instala&ccedil;&atilde;o do OpenBSD usa um kernel 
especial com um conjunto de utilit&aacute;rios e scripts de 
instala&ccedil;&atilde;o embutidos em um disco de RAM pr&eacute;-carregado.
Ap&oacute;s este kernel ser carregado, o sistema operacional &eacute; 
extra&iacute;do de alguns arquivos 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
(<tt>.tgz</tt>).
Existem diversas maneiras de inicializar este kernel de 
instala&ccedil;&atilde;o:

<ul>
<li><b>Disquetes:</b>
Imagens em disquetes s&atilde;o fornecidas para a cria&ccedil;&atilde;o de 
disquetes de instala&ccedil;&atilde;o em outros sistemas
<a href="#UnixFlop">Unix</a>, ou em sistemas
<a href="#DosFlop">DOS/Windows</a>.
Os nomes dos arquivos s&atilde;o tipicamente <tt>floppy41.fs</tt>, embora 
diversas plataformas possuam m&uacute;ltiplas imagens de disquete 
dispon&iacute;veis.

<li><b>CD-ROM:</b> 
Em diversas plataformas uma imagem de CD-ROM
(<tt>cd41.iso</tt>) &eacute; disponibilizada para a cria&ccedil;&atilde;o de 
um CD-ROM inicializ&aacute;vel.
Ela cont&eacute;m apenas o kernel para instala&ccedil;&atilde;o - para instalar 
arquivos &eacute; necess&aacute;rio baix&aacute;-los via FTP ou de outra fonte.
Voc&ecirc; pode, &eacute; claro, construir seu pr&oacute;prio CD-ROM com os 
arquivos e ferramentas que deseja.

<li><b>Parti&ccedil;&atilde;o existente:</b> 
O <a href="#bsd.rd">disco de RAM</a> do kernel, pode ser utilizado para 
inicializa&ccedil;&atilde;o de uma parti&ccedil;&atilde;o j&aacute; existente 
do OpenBSD ou para autaliza&ccedil;&atilde;o ou reinstala&ccedil;&atilde;o.

<li><b>Rede:</b> Algumas plataformas suportam boot pela rede
(por exemplo, usando <a href="../faq6.html#PXE">PXE</a> ou outro
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&amp;sektion=8">m&eacute;todo de boot pela rede</a>).

<li><b>Escrevendo uma imagem do sistema de arquivo para o disco:</b> uma 
imagem do sistema de arquivo pode ser escrita para uma parti&ccedil;&atilde;o 
existente e ent&atilde;o inicializada.

<li><b>Fita inicializ&aacute;vel:</b> Algumas plataformas suportam 
inicializa&ccedil;&atilde;o partir de fitas.
Estas fitas podem ser criadas seguindos as instru&ccedil;&otilde;es do arquivo 
INSTALL.<i>plataforma</i>.

</ul>

Nem todas as <a href="../../pt/plat.html">plataformas</a> 
suportam todos os m&eacute;todos de boot:

<ul>
<li><a href="../../alpha.html"><b>alpha:</b></a> Disquete, CD-ROM, rede,
escrevendo uma imagem de disquete para o disco.

<li><a href="../../amd64.html"><b>amd64:</b></a> Disquete, CD-ROM,
<a href="../faq6.html#PXE">rede</a>.

<li><a href="../../cats.html"><b>cats:</b></a> CD-ROM.

<li><a href="../../hp300.html"><b>hp300:</b></a> CD-ROM, rede.

<li><a href="../../hppa.html"><b>hppa:</b></a> Rede.

<li><a href="../../i386.html"><b>i386:</b></a> Disquete, CD-ROM,
<a href="../faq6.html#PXE">rede</a>.

<li><a href="../../mac68k.html"><b>mac68k:</b></a> Boot utilizando
ferramentas que rodam em Mac OS. Veja
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.1/mac68k/INSTALL.mac68k">INSTALL.mac68k</a>
para mais detalhes.

<li><a href="../../macppc.html"><b>macppc:</b></a> CD-ROM, rede.

<li><a href="../../mvme68k.html"><b>mvme68k:</b></a> Rede, fita 
inicializ&aacute;vel.

<li><a href="../../mvme88k.html"><b>mvme88k:</b></a> Rede, fita inicializ&aacute;vel.

<li><a href="../../sparc.html"><b>sparc:</b></a> Disquete, 
CD-ROM, rede, escrevendo uma imagem para uma parti&ccedil;&atilde;o swap 
existente, fita inicializ&aacute;vel.

<li><a href="../../sparc64.html"><b>sparc64:</b></a> Disquete (somente U1/U2),
CD-ROM, rede, escrevendo uma imagem para uma parti&ccedil;&atilde;o existente.

<li><a href="../../vax.html"><b>vax:</b></a> Disquete, Rede.

</ul>

Todas as plataformas podem usar
<a href="#bsd.rd">bsd.rd</a> para reinstala&ccedil;&atilde;o ou 
atualiza&ccedil;&atilde;o.

<p>
Uma vez que o kernel estiver carregado, voc&ecirc; possui diversas 
op&ccedil;&otilde;es para obter o 
<a href="#FilesNeeded">conjunto de arquivos de instala&ccedil;&atilde;o</a>.
Lembre-se, nem todas as plataformas suportam todas as op&ccedil;&otilde;es.

<ul>
<li><b>CD-ROM:</b> 
N&oacute;s preferimos que voc&ecirc; use o
<a href="../../orders.html">conjunto de CD-ROM's oficiais</a>, mas por 
necessidades especiais voc&ecirc; pode criar seu pr&oacute;prio CD-ROM.

<li><b>FTP:</b>
Qualquer <a href="../../ftp.html">espelho FTP</a>
do OpenBSD ou seu pr&oacute;prio servidor FTP local.

<li><b>HTTP:</b>
Qualquer <a href="../../ftp.html#http">espelho HTTP</a>
do OpenBSD ou seu pr&oacute;prio servidor HTTP local.

<li><b>Pati&ccedil;&atilde;o local:</b>
Em muitos casos, voc&ecirc; pode instalar o conjunto de arquivos 
de outra parti&ccedil;&atilde;o do seu pr&oacute;prio disco r&iacute;gido local.
Por exemplo, em <a href="../../i386.html">i386</a>,
voc&ecirc; pode instalar de uma parti&ccedil;&atilde;o FAT ou de um CD-ROM 
formatado em ISO9660, Rock Ridge ou formato Joliet.
Em alguns casos, voc&ecirc; deve montar manualmente o sistema de arquivos para 
depois poder usar.

<li><b>NFS:</b>
Algumas plataformas suportam NFS para montar o conjunto de arquivos 
de instala&ccedil;&atilde;o.

<li><b>Fita:</b>
O conjunto de arquivos de instala&ccedil;&atilde;o podem ser lidos de uma 
fita pelo sistema.
Detalhes da cria&ccedil;&atilde;o da fita est&atilde;o no documento 
<tt>INSTALL.</tt><i>platform</i>.
</ul>

<a name="Checklist"></a>
<h2>4.2 - Lista de verifica&ccedil;&otilde;es antes da instala&ccedil;&atilde;o</h2>

<p>
Antes de voc&ecirc; come&ccedil;ar a instala&ccedil;&atilde;o, voc&ecirc; deve 
ter uma id&eacute;ia do que precisa para termin&aacute;-la. 

Voc&ecirc; deve conhecer pelo menos os seguintes itens abaixo.
<ul>
<li>Nome da m&aacute;quina
  <li>Hardware instalado e dispon&iacute;vel
  <ul>
  <li>Verifique a compatibilidade do seu hardware na p&aacute;gina de 
  	compatibilidades
  <li>Se for ISA, voc&ecirc; precisa saber configurar o seu hardware, e 
  	confirmar quando o OpenBSD as requerer.
  </ul>
<li>M&eacute;todo de instala&ccedil;&atilde;o a ser usado (CD-ROM, FTP, etc.)
<li>Foi encontrado um erro s&eacute;rio, como o sistema ser&aacute; corrigido?
  <ul>
  <li>Se feito localmente, voc&ecirc; necessitar&aacute; ter
      <a href="#Partitioning">espa&ccedil;o suficiente</a> dispon&iacute;vel 
        para a &aacute;rvore de fontes e para constru&iacute;-la.
  <li>Sen&atilde;o, voc&ecirc; precisar&aacute; de acesso a outra 
  	m&aacute;quina para construir um novo 
	<a href="../faq5.html#Release">release</a>.
  </ul>
<li>Disposi&ccedil;&atilde;o desejada do disco
  <ul>
  <li>Existe a necessidade de os dados serem armazenados em outro local?
  <li>Voc&ecirc; precisa que o OpenBSD co-exista com outro SO neste sistema?
      Se sim, como ambos ser&atilde;o carregados?
      Voc&ecirc; precisar&aacute; instalar um "gerenciador de
	boot/inicializa&ccedil;&atilde;o"?
  <li>Voc&ecirc; deseja que o disco todo seja usado para o OpenBSD, ou deseja 
    manter uma parti&ccedil;&atilde;o/SO existente (ou espa&ccedil;o para 
	uso futuro)?
  <li>Como voc&ecirc; deseja subparticionar o OpenBSD no seu disco?
  </ul>
<li>Configura&ccedil;&otilde;es de rede, se voc&ecirc; n&atilde;o usa DHCP:
  <ul>
  <li>Nome de dom&iacute;nio
  <li>Endere&ccedil;o(s) do(s) Servidor(es) de Nomes (DNS)
  <li>Endere&ccedil;o IP e mascar&aacute; de rede para cada placa de rede
  <li>Endere&ccedil;o do roteador (gateway)
  </ul>
<li>Voc&ecirc; pretende usar o sistema de janelas X?
</ul>


<a name="MkInsMedia"></a>
<h2>4.3 - Criando uma m&iacute;dia de instala&ccedil;&atilde;o do OpenBSD</h2>

<p>
Como exemplo, n&oacute;s olharemos as imagens de instala&ccedil;&atilde;o 
dispon&iacute;veis para as plataformas <a href="../../i386.html">i386</a> 
e <a href="../../sparc.html">sparc</a>.

<p>
A plataforma <a href="../../i386.html">i386</a> possui seis imagens de disco 
separadas para instala&ccedil;&atilde;o que podem ser escolhidas:

<ul>
<li><b><tt>floppy41.fs</tt></b> (PC Desktop) suporte para v&aacute;rias 
  placas de rede PCI e ISA, suporte a IDE e simples adaptadores SCSI e 
  algumas placas PCMCIA. A maioria dos usu&aacute;rios usa esta imagem 
  para iniciar a instala&ccedil;&atilde;o a partir do disquete.
<li><b><tt>floppyB41.fs</tt></b> (Servidores) suporte para diversos 
  controladores RAID e para alguns adaptadores SCSI menos comuns.  No 
  entanto, suporte para diversos adaptadores SCSI e muitas placas de rede 
  EISA e ISA foram removidos.
<li><b><tt>floppyC41.fs</tt></b> (Laptops) suporte para diversos dispositivos 
  CardBus e PCMCIA encontrados em muitos laptops.
<li><b><tt>cdrom41.fs</tt></b> &eacute;, em efeito uma combina&ccedil;&atilde;o 
  de todos os tr&ecirc;s discos de inicializa&ccedil;&atilde;o. Pode ser usado 
  para fazer um disquete de inicializa&ccedil;&atilde;o de 2.88M, ou mais 
  comumente, como a imagem de inicializa&ccedil;&atilde;o para um CD 
  grav&aacute;vel customizado.
<li><b><tt>cd41.iso</tt></b> &eacute; uma imagem ISO9660 que pode ser usada 
  para criar um CD inicializ&aacute;vel na maiorias dos softwares de 
  cria&ccedil;&atilde;o de CD-ROM's na maioria das plataformas.
  Essa imagem &eacute; a que cont&eacute;m a maior sele&ccedil;&atilde;o de 
  drivers de dispositivos, e &eacute; usualmente a escolha mais recomendada se 
  o seu hardware puder inicializaro a partir do CDROM.
<li><b><tt>cdemu41.iso</tt></b> &eacute; uma imagem ISO9660, usando
  inicializa&ccedil;&atilde;o "emula&ccedil;&atilde;o de disquete", usando a 
  imagem de 2.88M, <tt>cdrom41.fs</tt>.  Espera-se que poucos usu&aacute;rios 
  necessitem desta imagem -- a maioria dever&aacute; usar o <tt>cd41.iso</tt>, 
  use somente o <tt>cdemu41.iso</tt> se o <tt>cd41.iso</tt> n&atilde;o 
  funcionar.
</ul>

Sim, existem situa&ccedil;&otilde;es em que pode ser necess&aacute;rio um disco 
para dar suporte a um adaptador SCSI e outro disco para suporte a sua placa de 
rede. Felizmente, isso &eacute; um evento raro, e na maioria das vezes pode ser 
contornado.

<p>
A plataforma <a href="../../sparc.html">sparc</a> possui tr&ecirc;s imagens 
de disco separadas para instala&ccedil;&atilde;o que podem ser escolhidas:

<ul>
<li><b><tt>floppy41.fs:</tt></b> Suporte para sistemas com disquete.
<li><b><tt>cd41.iso</tt></b> Uma imagem ISO usada para criar seu pr&oacute;prio 
  CD para inicializar sistemas SPARC que possuem CD-ROM.
<li><b><tt>miniroot41.fs</tt></b> Pode ser escrito em uma 
  parti&ccedil;&atilde;o swap e inicializado.
</ul>

<a name="MkFlop"></a>
<a name="UnixFlop"></a>
<h3>4.3.1 - Criando disquetes no Unix</h3>

<p>
Para criar um disquete formatado, use o comando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdformat&amp;sektion=1&amp;arch=i386">fdformat(1)</a>
tanto para formatar quanto para checar blocos defeituosos.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>fdformat /dev/rfd0c</b>
  Format 1440K floppy `/dev/rfd0c'? (y/n): y
  Processing VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV done.
</pre></td></tr></table>

<p>
Se a sua sa&iacute;da for parecida com a do exemplo acima, ent&atilde;o o seu 
disco esta OK. No entanto, se a sua sa&iacute;da n&atilde;o for TUDO "V" 
ent&atilde;o o seu disco pode estar com problemas, tente outra vez com um 
disco novo.

<p>
Note que sistemas Unix possuem diferentes comandos para formatar disquetes.
Consulte a documenta&ccedil;&atilde;o do seu sistema para verificar o 
procedimento exato.

<p>
Se voc&ecirc; j&aacute; possui um disquete limpo e formatado, ent&atilde;o 
&eacute; hora de escrever a imagem de instala&ccedil;&atilde;o.
Para isso, voc&ecirc; pode usar o utilit&aacute;rio
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=0">dd(1)</a>
Um exemplo de uso do <tt>dd(1)</tt>:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>dd if=floppy41.fs of=/dev/rfd0c bs=32k</b>
</pre></td></tr></table>

<p>
Uma vez que a imagem foi escrita, verifique para ter certeza de que a imagem 
copiada &eacute; igual a original com o comando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cmp&amp;sektion=1">cmp(1)</a>
Se o disquete for igual a imagem original, voc&ecirc; ver&aacute; somente o 
prompt novamente.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>cmp /dev/rfd0c floppy41.fs</b>
</pre></td></tr></table>

<a name="DosFlop"></a>
</p><h3>4.3.2 - Criando disquetes no Windows ou DOS</h3>

<p>
Esta se&ccedil;&atilde;o descreve como gravar imagens de 
instala&ccedil;&atilde;o em sistemas Windows ou DOS.
Voc&ecirc; pode pegar as ferramentas mencionadas abaixo no diret&oacute;rio
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.1/tools/">tools</a>
em qualquer espelho FTP, ou do diret&oacute;rio <tt>4.1/tools</tt> encontrado 
no CD1 do conjunto de CD's do OpenBSD.

<p>
Para preparar o disquete no MS-DOS ou Windows, primeiramente use uma ferramenta 
nativa destes sistemas para formatar o disquete.

<p>
Para escrever a imagem de instala&ccedil;&atilde;o no disquete preparado 
voc&ecirc; pode usar
<i>rawrite</i>, <i>fdimage</i>, or <i>ntrw</i>.
<i>rawrite</i> n&atilde;o funciona em Windows NT, 2000 ou XP.

<p>
Note que <tt>FDIMAGE.EXE</tt> e <tt>RAWRITE.EXE</tt> s&atilde;o ambos 
aplica&ccedil;&otilde;es MS-DOS, e limitam os nomes de arquivos segundo a 
conven&ccedil;&atilde;o MS-DOS "8.3".
Um <tt>floppyB41.fs</tt> e <tt>floppyC41.fs</tt> possuem nome de arquivos 
longos, voc&ecirc; ter&aacute; que encontrar como seu sistema armazenou os 
arquivos em "formato 8.3" antes de usar o <tt>FDIMAGE.EXE</tt> ou
<tt>RAWRITE.EXE</tt> para criar seu disquete de inicializa&ccedil;&atilde;o.

<p>
Exemplo do uso do <i>rawrite</i>:
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <b>rawrite</b>
  RaWrite 1.2 - Write disk file to raw floppy diskette

  Enter source file name: <b>floppy41.fs</b>
  Enter destination drive: <b>a</b>
  Please insert a formatted diskette into drive A: and press -ENTER- : <i><b>Enter</b></i>
</pre></td></tr></table>

<p>
Exemplo de uso do <i>fdimage</i>:
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>fdimage -q floppy41.fs a:</strong>
</pre></td></tr></table>

<p>
Exemplo de uso do <i>ntrw</i>:
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>ntrw floppy41.fs a:</strong>
  3.5", 1.44MB, 512 bytes/sector
  bufsize is 9216
  1474560 bytes written
</pre></td></tr></table>

<a name="MkCD-ROM"></a>
</p><h3>4.3.3 - Criando um CD-ROM</h3>

<p>
Voc&ecirc; pode criar um CD-ROM usando o arquivo <tt>cd41.iso</tt> ou, no 
caso de plataformas i386, voc&ecirc; pode usar tamb&eacute;m o 
<tt>cdrom41.fs</tt>
como a imagem de inicializa&ccedil;&atilde;o por disquete que &eacute; 
usada para inicializar um sistema i386 do CD-ROM. 
Os detalhes exatos ficam por conta do leitor, que deve decidir que ferramentas 
usar para a cria&ccedil;&atilde;o do CD.

<p>
Algumas ferramentas do OpenBSD s&atilde;o:
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkhybrid&amp;sektion=8">mkhybrid(8)</a>
<li><a href="http://cdrecord.berlios.de/old/private/cdrecord.html">cdrecord</a>,
parte do pacote cdrtools encontrado no <a href="../faq15.html"> Sistema
de ports do OpenBSD</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cdio&amp;sektion=1">cdio(1)</a>'s
"track at once" (tao) na op&ccedil;&atilde;o de grava&ccedil;&atilde;o.
</ul>

<a name="Boot"></a>
<h2>4.4 - Carregando a m&iacute;dia de instala&ccedil;&atilde;o do OpenBSD</h2>

<h3>Incializa&ccedil;&atilde;o i386/amd64</h3>

Carregar uma imagem de instala&ccedil;&atilde;o em plataformas i386 e amd64 
n&atilde;o &eacute; nenhuma novidade para muitas pessoas.
Se voc&ecirc; esta usando um disquete, simplesmente insira o disquete no drive 
e inicialize seu sistema. 
A imagem ser&aacute; ent&atilde;o carregada, desde que a sua BIOS esteja 
configurada para inicializar pelo disquete.
Se voc&ecirc; vai utilizar o CD, voc&ecirc; deve configurar sua BIOS para 
inicializar a partir do CD.
Algumas BIOS antigas n&atilde;o possuem esta op&ccedil;&atilde;o, neste caso 
voc&ecirc; deve utilizar um disquete para carregar a imagem de 
instala&ccedil;&atilde;o.
N&atilde;o se preocupe; mesmo que voc&ecirc; use o disquete para carregar a 
imagem voc&ecirc; ainda pode usar CD para instalar o sistema.

<p>
Voc&ecirc; pode instalar tamb&eacute;m carregando o 
<a href="#bsd.rd">bsd.rd</a> 
de uma parti&ccedil;&atilde;o existente do OpenBSD, ou pela rede usando o
<a href="../faq6.html#PXE">processo inicializa&ccedil;&atilde;o PXE</a>.

<h3>Inicializa&ccedil;&atilde;o sparc/sparc64</h3>

<b>NOTE:</b>
Nas plataformas <a href="../../sparc64.html">sparc64</a>, somente as 
m&aacute;quinas SBus (Ultra 1, Ultra 2) podem inicializar do disquete.

<p>
Para inicializa&ccedil;&atilde;o por disquete, coloque o disquete com a imagem 
de instala&ccedil;&atilde;o do OpenBSD dentro do drive.
Ent&atilde;o use os comandos abaixo para incializar:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot floppy</b>
</pre></td></tr></table>

<p>
Para inicializar por CD-ROM, coloque o CD-ROM do OpenBSD dentro do drive.
Se a sua Sun possui somente uma unidade de CD-ROM, ent&atilde;o v&aacute; ao 
prompt, aonde voc&ecirc; pode digitar '<tt>boot cdrom</tt>':

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot cdrom</b>
</pre></td></tr></table>

<p>
Naturalmente, isto funcionar&aacute; somente no modo novo de comando.
Se voc&ecirc; esta usando um modo de comando antigo (seta para direita), 
digite 'n' para o novo modo de comando.
(Se voc&ecirc; esta usando uma sparc antiga pr&eacute;-sun4c, voc&ecirc; 
provalmente n&atilde;o ter&aacute; o novo modo de comando.
Neste caso, voc&ecirc; precisa experimentar.)
Se voc&ecirc; possui m&uacute;ltiplas unidades de CD-ROM, voc&ecirc; precisa 
inciar da unidade correta.
Tente <tt>probe-scsi</tt> para o novo modo de comando.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>probe-scsi</b>

  Target 0
    Unit 0   Disk     QUANTUM LIGHTNING 365S
  Target 1
    Unit 0   Removable Disk     QUANTUM EMPIRE_1080S
  Target 3
    Unit 0   Removable Disk     Joe's CD-ROM
</pre></td></tr></table>

<p>
Veja de qual unidade de CD-ROM voc&ecirc; vai querer inicializar.  Anote o 
n&uacute;mero (target) da unidade.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot /sbus/esp/sd@X,0</b>
</pre></td></tr></table>

<a name="Install"></a>
<h2>4.5 - Executando a instala&ccedil;&atilde;o</h2>
<a name="Start"></a>
<h3>4.5.1 - Iniciando a instala&ccedil;&atilde;o</h3>
<!-- XXXrelease -->
Qualquer que seja o meio de inicializa&ccedil;&atilde;o, agora &eacute; hora de 
us&aacute;-lo.  Durante o processo de inicializa&ccedil;&atilde;o, o kernel e 
todos os programas usados para a instala&ccedil;&atilde;o do OpenBSD s&atilde;o 
carregados na mem&oacute;ria.  Os problemas mais comuns durante a 
inicializa&ccedil;&atilde;o s&atilde;o disquetes com problemas ou um drive 
desalinhado.

<p>
Em qualquer ponto durante a instala&ccedil;&atilde;o do OpenBSD, voc&ecirc; 
pode terminar o processo de instala&ccedil;&atilde;o corrente precionando 
CTRL-C e reiniciar a instala&ccedil;&atilde;o novamente sem reiniciar a 
m&aacute;quina digitando <tt>install</tt> no prompt de comando.

<p>
Quando a sua inicializa&ccedil;&atilde;o &eacute; bem sucedida, voc&ecirc; 
ver&aacute; uma quantidade de texto correndo em sua tela.
Este texto, em muitas arquiteturas em branco e azul, &eacute; o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg</a>, 
o kernel mostra para voc&ecirc; quais dispositivos foram encontrados,
e aonde. N&atilde;o se preocupe em lembrar deste texto, uma c&oacute;pia dele 
fica salva em <tt>/var/run/dmesg.boot</tt>.

<p>
Ent&atilde;o, voc&ecirc; ver&aacute; o seguinte:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  rootdev=0x1100 rrootdev=0x2f00 rawdev=0x2f02
  erase ^?, werase ^W, kill ^U, intr ^C, status ^T
  (I)nstall, (U)pgrade or (S)hell? <b>i</b>
</pre></td></tr></table>

<p>
E com isso, n&oacute;s temos nossa primeira pergunta.  Na maioria das vezes, 
voc&ecirc; tem as tr&ecirc;s op&ccedil;&otilde;es mostradas:
<ul>
<li><b>Install:</b> Carrega o OpenBSD, sobrescrevendo quaisquer dados que 
estejam na parti&ccedil;&atilde;o.  Note que &eacute; poss&iacute;vel deixar 
parti&ccedil;&otilde;es intactas neste processo, como por exemplo 
<tt>/home</tt>, mas de qualquer maneira, suponha que tudo mais ser&aacute; 
sobrescrito.
<li><b>Upgrade:</b> Instala um novo conjunto de <a href="#FilesNeeded">
arquivos</a> na m&aacute;quina, mas n&atilde;o sobrescreve nenhuma 
configura&ccedil;&atilde;o, nenhum dado de usu&aacute;rio ou programas 
adicionais.  Nenhuma formata&ccedil;&atilde;o de disco &eacute; realizada, os 
diret&oacute;rios /etc ou /var n&atilde;o s&atilde;o sobrescritos.
Algumas notas importantes:
<ul>
<li> Voc&ecirc; n&atilde;o ter&aacute; a op&ccedil;&atilde;o de instalar o 
arquivo <tt>etc41.tgz</tt>.
Depois de instalar, voc&ecirc; ter&aacute; que 
<a href="../upgrade41.html#etcUpdates">manualmente</a> efetuar as 
mudan&ccedil;as em <tt>etc41.tgz</tt> antes de seu sistema se tornar funcional.
Esta &eacute; uma etapa importante que deve ser executada, sen&atilde;o 
servi&ccedil;os chaves (como
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>)
podem n&atilde;o funcionar.

<li>O processo de atualiza&ccedil;&atilde;o n&atilde;o &eacute; projetado para 
saltar releases! Isto frequentemente funciona, mas n&atilde;o &eacute; 
suportado.
Para o OpenBSD 4.1, atualizar do 4.0 para o 4.1 &eacute; a &uacute;nica 
atualiza&ccedil;&atilde;o recomendada.
Se voc&ecirc; quer atualizar uma vers&atilde;o mais antiga, uma completa 
reinstala&ccedil;&atilde;o &eacute; recomendada.

</ul>
<!-- XXXversion -->
Mais informa&ccedil;&otilde;es sobre atualiza&ccedil;&otilde;es entre releases 
podem ser encontradas 
<a href="../upgrade41.html">aqui</a>.

<li><b>Shell:</b> As vezes, voc&ecirc; necessita executar reparos ou 
manuten&ccedil;&atilde;o em seu sistema que n&atilde;o carrega (ou n&atilde;o 
deve) carregar um kernel normal. 
Esta op&ccedil;&atilde;o habilita voc&ecirc; a realizar a 
manuten&ccedil;&atilde;o do seu sistema.
</ul>

Em ocasi&otilde;es, voc&ecirc; n&atilde;o ver&aacute; a op&ccedil;&atilde;o 
"Upgrade" listada. Depois do evendo <i>flag day</i>, n&atilde;o &eacute; 
poss&iacute;vel atualizar diretamente; voc&ecirc; deve reinstalar o sistema do 
zero.

<p>
Neste exemplo, n&oacute;s faremos uma instala&ccedil;&atilde;o, mas o processo 
de atualiza&ccedil;&atilde;o &eacute; similar.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Welcome to the OpenBSD/i386 4.1 install program.

  This program will help you install OpenBSD. At any prompt except password
  prompts you can escape to a shell by typing '!'. Default answers are shown
  in []'s and are selected by pressing RETURN.  At any time you can exit this
  program by pressing Control-C, but exiting during an install can leave your
  system in an inconsistent state.

  Terminal type: [vt220] <b><i>Enter</i></b>
  kbd(8) mapping? ('L' for list) [none] <b><i>Enter</i></b>
</pre></td></tr></table>


<p>
Na maioria dos casos, o terminal padr&atilde;o &eacute; o mais apropriado; no 
entanto se voc&ecirc; esta usando um 
<a href="../faq7.html#SerCon">console serial</a> para instalar,
n&atilde;o escolha o padr&atilde;o, responda adequadamente.

<p>
Se voc&ecirc; n&atilde;o escolher o layout do seu teclado, US ser&aacute; 
assumido por padr&atilde;o.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  IS YOUR DATA BACKED UP? As with anything that modifies disk contents, this
  program can cause SIGNIFICANT data loss.

  It is often helpful to have the installation notes handy. For complex disk
  configurations, relevant disk hardware manuals and a calculator are useful.

  Proceed with install? [no] <b>y</b>
</pre></td></tr></table>

<p>
Se voc&ecirc; escolher a op&ccedil;&atilde;o padr&atilde;o aqui, o processo de 
instala&ccedil;&atilde;o ser&aacute; abortado e um prompt de comando 
ser&aacute; mostrado.

<p>
As notas de instala&ccedil;&atilde;o referenciadas aqui podem ser encontradas 
no CD de instala&ccedil;&atilde;o e nos servidores de FTP, no arquivo 
<tt>INSTALL.<i>&lt;plat&gt;</i></tt>, aonde a sua plataforma por exemplo pode 
ser <tt>i386</tt>.

<a name="Disks"></a>
<h3>4.5.2 - Configurando os discos</h3>

<p>
A configura&ccedil;&atilde;o de discos no OpenBSD pode variar entre 
plataformas. 
Para <a href="../../i386.html">i386</a>, <a href="../../amd64.html">amd64</a>, 
<a href="../../macppc.html">macppc</a>, <a href="../../zaurus.html">zaurus</a>
e <a href="../../cats.html">cats</a>, a configura&ccedil;&atilde;o dos discos 
&eacute; feita em duas etapas.  
Primeiro, a fatia do disco rig&iacute;do referente ao OpenBSD &eacute; 
definida utilizando o fdisk(8), ent&atilde;o esta fatia &eacute; subdividida 
em parti&ccedil;&otilde;es usando o disklabel(8).

<p>
Alguns usu&aacute;rios se confundem com a terminologia utilizada aqui. Isto
acontece porque n&oacute;s estamos usando a palavra "parti&ccedil;&atilde;o" 
em dois sentidos diferentes.
Existem duas camadas de parti&ccedil;&atilde;o em diversas plataformas 
do OpenBSD, a primeira, que pode ser considerada a parti&ccedil;&atilde;o 
do Sistema Operacional, cujo m&uacute;ltiplos SO's marcam como o seu 
espa&ccedil;o no disco, e a segunda, onde a parti&ccedil;&atilde;o do 
OpenBSD &eacute; subparticionada em sistemas de arquivos individais.

A primeira camada &eacute; vis&iacute;vel na tabela de parti&ccedil;&otilde;es 
do disco para o DOS, Windows e qualquer outro SO que use este tipo
de particionamento, e a segunda camada 
da parti&ccedil;&atilde;o s&oacute; &eacute; vis&iacute;vel pelo OpenBSD e 
SO's que podem ler diretamente o seu sistema de arquivos.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Cool!  Let's get to it...

  You will now initialize the disk(s) that OpenBSD will use. To enable all
  available security features you should configure the disk(s) to allow the
  creation of separate filesystems for /, /tmp, /var, /usr, and /home.

  Available disks are: wd0.
  Which one is the root disk? (or done) [wd0] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
O disco raiz (root) &eacute; de onde o sistema &eacute; carregado e onde 
normalmente o swap reside. Discos IDE s&atilde;o mostrados como 
<tt>wd0</tt>, <tt>wd1</tt>, etc., discos SCSI e dispositivos RAID 
s&atilde;o mostrados como <tt>sd0</tt>, <tt>sd1</tt>. Todos os discos que o 
OpenBSD localizou s&atilde;o mostrados aqui -- se voc&ecirc; possui um disco 
que n&atilde;o foi exibido aqui, voc&ecirc; possui um hardware n&atilde;o 
suportado pelo OpenBSD ou mal configurado.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you want to use *all* of wd0 for OpenBSD? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Se voc&ecirc; responder "yes" a esta pergunta, todo o disco ser&aacute; 
alocado ao OpenBSD.  Isto resultara em um Registro Mestre de 
Inicializa&ccedil;&atilde;o (MBR) e parti&ccedil;&otilde;es escritas no disco 
-- uma parti&ccedil;&atilde;o, neste caso o disco inteiro, ser&aacute; 
utilizado para o OpenBSD, e ser&aacute; marcado como a parti&ccedil;&atilde;o 
inicializ&aacute;vel.  Esta &eacute; a escolha mais comum para usu&aacute;rios 
que usam o OpenBSD como sistema de produ&ccedil;&atilde;o; no entanto, existem 
alguns sistemas em que isto n&atilde;o pode ser feito.
Muitos sistemas Compaq, muitos laptops, alguns Dell e outros sistemas deixam 
uma parti&ccedil;&atilde;o para "manuten&ccedil;&atilde;o" ou "de reserva", 
que deve ser mantida intacta. Se o seu sistema possui uma 
parti&ccedil;&atilde;o que n&atilde;o pode ser apagada, n&atilde;o escolha 
"yes" na pergunta acima.
Por&eacute;m, se voc&ecirc; possui um sistema com um disco novo ou sobrando
provavelmente ir&aacute; responder "yes" (ou usar a op&ccedil;&atilde;o 
"update" do fdisk), ent&atilde;o voc&ecirc; ter&aacute; uma master boot 
recorde v&aacute;lida.

<p>
Para este exemplo, n&oacute;s assuminos que o disco ser&aacute; dividido entre 
o OpenBSD e uma parti&ccedil;&atilde;o pr&eacute;-existente do Windows 2000, 
assim deixaremos a op&ccedil;&atilde;o padr&atilde;o "no", que nos far&aacute; 
usar o programa 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>.
Voc&ecirc; pode obter mais informar&ccedil;&otilde;es sobre fdisk(8)
<a href="../faq14.html#fdisk">aqui</a>.

<p>
<b>Nota Importante:</b>
Usu&aacute;rios com um disco r&iacute;gido grande (maior do que aquele que foi 
adquirido junto com seu computador)
querer&atilde;o ver <a href="../faq14.html#LargeDrive">esta 
se&ccedil;&atilde;o</a> antes de continuar.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  You will now create a single MBR partition to contain your OpenBSD data. This
  partition must have an id of 'A6'; must *NOT* overlap other partitions; and
  must be marked as the only active partition.

  The 'manual' command describes all the fdisk commands in detail.

  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 0B    0   1  1 -  202 239 63 [          63:     3069297 ] Win95 FAT-32
   1: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  Enter 'help' for information
  fdisk: 1&gt; <b>help</b>
          help            Command help list
          manual          Show entire OpenBSD man page for fdisk
          reinit          Re-initialize loaded MBR (to defaults)
          setpid          Set the identifier of a given table entry
          disk            Edit current drive stats
          edit            Edit given table entry
          flag            Flag given table entry as bootable
          update          Update machine code in loaded MBR
          select          Select extended partition table entry MBR
          swap            Swap two partition entries
          print           Print loaded MBR partition table
          write           Write loaded MBR to disk
          exit            Exit edit of current MBR, without saving changes
          quit            Quit edit of current MBR, saving current changes
          abort           Abort program without saving current changes
  fdisk: 1&gt; 
</pre></td></tr></table>

<p>
Alguns comandos importantes:

<ul>
<li><b><tt>r</tt></b> ou <b><tt>reinit</tt>:</b> Limpa a tabela de 
parti&ccedil;&atilde;o existente, cria uma grande parti&ccedil;&atilde;o 
OpenBSD, marca a parti&ccedil;&atilde;o como ativa, e instala o c&oacute;digo 
da MBR do OpenBSD.
Equivalente a dizer "yes" na pergunta "<tt>use *all* of ...</tt>".
<li><b><tt>p</tt></b> ou <b><tt>print:</tt></b> Mostra a tabela de 
parti&ccedil;&atilde;o atual em setores. "<tt>p m</tt>" Exibira a tabela de 
parti&ccedil;&atilde;o em megabytes, "<tt>p g</tt>" exibira a tabela de 
parti&ccedil;&atilde;o em gigabytes.
<li><b><tt>e</tt></b> ou <b><tt>edit:</tt></b> editar ou alterar uma entrada da 
tabela.
<li><b><tt>f</tt></b> ou <b><tt>flag:</tt></b> Marca a parti&ccedil;&atilde;o 
como ativa, de onde o OpenBSD ser&aacute; carregado.
<li><b><tt>u</tt></b> ou <b><tt>update:</tt></b> Atualiza o c&oacute;digo da 
MBR do OpenBSD, similar a "<tt>reinit</tt>", exceto que este comando n&atilde;o 
altera a tabela de parti&ccedil;&atilde;o existente.
<li><b><tt>exit</tt></b> e <b><tt>quit:</tt></b> Cuidado com este comando, 
alguns usu&aacute;rios tem usado "exit" e "quit" com finalidades opostas.
</ul>

Vale a pena ressaltar aqui o seguinte, um erro neste ponto resultar&aacute; em 
perdas significantes de dados.  Se voc&ecirc; for fazer isso em um disco 
r&iacute;gido com dados importantes, pode valer a pena tentar em um drive sem 
dados significativos, e tamb&eacute;m possuir um backup.

<p>
Nossa parti&ccedil;&atilde;o possui 1.5G para Windows 2000 (usando sistema de 
arquivos FAT).  Olhando as informa&ccedil;&atilde;oes acima, podemos ver que 
a parti&ccedil;&atilde;o do Windows ocupa at&eacute; o cilindro 202 do disco 
r&iacute;gido. Ent&atilde;o, vamos alocar o resto do disco ao OpenBSD, 
iniciando no cilindro 203.  Voc&ecirc; poderia calcular o in&iacute;cio 
do setor do OpenBSD que &eacute; 3069360 apenas adicionando o in&iacute;cio 
do setor existente (63) com o seu tamanho (3069297).

<p>
Voc&ecirc; pode editar o layout do disco em Cylinder/Heads/Sectors. 
Qual &eacute; a mais f&aacute;cil depende do que 
voc&ecirc; quer fazer; neste caso, trabalhar em torno de uma 
parti&ccedil;&atilde;o j&aacute; existente, usando o formato 
CHS (Cylinder/Heads/Sectors) &eacute; provavelmente a forma mais f&aacute;cil.
Se voc&ecirc; esta criando uma parti&ccedil;&atilde;o nova, usar somente 
setores ser&aacute; melhor.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk: 1> <b>e 1</b>
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
   1: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>a6</b>
  Do you wish to edit in CHS mode? [n] <b>y</b>
  BIOS Starting cylinder [0 - 2585]: [0] <b>203</b>
  BIOS Starting head [0 - 239]: [0] <b><i>Enter</i></b>
  BIOS Starting sector [1 - 63]: [0] <b>1</b>
  BIOS Ending cylinder [0 - 2585]: [0] <b>2585</b>
  BIOS Ending head [0 - 239]: [0] <b>239</b>
  BIOS Ending sector [1 - 63]: [0] <b>63</b>
  fdisk:*1&gt; <b>p</b>
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 0B    0   1  1 -  202 239 63 [          63:     3069297 ] Win95 FAT-32
   1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  fdisk:*1&gt; <b>p m</b>
  Disk: wd0       geometry: 2586/240/63 [19092 Megabytes]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 0B    0   1  1 -  202 239 63 [          63:        1499M] Win95 FAT-32
   1: A6  203   0  1 - 2585 239 63 [     3069360:       17593M] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0M] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0M] unused
  fdisk:*1&gt; 
</pre></td></tr></table>

<a name="trackoffset"></a>
<p>
Em plataformas que usam fdisk &eacute; importante que a primeira 
parti&ccedil;&atilde;o salte a primeira 
trilha do disco, neste caso, iniciando no setor <tt>63</tt>.
Se a parti&ccedil;&atilde;o do OpenBSD iniciar em <tt>0</tt>,
a parti&ccedil;&atilde;o terminar&aacute; em cima do 
<a href="../faq14.html#Boot386">
Registro de Inicializa&ccedil;&atilde;o da Parti&ccedil;&atilde;o</a> 
sobrescrevendo a mesma. 
O sistema ainda poder&aacute; ser inicializado, mas a manuten&ccedil;&atilde;o 
ficar&aacute; muito dif&iacute;cil, e esta configura&ccedil;&atilde;o 
n&atilde;o &eacute; <i>recomendada ou suportada</i>.

<p>
Note que o prompt alerta para mudan&ccedil;as ainda n&atilde;o salvas, marcados 
com um asterisco ('<tt>*</tt>').  Como n&oacute;s podemos ver com a 
sa&iacute;da de <tt>p&nbsp;m</tt> n&oacute;s n&atilde;o alteramos a
parti&ccedil;&atilde;o do Windos, e conseguimos alocar o resto do disco para o 
OpenBSD com sucesso, e as parti&ccedil;&otilde;es n&atilde;o se sobreporam.

<p>
O que n&oacute;s ainda n&atilde;o fizemos foi marcar a parti&ccedil;&atilde;o 
como ativa para assim o OpenBSD conseguir ser carregado na pr&oacute;xima 
reinicializa&ccedil;&atilde;o:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>f 1</b>
  Partition 1 marked active.
  fdisk:*1&gt; <b>p</b>
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
   0: 0B    0   1  1 -  202 239 63 [          63:     3069297 ] Win95 FAT-32
  *1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  fdisk:*1&gt;
</pre></td></tr></table>

<p>
E agora, n&oacute;s estamos prontos para salvar as mudan&ccedil;as:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>w</b>
  Writing MBR at offset 0.
  wd0: no disk label
  fdisk: 1&gt; <b>q</b>
</pre></td></tr></table> 

<p>

<a name="disklabel"></a>
<h3>Criando uma subparti&ccedil;&atilde;o (disklabel)</h3>
O pr&oacute;ximo passo &eacute; usar 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a> 
para criar as subparti&ccedil;&otilde;es (fatias) na parti&ccedil;&atilde;o do 
OpenBSD.  Mais detalhes de uso do disklabel(8) podem ser encontradas no 
<a href="../faq14.html#disklabel">FAQ 14, disklabel</a>.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Here is the partition information you chose:
  
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
   0: 0B    0   1  1 -  202 239 63 [          63:     3069297 ] Win95 FAT-32
  *1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused

  You will now create an OpenBSD disklabel inside the OpenBSD MBR
  partition. The disklabel defines how OpenBSD splits up the MBR partition
  into OpenBSD partitions in which filesystems and swap space are created.

  The offsets used in the disklabel are ABSOLUTE, i.e. relative to the
  start of the disk, NOT the start of the OpenBSD MBR partition.

  disklabel: no disk label
  WARNING: Disk wd0 has no label. You will be creating a new one.
  
  # using MBR partition 1: type A6 off 3069360 (0x2ed5b0) size 36030960 (0x225c9f0)

  Treating sectors 3069360-39100320 as the OpenBSD portion of the disk.
  You can use the 'b' command to change this.

  Initial label editor (enter '?' for help at any prompt)
  &gt; <b>?</b>
  Available commands:
          ? [cmnd]  - this message or command specific help.
          a [part]  - add new partition.
          b         - set OpenBSD disk boundaries.
          c [part]  - change partition size.
          D         - set label to default.
          d [part]  - delete partition.
          e         - edit drive parameters.
          g [b|d|u] - use [b]ios, [d]isk or [u]ser geometry.
          M         - show entire OpenBSD man page for disklabel.
          m [part]  - modify existing partition.
          n [part]  - set the mount point for a partition.
          p [unit]  - print label.
          q         - quit and save changes.
          r         - recalculate free space.
          s [path]  - save label to file.
          u         - undo last change.
          w         - write label to disk.
          X         - toggle expert mode.
          x         - exit without saving changes.
          z         - zero out partition table.
  Numeric parameters may use suffixes to indicate units:
          'b' for bytes, 'c' for cylinders, 'k' for kilobytes, 'm' for megabytes,
          'g' for gigabytes or no suffix for sectors (usually 512 bytes).
          '%' for percent of total disk size, '&amp;' for percent of free space.
          Non-sector units will be rounded to the nearest cylinder.
  Entering '?' at most prompts will give you (simple) context sensitive help.
  &gt; 
</pre></td></tr></table>

<p>
Novamente, alguns comandos que merecem um pouco de aten&ccedil;&atilde;o:
<ul>
<li><b><tt>p</tt></b> - Exibe a subparti&ccedil;&atilde;o atual na tela, 
e voc&ecirc; pode usar os modificadores <tt>k, m</tt> ou <tt>g</tt> para
kilobytes, megabytes ou gigabytes.

<li><b><tt>D</tt></b> - Limpa qualquer subparti&ccedil;&atilde;o existente, 
cria uma nova subparti&ccedil;&atilde;o padr&atilde;o que cobre apenas a 
parti&ccedil;&atilde;o atual do OpenBSD.  Isto &eacute; &uacute;til no caso 
de o disco j&aacute; possuir uma subparti&ccedil;&atilde;o, e a 
parti&ccedil;&atilde;o do OpenBSD for recriada com um tamanho diferente -- 
a subparti&ccedil;&atilde;o antiga n&atilde;o pode ser removida, e isso pode 
causar confus&atilde;o.

<li><b><tt>m</tt></b> - Modifica uma entrada existente na 
subparti&ccedil;&atilde;o. Nunca superestime o que isto pode fazer por 
voc&ecirc;. Quando puder alterar o tamanho de uma subparti&ccedil;&atilde;o, 
isso N&Atilde;O altera o sistema de arquivos do disco r&iacute;gido.
Usar esta op&ccedil;&atilde;o e esperar alterar o tamanho da 
subparti&ccedil;&atilde;o &eacute; uma boa maneira de perder grandes 
quantidades de dados.
</ul>

<p>
Dividir o seu disco de maneira apropriada &eacute; muito importante.  A 
resposta a esta pergunta, "Como eu devo particionar meu sistema?" &eacute; 
"Extamente como voc&ecirc; precisa".  Isto varia de aplica&ccedil;&atilde;o 
para aplica&ccedil;&atilde;o.  N&atilde;o h&aacute; nenhuma resposta universal. 
Se voc&ecirc; n&atilde;o tem certeza de como quer particionar o seu sistema, 
veja <a href="#Partitioning">esta discuss&atilde;o</a>.

<p>
Neste sistema, n&oacute;s temos mais de 17G dispon&iacute;vel para o OpenBSD.  
Isto &eacute; muito espa&ccedil;o, e &eacute; muito prov&aacute;vel que 
n&oacute;s n&atilde;o vamos utiliz&aacute;-lo no total.  Mas, n&oacute;s 
n&atilde;o vamos usar valores muito pequenos. Melhor termos algumas centenas 
de megabytes n&atilde;o utilizados a alguns kilobytes sobrando.

<p>
No disco raiz, duas parti&ccedil;&otilde;es 'a' e 'b' <b>devem</b> ser criadas.
O processo de instala&ccedil;&atilde;o n&atilde;o continuar&aacute; at&eacute; 
que estas parti&ccedil;&otilde;es estejam dispon&iacute;veis. 'a' ser&aacute; 
usada para o sistema de arquivos raiz (/) e 'b' ser&aacute; usado para a 
&aacute;rea swap.

<p>
Ap&oacute;s pensar um pouco, n&oacute;s decidimos criar apenas as 
parti&ccedil;&otilde;es recomendadas para o sistema de arquivos (<tt>/, /tmp,
/var, /usr, /home</tt>) al&eacute;m da parti&ccedil;&atilde;o de swap:
<ul>
<li><i><b>wd0a: /</b></i> (root) - 150M.  isto &eacute; mais do que suficiente.
<li><i><b>wd0b: </b></i>(swap) - 300M.
<li><i><b>wd0d: /tmp</b></i> - 120M.  <tt>/tmp</tt> &eacute; usada para 
  cria&ccedil;&atilde;o de alguns softwares, 120M ser&aacute; o bastante para a 
  maioria das ocasi&otilde;es.
<li><i><b>wd0e: /var</b></i> - 80M.  Se este fosse um servidor Web ou de 
  correio eletr&ocirc;nico, n&oacute;s far&iacute;amos esta 
  parti&ccedil;&atilde;o bem maior, mas, este n&atilde;o &eacute; o nosso caso.
<li><i><b>wd0g: /usr</b></i> - 6G.  N&oacute;s queremos esta 
  parti&ccedil;&atilde;o grande para carregar algumas aplica&ccedil;&otilde;es 
  de usu&aacute;rios, al&eacute;m de habilitar atualiza&ccedil;&otilde;es e 
  reconstru&ccedil;&otilde;es do sistema atrav&eacute;s do c&oacute;digo fonte 
  se necess&aacute;rio.  A 
  <a href="../faq15.html#Ports">&Aacute;rvore de Ports</a> estar&aacute; aqui 
  tamb&eacute;m, o qual necessitar&aacute; de 160M de espa&ccedil;o antes dos 
  ports serem contru&iacute;dos.
  Se voc&ecirc; esta planejando construir muitas aplica&ccedil;&otilde;es a 
  partir do c&oacute;digo fonte usando o 
  <a href="..//faq15.html#Ports">ports</a> 
  em vez dos <a href="../faq15.html#PkgMgmt">pacotes</a> pr&eacute;-compilados, 
  voc&ecirc; pode necessitar de mais espa&ccedil;o aqui.
<li><i><b>wd0h: /home</b></i> - 4G.  Isto permitir&aacute; muito espa&ccedil;o 
  para os arquivos dos usu&aacute;rios.
</ul>

Agora, se voc&ecirc; adicionar as subparti&ccedil;&otilde;es conforme acima 
voc&ecirc; ver&aacute; que ainda sobram 6G de espa&ccedil;o n&atilde;o 
utilizado!  O espa&ccedil;o n&atilde;o utilizado n&atilde;o causa nenhum 
problema, e ainda nos da a flexibilidade de ampliarmos alguma 
subparti&ccedil;&atilde;o no futuro se necess&aacute;rio. <i>/tmp</i> precisa 
de mais espa&ccedil;o?  Sem problema, &eacute; s&oacute; criar uma nova 
subparti&ccedil;&atilde;o, formatar usando <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;sektion=8">newfs(8)</a>
e mudar o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5"><i>/etc/fstab</i></a> que o problema esta resolvido.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>p m</b>
  device: /dev/rwd0c
  type: ESDI
  disk: ESDI/IDE disk
  label: ST320011A
  bytes/sector: 512
  sectors/track: 63
  tracks/cylinder: 16
  sectors/cylinder: 1008
  cylinders: 16383
  total sectors: 39102336
  free sectors: 36030960
  rpm: 3600
  
  16 partitions:
  #             size        offset  fstype [fsize bsize  cpg]
    a:      17593.2M       1498.7M  unused      0     0      
    c:      19092.9M          0.0M  unused      0     0      
    i:       1498.7M          0.0M  MSDOS                   
  &gt; <b>d a</b>
  &gt; <b>a a</b>
  offset: [3069360] <b><i>Enter</i></b>
  size: [36030960] <b>150m</b>
  Rounding to nearest cylinder: 307440
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/</b>
  &gt; <b>a b</b>
  offset: [3376800] <b><i>Enter</i></b>
  size: [35723520] <b>300m</b>
  Rounding to nearest cylinder: 614880
  FS type: [swap] <b><i>Enter</i></b>
  &gt; <b>a d</b>
  offset: [3991680] <b><i>Enter</i></b>
  size: [35108640] <b>120m</b>
  Rounding to nearest cylinder: 245952
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/tmp</b>
  &gt; <b>a e</b>
  offset: [4237632] <b><i>Enter</i></b>
  size: [34862688] <b>80m</b>
  Rounding to nearest cylinder: 164304
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/var</b>
  &gt; <b>a g</b>
  offset: [4401936] <b><i>Enter</i></b>
  size: [34698384] <b>6g</b>
  Rounding to nearest cylinder: 12582864
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr</b>
  &gt; <b>a h</b>
  offset: [16984800] <b><i>Enter</i></b>
  size: [22115520] <b>4g</b>
  Rounding to nearest cylinder: 8388576
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/home</b>
  &gt; <b>p m</b>
  device: /dev/rwd0c
  type: ESDI
  disk: ESDI/IDE disk
  label: ST320011A
  bytes/sector: 512
  sectors/track: 63
  tracks/cylinder: 16
  sectors/cylinder: 1008
  cylinders: 16383
  total sectors: 39102336
  free sectors: 22115520
  rpm: 3600
  
  16 partitions:
  #             size        offset  fstype [fsize bsize  cpg]
    a:        150.1M       1498.7M  4.2BSD   2048 16384   16 # /
    b:        300.2M       1648.8M    swap                   
    c:      19092.9M          0.0M  unused      0     0      
    d:        120.1M       1949.1M  4.2BSD   2048 16384   16 # /tmp
    e:         80.2M       2069.2M  4.2BSD   2048 16384   16 # /var
    g:       6144.0M       2149.4M  4.2BSD   2048 16384   16 # /usr
    h:       4096.0M       8293.4M  4.2BSD   2048 16384   16 # /home
    i:       1498.7M          0.0M   MSDOS                   
  &gt; <b>q</b>
  Write new label?: [y] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Voc&ecirc; notar&aacute; que a subparti&ccedil;&atilde;o <i>c</i> parece ter 
sido ignorada.  Esta subparti&ccedil;&atilde;o &eacute; o seu disco 
r&iacute;gido inteiro; n&atilde;o tente alter&aacute;-la.  Voc&ecirc; 
notar&aacute; tamb&eacute;m que a subparti&ccedil;&atilde;o <i>i</i> n&atilde;o 
foi definida por n&oacute;s; esta &eacute; a pr&eacute;-existente 
parti&ccedil;&atilde;o do Windows 2000. Subparti&ccedil;&otilde;es n&atilde;o 
s&atilde;o atribu&iacute;das a alguma letra particular -- com excess&atilde;o 
de <i>a</i> (raiz), <i>b</i> (swap) e <i>c</i> (disco inteiro), o restante das 
subparti&ccedil;&otilde;es (atrav&eacute;s da letra <i>p</i>) esta 
dispon&iacute;vel para uso como voc&ecirc; desejar.
<p>

Se voc&ecirc; olhar a sa&iacute;da do disklabel, notar&aacute; que o RPM do 
seu disco provavelmente est&aacute; errado.  Isto &eacute; hist&oacute;rico; 
a velocidade do disco n&atilde;o &eacute; utilizado em nenhum lugar pelo 
sistema.  N&atilde;o se preocupe com isso.

<h3>Configurando os pontos de montagem e formatando seu sistema de arquivos</h3>

Vem agora a configura&ccedil;&atilde;o final dos seus pontos de montagem.  Se 
voc&ecirc; configurou os pontos de montagem atrav&eacute;s do 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>, 
este passo consiste em verificar a sua sele&ccedil;&atilde;o; sen&atilde;o, 
voc&ecirc; pode especificar outros pontos de montagem.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Mount point for wd0d (size=122976k)? (or 'none' or 'done') [/tmp] <b><i>Enter</i></b>
  Mount point for wd0e (size=82152k)? (or 'none' or 'done') [/var] <b><i>Enter</i></b>
  Mount point for wd0g (size=6291432k)? (or 'none' or 'done') [/usr] <b><i>Enter</i></b>
  Mount point for wd0h (size=4194288k)? (or 'none' or 'done') [/home] <b><i>Enter</i></b>
  Mount point for wd0d (size=122976k)? (or 'none' or 'done') [/tmp] <b>done</b>
  No more disks to initialize.
 
  OpenBSD filesystems:
  wd0a /
  wd0d /tmp
  wd0e /var
  wd0g /usr
  wd0h /home

  The next step *DESTROYS* all existing data on these partitions!
  Are you really sure that you're ready to proceed? [no] <b>y</b>
  /dev/rwd0a:     307440 sectors in 305 cylinders of 16 tracks, 63 sectors
          150.1MB in 1 cyl groups (306 c/g, 150.61MB/g, 19328 i/g)
  /dev/rwd0d:     245952 sectors in 244 cylinders of 16 tracks, 63 sectors
          120.1MB in 1 cyl groups (244 c/g, 120.09MB/g, 15360 i/g)
  /dev/rwd0e:     164304 sectors in 163 cylinders of 16 tracks, 63 sectors
          80.2MB in 1 cyl groups (164 c/g, 80.72MB/g, 10368 i/g)
  /dev/rwd0g:     12582864 sectors in 12483 cylinders of 16 tracks, 63 sectors
          6144.0MB in 39 cyl groups (328 c/g, 161.44MB/g, 20608 i/g)
  /dev/rwd0h:     8388576 sectors in 8322 cylinders of 16 tracks, 63 sectors
          4096.0MB in 26 cyl groups (328 c/g, 161.44MB/g, 20608 i/g)
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local, ctime=Sat Oct  7 19:49:44 2
  006)
  /dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid, ctime=T
  hu Apr 19 00:54:25 2007)
  /dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid, ctime=Th
  u Apr 19 00:54:25 2007)
  /dev/wd0g on /mnt/usr type ffs (rw, asynchronous, local, nodev, ctime=Thu Apr 19
   00:54:25 2007)
  /dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid, ctime=Th
  u Apr 19 00:54:25 2007)
</pre></td></tr></table>

<p>
Voc&ecirc; pode querer saber porque o instalador pergunta outra vez os ponto de 
montagem.  Isto permite que voc&ecirc; recupere erros ou enganos nos pontos de 
montagem durante a cria&ccedil;&atilde;o destes. Por exemplo, o processo de 
instala&ccedil;&atilde;o apagar&aacute; automaticamente todos os pontos de 
montagem duplicados que voc&ecirc; tenha especificado durante a 
configura&ccedil;&atilde;o. O programa disklabel permitir&aacute; que 
voc&ecirc; entre em tais duplicatas, permitindo assim que estas sejam checadas 
antes de se sair do programa. Subparti&ccedil;&otilde;es duplicadas apagadas 
resultar&atilde;o em subparti&ccedil;&otilde;es sem pontos de montagem, nestas 
voc&ecirc; deve atribuir novos pontos de montagem se deseja utilizar o 
espa&ccedil;o.

<p>
Observe que a pergunta "Are you really sure that you are ready to proceed" 
-- "Voc&ecirc; tem certeza que deseja continuar ? " --
por padr&atilde;o esta configurada para "no" -- "n&atilde;o" --, assim 
voc&ecirc; ter&aacute; que dizer deliberadamente para continuar e 
formatar as suas subparti&ccedil;&otilde;es. Se voc&ecirc; escolher 
n&atilde;o, voc&ecirc; simplesmente ser&aacute; jogado para um tela de linha
de comando aonde poder&aacute; reinicar o processo de instala&ccedil;&atilde;o 
digitando "install", ou reiniciando seu computador com um disco de 
inicializa&ccedil;&atilde;o.

<p>
Neste ponto todas as subparti&ccedil;&otilde;es ser&atilde;o formatadas para 
voc&ecirc;.  Isso pode levar algum tempo dependendo do tamanho das mesmas e 
da velocidade do disco.

<a name="Hostname"></a>
<h3>4.5.3 - Configurando o nome do host</h3>
<p>
Agora voc&ecirc; ir&aacute; configurar o nome do host.
Este valor, junto com o nome de dominio DNS (especificado
<a href="#Network">abaixo</a>), ser&atilde;o salvos no arquivo 
<tt>/etc/myname</tt>, que ser&aacute; usado durante a 
inicializa&ccedil;&atilde;o para configurar o nome do host.
Se voc&ecirc; n&atilde;o configurar o nome de dom&iacute;nio do seu 
sistema, o padr&atilde;o usado ser&aacute; 'my.domain'.

<p>
&Eacute; importante que voc&ecirc; configure este nome agora, porque ele 
ser&aacute; usado para a gera&ccedil;&atilde;o das chaves criptogr&aacute;ficas 
para o seu sistema na primeira inicializa&ccedil;&atilde;o depois da 
instala&ccedil;&atilde;o. Esta gera&ccedil;&atilde;o n&atilde;o depende de a 
rede estar configurada ou n&atilde;o.

<p> 
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  System hostname (short form, e.g. 'foo'): <b>puffy</b>
</pre></td></tr></table>

<a name="Network"></a>
<h3>4.5.4 - Configurando a rede</h3>

<p>
Agora &eacute; hora de configurar a sua rede.  A rede deve ser configurada
se voc&ecirc; esta planejando fazer uma instala&ccedil;&atilde;o baseada em 
FTP ou NFS, considerando que estar&aacute; baseado nestas 
informa&ccedil;&otilde;es voc&ecirc; esta pronto para come&ccedil;ar. Aqui 
esta um exemplo completo atrav&eacute;s da se&ccedil;&atilde;o de 
configura&ccedil;&atilde;o da rede.
No nosso exemplo, n&oacute; vamos conectar uma inferface (fxp0) a qual 
ser&aacute; configurada para usar DHCP a um modem a cabo, a outra
interface ser&eacute; configurada estaticamente para a rede interna.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Configure the network? [yes] <b><i>Enter</i></b>
  Available interfaces are: fxp0 xl0.
  Which one do you wish to initialize? (or 'done') [fxp0] <b>xl0</b>
  Symbolic (host) name for xl0? [puffy] <b><i>Enter</i></b>
  The default media for xl0 is
          media: Ethernet autoselect (100baseTX full-duplex)
  Do you want to change the default media? [no] <b><i>Enter</i></b>
  IPv4 address for xl0? (or 'dhcp') <b>192.168.1.254</b>
  Netmask? [255.255.255.0] <b><i>Enter</i></b>
  IPv6 address for xl0? (or 'rtsol' or 'none') [none] <b><i>Enter</i></b>
  Available interfaces are: fxp0.
  Which one do you wish to initialize? (or 'done') [fxp0] <b><i>Enter</i></b>
  Symbolic (host) name for fxp0? [puffy] <b><i>Enter</i></b>
  The media options for fxp0 are currently
          media: Ethernet autoselect (10baseT half-duplex)
  Do you want to change the media options? [no] <b><i>Enter</i></b>
  IPv4 address for fxp0? (or 'none' or 'dhcp') <b>dhcp</b>
  Issuing hostname-associated DHCP request for fxp0.
  DHCPDISCOVER on fxp0 to 255.255.255.255 port 67 interval 1
  DHCPOFFER from 73.34.136.1
  DHCPREQUEST on fxp0 to 255.255.255.255 port 67
  DHCPACK from 73.34.136.1
  bound to 69.241.244.76 -- renewal in 1800 seconds.
  IPv6 address for fxp0? (or 'rtsol' or 'none') [none] <b><i>Enter</i></b>
  No more interfaces to initialize.
  DNS domain name? (e.g. 'bar.com') [my.domain] <b>example.com</b>
  DNS nameserver? (IP address or 'none') [68.87.77.130 68.87.72.130] <b><i>Enter</i></b>
  Use the nameserver now? [yes] <b><i>Enter</i></b>
  Default route? (IP address, 'dhcp' or 'none') [dhcp] <b><i>Enter</i></b>
  Edit hosts with ed? [no] <b><i>Enter</i></b>
  Do you want to do any manual network configuration? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
<b>NOTA: </b>Somente <b>uma</b> interface de rede pode ser configurada
utilizando DHCP durante a instala&ccedil;&atilde;o. Se voc&ecirc; tentar
configurar mais de uma interface para usar DHCP vai encontrar problemas.
Voc&ecirc; ter&aacute; que configurar manualmente as outras interfaces
ap&oacute;s a instala&ccedil;&atilde;o.

<p>
Agora vamos especificar a senha para o usu&aacute;rio root:
<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
Password for root account? (will not echo) <b><i>pAssWOrd</i></b>
Password for root account? (again) <b><i>pAssWOrd</i></b>
</pre></td></tr></table>
<p>
Use uma senha segura para o usu&aacute;rio root.  Voc&ecirc; poder&aacute; 
criar outros usu&aacute;rios depois que o sistema for inicializado.  De
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=1">passwd(1)</a>:

<pre>    
   A nova senha deve ter pelo menos seis caracteres e n&atilde;o ser puramente 
   alfab&eacute;tica.  Seu comprimento total deve ser menor que _PASSWORD_LEN 
   (128 caracteres atualmente).  A mistura de caracteres mai&uacute;sculos e 
   min&uacute;sculos, n&uacute;meros e meta-caracteres &eacute; encorajada.
</pre>

<a name="InstMedia"></a>
<h3>4.5.5 - Escolhendo a m&iacute;dia de instala&ccedil;&atilde;o</h3>

<p>
Ap&oacute;s configurar a rede, o programa de instala&ccedil;&atilde;o lhe 
d&aacute; a oportunidade de fazer ajustes manuais na configura&ccedil;&atilde;o. 
<p>
Em seguida, voc&ecirc; ter&aacute; uma oportunidade de escolher sua 
m&iacute;dia de instala&ccedil;&atilde;o. As op&ccedil;&otilde;es 
s&atilde;o listadas abaixo.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Let's install the sets!
  Location of sets? (cd disk ftp http or 'done') [cd] <b><i>Enter</i></b>
  Available CD-ROMs are: cd0.
</pre></td></tr></table> 

<p>
Neste exemplo n&oacute;s vamos instalar a partir do CD-ROM. Isto 
mostrar&aacute; uma lista de todos os dispositivos no seu computador 
identificados como CD-ROM. Muitas pessoas possuem somente um. Se voc&ecirc; 
necessitar, certifique-se qual dispositivo ser&aacute; usado para se fazer 
a instala&ccedil;&atilde;o do OpenBSD.

<p>
<b>NOTA: </b>
Nem todas as plataformas suportam todas as op&ccedil;&otilde;es. Neste caso,
a plataforma OpenBSD/i386 n&atilde;o suporta instala&ccedil;&atilde;o via NFS, 
por isso esta op&ccedil;&atilde;o n&atilde;o est&aacute; na lista.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available CD-ROMs are: cd0.
  Which one contains the install media? (or 'done') [cd0] <b><i>Enter</i></b>
  Pathname to the sets?  (or 'done') [4.1/i386] <b><i>Enter</i></b>
</pre></td></tr></table> 

<p>
Aqui, voc&ecirc; ser&aacute; alertado para o diret&oacute;rio que cont&eacute;m 
os arquivos de instala&ccedil;&atilde;o, que &eacute; <tt>4.1/i386/</tt> 
no CD-ROM oficial.

<a name="Filesets"></a>
<h3>4.5.6 - Escolhendo o conjunto de arquivos.</h3>

<p>
Agora &eacute; a hora de escolher quais arquivos v&atilde;o ser instalados. 
Voc&ecirc; pode conseguir uma descri&ccedil;&atilde;o destes arquivos na 
<a href="#FilesNeeded">pr&oacute;xima se&ccedil;&atilde;o</a>. Os arquivos 
que o programa de instala&ccedil;&atilde;o encontra s&atilde;o mostrados na 
tela. O seu trabalho &eacute; informar quais arquivos ser&atilde;o instalados. 
Por padr&atilde;o todos os arquivos n&atilde;o-X s&atilde;o selecionados; no 
entanto, algumas pessoas gostam de instalar somente os arquivos que s&atilde;o 
necess&aacute;rios para a execu&ccedil;&atilde;o do OpenBSD, que s&atilde;o
<tt>base41.tgz</tt>, <tt>etc41.tgz</tt> e <tt>bsd</tt>.
Outros desejar&atilde;o instalar todos os arquivos. No exemplo abaixo se faz 
uma instala&ccedil;&atilde;o completa.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Select sets by entering a set name, a file name pattern or 'all'. De-select
  sets by prepending a '-' to the set name, file name pattern or 'all'. Selected
  sets are labeled '[x]'.

          [X] bsd
          [X] bsd.rd
          [ ] bsd.mp
          [X] base41.tgz
          [X] etc41.tgz
          [X] misc41.tgz
          [X] comp41.tgz
          [X] man41.tgz
          [X] game41.tgz
          [ ] xbase41.tgz
          [ ] xetc41.tgz
          [ ] xshare41.tgz
          [ ] xfont41.tgz
          [ ] xserv41.tgz
  Set name? (or 'done') [bsd.mp] <b>all</b>

          [X] bsd
          [X] bsd.rd
          [X] bsd.mp
          [X] base41.tgz
          [X] etc41.tgz
          [X] misc41.tgz
          [X] comp41.tgz
          [X] man41.tgz
          [X] game41.tgz
          [X] xbase41.tgz
          [X] xetc41.tgz
          [X] xshare41.tgz
          [X] xfont41.tgz
          [X] xserv41.tgz
</pre></td></tr></table>

<p>
Voc&ecirc; pode fazer todos os tipos de coisas aqui -- "<tt>-x*</tt>" removeria 
todos os componente do X, se voc&ecirc; mudasse de id&eacute;ia.  Neste caso, 
n&oacute;s poder&iacute;amos selecionar todos os arquivos.
Enquanto o sistema ir&eacute; funcionar com um conjunto de arquivos menor,
em vez de come&ccedil;ar com o padr&atilde;o &eacute; recomendado instalar
todo o conjunto de arquivos.
Mais detalhes sobre a sele&ccedil;&atilde;o do conjunto de arquivos 
<a href="#FilesNeeded">aqui</a>.

<p>
Uma vez que voc&ecirc; escolheu com sucesso os arquivos que deseja instalar, 
voc&ecirc; ser&aacute; alertado para confirmar se deseja instalar os arquivos.
Uma barra de progresso lhe informar&aacute; quanto tempo isso lever&aacute;.
Este tempo depende do sistema em que o OpenBSD esta sendo instalado, 
os arquivos que ser&atilde;o instalados, e a velocidade da m&iacute;dia fonte.  
Esta parte pode levar de poucos minutos a algumas horas.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Set name? (or 'done') [done] <b><i>Enter</i></b>
  Ready to install sets? [yes] <b><i>Enter</i></b>
  Getting bsd ...
  100% |**************************************************|  5972 KB    00:03
  Getting bsd.rd ...
  100% |**************************************************|  4887 KB    00:03
  Getting bsd.mp ...
  100% |**************************************************|  6020 KB    00:03
  Getting base41.tgz ...
  100% |**************************************************| 41437 KB    00:34
  Getting etc41.tgz ...
  100% |**************************************************|  1210 KB    00:01
  Getting misc41.tgz ...
  100% |**************************************************|  2238 KB    00:02
  Getting comp41.tgz ...
  100% |**************************************************| 76666 KB    01:02
  Getting man41.tgz ...
  100% |**************************************************|  7473 KB    00:07
  Getting game41.tgz ...
  100% |**************************************************|  2548 KB    00:02
  Getting xbase41.tgz ...
  100% |**************************************************| 10344 KB    00:08
  Getting xetc41.tgz ...
  100% |**************************************************| 90772       00:00
  Getting xshare41.tgz ...
  100% |**************************************************|  2024 KB    00:03
  Getting xfont41.tgz ...
  100% |**************************************************| 32456 KB    00:24
  Getting xserv41.tgz ...
  100% |**************************************************| 19365 KB    00:15
  Location of sets? (cd disk ftp http or 'done') [done] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Neste ponto voc&ecirc; pode adicionar arquivos de outra fonte
(incluindo <a href="#site">arquivos customizados</a>) se desejar, ou digitar 
'<tt>done</tt>' se voc&ecirc; j&aacute; instalou todos os arquivos que 
voc&ecirc; necessita.

<a name="Finish"></a>
<h3>4.5.7 - Finalizando</h3>

Em seguida, voc&ecirc; ser&aacute; questionado sobre algumas coisas sobre seu 
sistema instalado. A primeira &eacute; se o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8">sshd(8)</a>
deve ser carregado na inicializa&ccedil;&atilde;o do seu sistema.
Geralmente, voc&ecirc; vai querer o sshd(8) rodando, mas ocasionalmente pode 
n&atilde;o querer.
Se sua aplica&ccedil;&atilde;o n&atilde;o tiver necessidade do sshd(8), 
h&aacute; uma pequena vantagem te&oacute;rica de seguran&ccedil;a nisso.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Start sshd(8) by default? [yes] <b>y</b>
</pre></td></tr></table> 

<p>
(Se voc&ecirc; mudar de id&eacute;ia mais tarde, altere 
<a href="../faq10.html"><tt>/etc/rc.conf.local</tt></a> ou 
<tt>/etc/rc.conf</tt>.)

<p>
Voc&ecirc; ter&aacute; a op&ccedil;&atilde;o de carregar o 
<a href="../faq6.html#OpenNTPD">OpenNTPD</a> na inicializa&ccedil;&atilde;o do 
seu sistema. 
O OpenNTPD &eacute; uma maneira simples de manter o rel&oacute;gio do seu 
sistema corretamente sincronizado, e a configura&ccedil;&atilde;o 
padr&atilde;o &eacute; suficiente para a maioria dos usu&aacute;rios.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Start ntpd(8) by default? [no] <b>y</b>
</pre></td></tr></table>

<p>
(Se voc&ecirc; mudar de id&eacute;ia mais tarde, altere 
<a href="../faq10.html"><tt>/etc/rc.conf.local</tt></a> ou 
<tt>/etc/rc.conf</tt>.)

<p>
Em algumas plataformas lhe &eacute; perguntado se deseja rodar o X.  
Se voc&ecirc; responder 'Y', o <tt>/etc/sysctl.conf</tt> ser&aacute; 
modifcado para incluir as linhas <tt>machdep.allowaperture=1</tt> ou 
<tt>machdep.allowaperture=2</tt>, dependendo da sua plataforma.
Algumas plataformas n&atilde;o far&atilde;o esta pergunta. Se voc&ecirc; 
n&atilde;o pretende executar o X ou n&atilde;o tem certeza responda 'N', se 
mudar de id&eacute;ia basta editar o arquivo <tt>/etc/sysctl.conf</tt>. Existe 
uma vantagem de seguran&ccedil;a em deixar o driver <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&amp;sektion=4">xf86(4)</a>
desabilitado, pois as engines gr&aacute;ficas das placas de v&iacute;deo dos 
computadores modernos podem ser usadas paras alterar a mem&oacute;ria sem 
controle do processador.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you expect to run the X Window System? [no] <b>y</b>
</pre></td></tr></table>

<p>
Em seguida, voc&ecirc; ser&aacute; questionado se quer usar um 
<a href="../faq7.html#SerCons">console serial</a> com este computador,
em vez de um teclado e um monitor.
Se voc&ecirc; escolher "<tt>yes</tt>" e responder outras quest&otilde;es, o
<tt><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8">/etc/boot.conf</a></tt>
e o 
<tt><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ttys&amp;sektion=5">/etc/ttys</a></tt>
ser&atilde;o editados corretamente para voc&ecirc;.
A maioria dos usu&aacute;rios escolher&atilde;o o padr&atilde;o,
<b><tt>no</tt></b>.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Change the default console to com0? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
A sua &uacute;ltima tarefa ser&aacute; configurar a zona de tempo (time zone).  
Dependedo de onde a sua m&aacute;quina vive, existem diversas respostas 
v&aacute;lidas a esta pergunta. Neste exemplo que segue, n&oacute;s usamos 
<tt>US/Eastern</tt>, mas poder&iacute;amos ter usado <tt>EST5EDT</tt> ou 
<tt>US/Michigan</tt> e ter&iacute;amos o mesmo resultado.  Digitando <tt>?</tt> 
o prompt lhe mostrar&aacute; uma lista com poss&iacute;veis escolhas.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Saving configuration files......done.
  Generating initial host.random file ......done.
  What timezone are you in? ('?' for list) [Canada/Mountain] <b>?</b>
  Africa/      Chile/       GB-Eire      Israel       NZ-CHAT      UCT
  America/     Cuba         GMT          Jamaica      Navajo       US/
  Antarctica/  EET          GMT+0        Japan        PRC          UTC
  Arctic/      EST          GMT-0        Kwajalein    PST8PDT      Universal
  Asia/        EST5EDT      GMT0         Libya        Pacific/     W-SU
  Atlantic/    Egypt        Greenwich    MET          Poland       WET
  Australia/   Eire         HST          MST          Portugal     Zulu
  Brazil/      Etc/         Hongkong     MST7MDT      ROC          posix/
  CET          Europe/      Iceland      Mexico/      ROK          posixrules
  CST6CDT      Factory      Indian/      Mideast/     Singapore    right/
  Canada/      GB           Iran         NZ           Turkey       zone.tab
  What timezone are you in? ('?' for list) [Canada/Mountain] <b>US</b>
  What sub-timezone of 'US' are you in? ('?' for list) <b>?</b>
  Alaska          Central         Hawaii          Mountain        Samoa
  Aleutian        East-Indiana    Indiana-Starke  Pacific
  Arizona         Eastern         Michigan        Pacific-New
  Select a sub-timezone of 'US' ('?' for list): <b>Eastern</b>
  Setting local timezone to 'US/Eastern'...done.
</pre></td></tr></table>

<p>
Se voc&ecirc; necessita de precis&atilde;o, leia
<a href="../faq8.html#NTPerror">isto</a>.

<p>
As &uacute;ltimas etapas s&atilde;o para que seu sistema crie o 
diret&oacute;rio <tt>/dev</tt> (o que pode levar algum tempo em alguns 
sistemas, especialmente aqueles que possuem pouca quantidade de RAM), e 
instalar o setor de inicializa&ccedil;&atilde;o (boot blocks).

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Making all device nodes...done.
  Installing boot block...
  boot: /mnt/boot
  proto: /usr/mdec/biosboot
  device: /dev/rwd0c
  /usr/mdec/biosboot: entry point 0
  proto bootblock size 512
  /mnt/boot is 3 blocks x 16384 bytes
  fs block shift 2; part offset 3069360; inode block 216, offset 9256
  using MBR partition 1: type 166 (0xa6) offset 3069360 (0x2ed5b0)
  done.

  CONGRATULATIONS! Your OpenBSD install has been successfully completed!
  To boot the new system, enter halt at the command prompt. Once the
  system has halted, reset the machine and boot from the disk.
  # <b>halt</b>
  syncing disks... done

  The operating system has halted.
  Please press any key to reboot.
</pre></td></tr></table>

<p>
O OpenBSD agora est&aacute; instalado no seu sistema e est&aacute;
pronto para a primeira inicializa&ccedil;&atilde;o, mas antes
que voc&ecirc; o fa&ccedil;a...

<p>

<h4>Antes do reboot</h4>
Neste ponto, seu sistema esta instalado e pronto para ser incializado 
e configurado para o servi&ccedil;o.  Entretanto, antes disso, &eacute; 
melhor voc&ecirc; checar a <a href="../errata.html">
p&aacute;gina Errata</a> para ver se existe alguma falha que possa lhe causar 
algum dano.

<p>
Um truque que voc&ecirc; pode usar "antes da primeira 
inicializa&ccedil;&atilde;o" &eacute;:
<pre>    
    # <b>/mnt/usr/sbin/chroot /mnt</b>
</pre>
no prompt de shell.
Isto ajustar&aacute; seus pontos de montagem para ser o que seriam
em uma inicializa&ccedil;&atilde;o normal do seu novo sistema instalado.
Voc&ecirc; pode agora fazer configura&ccedil;&otilde;es b&aacute;sicas do seu 
sistema, como adicionar usu&aacute;rios, mudar pontos de montagem, etc.

<h4>Depois do reboot</h4>

<p>
Umas das primeiras coisa que voc&ecirc; deve ler depois de instalar o seu 
sistema &eacute;
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8">afterboot(8)</a>.

<p>
Voc&ecirc; tamb&eacute;m pode achar os seguintes links &uacute;teis:
<ul>
<li><a href="../faq10.html#AddDelUser">Adicionando usu&aacute;rios no OpenBSD</a> 
<li><a href="../faq6.html#Setup">Configura&ccedil;&atilde;o Inicial da Rede</a>
<li><a href="../faq2.html#ManPages">P&aacute;ginas de manuais de comandos populares e mais usados</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi">P&aacute;ginas de manuais Web do OpenBSD</a>
<li><a href="../faq15.html">Sistema de Ports e Pacotes do OpenBSD para 
instala&ccedil;&atilde;o de software</a>
</ul>

<h4>Uma &uacute;ltima coisa...</h4>
Os desenvolvedores do OpenBSD pedem que voc&ecirc; 
<a href="#SendDmesg">envie uma c&oacute;pia do seu dmesg</a>.  Isto &eacute; 
realmente muito apreciado por eles, e finalmente, por todos os usu&aacute;rios.

<p>
<a name="FilesNeeded"></a>
<h2>4.6 - Quais arquivos s&atilde;o necess&aacute;rios para a instala&ccedil;&atilde;o??</h2>
<!-- XXXrelease -->

<p>
Uma instala&ccedil;&atilde;o completa do OpenBSD &eacute; dividida em um 
n&uacute;mero separado de <i>conjunto de arquivos</i>.  Nem todas as 
aplica&ccedil;&otilde;es necessitar&atilde;o de todos os arquivos.
Aqui voc&ecirc; tem uma vis&atilde;o geral de cada um:
<p>
<ul>
  <li><b><i>bsd</i></b>			- Este &eacute; o kernel. <b>Necess&aacute;rio</b>
  <li><b><i>bsd.mp</i></b> 		- Kernel Multi-processor (SMP) (somenete para 
  	algumas plataformas)
  <li><b><i>bsd.rd</i></b> 		- <a href="#bsd.rd">RAM disk kernel</a>

  <li><b><i>base41.tgz</i></b>	- Cont&eacute;m o sistema base do OpenBSD 
     <b>Necess&aacute;rio</b>
  <li><b><i>etc41.tgz</i></b>	- Cont&eacute;m todos os arquivos de /etc 
    <b>Necess&aacute;rio</b>
  <li><b><i>comp41.tgz</i></b>	- Cont&eacute;m o compilador e suas 
     ferramentas, cabe&ccedil;alhos (headers) e bibliotecas. <b>Recomendado</b>
  <li><b><i>man41.tgz</i></b>    - Cont&eacute;m as p&aacute;ginas de manuais 
     <b>Recomendando</b>
  <li><b><i>misc41.tgz</i></b>   - Cont&eacute;m informa&ccedil;&otilde;es 
     diversas, documentos de configura&ccedil;&atilde;o
  <li><b><i>game41.tgz</i></b>   - Cont&eacute;m jogos para o OpenBSD
  <li><b><i>xbase41.tgz</i></b>  - Cont&eacute;m a base para instalar o X11
  <li><b><i>xetc41.tgz</i></b>   - Cont&eacute;m os arquivos de 
   configur&ccedil;&atilde;o /etc/X11 e /etc/fonts
  <li><b><i>xfont41.tgz</i></b>  - Cont&eacute;m a fonte do servidor X11 e 
  	fontes
  <li><b><i>xserv41.tgz</i></b>  - Cont&eacute;m o servidor X11
  <li><b><i>xshare41.tgz</i></b> - Cont&eacute;m p&aacute;ginas de manuais, 
     configura&ccedil;&otilde;es locais, includes, etc. para o X
</ul>

Os arquivos <b>etc41.tgz</b> e <b>xetc41.tgz</b> n&atilde;o s&atilde;o 
instalados como parte de uma atualiza&ccedil;&atilde;o, somente como parte de 
uma instala&ccedil;&atilde;o completa, assim nenhuma customiza&ccedil;&atilde;o
que voc&ecirc; fizer ser&aacute; perdida.
Voc&ecirc; mesmo ter&aacute; que atualizar manualmente seus diret&oacute;rios 
<tt>/etc</tt>, <tt>/dev</tt> e <tt>/var</tt>.

<p>
Se voc&ecirc; n&atilde;o tem inten&ccedil;&atilde;o de executar o X,
todos os <a href="../faq15.html">pacotes</a>
de terceiros que necessitam de bibliotecas gr&aacute;ficas precisam apenas
do conjunto de arquivos <b>xbase41.tgz</b>, o resto do sistema X n&atilde;o
&eacute; necess&aacute;rio.

<p>
<a name="Partitioning"></a>
<a name="SpaceNeeded"></a>  <!-- XXXobsolete tag -->
<h2> 4.7 - De quanto espa&ccedil;o eu preciso para uma instala&ccedil;&atilde;o do OpenBSD?</h2>
<!-- XXXrelease -->

<p>
Obviamente, a resposta para esta pergunta varia com base no tipo de uso 
pretendindo para seu sistema.
Entretanto, estes n&uacute;meros podem ser usados como um ponto de  
<i>partida</i>:

<blockquote><pre>
(root)             60MB
/usr               420MB (no X) or 550MB (with X)
/var               25MB
/tmp               50MB
swap               32MB
</pre></blockquote>

Aqueles s&atilde;o tamanhos m&iacute;nimos sugeridos para o sistema de arquivos 
com instala&ccedil;&atilde;o completa.
Estes n&uacute;meros incluem tamanho extra para permitir um t&iacute;pico 
sistema desktop conectado a internet, n&atilde;o mais que isso.

<p>
Mantenha os seguintes fatos em mente:
<ul>
<li>Estes s&atilde;o valores m&iacute;nimos.
Os discos s&atilde;o relatimente baratos hoje em dia, tentar
espremer seu sistema em um disco pequeno raramente &eacute; necess&aacute;rio.
Para aplica&ccedil;&otilde;es de prop&oacute;sito especial, os n&uacute;meros 
acima podem ser menores, mas &eacute; melhor voc&ecirc; testar antes.
<li>Estes n&uacute;meros N&Atilde;O incluem a &aacute;rvore de ports.
<li>Se voc&ecirc; planeja instalar uma parte significativa de software, 
fa&ccedil;a o seu <tt>/usr</tt> grande.
Isto depende das aplica&ccedil;&otilde;es, &eacute; claro.
<li>Para sistemas que manipulam grandes quantidades de e-mail ou p&aacute;ginas 
web (armazenadas, respectivamente, em <tt>/var/mail</tt> e <tt>/var/www</tt>) 
voc&ecirc; ir&aacute; fazer o seu <tt>/var</tt> uma parti&ccedil;&atilde;o 
grande, ou colocalos em parti&ccedil;&otilde;es separadas.
<li>Para sistemas multiusu&aacute;rios que geram grande quantidades de arquivos 
de log, voc&ecirc; ir&aacute; fazer o seu <tt>/var</tt> uma 
parti&ccedil;&atilde;o grande, ou criar uma parti&ccedil;&atilde;o separada 
para os arquivos de log (<tt>/var/log</tt>).
<li>Se voc&ecirc; planeja <a href="../faq5.html">recompilar seu kernel
a partir do c&oacute;digo fonte</a>, 
voc&ecirc; dever&aacute; fazer o seu <tt>/usr</tt> uma parti&ccedil;&atilde;o 
grande, 4G &eacute; um bom tamanho.
<li>Compilar alguns <a href="../faq15.html#Ports">ports</a> a partir do 
c&oacute;digo fonte pode consumir uma grande quantidade de espa&ccedil;o de
suas parti&ccedil;&otilde;es <tt>/usr</tt> e <tt>/tmp</tt>, esta &eacute; outra 
raz&atilde;o pela qual aconselhamos que voc&ecirc; use pacotes 
<a href="../faq15.html#PkgMgmt">pr&eacute;-compilados</a>.
<li>A parti&ccedil;&atilde;o <tt>/tmp</tt> &eacute; usada para a 
compila&ccedil;&atilde;o de ports, entre outras coisas,
um bom tamanho para o /tmp depende do que voc&ecirc; faz com ela.
50M pode ser de bom tamanho para a maioria dos usu&aacute;rios, mas algumas 
aplica&ccedil;&otilde;es requerem 100M ou mais de espa&ccedil;o em 
<tt>/tmp</tt>.

<li>A parti&ccedil;&atilde;o 'b' do seu disco &eacute; colocada 
obrigat&oacute;riamente como swap do seu sistema -- n&oacute;s recomendamos um 
espa&ccedil;o m&iacute;nimo de 32MB mas se voc&ecirc; tiver um disco um pouco 
maior pode colocar at&eacute; 64MB. Se voc&ecirc; tiver um disco grande pode 
colocar 256MB e at&eacute; 512MB. Por&eacute;m se voc&ecirc; est&aacute;
usando um dispositivo flash como disco, provavelmente n&atilde;o vai querer 
uma parti&ccedil;&atilde;o swap. Muitas pessoas usam a regra de que a swap 
deve ser duas vezes o tamanho da mem&oacute;ria principal.  O que n&atilde;o
faz sentido.
Os sistemas modernos possuem bastante espa&ccedil;o para swap, por&eacute;m 
&eacute; prefer&iacute;vel que seu sistema nunca fa&ccedil;a swap. Use o que 
for aprorpiado para as suas necessidades.
<li>A swap e o <tt>/var</tt> s&atilde;o utilizados para armazenar core dumps 
do sistema em um evento de 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crash&amp;sektion=8">crash(8)</a>.
Se isso &eacute; importante para voc&ecirc; &eacute; melhor ter um swap um 
pouco maior que sua mem&oacute;ria principal. Ap&oacute;s o reboot 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=savecore&amp;sektion=8">savecore(8)</a>
tentar&aacute; salvar o conte&uacute;do da sua swap no arquivo 
<tt>/var/crash</tt>, ent&atilde;o se isso for importante para voc&ecirc; sua 
parti&ccedil;&atilde;o <tt>/var</tt> deve ter uma
grande quantidade de <i>espa&ccedil;o livre</i> para estes arquivos de dump. 
Mas sejamos realistas, poucos desenvolvedores querer&atilde;o analizar o seu 
arquivo de dump de 1GB, ent&atilde;o se voc&ecirc; n&atilde;o pretende 
investigar o erro localmente o <tt>/var</tt> n&atilde;o precisa ser muito 
grande.
</ul>

<p>
H&aacute; diversas raz&otilde;es para usar sistemas de arquivos separados, em 
vez de colocar tudo em uma ou duas parti&ccedil;&otilde;es:

<ul>
<li><b>Seguran&ccedil;a</b>: Voc&ecirc; pode marcar alguns sistemas de arquivos 
  como 'nosuid', 'nodev', 'noexec', 'readonly', etc.  Isto &eacute; agora feito 
  pelo processo de instala&ccedil;&atilde;o, de fato, se voc&ecirc; usar as 
  parti&ccedil;&otilde;es acima descritas.
<li><b>Estabilidade</b>: Um usu&aacute;rio, ou um programa qualquer, podem 
  encher o sistema de arquivos com lixo se tiver permiss&otilde;es de escrever 
  nele.  Seus programas principais, que &eacute; claro rodam em diferentes 
  parti&ccedil;&otilde;es, n&atilde;o sofrer&atilde;o com isso.
<li><b>Velocidade</b>: Um sistema de arquivos que &eacute; muitas vezes escrito 
  pode come&ccedil;ar a ficar muito fragmentado.  (Felizmente, o sistema de 
  arquivos ffs, cujo OpenBSD usa, n&atilde;o tem tend&ecirc;ncia a 
  fragmenta&ccedil;&atilde;o.)
<li><b>Integridade</b>: Se um sistema de arquivos se corromper por alguma 
  raz&atilde;o os outros n&atilde;o ser&atilde;o afetados por isso e 
  continuar&atilde;o OK.
<li><b>Tamanho</b>: Muitas m&aacute;quinas possuem limites de &aacute;reas 
  no disco de onde a ROM pode carregar o kernel.  Em alguns casos, este limite 
  pode ser muito pequeno (504M para alguns 486 antigos), em outros casos, um 
  limite muito maior (por exemplo, 2G, 8G, ou 128G em sistemas i386).
  Enquanto o kernel pode terminar acima em qualquer lugar da 
  parti&ccedil;&atilde;o raiz, a parti&ccedil;&atilde;o inteira da raiz deve 
  estar dentro desta &aacute;rea.
  Para mais detalhes, veja <a href="../faq14.html#LargeDrive">
  esta se&ccedil;&atilde;o</a>.  Um bom guia vai dizer para voc&ecirc; manter 
  a sua parti&ccedil;&atilde;o / completamente abaixo de 2G, a menos que 
  voc&ecirc; soubesse que sua plataforma (e m&aacute;quina particular) pode 
  manipular mais (ou menos) do que isso.
</ul>

<p>
Algumas considere&ccedil;&otilde;es adicionais sobre particionamento:
<ul>
 <li>Para sua primeira tentativa em um sistema experimental, uma grande 
   parti&ccedil;&atilde;o <tt>/</tt> e a swap pode ser mais f&aacute;cil se 
   voc&ecirc; sabe de quanto espa&ccedil;o necessita. Fazendo isso voc&ecirc; 
   estar&aacute; sacrificando algumas caracter&iacute;sticas de 
   seguran&ccedil;a do OpenBSD que requer sistemas de arquivos separados para 
   <tt>/, /tmp, /var, /usr</tt> e <tt>/home</tt>.
   Entretanto, voc&ecirc; n&atilde;o colocar&aacute; sua primeira 
   instala&ccedil;&atilde;o como um sistema de produ&ccedil;&atilde;o.
 <li>Um sistema exposto a Internet ou a qualquer outra for&ccedil;a hostil deve 
   ter um <tt>/var</tt> separado (e at&eacute; mesmo um <tt>/var/log</tt> 
   separado) para o sistema de log.
 <li>Uma parti&ccedil;&atilde;o <tt>/home</tt> pode ser muito &uacute;til.  
   Nova vers&atilde;o do Sistema Operacional? Limpe e reinstale tudo, deixando 
   a sua parti&ccedil;&atilde;o <tt>/home</tt> intocada. Lembre-se de salvar 
   uma c&oacute;pia dos seus arquivos de configura&ccedil;&atilde;o!
 <li>Uma parti&ccedil;&atilde;o separada para qualquer coisa que acumule 
   grandes quantidades de arquivos que podem necessitar ser removidos, pode 
   ser mais r&aacute;pido formatar e recriar do que somente apagar os arquivos.
   Veja o FAQ <a href="../faq5.html#ProbObjPt">Contruindo a partir do fonte</a>
   para um exemplo (<tt>/usr/obj</tt>).
 <li>Se voc&ecirc; deseja construir o seu sistema a partir da fonte por 
   qualquer raz&atilde;o, o c&oacute;digo fonte se encontra em 
   <tt>/usr/src</tt>.  Se voc&ecirc; n&atilde;o deseja criar uma 
   parti&ccedil;&atilde;o separada para <tt>/usr/src</tt>, tenha certeza que 
   <tt>/usr</tt> ter&aacute; espa&ccedil;o suficiente.
 <li>Um fato geralmente esquecido: voc&ecirc; <b>n&atilde;o</b> precisa alocar 
   todo o espa&ccedil;o em disco quando voc&ecirc; configura o sistema! Desde 
   que voc&ecirc; achar&aacute; um desafio comprar um disco r&iacute;gido menor 
   que 20GB, pode fazer sentido deixar uma parte do seu disco n&atilde;o 
   alocado.  Se voc&ecirc; mudar o tamanho de uma parti&ccedil;&atilde;o, 
   voc&ecirc; pode alocar uma nova parti&ccedil;&atilde;o a partir do seu 
   espa&ccedil;o n&atilde;o utilizado,
   <a href="../faq10.html#DupFS">duplicar</a> a parti&ccedil;&atilde;o 
   existente para a nova parti&ccedil;&atilde;o, mudar o
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab</a>
   para apontar para a nova parti&ccedil;&atilde;o, remontar, e voc&ecirc; 
   ter&aacute; mais espa&ccedil;o.
 <li>Se voc&ecirc; fizer as suas parti&ccedil;&otilde;es muito pr&oacute;ximas 
   do tamanho m&iacute;nimo requerido, provavelmente voc&ecirc; 
   lamentar&aacute; isso mais tarde, quando for a hora de fazer a 
   atualiza&ccedil;&atilde;o do seu sistema.
 <li>Se voc&ecirc; fizer parti&ccedil;&otilde;es muito grande, tenha em mente 
   que sempre que for executar a checagem do sistema de arquivos utilizando 
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">fsck(8)</a> ele
   ir&aacute; requerer 1MB de RAM por gigabyte do sistema de arquivo, 
   al&eacute;m de consumir muito tempo e as vezes ser impraticavel em sistemas 
   de arquivos muito antigos.
   (Veja <a href="../faq14.html#LargeDrive">esta se&ccedil;&atilde;o</a>).
 <li>Se voc&ecirc; permitir que usu&aacute;rios escrevam em <tt>/var/www</tt> 
   (i.e., p&aacute;ginas web pessoais), voc&ecirc; pode desejar por /var/www 
   em uma parti&ccedil;&atilde;o separada, assim voc&ecirc; pode usar 
   <a href="../faq10.html#Quotas">quotas</a> para restringir o espa&ccedil;o 
   utilizado pelos usu&aacute;rios, e se a parti&ccedil;&atilde;o ficar cheia, 
   nenhuma outra parte do seu sistema ser&aacute; comprometida.
</ul>


<p>
<a name="Multibooting"></a>
<h2>4.8 - Boot m&uacute;ltiplo com OpenBSD/i386</h2>

Boot m&uacute;ltiplo (multiboot) &eacute; ter diversos sistemas operacionais 
em um s&oacute; computador, e meios de selecionar qual OS voc&ecirc; ir&aacute; 
inicializar.
Isso <i>n&atilde;o</i> &eacute; uma tarefa trivial!  Se voc&ecirc; n&atilde;o 
compreender o que est&aacute; fazendo, voc&ecirc; pode perder grandes 
quantidades de dados do seu computador.  Novos usu&aacute;rios do OpenBSD 
s&atilde;o incentivados <i>fortemente</i> a come&ccedil;ar com um disco 
r&iacute;gido sem dados em uma m&aacute;quina dedicada, e ent&atilde;o praticar 
as suas configura&ccedil;&otilde;es em um sistema de testes antes de se 
aventurar em uma configura&ccedil;&atilde;o multiboot em uma m&aacute;quina em 
produ&ccedil;&atilde;o.  <a href="../faq14.html">FAQ 14</a> possui mais 
informa&ccedil;&otilde;es sobre o processo de boot do OpenBSD.

<p>
Est&atilde;o aqui diversas op&ccedil;&otilde;es de  multibooting:

<h3>Configurando parti&ccedil;&otilde;es ativas</h3>
Este &eacute; provavelmente o mais negligenciado, e, as vezes a melhor 
solu&ccedil;&atilde;o para multibooting.  Simplesmente ative a 
parti&ccedil;&atilde;o que voc&ecirc; esta usando atualmente se est&aacute; 
for a do SO que voc&ecirc; deseja carregar no pr&oacute;ximo boot.  
Virtualmente todos os SO's oferecem um programa para fazer isso; o do OpenBSD 
&eacute; o 
<a href="../faq14.html#fdisk">fdisk(8)</a>, programas similares existem 
para sistemas Windows 9x e DOS, e muitos outros sistemas operacionais.  Isso 
pode ser altamente desej&aacute;vel para um SO que leve muito tempo para 
desligar ou reiniciar -- voc&ecirc; pode configur&aacute;-lo e iniciar o 
processo de reboot, de uma volta, pegue um copo de caf&eacute; e volte
para o sistema inicializado do jeito que voc&ecirc; queria -- sem esperar
pelo Momento M&aacute;gico de selecionar o pr&oacute;ximo SO.

<h3>Disquete de Boot</h3>
Se voc&ecirc; possui um sistema que n&atilde;o usa frequentemente o OpenBSD 
(ou n&atilde;o deseja que usu&aacute;rios deste computador notem qualquer 
mudan&ccedil;a), considere ter um disquete de inicializa&ccedil;&atilde;o 
(boot floppy).  Simplesmente use um dos <a href="#MkFlop">
Disquetes de inicializa&ccedil;&atilde;o padr&atilde;o do OpenBSD</a>,
e crie o arquivo <tt>/etc/boot.conf</tt> (sim, voc&ecirc; tamb&eacute;m 
ter&aacute; que criar o diret&oacute;rio <tt>/etc</tt> no seu disquete) com o 
conte&uacute;do:

<pre>     
	 boot hd0a:/bsd
</pre>

para o caso de o sistema iniciar do disco r&iacute;gido 0, 
parti&ccedil;&atilde;o OpenBSD 'a', arquivo do kernel <tt>/bsd</tt>.  Note que
voc&ecirc; tamb&eacute;m pode dar boot de outros discos r&iacute;gidos com uma 
linha como: "<tt>boot hd2a:/bsd</tt>" para dar boot do terceiro disco 
r&iacute;gido do seu sistema.  Para iniciar o OpenBSD, coloque seu disquete 
dentro do drive e reinicie a m&aacute;quina.  Para iniciar outro SO, retire o 
disquete do drive, ent&atilde;o reinicie.

<p>
Neste caso, o programa &eacute; carregado do disquete,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>
procura e l&ecirc;
<tt>/etc/boot.conf</tt>.  A linha contendo "<tt>boot hd0a:/bsd</tt>" instrui o
boot(8) de onde carregar o kernel -- neste caso, o primeiro HD que a BIOS 
v&ecirc;.  Mantenha em mente, somente o pequeno arquivo (<tt>/boot</tt>) 
&eacute; carregado do disquete -- o sistema carrega o kernel do disco 
r&iacute;gido, assim isto adiciona somente 5 segundos ao processo de boot.

<h3>Windows NT/2000/XP NTLDR</h3>

Para multiboot do OpenBSD e Windows NT/2000/XP, voc&ecirc; pode usar NTLDR, o 
carregador de boot que o NT usa. Para multi-boot com NT, voc&ecirc; necessita 
de uma c&oacute;pia da sua Partition Boot Record (PBR) do OpenBSD. Depois de 
executar installboot, voc&ecirc; pode copiar o arquivo usando o 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd(1)</a>:

<pre>	
	# <strong>dd if=/dev/rsd0a of=openbsd.pbr bs=512 count=1</strong>
</pre>

Nota: Este &eacute; um bom momento para lembr&aacute;-lo para n&atilde;o
digitar comandos segamente (sem saber o que eles fazem). O comando acima 
n&atilde;o funciona diretamente em muito computadores, ficando para o leitor
adapt&aacute;-lo as suas necessidades.

<p>
Agora inicie o NT e ponha <tt>openbsd.pbr</tt> em C:. adicione a linha assim 
como ela est&aacute; aqui no final de <tt>C:\BOOT.INI</tt>:

<pre>	
	c:\openbsd.pbr="OpenBSD"
</pre>

<p>
Quando voc&ecirc; reinicar, voc&ecirc; pode carregar o OpenBSD a partir do 
menu loader do NT.
H&aacute; muito mais informa&ccedil;&atilde;o dispon&iacute;vel sobre NTLDR em 
<a href="http://www.tburke.net/info/ntldr/ntldr_hacking_guide.htm">NTLDR
Hacking Guide.</a>

<p>
No Windows XP voc&ecirc; pode editar as informa&ccedil;&otilde;es do boot 
usando uma interface gr&aacute;fica (GUI); veja
<a href="http://support.microsoft.com/default.aspx?scid=kb;en-us;289022">XP Boot.ini HOWTO</a>.

<p>
Programas que fazem isso para voc&ecirc; est&atilde;o dispon&iacute;veis, por 
exemplo
<a href="http://www.winimage.com/bootpart.htm">BootPart</a>.
Este programa pode ser executado em Windows NT/2000/XP, ele buscar&aacute; o 
OpenBSD PBR, e o colocar&aacute; na sua parti&ccedil;&atilde;o NT/2000/XP, e 
o adicionar&aacute; em <tt>C:\BOOT.INI</tt>

<p>
Note: O boot loader do Windows NT/2000/XP s&oacute; &eacute; capaz de dar
boot em sistemas operacionais que se encontram no primeiro disco r&iacute;gido.
Voc&ecirc; n&atilde;o pode usar o boot loader do Windows para iniciar o OpenBSD de um disco secund&aacute;rio.

<p>
<h3>Outros boot loaders</h3>

<p>
Alguns bootloaders que os usu&aacute;rios do OpenBSD usam com sucesso 
s&atilde;o 
<a href="http://gag.sourceforge.net/">GAG</a>,
OS-BS,
<a href="http://www.ranish.com/part/">The Ranish Partition Manager</a>
e <a href="http://www.gnu.org/software/grub/">GRUB</a>. 

<p>
<h3>OpenBSD e Linux (i386)</h3>
<!-- XXXversion -->

<p>
Por favor consulte 
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.1/i386/INSTALL.linux">INSTALL.linux</a>,
que possui instru&ccedil;&otilde;es de como fazer OpenBSD funcionar com Linux.

<a name="SendDmesg"></a>
<h2>4.9 - Enviando o seu dmesg para dmesg@openbsd.org depois da instala&ccedil;&atilde;o</h2>

<p>
Apenas para lembrar, &eacute; importante para os desenvolvedores do OpenBSD 
saber que hardware funciona, e qual n&atilde;o funciona perfeitamente.

<p>
Uma cita&ccedil;&atilde;o de /usr/src/etc/root/root.mail

<blockquote><pre> 
Se voce deseja assegurar que o OpenBSD rode melhor em sua m&aacute;quina, 
por favor nos fa&ccedil;a um favor (depois de ter configurado seu sistema de 
email!) digite algo como:
 # dmesg | mail -s "Sony VAIO 505R laptop, apm works OK" dmesg@openbsd.org
&eacute; dessa forma que n&oacute;s poderemos ver que tipo de configura&ccedil;&otilde;es 
as pessoas est&atilde;o usando. Como foi mostrado, incluir informa&ccedil;&otilde;es sobre 
sua m&aacute;quina no assunto ou no corpo do email pode nos ajudar.  N&oacute;s vamos usar 
essas informa&ccedil;&otilde;es para melhorar o suporte dos drivers de dispositivos em 
futuros releases.  (Por favor fa&ccedil;a isso usando o kernel GENERIC, e n&atilde;o um 
kernel personalizado). As informa&ccedil;&oatilde;es dos drivers de dispositivos que n&oacute;s 
obtermos nos ajudar&aacute; a corrigir os drivers j&aacute; existentes. Obrigado!
</pre></blockquote>

<p>
Certifique-se de enviar o e-mail de uma conta que esteja habilitada a receber
e-mails dos desenvolvedores para que eles possam entrar em contato se 
tiverem algo que queiram testar ou mudar a fim de tonar-lhe funcional no 
OpenBSD.
N&atilde;o &eacute; importante enviar o e-mail da mesma m&aacute;quina que 
est&aacute; rodando o OpenBSD, se esta m&aacute;quina for incapaz de receber o 
e-mail, basta executar

<pre>
$ dmesg | mail your-account@yourmail.dom
</pre>
E ent&atilde;o encaminhar a mensagem para
<pre> 
 dmesg@openbsd.org
</pre>
aonde <tt>your-account@yourmail.dom</tt> &eacute; a sua conta de e-mail.

<p>
<b>NOTAS</b>

<ul>
<li>Por favor s&oacute; mande dmesg do kernel GENERIC. 
Kernels customizados que tem drivers de dispositivos removidos n&atilde;o 
s&atilde;o &uacute;teis.
<li>Se voc&ecirc; possui um sistema multiprocessado e roda o kernel
GENERIC.MP, &eacute; muito importante para os desenvolvedores verem a 
sa&iacute;da do seu dmesg tanto para o kernel GENERIC como para o kernel 
GENERIC.MP, ent&atilde;o por favor mande ambos em e-mails separados.
<li> Os dmesgs s&atilde;o recebidos por uma m&aacute;quina que usa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd</a>
para rejeitar spams. Isso faz com que o seu e-mail n&atilde;o seja recebido 
por um per&iacute;odo de tempo. tenha paci&ecirc;ncia, depois de uma meio hora 
ou at&eacute; uma hora n&oacute;s o receberemos.
</ul>

<p>
O m&eacute;todo acima &eacute; bastante simples, mas se voc&ecirc; n&atilde;o 
configurou o seu sistema de e-mail no OpenBSD, voc&ecirc; pode salvar a sua 
sa&iacute;da do dmesg em um arquivo de texto e mandar para os desenvolvedores 
do OpenBSD.

<pre>
$ dmesg &gt; ~/dmesg.txt
</pre>

Ent&atilde;o transfira o arquivo (usando FTP/scp/disquete/carrier-pigeon/...)
para o sistema que voc&ecirc; normalmente usa para e-mail. Como a sa&iacute;da
do dmesg que voc&ecirc; envia &eacute; processada automaticamente tenha certeza
de checar os seguintes itens quando usar clientes/sistemas de e-mail
alternativos.
<ul>
<li>Configure o seu e-mail para enviar mensagens somente em texto plano;
    n&atilde;o use HTML na formata&ccedil;&atilde;o do seu e-mail.
<li>Desabilite qualquer fun&ccedil;&atilde;o de quebra de linha.
    Muitos clientes de e-mail s&atilde;o configurados para inserir quebra de 
	linha quando chegam a coluna 72 (a norma para listas de e-mail).
<li>Tenha certeza de que seu cliente de e-mail n&atilde;o ir&aacute; reformatar
	a mensagem.
<li>N&atilde; mande a sa&iacute;da do seu dmesg em anexo.
    Coloque a sa&iacute;da do seu dmesg no corpo da mensagem de e-mail.
</ul>


<a name="AddFileSet"></a>
<h2>4.10 - Adicionando um conjunto de arquivos ap&oacute;s a instala&ccedil;&atilde;o</h2>
<!-- XXXversion -->
"Oh n&atilde;o! Eu esqueci de adicionar um conjunto de arquivos durante a 
instala&ccedil;&atilde;o!"
<p>
As vezes, voc&ecirc; acha que necessita realmente s&oacute; de 
<tt>comp41.tgz</tt> (ou algum outro componente do sistema)
ap&oacute;s a instala&ccedil;&atilde;o, voc&ecirc; ent&atilde;o verifica que 
necessita de outros conjuntos de arquivos.  Boa not&iacute;cia: H&aacute; duas 
maneiras f&aacute;ceis de instalar o conjunto de arquivos ap&oacute;s a 
instala&ccedil;&atilde;o inicial:

<h3>Usando o processo de atualiza&ccedil;&atilde;o</h3>
Simplismente inicialize com uma m&iacute;dia de instala&ccedil;&atilde;o 
(CD-ROM ou Floppy), e escolha Upgrade (em vez de Install).  Quando voc&ecirc; 
ver a lista de arquivos de instala&ccedil;&atilde;o, escolha somente os 
arquivos que voc&ecirc; n&atilde;o escolheu na primeira 
instala&ccedil;&atilde;o, selecione a origem, e ent&atilde;o comece a instalar.

<h3>Usando tar(1)</h3>
O conjunto de arquivos de instala&ccedil;&atilde;o s&atilde;o simples arquivos 
tar, e voc&ecirc; pode expand&iacute;-los manualmente da raiz do sistema de 
arquivos:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # cd /
  # tar xzvpf comp41.tgz
</pre></td></tr></table>

<p>
N&atilde;o se esque&ccedil;a da op&ccedil;&atilde;o <tt>'p'</tt> no comando 
acima afim de restaurar corretamente as permiss&otilde;es dos arquivos!
<p>
Um erro comum &eacute; pensar que voc&ecirc; pode usar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>
para adicionar conjunto de arquivos n&atilde;o instalados.  Isto n&atilde;o 
funciona.  pkg_add(1) &eacute; para 
<a href="../faq15.html#PkgMgmt">instala&ccedil;&atilde;o de pacotes</a>,
n&atilde;o para arquivos tar gen&eacute;ricos como os do conjunto de 
instala&ccedil;&atilde;o.

<a name="bsd.rd"></a>
<h2>4.11 - O que &eacute; 'bsd.rd'?</h2>

<b><tt>bsd.rd</tt></b> &eacute; um "Disco RAM" do kernel.  Este arquivo 
&eacute; muito &uacute;til; muitos desenvolvedores tem cuidados para 
mant&ecirc;-lo sempre na ra&iacute;z do seu sistema.

<p>
Cham&aacute;-lo de "disco de RAM do kernel" descreve o sistema de arquivos
-- melhor que um disco f&iacute;sico, as utilidades dispon&iacute;veis depois 
do boot com <tt>bsd.rd</tt> s&atilde;o armazenadas no kernel, e s&atilde;o 
executadas de um sistema de arquivos baseado em RAM.  <tt>bsd.rd</tt> 
tamb&eacute;m inclui um conjunto de utilit&aacute;rios para que voc&ecirc; 
fa&ccedil;a a manuten&ccedil;&atilde;o e a instala&ccedil;&atilde;o do seu 
sistema.

<p>
Em algumas plataformas, <tt>bsd.rd</tt> &eacute; a t&eacute;cnica preferida 
para instala&ccedil;&atilde;o -- voc&ecirc; coloca este kernel em um sistema 
de arquivos existente, inicia com ele, e executa a instala&ccedil;&atilde;o a 
partir dele.  Na maioria das plataformas, se voc&ecirc; esta executando uma 
vers&atilde;o antiga do OpenBSD, voc&ecirc; pode pegar por FTP uma 
vers&atilde;o nova de <tt>bsd.rd</tt>, reinicar a m&aacute;quina com ele, e 
instalar uma nova vers&atilde;o do OpenBSD sem usar uma m&iacute;dia 
remov&iacute;vel para isso.
<p>
Aqui esta um exemplo de inicializa&ccedil;&atilde;o com <tt>bsd.rd</tt> em um 
sistema i386:

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Using Drive: 0 Partition: 3
  reading boot.....
  probing: pc0 com0 com1 apm mem[639k 255M a20=on]
  disk: fd0 hd0+
  &gt;&gt; OpenBSD/i386 BOOT 2.10
  boot&gt; <b>boot hd0a:/bsd.rd</b>
<i>. . . normal boot to install . . .</i>
</pre></td></tr></table>

Como indicado, voc&ecirc; ser&aacute; levado ao programa de 
instala&ccedil;&atilde;o, mas voc&ecirc; pode executar um shell e fazer a 
manuten&ccedil;&atilde;o do seu sistema.
<p>
A regra geral para inicializar com <tt>bsd.rd</tt> &eacute; mudar o seu kernel 
de <tt>/bsd</tt> para <tt>bsd.rd</tt> atrav&eacute;s dos meios usados em sua 
plataforma.

<a name="InstProb"></a>
<h2>4.12 - Problemas comuns de instala&ccedil;&atilde;o</h2>

<a name="cpq16m"></a>
<h3>4.12.1 - Meu Compaq s&oacute; reconhece 16M RAM</h3>
<i>Alguns</i> sistemas Compaq n&atilde;o detectam corretamente toda a RAM pelo 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">
boot loader de segundo est&aacute;gio do OpenBSD</a>, e somente 16M s&atilde;o 
detectados e utilizados pelo OpenBSD.  Isso pode ser corrigido pela 
cria&ccedil;&atilde;o/edi&ccedil;&atilde;o do arquivo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8&amp;arch=i386"><tt>/etc/boot.conf</tt></a>, 
ou entrando com o seguinte comando depois de "<tt>boot></tt>" antes que o OpenBSD seja carregado.  Se voc&ecirc; 
possui uma m&aacute;quina com 64M RAM, mas o OpenBSD s&oacute; reconhece os 
primeiros 16M, o comando que voc&ecirc; usaria seria:

<pre>     
	 machine mem +0x3000000@0x1000000
</pre>
Para adicionar 48M (<tt>0x3000000</tt>) ap&oacute;s os primeiros 16M
(<tt>0x1000000</tt>).  Tipicamente, se voc&ecirc; tivesse uma m&aacute;quina 
com esse problema, voc&ecirc; primeiramente entraria com o comando acima no 
prompt <tt>boot></tt> no momento da instala&ccedil;&atilde;o por 
disquete/CD-ROM, carregaria o sistema, reiniciaria, e criaria o 
arquivo <tt>/etc/boot.conf</tt> com a linha de comando acima para que nas 
pr&oacute;ximas inicializa&ccedil;&otilde;es toda a mem&oacute;ria RAM 
j&aacute; estivesse dispon&iacute;vel.

<p>
Sabe-se tamb&eacute;m que uma atualiza&ccedil;&atilde;o da ROM soluciona este 
problema em <i>alguns</i> sistemas.

<a name="noboot"></a>
<h3>4.12.2 - Meu i386 n&atilde;o inicia ap&oacute;s a instala&ccedil;&atilde;o</h3>
Sua instala&ccedil;&atilde;o parace ter ocorrigo perfeitamente, mas na primeira 
inicializa&ccedil;&atilde;o, voc&ecirc; n&atilde;o v&ecirc; nem sinal do 
OpenBSD.  H&aacute; algumas raz&otilde;es comuns para este problema:

<ul>
<li><b>Nenhuma parti&ccedil;&atilde;o foi marcada como ativa no fdisk(8).</b>  
para solucionar este problema, reinicie a sua m&aacute;quina usando um disquete 
de boot ou outra m&iacute;dia, e "marque" a parti&ccedil;&atilde;o como 
"ativa" (bootable).  Veja 
<a href="../faq14.html#fdisk">aqui</a> e
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">aqui</a>

<li><b>Nenhum boot loader v&aacute;lido foi colocado no disco.</b>
Se voc&ecirc; respondeu "Y" para a quest&atilde;o "Use entire disk for 
OpenBSD?" durante a instala&ccedil;&atilde;o, ou usou a op&ccedil;&atilde;o 
"<tt>reinit</tt>" no fdisk(8), O registro de inicializa&ccedil;&atilde;o do 
OpenBSD foi instalado no Registro Mestre de Inicializa&ccedil;&atilde;o (MBR) 
do disco; sen&atilde;o, o c&oacute;digo existente do master boot estaria 
intocado.  Isto ser&aacute; um problema se nenhum outro boot record existir.
Uma solu&ccedil;&atilde;o &eacute; inicializar outra vez com a m&iacute;dia de 
instala&ccedil;&atilde;o, entrar em um prompt do shell e executar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
para atualizar o c&oacute;digo a partir da linha de comando:

<pre>    
	# fdisk -u wd0
</pre>
Nota: a op&ccedil;&atilde;o "update" do modo interativo ("-e") do fdisk 
n&atilde;o escreve os bytes de assinatura requeridos para fazer o disco 
inicializ&aacute;vel.

<li><b> Em algumas raras ocasi&otilde;es, algo pode dar errado com o segundo 
est&aacute;gio de instala&ccedil;&atilde;o do gerenciador de boot.</b>  
Reinstala&ccedil;&atilde;o do segundo est&aacute;gio do gerenciador 
de boot &eacute; discutido <a href="../faq14.html#InstBoot">aqui</a>.

</ul>

<a name="sshhang"></a>
<h3>4.12.3 - Minha (velha, lenta) m&aacute;quina inicia, mas n&atilde;o passa do ssh-keygen</h3>
&Eacute; prov&aacute;vel que a sua m&aacute;quina esteja funcionando muito bem, 
mas esta levando algum tempo para realizar o processo de gera&ccedil;&atilde;o 
de chaves do ssh.  Uma SPARCStation2 ou um Macintosh Quadra pode levar 45 
minutos ou mais para terminar os tr&ecirc;s passos de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;sektion=1">ssh-keygen(1)</a>, 
algumas m&aacute;quinas levar&atilde;o algum tempo para fazer 
isso.  Deixe-o terminar; isso s&oacute; &eacute; feito uma vez por 
instala&ccedil;&atilde;o.

<p>
Note que o tamanho padr&atilde;o da chave cresceu para o OpenBSD 3.8,
ent&atilde;o os tempos de gera&ccedil;&atilde;o das chaves est&aacute;
levando mais tempo do que costumava levar. usu&aacute;rios de m&aacute;quinas
lentas geram suas chaves em outro computador (mais r&aacute;pido), ent&atilde;o
colocam as chaves geradas em <a href="#site">site41.tgz</a> e instale-o com o 
resto do sistema.

<a name="noftplist"></a>
<h3>4.12.4 - Eu recebo a mensagem "Failed to change directory" durante a 
instala&ccedil;&atilde;o</h3>

Ao fazer uma instala&ccedil;&atilde;o FTP de um 
<a href="../faq5.html#Flavors">snapshot</a> durante o est&aacute;gio 
<i>-beta</i> de desenvolvimento do OpenBSD, voc&ecirc; pode ver isto:

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>

  Do you want to see a list of potential FTP servers?  [yes] <b><i>Enter</i></b>
  Getting the list from 192.128.5.191 (ftp.openbsd.org)... FAILED
  Failed to change directory.
  Server IP address or hostname? 
</pre></td></tr></table>

Isto &eacute; normal e esperado durante o ciclo de 
pr&eacute;-libera&ccedil;&atilde;o.  O programa de instala&ccedil;&atilde;o 
procura pela lista de FTP no servidor FTP prim&aacute;rio 
em um diret&oacute;rio que ainda n&atilde;o esta dispon&iacute;vel antes da 
<a href="../faq1.html#Next">data de libera&ccedil;&atilde;o</a>, ent&atilde;o 
voc&ecirc; recebe a mensagem acima.

<p>
Simplesmente use uma <a href="../../ftp.html">lista de espelhos FTP</a> 
para encontrar o seu espelho favorito, e entre manualmente o nome quando for 
preciso.

<p>
<b>Nota: Voc&ecirc; n&atilde;o deve ver isto se estiver instalando um 
<i>release</i> ou de um CD-ROM.</b>

<a name="blankfdisk"></a>
<h3>4.12.5 - Minha tabela de parti&ccedil;&otilde;es do fdisk esta corrompida ou vazia!</h3>
Ocasionalmente, o usu&aacute;rio achar&aacute; que o sistema ir&aacute; 
funcionar, mas quando executa <tt>fdisk wd0</tt>, eles ver&atilde;o uma tabela 
de parti&ccedil;&atilde;o completamente vazia (ou algumas vezes, lixo). Isto 
geralmente &eacute; causado por ter sido criada uma parti&ccedil;&atilde;o, 
utilizando o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>, 
com um offset de tamanho 0 (zero setores), ao inv&eacute;s de <a href="#trackoffset">um offset com uma trilha </a> 
(nota: &eacute; assumida aqui uma plataforma <a href="../../i386.html">i386</a> 
ou <a href="../../amd64.html">amd64</a>. 
Outras plataformas requerem tamanhos diferentes de offset, e algumas 
N&Atilde;O precisam de offset). 
O sistema utiliza ent&atilde;o <a href="../faq14.html#Boot386">inicializa</a>
usando a PBR, e n&atilde;o a MBR, para o processo de boot.

<p>
Ao passo que esta configura&ccedil;&atilde;o pode funcionar, ela pode 
tamb&eacute;m ser um problema durante manuten&ccedil;&otilde;es, e deve ser 
consertada. Para consertar isto, o sistema de arquivo do disco deve geralmente 
ser recriado do zero (no entanto, se voc&ecirc; REALMENTE saiba o que 
est&aacute; fazendo, voc&ecirc; pode apenas recriar o r&oacute;tulo de 
disco (disklabel) e a MBR, e apenas perder e reconstruir a primeira 
parti&ccedil;&atilde;o OpenBSD no disco).

<a name="site"></a>
<h2>4.13 - Customizando o processo de instala&ccedil;&atilde;o</h2>
<!-- XXXversion -->

<h3>arquivo <tt>siteXX.tgz</tt></h3>
O script de instala&ccedil;&atilde;o/atualiza&ccedil;&atilde;o do OpenBSD 
permite a sele&ccedil;&atilde;o de um conjunto de arquivos 
criado pelo usu&aacute;rio chamado "<tt>siteXX.tgz</tt>", onde  XX &eacute; a 
vers&atilde;o (por exemplo 41).  O arquivo <tt>siteXX.tgz</tt> &eacute;, como 
outro
<a href="../faq4.html#FilesNeeded">conjunto de arquivos</a>, comprimido com
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&amp;sektion=1">gzip(1)</a> e
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
e armazenados na parti&ccedil;&atilde;o '/', e descomprimidos como qualquer 
outro conjunto de arquivos com as op&ccedil;&otilde;es <tt>xzpf</tt>.  Este 
conjunto de arquivos ser&aacute; instalado por &uacute;ltimo, depois de todos 
os outros arquivos.

<p>
Este conjunto de arquivos habilita o usu&aacute;rio a adicionar/ou sobrescrever 
o conjunto de arquivos instalados de forma 'normal' e ent&atilde;o customizar 
a instala&ccedil;&atilde;o ou a atualiza&ccedil;&atilde;o.

<p>
Voc&ecirc; pode criar um conjunto de instala&ccedil;&atilde;o espec&iacute;fico
para cada m&aacute;quina chamado <tt>siteXX-<i>&lt;hostname&gt;.tgz</i></tt>,
por exemplo "<tt>site41-puffy.tgz</tt>". Isso possibilita a 
instala&ccedil;&atilde;o, atualiza&ccedil;&atilde;o ou 
recupera&ccedil;&atilde;o do sistema de forma r&aacute;pida e simples.

<p>
Alguns exemplos do uso do arquivo <tt>siteXX.tgz</tt>:
<ul>
<li> Crie um arquivo siteXX.tgz que contenha todas as mudan&ccedil;as 
que voc&ecirc; fez desde a primeira instala&ccedil;&atilde;o do OpenBSD. 
Ent&atilde;o, se voc&ecirc; tiver que recriar o sistema simplesmente selecione 
o arquivo siteXX.tgz durante a reinstala&ccedil;&atilde;o e todas as suas 
mudan&ccedil;as ser&atilde;o replicadas no novo sistema.

<li>Crie uma s&eacute;rie de diret&oacute;rios espec&iacute;ficos para cada 
m&aacute;quina cada um com um arquivo siteXX.tgz que contenha arquivos 
espec&iacute;ficos para cada uma delas. A instala&ccedil;&atilde;o (por 
exemplo: m&aacute;quinas com diferentes placas de v&iacute;deo) de uma 
categoria pode ser feita selecionando o arquivo siteXX.tgz apropriado.

<li>Coloque os arquivos que voc&ecirc; customiza rotineiramente em um mesmo 
siteXX.tgz  --
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8"><tt>/etc/skel</tt></a> ,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5"><tt>/etc/pf.conf</tt></a>, 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8"><tt>/var/www/conf/httpd.conf</tt></a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf.local&amp;sektion=8"><tt>/etc/rc.conf.local</tt></a>, etc. 
</ul>

<h3><tt>install.site</tt>/<tt>upgrade.site</tt> scripts</h3>
Como &uacute;ltimo passo no processo de 
instala&ccedil;&atilde;o/atualiza&ccedil;&atilde;o, o script procura no 
diret&oacute;rio raiz do sistema rec&eacute;m-instalado por 
<tt>install.site</tt> ou <tt>upgrade.site</tt>, o mais apropriado para o 
processo atual, e executa este script num ambiente 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=8">chroot</a>ed 
para a raiz do sistema instalado/atualizado. Lembre-se, a 
atualiza&ccedil;&atilde;o &eacute; feita a partir de um sistema de arquivos 
inicializado, ent&atilde;o o seu sistema de arquivo alvo est&aacute; montado
atualmente no diret&oacute;rio ,<tt>/mnt</tt>.  No entanto, o script pode ser 
escrito como se estivesse executando na raiz "normal" do seu sistema de 
arquivo. Uma vez que este script &eacute; executado apenas depois que todos os 
arquivos est&atilde;o instalados, voc&ecirc; tem uma funcionalidade quase 
completa do seu sistema (apesar de em modo monousu&aacute;rio) quando seu 
script &eacute; executado.

<p>
Note que o script <tt>install.site</tt> deve estar em um arquivo 
<tt>siteXX.tgz</tt>, enquanto que o script <tt>upgrade.site</tt>
pode ser colocado no diret&oacute;rio raiz antes da atualiza&ccedil;&atilde;o, 
ou pode ser colocado em um arquivo <tt>siteXX.tgz</tt>.

<p>
Os scripts podem ser utilizados para fazer muitas coisas:
<ul>
<li>Remover arquivos que est&atilde;o instalados/atualizados mas que 
voc&ecirc; n&atilde;o os quer presentes no sistema.
<li> Remover/atualizar/instalar <a href="../faq15.html#PkgMgmt">pacotes</a> 
que voc&ecirc; deseja no sistema instalado.
<li> Fazer um <a href="../faq14.html#Backup">backup/arquivo imediato</a> do 
sistema rec&eacute;m-instalado antes de voc&ecirc; exp&ocirc;-lo ao resto
do mundo.
<li> Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&amp;sektion=8">rdate(8)</a>
para configurar a hora do seu sistema.
</ul>

<p>
A combina&ccedil;&atilde;o dos arquivos <tt>siteXX.tgz</tt> e 
<tt>install.site/upgrade.site</tt> tem o objetivo de dar aos usu&aacute;rios 
amplas capacidades de customiza&ccedil;&atilde;o sem precisar construir seus 
pr&oacute;prios conjuntos de instala&ccedil;&atilde;o.

<p>
Nota: Se voc&ecirc; for fazer a sua instala&ccedil;&atilde;o
de um servidor http, voc&ecirc precisa adicionar <tt>site*.tgz</tt> 
ao arquivo <tt>index.txt</tt> no diret&oacute; de fontes para que ele fique
dispon&iacute;vel na hora da instala&ccedil;&atilde;o. Isso n&atilde;o &eacute;
necess&aacute;rio para ftp ou outras instala&ccedil;&otilde;es.

<a name="Multiple"></a>
<h2>4.14 - Como eu instalo um n&uacute;mero de sistemas similares?</h2>
Aqui est&atilde;o algumas ferramentas que voc&ecirc; pode usar quando 
tem que instalar um n&uacute;mero de sistemas similares de OpenBSD.

<h3>Arquivos <tt>siteXX.tgz</tt> e <tt>install/upgrade.site</tt> </h3>
Veja o artigo <a href="#site">acima</a>.

<h3>Restaurando com dump(8)</h3>
Na maioria das plataformas, a m&iacute;dia de inicializa&ccedil;&atilde;o 
inclui o programa 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>
, que pode ser usado para recuperar backups feitos com 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a>.
Assim, voc&ecirc; poderia inicializar a partir de um 
<a href="#MkFlop">disquete</a>, 
<a href="../../orders.html">CD</a>, ou
<a href="#bsd.rd">bsd.rd</a> e ent&atilde;o executar
<a href="../faq14.html#fdisk">fdisk</a>,
<a href="../faq14.html#disklabel">disklabel</a> e
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restaurar</a>
as configura&ccedil;&otilde;es a partir de uma fita ou outra m&iacute;dia, e 
instalar os
<a href="../faq14.html#InstBoot">blocos de boot (boot blocks)</a>. Mais 
detalhes 
<a href="../faq14.html#Backup">aqui</a>.

<h3>Imagem de disco</h3>
Infelizmente, n&atilde;o h&aacute; nenhum pacote conhecido de softwares que
criem imagem de discos com suporte a FFS e que criem imagens contendo apenas o 
espa&ccedil;o ativo do arquivo. A maioria das soluc&otilde;es existentes 
tratar&atilde;o a parti&ccedil;&atilde;o OpenBSD como "gen&eacute;rica", e
podem fazer uma imagem do disco inteiro.  Isso geralmente &eacute; o
objetivo, por&eacute;m h&aacute; um grande desperd&iacute;cio de espa&ccedil;o 
-- uma parti&ccedil;&atilde;o <tt>/home</tt> de 10G ira requerer 10G de 
espa&ccedil;o na imagem, mesmo que n&atilde;o haja um &uacute;nico arquivo na 
parti&ccedil;&atilde;o.  Ao passo que voc&ecirc; pode instalar tipicamente um
drive de imagem para aumentar o tamanho de um drive, voc&ecirc; n&atilde;o pode 
diretamente utilizar o espa&ccedil;o extra, e voc&ecirc; n&atilde;o pode 
instalar uma imagem para um drive menor.

<p>
Se esta &eacute; uma situa&ccedil;&atilde;o aceit&aacute;vel, voc&ecirc; pode 
utilizar o comando <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd</a>,
o qual permite copiar o conte&uacute;do inteiro de um disco para outro, setor a
setor. Isto proporcionaria a mesma funcionalidade de programas comerciais,
por&eacute;m a custo zero.

<a name="getdmesg"></a>
<h2>4.15 - Como eu obtenho o dmesg(8) para reportar um problema de instala&ccedil;&atilde;o?</h2>
Quando <a href="../../report.html">reportar um problema</a>, &eacute; 
necess&aacute;rio incluir o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>.
Entretanto, quando voc&ecirc; necessita fazer isso, &eacute; porque o sistema 
n&atilde;o esta funcionando normalmente ou n&atilde;o instalou ent&atilde;o 
voc&ecirc; n&atilde;o possui o disco, a rede, ou outro recurso 
necess&aacute;rio que voc&ecirc; possa pegar o dmesg e enviar a
<a href="../../mail.html">lista de e-mail</a> apropriada.  A outras maneiras, 
no entanto:

<ul>
<li><b>Disquete:</b> Discos de boot e CD-ROM possuem ferramentas que 
possibilitam gravar o seu dmesg em um disquete do MSDOS para depois poder ser 
lido em outra m&aacute;quina.  Coloque um disquete formatado do MSDOS no drive 
e execute os comandos abaixo:

<pre>     
     mount -t msdos /dev/fd0a /mnt
     dmesg &gt;/mnt/dmesg.txt
     umount /mnt
</pre>
Se voc&ecirc; tiver um outro sistema OpenBSD, voc&ecirc; pode fazer isso em um 
disquete comp&aacute;tivel com o sistema de arquivos do OpenBSD -- 
frequentemente, o disquete de boot tem bastante espa&ccedil;o para conter o 
dmesg.  Neste caso, tire a op&ccedil;&atilde;o "<tt>-t msdos</tt>" acima.

<p>
<li><b>Console Serial:</b>
Usando um console serial e capturando a sa&iacute;da em outro computador 
&eacute; o melhor caminho para capturar informa&ccedil;&otilde;es de 
diagn&oacute;stico - particularmente se o computador trava logo ap&oacute;s 
o boot. Em um segundo computador, voc&ecirc; necessita de um cabo serial 
apropriado (como um cabo null-modem), e um programa emulador de terminal para 
capturar a sa&iacute;da da tela e arquivar.

<p>
Informa&ccedil;&otilde;es gerais de configura&ccedil;&atilde;o de console 
serial s&atilde;o discutidos em
<a href="../faq7.html#SerCon">outra parte nesta FAQ</a>;
em geral para capturar o log da instala&ccedil;&atilde;o,
O comando abaixo &eacute; usualmente suficiente.

<p><b>i386</b>

<p>
No prompt do carregador de boot, digite

<p>
<blockquote>
<pre>
boot&gt; <b>set tty com0</b>
</pre>
</blockquote>

<p>
Isso dir&aacute; ao OpenBSD para usar a primeira porta serial 
(tamb&eacute;m chamada de COM1 ou COMA na documenta&ccedil;&atilde;o do PC)
como um console serial.
A taxa padr&atilde;o de comunica&ccedil;&atilde;o &eacute; 9600 (baud rate).

<p><b>Sparc/Sparc64</b>

<p>
Estas m&aacute;quinas usar&atilde;o automaticamente um console serial se 
inicados se um teclado.
Se voc&ecirc; possui um teclado e um monitor unidos, voc&ecirc; pode ainda 
for&ccedil;ar o sistema a usar um console serial com o seguinte comando no 
prompt <tt>ok</tt>.

<p>
<blockquote>
<pre>
ok <b>setenv input-device ttya</b>
ok <b>setenv output-device ttya</b>
ok <b>reset</b>
</pre>
</blockquote>

<p>
<li><b>FTP:</b>  Sob algumas circunst&acirc;ncias, voc&ecirc; pode usar um 
cliente <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a>
do disquete de boot ou CD-ROM para enviar o dmesg a um servidor FTP local, de 
onde voc&ecirc; possa recuper&aacute;-lo mais tarde.
</ul>
<p>

<font color="#0000e0">
<a href="index.html">[&Iacute;ndice do FAQ]</a>
<a href="../faq3.html">[Para Se&ccedil;&atilde;o 3 - Obtendo OpenBSD]</a>
<a href="../faq5.html">[Para Se&ccedil;&atilde;o 5 - Construindo o sistema a partir da fonte]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif"
border= "0" alt= "[voltar]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq4.html,v 1.242 ]<br>
$Translation: faq4.html,v 1.9 2007/05/31 11:15:53 dsantos Exp $<br>
-->
$OpenBSD: faq4.html,v 1.6 2007/06/02 09:03:09 jufi Exp $
</small>
</body>
</html>
