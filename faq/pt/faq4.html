<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>4 - Guia de Instala&ccedil;&atilde;o do OpenBSD 4.4</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2008
by OpenBSD.">
</head>

<!-- Passes validator.w3.org.  Please keep it this way -->

<body bgcolor= "#ffffff" text= "#000000">

<a href="../../pt/index.html">
<img alt="[OpenBSD]" height=30 width=141
src="../../images/smalltitle.gif" border="0">    
</a>
<p>

<font color= "#0000e0">
<a href= "index.html">[&Iacute;ndice do FAQ]</a>
<a href= "faq3.html">[Para a Se&ccedil;&atilde;o 3 - Come&ccedil;ando no
OpenBSD]</a>
<a href= "faq5.html">[Para a Se&ccedil;&atilde;o 5 - Compilando o
Sistema a partir dos Fontes]</a>
</font>

<h1><font color="#e00000">4 - Guia de Instala&ccedil;&atilde;o do
OpenBSD 4.4</font></h1>
<hr>

<p>
<h3>Conte&uacute;do</h3>
<ul>
<li><a href= "#Overview"    >4.1 - Vis&atilde;o geral do procedimento de
instala&ccedil;&atilde;o do OpenBSD</a>
<li><a href= "#Checklist"   >4.2 - Lista de verifica&ccedil;&atilde;o
pr&eacute;-instala&ccedil;&atilde;o</a>

<li><a href="#MkInsMedia"   >4.3 - Criando uma m&iacute;dia
boot&aacute;vel de instala&ccedil;&atilde;o do OpenBSD</a>
    <ul>
    <li><a href="#UnixFlop" >4.3.1 - Criando disquetes no Unix</a>
    <li><a href="#DosFlop"  >4.3.2 - Criando disquetes no Windows ou
DOS</a>
    <li><a href="#MkCD-ROM" >4.3.3 - Criando um CD de boot</a>
    </ul>
<li><a href="#Boot"         >4.4 - Bootando a m&iacute;dia de
instala&ccedil;&atilde;o do OpenBSD</a>
<li><a href="#Install"      >4.5 - Executando a
instala&ccedil;&atilde;o</a>
  <ul>
  <li><a href="#Start"      >4.5.1 - Come&ccedil;ando a
instala&ccedil;&atilde;o</a>
  <li><a href="#Disks"      >4.5.2 - Configurando discos</a>
  <li><a href="#Hostname"   >4.5.3 - Configurando o hostname do
sistema</a>
  <li><a href="#Network"    >4.5.4 - Configurando a rede</a>
  <li><a href="#InstMedia"  >4.5.5 - Escolhendo a m&iacute;dia de
instala&ccedil;&atilde;o</a>
  <li><a href="#Filesets"   >4.5.6 - Escolhendo pacotes de arquivos</a>
  <li><a href="#Finish"     >4.5.7 - Terminando</a>
  </ul>

<li><a href= "#FilesNeeded" >4.6 - Que arquivos s&atilde;o
necess&aacute;rios para a instala&ccedil;&atilde;o?</a>
<li><a href= "#Partitioning">4.7 - De quanto espa&ccedil;o eu preciso
para instalar o OpenBSD?</a>
<li><a href= "#Multibooting">4.8 - Boot m&uacute;ltiplo com o
OpenBSD/i386</a>
<li><a href= "#SendDmesg"   >4.9 - Enviando seu dmesg para
dmesg@openbsd.org ap&oacute;s a instala&ccedil;&atilde;o</a>
<li><a href= "#AddFileSet"  >4.10 - Adicionando pacotes de arquivos
ap&oacute;s a instala&ccedil;&atilde;o</a>
<li><a href= "#bsd.rd"      >4.11 - O que &eacute; 'bsd.rd'?</a>
<li><a href= "#InstProb"    >4.12 - Problemas comuns de
instala&ccedil;&atilde;o</a>
  <ul>
  <li><a href="#cpq16m"     >4.12.1 - Meu Compaq reconhece apenas 16M de
RAM</a>
  <li><a href="#noboot"     >4.12.2 - Meu i386 n&atilde;o d&aacute; boot
ap&oacute;s a instala&ccedil;&atilde;o</a>
  <li><a href="#sshhang"    >4.12.3 - Minha m&aacute;quina bootou, mas
parou no processo de gera&ccedil;&atilde;o de chaves SSH</a>
  <li><a href="#noftplist"  >4.12.4 - Obtive a mensagem "Failed to
change directory" ao executar a instala&ccedil;&atilde;o</a>
  <li><a href="#blankfdisk" >4.12.5 - Minha tabela de
parti&ccedil;&otilde;es do fdisk est&aacute; corrompida ou vazia!</a>
  </ul>
<li><a href= "#site"        >4.13 - Customizando o processo de
instala&ccedil;&atilde;o</a>
<li><a href= "#Multiple"    >4.14 - Como posso instalar v&aacute;rios
sistemas similares?</a>
<li><a href="#getdmesg"     >4.15 - Como posso obter a sa&iacute;da do
dmesg(8) para reportar um problema de instala&ccedil;&atilde;o?</a>
</ul>
<hr>

<p>
<a name= "Overview"></a>
<h2>4.1 - Vis&atilde;o geral do procedimento de instala&ccedil;&atilde;o
do OpenBSD</h2>

<p>
O OpenBSD possui um robust e adapt&aacute;vel procedimento de
instala&ccedil;&atilde;o em modo texto, e pode ser instalado
atrav&eacute;s de um &uacute;nico disquete.
A maior parte das plataformas segue um procedimento de
instala&ccedil;&atilde;o similar; no entanto, h&aacute; algumas
diferen&ccedil;as nos detalhes.
Em todos os casos, voc&ecirc; deve ler o documento INSTALL
espec&iacute;fico para cada plataforma no diret&oacute;rio
<i>platform</i> do CD-ROM ou dos sites FTP (por exemplo,
<tt>i386/INSTALL.i386</tt>, <tt>mac68k/INSTALL.mac68k</tt> ou
<tt>sparc/INSTALL.sparc</tt>).

<p>
O processo de instala&ccedil;&atilde;o do OpenBSD usa um kernel especial
com algumas ferramentas e scripts de instala&ccedil;&atilde;o embarcados
em um RAM disk pr&eacute;-carregado.
Ap&oacute;s o boot deste kernel, o sistema operacional &eacute;
extra&iacute;do de um n&uacute;mero de arquivos 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
(<tt>.tgz</tt>) de uma fonte diferente do RAM disk pr&eacute;-carregado.
H&aacute; v&aacute;rias formas de boot deste kernel de
instala&ccedil;&atilde;o:

<ul>
<li><b>Disquete:</b>
Imagens de disquete s&atilde;o disponibilizadas, com as quais se pode
criar um disquete de instala&ccedil;&atilde;o em outro sistema
<a href="#UnixFlop">Unix-like</a>, ou em um sistema
<a href="#DosFlop">DOS/Windows</a>.
Nomes t&iacute;picos de arquivo s&atilde;o <tt>floppy44.fs</tt>, embora
diversas plataformas possuam m&uacute;ltiplas imagens de disquete
dispon&iacute;veis.

<li><b>CD-ROM:</b> Em diversas plataformas uma imagem de CD-ROM
(<tt>cd44.iso</tt> apenas para boot, ou <tt>install44.iso</tt> para a
instala&ccedil;&atilde;o completa) &eacute; disponibilizada, permitindo
a cria&ccedil;&atilde;o de um CD-ROM boot&aacute;vel.

<li><b>Parti&ccedil;&atilde;o existente:</b> O kernel <a
href="#bsd.rd">RAM disk</a> pode ser bootado a partir de uma
parti&ccedil;&atilde;o j&aacute; existente para um upgrade ou
reinstala&ccedil;&atilde;o.

<li><b>Rede:</b> Algumas plataformas suportam boot via rede (por exemplo
utilizando <a href="../faq6.html#PXE">PXE</a> ou outro <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&amp;sektion=8">boot
via rede</a>).

<li><b>Escrevendo uma imagem do sistema de arquivos para o disco
(miniroot):</b> uma imagem de sistema de arquivo que pode ser escrita
para uma parti&ccedil;&atilde;o existente, e ent&atilde;o pode ser
bootada.

<li><b>Fita de boot:</b> Algumas plataformas suportam boot por fita.
Essas fitas podem ser feitas de acordo com as instru&ccedil;&otilde;es
de INSTALL.<i>plataforma</i>.

</ul>

Nem todas as <a href="../../pt/plat.html">plataformas</a> suportam todas
as op&ccedil;&otilde;es de boot:

<ul>
<li><a href="../../alpha.html"><b>alpha:</b></a> Disquete, CD-ROM, rede,
escrita de uma imagem de disquete para o disco.

<li><a href="../../amd64.html"><b>amd64:</b></a> Disquete, CD-ROM,
<a href="../faq6.html#PXE">rede</a>.

<li><a href="../../armish.html"><b>armish:</b></a>
Varia por m&aacute;quina.

<li><a href="../../hp300.html"><b>hp300:</b></a> CD-ROM, rede.

<li><a href="../../hppa.html"><b>hppa:</b></a> Rede.

<li><a href="../../i386.html"><b>i386:</b></a> Disquete, CD-ROM,
<a href="../faq6.html#PXE">rede</a>.

<li><a href="../../landisk.html"><b>landisk:</b></a> miniroot, instalado
utilizando outro computador.

<li><a href="../../mac68k.html"><b>mac68k:</b></a> Bootado utilizando
ferramentas rodando no Mac OS.
Veja
<a
href="ftp://ftp.openbsd.org/pub/OpenBSD/4.4/mac68k/INSTALL.mac68k">INSTALL.mac68k</a>
para detalhes.

<li><a href="../../macppc.html"><b>macppc:</b></a> CD-ROM, rede.

<li><a href="../../mvme68k.html"><b>mvme68k:</b></a> Rede, fita de boot.

<li><a href="../../mvme88k.html"><b>mvme88k:</b></a> Rede, fita de boot.

<li><a href="../../sparc.html"><b>sparc:</b></a> Disquete, CD-ROM, rede,
escrevendo uma imagem para uma parti&ccedil;&atilde;o swap existente,
fita de boot.

<li><a href="../../sparc64.html"><b>sparc64:</b></a> Disquete (U1/U2
apenas), CD-ROM, rede, escrevendo uma imagem para uma
parti&ccedil;&atilde;o existente.

<li><a href="../../vax.html"><b>vax:</b></a> Disquete, rede.

<li><a href="../../zaurus.html"><b>zaurus:</b></a> Bootar o bsd.rd a
partir de uma parti&ccedil;&atilde;o Linux. Veja
<a
href="ftp://ftp.openbsd.org/pub/OpenBSD/4.4/zaurus/INSTALL.zaurus">INSTALL.zaurus</a>
para detalhes.

</ul>

Todas as plataformas tamb&eacute;m podem usar um 
<a href="#bsd.rd">bsd.rd</a> para reinstala&ccedil;&atilde;o ou upgrade.

<p>
Uma vez que o kernel de instala&ccedil;&atilde;o seja bootado,
voc&ecirc; tem diversas op&ccedil;&otilde;es de onde obter os
<a href="#FilesNeeded">pacotes de arquivos</a>.
Mais uma vez, nem toda plataforma suporta todas as op&ccedil;&otilde;es.

<ul>
<li><b>CD-ROM:</b> &Eacute; claro, n&oacute;s preferimos que voc&ecirc;
use o
<a href="../../orders.html">Conjunto Oficial de CDs</a>, mas voc&ecirc;
tamb&eacute;m pode usar <tt>install44.iso</tt> ou fazer seu
pr&oacute;prio.

<li><b>FTP:</b>
Qualquer um dos
<a href="../../ftp.html">espelhos FTP</a>
do OpenBSD ou seu servidor FTP local contendo os pacotes de arquivos.

<li><b>HTTP:</b>
Qualquer um dos
<a href="../../ftp.html#http">espelhos HTTP</a>
do OpenBSD ou seu servidor web local contendo os pacotes de arquivos.

<li><b>Parti&ccedil;&atilde;o do disco local:</b>
Em muitos casos, voc&ecirc; pode instalar pacotes de arquivos a partir
de outra parti&ccedil;&atilde;o em um disco local.
Por exemplo, na plataforma <a href="../../i386.html">i386</a>,
voc&ecirc; pode instalar a partir de uma parti&ccedil;&atilde;o FAT ou
um CD-ROM formatado em ISO9660, Rock Ridge ou Joliet.
Em alguns casos, voc&ecirc; ter&aacute; que montar manualmente o sistema
de arquivos antes de utiliz&aacute;-lo. 

<li><b>NFS:</b>
Algumas plataformas suportam o uso de mounts NFS para os pacotes de
arquivos.

<li><b>Fita:</b>
Pacotes de arquivos tamb&eacute;m podem ser lidos a partir de uma fita
suportada.
Detalhes na cria&ccedil;&atilde;o de uma fita est&atilde;o no documento
<tt>INSTALL.</tt><i>plataforma</i>.
</ul>

<a name="Checklist"></a>
<h2>4.2 - Lista de verifica&ccedil;&atilde;o
pr&eacute;-instala&ccedil;&atilde;o</h2>

<p>
Antes que voc&ecirc; comece sua instala&ccedil;&atilde;o, voc&ecirc;
deve ter alguma id&eacute;ia do que voc&ecirc; quer obter no final.

Voc&ecirc; precisa saber os itens a seguir, pelo menos:
<ul>
<li>Nome de m&aacute;quina
<li>Hardware instalado e dispon&iacute;vel
  <ul>
  <li>Verifique compatibilidade com a p&aacute;gina de compatibilidade
de hardware para sua plataforma
  <li>Se ISA, voc&ecirc; tamb&eacute;m precisa saber
configura&ccedil;&otilde;es de hardware, e confirmar que elas
est&atilde;o como o OpenBSD requer.
  </ul>
<li>M&eacute;todo de instala&ccedil;&atilde;o a ser usado (CD-ROM, FTP,
etc.)
<li>Se um bug important for encontrado, como o sistema ter&aacute; um
patch aplicado?
  <ul>
  <li>Se feito localmente, voc&ecirc; dever&aacute; ter
      <a href="#Partitioning">espa&ccedil;o suficiente</a>
dispon&iacute;vel para a &aacute;rvore de c&oacute;digo e sua
compila&ccedil;&atilde;o.
  <li>De outra forma, voc&ecirc; dever&aacute; ter acesso a outra
m&aacute;quina para compilar uma
      <a href="faq5.html#Release">vers&atilde;o</a> com o patch
aplicado.
  </ul>
<li>Layout de disco desejado
  <ul>
  <li>Os dados preexistente precisam ser salvos em algum outro lugar?
  <li>O OpenBSD ir&aacute; coexistir neste sistema com algum outro SO?
      Se sim, como ser&aacute; o boot de ambos?
      Voc&ecirc; precisar&aacute; instalar um "gerenciador de boot"?
  <li>Todo o disco ser&aacute; usado para o OpenBSD, ou voc&ecirc; quer
manter uma parti&ccedil;&atilde;o/SO existente (ou espa&ccedil;o para um
futuro)?
  <li>Como voc&ecirc; deseja sub-particionar a se&ccedil;&atilde;o do
OpenBSD de seu disco?
  </ul>
<li>Configura&ccedil;&otilde;es de rede, se n&atilde;o usando DHCP:
  <ul>
  <li>Nome de dom&iacute;nio
  <li>Endere&ccedil;os(s) dos Servidores de Nomes de Dom&iacute;nio
(DNS)
  <li>Endere&ccedil;os IP e m&aacute;scaras de sub-rede para cada
interface de rede
  <li>Endere&ccedil;o do Gateway
  </ul>
<li>Voc&ecirc; ir&aacute; rodar o X Window System?
</ul>


<a name="MkInsMedia"></a>
<h2>4.3 - Criando uma m&iacute;dia boot&aacute;vel de
instala&ccedil;&atilde;o do OpenBSD</h2>

<p>
Como exemplos, iremos examinar as imagens de instala&ccedil;&atilde;o
dispon&iacute;veis para as plataformas <a
href="../../i386.html">i386</a> e <a href="../../sparc.html">sparc</a>.

<p>
A plataforma <a href="../../i386.html">i386</a> tem seis imagens de
instala&ccedil;&atilde;o separadas para escolha:

<ul>
<li><b><tt>floppy44.fs</tt></b> (PC Desktop) suporta v&aacute;rias
interfaces de rede ISA e PCI, adaptadores IDE e SCSI simples e algum
suporte PCMIA. A maioria dos usu&aacute;rios ir&aacute; usar esta imagem
se o boot for por disquete.
<li><b><tt>floppyB44.fs</tt></b> (Servidore) suporta v&aacute;rias
controladoras RAID, e alguns adaptadores SCSI menos comuns. No entanto,
suporte para v&aacute;rios adaptadores SCSI padr&atilde;o e
v&aacute;rias interfaces de rede EISA e ISA foi removido.
<li><b><tt>floppyC44.fs</tt></b> (Laptops) suporta os dispositivos
CardBus e PCMCIM encontrados em muitos laptops.
<li><b><tt>cd44.iso</tt></b> &eacute; uma imagem ISO9660 que pode ser
usada para criar um CD boot&aacute;vel com os software mais populares de
cria&ccedil;&atilde;o de CD-ROMs da maioria das plataformas.
Esta imagem possui a maior cole&ccedil;&atilde;o de drivers, e &eacute;
geralmente a escolha recomendada se seu hardware pode efetuar boot a
partir de um CDROM.
<li><b><tt>cdemu44.iso</tt></b> &eacute; uma imagem ISO9660, usando boot
via "emula&ccedil;&atilde;o de disquete", com uma imagem de disquete de
2.88M.
Espera-se que poucas pessoas precisem desta imagem -- a maioria deve
usar <tt>cd44.iso</tt>, utilize <tt>cdemu44.iso</tt> apenas se
<tt>cd44.iso</tt> n&atilde;o funcionar para voc&ecirc;.
<li><b><tt>install44.iso</tt></b> &eacute; uma imagem ISO9660, contendo
todos os arquivos padr&atilde;o de instala&ccedil;&atilde;o.
Este arquivo pode ser usado para criar um CD que pode efetuar uma
instala&ccedil;&atilde;o do OpenBSD por si s&oacute;.
</ul>

Sim, pode haver situa&ccedil;&otilde;es em que um disco de
instala&ccedil;&atilde;o &eacute; requerido para suportar seu adaptador
SCSI e outro disco &eacute; requerido para suportar sua interface de
rede.
Felizmente, esse &eacute; um evento raro, e normalmente pode ser
solucionado.

<p>
A plataforma <a href="../../sparc.html">sparc</a> tem quatro imagens de
instala&ccedil;&atilde;o separadas para escolha:

<ul>
<li><b><tt>floppy44.fs:</tt></b> Suporta sistemas com drive de disquete.
<li><b><tt>cd44.iso</tt></b> Uma imagem ISO usada para fazer um CD para
boot de m&aacute;quinas SPARC com drive de CD-ROM.
<li><b><tt>miniroot44.fs</tt></b> Pode ser escrita para uma
parti&ccedil;&atilde;o swap e bootada.
<li><b><tt>install44.iso</tt></b> &eacute; uma imagem ISO9660, contendo
todos os arquivos padr&atilde;o de instala&ccedil;&atilde;o.
Este arquivo pode ser usado para criar um CD que pode efetuar uma
instala&ccedil;&atilde;o do OpenBSD por si s&oacute;. 
</ul>

<a name="MkFlop"></a>
<a name="UnixFlop"></a>
<h3>4.3.1 - Criando disquetes no Unix</h3>

<p>
Para criar um disquete formatado, use o comando
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdformat&amp;sektion=1&amp;arch=i386">fdformat(1)</a>
para executar tanto a formata&ccedil;&atilde;o como a checagem por
setores corrompidos.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>fdformat /dev/rfd0c</b>
  Format 1440K floppy `/dev/rfd0c'? (y/n): y
  Processing VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV done.
</pre></td></tr></table>

<p>
Se seu output &eacute; como o do exemplo acima, ent&atilde;o o disco
est&aacute; OK. No entanto, se voc&ecirc; n&atilde;o v&ecirc; TODAS as
letras como "V"'s ent&atilde;o o disco est&aacute; provavelmente ruim, e
voc&ecirc; deve tentar usar um outro.

<p>
Note que algums sistemas Unix-like t&ecirc;m comandos diferentes para
formatar disquetes.
Cheque a documenta&ccedil;&atilde;o de seu sistema para o procedimento
exato.

<p>
Uma vez que voc&ecirc; possua um disquete funcional, e formatado,
&eacute; hora de gravar a imagem de instala&ccedil;&atilde;o no
disquete.
Para isso, voc&ecirc; pode utilizar a ferramenta
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=0">dd(1)</a>.
Um exemplo de uso do <tt>dd(1)</tt> est&aacute; abaixo:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>dd if=floppy44.fs of=/dev/rfd0c bs=32k</b>
</pre></td></tr></table>

<p>
Uma vez que a imagem esteja gravada, certifique-se de que a imagem
copiada &eacute; igual a original com o comando
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=cmp&amp;sektion=1">cmp(1)</a>.
Se o disquete &eacute; igual a imagem, voc&ecirc; ir&aacute; ver apenas
outro prompt.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>cmp /dev/rfd0c floppy44.fs</b>
</pre></td></tr></table>

<a name="DosFlop"></a>
<h3>4.3.2 - Criando disquetes no Windows ou DOS</h3>

<p>
Esta se&ccedil;&atilde;o descreve como gravar as imagens de
instala&ccedil;&atilde;o em disquetes no Windows ou DOS.
Voc&ecirc; pode obter as ferramentas mencionadas abaixo no
diret&oacute;rio
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.4/tools/">tools</a>
de qualquer dos espelhos FTP, ou no diret&oacute;rio <tt>4.4/tools</tt>
do CD1 do conjunto de CDs do OpenBSD.

<p>
Para preparar um disquete no MS-DOS ou Windows, primeiro utilize as
ferramentas nativas de formata&ccedil;&atilde;o para formatar o disco.

<p>
Para gravar a imagem de instala&ccedil;&atilde;o para o disquete
preparado voc&ecirc; pode usar <i>rawrite</i>, <i>fdimage</i>, ou
<i>ntrw</i>.
<i>rawrite</i> n&atilde;o ir&aacute; funcionar no Windows NT, 2000 ou
XP.

<p>
Note que <tt>FDIMAGE.EXE</tt> e <tt>RAWRITE.EXE</tt> s&atilde;o ambas
aplica&ccedil;&otilde;es para MS-DOS, e portanto est&atilde;o limitados
&agrave; conven&ccedil;&atilde;o de nomes de arquivo "8.3" do MS-DOS.
Como <tt>floppyB44.fs</tt> e <tt>floppyC44.fs</tt> t&ecirc;m nomes de
arquivo mais longos, voc&ecirc; ter&aacute; que descobrir como seu
sistema guardou os arquivos no "formato 8.3" antes de usar
<tt>FDIMAGE.EXE</tt> ou <tt>RAWRITE.EXE</tt> para fazer seus disquetes
de boot.

<p>
Exemplo de uso do <i>rawrite</i>:
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <b>rawrite</b>
  RaWrite 1.2 - Write disk file to raw floppy diskette

  Enter source file name: <b>floppy44.fs</b>
  Enter destination drive: <b>a</b>
  Please insert a formatted diskette into drive A: and press -ENTER- :
<i><b>Enter</b></i>
</pre></td></tr></table>

<p>
Exemplo de uso do <i>fdimage</i>:
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>fdimage -q floppy44.fs a:</strong>
</pre></td></tr></table>

<p>
Exemplo de uso do <i>ntrw</i>:
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>ntrw floppy44.fs a:</strong>
  3.5", 1.44MB, 512 bytes/sector
  bufsize is 9216
  1474560 bytes written
</pre></td></tr></table>

<a name="MkCD-ROM"></a>
<h3>4.3.3 - Criando um CD-ROM</h3>

<p>
Voc&ecirc; pode criar um CD-ROM usando os arquivos <tt>cd44.iso</tt> ou
<tt>install44.iso</tt>.
Determinar os detalhes exatos fica a cargo do leitor, com as ferramentas
que ele possua &agrave; sua disposi&ccedil;&atilde;o.

<p>
Algumas das ferramentas no OpenBSD s&atilde;o:
<ul>
<li><a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkhybrid&amp;sektion=8">mkhybrid(8)</a>
<li><a
href="http://cdrecord.berlios.de/old/private/cdrecord.html">cdrecord</a>,
parte da cole&ccedil;&atilde;o cdrtools no <a
href="../faq15.html">Sistema de Pacotes e Ports do OpenBSD</a>.
<li><a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=cdio&amp;sektion=1">cdio(1)</a>
e sua op&ccedil;&atilde;o de grava&ccedil;&atilde;o "track at once"
(tao).
</ul>

<a name="Boot"></a>
<h2>4.4 - Bootando a m&iacute;dia de instala&ccedil;&atilde;o do
OpenBSD</h2>

<h3>Boot em i386/amd64</h3>

Efetuar o boot de uma imagem de instala&ccedil;&atilde;o nas plataformas
PC i386 e amd64 n&atilde;o &eacute; nada de novo para a maioria das
pessoas.
Se voc&ecirc; est&aacute; usando um disquete, simplesmente insira o
disquete no drive e ligue o sistema.
A imagem de instala&ccedil;&atilde;o ser&aacute; ent&atilde;o carregada,
dado que o boot por disquete esta habilitado em sua BIOS.
Se voc&ecirc; quer efetuar o boot por CD, voc&ecirc; deve entrar na BIOS
de seu sistema e configurar as op&ccedil;&otilde;es de boot para
permitir o boot por CD.
Algumas BIOS mais antigas n&atilde;o t&ecirc;m essa op&ccedil;&atilde;o,
e ent&atilde;o voc&ecirc; dever&aacute; utilizar um disquete para o boot
de sua imagem de instala&ccedil;&atilde;o.
N&atilde;o se preocupe, no entanto; mesmo que voc&ecirc; efetue o boot a
partir do disquete, voc&ecirc; ainda pode instalar a partir do CD.

<p>
Voc&ecirc; ainda pode instalar bootando <a href="#bsd.rd">bsd.rd</a> a
partir de uma parti&ccedil;&atilde;o OpenBSD existente, ou mesmo
atrav&eacute;s da rede usando o
<a href="../faq6.html#PXE">processo de boot PXE</a>.

<h3>Boot em sparc/sparc64</h3>

<b>NOTA:</b>
Na plataforma <a href="../../sparc64.html">sparc64</a> apenas as
m&aacute;quinas (Ultra 1, Ultra 2) podem efetuar boot a partir de
disquete.

<p>
Para efetuar boot por disquete, insira o disquete com a imagem de
instala&ccedil;&atilde;o do OpenBSD no drive de disquete.
Use, ent&atilde;o, o seguinte comando para efetuar o boot a partir do
disquete:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot floppy</b>
</pre></td></tr></table>

<p>
Para boot a partir do CD-ROM, coloque o CD-ROM do OpenBSD no drive. Se
sua m&aacute;quina Sun possui apenas um drive de CD-ROM, ent&atilde;o
apenas v&aacute; at&eacute; o prompt de boot, onde voc&ecirc;
poder&aacute; digitar '<tt>boot cdrom</tt>':

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot cdrom</b>
</pre></td></tr></table>

<p>
&Eacute; claro, isso s&oacute; ir&aacute; funcionar no novo modo de
comando.
Se voc&ecirc; est&aacute; no antigo modo de comando (uma seta para a
direita), digite 'n' para ir para o novo modo de comando.
(Se voc&ecirc; est&aacute; usando um sparc antigo pr&eacute;-sun4c,
voc&ecirc; provavelmente n&atilde;o tem o novo modo de comando. Nesse
caso, voc&ecirc; ter&aacute; que fazer experi&ecirc;ncias) Se voc&ecirc;
possui m&uacute;ltiplos dispositivos de CD-ROM, voc&ecirc; deve efetuar
o boot a partir do drive correto.
Tente <tt>probe-scsi</tt> no novo modo de comando.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>probe-scsi</b>

  Target 0
    Unit 0   Disk     QUANTUM LIGHTNING 365S
  Target 1
    Unit 0   Removable Disk     QUANTUM EMPIRE_1080S
  Target 3
    Unit 0   Removable Disk     Joe's CD-ROM
</pre></td></tr></table>

<p>
Descubra qual dos discos &eacute; o CD-ROM a partir do qual voc&ecirc;
quer efetuar o boot. Note o n&uacute;mero 'target'.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot /sbus/esp/sd@X,0</b>
</pre></td></tr></table>


<a name="Install"></a>
<h2>4.5 - Performing an install</h2>
<a name="Start"></a>
<h3>4.5.1 - Come&ccedil;ando a instala&ccedil;&atilde;o</h3>
<!-- XXXrelease -->
Qualquer que seja o seu m&eacute;todo de boot, agora &eacute; hora de
us&aacute;-lo. Durante o processo de boot, o kernel e todos os programas
usados para instalar o OpenBSD s&atilde;o carregados em mem&oacute;ria.
O problema mais comum ao efetuar o boot &eacute; um disquete ruim ou um
problema de alinhamento do drive. O disquete de boot &eacute; bem
compacto -- qualquer m&iacute;nima falha causar&aacute; problemas.

<p>
Em quase qualquer momento da instala&ccedil;&atilde;o do OpenBSD,
voc&ecirc; pode parar a instala&ccedil;&atilde;o atual apertando as
teclas CTRL-C e pode recome&ccedil;ar sem reiniciar executando
<tt>install</tt> no prompt de comando.

<p>
Quando voc&ecirc; efetuar boot com sucesso, voc&ecirc; ir&aacute; ver um
monte de mensagens de texto passar pela tela.
Este texto, em muitas arquiteturas em branco e azul, &eacute; o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg</a>,

o kernel dizendo a voc&ecirc; quais dispositivos foram encontrados, e
onde. N&atilde;o se preocupe em lembrar esse texto, j&aacute; que uma
c&oacute;pia &eacute; salva como
<tt>/var/run/dmesg.boot</tt>.

<p>
Ent&atilde;o, voc&ecirc; ver&aacute; o seguinte:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  root on rd0a swap on rd0b dump on rd0b
  erase ^?, werase ^W, kill ^U, intr ^C, status ^T
  (I)nstall, (U)pgrade or (S)hell? <b>i</b>
</pre></td></tr></table>

<p>
E com isso, chegamos &agrave; nossa primeira pergunta. Na maior parte
das vezes, voc&ecirc; tem as tr&ecirc;s op&ccedil;&otilde;es listadas:
<ul>
<li><b>Install:</b> carrega o OpenBSD no sistema, sobrescrevendo o que
quer que estivesse ali. Note que &eacute; poss&iacute;vel deixar algumas
parti&ccedil;&otilde;es intocadas durante esse processo, como
<tt>/home</tt>, mas excetuando-se essa, assuma que todo o restante
ser&aacute; sobrescrito.
<li><b>Upgrade:</b> Instalar um novo conjunto de <a
href="#FilesNeeded">arquivos de instala&ccedil;&atilde;o</a> nesta
m&aacute;quina, mas n&atilde;o sobrescrever nenhuma
informa&ccedil;&atilde;o de configura&ccedil;&atilde;o, dados de
usu&aacute;rio, ou programas adicionais. Nenhuma
formata&ccedil;&atilde;o de disco &eacute; feita, e nem os
diret&oacute;rios <tt>/etc</tt> e <tt>/var</tt> s&atilde;o sobrescritos.
Algumas coisas importantes a notar:
<ul>
<li> Voc&ecirc; n&atilde;o ter&aacute; a op&ccedil;&atilde;o de instalar
o arquivo <tt>etc44.tgz</tt>.
Ap&oacute;s a instala&ccedil;&atilde;o, voc&ecirc; ter&aacute; que
<a href="../upgrade44.html#etcUpdates">unir manualmente</a> as
modifica&ccedil;&otilde;es de <tt>etc44.tgz</tt> em seu sistema antes
que ele esteja totalmente funcional.
Este &eacute; um passo importante que precisa ser feito, j&aacute; que,
ao contr&aacute;rio, alguns servi&ccedil;os vitais (como o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>)
podem n&atilde;o iniciar.

<li>O processo de Upgrade n&atilde;o &eacute; projetado para pular
vers&otilde;es!
Muito embora isso frequentemente funcione, n&atilde;o &eacute;
suportado.
Para o OpenBSD 4.4, o &uacute;nico upgrade suportado &eacute; de 4.3
para 4.4.
Se voc&ecirc; tem que atualizar a partir de uma vers&atilde;o anterior,
efetue o upgrade para vers&otilde;es intermedi&aacute;rias primeiro, ou
se o sistema est&aacute; muito desatualizado, considere uma
reinstala&ccedil;&atilde;o completa.

</ul>
<!-- XXXversion -->
Mais informa&ccedil;&otilde;es sobre upgrade entre vers&otilde;es podem
ser encontradas no
<a href="../upgrade44.html">Guia de Upgrade do OpenBSD 4.4</a>.

<li><b>Shell:</b> Algumas vezes, voc&ecirc; precisa efetuar reparos ou
manuten&ccedil;&atilde;o em um sistema que n&atilde;o consegue (ou
n&atilde;o deve) bootar por um kernel normal. Esta op&ccedil;&atilde;o
permite que voc&ecirc; execute manuten&ccedil;&atilde;o ao sistema.
Um n&uacute;mero de ferramentas importantes est&aacute;
dispon&iacute;vel na m&iacute;dia de boot.
</ul>

Ocasionalmente, voc&ecirc; n&atilde;o ir&aacute; ver a
op&ccedil;&atilde;o "Upgrade" listada.
Depois de um <i>flag day</i>, n&atilde;o &eacute; poss&iacute;vel
efetuar o upgrade diretamente; voc&ecirc; deve reinstalar o sistema do
zero.

<p>
Neste exemplo, iremos executar uma instala&ccedil;&atilde;o, mas o
processo de upgrade &eacute; similar.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Welcome to the OpenBSD/i386 4.4 install program.

  This program will help you install OpenBSD. At any prompt except
password
  prompts you can escape to a shell by typing '!'. Default answers are
shown
  in []'s and are selected by pressing RETURN.  At any time you can exit
this
  program by pressing Control-C, but exiting during an install can leave
your
  system in an inconsistent state.

  Terminal type: [vt220] <b><i>Enter</i></b>
  kbd(8) mapping? ('L' for list) [none] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Na maioria dos casos, o terminal padr&atilde;o &eacute; apropriado; no
entanto, se voc&ecirc; est&aacute; utilizando uma <a
href="../faq7.html#SerCon">console serial</a> para a
instala&ccedil;&atilde;o, n&atilde;o escolha o padr&atilde;o, responda
apropriadamente.

<p>
Se voc&ecirc; n&atilde;o escolher uma tabela de
codifica&ccedil;&atilde;o para o teclado, um layout de teclado US
ser&aacute; usado.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  IS YOUR DATA BACKED UP? As with anything that modifies disk contents,
this
  program can cause SIGNIFICANT data loss.

  It is often helpful to have the installation notes handy. For complex
disk
  configurations, relevant disk hardware manuals and a calculator are
useful.

  Proceed with install? [no] <b>y</b>
</pre></td></tr></table>

<p>
Se voc&ecirc; escolher o padr&atilde;o aqui, o processo de
instala&ccedil;&atilde;o ser&aacute; encerrado e retornar&aacute; ao
prompt de comando.

<p>
As notas de instala&ccedil;&atilde;o citadas aqui est&atilde;o nos CDs
de instala&ccedil;&atilde;o e servidores FTP, no arquivo
<tt>INSTALL.<i>&lt;plat&gt;</i></tt>, onde
<i>&lt;plat&gt;</i> &eacute; sua <a
href="../../pt/plat.html">plataforma</a>, por 
exemplo, <tt>i386</tt>.

<a name="Disks"></a>
<h3>4.5.2 - Configurando discos</h3>

<i><b>Nota Importante:</b>
Usu&aacute;rios com discos r&iacute;gidos grandes (maiores do que o que
estava normalmente dispon&iacute;vel quando seu computador foi feito)
devem ver
<a href="../faq14.html#LargeDrive">esta se&ccedil;&atilde;o</a> antes de
prosseguir.</i>

<p>
Configurar discos no OpenBSD varia um pouco de acordo com a plataforma.
Para <a href="../../i386.html">i386</a>, <a
href="../../amd64.html">amd64</a>, <a
href="../../macppc.html">macppc</a>, <a
href="../../zaurus.html">zaurus</a> e <a
href="../../armish.html">armish</a>,
a configura&ccedil;&atilde;o de disco &eacute; feita em dois
est&aacute;gios. Primeiro, o se&ccedil;&atilde;o do OpenBSD do disco
&eacute; definida usando o fdisk(8), e ent&atilde;o essa
se&ccedil;&atilde;o &eacute; subdividida em parti&ccedil;&otilde;es do
OpenBSD usando o disklabel(8).

<p>
Alguns usu&aacute;rios podem ficar um pouco confusos com a terminologia
usada aqui. Parecer&aacute; que n&oacute;s estamos usando a palavra
"parti&ccedil;&atilde;o" de duas formas diferentes. Esta
observa&ccedil;&atilde;o est&aacute; correta. H&aacute; dois
n&iacute;veis de particionamento nas plataformas acima listadas do
OpenBSD, a primeira, que poderia ser considerada a
parti&ccedil;&atilde;o de Sistema Operacional, e a segunda que &eacute;
como a parti&ccedil;&atilde;o do OpenBSD &eacute; subparticionada em
sistemas de arquivos individuais. O primeiro n&iacute;vel &eacute;
vis&iacute;vel como uma parti&ccedil;&atilde;o de disco para o DOS,
Windows, e qualquer outro SO que use esse sistema de layout de disco, e
o segundo n&iacute;vel de particionamento &eacute; vis&iacute;vel apenas
para o OpenBSD e aqueles SOs que conseguem ler diretamente um sistema de
arquivos do OpenBSD.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Cool!  Let's get to it.

  You will now initialize the disk(s) that OpenBSD will use. To enable
all
  available security features you should configure the disk(s) to allow
the
  creation of separate filesystems for /, /tmp, /var, /usr, and /home.

  Available disks are: wd0.
  Which one is the root disk? (or done) [wd0] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
O disco root &eacute; o disco a partir do qual o sistema ir&aacute;
bootar, e normalmente &eacute; onde fica o espa&ccedil;o de swap.
Discos IDE ser&atilde;o mostrados como <tt>wd0</tt>, <tt>wd1</tt>, etc.,
discos SCSI e dispositivos RAID como <tt>sd0</tt>, <tt>sd1</tt>, e assim
por diante. Todos os discos que o OpenBSD consegue detectar est&atilde;o
listados aqui -- se voc&ecirc; tem discos que n&atilde;o est&atilde;o
aparecendo, voc&ecirc; tem hardware n&atilde;o suportado ou configurado
incorretamente.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you want to use *all* of wd0 for OpenBSD? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Se voc&ecirc; responder "yes" para essa pergunta, todo o disco
ser&aacute; alocado para o OpenBSD. Isso ir&aacute; resultar em um
Master Boot Record e tabela de parti&ccedil;&otilde;es padr&atilde;o
sendo escrita no disco -- uma parti&ccedil;&atilde;o, com tamanho de
todo o disco, configurada para tipo de parti&ccedil;&atilde;o OpenBSD, e
ajustada como parti&ccedil;&atilde;o de boot. Essa ser&aacute; a escolha
comum para a maior parte dos sistemas OpenBSD de produ&ccedil;&atilde;o;
no entanto, h&aacute; alguns sistemas em que isto n&atilde;o deve ser
feito. Muitos sistemas Compaq, muitos laptops, alguns Dell e outros
sistemas utilizam uma parti&ccedil;&atilde;o de
"manuten&ccedil;&atilde;o" ou "Suspender para Disco", que deve ser
mantida intacta.
Se seu sistema tem qualquer parti&ccedil;&atilde;o de outro tipo que
voc&ecirc; n&atilde;o deseja apagar, n&atilde;o responda "yes" para a
pergunta acima.
Por outro lado, se seu sistema tem um disco novo que nunca foi
utilizado, voc&ecirc; provavelmente ir&aacute; querer responder "yes"
aqui (ou usar a op&ccedil;&atilde;o "update" do fdisk), para que
voc&ecirc; tenha um master boot record v&aacute;lido e assinatura
posicionada.

<p>
Para este exemplo, iremos assumir que o disco deve ser dividido entre o
OpenBSD e uma parti&ccedil;&atilde;o pr&eacute;-existente do Windows
2000, ent&atilde;o iremos escolher o padr&atilde;o "no", o que nos
levar&aacute; ao programa
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>.
Voc&ecirc; pode obter mais informa&ccedil;&otilde;es sobre o fdisk(8)
<a href="../faq14.html#fdisk">aqui</a>.

<p>
<b>Nota:</b> Se voc&ecirc; responder "Y" para a pergunta "Do you want to
use *all* of wd0 for OpenBSD?", ou se voc&ecirc; est&aacute; usando uma
plataforma que n&atilde;o usa o fdisk (por exemplo, sparc64), voc&ecirc;
n&atilde;o ir&aacute; passar por esta etapa, indo diretamente para <a
href="#disklabel">criando um disklabel</a>

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  You will now create a single MBR partition to contain your OpenBSD
data. This
  partition must have an id of 'A6'; must *NOT* overlap other
partitions; and
  must be marked as the only active partition.

  The 'manual' command describes all the fdisk commands in detail.

  Disk: wd0       geometry: 2434/255/63 [39102336 Sectors]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
 
-------------------------------------------------------------------------------
  *0: 0B      0   1   1 -    195 254  63 [          63:     3148677 ]
Win95 FAT-32
   1: 00      0   0   0 -      0   0   0 [           0:           0 ]
unused      
   2: 00      0   0   0 -      0   0   0 [           0:           0 ]
unused      
   3: 00      0   0   0 -      0   0   0 [           0:           0 ]
unused      
  Enter 'help' for information
  fdisk: 1> <b>help</b>
          help            Command help list
          manual          Show entire OpenBSD man page for fdisk
          reinit          Re-initialize loaded MBR (to defaults)
          setpid          Set the identifier of a given table entry
          disk            Edit current drive stats
          edit            Edit given table entry
          flag            Flag given table entry as bootable
          update          Update machine code in loaded MBR
          select          Select extended partition table entry MBR
          swap            Swap two partition entries
          print           Print loaded MBR partition table
          write           Write loaded MBR to disk
          exit            Exit edit of current MBR, without saving
changes
          quit            Quit edit of current MBR, saving current
changes
          abort           Abort program without saving current changes
  fdisk: 1> 
</pre></td></tr></table>

<p>
Alguns comandos merecem maiores explica&ccedil;&otilde;es:
<ul>
<li><b><tt>r</tt></b> ou <b><tt>reinit</tt>:</b> Limpa a tabela de
parti&ccedil;&otilde;es corrente, faz uma grande parti&ccedil;&atilde;o
para o OpenBSD cobrindo todo o disco, marca como ativa, e instala o
c&oacute;digo MBR do OpenBSD.
Equivalente a responder "yes" para a pergunta "<tt>use *all* of
...</tt>". Voc&ecirc; quase que certamente s&oacute; vai querer fazer
isso em um disco novo.
<li><b><tt>p</tt></b> ou <b><tt>print:</tt></b> Mostra a tabela de
parti&ccedil;&atilde;o atual em setores. "<tt>p m</tt>" ir&aacute;
mostrar a tabela de parti&ccedil;&otilde;es em megabytes, "<tt>p g</tt>"
ir&aacute; mostr&aacute;-la em gigabytes.
<li><b><tt>e</tt></b> ou <b><tt>edit:</tt></b> edita ou altera uma
entrada da tabela.
<li><b><tt>f</tt></b> ou <b><tt>flag:</tt></b> Marca uma
parti&ccedil;&atilde;o como ativa, a partir da qual o boot ser&aacute;
feito.
<li><b><tt>u</tt></b> ou <b><tt>update:</tt></b> Atualiza a MBR com o
c&oacute;digo de boot do OpenBSD, similar a "<tt>reinit</tt>", exceto
que n&atilde;o altera a tabela de parti&ccedil;&otilde;es existente.
<li><b><tt>exit</tt></b> e <b><tt>quit:</tt></b> Cuidado com esses,
j&aacute; que alguns usu&aacute;rios est&atilde;o acostumados com "exit"
e "quit" tendo significados opostos.
</ul>

Vale a pena lembrar novamente que um erro aqui ir&aacute; resultar em
uma significativa perda de dados. Se voc&ecirc; vai fazer isso em um
disco que possui dados importantes, pode ser v&aacute;lido praticar em
um disco "descart&aacute;vel", al&eacute;m de possuir um bom backup.

<p>
Nosso disco aqui possui uma parti&ccedil;&atilde;o de 1.5G para o
Windows 2000 (usando o sistema de arquivos FAT). Olhando para as
informa&ccedil;&otilde;es mostradas acima, podemos ver que a
parti&ccedil;&atilde;o Windows termina no cilindro 195 do disco.
Ent&atilde;o, iremos alocar o espa&ccedil;o restante do disco para o
OpenBSD, come&ccedil;ando no cilindro 196. Voc&ecirc; tamb&eacute;m
poderia calcular o setor de in&iacute;cio do OpenBSD (3148740) somando o
setor de in&iacute;cio da parti&ccedil;&atilde;o existente (63) e seu
tamanho (6148677).

<p>
Voc&ecirc; pode editar o layout de disco tanto na forma de
Cilindros/Cabe&ccedil;as/Setores ou apenas em setores. Qual deles
&eacute; mais f&aacute;cil ir&aacute; depender do que voc&ecirc;
est&aacute; fazendo; neste caso, trabalhando com uma
parti&ccedil;&atilde;o j&aacute; existente, usar o formato CHS
ser&aacute; provavelmente mais f&aacute;cil.
Se voc&ecirc; est&aacute; criando a primeira parti&ccedil;&atilde;o do
disco, usar apenas setores pode ser mais f&aacute;cil.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk: 1> <b>e 1</b>
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
 
-------------------------------------------------------------------------------
   1: 00      0   0   0 -      0   0   0 [           0:           0 ]
unused      
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>a6</b>
  Do you wish to edit in CHS mode? [n] <b>y</b>
  BIOS Starting cylinder [0 - 2433]: [0] <b>196</b>
  BIOS Starting head [0 - 254]: [0] <b><i>Enter</i></b>
  BIOS Starting sector [1 - 63]: [0] <b>1</b>
  BIOS Ending cylinder [0 - 2433]: [0] <b>2433</b>
  BIOS Ending head [0 - 254]: [0] <b>254</b>
  BIOS Ending sector [1 - 63]: [0] <b>63</b>
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 2434/255/63 [39102336 Sectors]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
 
-------------------------------------------------------------------------------
  *0: 0B      0   1   1 -    195 254  63 [          63:     3148677 ]
Win95 FAT-32
   1: A6    196   0   1 -   2433 254  63 [     3148740:    35953470 ]
OpenBSD     
   2: 00      0   0   0 -      0   0   0 [           0:           0 ]
unused      
   3: 00      0   0   0 -      0   0   0 [           0:           0 ]
unused      
  fdisk:*1> <b>p m</b>
  Disk: wd0       geometry: 2434/255/63 [19093 Megabytes]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
 
-------------------------------------------------------------------------------
  *0: 0B      0   1   1 -    195 254  63 [          63:        1537M]
Win95 FAT-32
   1: A6    196   0   1 -   2433 254  63 [     3148740:       17555M]
OpenBSD     
   2: 00      0   0   0 -      0   0   0 [           0:           0M]
unused      
   3: 00      0   0   0 -      0   0   0 [           0:           0M]
unused      
  fdisk:*1> 
</pre></td></tr></table>

<a name="trackoffset"></a>
<p>
Em plataformas que usam o fdisk, &eacute; importante que a primeira
parti&ccedil;&atilde;o n&atilde;o ocupe a primeira trilha do disco,
<i>neste caso</i>, come&ccedil;ando no setor <tt>63</tt>. Isto
ir&aacute; variar de m&aacute;quina para m&aacute;quina e de sistema de
disco para sistema de disco. Se uma parti&ccedil;&atilde;o OpenBSD for
criada come&ccedil;ando no offset <tt>0</tt>, esta tabela de
parti&ccedil;&otilde;es terminar&aacute; sendo sobrescrita pelo <a
href="../faq14.html#Boot386">Partition Boot Record</a> da
parti&ccedil;&atilde;o OpenBSD.
O sistema ainda pode ser boot&aacute;vel, mas ser&aacute; muito
dif&iacute;cil de manter, e esta configura&ccedil;&atilde;o
<i>n&atilde;o &eacute; recomendada ou suportada</i>.

<p>
Note que o prompt mudou para incluir um asterisco ('<tt>*</tt>') para
indicar que voc&ecirc; tem modifica&ccedil;&otilde;es n&atilde;o-salvas.
Como podemos ver pelo output de <tt>p&nbsp;m</tt> n&oacute;s n&atilde;o
alteramos nossa parti&ccedil;&atilde;o Windows, alocamos com sucesso o
restante do disco para o OpenBSD, e as parti&ccedil;&otilde;es
n&atilde;o t&ecirc;m interse&ccedil;&otilde;es. Estamos dentro. Quase.

<p>
O que ainda n&atilde;o fizemos foi marcar a parti&ccedil;&atilde;o como
ativa para que a m&aacute;quina efetue o boot do OpenBSD ao reiniciar:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>f 1</b>
  Partition 1 marked active.
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 2434/255/63 [39102336 Sectors]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
 
-------------------------------------------------------------------------------
   0: 0B      0   1   1 -    195 254  63 [          63:     3148677 ]
Win95 FAT-32
  *1: A6    196   0   1 -   2433 254  63 [     3148740:    35953470 ]
OpenBSD     
   2: 00      0   0   0 -      0   0   0 [           0:           0 ]
unused      
   3: 00      0   0   0 -      0   0   0 [           0:           0 ]
unused      
  fdisk:*1>
</pre></td></tr></table>

<p>
E agora, estamos prontos para salvar nossas modifica&ccedil;&otilde;es:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>w</b>
  Writing MBR at offset 0.
  wd0: no disk label
  fdisk: 1> <b>q</b>
</pre></td></tr></table> 

<p>

<a name="disklabel"></a>
<h3>Criando um disklabel</h3>
O pr&oacute;ximo passo &eacute; usar o 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>

para dividir a parti&ccedil;&atilde;o OpenBSD. Mais detalhes no uso do
disklabel(8) podem ser encontrados no
<a href="../faq14.html#disklabel">FAQ 14, disklabel</a>.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Here is the partition information you chose:
  
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
 
------------------------------------------------------------------------
   0: 0B    0   1  1 -  202 239 63 [          63:     3069297 ] Win95
FAT-32
  *1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused

  You will now create an OpenBSD disklabel inside the OpenBSD MBR
  partition. The disklabel defines how OpenBSD splits up the MBR
partition
  into OpenBSD partitions in which filesystems and swap space are
created.

  The offsets used in the disklabel are ABSOLUTE, i.e. relative to the
  start of the disk, NOT the start of the OpenBSD MBR partition.

  # Inside MBR partition 1: type A6 start 3148740 size 35953470
  Treating sectors 3148740-39102210 as the OpenBSD portion of the disk.
  You can use the 'b' command to change this.

  Initial label editor (enter '?' for help at any prompt)
  > <b>?</b>
  Available commands:
    ? [command] - show help                  n [part] - set mount point
    a [part]    - add partition              p [unit] - print partitions
    b           - set OpenBSD boundaries     q        - quit & save
changes
    c [part]    - change partition size      r        - display free
space
    D           - reset label to default     s [path] - save label to
file
    d [part]    - delete partition           u        - undo last change
    e           - edit drive parameters      w        - write label to
disk
    g [d | u]   - [d]isk or [u]ser geometry  X        - toggle expert
mode
    l [unit]    - print disk label header    x        - exit & lose
changes
    M           - disklabel(8) man page      z        - delete all
partitions
    m [part]    - modify partition

  Suffixes can be used to indicate units other than sectors:
          'b' (bytes), 'k' (kilobytes), 'm' (megabytes), 'g' (gigabytes)
          'c' (cylinders), '%' (% of total disk), '&' (% of free space).
  Values in non-sector units are truncated to the nearest cylinder
boundary.
  > 
</pre></td></tr></table>

<p>
Novamente, alguns desses comandos merecem mais
explica&ccedil;&otilde;es:
<ul>
<li><b><tt>p</tt></b> - mostra (print) o disklabel atual na tela, e
voc&ecirc; pode usar os modificadores <tt>k, m</tt> ou <tt>g</tt> para
kilobytes, megabytes ou gigabytes.

<li><b><tt>D</tt></b> - Limpa um disklabel existente, cria um novo
disklabel padr&atilde;o que cobre apenas a parti&ccedil;&atilde;o
OpenBSD atual. Isto pode ser &uacute;til se o disco tinha anteriormente
um outro disklabel, e a parti&ccedil;&atilde;o OpenBSD foi recriada com
um tamanho diferente -- o disklabel antigo pode n&atilde;o ser deletado,
e causar confus&atilde;o.

<li><b><tt>m</tt></b> - Modifica uma entrada existente em um disklabel.
N&atilde;o superestime o que isto ir&aacute; fazer para voc&ecirc;.
Enquanto ele pode alterar o tamanho de uma parti&ccedil;&atilde;o do
disklabel, ele N&Atilde;O altera o sistema de arquivos em disco.
Usar esta op&ccedil;&atilde;o e esperar que ela magicamente redimensione
parti&ccedil;&otilde;es existentes &eacute; uma boa maneira de perder
grandes quantidades de dados.
No entanto, esta op&ccedil;&atilde;o em conjunto com o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=growfs&amp;sektion=8">growfs(8)</a>
podem ser usados para aumentar uma parti&ccedil;&atilde;o.

</ul>

<p>
Dividir o seu disco apropriadamente &eacute; importante. A resposta para
a pergunta, "Como devo particionar o meu sistema?" &eacute; "Exatamente
como voc&ecirc; precisa". Isto ir&aacute; variar de
aplica&ccedil;&atilde;o para aplica&ccedil;&atilde;o. N&atilde;o
h&aacute; resposta universal. Se voc&ecirc; est&aacute; incerto sobre
como particionar seu sistema, veja
<a href="#Partitioning">esta discuss&atilde;o</a>.

<p>
Neste sistema, temos mais de 17G dispon&iacute;veis para o OpenBSD.
&Eacute; um monte de espa&ccedil;o, e &eacute; improv&aacute;vel que
precisemos da maioria dele. Ent&atilde;o, iremos deliberadamente
n&atilde;o usar os tamanhos m&iacute;nimos absolutos. &Eacute; melhor
ter alguns megabytes de espa&ccedil;o inutilizado do que um kilobyte
faltando.

<p>
No disco root, uma parti&ccedil;&atilde;o 'a' <b>deve</b> ser criada
para o sistema de arquivos root (/).
O processo de instala&ccedil;&atilde;o n&atilde;o ir&aacute; prosseguir
sem ela.
Geralmente, voc&ecirc; ir&aacute; querer ter uma parti&ccedil;&atilde;o
swap, 'b', tamb&eacute;m, mas se voc&ecirc; tiver certeza que seu
sistema nunca ir&aacute; exceder a mem&oacute;ria real, ent&atilde;o
voc&ecirc; pode deix&aacute;-la de fora.
Se uma parti&ccedil;&atilde;o 'b' existir no disco root, ela ser&aacute;
automaticamente usada como swap.
Parti&ccedil;&otilde;es swap nos outros discos dever&atilde;o ser
manualmente adicionadas ao <i>/etc/fstab</i>.

<p>
Depois de pensar um pouco, decidimos criar apenas
parti&ccedil;&otilde;es suficientes para permitir a
cria&ccedil;&atilde;o dos sistemas de arquivos separados recomendados
(<tt>/, /tmp, /var, /usr, /home</tt>) juntamente com uma
parti&ccedil;&atilde;o swap:
<ul>
<li><i><b>wd0a: /</b></i> (root) - 150M. Deve ser mais que suficiente. 
<li><i><b>wd0b: </b></i>(swap) - 300M.
<li><i><b>wd0d: /tmp</b></i> - 120M.  <tt>/tmp</tt> &eacute; usado para
a compila&ccedil;&atilde;o de alguns softwares, 120M dever&aacute; ser
suficiente para a maioria das coisas.
<li><i><b>wd0e: /var</b></i> - 80M.  Se este fosse um servidor web ou de
email, ter&iacute;amos feito esta parti&ccedil;&atilde;o muito maior,
mas n&atilde;o &eacute; o que estamos fazendo.
<li><i><b>wd0g: /usr</b></i> - 6G.  Queremos que esta
parti&ccedil;&atilde;o seja grande o suficiente para guardar algumas
aplica&ccedil;&otilde;es de usu&aacute;rio, al&eacute;m de ser capaz de
atualizar e recompilar o sistema a partir dos fontes se desejado ou
necess&aacute;rio. A <a href="../faq15.html#Ports">&aacute;rvore de
Ports</a> tamb&eacute;m ficar&aacute; aqui, o que ir&aacute; ocupar
quase 250M deste espa&ccedil;o antes que os ports sejam compilados.
Se voc&ecirc; estiver planejando compilar muitas
aplica&ccedil;&otilde;es a partir dos fontes usando os <a
href="../faq15.html#Ports">ports</a> em lugar de usar os <a
href="../faq15.html#PkgMgmt">pacotes</a> pr&eacute;-compilados,
voc&ecirc; pode querer adicionar muito mais espa&ccedil;o aqui.
<li><i><b>wd0h: /home</b></i> - 4G.  Ir&aacute; disponibilizar
espa&ccedil;o suficiente para arquivos de usu&aacute;rio.
</ul>

Agora, se voc&ecirc; somar tudo, ir&aacute; ver que mais de 6G de
espa&ccedil;&atilde;o n&atilde;o est&atilde;o sendo usados!
Espa&ccedil;o n&atilde;o utilizado n&atilde;o ir&aacute; fazer mal
algum, e nos d&aacute; flexibilidade para aumentar as coisas no futuro
se necess&aacute;rio. Precisa de mais espa&ccedil;o no <i>/tmp</i>?
Crie uma nova parti&ccedil;&atilde;o no espa&ccedil;o vago, formate a
nova parti&ccedil;&atilde;o com o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;sektion=8"
>newfs(8)</a>, e altere o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5"
><i>/etc/fstab</i></a> para montar a nova parti&ccedil;&atilde;o no
<i>/tmp</i>.
Problema resolvido.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>p m</b>
  #             size        offset  fstype [fsize bsize  cpg]
  OpenBSD area: 1537.5M-19092.9M; size: 17555.4M; free: 17555.4M
    c:      19092.9M          0.0M  unused      0     0      
    i:       1498.7M          0.0M  MSDOS                   
  > <b>a a</b>
  offset: [3148740] <b><i>Enter</i></b>
  size: [35953470] <b>150m</b>
  Rounding to cylinder: 321300
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/</b>
  > <b>a b</b>
  offset: [3470040] <b><i>Enter</i></b>
  size: [35632170] <b>300m</b>
  Rounding to cylinder: 626535
  FS type: [swap] <b><i>Enter</i></b>
  > <b>a d</b>
  offset: [4096575] <b><i>Enter</i></b>
  size: [35005635] <b>120m</b>
  Rounding to cylinder: 257040
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/tmp</b>
  > <b>a e</b>
  offset: [4353615] <b><i>Enter</i></b>
  size: [34748595] <b>80m</b>
  Rounding to cylinder: 176715
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/var</b>
  > <b>a g</b>
  offset: [4530330] <b><i>Enter</i></b>
  size: [34571880] <b>6g</b>
  Rounding to cylinder: 12594960
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr</b>
  > <b>a h</b>
  offset: [17125290] <b><i>Enter</i></b>
  size: [21976920] <b>4g</b>
  Rounding to nearest cylinder: 8401995
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/home</b>
  > <b>p m</b>
  OpenBSD area: 1537.5M-19092.9M; size: 17555.4M; free: 6628.4M
  #             size        offset  fstype [fsize bsize  cpg]
    a:           156.9M          1537.5M  4.2BSD   2048 16384    1 # /
    b:           305.9M          1694.4M    swap                   
    c:         19092.9M             0.0M  unused      0     0      
    d:           125.5M          2000.3M  4.2BSD   2048 16384    1 #
/tmp
    e:            86.3M          2125.8M  4.2BSD   2048 16384    1 #
/var
    g:          6149.9M          2212.1M  4.2BSD   2048 16384    1 #
/usr
    h:          4102.5M          8362.0M  4.2BSD   2048 16384    1 #
/home
    i:          1537.4M             0.0M   MSDOS                   
  > <b>q</b>
  Write new label?: [y] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Voc&ecirc; ir&aacute; notar que h&aacute; uma parti&ccedil;&atilde;o
<i>c</i> que parece termos ignorado. Esta parti&ccedil;&atilde;o
representa todo o disco; n&atilde;o tente alter&aacute;-la. Voc&ecirc;
tamb&eacute;m ir&aacute; notar que a parti&ccedil;&atilde;o <i>i</i>
n&atilde;o foi definida por n&oacute;s; esta &eacute; a
parti&ccedil;&atilde;o Windows 2000 pr&eacute;-existente.
Parti&ccedil;&otilde;es n&atilde;o s&atilde;o assinaladas a nenhuma
letra em particular -- com exce&ccedil;&atilde;o de <i>a</i> (root),
<i>b</i> (swap) e <i>c</i> (todo o disco), o restante das
parti&ccedil;&otilde;es (at&eacute; a letra <i>p</i> est&atilde;o
dispon&iacute;veis para seu uso, como desejar.

<h3>Configurando pontos de montagem e formatando seus sistemas de
arquivo</h3>

Agora vem a configura&ccedil;&atilde;o final de seus pontos de montagem.
Se voc&ecirc; configurou os pontos de montagem atrav&eacute;s do
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>,

este passo consiste apenas em verificar suas escolhas; de outra forma,
voc&ecirc; pode especific&aacute;-las agora.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Mount point for wd0d (131584 KBytes)? (or 'none' or 'done') [/tmp]
<b><i>Enter</i></b>
  Mount point for wd0e (90624 KBytes)? (or 'none' or 'done') [/var]
<b><i>Enter</i></b>
  Mount point for wd0g (6656 MBytes)? (or 'none' or 'done') [/usr]
<b><i>Enter</i></b>
  Mount point for wd0h (4096 MBytes)? (or 'none' or 'done') [/home]
<b><i>Enter</i></b>
  Mount point for wd0d (131584 KBytes)? (or 'none' or 'done') [/tmp]
<b>done</b>
  No more disks to initialize.
 
  OpenBSD filesystems:
  wd0a /
  wd0d /tmp
  wd0e /var
  wd0g /usr
  wd0h /home

  The next step *DESTROYS* all existing data on these partitions!
  Are you really sure that you're ready to proceed? [no] <b>y</b>
  newfs: reduced number of fragments per cylinder group from 20080 to
19992 to enl
  arge last cylinder group
  /dev/rwd0a: 156.9MB in 321300 sectors of 512 bytes
  5 cylinder groups of 39.05MB, 2499 blocks, 5120 inodes each
  newfs: reduced number of fragments per cylinder group from 16064 to
15992 to enl
  arge last cylinder group
  /dev/rwd0d: 125.5MB in 257040 sectors of 512 bytes
  5 cylinder groups of 31.23MB, 1999 blocks, 4096 inodes each
  newfs: reduced number of fragments per cylinder group from 11040 to
10992 to enl
  arge last cylinder group
  /dev/rwd0e: 86.3MB in 176712 sectors of 512 bytes
  5 cylinder groups of 21.47MB, 1374 blocks, 2816 inodes each
  /dev/rwd0g: 6149.9MB in 12594960 sectors of 512 bytes
  31 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0h: 4102.5MB in 8401992 sectors of 512 bytes
  21 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local, ctime=Tue Oct 21
00:36:28 2
  008)
  /dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, nodev,
nosuid, ctime=T
  ue Oct 21 00:36:28 2008)
  /dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, nodev,
nosuid, ctime=Tu
  e Oct 21 00:36:28 2008)
  /dev/wd0g on /mnt/usr type ffs (rw, asynchronous, local, nodev,
ctime=Tue Oct 21
   00:36:28 2008)
  /dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, nodev,
nosuid, ctime=Tu
  e Oct 21 00:36:28 2008)
</pre></td></tr></table>

<p>
Voc&ecirc; pode estar se perguntando por que o instalador pergunta
novamente pelos pontos de montagem. Isto permite que voc&ecirc; corrija
quaisquer erros ou omiss&otilde;es feitos durante a
cria&ccedil;&atilde;o do disklabel. Por exemplo, o processo de
instala&ccedil;&atilde;o ir&aacute; deletar automaticamente qualquer
ponto de montagem duplicado informado durante a
configura&ccedil;&atilde;o do disklabel. O programa disklabel ir&aacute;
permitir que voc&ecirc; entre com tais duplicatas, e portanto deve-se
checar por estas ap&oacute;s o disklabel. As duplicatas deletadas
ir&atilde;o resultar em parti&ccedil;&otilde;es sem ponto de montagem,
&agrave;s quais voc&ecirc; dever&aacute; assinalar novos pontos de
montagem se quiser utilizar o espa&ccedil;o.

<p>
Note que a pergunta "Are you really sure that you are ready to proceed?"
tem por padr&atilde;o a resposta "no", ent&atilde;o voc&ecirc;
dever&aacute; deliberadamente informar que ele deve prosseguir e
formatar suas parti&ccedil;&otilde;es. Se voc&ecirc; escolhesse "no",
voc&ecirc; seria simplesmente retornado ao prompt de comando e poderia
reiniciar a instala&ccedil;&atilde;o digitando "install", ou reiniciando
com seu disco de boot.

<p>
Neste ponto todos os sistemas de arquivo ser&atilde;o formatados para
voc&ecirc;. Isto pode demorar algum tempo dependendo do tamanho das
parti&ccedil;&otilde;es e a velocidade do disco.

<a name="Hostname"></a>
<h3>4.5.3 - Configurando o hostname do sistema</h3>
<p>
Agora voc&ecirc; deve configurar o hostname do sistema.
Esta informa&ccedil;&atilde;o, juntamente com o nome de dom&iacute;nio
DNS (especificado <a href="#Network">abaixo</a>), ser&aacute; salvo em
<tt>/etc/myname</tt>, que &eacute; usado durante o boot para ajustar o
hostname do sistema.
Se voc&ecirc; n&atilde;o configurar um hostname para o sistema, o valor
padr&atilde;o de 'my.domain' ser&aacute; usado.

<p>
&Eacute; importante configurar este nome agora, porque ele ser&aacute;
usado quando as chaves criptogr&aacute;ficas do sistema forem geradas
durante o primeiro boot ap&oacute;s a instala&ccedil;&atilde;o. Esta
gera&ccedil;&atilde;o ocorre independentemente da rede estar configurada
ou n&atilde;o.

<p> 
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  System hostname (short form, e.g. 'foo'): <b>puffy</b>
</pre></td></tr></table>

<a name="Network"></a>
<h3>4.5.4 - Configurando a redek</h3>

<p>
Agora &eacute; hora de configurar sua rede. A rede deve ser configurada
se voc&ecirc; planeja executar uma instala&ccedil;&atilde;o baseada em
FTP ou NFS, considerando que ser&aacute; baseada na
informa&ccedil;&atilde;o que voc&ecirc; est&aacute; prestes a digitar.
Aqui est&aacute; um passo-a-passo da se&ccedil;&atilde;o de
configura&ccedil;&atilde;o de rede do processo de
instala&ccedil;&atilde;o.
Em nosso exemplo, iremos conectar uma interface de rede (fxp0) a um
cable modem, configurada usando DHCP, e outra interface &agrave; nossa
rede interna, configurada estaticamente.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Configure the network? [yes] <b><i>Enter</i></b>
  Available interfaces are: fxp0 xl0.
  Which one do you wish to initialize? (or 'done') [fxp0] <b>xl0</b>
  Symbolic (host) name for xl0? [puffy] <b><i>Enter</i></b>
  The media options for xl0 are currently
          media: Ethernet autoselect (100baseTX full-duplex)
  Do you want to change the media options? [no] <b><i>Enter</i></b>
  IPv4 address for xl0? (or 'dhcp') <b>192.168.1.254</b>
  Netmask? [255.255.255.0] <b><i>Enter</i></b>
  IPv6 address for xl0? (or 'rtsol' or 'none') [none]
<b><i>Enter</i></b>
  Available interfaces are: fxp0.
  Which one do you wish to initialize? (or 'done') [fxp0]
<b><i>Enter</i></b>
  Symbolic (host) name for fxp0? [puffy] <b><i>Enter</i></b>
  The media options for fxp0 are currently
          media: Ethernet autoselect (10baseT half-duplex)
  Do you want to change the media options? [no] <b><i>Enter</i></b>
  IPv4 address for fxp0? (or 'none' or 'dhcp') <b>dhcp</b>
  Issuing hostname-associated DHCP request for fxp0.
  DHCPDISCOVER on fxp0 to 255.255.255.255 port 67 interval 1
  DHCPOFFER from 73.34.136.1
  DHCPREQUEST on fxp0 to 255.255.255.255 port 67
  DHCPACK from 73.34.136.1
  bound to 69.241.244.76 -- renewal in 1800 seconds.
  IPv6 address for fxp0? (or 'rtsol' or 'none') [none]
<b><i>Enter</i></b>
  No more interfaces to initialize.
  DNS domain name? (e.g. 'bar.com') [my.domain] <b>example.com</b>
  DNS nameserver? (IP address or 'none') [68.87.77.130 68.87.72.130
68.87.75.194] <b><i>Enter</i></b>
  Use the nameserver now? [yes] <b><i>Enter</i></b>
  Default route? (IP address, 'dhcp' or 'none') [dhcp]
<b><i>Enter</i></b>
  Edit hosts with ed? [no] <b><i>Enter</i></b>
  Do you want to do any manual network configuration? [no]
<b><i>Enter</i></b>
</pre></td></tr></table>

<p>
<b>NOTA: </b>Apenas <b>uma</b> interface pode ser facilmente configurada
usando DHCP durante a instala&ccedil;&atilde;o. Se voc&ecirc; tentar
configurar mais de uma interface usando DHCP voc&ecirc; ir&aacute;
encontrar erros. Voc&ecirc; deve configurar interfaces adicionais
manualmente ap&oacute;s a instala&ccedil;&atilde;o.

<p>
Agora, informamos a senha para a conta de root:
<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
Password for root account? (will not echo) <b><i>pAssWOrd</i></b>
Password for root account? (again) <b><i>pAssWOrd</i></b>
</pre></td></tr></table>
<p>
Use uma senha segura para a conta de root. Voc&ecirc; ir&aacute; criar
outras contas de usu&aacute;rio ap&oacute;s o boot do sistema. De acordo
com
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=1">passwd(1)</a>:
<pre>
    The new password should be at least six characters long and not
purely
    alphabetic.  Its total length must be less than _PASSWORD_LEN
(currently
    128 characters).  A mixture of both lower and uppercase letters,
numbers,
    and meta-characters is encouraged.
</pre>

<a name="InstMedia"></a>
<h3>4.5.5 - Escolhendo a m&iacute;dia de instala&ccedil;&atilde;o</h3>

<p>
Depois que a rede &eacute; configurada, o script de
instala&ccedil;&atilde;o ir&aacute; dar a voc&ecirc; uma chance de
efetuar ajustes manuais &agrave; configura&ccedil;&atilde;o.

<p>
Depois, voc&ecirc; ter&aacute; a chance de escolher sua m&iacute;dia de
instala&ccedil;&atilde;o. As op&ccedil;&otilde;es s&atilde;o listadas
abaixo.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Let's install the sets!
  Location of sets? (cd disk ftp http or 'done') [cd]
<b><i>Enter</i></b>
  Available CD-ROMs are: cd0.
</pre></td></tr></table>

<p>
Neste exemplo estamos instalando a partir do CD-ROM. Isto ir&aacute;
trazer uma lista dos dispositivos identificados como CD-ROM em seu
computador. A maioria das pessoas ir&aacute; ter apenas um. Se
voc&ecirc; precisar, certifique-se de escolher o dispositivo pelo qual
voc&ecirc; ir&aacute; instalar o OpenBSD.

<p>
<b>NOTA: </b>Nem todas as plataformas suportam todas as
op&ccedil;&otilde;es de instala&ccedil;&atilde;o.
Neste caso, a plataforma OpenBSD/i386 n&atilde;o suporta
instala&ccedil;&otilde;es via NFS, portanto ela n&atilde;o &eacute;
mostrada na lista.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available CD-ROMs are: cd0.
  Which one contains the install media? (or 'done') [cd0]
<b><i>Enter</i></b>
  Pathname to the sets?  (or 'done') [4.4/i386] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Aqui, voc&ecirc; &eacute; questionado sobre o diret&oacute;rio no qual
se encontram os arquivos de instala&ccedil;&atilde;o, que &eacute;
<tt>4.4/i386/</tt> no conjunto oficial de CDs ou em um CD feito a partir
de <tt>install44.iso</tt>.

<a name="Filesets"></a>
<h3>4.5.6 - Escolhendo pacotes de arquivos</h3>

<p>
Agora &eacute; hora de escolher quais pacotes de arquivos voc&ecirc;
ir&aacute; instalar. Voc&ecirc; pode ver uma descri&ccedil;&atilde;o
desses arquivos na <a href="#FilesNeeded">pr&oacute;xima
se&ccedil;&atilde;o</a>. Os arquivos encontrados pelo programa de
instala&ccedil;&atilde;o ser&atilde;o mostrados na tela. Seu trabalho
&eacute; apenas especificar quais arquivos voc&ecirc; deseja. Por
padr&atilde;o todos os pacotes de arquivo n&atilde;o-X s&atilde;o
selecionados; no entanto, alguns usu&aacute;rios avan&ccedil;ados podem
querer limitar esses pacotes apenas para os m&iacute;nimos
necess&aacute;rio para rodar o OpenBSD, que seriam <tt>base44.tgz</tt>,
<tt>etc44.tgz</tt> e <tt>bsd</tt>.
A maioria das pessoas ir&aacute; querer instalar os pacotes de arquivos
padr&atilde;o ou todos os pacotes de arquivos. O exemplo abaixo &eacute;
de uma instala&ccedil;&atilde;o completa.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Select sets by entering a set name, a file name pattern or 'all'.
De-select
  sets by prepending a '-' to the set name, file name pattern or 'all'.
Selected
  sets are labeled '[x]'.

          [X] bsd
          [X] bsd.rd
          [ ] bsd.mp
          [X] base44.tgz
          [X] etc44.tgz
          [X] misc44.tgz
          [X] comp44.tgz
          [X] man44.tgz
          [X] game44.tgz
          [ ] xbase44.tgz
          [ ] xetc44.tgz
          [ ] xshare44.tgz
          [ ] xfont44.tgz
          [ ] xserv44.tgz
  Set name? (or 'done') [bsd.mp] <b>all</b>

          [X] bsd
          [X] bsd.rd
          [X] bsd.mp
          [X] base44.tgz
          [X] etc44.tgz
          [X] misc44.tgz
          [X] comp44.tgz
          [X] man44.tgz
          [X] game44.tgz
          [X] xbase44.tgz
          [X] xetc44.tgz
          [X] xshare44.tgz
          [X] xfont44.tgz
          [X] xserv44.tgz
</pre></td></tr></table>

<p>
Voc&ecirc; pode fazer todo tipo de coisa legal aqui -- "<tt>-x*</tt>"
iria remover todos os componentes do X, se voc&ecirc; mudasse de
id&eacute;ia. Neste caso, iremos instalar todos os pacotes. Muito embora
o sistema v&aacute; funcionar com menos pacotes, tanto o conjunto
padr&atilde;o como instalar todos os pacotes &eacute; recomendado. Mais
detalhes sobre a sele&ccedil;&atilde;o de pacotes <a
href="#FilesNeeded">aqui</a>.

<p>
Uma vez que voc&ecirc; tenha selecionado com sucesso quais pacotes
voc&ecirc; deseja, voc&ecirc; ser&aacute; questionado sobre a
confirma&ccedil;&atilde;o da extra&ccedil;&atilde;o desses pacotes e
eles ser&atilde;o ent&atilde;o instalados. Uma barra de progresso
ser&aacute; mostrada para mant&ecirc;-lo informado sobre quanto tempo
ir&aacute; demorar. O tempo varia enormemente dependendo de qual sistema
voc&ecirc; est&aacute; instalando o OpenBSD, os pacotes de arquivos
instalados, e a velocidade da m&iacute;dia de origem. Esta parte pode
demorar desde alguns minutos at&eacute; diversas horas.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Set name? (or 'done') [done] <b><i>Enter</i></b>
  Ready to install sets? [yes] <b><i>Enter</i></b>
  Getting bsd ...
  100% |**************************************************|  6700 KB   
00:03    
  Getting bsd.rd ...
  100% |**************************************************|  5404 KB   
00:01    
  Getting bsd.mp ...
  100% |**************************************************|  6750 KB   
00:02    
  Getting base44.tgz ...
  100% |**************************************************| 42904 KB   
00:27    
  Getting etc44.tgz ...
  100% |**************************************************|   631 KB   
00:00    
  Getting misc44.tgz ...
  100% |**************************************************|  2866 KB   
00:02    
  Getting comp44.tgz ...
  100% |**************************************************| 78575 KB   
00:43    
  Getting man44.tgz ...
  100% |**************************************************|  7552 KB   
00:07    
  Getting game44.tgz ...
  100% |**************************************************|  2552 KB   
00:01    
  Getting xbase44.tgz ...
  100% |**************************************************|  9486 KB   
00:05    
  Getting xetc44.tgz ...
  100% |**************************************************| 75434      
00:00    
  Getting xshare44.tgz ...
  100% |**************************************************|  2672 KB   
00:05    
  Getting xfont44.tgz ...
  100% |**************************************************| 34747 KB   
00:16    
  Getting xserv44.tgz ...
  100% |**************************************************| 19816 KB   
00:10    
  Location of sets? (cd disk ftp http or 'done') [done]
<b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Neste ponto, voc&ecirc; pode baixar pacotes de arquivos adicionais de
outras fontes (incluindo <a href="#site">pacotes de arquivos
customizados</a>) se desejado, ou apertar '<tt>done</tt>' se voc&ecirc;
instalou todos os pacotes de arquivos de que precisa.

<a name="Finish"></a>
<h3>4.5.7 - Terminando</h3>

Agora, algumas perguntas sobre a configura&ccedil;&atilde;o do sistema
que voc&ecirc; acaba de instalar.
A primeira &eacute; se o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8">sshd(8)</a>
deve ser iniciado durante o boot.
Geralmente voc&ecirc; vai querer que o sshd(8) esteja operando, mas
ocasionalmente voc&ecirc; pode n&atilde;o querer. Se sua
aplica&ccedil;&atilde;o n&atilde;o necessita do sshd(8), h&aacute; uma
pequena vantagem te&oacute;rica de seguran&ccedil;a em n&atilde;o
t&ecirc;-lo rodando.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Start sshd(8) by default? [yes] <b>y</b>
</pre></td></tr></table> 

<p>
(Se voc&ecirc; mudar de id&eacute;ia depois, altere o <a
href="../faq10.html"
><tt>/etc/rc.conf.local</tt></a> ou <tt>/etc/rc.conf</tt>.)

<p>
Voc&ecirc; ter&aacute; a op&ccedil;&atilde;o de iniciar o
<a href="../faq6.html#OpenNTPD">OpenNTPD</a>
durante o boot.
O OpenNTPD &eacute; uma forma, de baixo impacto, de manter o
rel&oacute;gio do seu computador sincronizado de maneira precisa, e a
configura&ccedil;&atilde;o padr&atilde;o &eacute; suficiente para o uso
da maioria das pessoas.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Start ntpd(8) by default? [no] <b>yes</b>
  NTP server? (hostname or 'default') [default] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Se voc&ecirc; tem um servidor de hora local, voc&ecirc; pode
especific&aacute;-lo aqui, e se voc&ecirc; escolher "default", o
OpenNTPD ir&aacute; usar <tt>pool.ntp.org</tt>, uma grande
cole&ccedil;&atilde;o de servidores de hora de livre acesso.
(Se voc&ecirc; mudar de id&eacute;ia depois, altere <a
href="../faq10.html"><tt>/etc/rc.conf.local</tt></a> e/ou
<tt>/etc/ntpd.conf</tt>.)

<p>
Em algumas plataformas, voc&ecirc; ser&aacute; questionado se planeja
rodar o X neste sistema. Se voc&ecirc; responder 'Y',
<tt>/etc/sysctl.conf</tt> ser&aacute; modificado para incluir a linha
<tt>machdep.allowaperture=1</tt> ou <tt>machdep.allowaperture=2</tt>,
dependendo da sua plataforma.
Algumas plataformas sequer ir&atilde;o fazer essa pergunta.
Se voc&ecirc; n&atilde;o planeja rodar o X neste sistema ou n&atilde;o
tem certeza, responda 'N' aqui, j&aacute; que voc&ecirc; pode mudar isso
facilmente alterando <tt>/etc/sysctl.conf</tt> se precisar, depois.
H&aacute; uma vantagem potencial em deixar o driver aperture
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&amp;sektion=4">xf86(4)</a>
desabilitado, j&aacute; que a engine gr&aacute;fica em uma placa de
v&iacute;deo moderna poderia potencialmente ser usada para alterar
mem&oacute;ria al&eacute;m do controle do processador.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you expect to run the X Window System? [no] <b>y</b>
</pre></td></tr></table>

<p>
Agora, voc&ecirc; &eacute; questionado se deseja usar uma
<a href="../faq7.html#SerCons">console serial</a> neste computador,
ao inv&eacute;s do padr&atilde;o teclado e monitor.
Se voc&ecirc; escolher "<tt>yes</tt>" e responder algumas outras
perguntas simples,
<tt><a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8">/etc/boot.conf</a></tt>
e 
<tt><a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ttys&amp;sektion=5">/etc/ttys</a></tt>
ser&atilde;o editados apropriadamente para voc&ecirc;.
A maioria dos usu&aacute;rios ir&aacute; usar o padr&atilde;o,
<b><tt>no</tt></b> aqui.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Change the default console to com0? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Sua &uacute;ltima tarefa &eacute; informar o fuso hor&aacute;rio.
Dependendo de onde esteja sua m&aacute;quina, pode haver
m&uacute;ltiplas respostas igualmente v&aacute;lidas para essa pergunta.
No exemplo a seguir, n&oacute;s usamos <tt>US/Eastern</tt>, mas
tamb&eacute;m poder&iacute;amos ter usado <tt>EST5EDT</tt> ou
<tt>US/Michigan</tt> e ter o mesmo resultado. Apertando <tt>?</tt> nos
prompts ir&aacute; gui&aacute;-lo atrav&eacute;s das
op&ccedil;&otilde;es.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Saving configuration files......done.
  Generating initial host.random file ......done.
  What timezone are you in? ('?' for list) [Canada/Mountain] <b>?</b>
  Africa/      Chile/       GB-Eire      Israel       NZ-CHAT      UCT
  America/     Cuba         GMT          Jamaica      Navajo       US/
  Antarctica/  EET          GMT+0        Japan        PRC          UTC
  Arctic/      EST          GMT-0        Kwajalein    PST8PDT     
Universal
  Asia/        EST5EDT      GMT0         Libya        Pacific/     W-SU
  Atlantic/    Egypt        Greenwich    MET          Poland       WET
  Australia/   Eire         HST          MST          Portugal     Zulu
  Brazil/      Etc/         Hongkong     MST7MDT      ROC         
posix/
  CET          Europe/      Iceland      Mexico/      ROK         
posixrules
  CST6CDT      Factory      Indian/      Mideast/     Singapore   
right/
  Canada/      GB           Iran         NZ           Turkey      
zone.tab
  What timezone are you in? ('?' for list) [Canada/Mountain] <b>US</b>
  What sub-timezone of 'US' are you in? ('?' for list) <b>?</b>
  Alaska          Central         Hawaii          Mountain        Samoa
  Aleutian        East-Indiana    Indiana-Starke  Pacific
  Arizona         Eastern         Michigan        Pacific-New
  Select a sub-timezone of 'US' ('?' for list): <b>Eastern</b>
  Setting local timezone to 'US/Eastern'...done.
</pre></td></tr></table>

<p>
Se voc&ecirc; est&aacute; preocupado com a precis&atilde;o do
rel&oacute;gio, voc&ecirc; pode querer ler
<a href="../faq8.html#NTPerror">isto</a>.

<p>
Os &uacute;ltimos passos s&atilde;o para o sistema criar o
diret&oacute;rio <tt>/dev</tt> (o que pode demorar um pouco em alguns
sistemas, especialmente se voc&ecirc; tiver pouca mem&oacute;ria RAM), e
instalar os boot blocks.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Making all device nodes...done.
  Installing boot block...
  boot: /mnt/boot
  proto: /usr/mdec/biosboot
  device: /dev/rwd0c
  /usr/mdec/biosboot: entry point 0
  proto bootblock size 512
  /mnt/boot is 3 blocks x 16384 bytes
  fs block shift 2; part offset 3148740; inode block 24, offset 1832
  using MBR partition 1: type 166 (0xa6) offset 3148740 (0x300bc4)
  done.

  CONGRATULATIONS! Your OpenBSD install has been successfully completed!
  To boot the new system, enter halt at the command prompt. Once the
  system has halted, reset the machine and boot from the disk.
  # <b>halt</b>
  syncing disks... done

  The operating system has halted.
  Please press any key to reboot.
</pre></td></tr></table>

<p>
O OpenBSD est&aacute; instalado no seu sistema e pronto para seu
primeiro boot, mas antes disso...

<p>

<h4>Antes de reiniciar</h4>
Neste ponto, seu sistema est&aacute; instalado e pronto para ser
reiniciado e configurado para um servi&ccedil;o. Antes de faz&ecirc;-lo,
no entanto, seria inteligente chegar a <a
href="../../errata.html">p&aacute;gina de Errata</a> para ver se
h&aacute; quaisquer bugs que iriam impact&aacute;-lo de imediato.

<p>
Um truque que voc&ecirc; pode usar para alguma
configura&ccedil;&atilde;o "antes do primeiro boot" &eacute; executar:
<pre>
    # <b>/mnt/usr/sbin/chroot /mnt</b>
</pre>
no prompt do shell.
Isto ir&aacute; ajustar seus pontos de montagem para estarem da forma
que ficar&atilde;o ap&oacute;s reiniciar em seu sistema
rec&eacute;m-instalado.
Voc&ecirc; pode agora fazer alguma configura&ccedil;&atilde;o
b&aacute;sica, como adicionar usu&aacute;rios, alterar pontos de
montagem, etc.

<h4>Ap&oacute;s reiniciar</h4>

<p>
Uma das primeiras coisas a ler ap&oacute;s instalar seu sistema &eacute;
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8">afterboot(8)</a>.

<p>
Voc&ecirc; tamb&eacute;m pode achar &uacute;teis os links a seguir:
<ul>
<li><a href="../faq10.html#AddDelUser">Adicionando usu&aacute;rios no
OpenBSD</a>
<li><a href="../faq6.html#Setup">Configura&ccedil;&atilde;o Inicial de
Rede</a>
<li><a href="faq2.html#ManPages">Man Pages de comandos
populares/&uacute;teis</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi">Man pages do
OpenBSD na Web</a
<li><a href="../faq15.html">O sistema de Packages e Ports do OpenBSD
para instala&ccedil;&atilde;o de software</a> 
</ul>

<h4>Uma &uacute;ltima coisa...</h4>
Os desenvolvedores do OpenBSD pedem que voc&ecirc;
<a href="#SendDmesg">Envie uma c&oacute;pia do seu dmesg</a>. Isto
&eacute; realmente apreciado pelos desenvolvedores, e em &uacute;ltima
inst&acirc;ncia, todos os usu&aacute;rios.

<p>
<a name= "FilesNeeded"></a>
<h2>4.6 - Que arquivos s&atilde;o necess&aacute;rios para a
instala&ccedil;&atilde;o?</h2>
<!-- XXXrelease -->

<p>
A instala&ccedil;&atilde;o completa do OpenBSD &eacute; dividida em um
n&uacute;mero de <i>pacotes de arquivos</i> separados. Nem toda
aplica&ccedil;&atilde;o requer todos os pacotes de arquivos. Aqui
est&aacute; uma vis&atilde;o geral de cada um deles:
<p>
<ul>
  <li><b><i>bsd</i></b>          - Este &eacute; o Kernel.
<b>Necess&aacute;rio</b>
  <li><b><i>bsd.mp</i></b> - Kernel multi-processador (SMP) (apenas em
algumas plataformas)
  <li><b><i>bsd.rd</i></b> - <a href="#bsd.rd">Kernel em RAM disk</a>
  <li><b><i>base44.tgz</i></b>   - Cont&eacute;m o sistema b&aacute;sico
do OpenBSD <b>Necess&aacute;rio</b>
  <li><b><i>etc44.tgz</i></b>    - Cont&eacute;m todos os arquivos do
/etc <b>Necess&aacute;rio</b>
  <li><b><i>comp44.tgz</i></b>    - Cont&eacute;m o compilador e suas
ferramentas, cabe&ccedil;alhos e bibliotecas. <b>Recomendado</b>
  <li><b><i>man44.tgz</i></b>    - Cont&eacute;m as man pages
<b>Recomendado</b>
  <li><b><i>misc44.tgz</i></b>   - Cont&eacute;m
informa&ccedil;&atilde;o miscel&acirc;nea, documenta&ccedil;&atilde;o de
instala&ccedil;&atilde;o
  <li><b><i>game44.tgz</i></b>   - Cont&eacute;m os jogos do OpenBSD
  <li><b><i>xbase44.tgz</i></b>  - Cont&eacute;m os arquivos
b&aacute;sicos do X11
  <li><b><i>xetc44.tgz</i></b>   - Cont&eacute;m os arquivos de
configura&ccedil;&atilde;o para /etc/X11 e /etc/fonts
  <li><b><i>xfont44.tgz</i></b>  - Cont&eacute;m o servidor de fontes e
as fontes do X11
  <li><b><i>xserv44.tgz</i></b>  - Cont&eacute;m os servidores X do X11
  <li><b><i>xshare44.tgz</i></b> - Cont&eacute;m manpages,
configura&ccedil;&otilde;es locais, includes, etc. para o X
</ul>

Os pacotes <b>etc44.tgz</b> e <b>xetc44.tgz</b> n&atilde;o s&atilde;o
instalados como parte de um upgrade, apenas como parte de uma
instala&ccedil;&atilde;o completa, para que quaisquer
customiza&ccedil;&otilde;es feitas por voc&ecirc; n&atilde;o se percam.
Voc&ecirc; ter&aacute; que atualizar os diret&oacute;rios <tt>/etc</tt>,
<tt>/dev</tt> e <tt>/var</tt> manualmente.

<p>
Mesmo que voc&ecirc; n&atilde;o tenha inten&ccedil;&atilde;o de rodar o
X, alguns <a href="../faq15.html">pacotes</a> de terceiros requerem que
as bibliotecas gr&aacute;ficas de <b>xbase44.tgz</b> estejam instaladas
em seu sistema.
Essas depend&ecirc;ncias podem, geralmente, ser satisfeitas simplesmente
instalando <b>xbase44.tgz</b>, o restante do X n&atilde;o &eacute;
necess&aacute;rio.


<p>
<a name="Partitioning"></a>
<a name= "SpaceNeeded"></a>  <!-- XXXobsolete tag -->
<h2> 4.7 - De quanto espa&ccedil;o eu preciso para instalar o
OpenBSD?</h2>
<!-- XXXrelease -->

<p>
Obviamente, a resposta para essa pergunta varia tremendamente baseada em
seu uso do sistema.
No entanto, estes n&uacute;meros podem ser usados como ponto de
<i>partida</i>:

<blockquote><pre>
(root)             60MB
/usr               500MB (sem X) ou 660MB (com X)
/var               25MB
/tmp               50MB
swap               32MB
</pre></blockquote>

Estes s&atilde;o os tamanhos m&iacute;nimos sugeridos para sistemas de
arquivos para uma instala&ccedil;&atilde;o completa.
Os n&uacute;meros incluem espa&ccedil;o extra suficiente para permitir
que voc&ecirc; rode um sistema t&iacute;pico conectado &agrave;
Internet, mas n&atilde;o muito mais que isso.

<p>
Tenha os seguintes fatos em mente, no entanto:
<ul>
<li>Esses s&atilde;o valores m&iacute;nimos.
Espa&ccedil;o em disco &eacute; um tanto quanto barato nestes tempos, e
tentar espremer seu sistema no menor espa&ccedil;o poss&iacute;vel
&eacute; raramente um esfor&ccedil;o v&aacute;lido. Para
aplica&ccedil;&otilde;es de prop&oacute;sito especial, os n&uacute;meros
acima podem ser diminu&iacute;dos, mas voc&ecirc; ter&aacute; que
experimentar.
<li>Esses n&uacute;meros N&Atilde;O incluem a &aacute;rvore de ports.
<li>Se voc&ecirc; planeja instalar um n&uacute;mero significativo de
aplica&ccedil;&otilde;es de terceiros, fa&ccedil;a a sua
parti&ccedil;&atilde;o <tt>/usr</tt> muito maior.
Qu&atilde;o maior ir&aacute; depender das suas aplica&ccedil;&otilde;es,
evidentemente.
<li>Para um sistema que gerencia muito email ou p&aacute;ginas web
(guardados, respectivamente, em <tt>/var/mail</tt> e <tt>/var/www</tt>)
voc&ecirc; ir&aacute; querer fazer sua parti&ccedil;&atilde;o
<tt>/var</tt> significativamente maior, ou coloc&aacute;-los em uma
parti&ccedil;&atilde;o separada.
<li>Para um sistema multi-usu&aacute;rio que pode gerar muitos logs,
voc&ecirc; ir&aacute; querer fazer sua parti&ccedil;&atilde;o
<tt>/var</tt> ainda maior, ou criar uma parti&ccedil;&atilde;o separada
para os logs (<tt>/var/log</tt>).
<li>Se voc&ecirc; planeja <a href="faq5.html">recompilar o kernel e o
sistema a partir dos fontes</a>, voc&ecirc; ir&aacute; querer fazer a
parti&ccedil;&atilde;o <tt>/usr</tt> significativamente maior, 4G
n&atilde;o &eacute; um tamanho ruim.
<li>Compilar alguns <a href="../faq15.html#Ports">ports</a> a partir dos
fontes pode ocupar grandes quantidades de espa&ccedil;o em suas
parti&ccedil;&otilde;es <tt>/usr</tt> e <tt>/tmp</tt>. Esta &eacute;
outra raz&atilde;o pela qual sugerimos a utiliza&ccedil;&atilde;o de <a
href="../faq15.html#PkgMgmt">pacotes pr&eacute;-compilados</a>.
<li>A parti&ccedil;&atilde;o <tt>/tmp</tt> &eacute; usada durante a
compila&ccedil;&atilde;o de ports, dentre outras coisas, ent&atilde;o
seu tamanho depende do que voc&ecirc; ir&aacute; fazer com ela. 50M
podem ser suficientes para a maioria das pessoas, mas algumas
aplica&ccedil;&otilde;es maiores podem requerer 100M ou mais de
espa&ccedil;o no <tt>/tmp</tt>.
<li>A parti&ccedil;&atilde;o 'b' de seu drive root automaticamente se
torna a parti&ccedil;&atilde;o swap de seu sistema.
Muitas pessoas seguem uma antiga regra de que sua parti&ccedil;&atilde;o
swap deve ter o dobro do tamanho da mem&oacute;ria RAM do sistema.
Esta regra n&atilde;o faz sentido.
Em um sistema moderno, isso &eacute; um MONTE de swap, e a maioria das
pessoas prefere que seu sistema nunca utilize a swap.
Voc&ecirc; ir&aacute; querer que seu sistema nunca fique sem
espa&ccedil;o de RAM+swap, mas &eacute; geralmente melhor ter RAM
suficiente no sistema para n&atilde;o ser necess&aacute;rio usar a swap.
Se voc&ecirc; est&aacute; usando um dispositivo flash como disco,
voc&ecirc; provavelmente n&atilde;o ir&aacute; sequer querer uma
parti&ccedil;&atilde;o swap.
Use o que for mais apropriado para suas necessidades.
Se voc&ecirc; errar, voc&ecirc; pode adicionar outra
parti&ccedil;&atilde;o swap em <i>/etc/fstab</i> ou
<a href="../faq14.html#SwapFile">fazer swap para um arquivo</a> depois.
<li>Espa&ccedil;o de swap e do <tt>/var</tt> s&atilde;o usados para
guardar core dumps do sistema caso ocorra um
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=crash&amp;sektion=8">crash(8)</a>.
Se isto &eacute; um fator importante para voc&ecirc;, seu espa&ccedil;o
de swap deve ser ligeiramente maior que o tamanho da mem&oacute;ria
total que voc&ecirc; pode ter no sistema.
Ap&oacute;s reiniciar, o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=savecore&amp;sektion=8">savecore(8)</a>
ir&aacute; tentar salvar o conte&uacute;do da parti&ccedil;&atilde;o
swap em um arquivo em <tt>/var/crash</tt> ent&atilde;o, novamente, se
isto &eacute; uma prioridade para voc&ecirc;, sua parti&ccedil;&atilde;o
<tt>/var</tt> deve ter <i>espa&ccedil;o livre</i> suficiente para
guardar estes arquivos de dump.
Seja realista -- poucos desenvolvedores ir&atilde;o querer ver seu
arquivo dump de 1GB, ent&atilde;o se voc&ecirc; n&atilde;o planeja
investigar um crash localmente, isto provavelmente n&atilde;o &eacute;
uma preocupa&ccedil;&atilde;o.
<li>Alguns editores usam <tt>/var/tmp</tt> como espa&ccedil;o
tempor&aacute;rio de armazenamento, e este frequentemente deve ser
t&atilde;o grande quanto ou maior que o maior arquivo que voc&ecirc;
editar.
Se voc&ecirc; planeja editar arquivos de 500M, suas
parti&ccedil;&otilde;es <tt>/var</tt> ou <tt>/var/tmp</tt>
dever&atilde;o ser muito maiores do que o que voc&ecirc; pode ter
planejado inicialmente.
</ul>

<p>
H&aacute; muitas raz&otilde;es para utilizar sistemas de arquivos
separados, ao inv&eacute;s de colocar tudo junto em um ou dois sistemas
de arquivos:

<ul>
<li><b>Seguran&ccedil;a</b>: Voc&ecirc; pode marcar alguns sistemas de
arquivos como 'nosuid', 'nodev', 'noexec', 'readonly', etc. Isto
&eacute; feito pelo processo de instala&ccedil;&atilde;o, se voc&ecirc;
utilizar as parti&ccedil;&otilde;es descritas acima.
<li><b>Estabilidade</b>: Um usu&aacute;rio, ou um programa mal
configurado, pode encher um sistema de arquivos com lixo se tiver
permiss&atilde;o para tal. Suas aplica&ccedil;&otilde;es
cr&iacute;ticas, que evidentemente est&atilde;o rodando em outro sistema
de arquivos, n&atilde;o s&atilde;o interrompidas.
<li><b>Velocidade</b>: Um sistema de arquivos com alta frequ&ecirc;ncia
de escrita pode ficar um tanto quanto fragmentado. (Felizmente, o
sistema de arquivos ffs usado pelo OpenBSD n&atilde;o &eacute;
suscet&iacute;vel a grande fragmenta&ccedil;&atilde;o)
<li><b>Integridade</b>: Se um sistema de arquivos &eacute; corrompido
por alguma raz&atilde;o, seus outros sistemas de arquivos ainda
est&atilde;o OK.
<li><b>Tamanho</b>: Muitas m&aacute;quinas imp&otilde;e limites na
&aacute;rea do disco a partir da qual a ROM de boot pode carregar o
kernel. Em alguns casos, esse limite pode ser muito pequeno (504M para
um 486 antigo), e em outros casos, muito maior (por exemplo, 2G, 8G, ou
128G em sistemas i386).
Como o kernel pode ficar em qualquer &aacute;rea dentro da
parti&ccedil;&atilde;o root, toda a parti&ccedil;&atilde;o root deve
estar contida nessa &aacute;rea. Para mais detalhes, veja <a
href="../faq14.html#LargeDrive">esta se&ccedil;&atilde;o</a>. Uma boa
id&eacute;ia &eacute; manter toda a sua parti&ccedil;&atilde;o / dentro
de 2G, a n&atilde;o ser que voc&ecirc; saiba que sua plataforma (ou
m&aacute;quina em particular) pode trabalhar com mais (ou menos) que
isso.
</ul>

<p>
Algumas id&eacute;ias adicionais sobre particionamento:
<ul>
 <li>Para sua primeira tentativa em um sistema experimental, uma
&uacute;nica parti&ccedil;&atilde;o <tt>/</tt> grande e outra de swap
pode ser o mais f&aacute;cil a fazer at&eacute; que voc&ecirc; saiba
quanto espa&ccedil;o &eacute; necess&aacute;rio. Fazendo isso,
voc&ecirc; estar&aacute; sacrificando algumas das funcionalidades
padr&atilde;o de seguran&ccedil;a do OpenBSD que requerem sistemas de
arquivos separados para <tt>/, /tmp, /var, /usr</tt> e <tt>/home</tt>.
Contudo, voc&ecirc; provavelmente n&atilde;o utilizar&aacute; em
produ&ccedil;&atilde;o sua primeira instala&ccedil;&atilde;o do OpenBSD.
 <li>Um sistema exposto &agrave; Internet ou outras for&ccedil;as hostis
deve ter uma parti&ccedil;&atilde;o <tt>/var</tt> (e talvez at&eacute;
mesmo <tt>/var/log</tt>) separada para logging.
 <li>Uma parti&ccedil;&atilde;o <tt>/home</tt> pode ser legal. Nova
vers&atilde;o do SO? Remova e reinstale todo o restante, mantendo sua
parti&ccedil;&atilde;o <tt>/home</tt> intocada. Lembre-se de salvar uma
c&oacute;pia dos seus arquivos de configura&ccedil;&atilde;o!
 <li>Uma parti&ccedil;&atilde;o separada para qualquer coisa que possa
acumular uma grande quantidade de arquivos que podem ter que ser
deletados pode ser mais r&aacute;pida de reformatar e recriar do que de
deletar. Veja o <a href="faq5.html#ProbObjPt">FAQ de
compila&ccedil;&atilde;o a partir dos fontes</a> para um exemplo
(<tt>/usr/obj</tt>).
 <li>Se voc&ecirc; deseja recompilar seu sistema a partir dos fontes por
qualquer raz&atilde;o, os fontes ficar&atilde;o em <tt>/usr/src</tt>. Se
voc&ecirc; n&atilde;o fizer uma parti&ccedil;&atilde;o separada para
<tt>/usr/src</tt>, certifique-se de que <tt>/usr</tt> possui
espa&ccedil;o suficiente.
 <li>Um fato comumente esquecido: voc&ecirc; <b>n&atilde;o</b> tem que
alocar todo o espa&ccedil;o do disco durante a instala&ccedil;&atilde;o
do sistema! J&aacute; que agora &eacute; um desafio comprar um drive
menor que 20G, pode fazer sentido deixar uma parte do drive desalocada.
Se voc&ecirc; encher uma parti&ccedil;&atilde;o, voc&ecirc; pode alocar
uma nova parti&ccedil;&atilde;o no espa&ccedil;o n&atilde;o utilizado,
<a href="../faq10.html#DupFS">duplicar</a> sua parti&ccedil;&atilde;o
existente para a nova parti&ccedil;&atilde;o, alterar
   <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab</a>
   para apontar para a nova parti&ccedil;&atilde;o, remontar, e agora
voc&ecirc; j&aacute; tem mais espa&ccedil;o.
 <li>Se voc&ecirc; fizer suas parti&ccedil;&otilde;es com tamanho muito
pr&oacute;ximo do m&iacute;nimo recomendado, voc&ecirc; provavelmente
ir&aacute; se arrepender depois, quando for hora de atualizar o sistema.
 <li>Se voc&ecirc; fizer parti&ccedil;&otilde;es muito grandes, tenha em
mente que efetuar checagens de disco usando o
   <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">fsck(8)</a>
requer cerca de 1M de RAM por gigabyte de tamanho do sistema de
arquivos, e pode ser muito demorado ou at&eacute; mesmo invi&aacute;vel
em sistemas mais antigos e lentos (por favor veja tamb&eacute;m <a
href="../faq14.html#LargeDrive">esta se&ccedil;&atilde;o</a>).
 <li>Se voc&ecirc; permitir que os usu&aacute;rios escrevam em
<tt>/var/www</tt> (i.e., p&aacute;ginas web pessoais), voc&ecirc; pode
querer coloc&aacute;-lo em uma parti&ccedil;&atilde;o separada, para que
voc&ecirc; posso utilizar <a href="../faq10.html#Quotas">quotas</a> para
restringir o espa&ccedil;o usado por cada usu&aacute;rio, e se a
parti&ccedil;&atilde;o ficar cheia, nenhuma outra parte do sistema
ser&aacute; impactada.
 <li>Voc&ecirc; pode tamb&eacute;m querer criar uma
parti&ccedil;&atilde;o <tt>/altroot</tt>, como descrito em
   <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=daily&amp;sektion=8">daily(8)</a>.
Isto pode fazer uma c&oacute;pia di&aacute;ria de sua
parti&ccedil;&atilde;o <tt>/</tt>, entregando-lhe uma c&oacute;pia extra
do kernel e dos arquivos de configura&ccedil;&atilde;o do <tt>/etc</tt>
caso algo aconte&ccedil;a com sua parti&ccedil;&atilde;o root.
Obviamente, a parti&ccedil;&atilde;o <tt>/altroot</tt> deve ser pelo
menos t&atilde;o grande quanto <tt>/</tt>.
Se voc&ecirc; tiver um segundo drive de disco e algo duplicando o
restante de seu disco, como <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&amp;sektion=4">raid(4)</a>
por software ou uma c&oacute;pia peri&oacute;dica usando <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a
>/<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>,
este disco pode ser boot&aacute;vel ap&oacute;s a remo&ccedil;&atilde;o
do disco prim&aacute;rio.
</ul>


<p>
<a name= "Multibooting"></a>
<h2>4.8 - Boot m&uacute;ltiplo com o OpenBSD/i386</h2>

Boot m&uacute;ltiplo &eacute; ter diversos sistemas operacionais em um
computador, e alguma maneira de selecionar qual SO bootar.
<i>N&atilde;o</i> &eacute; uma tarefa trivial! Se voc&ecirc; n&atilde;o
entender o que est&aacute; fazendo, voc&ecirc; pode terminar deletando
grandes quantidades de dados do seu computador. Usu&aacute;rios novatos
do OpenBSD s&atilde;o <i>fortemente</i> encorajados a come&ccedil;ar com
um drive de disco livre em uma m&aacute;quina dedicada, e ent&atilde;o
praticar a configura&ccedil;&atilde;o desejada em um sistema que
n&atilde;o seja de produ&ccedil;&atilde;o antes de tentar uma
configura&ccedil;&atilde;o multiboot em uma m&aacute;quina de
produ&ccedil;&atilde;o. O <a href="../faq14.html">FAQ 14</a> tem mais
informa&ccedil;&otilde;es sobre o processo de boot do OpenBSD.

<p>
Apenas uma das quatro parti&ccedil;&otilde;es <i>prim&aacute;rias</i> da
MBR pode ser usada para bootar o OpenBSD (i.e., parti&ccedil;&otilde;es
estendidas n&atilde;o ir&atilde;o funcionar).

<p>
Aqui est&atilde;o v&aacute;rias op&ccedil;&otilde;es para multibooting:

<h3>Configurando parti&ccedil;&otilde;es ativas</h3>
Esta &eacute; provavelmente a menos notada, e no entanto, algumas vezes
a melhor solu&ccedil;&atilde;o para multibooting. Simplesmente configure
a parti&ccedil;&atilde;o ativa em qualquer SO que voc&ecirc; esteja
usando no momento para ser a que voc&ecirc; deseja bootar por
padr&atilde;o no pr&oacute;ximo boot. Virtualmente qualquer SO oferece
um programa para fazer isso; o do OpenBSD &eacute; o <a
href="../faq14.html#fdisk">fdisk(8)</a>, h&aacute; programas com nomes
similares no Windows 9x e DOS, e em muitos outros sistemas operacionais.
Isto pode ser muito desej&aacute;vel para SOs ou sistemas que levam
muito tempo para desligar e reiniciar -- voc&ecirc; pode fazer a
configura&ccedil;&atilde;o e iniciar o processo de reboot, ent&atilde;o
sair e pegar uma x&iacute;cara de caf&eacute;, e voltar ao sistema que
voc&ecirc; desejava j&aacute; iniciado -- sem ter que esperar pelo
Momento M&aacute;gico para selecionar o pr&oacute;ximo SO.

<h3>Disquete de boot</h3>
Se voc&ecirc; tem um sistema que &eacute; usado para bootar o OpenBSD
com pouca frequ&ecirc;ncia (ou n&atilde;o quer que outros
usu&aacute;rios do computador notem que algo tenha mudado), considere
utilizar um disquete de boot. Simplesmente use um dos <a
href="#MkFlop">disquetes de instala&ccedil;&atilde;o do OpenBSD</a>, e
crie um arquivo <tt>/etc/boot.conf</tt> (sim, voc&ecirc; tamb&eacute;m
ter&aacute; que criar um diret&oacute;rio <tt>/etc</tt> no disquete) com
o seguinte conte&uacute;do:

<pre>
     boot hd0a:/bsd
</pre>

para fazer o sistema bootar a partir do drive de disco 0,
parti&ccedil;&atilde;o OpenBSD 'a', arquivo de kernel <tt>/bsd</tt>.
Note que voc&ecirc; tamb&eacute;m pode bootar a partir de outros drives
com uma linha como: "<tt>boot hd2a:/bsd</tt>" para efetuar boot a partir
do terceiro drive de disco do seu sistema. Para bootar o OpenBSD, insira
o disquete, reinicie. Para bootar o outro SO, retire o disquete,
reinicie. 

<p>
Neste caso, o programa
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>
&eacute; carregado a partir do disquete, busca e l&ecirc; o arquivo
<tt>/etc/boot.conf</tt>. A linha "<tt>boot hd0a:/bsd</tt>" instrui
boot(8) sobre a partir de onde carregar o kernel -- neste caso, o
primeiro HD visto pela BIOS. Tenha em mente que apenas um pequeno
arquivo (<tt>/boot</tt>) &eacute; carregado do disquete -- o sistema
carrega todo o kernel a partir do disco, ent&atilde;o isso adiciona
apenas cerca de cinco segundos ao tempo do processo de boot.

<h3>Windows NT/2000/XP NTLDR</h3>

Para multiboot entre o OpenBSD e Windows NT/2000/XP, voc&ecirc; pode
usar o NTLDR, o carregador de boot utilizado pelo NT. Para multiboot com
o NT, voc&ecirc; precisa de uma c&oacute;pia do Partition Boot Record
(PBR) do OpenBSD. Ap&oacute;s rodar installboot, voc&ecirc; pode
copi&aacute;-lo para um arquivo usando
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd(1)</a>,
seguindo um processo similar a:

<pre>
	# <strong>dd if=/dev/rsd0a of=openbsd.pbr bs=512 count=1</strong>
</pre>

Nota: este &eacute; realmente um bom momento para lembr&aacute;-lo que
digitar cegamente comandos que voc&ecirc; n&atilde;o entende &eacute;
uma p&eacute;ssima id&eacute;ia.
Esta linha n&atilde;o ir&aacute; funcionar diretamente na maioria dos
computadores.
&Eacute; deixado ao leitor o exerc&iacute;cio de adapt&aacute;-la para
sua m&aacute;quina.

<p>
Agora d&ecirc; boot no NT e coloque <tt>openbsd.pbr</tt> no C:. Adicione
uma linha como esta ao final do arquivo <tt>C:\BOOT.INI</tt>:

<pre>
	c:\openbsd.pbr="OpenBSD"
</pre>

<p>
Quando voc&ecirc; reiniciar, voc&ecirc; deve conseguir selecionar o
OpenBSD no menu do carregador NT. H&aacute; muito mais
informa&ccedil;&atilde;o sobre o NTLDR no <a
href="http://www.tburke.net/info/ntldr/ntldr_hacking_guide.htm">NTLDR
Hacking Guide.</a>

<p>
No Windows XP voc&ecirc; tamb&eacute;m pode editar a
informa&ccedil;&atilde;o de boot usando a GUI; veja o <a
href="http://support.microsoft.com/default.aspx?scid=kb;en-us;289022">XP
Boot.ini HOWTO</a>.

<p>
Programas que fazem boa parte disso para voc&ecirc; est&atilde;o
dispon&iacute;veis, por exemplo, o <a
href="http://www.winimage.com/bootpart.htm">BootPart</a>.
Este programa pode ser executado a partir do Windows NT/2000/XP, e
ir&aacute; carregar a PBR do OpenBSD, coloc&aacute;-la em sua
parti&ccedil;&atilde;o NT/2000/XP, e adicion&aacute;-la ao
<tt>C:\BOOT.INI</tt>

<p>
Nota: O carregador de boot do Windows NT/2000/XP &eacute; capaz apenas
de bootar SOs do drive de disco prim&aacute;rio.
Voc&ecirc; n&atilde;o pode us&aacute;-lo para carregar o OpenBSD a
partir do drive secund&aacute;rio de um sistema.

<p>
<h3>Outros gerenciadores de boot</h3>

<p>
Alguns outros gerenciadores de boot usados com sucesso pelos
usu&aacute;rios do OpenBSD incluem o <a
href="http://gag.sourceforge.net/">GAG</a>, OS-BS, <a
href="http://www.ranish.com/part/">The Ranish Partition Manager</a> e <a
href="http://www.gnu.org/software/grub/">GRUB</a>. 

<p>
<h3>OpenBSD e Linux (i386)</h3>
<!-- XXXversion -->

<p>
Por favor veja
<a
href="ftp://ftp.openbsd.org/pub/OpenBSD/4.4/i386/INSTALL.linux">INSTALL.linux</a>,
que d&aacute; instru&ccedil;&otilde;es detalhadas para fazer o OpenBSD
funcionar com o Linux.

<h3>Problemas com fuso hor&aacute;rio</h3>
O OpenBSD espera que o rel&oacute;gio em tempo real do computador esteja
configurado para UTC (Universal Coordinated Time).
Alguns outros SOs esperam que o rel&oacute;gio em tempo real esteja
configurado para a hora local. Obviamente, isto pode ser um problema se
voc&ecirc; est&aacute; usando ambos os SOs no mesmo computador.
Um ou outro ter&aacute; que ser adaptado. H&aacute; mais
informa&ccedil;&otilde;es sobre como fazer isso no <a
href="../faq8.html#TimeZone">FAQ 8 - Por que meu rel&oacute;gio
est&aacute; defasado em v&aacute;rias horas?</a>

<a name= "SendDmesg"></a>
<h2>4.9 - Enviando seu dmesg para dmesg@openbsd.org ap&oacute;s a
instala&ccedil;&atilde;o</h2>

<p>
Apenas para relembrar as pessoas, &eacute; importante para os
desenvolvedores do OpenBSD ter informa&ccedil;&otilde;es sobre qual
hardware funciona, e qual hardware n&atilde;o funciona perfeitamente.

<p>
Uma cita&ccedil;&atilde;o a partir de /usr/src/etc/root/root.mail
<blockquote><pre>
If you wish to ensure that OpenBSD runs better on your machines, please
do us
a favor (after you have your mail system configured!) and type something
like:
 # dmesg | mail -s "Sony VAIO 505R laptop, apm works OK"
dmesg@openbsd.org
so that we can see what kinds of configurations people are running.  As
shown,
including a bit of information about your machine in the subject or the
body
can help us even further.  We will use this information to improve
device driver
support in future releases.  (Please do this using the supplied GENERIC
kernel,
not for a custom compiled kernel, unless you're unable to boot the
GENERIC
kernel.  If you have a multi-processor machine, dmesg results of both
GENERIC.MP
and GENERIC kernels are appreciated.)  The device driver information we
get from
this helps us fix existing drivers. Thank you!
</pre></blockquote>

<p>
Certifique-se de que voc&ecirc; envie o email a partir de uma conta que
tamb&eacute;m pode receber email para que os desenvolvedores possam
contat&aacute;-lo se eles tiverem algo que gostariam que voc&ecirc;
testasse ou alterasse para que sua configura&ccedil;&atilde;o funcione.
N&atilde;o &eacute; necess&aacute;rio, de forma alguma, enviar o email a
partir da mesma m&aacute;quina que est&aacute; rodando o OpenBSD,
ent&atilde;o se essa m&aacute;quina n&atilde;o tiver como receber email,
apenas execute

<pre>
$ dmesg | mail your-account@yourmail.dom
</pre>
e ent&atilde;o encaminhe essa mensagem para
<pre>
 dmesg@openbsd.org
</pre>
onde <tt>your-account@yourmail.dom</tt> &eacute; sua conta de email
normal.

<p>
<b>NOTAS</b>

<ul>
<li>Por favor envie apenas mensagens do kernel GENERIC.
Kernels customizados que t&ecirc;m drivers de dispositivo removidos
n&atilde;o s&atilde;o &uacute;teis.
<li>Se voc&ecirc; tem um sistema multiprocessado suportado e normalmente
usa o kernel GENERIC.MP, &eacute; interessante para os desenvolvedores
ver tanto o output do dmesg para o kernel GENERIC e GENERIC.MP,
ent&atilde;o por favor envie ambos em emails separados.
<li>Os dmesgs s&atilde;o recebidos em um computador usando o sistema de
rejei&ccedil;&atilde;o de spam
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd</a>
Isto pode fazer com que seu dmesg n&atilde;o seja aceitado pelos
servidores de email por algum per&iacute;odo de tempo.
Seja paciente, ap&oacute;s cerca de meia hora, ele ir&aacute; passar.
</ul>

<p>
O m&eacute;todo acima &eacute; muito simples, mas mesmo se voc&ecirc;
n&atilde;o escolher configurar email em seu sistema OpenBSD, voc&ecirc;
ainda deve enviar seu dmesg para os desenvolvedores. Salve o output do
dmesg em um arquivo texto.

<pre>
$ dmesg > ~/dmesg.txt
</pre>

Ent&atilde;o transfira esse arquivo (usando
FTP/scp/disquete/pombo-correio/...) para o sistema que voc&ecirc;
normalmente usa para email.
J&aacute; que output do dmesg enviado &eacute; processado
automaticamente, tenha certeza de checar o seguinte ao utilizar
clientes/sistemas de email alternativos:
<ul>
<li>Configure seu cliente de email para enviar mensagens como texto
puro; n&atilde;o use email formatado em HTML.
<li>Desligue qualquer funcionalidade de quebra de linha
autom&aacute;tica. Muitos clientes de email s&atilde;o configurados para
inserir quebras de linha a cada 72 colunas (o padr&atilde;o para listas
de discuss&atilde;o).
<li>Certifique-se de que seu cliente de email n&atilde;o reformata a
mensagem em "fluxo de texto" sem sentido.
<li>N&atilde;o envie o output do dmesg como arquivo em anexo. Coloque o
output do dmesg no corpo da mensagem.
</ul>


<a name="AddFileSet"></a>
<h2>4.10 - Adicionando pacotes de arquivos ap&oacute;s a
instala&ccedil;&atilde;o</h2>
<!-- XXXversion -->
"Oh n&atilde;o! Eu esqueci de adicionar um pacote de arquivos quando fiz
a instala&ccedil;&atilde;o!"
<p>
Algumas vezes, voc&ecirc; percebe que REALMENTE precisava de
<tt>comp44.tgz</tt> (ou qualquer outro componente de sistema) no fim das
contas, mas voc&ecirc; n&atilde;o percebeu isso durante a
instala&ccedil;&atilde;o do sistema. Boas not&iacute;cias: h&aacute;
duas maneiras f&aacute;ceis de adicionar pacotes de arquivos ap&oacute;s
a instala&ccedil;&atilde;o inicial:

<h3>Usando o processo de upgrade</h3>
Simplesmente d&ecirc; boot em sua m&iacute;dia de
instala&ccedil;&atilde;o (CD-ROM ou Disquete), e escolha Upgrade (ao
inv&eacute;s de Install). Quando voc&ecirc; chegar &agrave; lista de
pacotes de arquivos a instalar, escolha os pacotes que voc&ecirc;
esqueceu de instalar da primeira vez, selecione a fonte, e deixe-a
instal&aacute;-los para voc&ecirc;.

<h3>Usando tar(1)</h3>
Os pacotes de arquivos de instala&ccedil;&atilde;o s&atilde;o
simplesmente arquivos tar compactados, e voc&ecirc; pode expandi-los
manualmente a partir da raiz do sistema de arquivos:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # cd /
  # tar xzvphf comp44.tgz
</pre></td></tr></table>

<p>
N&Atilde;O esque&ccedil;a a op&ccedil;&atilde;o <tt>'p'</tt> no comando
acima para recuperar as permiss&otilde;es de arquivos corretamente!
<p>
Um erro comum &eacute; pensar que voc&ecirc; pode usar o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>
para adicionar pacotes de arquivos faltantes. Isso n&atilde;o funciona.
pkg_add(1) &eacute; a <a href="../faq15.html#PkgMgmt">ferramenta de
gerenciamento de pacotes</a> para instalar software de terceiros.
Ele gerencia arquivos de pacotes, n&atilde;o arquivos tar
gen&eacute;ricos como os pacotes de arquivos de
instala&ccedil;&atilde;o.

<p>
Se voc&ecirc; est&aacute; instalando o pacote de arquivos <tt>xbase</tt>
em seu sistema pela primeira vez usando tar(1) e sem reiniciar, a cache
de bibliotecas compartilhadas deve ser atualizada ap&oacute;s a
instala&ccedil;&atilde;o usando
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldconfig&amp;sektion=8"
>ldconfig(8)</a>.
Para adicionar todas as bibliotecas X &agrave; cache:

<blockquote><pre>
# <b>ldconfig -m /usr/X11R6/lib</b>
</pre></blockquote>

Alternativamente, voc&ecirc; pode apenas reiniciar o sistema, e isso
ser&aacute; feito automaticamente pelo script
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8"
>rc(8)</a>.


<a name="bsd.rd"></a>
<h2>4.11 - O que &eacute; 'bsd.rd'?</h2>

<b><tt>bsd.rd</tt></b> &eacute; um kernel em "RAM Disk". Este arquivo
pode ser muito &uacute;til; muitos desenvolvedores t&ecirc;m o cuidado
de mant&ecirc;-lo sempre na raiz de seu sistema de arquivos.

<p>
Cham&aacute;-lo de um "Kernel em RAM Disk" descreve o sistema de
arquivos raiz do kernel -- ao inv&eacute;s de ser um dispositivo
f&iacute;sico, as ferramentas dispon&iacute;veis ap&oacute;s o boot de
<tt>bsd.rd</tt> s&atilde;o guardadas dentro do kernel, e s&atilde;o
executadas a partir de um sistema de arquivos em RAM. <tt>bsd.rd</tt>
tamb&eacute;m inclui uma boa quantidade de ferramentas para permitir que
voc&ecirc; fa&ccedil;a manuten&ccedil;&atilde;o do sistema e
instala&ccedil;&atilde;o.

<p>
Em algumas plataformas, <tt>bsd.rd</tt> &eacute; na realidade o
m&eacute;todo preferencial de instala&ccedil;&atilde;o -- voc&ecirc;
coloca este kernel em um sistema de arquivos preexistente, o carrega, e
executa a instala&ccedil;&atilde;o a partir dele. Na maioria das
plataformas, se voc&ecirc; tem uma vers&atilde;o antiga do OpenBSD
operando, voc&ecirc; pode baixar via FTP uma nova vers&atilde;o de
<tt>bsd.rd</tt>, reiniciar a partir dele, e instalar uma nova
vers&atilde;o do OpenBSD sem nunca utilizar qualquer tipo de
m&iacute;dia remov&iacute;vel.

<p>
Aqui est&aacute; um exemplo do boot de <tt>bsd.rd</tt> em um sistema
i386:

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Using Drive: 0 Partition: 3
  reading boot.....
  probing: pc0 com0 com1 apm mem[639k 255M a20=on]
  disk: fd0 hd0+
  &gt;&gt; OpenBSD/i386 BOOT 3.02
  boot&gt; <b>boot hd0a:/bsd.rd</b>
<i>. . . normal boot to install . . .</i>
</pre></td></tr></table>

Como indicado, voc&ecirc; ser&aacute; levado ao programa de
instala&ccedil;&atilde;o, mas pode tamb&eacute;m utilizar o shell a
qualquer momento para manuten&ccedil;&atilde;o do sistema.
<p>
A regra geral para boot de <tt>bsd.rd</tt> &eacute; alterar seu kernel
de boot de <tt>/bsd</tt> para <tt>bsd.rd</tt> atrav&eacute;s de qualquer
meio usado em sua plataforma.


<a name="InstProb"></a>
<h2>4.12 - Problemas comuns de instala&ccedil;&atilde;o</h2>

<a name="cpq16m"></a>
<h3>4.12.1 - Meu Compaq reconhece apenas 16M de RAM</h3>
<i>Alguns</i> sistemas Compaq t&ecirc;m um problema em que toda a RAM do
sistema n&atilde;o &eacute; detectada pelo
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">carregador
de boot de segundo est&aacute;gio do OpenBSD</a> corretamente, e apenas
16M podem ser detectados e usados pelo OpenBSD. Isto pode ser corrigido
tanto criando/editando o arquivo
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8&amp;arch=i386"><tt>/etc/boot.conf</tt></a>,
ou digitando comandos no prompt "<tt>boot></tt>" antes do carregamento
do OpenBSD. Se voc&ecirc; tem uma m&aacute;quina com 64M de RAM, mas o
OpenBSD detectou apenas os primeiros 16M, o comando a utilizar seria:

<pre>
     machine mem +0x3000000@0x1000000
</pre>
para adicionar 48M (<tt>0x3000000</tt>) ap&oacute;s os primeiros 16M
(<tt>0x1000000</tt>). Tipicamente, se voc&ecirc; tem uma m&aacute;quina
com este problema, voc&ecirc; primeiro digitaria o comando acima no
prompt <tt>boot></tt> do disquete/CD-ROM de instala&ccedil;&atilde;o,
carregaria o sistema, reiniciaria, e criaria um arquivo
<tt>/etc/boot.conf</tt> contendo a linha acima para que todos os boots
futuros reconhe&ccedil;am toda a RAM dispon&iacute;vel.

<p>
Tamb&eacute;m foi reportado que uma atualiza&ccedil;&atilde;o da ROM
poderia corrigir isso em <i>alguns</i> sistemas.

<a name="noboot"></a>
<h3>4.12.2 - Meu i386 n&atilde;o d&aacute; boot ap&oacute;s a
instala&ccedil;&atilde;o</h3>
Sua instala&ccedil;&atilde;o pareceu funcionar bem, mas no primeiro
boot, voc&ecirc; n&atilde;o v&ecirc; qualquer sinal do OpenBSD tentando
bootar. H&aacute; algumas raz&otilde;es comuns para este problema:

<ul>
<li><b>Nenhuma parti&ccedil;&atilde;o foi marcada como ativa no
fdisk(8).</b> Para corrigir isso, reinicie a m&aacute;quina usando o
disquete ou m&iacute;dia de boot, e "marque" a parti&ccedil;&atilde;o
como "ativa" (boot&aacute;vel). Veja <a
href="../faq14.html#fdisk">aqui</a> e <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">aqui</a>.

<li><b>Nenhum carregador de boot v&aacute;lido foi colocado no
disco.</b> Se voc&ecirc; responder "Y" para a pergunta "Use entire disk
for OpenBSD?" durante a instala&ccedil;&atilde;o, ou usar a
op&ccedil;&atilde;o "<tt>reinit</tt>" do fdisk(8), o boot record do
OpenBSD ser&aacute; instalado no Master Boot Record do disco; caso
contr&aacute;rio, o c&oacute;digo da MBR existente permanece intocado.
Isto ser&aacute; um problema se n&atilde;o existia nenhum outro
c&oacute;digo de boot.
Uma solu&ccedil;&atilde;o &eacute; bootar a m&iacute;dia de
instala&ccedil;&atilde;o novamente, ir ao shell e usar o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
para atualizar o c&oacute;digo da MBR a partir da linha de comando:
<pre>
    # fdisk -u wd0
</pre>
Nota: a op&ccedil;&atilde;o "update" do modo interativo ("-e") do fdisk
n&atilde;o ir&aacute; escrever os bytes de assinatura necess&aacute;rios
para tornar o disco boot&aacute;vel.

<li><b>Em algumas ocasi&otilde;es raras, algo pode dar errado com a
instala&ccedil;&atilde;o do carregador de boot de segundo
est&aacute;gio.</b> A reinstala&ccedil;&atilde;o do carregador de boot
de segundo est&aacute;gio &eacute; discutida <a
href="../faq14.html#InstBoot">aqui</a>.

</ul>

<a name="sshhang"></a>
<h3>4.12.3 - Minha m&aacute;quina (mais antiga, mais lenta) bootou, mas
parou no processo de gera&ccedil;&atilde;o de chaves SSH</h3>
&Eacute; muito prov&aacute;vel que sua m&aacute;quina esteja operando
sem problemas, apenas demorando um pouco para completar o processo de
gera&ccedil;&atilde;o de chaves ssh. Um SPARCStation2 ou Macintosh
Quadra podem demorar <i>v&aacute;rias horas</i> para completar os
tr&ecirc;s passos do
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;sektion=1">ssh-keygen(1)</a>.
Apenas deixe que termine; s&oacute; &eacute; feito uma vez por
instala&ccedil;&atilde;o.

<p>
Note que o tamanho padr&atilde;o de chave foi aumentado no OpenBSD 3.8,
ent&atilde;o os tempos de gera&ccedil;&atilde;o s&atilde;o muito maiores
do que costumavam ser. Usu&aacute;rios de m&aacute;quinas muito lentas
podem querer gerar suas chaves em outro computador, coloc&aacute;-las no
arquivo <a href="#site">site44.tgz</a>, e instal&aacute;-las como parte
do restante dos pacotes de arquivos.


<a name="noftplist"></a>
<h3>4.12.4 - Obtive a mensagem "Failed to change directory" ao executar
a instala&ccedil;&atilde;o</h3>

Ao fazer uma instala&ccedil;&atilde;o via FTP de um <a
href="faq5.html#Flavors">snapshot</a> durante o est&aacute;gio
<i>-beta</i> de desenvolvimento do OpenBSD, voc&ecirc; pode ver isto:

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>

  Display the list of known ftp servers? [no] <b>yes</b>
  Getting the list from 192.128.5.191 (ftp.openbsd.org)... FAILED
  Failed to change directory.
  Server IP address or hostname? 
</pre></td></tr></table>

Este &eacute; o comportamento normal e esperado durante a parte
pr&eacute;-release do ciclo. O programa de instala&ccedil;&atilde;o
busca pela lista FTP no servidor FTP prim&aacute;rio em um
diret&oacute;rio que n&atilde;o estar&aacute; dispon&iacute;vel
at&eacute; a <a href="faq1.html#Next">data de release</a>, ent&atilde;o
voc&ecirc; obt&eacute;m a mensagem acima.

<p>
Simplesmente use a <a href="../../ftp.html">lista de espelhos FTP</a>
para encontrar seu espelho FTP preferido, e informe seu nome manualmente
quando questionado.

<p>
<b>Nota: Voc&ecirc; n&atilde;o deve ver esta mensagem se est&aacute;
instalando <i>-release</i> ou a partir de um CD-ROM.</b>

<a name="blankfdisk"></a>
<h3>4.12.5 - Minha tabela de parti&ccedil;&otilde;es do fdisk
est&aacute; corrompida ou vazia!</h3>
Ocasionalmente, um usu&aacute;rio ir&aacute; obter um sistema que
funciona, mas ao executar <tt>fdisk wd0</tt>, ir&aacute; ver uma tabela
de parti&ccedil;&otilde;es completamente vazia (ou, algumas vezes,
corrompida).
Isto geralmente &eacute; causado por ter sido criada uma
parti&ccedil;&atilde;o com offset de zero setores no
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>,
ao inv&eacute;s do <a href="#trackoffset">offset de uma trilha</a> com
que deveria ter sido criada (nota: isto est&aacute; assumindo as
plataformas <a href="../../i386.html">i386</a> ou <a
href="../../amd64.html">amd64</a>.
Outras plataformas t&ecirc;m requisi&ccedil;&otilde;es diferentes de
offset, algumas n&atilde;o precisam de NENHUM offset).
O sistema ent&atilde;o <a href="../faq14.html#Boot386">efetua boot</a>
usando a PBR, n&atilde;o a MBR.

<p>
Muito embora essa configura&ccedil;&atilde;o possa funcionar, ela pode
ser um problema de manuten&ccedil;&atilde;o e deve ser corrigida.
Para corrigir isso, os sistemas de arquivos do disco geralmente devem
ser recriados do zero (mas se voc&ecirc; REALMENTE souber o que
est&aacute; fazendo, voc&ecirc; pode conseguir recriar apenas o
disklabel e a MBR, e perder e ter que recriar apenas a primeira
parti&ccedil;&atilde;o OpenBSD do disco).

<a name="site"></a>
<h2>4.13 - Customizando o processo de instala&ccedil;&atilde;o</h2>
<!-- XXXversion -->

<h3>Arquivo <tt>siteXX.tgz</tt></h3>
Os scripts de instala&ccedil;&atilde;o/upgrade do OpenBSD permitem a
sele&ccedil;&atilde;o de um pacote de arquivos criado pelo
usu&aacute;rio com nome "<tt>siteXX.tgz</tt>", onde XX &eacute; a
vers&atilde;o de release (p.ex. 44). O pacote de arquivos
<tt>siteXX.tgz</tt> &eacute;, como qualquer outro
<a href="#FilesNeeded">pacote de arquivos</a>, um arquivo
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
compactado com
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&amp;sektion=1">gzip(1)</a>
com raiz no '/' e descompactado como os outros pacotes com as
op&ccedil;&otilde;es <tt>xzphf</tt>. Este pacote ser&aacute; instalado
por &uacute;ltimo, depois de todos os pacotes de arquivos.

<p>
Este pacote de arquivos permite ao usu&aacute;rio adicionar e/ou
sobrescrever os arquivos instalados pelos pacotes 'normais' e com isso
customizar a instala&ccedil;&atilde;o ou upgrade.

<p>
Voc&ecirc; tamb&eacute;m pode criar e usar pacotes de
instala&ccedil;&atilde;o espec&iacute;ficos por hostname, com nomes
<tt>siteXX-<i>&lt;hostname&gt;.tgz</i></tt>, por exemplo,
"<tt>site44-puffy.tgz</tt>".
Isto permite f&aacute;cil instala&ccedil;&atilde;o, upgrade ou
recupera&ccedil;&atilde;o de falha customizada por host.

<p>
Alguns exemplos de uso de um arquivo <tt>siteXX.tgz</tt>:
<ul>
<li>Crie um arquivo siteXX.tgz que contenha todas as
altera&ccedil;&otilde;es de arquivos feitas desde a
instala&ccedil;&atilde;o do OpenBSD. Ent&atilde;o, se voc&ecirc; tiver
que recriar o sistema, simplesmente selecione siteXX.tgz durante a
reinstala&ccedil;&atilde;o e todas as suas modifica&ccedil;&otilde;es
s&atilde;o replicadas no novo sistema.

<li>Crie uma s&eacute;rie de diret&oacute;rios espec&iacute;ficos por
m&aacute;quina, cada qual contendo um pacote siteXX.tgz com arquivos
espec&iacute;ficos para aqueles tipos de m&aacute;quina. A
instala&ccedil;&atilde;o de m&aacute;quinas (p.ex. computadores com
placas de v&iacute;deos diferentes) de uma categoria em particular pode
ser completada selecionando o arquivo siteXX.tgz apropriado.

<li>Coloque os arquivos que voc&ecirc; rotineiramente customiza da mesma
forma ou de maneira similar em um arquivo siteXX.tgz -- arquivos
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8"
><tt>/etc/skel</tt></a>,
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5"
><tt>/etc/pf.conf</tt></a>, 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8"
><tt>/var/www/conf/httpd.conf</tt></a>,
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf.local&amp;sektion=8"
><tt>/etc/rc.conf.local</tt></a>,
etc. 
</ul>

<h3>Scripts <tt>install.site</tt>/<tt>upgrade.site</tt></h3>
Como &uacute;ltimo passo do processo de
instala&ccedil;&atilde;o/upgrade, os scripts buscam no diret&oacute;rio
root do sistema rec&eacute;m instalado/atualizado um script com nome
<tt>install.site</tt> ou <tt>upgrade.site</tt>, de acordo com o processo
atual, e executam esse script em um ambiente com 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=8">chroot</a>
em rela&ccedil;&atilde;o &agrave; raiz do sistema instalado/atualizado.
Lembre-se, a atualiza&ccedil;&atilde;o &eacute; feita em um sistema de
boot, ent&atilde;o seu sistema de arquivos alvo est&aacute;, na
realidade, montado no <tt>/mnt</tt>.
No entanto, por causa do chroot, seu script pode ser escrito como se
estivesse rodando na raiz "normal" do seu sistema de arquivos. J&aacute;
que esse script &eacute; executado ap&oacute;s a
instala&ccedil;&atilde;o de todos os arquivos, voc&ecirc; tem
funcionalidade quase completa do sistema (em modo monousu&aacute;rio, no
entanto) ao rodar o script.

<p>
Note que o script <tt>install.site</tt> teria que ser colocado dentro do
<tt>arquivo siteXX.tgz</tt>, e o script <tt>upgrade.site</tt> teria que
ser colocado no diret&oacute;rio root antes do upgrade, ou poderia
tamb&eacute;m ser colocado em um arquivo <tt>siteXX.tgz</tt>.

<p>
Os scripts podem ser usados para fazer muitas coisas:
<ul>
<li>Remover arquivos que s&atilde;o instalados/atualizados e que
voc&ecirc; n&atilde;o quer no sistema.
<li>Remover/atualizar/instalar <a
href="../faq15.html#PkgMgmt">pacotes</a> que voc&ecirc; deseja no
sistema instalado.
<li>Fazer um <a href="../faq14.html#Backup">backup/arquivamento
imediato</a> do novo sistema antes que voc&ecirc; o exponha ao restante
do mundo.
<li>Usar o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&amp;sektion=8">rdate(8)</a>
para ajustar a hora do sistema.
</ul>

<p>
A combina&ccedil;&atilde;o dos arquivos <tt>siteXX.tgz</tt> e
<tt>install.site/upgrade.site</tt> tem como inten&ccedil;&atilde;o dar
aos usu&aacute;rios grande capacidade de customiza&ccedil;&atilde;o sem
exigir que eles tenham que construir seus pr&oacute;prios pacotes de
instala&ccedil;&atilde;o customizados.

<p>
Nota: se voc&ecirc; est&aacute; fazendo sua instala&ccedil;&atilde;o
atrav&eacute;s de um servidor http, voc&ecirc; ter&aacute; que adicionar
seus arquivos <tt>site*.tgz</tt> ao arquivo <tt>index.txt</tt> no
diret&oacute;rio fonte para que eles sejam listados como
op&ccedil;&atilde;o durante a instala&ccedil;&atilde;o.
Isto n&atilde;o &eacute; necess&aacute;rio para FTP ou outros tipos de
instala&ccedil;&atilde;o.


<a name="Multiple"></a>
<h2>4.14 - Como posso instalar v&aacute;rios sistemas similares?</h2>
Aqui est&atilde;o algumas ferramentas que voc&ecirc; pode usar quando
tiver que instalar um n&uacute;mero de sistemas OpenBSD similares.

<h3>Arquivos <tt>siteXX.tgz</tt> e <tt>install/upgrade.site</tt></h3>
Veja o artigo <a href="#site">acima</a>.

<h3>Recuperar com dump(8)</h3>
Na maioria das plataformas, a m&iacute;dia de boot inclui o programa
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>,
que pode ser usado para recuperar um backup feito pelo
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a>.
Assim, voc&ecirc; poderia efetuar boot a partir de
<a href="#MkFlop">disquete</a>, 
<a href="../../orders.html">CD</a>, ou o arquivo
<a href="#bsd.rd">bsd.rd</a>, e ent&atilde;o usar o
<a href="../faq14.html#fdisk">fdisk</a>,
<a href="../faq14.html#disklabel">disklabel</a>, e usar o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore</a>
para recuperar a configura&ccedil;&atilde;o desejada por fita ou outro
tipo de m&iacute;dia, e instalar os <a
href="../faq14.html#InstBoot">boot blocks</a>. Mais detalhes <a
href="../faq14.html#Backup">aqui</a>.

<h3>Imagem de disco</h3>
Infelizmente, n&atilde;o h&aacute; nenhum pacote conhecido para gerar
imagens de disco que interopere com o FFS e fa&ccedil;a uma imagem
contendo apenas o espa&ccedil;o de arquivos ativo. A maioria das
solu&ccedil;&otilde;es de imagem de disco ir&atilde;o tratar o OpenBSD
como uma parti&ccedil;&atilde;o "gen&eacute;rica", e podem fazer uma
imagem de todo o disco. Isto geralmente cumpre seu objetivo, mas
normalmente com muito espa&ccedil;o desperdi&ccedil;ado -- uma
parti&ccedil;&atilde;o <tt>/home</tt> de 10G, vazia, ir&aacute; requerer
10G de espa&ccedil;o na imagem, mesmo se n&atilde;o houver nenhum
arquivo dentro dela. Muito embora voc&ecirc; possa instalar uma imagem
de disco em um drive maior, voc&ecirc; n&atilde;o pode usar o
espa&ccedil;o extra diretamente, e voc&ecirc; n&atilde;o poder&aacute;
instalar a imagem em um drive menor.

<p>
Se esta &eacute; uma situa&ccedil;&atilde;o aceit&aacute;vel, voc&ecirc;
pode achar o comando
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd</a>
suficiente para fazer o que voc&ecirc; precisa, permitindo que
voc&ecirc; copie um disco para outro, setor por setor. Isto teria a
mesmo funcionalidade que programas comerciais, sem o custo.

<a name="getdmesg"></a>
<h2>4.15 - Como posso obter a sa&iacute;da do dmesg(8) para reportar um
problema de instala&ccedil;&atilde;o?</h2>
Ao <a href="../../report.html">reportar um problema</a>, &eacute;
cr&iacute;tico incluir o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>
completo do sistema.
Contudo, muitas vezes quando voc&ecirc; precisa fazer isto, &eacute;
porque o sistema est&aacute; funcionando incorretamente ou n&atilde;o
instala, ent&atilde;o voc&ecirc; pode n&atilde;o ter o disco, rede, ou
outros recursos de que voc&ecirc; precisa para obter o dmesg e enviar
para a
<a href="../../mail.html">lista de emails</a> apropriada. H&aacute;
outras maneiras, no entanto:

<ul>
<li><b>Disquete:</b> O disquete e CD-ROM de boot t&ecirc;m ferramentas
suficientes para permitir que voc&ecirc; grave o seu dmesg para um
disquete MSDOS para leitura em outra m&aacute;quina. Insira um disquete
formatado para MSDOS em seu drive e execute os comandos a seguir:

<pre>
     mount -t msdos /dev/fd0a /mnt
     dmesg >/mnt/dmesg.txt
     umount /mnt
</pre>
Se voc&ecirc; possui outro sistema OpenBSD, voc&ecirc; tamb&eacute;m
pode escrever em um disquete compat&iacute;vel com o OpenBSD --
frequentemente, o disquete de boot tem espa&ccedil;o suficiente para
guardar o dmesg. Neste caso, n&atilde;o digite o "<tt>-t msdos</tt>"
acima.

<p>
<li><b>Console Serial:</b>
Usar uma console serial para capturar o output de outro computador
&eacute; frequentemente a melhor maneira para capturar
informa&ccedil;&atilde;o de diagn&oacute;stico - particularmente se o
computador entra em pane (panic) imediatamente ap&oacute;s o boot.
Assim como um segundo computador, voc&ecirc; ir&aacute; precisar de um
cabo serial apropriado (normalmente um cabo null-modem), e um programa
de emula&ccedil;&atilde;o de terminal que consiga capturar a tela para
um arquivo.

<p>
Informa&ccedil;&otilde;es gerais sobre como configurar uma console
serial s&atilde;o dadas
<a href="../faq7.html#SerCon">em outro lugar do FAQ</a>;
para capturar um log da instala&ccedil;&atilde;o, os comandos a seguir
geralmente s&atilde;o suficientes.

<p><b>i386</b>

<p>
No prompt do carregador de boot, digite

<p>
<blockquote>
<pre>
boot> <b>set tty com0</b>
</pre>
</blockquote>

<p>
Isto ir&aacute; informar o OpenBSD para usar a primeira porta serial
(frequentemente chamada COM1 ou COMA na documenta&ccedil;&atilde;o para
PCs) como uma console serial. O baud rate padr&atilde;o &eacute; 9600.

<p><b>Sparc/Sparc64</b>

<p>
Estas m&aacute;quinas ir&atilde;o automaticamente utilizar uma console
serial se iniciadas sem um teclado.
Se voc&ecirc; tiver um teclado e monitor conectados, voc&ecirc; ainda
pode for&ccedil;ar o sistema a usar uma console serial com os seguintes
comandos no prompt <tt>ok</tt>.

<p>
<blockquote>
<pre>
ok <b>setenv input-device ttya</b>
ok <b>setenv output-device ttya</b>
ok <b>reset</b>
</pre>
</blockquote>

<p>
<li><b>FTP:</b> Sob algumas circunst&acirc;ncias, e desde que voc&ecirc;
primeiro configure a rede corretamente, voc&ecirc; pode conseguir usar o
cliente 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a>
do disquete ou CD-ROM de boot para enviar o dmesg para um servidor FTP
local, de onde voc&ecirc; pode obt&ecirc;-lo depois.
</ul>
<p>

<font color= "#0000e0">
<a href= "index.html">[&Iacute;ndice do FAQ]</a>
<a href= "faq3.html">[Para a Se&ccedil;&atilde;o 3 - Come&ccedil;ando no
OpenBSD]</a>
<a href= "faq5.html">[Para a Se&ccedil;&atilde;o 5 - Compilando o
Sistema a partir dos Fontes]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src=
"../../images/back.gif" border= "0" alt= "[back]"></a> 
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq4.html, v 1.271 ]<br>
$Translation: faq4.html,v 1.13 2009/02/19 01:14:46 dsantos Exp $<br>
-->
$OpenBSD: faq4.html,v 1.8 2009/02/22 20:35:21 tobias Exp $
</small>
</body>
</html>
