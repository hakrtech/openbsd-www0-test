<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>4 - Guia de instalação do OpenBSD 4.7</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2010 by OpenBSD.">
</head>

<!-- Passes validator.w3.org.  Please keep it this way -->

<body bgcolor= "#ffffff" text= "#000000">

<a href="../../pt/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif"
border="0">
</a>
<p>

<font color= "#0000e0">
<a href="index.html">[Índice da FAQ]</a>
<a href="faq3.html">[Seção 3 - Primeiros passos com o OpenBSD]</a>
<a href="faq5.html">[Seção 5 - Construção do Sistema a partir do Código Fonte]</a>
</font>

<h1><font color="#e00000">4 - Guia de Instalação do OpenBSD 4.7</font></h1>
<hr>

<p>
<h3>Conteúdo</h3>
<ul>
<li><a href="#Overview"		>4.1 - Visão geral do processo de
    instalação do OpenBSD</a>
<li><a href="#Checklist"	>4.2 - Lista de verificações antes da
    instalação</a>
<li><a href="#MkInsMedia"	>4.3 - Como criar uma mídia
    inicializável de instalação do OpenBSD</a>
    <ul>
    <li><a href="#MkCD-ROM"		>4.3.1 - Criação do CD de
	inicialização</a>
    <li><a href="#UnixFlop"		>4.3.2 - Criação de disquetes no
        Unix</a>
    <li><a href="#DosFlop"		>4.3.3 - Criação de disquetes no
        Windows</a>
    </ul>
<li><a href="#Boot"		>4.4 - Inicialização da mídia de
    instalação do OpenBSD</a>
<li><a href="#Install"		>4.5 - Instalação simples</a>
  <ul>
  <li><a href="#InstStart"    >4.5.1 - Início da instalação</a>
  <li><a href="#InstQuestions">4.5.2 - As perguntas da instalação</a>
  <li><a href="#InstDisks"    >4.5.3 - Configuração dos discos</a>
  <li><a href="#InstMedia"    >4.5.4 - Escolha da mídia de
      instalação e dos pacotes de arquivos</a>
  <li><a href="#Inst1stBoot"  >4.5.5 - Primeira inicialização!</a>
  <li><a href="#InstFinish"   >4.5.6 - Uma última coisa...</a>
  </ul>

<li><a href="#More"         >4.6 - Detalhes de uma instalação mais
    complexa</a>
  <ul>
  <li><a href="#MoreNetwork"  >4.6.1 - Configuração da rede</a>
  <li><a href="#MoreTimeZone" >4.6.2 - Configuração do fuso horário</a>
  <li><a href="#Morefdisk"    >4.6.3 - Layout fdisk(8) personalizado</a>
  <li><a href="#Moredisklabel">4.6.4 - Layout disklabel personalizado</a>
  </ul>
<li><a href="#FilesNeeded"	>4.7 - Quais arquivos são necessários
    para a instalação?</a>
<li><a href="#Partitioning"	>4.8 - De que forma eu devo particionar
    meu disco?</a>
<li><a href="#Multibooting"	>4.9 - Inicialização múltipla com
    OpenBSD</a>
<li><a href="#SendDmesg"	>4.10 - Como enviar o seu dmesg para
    dmesg@openbsd.org após a instalação</a>

<li><a href="#AddFileSet"	>4.11 - Como adicionar um pacote de
    arquivos após a instalação</a>
<li><a href="#bsd.rd"		>4.12 - O que é 'bsd.rd'?</a>
<li><a href="#InstProb"		>4.13 - Problemas comuns de instalação</a>
  <ul>
  <li><a href="#cpq16m"			>4.13.1 - Meu Compaq só
      reconhece 16M de RAM</a>
  <li><a href="#noboot"			>4.13.2 - Meu i386 não
      inicializa após a instalação</a>
  <li><a href="#sshhang"		>4.13.3 - Minha máquina
      inicializa, mas para no procedimento ssh-keygen</a>
  <li><a href="#noftplist"		>4.13.4 - Eu recebi a mensagem
      "Failed to change directory" enquanto fazia a instalação</a>
  <li><a href="#blankfdisk"		>4.13.5 - Minha tabela de
      partições do fdisk está corrompida ou vazia!</a>
  <li><a href="#noflopcd"               >4.13.6 - Eu não tenho um drive
      de disquete ou CD-ROM na minha máquina</a>
  </ul>

<li><a href="#site"		>4.14 - Personalização do processo de
    instalação</a>
<li><a href="#Multiple"		>4.15 - Como eu instalo em vários
    sistemas similares?</a>
<li><a href="#getdmesg"		>4.16 - Como eu obtenho o dmesg(8) para
    relatar um problema de instalação?</a>
</ul>
<hr>

<p>
<a name= "Overview"></a>
<h2>4.1 - Visão geral do processo de instalação do OpenBSD</h2>

<p>
O OpenBSD há muito tempo é respeitado pelo seu processo de instalação
simples e direto, consistente entre todas as plataformas.

<p>
Todas as plataformas utilizam um procedimento de instalação parecido,
no entanto existem alguns pequenos detalhes diferentes em certas
plataformas.
Em todo caso, é aconselhável que você leia o documento INSTALL,
específico da sua plataforma, no diretório <i>plataforma</i> do CD-ROM
ou no sítio FTP (por exemplo, <tt>i386/INSTALL.i386</tt>,
<tt>macppc/INSTALL.macppc</tt> ou <tt>sparc/INSTALL.sparc</tt>).

<p>
O instalador do OpenBSD é um kernel <a href="#bsd.rd">especial</a>
com vários utilitários e scripts de instalação embutidos em um
disco de RAM pré-carregado.
Após esse kernel ser inicializado, o
sistema operacional é extraído de alguns arquivos
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
(<tt>.tgz</tt>) de uma fonte outra que esse disco de RAM pré-carregado.
Existem diversas maneiras de inicializar esse kernel de instalação:

<ul>
<li><b>Disquetes:</b>
O OpenBSD pode ser instalado em várias plataformas através da
inicialização do instalador a partir de um único disquete.
No entanto, devido às restrições de espaço, algumas plataformas maiores
(sparc64, amd64, alpha) não possuem alguns utilitários que podem ser
importantes para você, como um cliente DHCP para configurar a rede.
Para essas plataformas pode ser melhor utilizar um CD de instalação.
No entanto, em plataformas como i386 e sparc, você vai constatar
que o disquete de instalação é bem completo.

<p>
Imagens de disquetes são disponibilizadas para a criação de disquetes de
instalação em outro sistema <a href="#UnixFlop">compatível com Unix</a>,
ou em um sistema <a href="#DosFlop">Windows</a>.
Os nomes dos arquivos são tipicamente <tt>floppy47.fs</tt>, embora
diversas plataformas possuam múltiplas imagens de disquete disponíveis.

<li><b>CD-ROM:</b>
Em diversas plataformas uma imagem de CD-ROM
(<tt>cd47.iso</tt> apenas para inicializar, ou <tt>install47.iso</tt>
para a instalação completa) é disponibilizada para a criação de um
CD-ROM inicializável.

<li><b>Partição existente:</b>
O <a href="#bsd.rd">disco de RAM</a> do kernel pode ser utilizado para a
inicialização a partir de uma partição já existente do OpenBSD, para uma
atualização de versão ou reinstalação.

<li><b>Rede:</b> Algumas plataformas suportam inicialização pela rede
(por exemplo, usando <a href="faq6.html#PXE">PXE</a> ou outro
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&amp;sektion=8">
método de inicialização pela rede</a>).

<li><b>Escrever uma imagem do sistema de arquivos para o disco
(miniroot):</b> uma imagem do sistema de arquivos pode ser escrita em
uma partição existente e então ser inicializada.

<li><b>Fita inicializável:</b> Algumas plataformas suportam
inicialização a partir de fitas.
Essas fitas podem ser criadas seguindo as instruções do arquivo
INSTALL.<i>plataforma</i>.

</ul>

Nem todas as <a href="../../pt/plat.html">plataformas</a> suportam todos
os métodos de inicialização:

<ul>
<li><a href="../../alpha.html"><b>alpha:</b></a> Disquete, CD-ROM, rede,
escrever uma imagem de disquete no disco.

<li><a href="../../amd64.html"><b>amd64:</b></a> Disquete, CD-ROM,
<a href="faq6.html#PXE">rede</a>.

<li><a href="../../armish.html"><b>armish:</b></a>
Varia por máquina.

<li><a href="../../hp300.html"><b>hp300:</b></a> CD-ROM, rede.

<li><a href="../../hppa.html"><b>hppa:</b></a> Rede.

<li><a href="../../i386.html"><b>i386:</b></a> Disquete, CD-ROM,
<a href="faq6.html#PXE">rede</a>.

<li><a href="../../landisk.html"><b>landisk:</b></a> miniroot, instalar
utilizando outro computador.

<li><a href="../../macppc.html"><b>macppc:</b></a> CD-ROM, rede.

<li><a href="../../mvme68k.html"><b>mvme68k:</b></a> Rede, fita
inicializável.

<li><a href="../../mvme88k.html"><b>mvme88k:</b></a> Rede, fita
inicializável.

<li><a href="../../sparc.html"><b>sparc:</b></a> Disquete, CD-ROM, rede,
escrever uma imagem em uma partição swap existente, fita inicializável.

<li><a href="../../sparc64.html"><b>sparc64:</b></a> Disquete
(somente U1/U2), CD-ROM, rede, escrever uma imagem em uma partição
existente.

<li><a href="../../vax.html"><b>vax:</b></a> Disquete, Rede.

<li><a href="../../zaurus.html"><b>zaurus:</b></a> Inicializar bsd.rd
a partir de uma partição Linux. Veja detalhes em
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.7/zaurus/INSTALL.zaurus">INSTALL.zaurus</a>.

</ul>

Todas as plataformas podem usar um <a href="#bsd.rd">bsd.rd</a> para
reinstalar ou fazer uma atualização de versão.

<p>
Uma vez que o kernel estiver carregado, você possui diversas opções para
obter os <a href="#FilesNeeded">pacotes de arquivos de instalação</a>.
Lembre-se que nem todas as plataformas suportam todas as opções.

<ul>
<li><b>CD-ROM:</b>
Nós preferimos que você use o
<a href="../../orders.html">conjunto de CD-ROMs oficiais</a>, mas você
também pode usar o arquivo <tt>install46.iso</tt> ou também pode fazer
o seu próprio CD-ROM.

<li><b>FTP:</b>
Qualquer <a href="../../ftp.html">espelho FTP</a>
do OpenBSD ou seu próprio servidor FTP local com os pacotes de arquivos.

<li><b>HTTP:</b>
Qualquer <a href="../../ftp.html#http">espelho HTTP</a>
do OpenBSD ou seu próprio servidor HTTP local com os pacotes de
arquivos.

<li><b>Partição local:</b>
Em muitos casos você pode instalar os pacotes de arquivos a partir de
outra partição do seu próprio disco rígido local.
Por exemplo, na plataforma <a href="../../i386.html">i386</a> você pode
instalar a partir de uma partição FAT ou de um CD-ROM formatado em
ISO9660, Rock Ridge ou Joliet.
Em alguns casos você terá que montar manualmente o sistema de arquivos
antes de utilizá-lo.

<li><b>NFS:</b>
Algumas plataformas suportam o uso de pontos de montagem NFS para
armazenar os pacotes de arquivos.

<li><b>Fita:</b>
Os pacotes de arquivos também podem ser lidos pelo sistema a partir de
uma fita suportada. Detalhes sobre a criação da fita estão no documento
<tt>INSTALL.</tt><i>plataforma</i>.
</ul>

<a name="Checklist"></a>
<h2>4.2 - Lista de verificações antes da instalação</h2>

<p>
Antes de você começar a instalação, você deve ter uma ideia do que
precisa para terminá-la.

Você deve conhecer pelo menos os seguintes itens:
<ul>
<li>Nome da máquina
  <li>Hardware instalado e disponível
  <ul>
  <li>Verifique a compatibilidade do seu hardware na página de
      compatibilidades
  <li>Se for ISA, você também precisa saber as configurações do
      hardware e confirmá-las quando o OpenBSD requerir.
  </ul>
<li>Método de instalação a ser usado (CD-ROM, FTP, etc.)
<li>Foi encontrado um erro sério, como o sistema será corrigido?
  <ul>
  <li>Se feito localmente, você necessitará ter
      <a href="#Partitioning">espaço suficiente</a> disponível para a
      árvore de código fonte e para construí-la.
  <li>Se não, você precisará ter acesso a outra máquina para construir
      uma nova <a href="faq5.html#Release">release</a> corrigida.
  </ul>
<li>Layout desejado do disco
  <ul>
  <li>Existe a necessidade de os dados serem armazenados em outro local?
  <li>O OpenBSD deverá coexistir com outro SO neste sistema?
      Se sim, como ambos serão inicializados?
      Você precisará instalar um "gerenciador de inicialização"?
  <li>O disco inteiro será utilizado pelo OpenBSD, ou deseja manter uma
      partição/SO existente (ou espaço para uso futuro)?
  <li>Como você deseja subparticionar a parte do OpenBSD no seu disco?
  </ul>
<li>Configurações de rede se você não usa DHCP:
  <ul>
  <li>Nome de domínio
  <li>Endereço(s) do(s) Servidor(es) de Nomes (DNS)
  <li>Endereço IP e máscara de sub-rede para cada placa de rede
  <li>Endereço do roteador (gateway)
  </ul>
<li>Você pretende usar o sistema X Window?
</ul>


<a name="MkInsMedia"></a>
<h2>4.3 - Como criar uma mídia inicializável de instalação do OpenBSD</h2>

<p>
Como exemplo, nós vamos ver as imagens de instalação disponíveis para
as plataformas
<a href="../../i386.html">i386</a> e
<a href="../../sparc.html">sparc</a>.

<p>
A plataforma <a href="../../i386.html">i386</a> possui seis imagens de
disco, separadas para a instalação, que podem ser escolhidas:

<ul>
<li><b><tt>cd47.iso</tt></b> é uma imagem ISO9660 que pode ser usada
    para criar um CD inicializável na maioria dos softwares de criação
    de CD-ROMs, na maioria das plataformas.
    Essa imagem é a que contém a maior seleção de drivers de
    dispositivos, e é usualmente a escolha mais recomendada se o seu
    hardware pode inicializar a partir do CD-ROM.
<li><b><tt>cdemu47.iso</tt></b> é uma imagem ISO9660 que usa emulação
    de um disquete de 2.88M para a inicialização. Espera-se que poucos
    usuários necessitem dessa imagem -- a maioria deve usar a
    <tt>cd47.iso</tt>; use a <tt>cdemu47.iso</tt> somente se a
    <tt>cd47.iso</tt> não funcionar.
<li><b><tt>install47.iso</tt></b> é uma imagem ISO9660 que contém todos
    os arquivos da instalação padrão.
    Esse arquivo pode ser usado para criar um CD que pode fazer sozinho
    a instalação do OpenBSD.
<li><b><tt>floppy47.fs</tt></b> (PC Desktop) suporta várias placas de
    rede PCI e ISA, oferece suporte a IDE, adaptadores SCSI simples e
    algumas placas PCMCIA. A maioria dos usuários usam essa imagem para
    inicializar a partir de um disquete.
<li><b><tt>floppyB47.fs</tt></b> (Servidores) suporta diversos
    controladores RAID e alguns adaptadores SCSI menos comuns. No
    entanto, o suporte a diversos adaptadores SCSI e muitas placas
    de rede EISA e ISA foi removido.
<li><b><tt>floppyC47.fs</tt></b> (Laptops) suporta diversos
    dispositivos CardBus e PCMCIA encontrados em muitos laptops.
</ul>

<p>
A plataforma <a href="../../sparc.html">sparc</a> possui quatro imagens
de disco, separadas para instalação, que podem ser escolhidas:

<ul>
<li><b><tt>floppy47.fs:</tt></b> Suporte para sistemas com disquete.
<li><b><tt>cd47.iso</tt></b> Uma imagem ISO usada para criar seu próprio
    CD para inicializar sistemas SPARC que possuem CD-ROM.
<li><b><tt>miniroot47.fs</tt></b> Pode ser escrito em uma partição swap
    e inicializado.
<li><b><tt>install47.iso</tt></b> é uma imagem ISO9660 que contém todos
    os arquivos da instalação padrão.
    Esse arquivo pode ser usado para criar um CD que pode fazer sozinho
    a instalação do OpenBSD.
</ul>

Em plataformas modernas a melhor recomendação é utilizar imagens
de inicialização de CD-ROM, já que em algumas plataformas "maiores"
(tais como amd64, sparc64) as imagens de disquete tiveram/têm um
punhado de drivers e utilitários removidos, o que pode fazer da
instalação uma tarefa muito mais difícil.
Plataformas mais antigas, tais como i386 e sparc, ainda são de fácil
instalação por disquete.

<a name="MkCD-ROM"></a>
<h3>4.3.1 - Criação de um CD-ROM</h3>

<p>
Você pode criar um CD-ROM usando o arquivo
<tt>cd47.iso</tt> ou o <tt>install47.iso</tt>.
Os detalhes exatos ficam por conta do leitor, que deve decidir quais
ferramentas usar para a criação do CD.

<p>
No OpenBSD você pode criar um CD a partir de uma imagem ISO usando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cdio&amp;sektion=1">cdio(1)</a>:

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>cdio tao cd47.iso</b>
</pre></td></tr></table>

<p>
A maioria dos gravadores de CD vendidos para os sistemas
Windows e Macintosh vêm com um software que pode queimar imagens ISO
em mídias vazias.
Se o seu não possui um desses softwares, saiba que existem vários
aplicativos gratuitos que podem fazer isso para você.

<p>
Outros sistemas do tipo Unix utilizam aplicativos como o
<a href="http://www.cdrkit.org/">cdrkit</a>.


<a name="MkFlop"></a>
<a name="UnixFlop"></a>
<h3>4.3.2 - Criação de disquetes no Unix</h3>

<p>
Os detalhes exatos e os nomes de dispositivos podem variar de variante
para variante do Unix; utilize o que é apropriado para o seu sistema.

<p>
Para criar um disquete formatado, use o comando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdformat&amp;sektion=1&amp;arch=i386">fdformat(1)</a>
tanto para formatar quanto para verificar blocos defeituosos.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>fdformat /dev/rfd0c</b>
  Format 1440K floppy `/dev/rfd0c'? (y/n): y
  Processing VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV done.
</pre></td></tr></table>

<p>
Se a sua saída for parecida com a do exemplo acima, então o seu
disco está OK. No entanto, se você não vê TODOS os "V"ês, então o disco
provavelmente está com problemas; tente outra vez com um disco novo.

<p>
Para escrever o arquivo de imagem no disco, utilize o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=0">dd(1)</a>.
Um exemplo de uso do <tt>dd(1)</tt>:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>dd if=floppy47.fs of=/dev/rfd0c bs=32k</b>
</pre></td></tr></table>

<p>
Uma vez que a imagem foi escrita, verifique com o comando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cmp&amp;sektion=1">cmp(1)</a>
para ter certeza de que a imagem copiada é igual a original.
Se o disquete for igual à imagem original, você verá somente um outro
prompt.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>cmp /dev/rfd0c floppy47.fs</b>
</pre></td></tr></table>

<a name="DosFlop"></a>
<h3>4.3.3 - Criação de disquetes no Windows</h3>

<p>
Para preparar o disquete no Windows, primeiramente use uma ferramenta
nativa para formatar o disquete, verificando se o disco não contém
setores ruins.

<p>
Para escrever a imagem de instalação no disquete preparado você pode
usar o <tt>ntrw.exe</tt>, que pode ser baixado a partir do diretório
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.7/tools/">tools</a>
em qualquer um dos espelhos FTP.

<p>
Exemplo de uso do <i>ntrw</i>:
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>ntrw floppy47.fs a:</strong>
  3.5", 1.44MB, 512 bytes/sector
  bufsize is 9216
  1474560 bytes written
</pre></td></tr></table>


<a name="Boot"></a>
<h2>4.4 - Inicialização da mídia de instalação do OpenBSD</h2>

<h3>Inicialização em i386/amd64</h3>

Inicializar uma mídia de instalação em plataformas i386 e amd64 não é
nenhuma novidade para muitas pessoas.
Seu sistema tem que ser instruído a inicializar a partir da mídia
que você escolheu utilizar; isso normalmente é feito através de
uma opção de configuração no BIOS.
Se você quer inicializar a partir do CD, o BIOS do seu sistema
deve ser capaz de fazer isso e deve estar configurado para inicializar
a partir do CD.
Alguns BIOS antigos não possuem essa opção, nesse caso você deve
utilizar um disquete para inicializar a imagem de instalação.
Não se preocupe; mesmo que você use o disquete para inicializar, você
ainda pode instalar pelo CD se ele é suportado pelo OpenBSD (ou seja,
praticamente todos os drives IDE).

<p>
Você também pode instalar inicializando o <a href="#bsd.rd">bsd.rd</a>
a partir de uma partição existente do OpenBSD, ou pela rede com o
<a href="faq6.html#PXE">processo de inicialização PXE</a>.

<h3>Inicialização em sparc/sparc64</h3>

<b>NOTA:</b>
Na plataforma <a href="../../sparc64.html">sparc64</a> somente as
máquinas SBus (Ultra 1, Ultra 2) são inicializáveis a partir do
disquete.

<p>
O sistema precisa estar em um prompt ROM monitor, que tipicamente
se parece com "<tt>ok </tt>".
Se você está usando um teclado da Sun, pressione e solte "STOP" enquanto
digita "A".
Se você está usando um console serial, um BREAK deve levar você de
volta ao prompt monitor.

<p>
Utilize o seguinte comando para inicializar a partir do disquete:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot floppy</b>
</pre></td></tr></table>

<p>
Normalmente você pode inicializar a partir do drive de CD-ROM de
um sistema Sun digitando '<tt>boot cdrom</tt>' no prompt de
inicialização:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot cdrom</b>
</pre></td></tr></table>

<a name="Install"></a>
<h2>4.5 - Instalação simples</h2>

O novo instalador do OpenBSD é projetado para instalar e configurar
o OpenBSD em uma configuração padrão útil e com pouca intervenção do
usuário.
De fato, frequentemente você pode simplesmente digitar <i>ENTER</i>
um determinado número de vezes para conseguir uma boa instalação do
OpenBSD, e mover suas mãos para o resto do teclado apenas para
especificar a senha do root.

<p>
O instalador cria um plano de particionamento baseado no tamanho do seu
disco rígido.
Embora este NÃO será um layout perfeito para todas as pessoas, ele
fornece um bom ponto de partida e uma boa estratégia geral para
determinar o que você precisa.

<p>
Nós vamos começar com uma instalação simples, com discussões breves das
opções fornecidas e, utilizando a mágica de links de hipertexto,
permitir que você leia mais sobre os tópicos que lhe interessam e
explore suas opções.

<p>
As notas de instalação para cada plataforma estão nos CDs de instalação
e nos servidores FTP, no arquivo <tt>INSTALL.<i>&lt;plat&gt;</i></tt>,
onde <i>&lt;plat&gt;</i> é a sua
<a href="../../pt/plat.html">plataforma</a>; por exemplo, <tt>i386</tt>.


<a name="InstStart"></a>
<h3>4.5.1 - Início da instalação</h3>
<!-- XXXrelease -->
Qualquer que seja o meio de inicialização, agora é hora de usá-lo.
Durante o processo de inicialização, o kernel e todos os programas
usados para a instalação do OpenBSD são carregados na memória.
Assim que o kernel de instalação estiver inicializado, a mídia de
inicialização não é mais necessária, pois tudo executa a partir do
disco de RAM.
Neste ponto você pode realmente remover o CD ou disquete que você usou
para inicializar, assumindo que você não precisa do CD para obter os
arquivos de instalação.

<p>
Em qualquer ponto durante a instalação do OpenBSD você pode terminar
o processo de instalação em andamento pressionando CTRL-C, e
reinicializar novamente a instalação digitando <tt>install</tt> no
prompt de comando sem reinicializar a máquina.
Você também pode especificar um "!" na maioria dos lugares na
instalação para obter um prompt de shell, e então
terminar a execução do shell para voltar ao instalador.

<p>
Quando a sua inicialização é bem-sucedida, você verá várias mensagens de
texto rolando em sua tela. Esse texto, em azul e branco em várias
arquiteturas, é o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg</a>,
o kernel mostrando a você quais dispositivos foram encontrados
e como eles estão enganchados em outros dispositivos.
Uma cópia desse texto é salva em <tt>/var/run/dmesg.boot</tt>.

<p>
Então você verá o seguinte:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ...
  root on rd0a swap on rd0b dump on rd0b
  erase ^?, werase ^W, kill ^U, intr ^C, status ^T

  Welcome to the OpenBSD/i386 4.7 installation program.
  (I)nstall, (U)pgrade or (S)hell? <b>i</b>
</pre></td></tr></table>

<p>
E com isso nós temos nossa primeira pergunta. Você tem as três
opções mostradas:
<ul>
<li><b>Install:</b> Carrega o OpenBSD, sobrescrevendo quaisquer dados
    que estejam na partição. Note que é possível deixar partições
    intactas nesse processo, tal como uma <tt>/home</tt>, mas
    de qualquer maneira, suponha que tudo mais será sobrescrito.
<li><b>Upgrade:</b> Instala um novo pacote de <a href="#FilesNeeded">
    arquivos de instalação</a> na máquina, mas não sobrescreve nenhuma
    configuração, nenhum dado de usuário ou programas adicionais.
    Nenhuma formatação de disco é realizada, os diretórios <tt>/etc</tt>
    e <tt>/var</tt> não são sobrescritos. Algumas notas importantes:
    <ul>
    <li>Você não tem a opção de instalar o arquivo <tt>etc47.tgz</tt>.
        Depois de instalar, você terá que
        <a href="../upgrade47.html#etcUpdates">mesclar manualmente</a>
        as mudanças de <tt>etc47.tgz</tt> em seu sistema antes de você
        considerá-lo completamente funcional. Essa é uma etapa
        importante que deve ser feita, senão serviços chaves (tais como
        o
        <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>)
        podem não funcionar.

    <li>O processo de atualização de versão não é projetado para saltar
        versões! Isso frequentemente funciona, mas não é suportado.
        Para o OpenBSD 4.7, atualizar do 4.6 para o 4.7 é a única
        atualização de versão recomendada.
        Se você quer atualizar uma versão mais antiga, atualize primeiro
        para as versões intermediárias ou, se o seu sistema está muito
        desatualizado, considere fazer uma reinstalação completa.
    </ul>
    <!-- XXXversion -->
    Mais informações sobre atualizações entre versões podem ser
    encontradas no
    <a href="../upgrade47.html">Guia de Atualização de Versão do
    OpenBSD 4.7</a>.

<li><b>Shell:</b> Às vezes você precisa executar reparos ou fazer a
    manutenção em um sistema que não inicializa (ou não deve
    inicializar) um kernel normal.
    Essa opção permite que você realize a manutenção do seu sistema.
    Vários utilitários importantes estão disponíveis na mídia de
    inicialização.
</ul>

Assumimos que você escolheu "(I)nstall" aqui.


<a name="InstQuestions"></a>
<h3>4.5.2 - As perguntas da instalação</h3>

Agora começamos a receber as perguntas que definirão como o sistema é
configurado.
Você notará que, na maioria dos casos, todas as questões são feitas
antes, então a instalação toma o lugar.
Se você tem um computador lento ou uma conexão lenta com a Internet,
você pode responder estas questões, sair de perto do computador,
voltar e ter que somente reinicializar o sistema para completar a
instalação.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  At any prompt except password prompts you can escape to a shell by
  typing '!'. Default answers are shown in []'s and are selected by
  pressing RETURN.  You can exit this program at any time by pressing
  Control-C, but this can leave your system in an inconsistent state.

  Terminal type: [vt220] <b><i>Enter</i></b>
</pre></td></tr></table>


<p>
Na maioria dos casos o tipo de terminal padrão é o mais apropriado;
no entanto, se você está usando um
<a href="faq7.html#SerCon">console serial</a>
para a instalação, não escolha o padrão, responda adequadamente.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  System hostname? (short form, e.g. 'foo') <i><b>puffy</b></i>
</pre></td></tr></table>

<p>
Esse valor, junto com o nome de domínio DNS (especificado
<a href="#MoreNetwork">abaixo</a>), será salvo no arquivo
<tt>/etc/myname</tt>, que é utilizado durante a inicialização normal
para definir o nome de máquina do sistema.
Se você não definir um nome de domínio do sistema, o valor padrão
'my.domain' será utilizado.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available network interfaces are: fxp0 vlan0.
  Which one do you wish to configure? (or 'done') [fxp0] <i><b>Enter</b></i>
</pre></td></tr></table>

<p>
<tt>vlan0</tt> é a interface virtual VLAN.
Para os nossos propósitos, vamos ignorar essa opção e nos focar nas
interfaces físicas.
Se você tem múltiplas interfaces físicas, elas serão listadas aqui.
Note que elas são identificadas pelo nome do driver, e não como
dispositivos Ethernet genéricos.
Nesse caso, "<tt>fxp0</tt>" refere-se ao primeiro dispositivo que
está utilizando o driver
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fxp&amp;sektion=4">fxp(4)</a>,
<tt>fxp1</tt> seria o segundo dispositivo, etc.
Mais informações sobre nomeação de dispositivos estão na
<a href="faq6.html#Setup.if">FAQ 6</a>.

<p>
Após selecionar o dispositivo que você quer configurar, você
agora vai configurá-lo.
Em muitos casos você quer configurá-lo usando DHCP:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  IPv4 address for fxp0? (or 'dhcp' or 'none') [dhcp] <b><i>Enter</i></b>
  Issuing hostname-associated DHCP request for fxp0.
  DHCPDISCOVER on fxp0 to 255.255.255.255 port 67 interval 1
  DHCPOFFER from 192.168.1.250 (08:00:20:94:0b:c8)
  DHCPREQUEST on fxp0 to 255.255.255.255 port 67
  DHCPACK from 192.168.1.250 (08:00:20:94:0b:c8)
  bound to 192.168.1.199 -- renewal in 43200 seconds.
</pre></td></tr></table>

<p>
DHCP configura o endereço IP, a máscara de sub-rede, o gateway padrão,
o nome de domínio DNS e os servidores DNS.
Se você não usa DHCP, você precisa especificar todas essas
coisas manualmente; veja <a href="#MoreNetwork">abaixo</a>
a discussão mais detalhada.
<a name="backMoreNetwork"></a>

<p>
Se você tem alguma configuração de IPv6 para fazer ou existem outras
interfaces para configurar (ou você não gostou da forma como configurou
a interface anterior), você pode fazê-la agora, mas em nosso caso
já estamos satisfeitos:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  IPv6 address for fxp0? (or 'rtsol' or 'none') [none] <b><i>Enter</i></b>
  Available network interfaces are: fxp0 vlan0.
  Which one do you wish to configure? (or 'done') [done] <b><i>Enter</i></b>
  Using DNS domainname in.nickh.org
  Using DNS nameservers at 192.168.1.252
  Do you want to do any manual network configuration? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Se você responder "yes" para a pergunta "manual network configuration",
você será colocado em um prompt de shell onde você pode configurar
qualquer outra coisa que precisa de configuração, então digite "exit"
para retornar ao programa de instalação.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Password for root account? (will not echo) <i>PaSsWoRd</i>
  Password for root account? (again) <i>PaSsWoRd</i>
</pre></td></tr></table>

<p>
Utilize uma senha segura para a conta do root, e lembre-se: existem
vários atacantes na Internet tentando acessar o seu computador, e
eles tentarão um monte de senhas comuns que as pessoas acham que
são senhas realmente seguras.

<p>
Mais tarde você terá uma chance de criar uma conta administrativa
e desativar o acesso (SSH) remoto para a conta do root, mas você
ainda quer uma boa senha na sua conta do root.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Start sshd(8) by default? [yes] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Geralmente você vai querer o sshd(8) funcionando.
Se o seu uso do sistema não necessitar do sshd(8),
há uma pequena vantagem teórica de segurança nisso.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Start ntpd(8) by default? [no] <b>y</b>
  NTP server? (hostname or 'default') [default] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Você terá a opção de executar o
<a href="faq6.html#OpenNTPD">OpenNTPD</a>, a implementação NTP do
OpenBSD.
O OpenNTPD é uma maneira simples de manter o relógio do seu sistema
corretamente sincronizado.
A configuração padrão, utilizando
<a href="http://www.pool.ntp.org">pool.ntp.org</a>, utiliza um grande
número de servidores de horas de acesso gratuito espalhados pelo mundo.

<p>
Uma razão pela qual você talvez NÃO queira executar o ntpd(8) é
se você está executando um sistema em <a href="#Multibooting">inicialização dupla</a>, com
um outro SO que não utiliza o relógio de hardware definido como
GMT, e você não quer que o OpenBSD altere o horário para o seu
outro SO.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you expect to run the X Window System? [yes] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Nem todas as plataformas perguntam se você espera executar o X, e
são aquelas que não requerem que uma variável do sysctl seja definida
para utilizar o X.
Responder "y" aqui modificará o <tt>/etc/sysctl.conf</tt> para incluir
a linha <tt>machdep.allowaperture=1</tt> ou
<tt>machdep.allowaperture=2</tt>, dependendo da sua plataforma.

<p>
Se você não pretende executar o X ou não tem certeza, responda 'N'; se
mudar de ideia basta editar o arquivo <tt>/etc/sysctl.conf</tt>.
Existe uma vantagem de segurança em deixar o driver
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&amp;sektion=4">xf86(4)</a>
desabilitado, pois os motores gráficos das placas de vídeo dos
computadores modernos podem potencialmente serem usados para alterar a
memória, sem controle do processador.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you want the X Window System to be started by xdm(1)? [no] <b>y</b>
</pre></td></tr></table>

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm&amp;sektion=1">xdm(1)</a>
iniciar o ambiente X na inicialização do sistema.
Nós recomendamos fazer isso durante a instalação, só se você estiver certo que irá funcionar
o X por padrão no seu sistema.
Caso contrário, <a href="faq11.html">configure o X</a> antes de configurar o xdm(1).

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Change the default console to com0? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Se você deseja configurar um console serial em vez do padrão do seu
sistema (usualmente um teclado e um monitor), essa é sua chance.
Se você mudar o padrão para "y", um prompt será exibido para você
definir a taxa de bits.
Note que, para consoles seriais, o mais rápido nem sempre é o melhor;
utilizar o padrão da sua plataforma é altamente recomendado.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Setup a user? (enter a lower-case loginname, or 'no') [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Você agora tem a oportunidade de criar um OUTRO usuário, além
do root, para a manutenção do sistema.
Esse usuário será um membro do grupo "wheel", assim você pode
executar o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&amp;sektion=1">su(1)</a>
e um prompt será exibido para receber uma senha.

<p>
Note que se você quer criar o usuário, especifique o nome do usuário, e
não "y" ou "yes".

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  What timezone are you in? ('?' for list) [Canada/Mountain] <b>US/Michigan</b>
</pre></td></tr></table>

<p>
O OpenBSD assume que o relógio em tempo real (RTC - "Real-Time Clock")
do seu computador está configurado como GMT, mas você também tem que
especificar em qual fuso horário você está.
Podem existir várias respostas válidas para sua localização física.
Pressionar "?" no prompt ajuda a guiá-lo para encontrar um nome de
fuso horário válido.

<p>
Note que o instalador frequentemente vai determinar corretamente
o seu fuso horário, e então você pode simplesmente digitar
"Enter".

<p>
Mais informações sobre a configuração do fuso horário podem
ser encontradas <a href="#MoreTimeZone">aqui</a>.
<a name="backMoreTimeZone"></a>

<a name="InstDisks"></a>
<h3>4.5.3 - Configuração dos discos</h3>

<i><b>Nota importante:</b>
Usuários com um disco rígido grande (maior do que era comum quando seu
computador foi fabricado) talvez queiram ver
<a href="faq14.html#LargeDrive">esta seção</a> antes de continuar.</i>

<p>
Configurar apropriadamente o layout do seu disco é provavelmente
a parte mais difícil de uma instalação do OpenBSD.

<p>
A configuração de discos no OpenBSD pode variar entre as plataformas.
Para <a href="../../i386.html">i386</a>,
<a href="../../amd64.html">amd64</a>,
<a href="../../macppc.html">macppc</a>,
<a href="../../zaurus.html">zaurus</a> e
<a href="../../armish.html">armish</a>, a configuração dos discos
é feita em duas etapas.
Primeiro a fatia do disco rígido referente ao OpenBSD é definida
utilizando o fdisk(8), então essa fatia é subdividida em partições
OpenBSD usando o disklabel(8).

<p>
Alguns usuários se confundem com a terminologia utilizada aqui. Isso
acontece porque nós estamos usando a palavra "partição" em dois sentidos
diferentes.
Existem duas camadas de particionamento nas plataformas do OpenBSD
citadas acima, a primeira, que pode ser considerada o particionamento
de Sistema Operacional, permite que múltiplos SOs em um computador
definam seus espaços no disco, e a segunda, onde a partição
OpenBSD é subparticionada em sistemas de arquivos individuais.
A primeira camada é visível como uma partição do disco para o DOS,
Windows e qualquer outro SO que use esse sistema de layout de disco,
a segunda camada de particionamento somente é visível pelo OpenBSD e SOs
que podem ler diretamente o seu sistema de arquivos.

<p>
O novo instalador do OpenBSD tenta tornar mais fáceis as tarefas de
definição de layout de disco através de um padrão equilibrado para uso
"geral".
Note que muitas pessoas ainda quererão personalizar o padrão, ou usar
seu próprio layout de disco, mas novos usuários certamente devem começar
com esta configuração até que vejam a necessidade de uma diferente.
Note que o layout padrão varia dependendo do tamanho do seu sistema
de discos.

<p>
Por ora, vamos utilizar os valores padrão em nosso disco de 40G.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available disks are: wd0.
  Which one is the root disk? (or 'done') [wd0]
  Disk: wd0       geometry: 4863/255/63 [78125000 Sectors]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 06      0   1   1 -    521 254  63 [          63:     8385867 ] DOS > 32MB
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  Use (W)hole disk or (E)dit the MBR? [whole] <i><b>Enter</b></i>
  Setting OpenBSD MBR partition to whole wd0...done.
</pre></td></tr></table>
Note que esse disco possui uma partição pré-existente -- <i>ao escolher
a opção "whole" (todo o disco) a partição será removida!</i>

<p>
Definir todo o disco para o OpenBSD resulta na
realização de uma série de coisas importantes:
<ul>
<li>Apaga quaisquer partições existentes no disco
<li>Cria um MBR e uma assinatura de disco, assim o disco pode ser
    inicializado
<li>Cria uma partição OpenBSD usando o disco inteiro
<li>Marca aquela partição como "ativa".
</ul>

Existem vários momentos onde você não quer fazer aquilo, incluindo:
<ul>
<li>Você quer que as partições de outros SOs sejam mantidas
<li>Você deseja manter partições de configuração ("setup"),
    suspender para o disco ("suspend to disk"), ou outras
    partições do sistema
<li>Você deseja construir um sistema com
    <a href="#Multibooting">inicialização múltipla</a>
</ul>

Note que é exigido que um novo drive (ou um que nunca foi utilizado para
inicialização) tenha um MBR válido, uma assinatura válida, uma
partição OpenBSD e uma partição marcada como "ativa".
Se você não fizer essas coisas usando a opção "Use whole disk",
você precisa se certificar manualmente de que elas sejam feitas.

<p>
Mais informações sobre o particionamento fdisk do seu disco podem
ser encontradas <a href="#Morefdisk">abaixo</a>.
<a name="BackMorefdisk"></a>

<p>
Agora nós vamos dividir nossa partição fdisk do OpenBSD em
partições de disco do OpenBSD usando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Setting OpenBSD MBR partition to whole wd0...done.
  The auto-allocated layout for wd0 is:
  #                size           offset  fstype [fsize bsize  cpg]
    a:          1024.0M               63  4.2BSD   2048 16384    1 # /
    b:           507.1M          2097215    swap                   
    c:         38147.0M                0  unused                   
    d:          2620.4M          3135791  4.2BSD   2048 16384    1 # /tmp
    e:          4143.1M          8502287  4.2BSD   2048 16384    1 # /var
    f:          2048.0M         16987323  4.2BSD   2048 16384    1 # /usr
    g:          1024.0M         21181627  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          3610.7M         23278779  4.2BSD   2048 16384    1 # /usr/local
    i:          1961.6M         30673543  4.2BSD   2048 16384    1 # /usr/src
    j:          1961.6M         34690971  4.2BSD   2048 16384    1 # /usr/obj
    k:         19245.9M         38708399  4.2BSD   2048 16384    1 # /home

  Use (A)uto layout, (E)dit auto layout, or create (C)ustom layout? [a] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
O instalador nos apresentou sua proposta de
"Auto layout" (layout automático) para as partições do OpenBSD no nosso
disco, a qual nós vamos aceitar.

<p>
Se o layout proposto não é apropriado para as suas necessidades,
você pode, obviamente, editar o padrão ou personalizá-lo completamente;
mais detalhes sobre o particionamento do disklabel
<a href="#Moredisklabel">abaixo</a>.
<a name="BackMoredisklabel"></a>

<p>
<b>NOTA para reinstaladores:</b>
O novo instalador não limpa o seu disklabel antigo se você
escolher "(C)ustom Layout", mas você terá que especificar
novamente cada ponto de montagem usando a opção 'm' no disklabel(8).

<p>
O instalador agora cria aquelas partições, cria nelas os
sistemas de arquivos usando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;sektion=8">newfs(8)</a>,
e as monta para a instalação:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  /dev/rwd0a: 1024.0MB in 2097152 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0k: 19245.9MB in 39415696 sectors of 512 bytes
  96 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0d: 2620.4MB in 5366496 sectors of 512 bytes
  13 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0f: 2048.0MB in 4194304 sectors of 512 bytes
  11 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0g: 1024.0MB in 2097152 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0h: 3610.7MB in 7394764 sectors of 512 bytes
  18 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0j: 1961.6MB in 4017428 sectors of 512 bytes
  10 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0i: 1961.6MB in 4017428 sectors of 512 bytes
  10 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0e: 4143.1MB in 8485036 sectors of 512 bytes
  21 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local)
  /dev/wd0k on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0f on /mnt/usr type ffs (rw, asynchronous, local, nodev)
  /dev/wd0g on /mnt/usr/X11R6 type ffs (rw, asynchronous, local, nodev)
  /dev/wd0h on /mnt/usr/local type ffs (rw, asynchronous, local, nodev)
  /dev/wd0j on /mnt/usr/obj type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0i on /mnt/usr/src type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid)
</pre></td></tr></table>

<p>

Você pode notar que a partição <i>c</i> parece ter sido ignorada.
Essa partição é o seu disco rígido inteiro; não tente alterá-la.

<a name="InstMedia"></a>
<h3>4.5.4 - Escolha da mídia de instalação e dos pacotes de arquivos</h3>

Nesta etapa você tem a chance de escolher sua mídia de instalação.
Neste caso vamos instalar usando um servidor FTP.
<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Location of sets? (cd disk ftp http or 'done') [cd] <b>ftp</b>
  HTTP/FTP proxy URL? (e.g. 'http://proxy:8080', or 'none') [none] <b><i>Enter</i></b>
  Server? (hostname, list#, 'done' or '?') [mirror.example.org] <b>obsd.cec.mtu.edu</b>
</pre></td></tr></table>
Se você não se lembra da localização do seu espelho favorito
(ou de nenhum!), o instalador frequentemente é capaz de
apresentar-lhe um espelho padrão que funciona bem para você.
Caso contrário, pressione "?" para uma lista de espelhos ser
exibida, e selecione o número de um espelho que funciona bem
para você.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Server directory? [pub/OpenBSD/4.7/i386] <b><i>Enter</i></b>
  Login? [anonymous] <b><i>Enter</i></b>
</pre></td></tr></table>

Todos os espelhos FTP públicos suportam downloads anônimos,
obviamente, mas você pode ter uma máquina local que requer
um nome de início de sessão e uma senha.

<p>
Você agora pode ajustar a lista de
<a href="#FilesNeeded">pacotes de arquivos</a>.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Select sets by entering a set name, a file name pattern or 'all'. De-select
  sets by prepending a '-' to the set name, file name pattern or 'all'. Selected
  sets are labelled '[X]'.
      [X] bsd           [X] etc47.tgz     [X] game47.tgz    [X] xfont47.tgz
      [X] bsd.rd        [X] misc47.tgz    [X] xbase47.tgz   [X] xserv47.tgz
      [ ] bsd.mp        [X] comp47.tgz    [X] xetc47.tgz
      [X] base47.tgz    [X] man47.tgz     [X] xshare47.tgz
  Set name(s)? (or 'abort' or 'done') [done] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Você precisa, no mínimo, de um kernel (<tt>bsd</tt>) e dos
pacotes de arquivos base47.tgz e etc47.tgz.
A menos que você saiba o que está fazendo, utilize os pacotes
escolhidos por padrão.
Você pode adicionar ou remover pacotes de arquivos usando os
caracteres "+" e "-" na frente do nome do pacote de arquivos, e
também pode usar os caracteres curinga:
<ul>
<li><tt><b>-comp47.tgz</b></tt> remove o <tt>comp47.tgz</tt>
<li><tt><b>+bsd.mp</b></tt> adiciona o bsd.mp
<li><tt><b>-x*</b></tt> remove todos os componentes do X
</ul>

Novamente vamos utilizar a escolha padrão.
Essa máquina é um sistema de processador único, então bsd.mp não é
instalado, mas todas as outras coisas são.
Se em um outro momento a máquina for atualizada para um sistema com
múltiplos processadores, você talvez queira instalar o bsd.mp também.

<p>
E agora vamos começar nossa instalação!
Este é o ponto onde você pode desejar voltar depois de um tempo se você
possui um computador lento ou uma conexão lenta com a Internet,
entretanto, com um computador rápido e arquivos locais, este
processo pode levar dois minutos ou menos!

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  bsd          100% |*************************************|  7404 KB    00:04
  bsd.rd       100% |*************************************|  6147 KB    00:03
  base47.tgz   100% |*************************************| 49365 KB    01:46
  etc47.tgz    100% |*************************************|   510 KB    00:01
  misc47.tgz   100% |*************************************|   356 KB    00:06
  comp47.tgz   100% |*************************************| 90468 KB    03:08
  man47.tgz    100% |*************************************|  9240 KB    00:21
  game47.tgz   100% |*************************************|  2556 KB    00:04
  xbase47.tgz  100% |*************************************| 15185 KB    00:21
  xetc47.tgz   100% |*************************************| 70053       00:00
  xshare47.tgz 100% |*************************************|  2887 KB    00:12
  xfont47.tgz  100% |*************************************| 38754 KB    00:57
  xserv47.tgz  100% |*************************************| 19413 KB    00:39
  Location of sets? (cd disk ftp http or 'done') [done] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Sim, o instalador está perguntando novamente sobre a partir de onde nós
queremos instalar coisas.
Essas coisas são pacotes de arquivos ausentes, esquecidos ou falhos
que podem ser reinstalados, e também é dessa maneira que os
<a href="#site">pacotes de arquivos personalizados</a> podem ser
instalados.

<p>
Novamente vamos escolher o padrão, já terminamos a etapa de instalação
de arquivos.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Saving configuration files...done.
  Generating initial host.random file...done.
  Making all device nodes...done.

  CONGRATULATIONS! Your OpenBSD install has been successfully completed!
  To boot the new system, enter 'reboot' at the command prompt.
  When you login to your new system the first time, please read your mail
  using the 'mail' command.

  #
</pre></td></tr></table>
<p>

<a name="Inst1stBoot"></a>
<h3>4.5.5 - Primeira inicialização!</h3>
O OpenBSD agora está instalado no seu sistema e pronto para sua
primeira inicialização, mas antes que você a faça...

<p>
<h4>Antes da reinicialização</h4>
Neste ponto seu sistema está instalado e pronto para ser inicializado
e configurado para o serviço. Antes disso, entretanto, é
melhor você verificar a <a href="../../errata.html">página Errata</a>
para ver se existe alguma falha que possa causar-lhe algum dano.

<p>
Um truque que você pode usar "antes da primeira inicialização" é
executar:
<pre>
    # <b>/mnt/usr/sbin/chroot /mnt</b>
</pre>
no prompt de shell.
Isso ajusta seus pontos de montagem para ser o que seriam em uma
inicialização normal do seu novo sistema instalado. Você agora pode
fazer configurações básicas do seu sistema, como adicionar usuários,
mudar pontos de montagem, etc.

<h4>Depois da reinicialização</h4>

Na sua primeira inicialização as chaves do
<a href="http://www.openssh.com">SSH</a> são geradas.
Em computadores modernos isso leva alguns segundos, e você talvez
nem note a geração acontecendo.
Em sistemas antigos a geração pode levar vários minutos, possivelmente
uma hora ou mais em sistemas realmente lentos.

<p>
Umas das primeiras coisas que você deve ler, depois de instalar o seu
sistema, é
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8">afterboot(8)</a>.

<p>
Você também pode achar os seguintes links úteis:
<ul>
<li><a href="faq10.html#AddDelUser">Como adicionar usuários no OpenBSD</a>
<li><a href="faq6.html#Setup">Configuração Inicial da Rede</a>
<li><a href="faq2.html#ManPages">Páginas de manual dos comandos
    populares/mais usados</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi">Páginas de manual
    do OpenBSD na Web</a>
<li><a href="faq15.html">O Sistema de Pacotes e Portes do OpenBSD para a
    instalação de software</a>
</ul>

<a name="InstFinish"></a>
<h3>4.5.6 - Uma última coisa...</h3>
Os desenvolvedores do OpenBSD pedem que você
<a href="#SendDmesg">envie uma cópia do seu dmesg</a>. Isso é realmente
muito apreciado por eles e, no final das contas, por todos os usuários.


<a name="More"></a>
<h2>4.6 - Detalhes de uma instalação mais complexa</h2>
Algumas vezes você não pode aceitar os valores padrão.
Nesta seção você encontra alguns detalhes a mais sobre partes
do processo de instalação.

<a name="MoreNetwork"></a>
<h3>4.6.1 - Configuração da rede</h3>

Se você não possui um servidor DHCP disponível, você tem que
configurar seu(s) adaptador(es) de rede manualmente.
Exemplo:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Which one do you wish to configure? (or 'done') [xl0] <b><i>Enter</i></b>
  IPv4 address for xl0? (or 'dhcp' or 'none') [dhcp] <b>192.168.1.37</b>
  Netmask? [255.255.255.0] 255.255.254.0
  IPv6 address for xl0? (or 'rtsol' or 'none') [none] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Após aquele conjunto de perguntas, você tem a chance de configurar
quaisquer outros adaptadores de rede que sua máquina possua.
Se você especificar um outro adaptador de rede aqui, as questões
acima são repetidas.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available network interfaces are: xl0 vlan0.
  Which one do you wish to configure? (or 'done') [done]
</pre></td></tr></table>

<p>
Agora você tem que configurar o gateway padrão e os servidores DNS,
coisas que estão relacionadas a todos os adaptadores de rede:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Default IPv4 route? (IPv4 address, 'dhcp' or 'none') <b>192.168.1.1</b>
  add net default: gateway 192.168.1.1
  DNS domain name? (e.g. 'bar.com') [my.domain] <b>exemplo.org</b>
  DNS nameservers? (IP address list or 'none') [none] <b>192.168.1.250 192.168.1.251</b>
</pre></td></tr></table>

<p>
Note que múltiplos servidores DNS podem ser listados, separados
por espaços.

<p>
Algumas vezes você tem que fazer alguma outra coisa, por exemplo,
configurar uma chave de acesso de rede sem fio, ou definir manualmente
uma configuração de duplex ou velocidade (não faça isso, a menos que
você absolutamente TENHA que fazer; corrigir a configuração do seu
switch é uma ideia muito melhor!).
Você agora tem a chance de ir para o shell e fazer qualquer configuração
manual que gostaria de fazer.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you want to do any manual network configuration? [no] <b>y</b>
  Type 'exit' to return to install.
  # <b>ifconfig xl0 media</b>
  xl0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
          lladdr 00:08:74:2c:df:9c
          groups: egress
          media: Ethernet autoselect (100baseTX full-duplex)
          status: active
          supported media:
                  media 10baseT
                  media 10baseT mediaopt full-duplex
                  media 100baseTX
                  media 100baseTX mediaopt full-duplex
                  media autoselect
          inet 192.168.1.37 netmask 0xfffffe00 broadcast 192.168.1.255
  # <b>ifconfig xl0 media 100baseTX mediaopt full-duplex</b>
  # <b>ifconfig xl0</b>
  xl0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
          lladdr 00:08:74:2c:df:9c
          groups: egress
          media: Ethernet 100baseTX full-duplex
          status: active
          inet6 fe80::208:74ff:fe2c:df9c%xl0 prefixlen 64 scopeid 0x1
          inet 192.168.1.37 netmask 0xfffffe00 broadcast 192.168.1.255
  # <b>exit</b>
<i>...a configuração é retomada...</i>
</pre></td></tr></table>

<p>
<a href="#backMoreNetwork">(voltar para onde você estava)</a>

<a name="MoreTimeZone"></a>
<h3>4.6.2 - Configuração do fuso horário</h3>
O horário no Unix não é uma coisa simples (ou, colocado de outra
maneira, o horário no Unix é uma coisa <i>realmente</i> simples,
o horário humano é uma bagunça politicamente manipulada).
Os arquivos de fuso horário ajudam o sistema a converter o
horário do Unix (o número de segundos que se passaram desde a
meia-noite de 1 de janeiro de 1970 (GMT)) para o horário humano,
levando em consideração coisas como fuso horário, horário de verão
(DST - "Daylight Saving Time"), mudanças de regras de DST, etc.
Eles também incluem o histórico das mudanças.

<p>
Múltiplos arquivos de definição de fuso horário algumas vezes possuem o
mesmo horário <i>atual</i>, mas podem ter uma história diferente.
Por exemplo, EST5EDT e US/Michigan possuem o mesmo horário HOJE EM DIA,
mas em 1975 as regras eram diferentes, então se você está fazendo
cálculos com datas e horários que envolvam 1975, você deve tomar
cuidado com as diferenças.
Você deve utilizar o arquivo de fuso horário mais específico e mais
preciso para a sua região que você puder, em vez de um que fornece o
horário correto no momento.

<p>
O instalador do OpenBSD ajuda-o a encontrar o arquivo de fuso horário
apropriado para você se você não tem certeza sobre qual utilizar.
Simplesmente digite "<tt>?</tt>" em cada prompt e o instalador
mostra a você as opções.
Se o primeiro nível de respostas não serve para você, digite o nome
de um continente ou país e olhe as opções de lá:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  What timezone are you in? ('?' for list) [right/EST5EDT] <b>?</b>
  Africa/      Chile/       GB-Eire      Israel       NZ-CHAT      UCT
  America/     Cuba         GMT          Jamaica      Navajo       US/
  Antarctica/  EET          GMT+0        Japan        PRC          UTC
  Arctic/      EST          GMT-0        Kwajalein    PST8PDT      Universal
  Asia/        EST5EDT      GMT0         Libya        Pacific/     W-SU
  Atlantic/    Egypt        Greenwich    MET          Poland       WET
  Australia/   Eire         HST          MST          Portugal     Zulu
  Brazil/      Etc/         Hongkong     MST7MDT      ROC          posix/
  CET          Europe/      Iceland      Mexico/      ROK          posixrules
  CST6CDT      Factory      Indian/      Mideast/     Singapore    right/
  Canada/      GB           Iran         NZ           Turkey
  What timezone are you in? ('?' for list) [right/EST5EDT] <b>US</b>
  What sub-timezone of 'US' are you in? ('?' for list) ?
  Alaska          Central         Hawaii          Mountain        Samoa
  Aleutian        East-Indiana    Indiana-Starke  Pacific
  Arizona         Eastern         Michigan        Pacific-New
  What sub-timezone of 'US' are you in? ('?' for list) <b>Michigan</b>
</pre></td></tr></table>

<p>
Definimos o horário para "US/Michigan". Isso cria uma ligação simbólica
em <tt>/etc</tt> apontando para o arquivo de fuso horário apropriado em
<tt>/usr/share/zoneinfo</tt>, alguma coisa como:

<blockquote><pre>
  /etc/localtime -> /usr/share/zoneinfo/US/Michigan
</pre></blockquote>

Note o diretório "<tt>right/</tt>", esse diretório inclui ajustes de
segundos de salto, mas fora isso duplica as escolhas de fuso horário
padrão.
Mais informações <a href="faq8.html#NTPerror">aqui</a>.

<p>
<a href="#backMoreTimeZone">(voltar para onde estávamos)</a>

<a name="Morefdisk"></a>
<h3>4.6.3 - Layout fdisk(8) personalizado</h3>

Nota: somente algumas plataformas do OpenBSD usam o fdisk e, usualmente,
apenas os usuários das plataformas <a href="../../i386.html">i386</a> e
<a href="../../amd64.html">amd64</a> têm que se preocupar com o fdisk.
Usuários da maioria das outras plataformas que usam o fdisk não têm
que se preocupar com inicialização múltipla ou partições de
configuração/diagnóstico.
Por essa razão, esta seção é focada nas plataformas i386 e amd64.

<p>
O
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8">fdisk(8)</a>
é usado para marcar a parte do OpenBSD do seu disco rígido.
Ele serve para demarcar a parte do disco utilizada pelo OpenBSD das
outras partes usadas por outros SOs ou funções do sistema.

<p>
Se você tem uma partição no seu disco que você deseja manter, ou se você
deseja deixar espaço para uma outra partição, você NÃO deve escolher
"(W)hole disk" e, no lugar, deve editar a tabela de partições com o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8">fdisk(8)</a>.
Mais informações sobre a execução manual do fdisk(8) podem ser
encontradas <a href="faq14.html#fdisk">aqui</a>.

<b>Antes de mecher com qualquer sistema que contenha dados que você não
deseja perder, tenha certeza de que você possui um bom backup.</b>
É muito fácil arruinar dados importantes neste processo, então tenha
certeza de que você está pronto para voltar atrás, se necessário.

<p>
Se você está adicionando o OpenBSD a um sistema existente, provavelmente
você precisa criar algum espaço livre no seu sistema antes de instalar
o OpenBSD.
Isso normalmente envolve a remoção de partições ou, possivelmente, a
redução do tamanho de partições existentes.
O programa <a href="http://gparted.sourceforge.net/">gparted</a>
é útil para encolher as partições de muitos SOs populares, tornando
possível a instalação do OpenBSD no espaço livre que foi aberto.

<p>
Neste exemplo vamos assumir que você está utilizando um disco vazio
de 40G e deseja criar um sistema com inicialização múltipla, com 5G
reservados no começo do disco para o Windows e o restante para o
OpenBSD.
Note que um drive vazio tem que ter um código de inicialização MBR
válido e uma assinatura válida escritos no disco antes que ele possa
ser inicializado.

<p>
O processo é quase o mesmo que trabalhar ao redor de uma partição
existente, você apenas precisa saltar as partes onde criamos a
partição para o Windows e se preocupar com a instalação do código
de inicialização MBR.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available disks are: wd0.
  Which one is the root disk? (or 'done') [wd0] <b><i>Enter</i></b>
  MBR has invalid signature; not showing it.
</pre></td></tr></table>
SE o disco tivesse um MBR válido, ele mostraria a você a tabela de
partições existente, que pode ser um bom modo de mostrar se um
disco já possui dados.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Use (W)hole disk or (E)dit the MBR? [whole] <b>e</b>
 
  You will now create a single MBR partition to contain your OpenBSD data. This
  partition must have an id of 'A6'; must *NOT* overlap other partitions; and
  must be marked as the only active partition.  Inside the fdisk command, the
  'manual' command describes all the fdisk commands in detail.

  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0x0
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
Enter 'help' for information
fdisk: 1>
</pre></td></tr></table>

<p>
Antes de tudo note o prompt do fdisk.
O número "1" indica o primeiro nível das tabelas de partições -- se você
estivesse editando uma partição estendida o número seria "2"
(ou um número maior).
Partições estendidas são partições que têm sua própria
tabela de subpartições, e são utilizadas para contornar o
limite de projeto de quatro partições do IBM AT.
As partições estendidas não serão abordadas aqui.

<p>
Em primeiro lugar faremos da partição "0" uma partição de 5G para
o Windows (usando NTFS), e a partição "1" será nossa partição para
o OpenBSD usar o resto do disco.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk: 1> <b>e 0</b>
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help)
</pre></td></tr></table>

<p>
Já que não sabemos de cor qual é o ID de partição para o NTFS,
digitamos "?" para obtermos uma lista.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>?</b>
  Choose from the following Partition id values:
  00 unused         20 Willowsoft     66 NetWare 386    A9 NetBSD
  01 DOS FAT-12     24 NEC DOS        67 Novell         AB MacOS X boot
  02 XENIX /        27 Win Recovery   68 Novell         AF MacOS X HFS+
  03 XENIX /usr     38 Theos          69 Novell         B7 BSDI filesy*
  04 DOS FAT-16     39 Plan 9         70 DiskSecure     B8 BSDI swap
  05 Extended DOS   40 VENIX 286      75 PCIX           BF Solaris
  06 DOS > 32MB     41 Lin/Minux DR   80 Minix (old)    C0 CTOS
  07 NTFS           42 LinuxSwap DR   81 Minix (new)    C1 DRDOSs FAT12
  08 AIX fs         43 Linux DR       82 Linux swap     C4 DRDOSs < 32M
  09 AIX/Coherent   4D QNX 4.2 Pri    83 Linux files*   C6 DRDOSs >=32M
  0A OS/2 Bootmgr   4E QNX 4.2 Sec    84 OS/2 hidden    C7 HPFS Disbled
  0B Win95 FAT-32   4F QNX 4.2 Ter    85 Linux ext.     DB CPM/C.DOS/C*
  0C Win95 FAT32L   50 DM             86 NT FAT VS      DE Dell Maint
  0E DOS FAT-16     51 DM             87 NTFS VS        E1 SpeedStor
  0F Extended LBA   52 CP/M or SysV   8E Linux LVM      E3 SpeedStor
  10 OPUS           53 DM             93 Amoeba FS      E4 SpeedStor
  11 OS/2 hidden    54 Ontrack        94 Amoeba BBT     EB BeOS/i386
  12 Compaq Diag.   55 EZ-Drive       99 Mylex          EE EFI GPT
  14 OS/2 hidden    56 Golden Bow     9F BSDI           EF EFI Sys
  16 OS/2 hidden    5C Priam          A0 NotebookSave   F1 SpeedStor
  17 OS/2 hidden    61 SpeedStor      A5 FreeBSD        F2 DOS 3.3+ Sec
  18 AST swap       63 ISC, HURD, *   A6 OpenBSD        F4 SpeedStor
  19 Willowtech     64 NetWare 2.xx   A7 NEXTSTEP       FF Xenix BBT
  1C ThinkPad Rec   65 NetWare 3.xx   A8 MacOS X
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>07</b>
</pre></td></tr></table>

<p>
Agora nós definimos os pontos de início e fim:
<p>

<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you wish to edit in CHS mode? [n]
</pre></td></tr></table>

<p>
O modo CHS permite a você especificar o espaço de disco em
Cilindros, Cabeças e Setores (CHS - "Cylinders, Heads and Sectors").
Mantenha em mente que em discos rígidos modernos os números CHS são
completamente fictícios, eles são apenas três números que são traduzidos
para um setor no disco, que é traduzido para a geometria física do
seu disco (que, de qualquer jeito, provavelmente varia através do
disco).

<p>
Se você responder "y", você será questionado pelo cilindro, pela
cabeça e pelo setor de início e fim.
Se você responder "no" (como vamos fazer), você será questionado
pelo setor de início e pelo tamanho.
Editar por CHS é frequentemente mais fácil durante o trabalho ao redor
de uma partição existente, e por setor de início e tamanho é mais fácil
quando você quer criar rapidamente uma partição de um determinado
tamanho.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  offset: [0] <b>63</b>
</pre></td></tr></table>

<a name="trackoffset"></a>
<p>
As plataformas que utilizam o fdisk precisam da distância de uma
trilha ("track") antes da primeira partição.
Uma trilha é um número de setores de "setores por trilha", o último
número dos números da mensagem "geometry:".
É fácil criar o hábito de especificar "63" aqui, já que esse é um valor
comum em discos IDE e SATA modernos, mas nem todos os discos usam isso
como o tamanho de uma trilha, as exceções modernas mais comuns a isso
são os discos SCSI e Flash.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  size: [0] <b>5g</b>
  Rounding to nearest cylinder: 10490382
</pre></td></tr></table>

<p>
O valor de tamanho ("size") pode ser o número de setores (cada um com
512 bytes), ou a capacidade desejada quando seguida de "k", "m" ou "g".
Na edição com offset e size, o fdisk arrendonda a sua partição de modo
que ela termine em um limite de cilindro (o OpenBSD não se preocupa
com isso, e é possível que nenhum SO moderno se preocupe, mas alguns
podem se preocupar).

<p>
Agora vamos dar uma olhada na nossa nova partição:
<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> p
  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0x0
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 07      0   1   1 -    652 254  63 [          63:    10490382 ] NTFS
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  fdisk:*1>
</pre></td></tr></table>

<p>
Note que agora o prompt inclui um "*". Isso significa que existem
mudanças que não foram salvas.

<p>
Agora nossa partição do Windows está criada.
Note que essa partição é apenas um espaço reservado no disco, ela
não está formatada; nenhum sistema de arquivos existe nela.
Você terá que se preocupar com isso quando for instalar o Windows;
nós alcançamos nosso objetivo de reservar espaço para a partição do
Windows ser criada mais tarde.

<p>
Agora nós criamos nossa partição do OpenBSD.
Neste caso o ID de partição será "A6".

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> e 1
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>a6</b>
  Do you wish to edit in CHS mode? [n] <b><i>Enter</i></b>
  offset: [0]
</pre></td></tr></table>

<p>
Chiii!
Qual é nosso offset? Simples -- o offset da partição anterior mais
o tamanho da partição, neste caso 63+10490382 = 10490445.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  offset: [0] <b>10490445</b>
  size: [0] <b>*</b>
  fdisk:*1>
</pre></td></tr></table>

<p>
Note que aqui nós especificamos "*" como o tamanho, que significa
"o resto do disco". Novamente nós poderíamos ter especificado o tamanho
em setores, "m" ou "g" se quiséssemos deixar espaço para alguma outra
coisa.

<p>
Agora vamos dar uma olhada na nossa tabela de partições:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0x0
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 07      0   1   1 -    652 254  63 [          63:    10490382 ] NTFS
   1: A6    653   0   1 -   4998   5  63 [    10490445:    69802803 ] OpenBSD
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  fdisk:*1>
</pre></td></tr></table>

<p>
<b>AINDA NÃO TERMINAMOS!</b><br>
Esse disco ainda não é inicializável!
Como ele era um disco novo, o <a href="faq14.html#Boot386">MBR</a>
do disco estava completamente vazio.
A mensagem "Signature: 0x0" mostra que não existe uma assinatura
válida (0xAA55), o que indica que definitivamente não existe um
código de inicialização válido.
Você pode ter uma assinatura válida sem um
código de inicialização válido, devido a alguma má sorte aleatória
ou algum dano ao código de inicialização existente, mas uma
assinatura inválida certamente indica que o código de inicialização
está ausente, então vamos instalá-lo agora utilizando o comando
"update":

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>update</b>
  Machine code updated.
  fdisk:*1>
</pre></td></tr></table>

<p>
Também temos que "marcar" uma partição como "ativa", assim a ROM
de inicialização sabe a partir de qual partição inicializar:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>f 1</b>
  Partition 1 marked active.
</pre></td></tr></table>

<p>
Agora vamos ver como a tabela se parece:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 07      0   1   1 -    652 254  63 [          63:    10490382 ] NTFS
  *1: A6    653   0   1 -   4998   5  63 [    10490445:    69802803 ] OpenBSD
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  fdisk:*1>
</pre></td></tr></table>

<p>
Uma lista de coisas para você verificar antes de sair do fdisk(8):

<ul>
<li>A assinatura é válida?
<li>As partições não estão sobrepostas?
<li>A partição do OpenBSD está com o ID "A6"?
<li>A partição apropriada (provavelmente a do OpenBSD) está marcada
    como ativa?
</ul>

<p>
<a href="#BackMorefdisk">(voltar para onde estávamos)</a>


<a name="Moredisklabel"></a>
<h3>4.6.4 - Layout disklabel personalizado</h3>

Dentro da partição fdisk(8) do OpenBSD nós usamos o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
para criar as partições dos sistemas de arquivos do OpenBSD.
O OpenBSD marca suas partições de sistemas de arquivos usando dezesseis
letras, de "a" até "p".
A partição "a" no disco de inicialização é definida como a partição
raiz, e "b" no disco de inicialização é a partição swap padrão.
"c" em todos os discos é a partição do "disco todo"; ela é usada por
programas que tem que ter acesso cru ao disco físico, como os
programas fdisk(8) e disklabel(8).
A partição "c" é criada automaticamente para você, e não deve ser
removida ou alterada.
As letras restantes estão disponíveis para você definir
pontos de montagem nelas.
Você pode saltar letras, você pode defini-las em qualquer ordem, e
elas podem estar em qualquer ordem no disco (embora algumas plataformas
possuam um requerimento relacionado a aonde a partição "a" está).
Você também pode deixar espaços desalocados no disco, e alocá-los mais
tarde, ou possivelmente aumentar o tamanho de partições existentes no
espaço desalocado usando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=growfs&amp;sektion=8">growfs(8)</a>.


<p>
Todas as partições que possuam partições FFS nativas devem estar dentro
da partição fdisk(8) do OpenBSD, no entanto, partições que
<a href="faq14.html#foreignfs">não são do OpenBSD</a> podem
(e normalmente devem) estar fora da partição fdisk do OpenBSD.

<p>
Mais informações sobre a utilização do disklabel podem ser encontradas
<a href="faq14.html#disklabel">aqui</a>.

<p>
Mais informações sobre por que o particionamento é uma boa ideia, e
uma estratégia para um bom plano de particionamento, podem ser
encontradas mais <a href="#Partitioning">abaixo</a>.

<p>
O instalador do OpenBSD tenta particionar automaticamente o seu disco
em uma configuração útil e de "propósitos gerais",
baseada no tamanho do seu disco.
Se o seu disco é grande o bastante, o espaço não utilizado será alocado
para a partição <tt>/home</tt>.
Mesmo que esse particionamento automático seja bastante útil, ele não
satisfaz todas as necessidades dos usuários.

<p>
No nosso exemplo, assumimos que estamos construindo um servidor Web
estático para alguns dos nossos amigos utilizá-lo.
Temos uma máquina ligada a uma conexão modesta com a Internet, com um
disco de 40G, com a maior parte dele utilizado para o OpenBSD (com a
mesma partição de 5G do Windows do exemplo acima.
Por que? Pode ser que esse sistema tenha um controlador RAID que é
suportado pelo OpenBSD, mas gerenciável apenas a partir de dentro do
Windows.
Ou, possivelmente, porque o editor da FAQ não gosta de manter um
monte de diferentes sistemas de exemplo).

<p>
As páginas Web servidas pelo servidor Web do OpenBSD estarão em
<tt>/var/www</tt>, e muita pouca coisa será guardada em <tt>/home</tt>,
então isso indica uma mudança definitiva do padrão que precisa ser
feita. Para o objetivo da discussão, vamos assumir também que não
queremos recompilar o SO a partir do código fonte nesta máquina
(vamos fazer isso em algum outro lugar).
O sistema não vai executar o X, no entanto, devido a alguns aplicativos
Web <a href="#FilesNeededX">esperarem que o X esteja instalado</a>,
vamos instalar o X.
A máquina não é muito poderosa, ela não pode ter mais que 1G de RAM,
e dificilmente nossa utilização do sistema vai necessitar de mais do
que isso.

<p>
Então, depois de pensar um pouco, nosso plano é particionar o sistema
da seguinte maneira:
<ul>
<li><tt>/ - root</tt>: 100m. Esta será a partição 'a'.
<li><tt>swap</tt>: 1G (assim teremos espaço suficiente para uma descarga
    de memória), esta será a partição 'b'
<li><tt>/usr</tt>: 2g, partição d
<li><tt>/tmp</tt>: 100m (acreditamos que esta partição não será muito
    utilizada), partição e
<li><tt>/usr/local</tt>: 2g, partição f
<li><tt>/usr/X11R6</tt>: 1g, partição g
<li><tt>/home</tt>: 1g, partição h
<li><tt>/var</tt>: 1g (espaço para um monte de arquivos de
    registro de dados do sistema), partição j
<li><tt>/var/www</tt>: restante do disco, partição k
</ul>

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  The auto-allocated layout for wd0 is:
  #                size           offset  fstype [fsize bsize  cpg]
    a:          1024.0M         10490445  4.2BSD   2048 16384    1 # /
    b:           252.1M         12587597    swap
    c:         39205.7M                0  unused
    d:          2319.3M         13103933  4.2BSD   2048 16384    1 # /tmp
    e:          3653.9M         17853877  4.2BSD   2048 16384    1 # /var
    f:          1149.8M         25337016  4.2BSD   2048 16384    1 # /usr
    g:          1024.0M         27691862  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          3422.6M         29789014  4.2BSD   2048 16384    1 # /usr/local
    i:          5122.3M               63    NTFS
    j:          1848.7M         36798433  4.2BSD   2048 16384    1 # /usr/src
    k:          1848.7M         40584654  4.2BSD   2048 16384    1 # /usr/obj
    l:         17540.2M         44370875  4.2BSD   2048 16384    1 # /home
  Use (A)uto layout, (E)dit auto layout, or create (C)ustom layout? [a] <b>c</b>
</pre></td></tr></table>

<p>
Se tivéssemos apenas pequenas modificações a fazer, provavelmente
optaríamos por editar ("Edit") o layout personalizado em vez de começar
a partir de uma losa vazia, mas nós vamos fazer as coisas da forma
difícil.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  You will now create an OpenBSD disklabel inside the OpenBSD MBR
  partition. The disklabel defines how OpenBSD splits up the MBR partition
  into OpenBSD partitions in which filesystems and swap space are created.
  You must provide each filesystem's mountpoint in this program.

  The offsets used in the disklabel are ABSOLUTE, i.e. relative to the
  start of the disk, NOT the start of the OpenBSD MBR partition.

  Label editor (enter '?' for help at any prompt)
  > <b>p</b>
  OpenBSD area: 10490445-80293248; size: 69802803; free: 69802803
  #                size           offset  fstype [fsize bsize  cpg]
    c:         80293248                0  unused
    i:         10490382               63    NTFS
  >
</pre></td></tr></table>

<p>
Note que já existem duas partições -- a partição "c", que está sempre
lá e é criada para você, mas o disklabel(8) também noticiou a
existência da partição NTFS e atribuiu a ela uma partição disklabel,
assim ela pode ser acessada pelo OpenBSD (nota: no momento o suporte
a NTFS é experimental e requer um kernel personalizado, mas o suporte
a FAT/FAT32 é muito bom).

<p>
Agora vamos criar nossas partições.
Vamos começar com a partição "a", nossa partição raiz:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>a a</b>
  offset: [10490445] <b><i>Enter</i></b>
  size: [69802803] <b>100m</b>
  Rounding to cylinder: 208845
  FS type: [4.2BSD]  <b><i>Enter</i></b>
  mount point: [none] <b>/</b>
  >
</pre></td></tr></table>

<p>
Note que o disklabel deixou como padrão o primeiro setor disponível do
OpenBSD no disco, o qual é o que queremos.
Ele também deixou como padrão o tamanho ("size") de todo o espaço
disponível, o qual NÃO é o que queremos.
Aqui nós vamos cancelar aquele padrão com nosso tamanho predileto, o
qual pode ser especificado em setores, "M" ou "G".

<p>
Normalmente você quer utilizar o "FS type" padrão de "4.2BSD" para
uma partição FFS ("Fast File System") ou FFS2, embora os outros tipos,
como "swap" e "RAID", sejam úteis dependendo da ocasião.

<p>
E finalmente o ponto de montagem.
Nossa partição "a" é a partição raiz, por definição.

<p>
Agora nós criamos a swap, a qual é nossa partição 'b' (novamente,
esse é um requerimento -- 'b' no seu disco de inicialização é a
swap):

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>a b</b>
  offset: [10699290] <b><i>Enter</i></b>
  size: [69593958] <b>1g</b>
  Rounding to cylinder: 2104515
  FS type: [swap] <b><i>Enter</i></b>
  >
</pre></td></tr></table>

<p>
Novamente o disklabel calculou corretamente nosso setor de início,
e nos apresentou um tamanho sugerido de "todo o espaço restante",
que novamente nós cancelamos com nosso tamanho desejado.
Desde que essa é a partição 'b', o disklabel assume que ela foi
criada para ser utilizada para swap, e quando nós confirmamos isso
ele não nos pergunta sobre um ponto de montagem.

<p>
Agora estamos prontos para criar as partições restantes.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>a d</b>
  offset: [12803805] <b><i>Enter</i></b>
  size: [67489443] <b>2g</b>
  Rounding to cylinder: 4209030
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr</b>
  > <b>a e</b>
  offset: [17012835] <b><i>Enter</i></b>
  size: [63280413] <b>100m</b>
  Rounding to cylinder: 208845
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/tmp</b>
  > <b>a f</b>
  offset: [17221680] <b><i>Enter</i></b>
  size: [63071568] <b>2g</b>
  Rounding to cylinder: 4209030
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr/local</b>
  > <b>a g</b>
  offset: [21430710] <b><i>Enter</i></b>
  size: [58862538] <b>1g</b>
  Rounding to cylinder: 2104515
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr/X11R6</b>
  > <b>a h</b>
  offset: [23535225] <b><i>Enter</i></b>
  size: [56758023] <b>1g</b>
  Rounding to cylinder: 2104515
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/home</b>
  > <b>a j</b>
  offset: [25639740] <b><i>Enter</i></b>
  size: [54653508] <b>1g</b>
  Rounding to cylinder: 2104515
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/var</b>
  > <b>a k</b>
  offset: [27744255] <b><i>Enter</i></b>
  size: [52548993] <b><i>Enter</i></b>
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/var/www</b>
  >
</pre></td></tr></table>

<p>
Note que na partição <tt>/var/www</tt> ("k") nós aceitamos o padrão
de utilizar todo o espaço em disco restante disponível.
Com drives modernos monstruosamente gigantes, normalmente essa não
é uma boa ideia.
Se você sabe que nunca vai utilizar todo o espaço, não o aloque:
deixe-o a salvo para algum uso futuro.

<p>
Agora vamos dar uma olhada nos nossos resultados utilizando os
comandos "p" e "p m":

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>p</b>
  OpenBSD area: 10490445-80293248; size: 69802803; free: 0
  #                size           offset  fstype [fsize bsize  cpg]
    a:           208845         10490445  4.2BSD   2048 16384    1 # /
    b:          2104515         10699290    swap
    c:         80293248                0  unused
    d:          4209030         12803805  4.2BSD   2048 16384    1 # /usr
    e:           208845         17012835  4.2BSD   2048 16384    1 # /tmp
    f:          4209030         17221680  4.2BSD   2048 16384    1 # /usr/local
    g:          2104515         21430710  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          2104515         23535225  4.2BSD   2048 16384    1 # /home
    i:         10490382               63    NTFS
    j:          2104515         25639740  4.2BSD   2048 16384    1 # /var
    k:         52548993         27744255  4.2BSD   2048 16384    1 # /var/www
  > <b>p m</b>
  OpenBSD area: 10490445-80293248; size: 34083.4M; free: 0.0M
    #                size           offset  fstype [fsize bsize  cpg]
    a:           102.0M         10490445  4.2BSD   2048 16384    1 # /
    b:          1027.6M         10699290    swap
    c:         39205.7M                0  unused
    d:          2055.2M         12803805  4.2BSD   2048 16384    1 # /usr
    e:           102.0M         17012835  4.2BSD   2048 16384    1 # /tmp
    f:          2055.2M         17221680  4.2BSD   2048 16384    1 # /usr/local
    g:          1027.6M         21430710  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          1027.6M         23535225  4.2BSD   2048 16384    1 # /home
    i:          5122.3M               63    NTFS
    j:          1027.6M         25639740  4.2BSD   2048 16384    1 # /var
    k:         25658.7M         27744255  4.2BSD   2048 16384    1 # /var/www
  >
</pre></td></tr></table>

<p>
Igual ao fdisk, você não quer que as suas partições disklabel do
OpenBSD sobreponham-se (exceto a partição 'c', que, obviamente,
sobrepõe tudo).

<p>
Escreva suas mudanças e feche o disklabel:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>w</b>
  > <b>q</b>
  No label changes.
  newfs: reduced number of fragments per cylinder group from 13048 to 12992 to
  enlarge last cylinder group
  /dev/rwd0a: 102.0MB in 208844 sectors of 512 bytes
  5 cylinder groups of 25.38MB, 1624 blocks, 3328 inodes each
  /dev/rwd0h: 1027.6MB in 2104512 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  newfs: reduced number of fragments per cylinder group from 13048 to 12992 to
  enlarge last cylinder group
  /dev/rwd0e: 102.0MB in 208844 sectors of 512 bytes
  5 cylinder groups of 25.38MB, 1624 blocks, 3328 inodes each
  /dev/rwd0d: 2055.2MB in 4209028 sectors of 512 bytes
  11 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0g: 1027.6MB in 2104512 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0f: 2055.2MB in 4209028 sectors of 512 bytes
  11 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0j: 1027.6MB in 2104512 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0k: 25658.7MB in 52548992 sectors of 512 bytes
  127 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local)
  /dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0e on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0d on /mnt/usr type ffs (rw, asynchronous, local, nodev)
  /dev/wd0g on /mnt/usr/X11R6 type ffs (rw, asynchronous, local, nodev)
  /dev/wd0f on /mnt/usr/local type ffs (rw, asynchronous, local, nodev)
  /dev/wd0j on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0k on /mnt/var/www type ffs (rw, asynchronous, local, nodev, nosuid)

  Let's install the sets!
...
</pre></td></tr></table>

<p>
<a href="#BackMoredisklabel">(voltar para onde estávamos)</a>

<p>
<a name= "FilesNeeded"></a>
<h2>4.7 - Quais arquivos são necessários para a instalação?</h2>
<!-- XXXrelease -->

<p>
A instalação completa do OpenBSD é dividida em vários
<i>pacotes de arquivos</i> separados.
Nem todos os aplicativos necessitam de todos os pacotes de arquivos,
no entanto, é recomendado aos novos usuários instalar TODOS os
pacotes de arquivos.

Aqui você tem uma visão geral de cada um deles:
<p>
<ul>
  <li><b><i>bsd</i></b>		- Esse é o kernel. <b>Necessário</b>
  <li><b><i>bsd.mp</i></b>	- Kernel para os sistemas com
      múltiplos processadores (SMP) (somente para algumas plataformas).
  <li><b><i>bsd.rd</i></b> 	- <a href="#bsd.rd">Kernel de disco
      RAM</a>.
  <li><b><i>base47.tgz</i></b>	- Contém o sistema base do OpenBSD.
      <b>Necessário</b>
  <li><b><i>etc47.tgz</i></b>	- Contém todos os arquivos de /etc.
      <b>Necessário</b>
  <li><b><i>comp47.tgz</i></b>	- Contém o compilador e suas
      ferramentas, cabeçalhos e bibliotecas.
  <li><b><i>man47.tgz</i></b>    - Contém as páginas de manual.
  <li><b><i>misc47.tgz</i></b>   - Contém informações diversas,
      documentos sobre configuração.
  <li><b><i>game47.tgz</i></b>   - Contém jogos para o OpenBSD.
  <li><b><i>xbase47.tgz</i></b>  - Contém as bibliotecas e utilitários
      da base do X11.
  <li><b><i>xetc47.tgz</i></b>   - Contém os arquivos de configuração
      /etc/X11 e /etc/fonts.
  <li><b><i>xfont47.tgz</i></b>  - Contém o servidor de fontes do X11 e
      fontes.
  <li><b><i>xserv47.tgz</i></b>  - Contém os servidores X do X11.
  <li><b><i>xshare47.tgz</i></b> - Contém páginas de manual,
      definições de locale, arquivos de inclusão, etc. para o X.
</ul>

Os pacotes <b>etc47.tgz</b> e <b>xetc47.tgz</b> não são instalados
como parte de uma atualização de versão, somente como parte de uma
instalação completa, assim nenhuma personalização que você fez é
perdida. Você tem que atualizar manualmente seus diretórios
<tt>/etc</tt>, <tt>/dev</tt> e <tt>/var</tt>.

<a name="FilesNeededX"></a>
<h3>Por que tenho que instalar o X se eu não uso o modo gráfico?</h3>
Mesmo que você não tenha a intenção de executar o X, alguns
<a href="faq15.html">pacotes</a> de terceiros precisam que as
bibliotecas ou outros utilitários do X estejam instalados no
seu sistema.
Essa dependência pode ser facilmente resolvida instalando
apenas o xbase47.tgz; o resto do X nem sempre é necessário.
Muitas pessoas insistem em não instalar o X em seus sistemas,
sem ter uma razão válida:


<ul>
<li>Por si só, instalar o X não causa a execução de nenhum
    programa no sistema.
<li>Por si só, instalar o X em um sistema não influencia
    o risco de problemas externos de segurança.
<li>Se alguém já está DENTRO do seu sistema, ele pode instalar o que ele
    quiser, então a presença ou ausência do X não muda a situação.
<li>As únicas partes do X que estão em execução são as partes
    requeridas pelo seu aplicativo.
<li>O espaço exigido pelo X é relativamente pequeno para
    hardware moderno.
</ul>

As pessoas às vezes perdem um monte de tempo e esforços tentando
escolher partes do xbase47.tgz e usar somente os arquivos que elas
precisam para instalar algum aplicativo.
Isso não é somente sem sentido, como também é um esforço que tem que ser
repetido a cada ciclo de atualização de versão, o que significa que
provavelmente você não atualizará corretamente a versão do seu sistema,
criando problemas de segurança REAIS.

<p>
SE você precisa do X, simplesmente instale-o.
Isso não vai lhe causar nenhum prejuízo maior que o aplicativo
que necessita dele causaria.


<a name="FilesNeededComp"></a>
<h3>Eu não quero instalar os compiladores</h3>
Tudo bem, não instale, mas, por favor, não diga a você mesmo que isso
é por "razões de segurança".
Se um atacante está há muito tempo no seu sistema, ao ponto de que a
presença ou ausência do compilador é importante, ele mesmo pode
instalar o compilador.
Por outro lado, o pacote de arquivos compXX.tgz é relativamente grande
e tem um monte de arquivos, e assim pode levar um tempo na instalação
ou atualização de versão, e em sistemas lentos ou pequenos isso pode
ser relevante.

<p>
Se você decidir não instalar o compilador, você provavelmente vai
precisar de um outro sistema para manter e compilar software
atualizado.
Existem mais sistemas que foram comprometidos por causa de manutenção
inapropriada do que por causa de um compilador que foi instalado.

<p>
<a name="Partitioning"></a>
<h2> 4.8 - De que forma eu devo particionar meu disco?</h2>
<!-- XXXrelease -->

<p>
Obviamente, a resposta para essa pergunta varia com base no tipo de uso
pretendido para seu sistema.
O OpenBSD pode ser instalado em pequenos discos de 512M, mas instalar
em um dispositivo desse tamanho é tarefa para usuários avançados.
A menos que você tenha alguma experiência, um HD de 4G a 8G é um
ponto de partida recomendado.

<p>
Diferente de muitos outros SOs, o OpenBSD incentiva os usuários a
particionar o disco em várias partições em vez de apenas uma ou duas
partições grandes.
Existem várias razões para particionar o seu disco:

<ul>
<li><b>Segurança:</b> Você pode marcar alguns sistemas de arquivos como
    'nosuid', 'nodev', 'noexec', 'readonly', etc.
    Isso é feito para você pelo processo de instalação se você utilizar
    as partições recomendadas.
<li><b>Estabilidade:</b> Um usuário, ou um programa malcomportado, pode
    encher o sistema de arquivos com lixo se tiver permissões de escrita
    nele. Seus programas principais que, é claro, executam em uma
    partição diferente não serão interrompidos.
<li><b>Velocidade:</b> Um sistema de arquivos que é escrito muitas
    vezes pode começar a ficar muito fragmentado. (Felizmente, o sistema
    de arquivos ffs que o OpenBSD usa não tem tendência à
    fragmentação.)
<li><b>Integridade</b>: Se um sistema de arquivos se corromper por
    alguma razão, os seus outros sistemas de arquivos quase sempre
    continuarão em bom estado.
<li><b>Tamanho:</b> Muitas máquinas possuem limites de áreas no disco
    de onde a ROM pode carregar o kernel. Em alguns casos esse limite
    pode ser muito pequeno (504M para alguns 486 antigos), em outros
    casos um limite muito maior (por exemplo, 2G, 8G, ou 128G em
    sistemas i386).
    Enquanto o kernel pode terminar em qualquer lugar
    dentro da partição raiz, a partição raiz deve estar dentro dessa
    área. Para mais detalhes, veja
    <a href="faq14.html#LargeDrive">esta seção</a>.
    Um bom guia pode ser manter a sua partição / completamente abaixo de
    2G, a menos que você saiba que sua plataforma (e máquina em
    particular) pode manipular mais (ou menos) do que isso.
<li><b>Apenas para leitura:</b> Você pode montar partições que você
    nunca ou raramente utiliza para escrita como "apenas para leitura"
    ("Read-only") a maior parte do tempo.
    Isso elimina a necessidade da execução do fsck(8) após um travamento
    ou uma interrupção de energia, e pode ajudar a prevenir a alteração
    não-intencional de dados.
<li><b>fsck(8):</b> Partições muito grandes requerem mais memória RAM
    para executar o fsck(8), e em sistemas com pouca memória você pode
    acabar tendo que usar swap, o que resulta em uma execução demorada
    do fsck.
</ul>

Dado um espaço em disco suficiente, o instalador do OpenBSD cria
por padrão as seguintes partições:

<ul>
<li><b>/ - root:</b>
Além de ser onde os outros sistemas de arquivos são montados,
o sistema de arquivos raiz contém todos os arquivos necessários
para inicializar o OpenBSD.
Isso inclui o kernel, mais os utilitários básicos em <tt>/sbin</tt> e
<tt>/bin</tt>, os arquivos de configuração em <tt>/etc</tt> e o
diretório de dispositivos, <tt>/dev</tt>, que são todos utilizados
para colocar o sistema em funcionamento.
O sistema de arquivos raiz pode ter um tamanho pequeno de 60M, embora
um tamanho de 100M a 200M seja melhor para uma máquina que passará
por muitos ciclos de atualização de versão.
A partição 'a' do seu drive de inicialização torna-se a sua partição
raiz automaticamente.
ALGUMAS plataformas colocam restrições na localização física da
partição no disco (ou seja, deve estar no começo do disco) para
que a inicialização ocorra.

<li><b>Swap:</b>
Além de ser utilizada como swap, essa partição também é utilizada
para guardar descargas de memória após travamentos do sistema,
então é sugerido que o espaço de swap (se algum espaço for definido)
seja tão grande quanto a maior quantidade de memória RAM que você
costuma ter instalada na máquina.
Leia mais sobre isso na <a href="faq14.html#Swap">FAQ 14, Swap</a>.

<li><b>/tmp:</b>
Esse é um diretório que pode ser escrito por todo mundo e é usado
para armazenamento temporário (como o nome sugere!).
A maioria dos sistemas podem se manter com quantidades modestas de
armazenamento nessa partição, 50M muitas vezes é tudo que você vai
precisar, embora existam alguns aplicativos que utilizam muito, muito
mais.
Embora esse diretório possa ser escrito por todo mundo, quando ele
é uma partição separada o OpenBSD a monta como nodev e nosuid, que
minimiza as possibilidades desse diretório ser utilizado para abusar
do seu sistema.
Note que esse diretório é limpo na reinicialização, e arquivos
deixados intocados por 24 horas são removidos durante a noite.

<li><b>/var:</b>
Esse diretório e ponto de montagem é utilizado para um MONTE de
coisas e, dependendo da sua utilização, pode ser o primeiro candidato
a ser subdividido em mais partições.
Algumas das coisas que vêm para esse diretório (e os pontos de montagem
adicionais em potencial):
<ul>
  <li><tt>/var/log</tt>: Registros de dados do sistema.
  <li><tt>/var/mail</tt>: Caixas de entrada de correio eletrônico.
  <li><tt>/var/spool</tt>: Correio eletrônico de saída (e outras coisas)
  <li><tt>/var/www</tt>: O
      <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">servidor Web</a>
      do OpenBSD mora aqui.
  <li><tt>/var/tmp</tt>: Esse é um diretório de arquivos temporários
      "persistente", já que os arquivos colocados aqui NÃO são
      removidos na reinicialização.
      Por exemplo, o vi(1) utiliza esse diretório para armazenamento
      temporário, então se o seu computador trava ou é reinicializado
      enquanto você está editando um arquivo, os arquivos desse
      diretório podem ser utilizados para recuperar sua sessão de
      edição.
      Arquivos deixados nesse diretório por 24 horas, entretanto,
      serão removidos pelos scripts de limpeza,
      <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=daily&amp;sektion=8">daily(8)</a>,
      executados durante a noite.
  <li><tt>/var/crash</tt>: Se o sistema entra em pânico, ele tenta
      salvar uma descarga de memória na partição swap antes de
      reinicializar.
      Essa descarga de memória então é salva em <tt>/var/crash</tt>
      na reinicialização, dessa forma <tt>/var</tt> precisa ter tanto
      espaço livre quanto o sistema tem de memória RAM para que
      essa tarefa funcione automaticamente.
  </ul>

<li><b>/usr:</b>
Esse é o lugar onde encontra-se a maior parte do OpenBSD.
Binários de programas, bibliotecas, documentação, páginas de manual,
etc. estão todos localizados no diretório <tt>/usr</tt>.
Os arquivos nesse ponto de montagem praticamente não são alterados --
em muitos casos você pode montar facilmente a partição
<tt>/usr</tt> como apenas para leitura, sem efetuar nenhuma outra
mudança até a sua próxima atualização de versão ou atualização do
sistema.

<li><b>/usr/X11R6:</b>
Esse é o lugar onde encontra-se o sistema X Window.
Os binários do X, arquivos de fontes, bibliotecas, etc. estão todos
aqui.
A única parte do X que não está presente aqui são os
arquivos de configuração.

<li><b>/usr/local:</b>
Em uma instalação padrão do OpenBSD, esse ponto de montagem/diretório
está completamente vazio.
Ele é utilizado para abrigar os binários instalados localmente e os
binários dos aplicativos locais.

<li><b>/usr/src:</b>
Esse diretório guarda os arquivos de código fonte do sistema básico,
mas não o X nem os portes.
Esse diretório está vazio por padrão; você tem que enchê-lo, conforme
detalhado na
<a href="faq5.html#BldGetSrc">FAQ 5</a>.

<li><b>/usr/obj:</b>
Esse diretório é populado durante o processo de compilação com
arquivos objetos e binários.
Ter esse diretório em um ponto de montagem separado permite que ele
seja formatado em vez de arquivo por arquivo ser apagado, e isso pode
ser significantemente mais rápido.

<li><b>/home:</b>
Esse é o lugar para onde os arquivos dos usuários vão.
Ter esse diretório como uma partição separada torna fácil a
reinstalação completa do seu sistema; simplesmente não formate
essa partição durante a reinstalação.
</ul>

<p>
Algumas considerações adicionais sobre particionamento:
<ul>
 <li>Para sua primeira tentativa em um sistema experimental, uma grande
     partição <tt>/</tt> e a swap pode ser mais fácil se você não sabe
     de quanto espaço necessita. Fazendo isso você estará sacrificando
     algumas características de segurança do OpenBSD que requerem
     sistemas de arquivos separados para
     <tt>/, /tmp, /var, /usr</tt> e <tt>/home</tt>.
     Entretanto, você provavelmente não colocará sua primeira instalação
     como um sistema de produção.
 <li>Um sistema exposto à Internet, ou a outras forças hostis, deve
     ter um <tt>/var</tt> separado (e até mesmo um <tt>/var/log</tt>
     separado) para o sistema de registro.
 <li>Uma partição <tt>/home</tt> pode ser muito útil. Nova versão
     do sistema operacional? Limpe e reinstale tudo, deixando a sua
     partição <tt>/home</tt> intacta. Lembre-se de salvar uma cópia
     dos seus arquivos de configuração!
 <li>Uma partição separada para qualquer coisa que acumule grandes
     quantidades de arquivos que necessitam ser removidos: pode
     ser mais rápido formatar e recriar do que apagar os arquivos. Veja
     na FAQ <a href="faq5.html#ProbObjPt">Construção a partir do
     código fonte</a> um exemplo (<tt>/usr/obj</tt>).
 <li>Se você deseja reconstruir o seu sistema a partir do código fonte,
     por qualquer razão, o código fonte encontra-se em
     <tt>/usr/src</tt>. Se você não deseja criar uma partição separada
     para <tt>/usr/src</tt>, tenha certeza que <tt>/usr</tt> tem espaço
     suficiente.
 <li>Um fato geralmente esquecido: você <b>não</b> precisa alocar
     todo o espaço em disco quando você configura o sistema! Visto
     que agora você vai achar um desafio comprar um disco rígido novo
     menor que 100GB, pode fazer sentido deixar uma parte do seu disco
     desalocado. Se você mudar o tamanho de uma partição, você pode
     alocar uma nova partição a partir do seu espaço não utilizado,
     <a href="faq10.html#DupFS">duplicar</a> a partição existente para a
     nova partição, mudar o
     <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab</a>
     para apontar para a nova partição, remontar, e você terá mais
     espaço.
 <li>Se você fizer as suas partições muito próximas do tamanho mínimo
     requerido, provavelmente você lamentará mais tarde, quando for a
     hora de fazer a atualização de versão do seu sistema.
 <li>Se você fizer partições muito grandes, tenha em mente que sempre
     que for executar a verificação do sistema de arquivos utilizando o
     <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">fsck(8)</a>,
     ele irá requerer 1MB de RAM por gigabyte do sistema de arquivos,
     além de consumir muito tempo e às vezes ser impraticável em
     sistemas antigos e muito lentos
     (veja <a href="faq14.html#LargeDrive">esta seção</a>).
 <li>Se você permitir que usuários escrevam em <tt>/var/www</tt>
     (ou seja, páginas Web pessoais), você talvez deseje colocá-lo em
     uma partição separada, assim você pode usar
     <a href="faq10.html#Quotas">quotas</a> para restringir o espaço
     utilizado pelos usuários, e se a partição ficar cheia, nenhuma
     outra parte do seu sistema será comprometida.
 <li>Você talvez queira criar uma partição <tt>/altroot</tt>, como
     descrito em
     <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=daily&amp;sektion=8">daily(8)</a>.
     Isso pode fazer uma cópia diária da sua partição <tt>/</tt>,
     dando a você uma cópia extra do seu kernel e arquivos de
     configuração do diretório <tt>/etc</tt> se alguma coisa acontecer na
     sua partição raiz.
     Obviamente, a partição <tt>/altroot</tt> precisa ser tão grande
     quanto <tt>/</tt>.
     Se você tem um segundo disco rígido e algo duplicando o resto do seu
     disco, como
     <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&amp;sektion=4">raid(4)</a>
     baseado em software ou uma cópia periódica usando
     <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a
     >/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>,
     esse disco pode ser inicializado depois da remoção do disco primário.
 <li>Compilar alguns <a href="faq15.html#Ports">portes</a> a partir do
     código fonte pode consumir uma grande quantidade de espaço das suas
     partições <tt>/usr</tt> e <tt>/tmp</tt>.
     Essa é outra razão pela qual aconselhamos que você utilize
     <a href="faq15.html#PkgMgmt">pacotes pré-compilados</a>.
 <li>Alguns poucos editores utilizam <tt>/var/tmp</tt> como espaço de
     partida, e esse diretório precisa ser tão grande ou maior que o
     enorme arquivo que você editar.
     Se você planeja editar arquivos de 500M, sua partição
     <tt>/var</tt> ou <tt>/var/tmp</tt> precisa ser maior do que você
     provavelmente tinha planejado.
</ul>


<p>
<a name= "Multibooting"></a>
<h2>4.9 - Inicialização múltipla com OpenBSD</h2>

Inicialização múltipla é ter diversos sistemas operacionais em um só
computador e meios de selecionar qual SO é para inicializar. Isso
<i>não</i> é uma tarefa trivial! Se você não compreender o que está
fazendo, você pode acabar apagando grandes quantidades de dados do seu
computador. Novos usuários do OpenBSD são <i>fortemente</i>
incentivados a começar em uma máquina dedicada, com um disco rígido sem
dados, e então praticar as suas configurações em um sistema de testes
antes de se aventurar em uma configuração de inicialização múltipla em
uma máquina de produção. A <a href="faq14.html">FAQ 14</a> possui mais
informações sobre o processo de inicialização do OpenBSD.

<p>
De preferência use uma das quatro partições MBR <i>primárias</i> para
inicializar o OpenBSD (ou seja, partições estendidas podem não funcionam).

<p>
Note que o Windows 7 e o Vista podem redimensionar as partições do sistema:
vai em Painel de Controle, procure por "partição", entre na ferramenta
do sistema correspondente.
Clique com o botão direito em uma partição, e você vai notar que você pode reduzir.
Sua principal limitação é que o "Windows Exchange File" não pode ser movido,
logo, se você precisar de mais espaço, talvez terá que mover/desativar ele.

<p>
Estas são as diversas opções de inicialização múltipla:

<h3>Marcar a partição ativa</h3>
Esta é provavelmente a mais negligenciada e, às vezes, a melhor
solução para inicialização múltipla. Simplesmente utilize o SO onde você
está atualmente para marcar a partição, que você quer inicializar por
padrão na próxima inicialização, como ativa.
Praticamente todos os SOs oferecem um programa
para fazer isso; o do OpenBSD é o
<a href="faq14.html#fdisk">fdisk(8)</a>, programas com nomes similares
existem para sistemas Windows 9x e DOS e para muitos outros sistemas
operacionais. Isso pode ser altamente desejável para SOs que levam muito
tempo para desligar ou reinicializar -- você pode marcar e dar início
ao processo de reinicialização, e então sair de perto, pegar um copo de
café, voltar e ver o sistema inicializado do jeito que você queria --
sem ter que esperar pelo Momento Mágico de selecionar o próximo SO.

<h3>Disquete de inicialização</h3>
Se você possui um sistema onde não usa frequentemente o OpenBSD
(ou não deseja que usuários deste computador notem qualquer alteração),
considere a utilização de um disquete de inicialização. Simplesmente
use um dos
<a href="#MkFlop">disquetes de instalação padrão do OpenBSD</a>
e crie o arquivo <tt>/etc/boot.conf</tt> (sim, você também tem que
criar o diretório <tt>/etc</tt> no seu disquete) com o conteúdo:

<pre>
	 boot hd0a:/bsd
</pre>

para fazer com que o sistema inicialize a partir do disco rígido 0,
partição OpenBSD 'a', arquivo de kernel <tt>/bsd</tt>. Note que você
também pode inicializar a partir de outros discos rígidos, com uma linha
como: "<tt>boot hd2a:/bsd</tt>", para inicializar a partir do terceiro
disco rígido do seu sistema. Para inicializar o OpenBSD, coloque seu
disquete dentro do drive e reinicialize a máquina. Para inicializar
outro SO, retire o disquete do drive e reinicialize.
(Você também pode, obviamente, usar esse disquete para criar um
CD inicializável.)

<p>
O programa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>
é carregado a partir do disquete e procura e lê o arquivo
<tt>/etc/boot.conf</tt>. A linha contendo "<tt>boot hd0a:/bsd</tt>"
instrui o boot(8) a partir de onde ele deve carregar o kernel -- nesse
caso, o primeiro HD que o BIOS vê. Mantenha em mente que somente um
pequeno arquivo (<tt>/boot</tt>) é carregado a partir do disquete -- o
sistema carrega o kernel do disco rígido, adicionando somente 5 segundos
ao processo de inicialização.

<h3>Windows NT/2000/XP NTLDR</h3>

Para inicialização múltipla entre OpenBSD e Windows NT/2000/XP, você
pode usar NTLDR, o carregador de inicialização que o NT usa. Para
inicialização múltipla com NT, você precisa ter uma cópia do seu
Registro de Inicialização de Partição (PBR - "Partition Boot Record")
do OpenBSD. Depois de executar o "installboot", você pode copiar o
arquivo usando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd(1)</a>
e seguir um procedimento similar ao seguinte:

<pre>
	# <strong>dd if=/dev/rsd0a of=openbsd.pbr bs=512 count=1</strong>
</pre>

Nota: Este é um bom momento para lembrá-lo para não digitar comandos
cegamente (sem saber o que eles fazem). O comando acima não funciona
diretamente em muitos computadores, ficando para o leitor a tarefa de
adaptá-lo a sua máquina.

<p>
Agora inicialize o NT e coloque o <tt>openbsd.pbr</tt> em C:. Adicione
uma linha como esta no fim de <tt>C:\BOOT.INI</tt>:

<pre>
	c:\openbsd.pbr="OpenBSD"
</pre>

<p>
Quando você reinicializar, você pode selecionar o OpenBSD a partir do
menu do carregador do NT.
Há muito mais informação disponível sobre NTLDR em
<a href="http://www.tburke.net/info/ntldr/ntldr_hacking_guide.htm">
"NTLDR Hacking Guide"</a>.

<p>
No Windows XP, você pode editar as informações de inicialização usando
uma interface gráfica (GUI); consulte o
<a href="http://support.microsoft.com/default.aspx?scid=kb;en-us;289022">
"XP Boot.ini HOWTO"</a>.

<p>
Programas que fazem uma grande parte desse trabalho estão disponíveis,
por exemplo, o
<a href="http://www.winimage.com/bootpart.htm">BootPart</a>.
Esse programa pode ser executado no Windows NT/2000/XP. Ele busca o
PBR do OpenBSD, coloca-o na sua partição do NT/2000/XP e adiciona-o
no <tt>C:\BOOT.INI</tt>.

<p>
Nota: O carregador de inicialização do Windows NT/2000/XP só é capaz
inicializar sistemas operacionais que se encontram no primeiro disco
rígido. Você não pode usar o carregador de inicialização do Windows para
carregar o OpenBSD a partir de um disco secundário.

<h3>Windows Vista</h3>

<p>
Com o Vista, a Microsoft descartou o suporte ao NTLDR em favor de seu
mais novo armazenamento "Boot Configuration Data" (BCD), utilizado para
controlar o ambiente de inicialização. Já que o <tt>BOOT.INI</tt> não
está mais disponível para personalização, um utilitário de linha de
comando, <tt>bcdedit</tt>, tomou seu lugar.

<p>
Uma vez que o PBR do OpenBSD está copiado na partição do sistema Vista,
os três comandos seguintes são requeridos para selecionar e inicializar
o OpenBSD quando o sistema é reiniciado:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /create /d "OpenBSD/i386 4.7" /application bootsector
The entry {05a763ce-d81b-11db-b3ec-000000000000} was successfully created.

C:\Windows\System32>
</pre></blockquote>

<p>
O GUID retornado aqui, <tt>05a763ce-d81b-11db-b3ec-000000000000</tt>,
é mostrado por razões ilustrativas. Tome nota do GUID mostrado quando
você executa esse comando, já que esse valor precisa ser copiado nos
comandos seguintes. Copiar o GUID mostrado acima simplesmente não
vai funcionar.

<p>
Os dois comandos seguintes também são requeridos:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /set {05a763ce-d81b-11db-b3ec-000000000000} device boot
The operation completed successfully.

C:\Windows\system32> bcdedit /set {05a763ce-d81b-11db-b3ec-000000000000} path \openbsd.pbr
The operation completed successfully.

C:\Windows\system32>
</pre></blockquote>

<p>Isso deve ser executado em um shell com privilégios administrativos.
Quanto tiver localizado cmd.exe, clique com botão direito e selecione "Executar como Administrador".

<p>
Note o nome do caminho absoluto do arquivo PBR importado. Não adicione
uma letra de drive, pois é assumido que o arquivo foi colocado na
partição do sistema.
<tt>bcdedit</tt> não queixa-se de uma especificação explícita de drive,
mas o gerenciador de inicialização vai recusar-se a seguir adiante
dizendo que ele não pôde resolver o nome de caminho designado.

<p>
Após a reinicialização, o Vista é listado por primeiro no gerenciador
de inicialização, seguido do OpenBSD. Selecionar uma das duas entradas
inicializa o sistema operacional correspondente.

Se não acontecer nada, olhe no painel de controle para obter informações de boot.
Provavelmente, o seu boot do Windows não está configurado um timeout para selecionar o sistema,
fazendo com que não apareça o menu de inicialização.
Você também pode usar esse menu para iniciar o OpenBSD por padrão.

<p>
Para mais informações, consulte a ajuda do <tt>bcdedit</tt> digitando:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /?
</pre></blockquote>

<p>
ou pesquisando na documentação e no sítio Web da Microsoft. Uma boa
introdução pode ser encontrada neste artigo
"<a href="http://technet.microsoft.com/en-us/library/cc721886%28WS.10%29.aspx">
Frequently Asked Questions</a>", no TechNet.

<p>
Para aqueles que acham a configuração manual assustadora, o
<a href="http://neosmart.net/dl.php?id=1">EasyBCD</a> fornece uma
alternativa em GUI.

<h3>Windows 7</h3>

<p>
A Microsoft tem aperfeiçoado o BCD desde o lançamento do Vista para
permitir que múltiplas versões do Windows sejam inicializadas através do
<tt>bcdedit</tt>. Por causa desse maior controle, cinco comandos são
requeridos para configurar um ambiente de inicialização múltipla com o
OpenBSD.

<p>
Depois de copiar o PBR do OpenBSD na partição do sistema do Windows 7,
digite o seguinte comando para inicializar o registro necessário:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /create /d "OpenBSD/i386 4.7" /application bootsector
The entry {0154a872-3d41-11de-bd67-a7060316bbb1} was successfully created.

C:\Windows\system32>
</pre></blockquote>

<p>
Como avisado antes, o GUID
<tt>{0154a872-3d41-11de-bd67-a7060316bbb1}</tt>
é dependente de sistema. Anote o valor que você recebeu ao executar o
comando e copie-o nos comandos seguintes:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /set {0154a872-3d41-11de-bd67-a7060316bbb1} device boot
The operation completed successfully.

C:\Windows\system32> bcdedit /set {0154a872-3d41-11de-bd67-a7060316bbb1} path \openbsd.pbr
The operation completed successfully.

C:\Windows\system32> bcdedit /set {0154a872-3d41-11de-bd67-a7060316bbb1} device partition=c:
The operation completed successfully.

C:\Windows\system32> bcdedit /displayorder {0154a872-3d41-11de-bd67-7060316bbb1} /addlast
The operation completed successfully.

C:\Windows\system32>
</pre></blockquote>

<h3>Outros carregadores de inicialização</h3>

<p>
Alguns carregadores de inicialização que os usuários do OpenBSD usam com
sucesso são: <a href="http://gag.sourceforge.net/">GAG</a>,
<a href="http://www.ranish.com/part/">The Ranish Partition Manager</a>,
<a href="http://refit.sourceforge.net/">rEFIt</a>
e o <a href="http://www.gnu.org/software/grub/">GRUB</a>.

<p>
<h3>OpenBSD e Linux (i386)</h3>
<!-- XXXversion -->

<p>
Por favor, consulte
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.7/i386/INSTALL.linux">INSTALL.linux</a>,
que possui instruções sobre como fazer o OpenBSD funcionar com Linux.

<h3>Problemas com o fuso horário</h3>
O OpenBSD espera que o relógio em tempo real do computador esteja
configurado para UTC ("Universal Coordinated Time", ou Tempo Universal
Coordenado).
Outros sistemas operacionais esperam que o relógio esteja
configurado para o horário local.
Isso pode ser um grande problema se você estiver usando ambos os
sistemas no mesmo computador.
Um dos sistemas precisará ser adaptado.
Mais informações sobre como fazer isso estão na
<a href="faq8.html#TimeZone">FAQ 8 - Por que meu relógio está atrasado
várias horas?</a>

<a name= "SendDmesg"></a>
<h2>4.10 - Como enviar o seu dmesg para dmesg@openbsd.org depois da
instalação</h2>

<p>
Apenas para lembrar, é importante para os desenvolvedores do OpenBSD
saber qual hardware funciona, e qual não funciona perfeitamente,
incluindo os sensores de hardware que são encontrados em máquinas.

<p>
Uma citação de /usr/src/etc/root/root.mail
<blockquote><pre>
If you wish to ensure that OpenBSD runs better on your machines, please do us
a favor (after you have your mail system configured!) and type something like:
 # (dmesg; sysctl hw.sensors) | \
        mail -s "Sony VAIO 505R laptop, apm works OK" dmesg@openbsd.org

so that we can see what kinds of configurations people are running.  As shown,
including a bit of information about your machine in the subject or the body
can help us even further.  We will use this information to improve device driver
support in future releases.  (Please do this using the supplied GENERIC kernel,
not for a custom compiled kernel, unless you're unable to boot the GENERIC
kernel.  If you have a multi-processor machine, dmesg results of both GENERIC.MP
and GENERIC kernels are appreciated.)  The device driver information we get from
this helps us fix existing drivers. Thank you!
</pre></blockquote>

<p>
Certifique-se de enviar a mensagem de correio eletrônico a partir de uma
conta que esteja habilitada para receber mensagens dos desenvolvedores,
para que eles possam entrar em contato se tiverem algo que queiram
testar ou mudar, a fim de tornar funcional no OpenBSD.
Não é importante enviar a mensagem a partir da mesma máquina que está
executando o OpenBSD; se essa máquina for incapaz de receber a mensagem,
basta executar

<pre>
$ (dmesg; sysctl hw.sensors) | mail your-account@yourmail.dom
</pre>
E então encaminhar a mensagem para
<pre>
 dmesg@openbsd.org
</pre>
onde <tt>your-account@yourmail.dom</tt> é a sua conta de correio
eletrônico.

<p>
<b>NOTAS</b>

<ul>
<li>Por favor, só mande o dmesg do kernel GENERIC.
    Kernels personalizados, que possuem drivers de dispositivos
    removidos, não são úteis.
<li>Se você possui um sistema multiprocessado e usa o kernel
    GENERIC.MP, é muito importante para os desenvolvedores verem a saída
    do seu dmesg, tanto do kernel GENERIC quanto do kernel GENERIC.MP,
    então por favor, mande ambos em mensagens separadas.
<li>Os dmesgs são recebidos por uma máquina que usa
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd</a>
    para rejeitar spams. Isso faz com que a sua mensagem não seja
    recebida por um período de tempo. Tenha paciência, depois de meia
    hora ou até uma hora nós a receberemos.
</ul>

<p>
O método acima é bastante simples, mas se você não configurou o seu
sistema de correio eletrônico no OpenBSD, você pode salvar a sua saída
do dmesg em um arquivo de texto e mandar para os desenvolvedores do
OpenBSD.

<pre>
$ (dmesg; sysctl hw.sensors) > ~/dmesg.txt
</pre>

Então transfira o arquivo (usando FTP/scp/disquete/pombo-correio/...)
para o sistema que você normalmente usa para correio eletrônico. Como a
saída do dmesg que você envia é processada automaticamente, tenha
certeza de verificar os seguintes itens quando usar clientes/sistemas
de correio eletrônico alternativos.
<ul>
<li>Configure o seu correio eletrônico para enviar mensagens somente em
    texto plano; não use HTML na formatação da sua mensagem.
<li>Desabilite qualquer função de quebra de linha.
    Muitos clientes de correio eletrônico são configurados para inserir
    quebra de linha quando chegam na coluna 72 (a norma para listas
    de discussão).
<li>Tenha certeza de que seu cliente de correio eletrônico não reformata
    a mensagem.
<li>Não mande a saída do seu dmesg em anexo.
    Coloque a saída do seu dmesg no corpo da mensagem.
</ul>


<a name="AddFileSet"></a>
<h2>4.11 - Como adicionar um pacote de arquivos após a instalação</h2>
<!-- XXXversion -->
"Oh não! Eu esqueci de adicionar um pacote de arquivos durante a
instalação!"
<p>
Às vezes você acha que necessita realmente só de <tt>comp47.tgz</tt>
(ou algum outro componente do sistema) após a instalação, você então
verifica que necessita de outros pacotes de arquivos. Boa notícia: há
duas maneiras fáceis de instalar pacotes de arquivos após a instalação
inicial:

<h3>Usar o processo de atualização de versão</h3>
Simplesmente inicialize com uma mídia de instalação (CD-ROM ou Disquete)
e escolha "Upgrade" (em vez de "Install"). Quando você ver a lista de
pacotes de arquivos para instalação, escolha somente os pacotes de
arquivos que você não escolheu na primeira instalação, selecione a
fonte, e então deixe eles serem instalados para você.

<h3>Usar o tar(1)</h3>
Os pacotes de arquivos de instalação são simples arquivos tar, e você
pode expandí-los manualmente a partir da raiz do sistema de arquivos:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # cd /
  # tar xzvphf comp47.tgz
</pre></td></tr></table>

<p>
Não se esqueça da opção <tt>'p'</tt> no comando acima, a fim de
restaurar corretamente as permissões dos arquivos!
<p>
Um erro comum é pensar que você pode usar o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>
para adicionar pacotes de arquivos não instalados. Isso não funciona.
pkg_add(1) é a
<a href="faq15.html#PkgMgmt">ferramenta de gerenciamento de pacotes</a>
para instalar software de terceiros. Essa ferramenta manipula arquivos
de pacotes, não arquivos tar genéricos como os pacotes de instalação.

<p>
Se você está instalando o pacote de arquivos <tt>xbase</tt> pela
primeira vez no seu sistema, usando o tar(1) e sem reinicializar, o
cache de bibliotecas compartilhadas precisa ser atualizado usando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldconfig&amp;sektion=8"
>ldconfig(8)</a>
após a instalação.
Para adicionar todas as bibliotecas do X no cache:

<blockquote><pre>
# <b>ldconfig -m /usr/X11R6/lib</b>
</pre></blockquote>

Alternativamente, você pode apenas reinicializar seu sistema, e isso
será feito automaticamente pelo script de inicialização
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8"
>rc(8)</a>.

<a name="bsd.rd"></a>
<h2>4.12 - O que é 'bsd.rd'?</h2>

<b><tt>bsd.rd</tt></b> é um "Disco de RAM" do kernel. Esse arquivo é
muito útil; muitos desenvolvedores têm cuidados para mantê-lo sempre
na raiz dos seus sistemas.

<p>
Chamá-lo de "disco de RAM do kernel" descreve o sistema de arquivos raiz
do kernel -- ao contrário de um disco físico, os utilitários disponíveis
depois da inicialização do <tt>bsd.rd</tt> são armazenados no kernel e
são executados a partir de um sistema de arquivos baseado em RAM.
<tt>bsd.rd</tt> também inclui um conjunto de utilitários para que você
faça a manutenção e a instalação do seu sistema.

<p>
Em algumas plataformas, <tt>bsd.rd</tt> é realmente a técnica
preferida para instalação -- você coloca esse kernel em um sistema
de arquivos existente, inicializa-o e executa a instalação a partir
dele. Na maioria das plataformas, se você está executando uma versão
antiga do OpenBSD, você pode pegar por FTP uma versão nova de
<tt>bsd.rd</tt>, reinicializar a máquina com ele e instalar uma nova
versão do OpenBSD sem usar uma mídia removível para isso.

<p>
Aqui está um exemplo de inicialização com <tt>bsd.rd</tt> em um sistema
i386:

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Using Drive: 0 Partition: 3
  reading boot.....
  probing: pc0 com0 com1 apm mem[639k 255M a20=on]
  disk: fd0 hd0+
  &gt;&gt; OpenBSD/i386 BOOT 3.02
  boot&gt; <b>boot hd0a:/bsd.rd</b>
<i>. . . inicialização normal para a instalação . . .</i>
</pre></td></tr></table>

Como indicado, você será levado ao programa de instalação, mas você
também pode executar um shell para fazer a manutenção do seu sistema.
<p>
A regra geral para inicializar com <tt>bsd.rd</tt> é mudar o seu kernel
de <tt>/bsd</tt> para <tt>bsd.rd</tt> através dos meios usados em sua
plataforma.

<a name="InstProb"></a>
<h2>4.13 - Problemas comuns de instalação</h2>

<a name="cpq16m"></a>
<h3>4.13.1 - Meu Compaq só reconhece 16M RAM</h3>
<i>Alguns</i> sistemas Compaq possuem um problema onde toda a RAM do
sistema não é detectada corretamente pelo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">
carregador de inicialização de segundo estágio do OpenBSD</a>, e somente
16M são detectados e utilizados pelo OpenBSD. Isso pode ser corrigido
pela criação/edição do arquivo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8&amp;arch=i386"><tt>/etc/boot.conf</tt></a>,
ou especificando comandos depois de "<tt>boot></tt>", antes que
o OpenBSD seja carregado. Se você possui uma máquina com 64M de RAM,
mas o OpenBSD só reconhece os primeiros 16M, o comando que você usaria
seria:

<pre>
	 machine mem +0x3000000@0x1000000
</pre>
Para adicionar 48M (<tt>0x3000000</tt>) após os primeiros 16M
(<tt>0x1000000</tt>). Tipicamente, se você tivesse uma máquina com esse
problema, você primeiramente especificaria o comando acima no prompt
<tt>boot></tt> no momento da instalação por disquete/CD-ROM, carregaria
o sistema, reinicializaria e criaria o arquivo <tt>/etc/boot.conf</tt>
com a linha de comando acima, para que nas próximas inicializações toda
a memória RAM disponível fosse reconhecida.

<p>
Sabe-se também que uma atualização da ROM soluciona esse problema em
<i>alguns</i> sistemas.

<a name="noboot"></a>
<h3>4.13.2 - Meu i386 não inicializa após a instalação</h3>
Sua instalação parece ter ocorrido perfeitamente, mas na primeira
inicialização você não vê nem sinal do OpenBSD. Há algumas razões
comuns para esse problema:

<ul>
<li><b>Nenhuma partição foi marcada como ativa no fdisk(8).</b>
    Para solucionar esse problema, reinicialize a sua máquina, usando um
    disquete de inicialização ou outra mídia, e "marque" a partição como
    "ativa" (inicializável).
    Veja <a href="faq14.html#fdisk">aqui</a> e
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">aqui</a>.

<li><b>Nenhum carregador de inicialização válido foi colocado no
    disco.</b>
    Se você digitou "Enter" ou respondeu "w" para a questão
    "Use (W)hole disk or (E)dit the MBR?" durante a instalação, ou usou
    a opção "<tt>reinit</tt>" do fdisk(8), o registro de inicialização
    do OpenBSD foi instalado no Registro de Inicialização Mestre
    do disco; caso contrário, o código de inicialização mestre está
    intocado. Isso é um problema se nenhum outro registro de
    inicialização existir. Uma solução é inicializar outra vez com a
    mídia de instalação, entrar em um prompt do shell e executar o
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
    para atualizar o código MBR a partir da linha de comando:
<pre>
    # fdisk -u wd0
</pre>
    Nota: a opção "update" do modo interativo ("-e") do fdisk não
    escreve os bytes de assinatura requeridos para tornar o disco
    inicializável.

<li><b> Em algumas raras ocasiões, algo pode dar errado na instalação
    do carregador de inicialização de segundo estágio.</b>
    A reinstalação do carregador de inicialização de segundo estágio
    é discutida <a href="faq14.html#InstBoot">aqui</a>.
</ul>

<a name="sshhang"></a>
<h3>4.13.3 - Minha (velha e lenta) máquina inicializa, mas para no
procedimento de ssh-keygen</h3>
É provável que a sua máquina esteja funcionando muito bem, mas está
levando algum tempo para realizar o processo de geração de chaves do
ssh. Uma SPARCStation2 ou um Macintosh Quadra pode levar
<i>várias horas</i> para terminar os três passos do
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;sektion=1">ssh-keygen(1)</a>.
Deixe-o terminar; isso só é feito uma vez por instalação.

<p>
Note que o tamanho padrão da chave cresceu no OpenBSD 3.8, então os
tempos de geração estão mais demorados do que costumavam ser.
Usuários de máquinas lentas talvez queiram gerar suas chaves em outro
computador, e então colocá-las em um arquivo
<a href="#site">site47.tgz</a> e instalá-las com o resto do sistema.


<a name="noftplist"></a>
<h3>4.13.4 - Eu recebi a mensagem "Failed to change directory" enquanto
fazia a instalação</h3>

Ao fazer uma instalação FTP de uma
<a href="faq5.html#Flavors">snapshot</a> durante o estágio <i>-beta</i>
de desenvolvimento do OpenBSD, você pode ver isto:

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>

  Display the list of known ftp servers? [no] <b>yes</b>
  Getting the list from 192.128.5.191 (ftp.openbsd.org)... FAILED
  Failed to change directory.
  Server IP address or hostname?
</pre></td></tr></table>

Isso é normal e esperado durante o ciclo de pré-liberação. O programa
de instalação procura pela lista de FTP no servidor FTP primário
em um diretório que ainda não está disponível antes da
<a href="faq1.html#Next">data de liberação</a>, então você recebe
a mensagem acima.

<p>
Simplesmente use uma
<a href="../../ftp.html">lista de espelhos FTP</a>
para encontrar o seu espelho favorito, e especifique manualmente o nome
quando for preciso.

<p>
<b>Nota: Você não deve ver isso se estiver instalando uma versão
<i>-release</i> ou a partir de um CD-ROM.</b>

<a name="blankfdisk"></a>
<h3>4.13.5 - Minha tabela de partições do fdisk está corrompida ou
vazia!</h3>
Ocasionalmente, o usuário consegue um sistema que funciona, mas
quando executa <tt>fdisk wd0</tt> ele vê uma tabela de partições
completamente vazia (ou, algumas vezes, bagunçada). Isso geralmente é
causado por ter sido criada uma partição no
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
com um offset de zero setores, ao invés de <a href="#trackoffset">um
offset com uma trilha</a> (nota: é assumida aqui uma plataforma
<a href="../../i386.html">i386</a> ou
<a href="../../amd64.html">amd64</a>.
Outras plataformas requerem tamanhos diferentes de offset, e algumas
NÃO precisam de offset).
O sistema então <a href="faq14.html#Boot386">inicializa</a> usando o
PBR, e não o MBR.

<p>
Ao passo que essa configuração pode funcionar, ela pode também ser um
problema durante manutenções, devendo ser consertada.
Para consertar isso, o sistema de arquivos do disco deve geralmente
ser recriado do zero (no entanto, se você REALMENTE sabe o que está
fazendo, você pode apenas recriar o rótulo de disco (disklabel) e o MBR,
e apenas perder e ter que reconstruir a primeira partição OpenBSD no
disco).

<a name="noflopcd"></a>
<h3>4.13.6 - Eu não tenho um drive de disquete ou CD-ROM na minha
máquina</h3>
Algumas pessoas talvez queiram executar o OpenBSD em computadores que
não possuem nenhum jeito óbvio de instalar o OpenBSD, sem unidade de disquete ou CD-ROM.
Ou a máquina foi projetada sem ele (Por exemplo, muitos laptops e máquinas baseadas em "flash",
como sistemas Soekris e ALIX), ou os dispositivos de inicialização falharam ou foram
removidos, e seria difícil de substituir.
Estas são algumas dicas e técnicas que você pode usar para instalar o
OpenBSD nesses sistemas.
<ul>
<li>Inicialização pela rede, usando <a href="faq6.html#PXE">PXE</a>
    (i386 ou amd64) ou
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&amp;sektion=8">diskless(8)</a>
    (outras plataformas).

<li>Drive USB de disquete ou CD-ROM externo, se a sua máquina pode
    inicializar a partir de um.

<li>Disco rígido ou disco Flash USB, se a sua máquina pode, novamente,
    inicializar a partir de um dispositivo USB.
    Prepare o dispositivo em outro computador, como descrito em
    <a href="faq14.html#flashmemLive">FAQ 14</a>.
    Inicialize a partir dele, mas escolha o kernel bsd.rd, e então
    instale como de hábito.
    Você também pode colocar, previamente, os pacotes de arquivos na
    mídia flash.

<li>Em último caso, se nenhuma das coisas acima é adequada, você pode
    retirar o disco do sistema de destino, usar adaptadores disponíveis
    para instalar em um computador "normal", instalar o OpenBSD, e então
    colocar o disco de volta no sistema de destino.
    O OpenBSD então inicializa na máquina de destino, embora você
    tenha que, possivelmente, ajustar a configuração de rede.

    Talze você tenha que ajustar <tt>/etc/fstab</tt>, se você (por exemplo)
    fez a instalação usando um adaptador USB->IDE/SATA ou caminho diferente
    ou se a máquina usa
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4">ahci(4)</a>
    e as outras não.

    IDE e alguns discos SATA será normalmente reconhecido como dispositivos
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wd&sektion=4">wd(4)</a>,
    mas, se ligado a um adaptador USB, vai aparecer como
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sd&sektion=4">sd(4)</a>.
    Um disco SATA ligado a uma interface
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&sektion=4">pciide(4)</a>
    surgirá como wd(4), mas ligado a uma interface
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4">ahci(4)</a>,
    vai aparecer como um dispositivo sd(4).
    No entanto, se você corrigir o <tt>/etc/fstab</tt>, o sistema irá iniciar sem problemas.

</ul>

Em todos os casos, lembre-se que a máquina tinha um SO instalado nela
antes, e normalmente foi pensado para que o SO pudesse ser instalado
novamente.
Como isso foi originalmente pensado para ser feito irá, frequentemente,
fornecer a você uma boa ideia sobre como você pode instalar o OpenBSD.


<a name="site"></a>
<h2>4.14 - Personalização do processo de instalação</h2>
<!-- XXXversion -->

<h3>arquivo <tt>siteXX.tgz</tt></h3>
Os scripts de instalação/atualização de versão do OpenBSD permitem a
seleção de um pacote de arquivos criado pelo usuário, chamado
"<tt>siteXX.tgz</tt>", onde XX é a versão (por exemplo, 47). O arquivo
<tt>siteXX.tgz</tt> é, como os outros
<a href="#FilesNeeded">pacotes de arquivos</a>,
comprimido com
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&amp;sektion=1">gzip(1)</a>
e
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>,
com a raiz em '/', e descomprimido como qualquer outro
pacote de arquivos com as opções <tt>xzphf</tt>. Esse pacote de
arquivos é instalado por último, depois de todos os outros pacotes de
arquivos.

<p>
Esse pacote de arquivos habilita o usuário a adicionar e/ou sobrescrever
arquivos instalados nos pacotes 'normais' e, assim, personalizar a
instalação ou a atualização de versão.

<p>
Você também pode criar e utilizar pacotes de instalação específicos para
cada máquina, nomeados como <tt>siteXX-<i>&lt;hostname&gt;.tgz</i></tt>;
"<tt>site47-puffy.tgz</tt>", por exemplo.
Isso possibilita instalações personalizadas, atualizações de versão, ou
recuperação do sistema.

<p>
Alguns exemplos de uso de um arquivo <tt>siteXX.tgz</tt>:
<ul>
<li>Crie um arquivo siteXX.tgz que contenha todas as mudanças que
    você fez desde a primeira instalação do OpenBSD. Então, se você
    tiver que recriar o sistema, simplesmente selecione o arquivo
    siteXX.tgz durante a reinstalação e todas as suas mudanças serão
    replicadas no novo sistema.

<li>Crie uma série de diretórios específicos para cada máquina, cada
    um com um arquivo siteXX.tgz que contenha arquivos específicos para
    cada uma delas. A instalação (por exemplo, máquinas com diferentes
    placas de vídeo) de uma categoria pode ser feita selecionando o
    arquivo siteXX.tgz apropriado.

<li>Coloque os arquivos que você personaliza rotineiramente em um mesmo
    siteXX.tgz -- arquivos
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8"><tt>/etc/skel</tt></a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5"><tt>/etc/pf.conf</tt></a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8"><tt>/var/www/conf/httpd.conf</tt></a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf.local&amp;sektion=8"><tt>/etc/rc.conf.local</tt></a>,
    etc.
</ul>

<h3><tt>Scripts install.site</tt>/<tt>upgrade.site</tt></h3>
Como último passo no processo de instalação/atualização de versão, o
script procura no diretório raiz do sistema recém-instalado/atualizado
por <tt>install.site</tt> ou <tt>upgrade.site</tt>, conforme apropriado
para o processo atual, e executa esse script em um ambiente
"<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=8">chroot</a>ado"
para a raiz do sistema instalado/atualizado. Lembre-se: a atualização
de versão é feita a partir de um sistema de arquivos inicializado, então
o seu sistema de arquivos alvo está realmente montado no diretório
<tt>/mnt</tt>. No entanto, por causa do chroot, o script pode ser
escrito como se estivesse executando na raiz "normal" do seu sistema de
arquivos. Pelo fato de que esse script é executado após todos os
arquivos estarem instalados, você tem uma grande parte da funcionalidade
do sistema completo quando o script é executado.
Mantenha em mente que você está executando um kernel mínimo, nem todos
os recursos estão disponíveis e, devido à problemas de espaço, as
coisas que funcionam hoje podem não funcionar em uma versão futura.

<p>
Note que o script <tt>install.site</tt> deve estar em um arquivo
<tt>siteXX.tgz</tt>, enquanto que o script <tt>upgrade.site</tt>
pode ser colocado no diretório raiz antes da atualização de versão, ou
pode ser colocado em um arquivo <tt>siteXX.tgz</tt>.

<p>
Os scripts podem ser utilizados para fazer muitas coisas:
<ul>
<li>Remover arquivos que estão instalados/atualizados, mas que
    você não os quer presentes no sistema.
<li>Remover/atualizar/instalar <a href="faq15.html#PkgMgmt">pacotes</a>
    que você deseja no sistema instalado (pode não funcionar com todos
    os pacotes!).
<li>Fazer um <a href="faq14.html#Backup">backup/arquivamento imediato</a>
    do novo sistema antes de você expô-lo ao resto do mundo.
<li>Usar o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&amp;sektion=8">rdate(8)</a>
    para configurar a hora do sistema.
</ul>

<p>
A combinação dos arquivos <tt>siteXX.tgz</tt> e
<tt>install.site/upgrade.site</tt> tem o objetivo de dar aos usuários
amplas capacidades de personalização sem precisar construir seus
próprios pacotes de instalação.

<p>
Nota: se você for fazer a sua instalação a partir de um servidor http,
você precisa adicionar <tt>site*.tgz</tt> ao arquivo <tt>index.txt</tt>
no diretório fonte, para que ele fique disponível na hora da instalação.
Isso não é necessário para ftp ou outras formas de instalação.


<a name="Multiple"></a>
<h2>4.15 - Como eu instalo em vários sistemas similares?</h2>
Aqui estão algumas ferramentas que você pode usar quando tem que
instalar vários sistemas similares do OpenBSD.

<h3>Arquivos <tt>siteXX.tgz</tt> e <tt>install/upgrade.site</tt></h3>
Veja o artigo <a href="#site">acima</a>.

<h3>Restauração a partir do dump(8)</h3>
Na maioria das plataformas a mídia de inicialização inclui o programa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>,
que pode ser usado para recuperar backups feitos com o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a>.
Assim você pode inicializar a partir de um
<a href="#MkFlop">disquete</a>,
<a href="../../orders.html">CD</a> ou
<a href="#bsd.rd">bsd.rd</a>, executar o
<a href="faq14.html#fdisk">fdisk</a>,
o <a href="faq14.html#disklabel">disklabel</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restaurar</a>
as configurações desejadas a partir de uma fita ou outra mídia, e
instalar os
<a href="faq14.html#InstBoot">blocos de inicialização</a>.
Mais detalhes <a href="faq14.html#Backup">aqui</a>.

<h3>Imagem de disco</h3>
Infelizmente não há nenhum pacote conhecido de software que crie
imagem de discos com suporte ao FFS, e que crie imagens contendo apenas
o espaço ativo do arquivo. A maioria das soluções existentes tratam a
partição OpenBSD como "genérica", e podem fazer uma imagem do disco
inteiro. Isso geralmente é o objetivo, porém há um grande desperdício
de espaço -- uma partição <tt>/home</tt> de 10G requer 10G de espaço na
imagem, mesmo que não haja um único arquivo na partição.
Enquanto que você pode instalar tipicamente uma imagem do drive em um
grande drive, você não pode utilizar diretamente o espaço extra, e você
não pode instalar uma imagem em um drive menor.

<p>
Se essa é uma situação aceitável, você pode utilizar o comando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd</a>,
o qual permite copiar o conteúdo inteiro de um disco para outro, setor
a setor. Isso proporcionaria a mesma funcionalidade de programas
comerciais, porém a custo zero.

<a name="getdmesg"></a>
<h2>4.16 - Como eu obtenho o dmesg(8) para relatar um problema de
instalação?</h2>
Ao <a href="../../report.html">relatar um problema</a> é necessário
incluir o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>.
Entretanto, quando você necessita de fazer isso é porque o sistema não
está funcionando normalmente ou não instalou, então você não possui
o disco, a rede, ou outros recursos necessários para que você possa
pegar o dmesg e enviá-lo à
<a href="../../mail.html">lista de discussão</a> apropriada.
Há outras maneiras, no entanto:

<ul>
<li><b>Disquete:</b> Os discos de inicialização e o CD-ROM possuem
ferramentas que possibilitam gravar o seu dmesg em um disquete MSDOS
para depois ser lido em outra máquina. Coloque um disquete formatado em
MSDOS no drive e execute os comandos abaixo:

<pre>
     mount -t msdos /dev/fd0a /mnt
     dmesg >/mnt/dmesg.txt
     umount /mnt
</pre>
Se você tiver um outro sistema OpenBSD, você pode fazer isso em um
disquete compatível com o sistema de arquivos do OpenBSD --
frequentemente o disquete de inicialização tem bastante espaço para
conter o dmesg. Nesse caso, tire a opção "<tt>-t msdos</tt>" acima.

<p>
<li><b>Console Serial:</b>
Usar um console serial e capturar a saída em outro computador
é o melhor caminho para capturar informações de diagnóstico -
particularmente se o computador trava logo após a inicialização.
Em um segundo computador, você necessita de um cabo serial apropriado
(como um cabo "null-modem") e um programa emulador de terminal para
capturar a saída da tela em um arquivo.

<p>
Informações gerais sobre a configuração de console serial são discutidas
em <a href="faq7.html#SerCon">outra parte nesta FAQ</a>; para capturar o
registro da instalação, os seguintes comandos usualmente são
suficientes.

<p><b>i386</b>

<p>
No prompt do carregador de inicialização, digite

<p>
<blockquote>
<pre>
boot> <b>set tty com0</b>
</pre>
</blockquote>

<p>
Isso diz ao OpenBSD para usar a primeira porta serial (também chamada
de COM1 ou COMA na documentação do PC) como um console serial.
A taxa padrão de comunicação é 9600 ("baud rate").

<p><b>Sparc/Sparc64</b>

<p>
Essas máquinas usam automaticamente um console serial se iniciadas
sem um teclado. Se você possui um teclado e um monitor conectados, você
pode forçar o sistema a usar um console serial com o seguinte comando no
prompt <tt>ok</tt>.

<p>
<blockquote>
<pre>
ok <b>setenv input-device ttya</b>
ok <b>setenv output-device ttya</b>
ok <b>reset</b>
</pre>
</blockquote>

</ul>
<p>

<font color= "#0000e0">
<a href="index.html">[Índice da FAQ]</a>
<a href="faq3.html">[Seção 3 - Primeiros passos com o OpenBSD]</a>
<a href="faq5.html">[Seção 5 - Construção do Sistema a partir do Código Fonte]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif"
border= "0" alt= "[voltar]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq4.html,v 1.301 ]<br>
$Translation: faq4.html,v 1.29 2010/07/16 02:05:44 renato Exp $<br>
-->
$OpenBSD: faq4.html,v 1.21 2010/07/17 17:38:10 ajacoutot Exp $
</small>
</body>
</html>
