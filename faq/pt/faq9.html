<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>9 - Migrando para o OpenBSD</title>
<link rev="made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2009 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../pt/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[Índice da FAQ]</a>
<a href= "faq8.html">[Seção 8 - Questões Gerais]</a>
<a href= "faq10.html">[Seção 10 - Administração do Sistema]</a>
</font>

<h1><font color="#e00000">9 - Migrando para o OpenBSD</font></h1>
<hr>

<p>
<h3>Conteúdo</h3>
<ul>
<li><a href= "#Introduction">9.1 - Dicas para usuários de outros
    Sistemas Operacionais do tipo Unix</a>
<li><a href= "#DualBoot">9.2 - Linux e OpenBSD em Dual boot</a>
<li><a href= "#passwd">9.3 - Convertendo seu arquivo de senhas do Linux
    (ou outro formato do tipo "Sixth Edition") para o formato BSD.</a>
<li><a href= "#Interact">9.4 - Rodando binários do Linux no OpenBSD</a>
<li><a href= "#Ext2FS">9.5 - Acessando seus arquivos do Linux com o
    OpenBSD</a>
</ul>

Mais informação para usuários de Linux pode ser encontrada em
<a href="http://sites.inka.de/mips/unix/bsdlinux.html">http://sites.inka.de/mips/unix/bsdlinux.html</a>.
<hr>
<br>


<p>
<a name= "Linux"></a>
<a name="Introduction"></a>
<h2>9.1 - Dicas para usuários de outros Sistemas Operacionais do
tipo Unix</h2>

<p>
O OpenBSD é um sistema tradicional do tipo Unix e será muito familiar
para aqueles que usaram outros sistemas do tipo Unix, mas existem
diferenças importantes.
Novos usuários do OpenBSD devem se basear em suas próprias experiências:
se seu conhecimento de Unix se limita a uma certa experiência com uma
variante do Linux, você pode achar o OpenBSD "estranho". Do mesmo modo,
o Linux parece muito estranho para alguém que começou com o OpenBSD.
Você precisa reconhecer a diferença entre o "padrão" e sua experiência.

<p>
Se você aprendeu Unix com qualquer um dos <a href="../../books.html">
bons livros</a> sobre Unix em geral, e se você entende a "filosofia
Unix" e então aumentou seu conhecimento em uma plataforma em particular,
você achará o OpenBSD um Unix muito "verdadeiro" e familiar.
Se você aprendeu Unix usando um processo "digite isto para fazer aquilo"
ou um livro do tipo "Aprenda PinkBeenie v8.3 em 31.4 Horas", e acha
que você "conhece o Unix", você vai achar o OpenBSD muito diferente.

<p>
Uma importante diferença entre o OpenBSD e muitos outros sistemas
operacionais é a documentação. Os desenvolvedores do OpenBSD têm
um grande orgulho das
<a href="http://www.openbsd.org/cgi-bin/man.cgi">páginas de manual</a>.
As páginas de manual são <i>as</i> fontes de documentação do OpenBSD --
não esta FAQ, nem páginas mantidas independentemente por terceiros,
nem "HOWTO"s, etc.
Quando um desenvolvedor faz uma mudança no sistema, é esperado que ele
faça o update das páginas de manual ao mesmo tempo que sua modificação
no código do sistema, não "mais tarde" ou "quando tiver tempo de fazer"
ou "quando alguém reclamar".
Uma página de manual existe para praticamente todo programa, utilitário,
driver, arquivo de configuração, e também para o sistema base.
É esperado que um usuário veja as páginas de manual antes de pedir
ajuda nas <a href="../../mail.html">listas de discussão</a>.

<p>
Estas são algumas das diferenças mais comumente encontradas entre o
OpenBSD e outras variantes do Unix.

<ul>
<li>O OpenBSD é um Unix do estilo "BSD" bastante puro, seguindo o
    desenho do 4.4BSD com atenção.
    Linux e o SCO Unix são sistemas do estilo "System V".
    Alguns sistemas operacionais do tipo Unix (incluindo algumas
    distribuições Linux) misturam muitas características do SysV e BSD.
    Um lugar onde isso causa confusão são os
    <a href="faq10.html#rc">scripts de inicialização</a>, o OpenBSD usa
    o sistema tradicional
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8">rc(8)</a>
    estilo 4.4BSD.

<li>O OpenBSD é um <i>sistema</i> completo, destinado a se manter de
    maneira homogênea. Ele não é um "Kernel mais utilitários" que podem
    ser atualizados separadamente.
    Se você não manter seu sistema (kernel, utilitários de usuário, e
    aplicações) em sincronia, coisas ruins vão acontecer.

<li>Como muitas aplicações não são desenvolvidas para compilar e rodar
    diretamente em um ambiente OpenBSD, o OpenBSD tem uma
    <a href="faq15.html#Ports">árvore de ports</a>, um sistema onde
    usuários podem facilmente adquirir o código, corrigí-lo para o
    OpenBSD, instalar as dependências, compilá-lo, instalar e remover
    de maneira padronizada e mantível.
    <a href="faq15.html#PkgMgmt">Pacotes</a> pré-compilados são criados
    e distribuídos pelo time de ports do OpenBSD.
    Usuários são <a href="faq15.html#PkgVsPorts">aconselhados</a>
    a usar esses pacotes ao invés de compilar seus próprios.

<li>O OpenBSD usa CVS para manter o caminho das mudanças no código
    fonte. O OpenBSD foi pioneiro no uso do
    <a href="../../anoncvs.html">CVS anônimo</a>, que permite a
    qualquer um pegar a árvore completa de código de qualquer versão
    do OpenBSD (da 2.0 até a current, e todas as revisões de todos os
    arquivos entre elas) em qualquer hora, e você pode acessar as
    mudanças mais recentes dentro de horas após a alteração.
    Há também uma
    <a href="http://www.openbsd.org/cgi-bin/cvsweb/">interface web para
    o CVS</a> conveniente e fácil de usar.

<li>O OpenBSD produz uma release oficial disponível em
    <a href="../../orders.html">CD</a> e
    <a href="../../ftp.html">FTP</a> a cada seis meses em uma
    <a href="faq1.html#Next">data planejada</a>.
    Snapshots para todas as plataformas suportadas são feitas
    quase que regularmente com o código de desenvolvimento atual.
    O objetivo é que a árvore de código se mantenha compilável
    e o sistema resultante seja usável todas as vezes.
    A árvore ocasionalmente se quebra, mas isso é um evento
    extraordinário que é corrigido rapidamente.

<li>O OpenBSD contém <a href="../../pt/crypto.html">criptografia forte</a>
    que não pode ser incluída em SOs feitos em alguns países.

<li>O OpenBSD recebe uma contínua e pesada auditoria de segurança para
    assegurar a qualidade (e assim, a segurança) do código.

<li>O kernel do OpenBSD é <tt>/bsd</tt>.

<li>Os nomes dos discos rígidos são normalmente <tt>/dev/wd</tt> (IDE) e
    <tt>/dev/sd</tt> (SCSI ou dispositivos emulando discos SCSI).

<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&amp;sektion=8">/sbin/route</a>
    sem argumentos no Linux mostra o estado de todas as rotas ativas,
    no OpenBSD (e muitos outros SOs) você precisa usar o parâmetro
    "<i>show</i>", ou fazer um
    "<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstat&amp;sektion=1"><tt>netstat -r</tt></a>".

<li>O OpenBSD NÃO suporta sistemas de arquivos com Journaling, como
    o ReiserFS, o JFS da IBM ou XFS da SGI.
    Ao invés disso, nós usamos a funcionalidade
    <a href="faq14.html#SoftUpdates">Soft Updates</a> do muito robusto
    Unix Fast File System (FFS) para atender os objetivos de
    desempenho e estabilidade.

<li>O OpenBSD inclui o <a href="../pf/pt/index.html">Packet Filter (PF)</a>,
    e não o ipfw, ipchains, netfilter, iptables, ou ipf. Isso significa
    que a Tradução de Endereço IP (conhecido como IP-Masquerading no
    Linux), controle de banda e filtragem são feitas via
    <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>, e
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5">pf.conf(5)</a>.
    Veja o <a href="../pf/pt/index.html">Guia para Usuários do PF</a>
    para uma informação detalhada sobre configuração.

<li>Endereço de interface é guardado em
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hostname.if&amp;sektion=5">/etc/hostname.&lt;interfacename&gt;</a>
    (por exemplo, <tt>/etc/hostname.dc0</tt> para uma interface de rede
    usando o driver
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&amp;sektion=4">dc(4)</a>).
     Esse arquivo pode conter o hostname (resolvido em
     <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hosts&amp;sektion=5">/etc/hosts</a>)
     ao invés do endereço IP.

<li>O nome da máquina está em
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=myname&amp;sektion=5">/etc/myname</a>.

<li>O gateway padrão está em
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mygate&amp;sektion=5">/etc/mygate</a>.

<li>O shell padrão do OpenBSD é o
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">/bin/ksh</a>,
    que é o <a href="http://web.cs.mun.ca/~michael/pdksh/">pdksh</a>, o
    Korn shell em Domínio Público.
    Outros shells incluídos são o
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1">csh</a>
    e o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sh&amp;sektion=1">sh</a>.
    Shells como o <i>bash</i> e <i>tcsh</i> podem ser adicionados como
    <a href="faq15.html#PkgMgmt">pacotes</a> ou instalados a partir do
    <a href="faq15.html#Ports">ports</a>.
    Usuários familiarizados com o <i>bash</i> são encorajados a
    <a href="faq10.html#ksh">tentar usar o ksh(1)</a> antes de instalar
    o <i>bash</i> em seu sistema -- isso faz com que muitas pessoas
    desistam do <i>bash</i>.

<li>O gerenciamento de senhas no OpenBSD é diferente do gerenciamento
    de senhas em alguns outros sistemas operacionais do tipo Unix.
    As senhas atuais são guardadas no arquivo
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=master.passwd&amp;sektion=5">master.passwd(5)</a>
    que só pode ser lido pelo <i>root</i>.
    Esse arquivo deve ser alterado somente com o programa
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw</a>.

<li>Dispositivos são nomeados pelo driver, não pelo tipo. Por exemplo,
    não há dispositivos eth*. Ele será ne0 para uma placa Ethernet
    NE2000, e xl0 para um 3Com Etherlink XL ou um dispositivo Fast
    Etherlink XL, etc. Todos os drivers possuem páginas de manual na
    seção 4. Dessa forma, para encontrar mais informação sobre as
    mensagens que seu driver 3c905 está mostrando, você pode digitar
    "<tt><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xl&amp;sektion=4">man
    4 xl</a></tt>".

<li>OpenBSD/i386, amd64, e muitas outras plataformas usam um sistema
    de particionamento de disco em "duas camadas", onde a primeira
    camada é o <a href="faq14.html#fdisk">fdisk</a>, partição visível
    pela BIOS e familiar para a maioria dos usuários de computadores
    compatíveis com IBM.
    A segunda camada é o <a href="faq14.html#disklabel">disklabel</a>,
    um sistema de particionamento tradicional do BSD.
    O OpenBSD suporta no máximo 15 partições disklabel em um disco,
    todas na mesma partição fdisk.
    Isso permite ao OpenBSD coexistir com outros SOs, incluindo outros
    SOs do tipo Unix.
    O OpenBSD precisa estar em uma das quatro partições "primárias".

<li>Alguns outros SOs encorajam você a customizar seu kernel para sua
    máquina.
    Usuários de OpenBSD são <a href="faq5.html#Why">encorajados</a>
    a simplesmente usar o kernel GENERIC padrão fornecido e testado
    pelos desenvolvedores.
    Usuários tentando "customizar" ou "otimizar" o kernel, normalmente
    causam mais problemas do que soluções, e nenhuma ajuda será
    fornecida pelos desenvolvedores.

<li>O OpenBSD trabalha pesado para manter a
    <a href="../../policy.html">política de licença</a> e
    <a href="../../security.html">segurança</a> do projeto.
    Por essa razão, algumas novas versões de alguns softwares que falham
    na adequação tanto da licença quanto dos objetivos de segurança do
    projeto não são e podem nunca ser integrados no OpenBSD.
    Segurança e licença livre não serão jamais negligenciados para ter
    o número de versão maior.

</ul>

<p>
<a name= "DualBoot"></a>
<h2>9.2 - Linux e OpenBSD em Dual boot</h2>

<p>
Sim! Isso é possível!

<p>
Leia <a href= "ftp://ftp.openbsd.org/pub/OpenBSD/4.5/i386/INSTALL.linux">INSTALL.linux</a>.

<p>
<a name= "passwd"></a>
<h2>9.3 - Convertendo seu arquivo de senhas do Linux (ou outro formato
do tipo "Sixth Edition") para o formato BSD.</h2>

<p>
Primeiro, verifique se o seu arquivo de senhas do Linux é do tipo
"shadow" ou não. Se ele é, instale o
<a href="http://www.openwall.com/john/">John the Ripper</a> a partir de
<a href="faq15.html">pacotes ou ports</a> (<tt>security/john</tt>) e
use o utilitário "unshadow" para ele juntar seus arquivos
<tt>passwd</tt> e <tt>shadow</tt> em um arquivo do tipo "Sixth Edition".

<p>
Usando seu arquivo de senhas Linux, vamos chamar ele de
<tt>linux_passwd</tt>, você precisa adicionar ::0:0 entre os campos
quatro e sete. O
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=awk&amp;sektion=1">awk(1)</a>
faz isso por você.

<blockquote>
<pre>
# <b>cat linux_passwd | awk -F : '{printf("%s:%s:%s:%s::0:0:%s:%s:%s\n", \</b>
&gt; <b>$1,$2,$3,$4,$5,$6,$7); }' &gt; new_passwd</b>
</pre>
</blockquote>

Nesse ponto, você deve editar o arquivo <tt>new_passwd</tt> e remover
o root e outras entradas do sistema que já estão presentes no seu
arquivo de senhas do OpenBSD ou não são usadas no OpenBSD (todas).
Também tenha certeza que não existem nomes de usuários duplicados ou
IDs de usuário entre <tt>new_passwd</tt> e seu arquivo
<tt>/etc/passwd</tt> da máquina OpenBSD. A maneira mais fácil de fazer
isso é utilizar um novo <tt>/etc/passwd</tt>.

<blockquote>
<pre>
# <b>cat new_passwd &gt;&gt; /etc/master.passwd</b>
# <b>pwd_mkdb -p /etc/master.passwd</b>
</pre>
</blockquote>

O último passo, <tt>pwd_mkdb</tt>, é necessário para reconstruir os
arquivos /etc/spwd.db e /etc/pwd.db. Ele também cria um arquivo de
senhas no formato "Sixth Edition" (menos as senhas encriptadas) em
/etc/passwd para programas que o usam. O OpenBSD usa criptografia forte
para senhas, blowfish, que é muito raro de se achar em qualquer sistema
que use arquivos de senhas no formato "Sixth Edition". Para utilizar
esse algoritmo mais forte, os usuários utilizam o comando 'passwd' e
mudam suas senhas. A nova senha será encriptada com sua configuração
padrão (blowfish se você não editou o arquivo /etc/login.conf). Ou,
como <i>root</i>, você pode rodar <tt>passwd <i>username</i></tt>.


<p>
<a name= "Interact"></a>
<h2>9.4 - Rodando binários do Linux no OpenBSD</h2>

<p>
O OpenBSD/i386 é capaz de rodar binários do Linux quando o kernel está
compilado com a opção COMPAT_LINUX e o parâmetro sysctl kern.emul.linux
também está configurado.
Se você está usando o kernel GENERIC (que você normalmente deve usar),
COMPAT_LINUX já está ativada, e você vai precisar apenas configurar
o parâmetro sysctl desta forma:

<blockquote>
<pre>
# <b>sysctl kern.emul.linux=1</b>
</pre>
</blockquote>

Para isso ser feito automaticamente a cada vez que o computador
inicializar, remova o caractere # (comentário) do começo da linha

<blockquote>
<pre>
#kern.emul.linux=1      # enable running Linux binaries
</pre>
</blockquote>

do arquivo /etc/sysctl.conf, que deve ficar parecido com:

<blockquote>
<pre>
kern.emul.linux=1       # enable running Linux binaries
</pre>
</blockquote>

e reinicie seu sistema para a modificação ter efeito.

<p>
Para rodar quaisquer binários do Linux que não são estaticamente
linkados (a maioria deles), você precisa seguir as instruções da
página de manual
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_linux&amp;sektion=8">compat_linux(8)</a>.

<p>
Um jeito simples de pegar a maioria das bibliotecas úteis do Linux é
instalar o pacote <tt>fedora/base</tt> a partir do espelho FTP mais
próximo de você.
Para mais informação sobre os pacotes e o sistema de ports, você deve
consultar a
<a href="faq15.html">FAQ 15 - O Sistema de Pacotes e Ports do OpenBSD</a>.
Para instalar o pacote mencionado, você deve usar os comandos:

<blockquote><pre>
# export PKG_PATH=ftp://your.ftp.mirror/pub/OpenBSD/4.5/packages/i386/
# pkg_add -i fedora_base
</pre></blockquote>

Note que o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>
irá automaticamente executar o sysctl para configurar kern.emul.linux
para o valor correto durante a instalação desse pacote.
No entanto, ele não muda o arquivo <tt>/etc/sysctl.conf</tt>, então se
você deseja que a emulação Linux fique ativa por padrão, você precisa
modificar kern.emul.linux no arquivo.


<p>
<a name= "Ext2FS"></a>
<h2>9.5 - Acessando seus arquivos do Linux com o OpenBSD</h2>

<p>
O OpenBSD suporta o sistema de arquivos EXT2FS.
Para mais informação, veja a <a href="faq14.html#foreignfs">FAQ 14</a>.


<p>
<font color= "#0000e0">
<a href= "index.html">[Índice da FAQ]</a>
<a href= "faq8.html">[Seção 8 - Questões Gerais]</a>
<a href= "faq10.html">[Seção 10 - Administração do Sistema]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt= "[voltar]"></a>
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq9.html,v 1.92 ]<br>
$Translation: faq9.html,v 1.2 2009/05/10 17:44:17 alan Exp $<br>
-->
$OpenBSD: faq9.html,v 1.2 2009/05/16 08:59:12 ajacoutot Exp $
</small>
</body>
</html>
