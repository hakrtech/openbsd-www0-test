<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>2 - Conhecendo o OpenBSD</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq">
<meta name="distribution"  content="global">
<meta name="copyright"     content="This document copyright 1998-2010 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../pt/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">
</a>
<p>
<font color="#0000e0">
<a href="index.html">[Índice da FAQ]</a>
<a href="faq1.html">[Seção 1 - Introdução ao OpenBSD]</a>
<a href="faq3.html">[Seção 3 - Primeiros passos com o OpenBSD]</a>
</font>

<h1><font color="#e00000">2 - Conhecendo o OpenBSD</font></h1>
<hr>

<p>
<h3>Conteúdo</h3>
<ul>
<li><a href="#WebSites">2.1 - Páginas Web</a>
<li><a href="#MailLists">2.2 - Listas de discussão</a>
<li><a href="#ManPages">2.3 - Páginas de manual</a>
<li><a href="#Bugs">2.4 - Como relatar falhas</a>
</ul>

<hr>


<p>
<a name="WebSites"></a>
<h2>2.1 - Páginas Web interessantes</h2>

<p>
O sítio Web oficial do projeto OpenBSD está localizado em:
<a href="http://www.openbsd.org">http://www.OpenBSD.org</a>.

<p>
Muitas informações valiosas, que abordam todos os aspectos do projeto
OpenBSD, podem ser encontradas aqui.

<p>
O <a href="http://www.undeadly.org">Jornal do OpenBSD</a> é um sítio de
notícias e opiniões focado no OpenBSD.

<p>
O sítio <a href="http://www.openbsdsupport.org/">OpenBSDsupport.org</a>
é uma coleção de documentações "mantida por usuários", de qualidade
variada, que cobre tópicos que não estão nesta FAQ ou outra documentação
oficial.

<p>
Muitos usuários criam sítios e páginas com informações específicas sobre
o OpenBSD. Como tudo na Internet, uma boa ferramenta de pesquisas
facilita sua vida, mas sempre com uma dose saudável de ceticismo.
Nunca digite comandos cegamente (sem saber o que eles fazem) no seu
computador.


<p>
<a name="MailLists"></a>
<h2>2.2 - Listas de discussão</h2>

<p>
O projeto OpenBSD mantém muitas listas populares de discussão, nas quais
usuários podem se inscrever e segui-las. Para se inscrever numa lista de
discussão, mande uma mensagem de correio eletrônico para
<a href="mailto:majordomo@openbsd.org">majordomo@openbsd.org</a>. Esse
endereço é um serviço de inscrição automático. No corpo da sua mensagem,
em uma única linha, você deve incluir um comando de inscrição para a
lista que você deseja se juntar. Por exemplo:

<blockquote>
<pre>
<strong>subscribe announce</strong>
</pre>
</blockquote>

<p>
O processador de correio eletrônico da lista vai te responder,
perguntando pela confirmação da sua intenção de se juntar à lista, desse
modo outros não podem inscrever você e te inundar de mensagens
não solicitadas. A mensagem contém instruções sobre os vários meios para
confirmar, o que inclui uma página Web com links de
<a href="http://lists.openbsd.org">servidores de listas</a>, responder a
mensagem de confirmação ou responder para
<tt>majordomo@openbsd.org</tt>. Use qualquer método que é conveniente
para você. Você notará que todas as três técnicas envolvem um número de
identificação único e com tempo limitado, tal como
<tt>A56D-70D4-52C3</tt>, para ter novamente a certeza que <i>você</i>
é realmente a pessoa que está requisitando essa inscrição na lista
de discussão (esse é um "opt-in" <i>real</i>).

<p>
Após ter confirmado sua intenção de se inscrever, você será
imediatamente adicionado à lista, e o processador de correio eletrônico
irá lhe notificar que você foi adicionado com sucesso.

<p>
Para desinscrever-se da lista, você deve novamente enviar uma mensagem
de correio eletrônico para
<a href="mailto:majordomo@openbsd.org">majordomo@openbsd.org</a>,
com algo parecido com isto:

<blockquote>
<pre>
<strong>unsubscribe announce</strong>
</pre>
</blockquote>

<p>
Se você tiver qualquer dificuldade com o sistema de lista de discussão,
por favor, primeiro leia o arquivo de ajuda que pode ser obtido enviando
uma mensagem de correio eletrônico para
<a href="mailto:majordomo@openbsd.org">majordomo@openbsd.org</a> com a
mensagem de corpo "help".

<p>
Sua inscrição nas listas de discussão do OpenBSD também pode ser mantida
através da interface Web em
<a href="http://lists.openbsd.org">http://lists.openbsd.org</a>

<p>
Algumas das mais populares listas de discussão do OpenBSD são:

<p>
<ul>
    <li><b>announce</b> - Anúncios importantes. Essa é uma lista de
        tamanho pequeno.
    <li><b>security-announce</b> - Anúncios de problemas de segurança.
        Essa é uma lista de tamanho pequeno.
    <li><b>misc</b> - Perguntas e respostas gerais dos usuários.
        Essa é a lista mais ativa, e deve ser a lista "padrão" para a
        maioria das questões.
    <li><b>bugs</b> - Falhas recebidas via sendbug(1) e discussões sobre
        elas.
    <li><b>source-changes</b> - Lista que recebe automaticamente as
        mudanças na árvore de código fonte do CVS. Toda vez que um
        desenvolvedor modifica ("commit") a árvore de código fonte do
        OpenBSD, o <a href="../../pt/why-cvs.html">CVS</a> envia uma
        cópia (geralmente curta) de sua mensagem de "commit" para essa
        lista.
    <li><b>ports</b> - Discussão da árvore de portes do OpenBSD.
    <li><b>ports-changes</b> - Lista que recebe automaticamente as
        mudanças na árvore de código fonte do CVS específica do portes.
    <li><b>advocacy</b> - Discussão sobre a divulgação do OpenBSD e
        assuntos que são muito fora de tópico para <b>misc</b>.
</ul>

<p>
Antes de postar uma pergunta na <b>misc</b> ou em qualquer outra lista
de discussão, por favor, verifique os arquivos; as questões mais comuns
já foram respondidas repetidamente. Embora possa ser a primeira vez que
você encontrou um problema ou uma pergunta, outros nas listas de
discussão podem ter visto a mesma pergunta várias vezes na última
semana, e não gostam de vê-la novamente. Se você fizer uma pergunta
possivelmente referente a hardware, <i>sempre inclua um
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8"
>dmesg(8)</a>!</i>

<p>
Você pode encontrar vários arquivos, outros guias de listas de discussão
e mais informações na
<a href="../../mail.html">página de listas de discussão</a>.

<p>
Uma lista de discussão não-oficial que pode ser de interesse para novos
usuários do OpenBSD e Unix é a lista
<a href="http://mailman.theapt.org/listinfo/openbsd-newbies">Iniciantes
no OpenBSD</a>.


<p>
<a name="ManPages"></a>
<h2>2.3 - Páginas de manual</h2>

<p>
O OpenBSD vem com uma extensa documentação em forma de páginas de
manual, como também em longos documentos relativos a aplicativos
específicos.
Um esforço enorme é feito para ter certeza que as páginas de manual
estão atualizadas e precisas.
Em todos os casos, as páginas de manual são consideradas fontes
de informação confiável do OpenBSD.

<p>
<!-- XXXrelease -->
Para acessar as páginas de manual e outras documentações, tenha certeza
que você instalou os
<a href="faq4.html#FilesNeeded">pacotes de arquivos</a>
<tt>man47.tgz</tt> e <tt>misc47.tgz</tt>.

<p>
Esta é uma lista de algumas das mais úteis páginas de manual para novos
usuários:

<p>

<b>Primeiros passos</b>
<ul>
<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8"
    >afterboot(8)</a></b> - coisas para verificar depois da primeira
    inicialização completa.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=help&amp;sektion=1"
    >help(1)</a></b> - ajuda para novos usuários e administradores.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hier&amp;sektion=7"
    >hier(7)</a></b> - layout do sistema de arquivos.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=man&amp;sektion=1"
    >man(1)</a></b> - mostra as páginas de manual online.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=1"
    >intro(1)</a></b> - introdução aos comandos gerais, veja também as
    intros das outras seções do manual:
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=2">intro(2)</a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=3">intro(3)</a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=4&amp;arch=i386">intro(4)</a>
    (nota: intro(4) é específica de <a href="../../pt/plat.html">plataforma</a>),
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=5">intro(5)</a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=6">intro(6)</a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=7">intro(7)</a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=8">intro(8)</a>
    e
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=9">intro(9)</a>.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8"
    >adduser(8)</a></b> - comando para adicionar novos usuários.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8"
    >vipw(8)</a></b> - edita o arquivo de senhas mestre.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8"
    >disklabel(8)</a></b> - leitura e escrita do disklabel.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=reboot&amp;sektion=8"
    >reboot, halt(8)</a></b> - para e reinicia o sistema.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=shutdown&amp;sektion=8"
    >shutdown(8)</a></b> - desliga o sistema em um dado tempo.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8"
    >dmesg(8)</a></b> - mostra novamente as mensagens do momento de
    inicialização do kernel.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8"
    >sudo(8)</a></b> - não inicia sessão como root, mas executa comandos
    como root.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1"
    >mg(1)</a></b> - editor de texto compatível com o emacs.

</ul>

<b>Para usuários mais avançados</b>
<ul>
<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386"
    >boot(8)</a></b> - procedimentos de "bootstrapping" do sistema.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot_config&amp;sektion=8"
    >boot_config(8)</a></b> - como mudar a configuração do kernel na
    inicialização.
  
<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc-local&amp;sektion=1"
    >gcc-local(1)</a></b> - modificações específicas do OpenBSD no
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a>

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8"
    >ifconfig(8)</a></b> - configura os parâmetros da interface de rede.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5"
    >login.conf(5)</a></b> - formato do arquivo de configuração da
    classe de início de sessão.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstat&amp;sektion1"
    >netstat(1)</a></b> - mostra o status da rede.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&amp;sektion=8"
    >release(8)</a></b> - compilação de uma release do OpenBSD.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&amp;sektion=1"
    >sendbug(1)</a></b> - envia um relato de problema (PR - "Problem
    Report") no OpenBSD para o sítio de suporte central.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=style&amp;sektion=9"
    >style(9)</a></b> - guia de estilo para o código fonte do kernel do
    OpenBSD.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8"
    >sysctl(8)</a></b> - obtém ou configura parâmetros do kernel.

</ul>

<p>
<!-- XXXrelease -->
Você pode encontrar todas as páginas de manual do OpenBSD na Web, em
<a href="http://www.openbsd.org/cgi-bin/man.cgi">http://www.openbsd.org/cgi-bin/man.cgi</a>,
e também no seu computador, se você instalou o pacote de arquivos
<tt>man47.tgz</tt>.

<p>
Geralmente, se você conhece o nome de um comando ou página de manual,
você pode lê-la executando <kbd>"man comando"</kbd>. Por exemplo:
<kbd>"man vi"</kbd> para ler sobre o editor vi. Se você não sabe o nome
do comando, ou se <kbd>"man comando"</kbd> não encontra a página de
manual, você pode procurá-la na base de dados, executando
<kbd>"apropos qualquer_coisa"</kbd> ou
<kbd>"man -k qualquer_coisa"</kbd>, onde "qualquer_coisa" é uma palavra
comum que talvez apareça no título da página de manual que você está
procurando. Por exemplo:

<blockquote>
<pre>
# <strong>apropos "time zone"</strong>
tzfile (5) - time zone information
zdump (8) - time zone dumper
zic (8) - time zone compiler
</pre>
</blockquote>

<p>
Os números entre parêntesis indicam a seção do manual onde a página se
encontra. Em alguns casos, você pode encontrar páginas de manual com
nomes idênticos vivendo em seções separadas do manual. Por exemplo,
assuma que você quer saber o formato dos arquivos de configuração
do "daemon" cron. Após descobrir a seção do manual da página que você
quer, você vai executar <kbd>"man n comando"</kbd>, onde n é o número
da seção do manual.

<blockquote>
<pre>
# <strong>man -k cron</strong>
cron (8) - clock daemon
crontab (1) - maintain crontab files for individual users
crontab (5) - tables for driving cron
# <strong>man 5 crontab</strong>
</pre>
</blockquote>

<p>
<!-- XXXrelease -->
Em adição às páginas de manual UNIX, existe um conjunto de documentos
imprimíveis (incluídos no pacote de arquivos <tt>misc47.tgz</tt>).
Eles residem no diretório <tt>/usr/share/doc</tt>.
Você pode formatar cada documento desse conjunto com um "make" no
subdiretório apropriado.
O subdiretório <tt>psd</tt> contém a documentação "Programmer's
Supplementary Documents" (Documentação Suplementar do Programador).
O subdiretório <tt>smm</tt> é o do "System Manager's Manual"
(Manual do Administrador).
O subdiretório <tt>usd</tt> contém a documentação "UNIX User's
Supplementary Documents" (Documentação Suplementar do Usuário UNIX).
Você pode dar seu "make" na árvore dos subdiretórios, ou você pode
selecionar uma seção específica do conjunto e executar o `make' em seu
subdiretório.

<p>
Alguns dos subdiretórios estão vazios.
Por padrão, formatar os documentos resulta na saída de PostScript,
adequado para a impressão. A saída de PostSript pode ser um pouco grande
-- você deve supor um aumento de 250-300% no tamanho. Se você não tem
acesso a uma impressora ou leitor de PostScript, você pode também
formatar os documentos para leitura no terminal. Cada subdiretório tem
um alvo para criar cópias ASCII desses papéis (chamado `paper.txt'),
que podem ser gerados com o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1">make(1)</a>.
Por exemplo:

<blockquote>
<pre>
# <strong>cd /usr/share/doc/usd/06.bc</strong>
# <strong>make paper.txt</strong>
# <strong>more paper.txt</strong>
</pre>
</blockquote>

<p>
Note que privilégios de super usuário podem ser requeridos para
construir os documentos nesses diretórios, e que o
<strong>make clean</strong> remove quaisquer papéis gerados por um make
anterior. Veja /usr/share/doc/README para obter mais detalhes sobre os
documentos em /usr/share/doc/.

<p>
As páginas de manual UNIX são geralmente mais atuais e confiáveis do que
os documentos imprimíveis. Os documentos imprimíveis algumas vezes
explicam aplicativos complicados em mais detalhes do que as páginas
de manual.

<p>
Para muitos, ter uma cópia em papel da página de manual pode ser útil.
Aqui estão algumas dicas para fazer uma cópia imprimível de uma
página de manual.

<h3>Como eu vejo uma página de manual a partir do arquivo de código
fonte (ou seja, um nome de arquivo terminado em um número, como
tcpdump.8)?</h3>

<p>
Essas páginas são encontradas na árvore src. As páginas de manual são
encontradas na árvore sem um formato, e muitas vezes, através do uso
do <a href="../../anoncvs.html">CVS</a>, elas são atualizadas.
Para ver essas páginas, simplesmente digite:

<blockquote>
<pre>
# <b>nroff -Tascii -mandoc &lt;arquivo&gt; | more</b>
</pre>
</blockquote>


<h3>Como eu obtenho uma página de manual plana, sem caracteres de
formatação ou controle?</h3>

<p>
Isto é útil para se obter uma página de manual correta, sem caracteres
não-imprimíveis.<br>
Exemplo:

<blockquote>
<pre>
# <b>man &lt;comando&gt; | col -b</b>
</pre>
</blockquote>

<h3>Como eu posso obter uma cópia PostScript, pronta para imprimir, de
uma página de manual?</h3>

<p>
Note que <tt>&lt;arquivo&gt;</tt> precisa ser o arquivo fonte da página
de manual (provavelmente um arquivo que termina em um número; por
exemplo, <tt>tcpdump.8</tt>). A versão em PostScript da página de manual
tem uma aparência muito boa. Eles podem ser imprimidos ou visualizados
na tela com um programa como gv (GhostView). O GhostView pode ser
encontrado em nossa <a href="faq15.html">coleção de pacotes</a>.
Use as seguintes opções do comando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nroff&amp;sektion=1">nroff(1)</a>
para obter a versão PostScript de uma página de manual do OpenBSD:

<blockquote>
<pre>
# <b>nroff -Tps -mandoc &lt;arquivo&gt; &gt; arquivo_de_saída.ps</b>
</pre>
</blockquote>

<h3>Como eu gero cópias comprimidas das páginas de manual?</h3>

<p>
Para as pessoas que estão construindo seu sistema a partir do código
fonte, existem várias opções relativas ao modo que as páginas de manual
são construídas. Essas opções podem ser colocadas em /etc/mk.conf (pode
ser necessário criar esse arquivo) e são usadas durante a construção
do sistema. Uma opção especialmente útil é gerar páginas de manual
comprimidas para economizar espaço em disco. Estas podem ser
visualizadas normalmente, usando o comando man. Para configurar isso,
adicione em <tt>/etc/mk.conf</tt> o seguinte:

<blockquote>
<pre>
MANZ=yes
</pre>
</blockquote>

Outra opção útil permite gerar páginas de manual no formato PostScript,
como também em texto ASCII. Isso é feito definindo a opção
<tt>MANPS=yes</tt> no /etc/mk.conf. Veja mais detalhes em
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mk.conf&amp;sektion=5">mk.conf(5)</a>.

<h3>O que são arquivos info?</h3>

<p>
Algumas das documentações do OpenBSD vêm na forma de arquivos info,
tipicamente armazenados em <tt>/usr/share/info</tt>. Essa é uma forma
alternativa de documentação fornecida pelo projeto GNU. Muitos desses
arquivos são mais atualizados que as páginas de manual fornecidas pelo
projeto GNU, e podem ser acessados com o comando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=info&amp;sektion=1">info(1)</a>.
Por exemplo, para ver informações sobre o compilador GNU,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a>,
digite:

<blockquote>
<pre>
# <b>info gcc</b>
</pre>
</blockquote>

Depois de usar o info, você irá realmente apreciar nossas páginas de
manual!

<h3>Como eu consigo páginas de manual coloridas no XTerm?</h3>

<p>
O arquivo de configuração padrão para o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xterm&amp;sektion=1">xterm(1)</a>
não mostra páginas de manual coloridas.
Para obter uma saída colorida, copie o arquivo
<tt>/etc/X11/app-defaults/XTerm-color</tt>
para o seu diretório home, e o renomeie para "<tt>.Xdefaults</tt>".
Tome cuidado para não sobrescrever alguma configuração atual no
"<tt>.Xdefaults</tt>".
Esse arquivo contém todas as configurações que você precisa para ativar
as cores no XTerm. No entanto, três linhas precisam ser descomentadas
para isso funcionar:

<blockquote>
<pre>
!*VT100*colorULMode: on
!*VT100*underLine: off
!*VT100*colorBDMode: on
</pre>
</blockquote>

O resto desse arquivo permite que você escolha cores para várias
configurações. As únicas relevantes às páginas de manual são:

<blockquote>
<pre>
*VT100*colorUL: yellow
*VT100*colorBD: white
</pre>
</blockquote>

Isso gera uma aparência terrível nas páginas de manual, então
personalize o quanto for necessário:
nós podemos sugestionar vermelho para "colorUL" e magenta para
"colorBD"?

Existe também um visualizador de páginas de manual para o X11,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xman&amp;sektion=1">xman(1)</a>,
o qual providencia uma interface alternativa (gráfica) para as páginas
de manual. Veja as páginas de manual do xterm e xman para mais
informações.

<h3>Como eu escrevo minha própria página de manual?</h3>

<p>
Se você deseja escrever sua própria página de manual para um aplicativo
que você escreveu, um tutorial é providenciado em
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mdoc.samples&amp;sektion=7">mdoc.samples(7)</a>.
Existe também um guia de referência útil providenciado em
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mdoc&amp;sektion=7">mdoc(7)</a>.

<p>
<a name="Bugs"></a>
<h2>2.4 - Como relatar falhas</h2>

Antes de gritar "Falha!", por favor tenha certeza de que é realmente o
caso. Se você não está entendendo como algumas coisas são feitas no
OpenBSD, ou como ele funciona, e não procurou resolver o problema usando
as <a href="#ManPages">páginas de manual</a> ou o sítio Web do OpenBSD,
use as <a href="#MailLists">listas de discussão</a> (normalmente a
misc@openbsd.org) para pedir ajuda. Se essa é sua primeira experiência
com OpenBSD, seja realista: você provavelmente não descobriu uma falha
desconhecida. Também note que hardware defeituoso pode parecer uma falha
de software, por favor verifique a condição atual do seu hardware antes
de decidir que você encontrou uma "falha".

<p>
Finalmente, antes de submeter qualquer relato de falha, por favor leia
<a href="../../report.html">http://www.openbsd.org/report.html</a>.

<p>
Um relato apropriado sobre uma falha é uma das mais importantes
responsabilidades dos usuários finais. Uma informação detalhada
é requerida para diagnosticar a maioria das falhas sérias.
Desenvolvedores frequentemente recebem, via correio eletrônico,
relatos de falhas como este:
<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
From: joeuser@example.com
To: bugs@openbsd.org
Subject: HELP!!!

I have a PC and it won't boot!!!!! It's a 486!!!!!
</pre></td></tr></table>

<p>
Felizmente, a maioria das pessoas entende que tais relatos são
sumariamente excluídos. Todos os relatos de falhas devem conter
informações detalhadas. Se Joe User estivesse realmente esperando
alguém para ajudá-lo a encontrar essa falha, ele ou ela deveria
fornecer mais informações... algo como isto:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
From: smartuser@example.com
To: bugs@openbsd.org
Subject: 3.3-beta panics on a SPARCStation2

OpenBSD 3.2 installed from an official CD-ROM installed and ran fine
on this machine.

After doing a clean install of 3.3-beta from an FTP mirror, I find the
system randomly panics after a period of use, and predictably and
quickly when starting X.

This is the dmesg output:
 
OpenBSD 3.3-beta (GENERIC) #9: Mon Mar 17 12:37:18 MST 2003
    deraadt@sparc.openbsd.org:/usr/src/sys/arch/sparc/compile/GENERIC
real mem = 67002368
avail mem = 59125760
using 200 buffers containing 3346432 bytes of memory
bootpath: /sbus@1,f8000000/esp@0,800000/sd@1,0
mainbus0 (root): SUNW,Sun 4/75
cpu0 at mainbus0: CY7C601 @ 40 MHz, TMS390C602A FPU; cache chip bug
- trap page uncached
cpu0: 64K byte write-through, 32 bytes/line, hw flush cache enabled
memreg0 at mainbus0 ioaddr 0xf4000000
clock0 at mainbus0 ioaddr 0xf2000000: mk48t02 (eeprom)
timer0 at mainbus0 ioaddr 0xf3000000 delay constant 17
auxreg0 at mainbus0 ioaddr 0xf7400003
zs0 at mainbus0 ioaddr 0xf1000000 pri 12, softpri 6
zstty0 at zs0 channel 0 (console i/o)
zstty1 at zs0 channel 1
zs1 at mainbus0 ioaddr 0xf0000000 pri 12, softpri 6
zskbd0 at zs1 channel 0: reset timeout
zskbd0: no keyboard
zstty2 at zs1 channel 1: mouse
audioamd0 at mainbus0 ioaddr 0xf7201000 pri 13, softpri 4
audio0 at audioamd0
sbus0 at mainbus0 ioaddr 0xf8000000: clock = 20 MHz
dma0 at sbus0 slot 0 offset 0x400000: rev 1+
esp0 at sbus0 slot 0 offset 0x800000 pri 3: ESP100A, 25MHz, SCSI ID 7
scsibus0 at esp0: 8 targets
sd0 at scsibus0 targ 1 lun 0: &lt;SEAGATE, ST1480 SUN0424, 8628&gt; SCSI2 0/direct fixed
sd0: 411MB, 1476 cyl, 9 head, 63 sec, 512 bytes/sec, 843284 sec total
sd1 at scsibus0 targ 3 lun 0: &lt;COMPAQPC, DCAS-32160, S65A&gt; SCSI2 0/direct fixed
sd1: 2006MB, 8188 cyl, 3 head, 167 sec, 512 bytes/sec, 4110000 sec total
le0 at sbus0 slot 0 offset 0xc00000 pri 5: address 08:00:20:13:10:b9
le0: 16 receive buffers, 4 transmit buffers
cgsix0 at sbus0 slot 1 offset 0x0: SUNW,501-2325, 1152x900, rev 11
wsdisplay0 at cgsix0
wsdisplay0: screen 0 added (std, sun emulation)
fdc0 at mainbus0 ioaddr 0xf7200000 pri 11, softpri 4: chip 82072
fd0 at fdc0 drive 0: 1.44MB 80 cyl, 2 head, 18 sec
root on sd0a
rootdev=0x700 rrootdev=0x1100 rawdev=0x1102


This is the panic I got when attempting to start X:

panic: pool_get(mclpl): free list modified: magic=78746572; page 0xfaa93000;
 item addr 0xfaa93000
Stopped at      Debugger+0x4:   jmpl            [%o7 + 0x8], %g0
RUN AT LEAST 'trace' AND 'ps' AND INCLUDE OUTPUT WHEN REPORTING THIS PANIC!
DO NOT EVEN BOTHER REPORTING THIS WITHOUT INCLUDING THAT INFORMATION!
ddb> trace
pool_get(0xfaa93000, 0x22, 0x0, 0x1000, 0x102, 0x0) at pool_get+0x2c0
sosend(0x16, 0xf828d800, 0x0, 0xf83b0900, 0x0, 0x0) at sosend+0x608
soo_write(0xfac0bf50, 0xfac0bf70, 0xfac9be28, 0xfab93190, 0xf8078f24, 0x0)
at soo_write+0x18
dofilewritev(0x0, 0xc, 0xfac0bf50, 0xf7fff198, 0x1, 0xfac0bf70) at
dofilewritev+0x12c
sys_writev(0xfac87508, 0xfac9bf28, 0xfac9bf20, 0xf80765c8, 0x1000, 0xfac0bf70)
at sys_writev+0x50
syscall(0x79, 0xfac9bfb0, 0x0, 0x154, 0xfcffffff, 0xf829dea0) at syscall+0x220
slowtrap(0xc, 0xf7fff198, 0x1, 0x154, 0x1, 0xfac87508) at slowtrap+0x1d8
ddb> ps
   PID   PPID   PGRP    UID  S       FLAGS  WAIT       COMMAND
 27765   8819  29550      0  3        0x86  netio      xconsole
  1668  29550  29550      0  3      0x4086  poll       fvwm
 15447  29550  29550      0  3     0x44186  poll       xterm
  8819  29550  29550     35  3      0x4186  poll       xconsole
  1238  29550  29550      0  3      0x4086  poll       xclock
 29550  25616  29550      0  3      0x4086  pause      sh
  1024  25523  25523      0  3     0x40184  netio      XFree86
*25523  25616  25523     35  2     0x44104             XFree86
 25616  30876  30876      0  3      0x4086  wait       xinit
 30876  16977  30876      0  3      0x4086  pause      sh
 16977      1  16977      0  3      0x4086  ttyin      csh
  5360      1   5360      0  3        0x84  select     cron
 14701      1  14701      0  3     0x40184  select     sendmail
 12617      1  12617      0  3        0x84  select     sshd
 27515      1  27515      0  3       0x184  select     inetd
  1904      1   1904      0  2        0x84             syslogd
  9125      1   9125      0  3        0x84  poll       dhclient
     7      0      0      0  3    0x100204  crypto_wa  crypto
     6      0      0      0  3    0x100204  aiodoned   aiodoned
     5      0      0      0  3    0x100204  syncer     update
     4      0      0      0  3    0x100204  cleaner    cleaner
     3      0      0      0  3    0x100204  reaper     reaper
     2      0      0      0  3    0x100204  pgdaemon   pagedaemon
     1      0      1      0  3      0x4084  wait       init
     0     -1      0      0  3     0x80204  scheduler  swapper

Thank you!
</pre></td></tr></table>

<p>
Veja em <a href="../../report.html">report.html</a> mais informações
sobre criação e submissão de relatos de falha. Informações detalhadas
sobre seu hardware são necessárias se você acha que a falha <i>pode
estar de algum modo</i> relacionado ao seu hardware ou à configuração
dele. Normalmente, a saída do
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>
é suficiente nesse respeito. Uma descrição detalhada do seu problema
é necessária. Você irá notar que o dmesg descreve o hardware, o texto
explica o porquê que Smart User pensa que o seu sistema não está
defeituoso (a versão 3.2 funciona corretamente), como esse travamento
foi causado (iniciando o X), e a saída dos comandos "<tt>ps</tt>" e
"<tt>trace</tt>" do depurador. Nesse caso, Smart User providenciou a
saída capturada em um  <a href="faq7.html#SerCon">console serial</a>;
se você não pode fazer isso, você vai ter que usar papel e caneta para
escrever a mensagem de travamento. (Esse foi um problema real, a
informação no relato acima ajudou a levar à correção desse problema que
afetava sistemas Sun4c.)

<p>
Se Smart User tivesse um sistema OpenBSD funcionando, a partir do qual
ele submeteria um relato de falha, ele deveria usar o utilitário
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&amp;sektion=1">sendbug(1)</a>
para submeter esse relato de falha ao GNATS, o sistema de rastreamento
de falhas. Obviamente, você não pode usar o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&amp;sektion=1">sendbug(1)</a>
quando seu sistema não inicia, mas você deve usar ele sempre que for
possível. Você vai precisar incluir informação detalhada sobre o que
aconteceu, a configuração exata do seu sistema, e como reproduzir o
problema. O comando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&amp;sektion=1">sendbug(1)</a>
requer que seu sistema esteja configurado para enviar correio eletrônico
corretamente na Internet. Note que o servidor de mensagem usa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>
baseado em "greylisting", então pode levar meia ou uma hora até que
o servidor de mensagem aceite seu relato de falha, então por favor
seja paciente.

<p>
Depois de submeter um relato de falha via sendbug(1), você será
notificado por correio eletrônico sobre o status do seu relato. Você
pode ser contatado por desenvolvedores que precisam de informações
adicionais ou com correções que precisam de testes. Você pode também
monitorar os arquivos da lista de discussão <tt>bugs@openbsd.org</tt>,
detalhes na <a href="../../mail.html">página de listas de discussão</a>,
ou consultar a base de dados dos relatos de falhas no
<a href="../../pt/query-pr.html">Sistema de Rastreamento de Falhas</a>
online.

<h3>Mais sobre como obter informações úteis para os desenvolvedores</h3>
Aqui estão algumas dicas adicionais:

<p>
<b>Perdeu a "Panic message"?</b><br>
Sob certas circunstâncias, você pode perder a primeira mensagem de
pânico, determinando a razão para o pânico.
Essa é uma mensagem muito importante, então você precisa relatá-la
também.
Você pode obter isso novamente, usando o comando "show panic" no ddb>,
algo como isto:
<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
ddb> <b>show panic</b>
0:      kernel: page fault trap, code=0
ddb>
</pre></td></tr></table>
<p>
Nesse caso, a frase de pânico foi "Kernel: page fault trap, code=0"

<p>
<b>Nota especial para sistemas SMP:</b><br>
Você deve obter um "trace" de cada processador como parte do seu relato:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
ddb{0}> <b>trace</b>
pool_get(d05e7c20,0,dab19ef8,d0169414,80) at pool_get+0x226
fxp_add_rfabuf(d0a62000,d3c12b00,dab19f10,dab19f10) at fxp_add_rfabuf+0xa5
fxp_intr(d0a62000) at fxp_intr+0x1e7
Xintr_ioapic0() at Xintr_ioapic0+0x6d
--- interrupt ---
idle_loop+0x21:
ddb{0}> <b>machine ddb 1</b>
Stopped at      Debugger+0x4:   leave
ddb{1}> <b>trace</b>
Debugger(d0319e28,d05ff5a0,dab1bee8,d031cc6e,d0a61800) at Debugger+0x4
i386_ipi_db(d0a61800,d05ff5a0,dab1bef8,d01eb997) at i386_ipi_db+0xb
i386_ipi_handler(b0,d05f0058,dab10010,d01d0010,dab10010) at i386_ipi_handler+0x
4a
Xintripi() at Xintripi+0x47
--- interrupt ---
i386_softintlock(0,58,dab10010,dab10010,d01e0010) at i386_softintlock+0x37
Xintrltimer() at Xintrltimer+0x47
--- interrupt ---
idle_loop+0x21:
ddb{1}>
</pre></td></tr></table>

<p>
Repita o "<tt>machine ddb x</tt>" seguido por "<tt>trace</tt>" para cada
processador em sua máquina.
<p>

<h3>Como reunir mais informações de um travamento de kernel.</h3><p>
Um típico travamento de kernel pode se parecer com isto:
(as coisas para serem olhadas estão marcadas com a fonte em negrito)<p>

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
kernel: page fault trap, code=0
Stopped at    <b>_pf_route+0x263</b>:        mov     0x40(%edi),%edx
ddb&gt;
</pre></td></tr></table><p>

O primeiro comando para ser executado a partir do prompt ddb> é o
"trace" (veja mais detalhes em
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ddb">ddb(4)</a>):<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
ddb&gt; trace
<b>_pf_route</b>(e28cb7e4,e28bc978,2,1fad,d0b8b120) at <b>_pf_route+0x263</b>
_pf_test(2,1f4ad,e28cb7e4,b4c1) at _pf_test+0x706
_pf_route(e28cbb00,e28bc978,2,d0a65440,d0b8b120) at _pf_route+0x207
_pf_test(2,d0a65440,e28cbb00,d023c282) at _pf_test+0x706
_ip_output(d0b6a200,0,0,0,0) at _ip_output+0xb67
_icmp_send(d0b6a200,0,1,a012) at _icmp_send+0x57
_icmp_reflect(d0b6a200,0,1,0,3) at _icmp_reflect+0x26b
_icmp_input(d0b6a200,14,0,0,d0b6a200) at _icmp_input+0x42c
_ipv4_input(d0b6a200,e289f140,d0a489e0,e289f140) at _ipv4_input+0x6eb
_ipintr(10,10,e289f140,e289f140,e28cbd38) at _ipintr+0x8d
Bad frame pointer: 0xe28cbcac
ddb&gt; 
</pre></td></tr></table><p>

Isso nos diz qual chamada de função levou ao travamento.<p>

Para encontrar a linha específica de código fonte na linguagem C
que causou o travamento, você pode fazer o seguinte:<br>
Encontre o arquivo de código fonte onde a função que causou o travamento
está definida.
Neste exemplo, ela seria pf_route() em sys/net/pf.c.
Recompile este arquivo de código fonte com informações de depuração:<p>

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
# cd /usr/src/sys/arch/$(uname -m)/compile/GENERIC/
# rm pf.o
# DEBUG=-g make pf.o
</pre></td></tr></table><p>
Então utilize o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=objdump">
objdump(1)</a> para obter o objeto desmontado:<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
# objdump --line --disassemble --reloc pf.o &gt;pf.dis
</pre></td></tr></table><p>

Na saída, utilize o grep para encontrar o nome da função (pf_route, no
nosso exemplo):<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
# grep "&lt;_pf_route&gt;:" pf.dis
0000<b>7d88</b> &lt;_pf_route&gt;:
</pre></td></tr></table><p>

Pegue esse primeiro número hexadecimal e adicione o "offset" da linha
'Stopped at':
<b>0x7d88</b> + <b>0x263</b> == <b>0x7feb</b>.<br>
Role para baixo até aquela linha (a instrução do montador deve
corresponder àquela delimitada na linha 'Stopped at'), então levante
até o número de linha mais próximo do código fonte na linguagem C:<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
# more pf.dis
/usr/src/sys/arch/i386/compile/GENERIC/../../../../net/pf.c:<b>3872</b>
    7fe7:       0f b7 43 02             movzwl 0x2(%ebx),%eax
    <b>7feb</b>:       8b 57 40                mov    0x40(%edi),%edx
    7fee:       39 d0                   cmp    %edx,%eax
    7ff0:       0f 87 92 00 00 00       ja     8088 &lt;_pf_route+0x300&gt;
</pre></td></tr></table><p>

Portanto, é precisamente a linha <b>3872</b> do pf.c que causa o
travamento:<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
# cat -n pf.c | head -n 3872 | tail -n 1
3872          if ((u_int16_t)ip-&gt;ip_len &lt;= ifp-&gt;if_mtu) {
</pre></td></tr></table><p>

Note que o kernel que produziu a saída do travamento e o arquivo objeto
para o objdump devem ser compilados a partir do mesmo arquivo de código
fonte, caso contrário os offsets não corresponder-se-ão.<p>

Se você fornecer a saída do trace do ddb> e a seção relevante do
objdump, isso será muito útil no relato da falha.

<p>
<font color="#0000e0">
<a href="index.html">[Índice da FAQ]</a>
<a href="faq1.html">[Seção 1 - Introdução ao OpenBSD]</a>
<a href="faq3.html">[Seção 3 - Primeiros passos com o OpenBSD]</a>
</font>

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../images/back.gif" border="0" alt="[voltar]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq2.html,v 1.106 ]<br>
$Translation: faq2.html,v 1.14 2010/07/27 12:18:08 renato Exp $<br>
-->
$OpenBSD: faq2.html,v 1.11 2010/07/30 16:48:34 ajacoutot Exp $
</small>

</body>
</html>
