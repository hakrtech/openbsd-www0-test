<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Der Entwicklung von -current folgen</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Language" content="de">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "Die OpenBSD-FAQ-Seite">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "Dieses Dokument unterliegt dem Copyright von OpenBSD 2005.">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../../de/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ-Index]</a>
</font>

<p>

<h1><font color="#e00000">Der Entwicklung von <i>-current</i>
folgen</font></h1>
<hr>

<h3>Inhaltsverzeichnis</h3>
<p>
<ul>
<li><a href="#Intro">Einführung</a>
<!-- Ältester Eintrag oben ... -->
<li><a href="#20050927">2005-09-27 - Die Erzeugungsphase benötigt eine
neue Funktionalität von xargs</a>
<li><a href="#20051006">2005-10-06 - Änderungen an MAKEDEV(8) und
ksh(1)</a>
<li><a href="#20051116">2005-11-16 - Neue Version von ftp-proxy(8)</a>
<li><a href="#20051216">2005-12-16 - libresolv wurde entfernt</a>
<li><a href="#20060104">2006-01-04 - mac68k-Wechsel auf wsconcs(4)</a>
<li><a href="#20060113">2006-01-13 - Typenänderungen</a>
<!-- Neueste Änderungen bitte am Ende der Liste -->
</ul>
    
<hr>

<a name="Intro"></a>
<XXXversion>
<h2>Einführung</h2>
Dieses Dokument richtet sich an alle, die der Entwicklung von
<i>-current</i> folgen möchten. Es enthält Informationen über die
Änderungen, die seit dem 3.8-Release an <i>-current</i> gemacht
wurden, sollte aber NICHT von Personen genutzt werden, die von 3.7 oder
einem früheren Release upgraden oder
<a href="../../de/stable.html"><i>-stable</i></a> verwenden wollen.

<p>
Wenn du von einem früheren Release auf 3.8-release oder 3.8-stable
aktualiseren möchtest, lies bitte die
<a href="upgrade38.html">Upgrade</a>anleitung.

<p>
Lies und verstehe unbedingt <a href="faq5.html">FAQ 5 - Das System
aus dem Source-Code erzeugen</a> bevor du -current und die folgenden
Anweisungen verwendest.

<p>
Du solltest IMMER einen Snapshot als Ausgangslage wählen, wenn du
<i>-current</i> einsetzen möchtest. Das Upgraden mittels
Kompilieren deines eigenen Quelltextes wird nicht unterstützt.
   
<p>
Wenn du Upgradeinformationen für frühere Releases von OpenBSD
sehen möchtest, wirf einen Blick auf
<a href= "upgrade-old.html">upgrade-old.html</a>.
Diese Seite wird als Geschichtsreferenz geführt - sie sollte NICHT
als eine Anleitung für ein Upgradeprozess genutzt werden.

<p>
<a name="20050927"></a>
<h3>2005-09-27 - Die Erzeugungsphase benötigt eine neue Funktionalität
von xargs</h3>

Übersetze und installiere xargs(1).
<pre>
     # cd /usr/src/usr.bin/xargs && make obj && make && make install
</pre>
Führe dann make build aus.

<p>
<a name="20051006"></a>
<h3>2005/10/06 - Änderungen an MAKEDEV(8)</h3>

Änderungen wurden an MAKEDEV gemacht, um dessen Geschwindigkeit
deutlich zu verbessern. Diese Änderungen bauen auf den Änderungen auf,
die zuvor an ksh gemacht wurden. Installationsmedien, die vor diesem
Tag erstellt wurden, können daher nicht mehr verwendet werden.
<br>

<p>
<a name="20051116"></a>
<h3>2005-11-16 - Neue Version von ftp-proxy(8)</h3>

Der ftp-proxy wurde durch den Proxy ersetzt, der zuvor pftpx genannt
wurde. Der neue ftp-proxy läuft nun selbstständig und muss nicht mehr
von inetd.conf aus aufgerufen werden, wie das zuvor der Fall war.
<p>
Dies ist die Upgradeanleitung:
<p>
Beende den alten ftp-proxy, indem du eine neue /etc/inetd.conf
installierst oder einfach per Hand den Eintrag aus der /etc/inetd.conf
entfernst oder kommentierst.

<pre>
cp /usr/src/etc/inetd.conf /etc/inetd.conf
</pre>

Sende dann ein HUP-Signal an inetd mittels kill:
<p>
<pre>
kill -HUP `cat /var/run/inetd.pid`
</pre>

Starte den neuen ftp-proxy, indem du das neue
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&apropos=0&sektion=0&manpath=OpenBSD+Current&arch=i386&format=html"><i>/etc/rc</i></a>-Skript
und die neue
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&apropos=0&sektion=0&manpath=OpenBSD+Current&arch=i386&format=html"><i>/etc/rc.conf</i></a>
installierst und danach ftpproxy_flags="" in /etc/rc.conf.local
einträgst.

<pre>
cp /usr/src/etc/{rc,rc.conf} /etc
echo 'ftpproxy_flags=""' >> /etc/rc.conf.local
</pre>

Alternativ dazu kann er gestartet werden, indem einfach
/usr/sbin/ftp-proxy in /etc/rc.local aufgerufen wird.
<p>

Der neue Proxy verwendet
<a href="../pf/de/anchors.html"><i>Anker</i></a>, um Datenverbindungen
zu erlauben. Das bedeutet, dass
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&apropos=0&sektion=0&manpath=OpenBSD+Current&arch=i386&format=html"><i>/etc/pf.conf</i></a>
angepasst werden muss. In der NAT-Sektion benötigt man:
<p>

<pre>
nat-anchor "ftp-proxy/*"
rdr-anchor "ftp-proxy/*"
</pre>

Diese sind notwendig selbst wenn du sonst kein NAT verwendest. Die
folgende Regel, die eventuell schon für den alten ftp-proxy eingetragen
wurde, muss bleiben:
<pre>
rdr pass on $int_if proto tcp from $lan to any port 21 -> \
    127.0.0.1 port 8021
</pre>

In dieser Regelsektion wird Folgendes benötigt:

<pre>
anchor "ftp-proxy/*"
</pre>

Regeln, die dem Proxy erlauben, FTP-Kontrollverbindungen
(Zielport 21/tcp) aufzubauen, müssen bleiben. Regeln, die
FTP-Datenverbindungen erlauben, werden nicht länger benötigt. Derartige
Regeln können Begriffe wie »user proxy« oder »to port > 49151«
enthalten.

Die übergebenen Kommandoparameter müssen auf ähnliche Weise
sorgfältig überprüft werden, da sich einige geändert haben könnten.
Siehe in der Manualseite von
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&apropos=0&sektion=0&manpath=OpenBSD+Current&arch=i386&format=html">ftp-proxy</a>
nach.
<p>

Ein Fall muss besonders hervorgehoben werden: wenn du alte Clients hast,
die auf Datenverbindungen im aktiven Modus aufbauen (20/tcp als
Quellport), muss der Parameter -r übergeben werden (den alten Proxy
musste man in diesem Fall mit »-u root« aufrufen).
<p>
Führe ftp-proxy mit »-d -D7« aus, wenn du Probleme hast und untersuchen
möchtest, was gerade passiert.

<p>
<a name="20051216"></a>
<h3>2005-12-16 - libresolv wurde entfernt</h3>

Du musst libresolv von deiner Maschine entfernen, da sie nicht länger
installiert wird.
<pre>
     # rm /usr/lib/libresolv*
</pre>

<p>
<a name="20060104"></a>
<h3>2006-01-04 - mac68k-Wechsel auf wscons(4)</h3>
Vor dem Reboot mit dem neuen Kernel müssen Systemdateien für
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&amp;sektion=4">wscons(4)</a>
aktualisiert werden.
</p>

<pre>
     # cp /usr/src/etc/etc.mac68k/MAKEDEV /dev
     # cd /dev &amp;&amp; sh ./MAKEDEV wscons
</pre>

<p>
Ändere in <tt>/etc/ttys</tt> das getty <em>ttye0</em> in <em>ttyC0</em>
und reboote nun mit dem neuen Kernel.
</p>

<p>
<a name="20060113"></a>
<h3>2006-01-13 - Typenänderungen</h3>
Bevor ein »make build« aufgerufen werden kann, muss der Kompiler neu
übersetzt und installiert werden. Sollte dies nicht geschehen, kann
libstdc++ nicht erzeugt werden.

<p>
Folge den Instruktionen, die in <a href="faq5.html#NewCompiler">FAQ
5 - Wie führe ich ein Bootstrap für eine neue Version des Kompilers
aus?</a> aufgeführt werden, um weitere Details zu erfahren.

<p>

<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ-Index]</a>
</font>
<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: current.html,v 1.29 ]
$Translation: current.html,v 1.7 2006/01/26 15:29:20 paldium Exp $
-->
$OpenBSD: current.html,v 1.5 2006/01/29 17:44:27 jufi Exp $
</small>

</body>
</html>
