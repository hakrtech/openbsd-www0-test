<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>11 - Das X Fenstersystem</title>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD FAQ 11 - The X Window System">
<meta name="keywords" content="openbsd,faq11">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1998-2012 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000">

<a href="../../de/index.html">
<img alt="[OpenBSD]" src="../../images/smalltitle.gif" border="0" height="30" width="141">
</a>
<p>
<font color="#0000e0">
<a href="index.html">[FAQ-Index]</a>
<a href="faq10.html">[Zum Kapitel 10 - Systemverwaltung]</a>
<a href="faq12.html">[Zum Kapitel 12 - Hardware- und Plattformspezifische Fragen]</a>
</font>

<h1><font color="#e00000">11 - Das X Fenstersystem</font></h1>
<hr>

<p>
<h3>Inhaltsverzeichnis</h3>
<ul>
<li><a href="#Intro"       >11.1 - Einführung in X</a>
<li><a href="#ConfigX"     >11.2 - Konfiguration von X</a>
<li><a href="#amd64i386"   >11.3 - Konfiguration von X auf amd64 und i386</a>
<li><a href="#StartingX"   >11.4 - X starten</a>
<li><a href="#CustomizingX">11.5 - X anpassen</a>
</li>
</ul>

<hr>

<p>
<a name="Intro"></a>
<h2>11.1 - Einführung in X</h2>

Das X Fenstersystem (»X Window System«; manchmal nur »X« oder fälschlicherweise
»X Windows« genannt) ist eine grafische Umgebung, die Grafikanwendungen unter
OpenBSD und anderen Unix-basierten Systemen benötigte Funktionen anbietet.
X selbst stellt aber nur wenig bereit: Man muss ebenfalls einen »Window
Manager« haben, um eine Benutzerschnittstelle zu schaffen. Das meiste
der sogenannten »Personality« von X wird vom Windowmanager ausgehen
statt von X selbst.
OpenBSD bringt freie Versionen der
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fvwm&amp;sektion=1">fvwm(1)</a>
und
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm&amp;sektion=1">cwm(1)</a>
Fenstermanager mit.
Wenn du möchtest, kannst du auch einen der anderen
Windowmanager verwenden, die als <a href="faq15.html">Pakete</a>
bereitgestellt werden. Verwende das Suchwort »<tt>window manager</tt>«,
um eine Liste der vielen verfügbaren Windowmanager zu erhalten.

<p>
X wird als »Client-Server«-strukturiertes Protokoll aufgefasst,
obwohl die Terminologie manchmal etwas verwirrend ist.
Der Computer, der die Grafik auf dem Bildschirm anzeigt, ist der
»X-Server«. Die Anwendung, die dem X-Server mitteilt, was auf
dem Bildschirm angezeigt werden soll, ist der »X-Client«, selbst
wenn es sich hierbei um einen leistungsstärkeren Computer in einem
Rechenzentrums handelt. Dieses Modell kann genutzt werden, um
rechenintensive Anwendungen (X-Clients) auf sehr leistungsstarken
Maschinen auszuführen, die den X-Server als Benutzerschnittstelle
verwenden, der auf einer kleinen und stromsparenden Maschine auf
deinem Schreibtisch läuft.

<p>
Es ist möglich, X-Clients auf einem System auszuführen, das über
keine grafische Ausgabemöglichkeit verfügt. Man könnte zum
Beispiel eine Anwendung (den X-Client) auf einer mvme88k
ausführen und die Ausgabe auf einem Bildschirm einer Alpha anzeigen
lassen (der X-Server). Da X ein klar definiertes und
plattformübergreifendes Protokoll ist, ist es sogar möglich, eine
X-Anwendungen auf einer (beispielsweise) Solaris-Maschine auszuführen
und auf einer OpenBSD-Maschine anzeigen zu lassen.

<p>
Der Client und der Server können auch auf dem gleichen System laufen.
Im Rest dieses Kapitels gehen wir hiervon aus.

<h3>11.1.1 - Wieviel Rechenleistung benötige ich, um X verwenden zu
können?</h3>
X selbst ist ein recht großes Programm, sodass ein schneller Rechner
bestens geeignet ist, wenn du es regelmäßig an- und ausstellst. Wenn
es aber erst einmal läuft, dann reicht auch ein sehr bescheidener
Rechner.
Eine Plattformen benötigen X grundsätzlich für eine responsive
Bildschirmausgabe, sogar für die reinen Texts.
Diese Plattformen, zu denen <a href="../../de/sparc.html">sparc</a> und
<a href="../../de/sparc64.html">sparc64</a> gehören, wurden für die Benutzung
über eine grafische Oberfläche entworfen, und die Performance ihrer
Textkonsolen ist sehr schlecht.

<p>
Soweit zur Grundlage. X wird normalerweise gestartet, um X-Anwendungen
aufrufen zu können. Einige X-Applikationen sind sehr genügsam, andere
scheinen sich hingegen alle Rechenleistung und verfügbaren RAM unter
den Nagel zu reißen. Selbstverständlich gibt es auch Leute, die X
verwenden, um eine große Anzahl
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xterm&amp;sektion=1">xterm(1)</a>s
aufzurufen - hierfür reicht auch sehr schlichte Hardware.

<h3>11.1.2 - Kann ich auch Grafiken ohne X verwenden?</h3>
Angenommen dir genügen
<a href="http://en.wikipedia.org/wiki/ASCII_Art">ASCII-Grafiken</a>
nicht, so musst du auf eine Art von Framebuffer-Konsolentreibern
zurückgreifen. Einige Betriebssysteme stellen diese zur Verfügung,
doch gibt es momentan keine für OpenBSD. Unter den Entwicklern hat
auch niemand großes Interesse daran.

<p>
<a name="ConfigX"></a>
<h2>11.2 - Konfiguration von X</h2>
<b>Gute Neuigkeiten: Für die überwiegende Mehrheit an Hardware der meisten
Plattformen benötigt X überhaupt keine Konfiguration, sondern funktioniert
einfach.</b>

<p>
Die Details der manuellen Konfiguration von X unterscheidet sich deutlich
zwischen den einzelnen Plattformen.
In allen Fällen gibt es aber Anleitungen und
andere plattformspezifische Informationen in
<tt>/usr/X11R6/README</tt>, die auf einem installierten System
vorgefunden werden kann.


<p>
Viele Plattformen benötigen den X-Aperturetreiber
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&amp;sektion=4">xf86(4)</a>,
der direkten Zugriff auf den Speicher und die Ein-/Ausgabeports
des VGA-Boards und der PCI-Konfigurationsregister ermöglicht, was für
die X-Server eine Voraussetzung ist. Dieser Treiber muss aktiviert
werden, bevor er genutzt werden kann - entweder indem mit »Yes« auf
die Frage

<blockquote><pre>
Do you expect to run the X window System [no]
</pre></blockquote>

geantwortet wird (diese ist während der Installation zu sehen) oder
indem man <tt>machdep.allowaperture</tt> in der
<tt>/etc/sysctl.conf</tt> auf einen der Plattform entsprechenden
Wert setzt (dieser darf nicht 0 sein) und neustartet, da diese
Sysctl aus Sicherheitsgründen nach dem Bootvorgang nicht mehr geändert
werden kann. Die Verwendung des Treibers zieht Sicherheitsbedenken
nach sich. Du solltest ihn nicht aktivieren, wenn du nicht unbedingt
auf ihn angewiesen bist.


<h3>11.2.1 - alpha</h3>
<a
href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.alpha"
>/usr/X11R6/README</a> für alpha.

<p>
Setze <tt>machdep.allowaperture=1</tt> in <tt>/etc/sysctl.conf</tt>.

<p>
Die TGA- und einige VGA-Karten werden unterstützt. Es sollte keine
weitere Konfiguration notwendig sein.

<h3>11.2.2 - amd64</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.amd64"
>/usr/X11R6/README</a> für amd64.

<p>
Setze <tt>machdep.allowaperture=2</tt> in <tt>/etc/sysctl.conf</tt>.

<p>
Für die überwiegende Mehrheit von Benutzern wird X auf amd64 erfolgreich
automatisch konfiguriert, sodass keinerlei weitere Konfiguration nötig ist.
WENN eine weiterführende Konfiguration nötig ist, benutze
<a href="#amd64i386">X&nbsp;-configure</a> wie weiter
<a href="#amd64i386example">unten</a> beschrieben.

<h3>11.2.3 - armish</h3>
Es stehen keine X-Server bereit, nur X-Clients.

<h3>11.2.4 - hp300</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.hp300"
>/usr/X11R6/README</a> für hp300.

<h3>11.2.5 - hppa</h3>
Es stehen keine X-Server bereit, nur X-Clients.

<h3>11.2.6 - i386</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.i386"
>/usr/X11R6/README</a> für i386.

<p>
Setze <tt>machdep.allowaperture=2</tt> in <tt>/etc/sysctl.conf</tt>.

<p>
Für die überwiegende Mehrheit von Benutzern wird X auf i3864 erfolgreich
automatisch konfiguriert, sodass keinerlei weitere Konfiguration nötig ist.
WENN eine weiterführende Konfiguration nötig ist, benutze
<a href="#amd64i386">X&nbsp;-configure</a> wie weiter
<a href="#amd64i386example">unten</a> beschrieben.

<h3>11.2.7 - landisk</h3>
Es stehen keine X-Server bereit, nur X-Clients.

<h3>11.2.8 - loongson</h3>
Es wird keine Konfiguration benötigt.

<h3>11.2.9 - luna88k</h3>
Es stehen keine X-Server bereit, nur X-Clients.

<h3>11.2.10 - macppc</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.macppc"
>/usr/X11R6/README</a> für macppc.

<p>
Setze <tt>machdep.allowaperture=2</tt> in <tt>/etc/sysctl.conf</tt>.

<p>
Unterstützte Macintosh-PPC-Systeme können auf zwei unterschiedliche
Weisen verwendet werden:
»beschleunigt« oder »Framebuffer« (unbeschleunigt).

<p>
Im »Framebuffer«-Modus wird das System mit 8 Bits pro Pixel arbeiten
und die Videoauflösung wird von der Macintosh-Umgebung geregelt. Das
bedeutet, dass du eine kleine MacOS-Partition auf deiner Platte
belassen möchtest, um von dort aus diese Einstellungen anzupassen.
Dieser Modus hat den Vorteil, dass er »einfach funktioniert«, doch
kann es frustrierend einschränkend sein (zum Beispiel setzt eine
Änderung der Auflösung einen Boot von MacOS voraus).

<p>
Wenn dein Macintosh ein ATI-basiertes Videosystem hat, kannst du es
mit einem beschleunigten X-Server verwenden. Dieser liefert bessere
Geschwindigkeiten und mehr Kontrolle in deiner OpenBSD-Umgebung.
Die NVIDIA-Grafikkarten einiger macppc-Systeme werden auch in vielen
Fällen funktionieren.
Die Datei README hat Details über die Konfiguration beschleunigter Treiber,
starte daher mit der dort gezeigten Beispieldatei.

<p>
Während die README-Datei detailliert auf die Verwendung der Standardmaus
von Apple mit nur einer Taste unter X eingeht, wird dir dringend dazu
geraten, dir einfach eine USB-Maus eines Drittanbieters mit drei oder mehr
Knöpfen zu kaufen - es sei denn, du verwendest einen Laptop.

<h4>Röhrenmonitor-iMacs und X</h4>
iMacs haben einen (für die heutige Zeit) sehr ungewöhnlichen Röhrenmonitor,
da dieser über eine feste horizontale Ablenkfrequenz verfügt.
Der Versuch, eine horizontale Bildaufbaugeschwindigkeit jenseits eines sehr
engen Bereichs zu nutzen, wird dazu führen, dass der Monitor nicht leuchtet.
Die folgenden Zeilen, hinzugefügt zu dem Abschnitt <tt>Section "Monitor"</tt>
der Datei xorg.conf, scheint viele Röhrenmonitor-basierte iMacs aus dem
Bereich 333 MHz bis 500 MHz (und vielleicht mehr) dazu zu bringen, ordentlich
zu laufen:

<blockquote><pre>
        HorizSync       60.0 - 60.0
        VertRefresh     43.0 - 117.0 
</pre></blockquote>

Vielleicht möchtest du die untere Grenze von <tt>VertRefresh</tt> auf Werte
beschränken, die du eher akzeptabel findest, zum Beispiel 70.

<h3>11.2.11 - mvme68k</h3>
Es stehen keine X-Server bereit, nur X-Clients.

<h3>11.2.12 - mvme88k</h3>
Es stehen keine X-Server bereit, nur X-Clients.

<h3>11.2.13 - sgi</h3>
X läuft auf dem O2 Bildpuffer (»frame buffer«) des Systems im unbeschleunigten
Modus.

<h3>11.2.14 - sparc</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.sparc"
>/usr/X11R6/README</a> für sparc.

<p>
Mit nur einem unterstützten Framebuffer wird keine Konfiguration
benötigt. Wenn du eine Multihead-Konfiguration verwenden möchtest,
wirf einen Blick auf die zuvor genannte README-Datei für weitere
Details.

<p>
Die Auflösung wird von der Firmware eingestellt, bevor OpenBSD bootet.

<h3>11.2.15 - sparc64</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.sparc64"
>/usr/X11R6/README</a> für sparc64.

<p>
Die meisten einfachen Konfigurationen »laufen einfach«.
Tut es deine nicht, oder solltest du wünschen raffiniert zu werden, lies die
oben angeführte README-Datei.

<h3>11.2.16 - vax</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.vax"
>/usr/X11R6/README</a> für vax.

<p>
Der X-Server funktioniert momentan nur auf VAXstation-4000-Modellen mit
einem
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lcg&amp;sektion=4&amp;arch=vax">lcg(4)</a>-
oder
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lcspx&amp;sektion=4&amp;arch=vax">lcspx(4)</a>-Framebuffer.

<h3>11.2.17 - zaurus</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.zaurus"
>/usr/X11R6/README</a> für zaurus.

<p>
Es wird keine Konfiguration benötigt, X »funktioniert einfach«.


<p>
<a name="amd64i386"></a>
<h2>11.3 - Konfiguration von X auf amd64 und i386</h2>
Wenn du noch nicht versucht hast,
<a href="#StartingX">X einfach zu starten</a>, so warte!
Produziere für dich selbst keine Arbeit, wenn du nicht musst!
Die meisten Nutzer von i386 und amd64 werden auch ohne manuelle Konfiguration
schlichtweg ein funktionierendes X vorfinden.

<h3>11.3.1 - Konfiguration von X.Org</h3>
Manchmal funktioniert X nicht »einfach so« wie gewünscht, und manchmal muss man
Dinge anpassen, obwohl sie funktionieren.

<p>
Funktioniert X nicht wie gewünscht auf einem System, so muss man eine
Konfigurationsdatei erzeugen.
Ein guter Startpunkt (und manchmal bereits das Ziel!) ist das Ausführen von
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=Xorg&amp;sektion=1"
>Xorg(1)</a> im Modus »X -configure«.
Letzterer wird alle verfügbaren Grafikkartentreiber laden, andere Hardware
austesten, und, basierend auf dem, was vorgefunden wurde, eine Datei xorg.conf
schreiben, die funktionieren kann, aber nicht muss.
Selbst wenn sie nicht funktionieren sollte, wird sie immer noch als nützliche
Grundlage für eine dienen, die funktioniert wie gewünscht.

<p>
Eine altehrwürdige Methode zur Konfiguration von X ist die Benutzung deiner
favorisierten Suchmaschine, um nach jemanden zu suchen, der dein Problem
bereits für dich gelöst hat.
Ebenfalls bemerkenswert ist, dass die <tt>xorg.conf</tt>-Dateien anderer
UNIX-ähnlicher Betriebssysteme oft nützliche Tipps darüber enthalten, was
letztendlich benötigt wird, um X auf ähnlicher Hardware zum Laufen zu bringen.
Obwohl dies kein schlechter Weg ist, wird auf diese Methode hier nicht näher
eingegangen.

<p>
<a name="amd64i386example"></a>
<h3>11.3.2 - Unsere Beispielmaschine</h3>
Als Demonstration, wie man X einrichtet, werden wir ein altes
System mit einem Celeron 400 MHz und einem AGP-Steckplatz verwenden.
Bei der Grafikkarte handelt es sich um eine alte AGP-Karte, die wie
folgt in der Dmesg aufgelistet wird:

<blockquote><pre>
vga1 at pci1 dev 0 function 0 "3DFX Interactive Banshee" rev 0x03
</pre></blockquote>

Dies war einmal eine Highend-Grafikkarte mit 16 MB RAM, doch wird
sie heutzutage von »gängigen« Betriebssystemen fast nicht mehr
unterstützt. Des Weiteren wird ein Sony Multiscan G400 19" CRT als
Monitor angeschlossen. Es wäre schön, wenn dieser Monitor bei einer
Auflösung von 1280x1024, einer angenehmen Bildwiederholrate und
24 Bit Farbtiefe genutzt werden kann.

<p>
Nachdem OpenBSD mit X installiert wurde (wir haben sichergestellt,
dass der Aperturetreiber im Kernel aktiviert wurde) werfen wir zuerst
einen Blick auf die automatische Erkennung und Konfiguration von X.Org
- vielleicht haben wir Glück. So, wir loggen uns einfach ein und rufen
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=startx&amp;sektion=1">startx(1)</a>
auf. Der Bildschirm wird für ein paar Momente schwarz, dann erhalten
wir den »Schachbrett«-Hintergrund von X, den »X«-Cursor und ein
xterm-Fenster.

<p>
Es funktioniert!

<p>
Mehr oder weniger. Obwohl das System voll einsatzfähig ist, scheint es
keine Funktionalitäten des Monitors erkannt zu haben und läuft auf
einer eindeutig zu niedrigen Auflösung (640x480). Wir hoffen mal, dass
wird das noch besser hinbekommen - damit meine ich sehr viel besser.
Das heißt also, dass wir unsere eigene xorg.conf-Datei erstellen müssen.

<p>
Wir verwenden die »X -configure«-Methode, um eine Grundlage für unsere
<tt>xorg.conf</tt>-Datei zu schaffen. Du musst folgenden Befehl als
root ausführen:
<blockquote><pre>
# <b>X -configure</b>
 [...]
Your xorg.conf file is /root/xorg.conf.new

To test the server, run 'X -config /root/xorg.conf.new'
</pre></blockquote>

Im Übrigen muss die Meldung ernst genommen werden - verwende den
vollständigen Pfad zu deiner <tt>xorg.conf.new</tt>-Datei, selbst wenn
du dich im gleichen Verzeichnis befindest.
Dies nicht zu tun führt dazu, dass
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=X&amp;sektion=7">X(7)</a>
die Datei nicht findet, und ohne weitere Meldung die Standardkonfiguration
benutzen; und wenn diese funktioniert hätte, dann hättest du diesen Vorgang ja
nicht durchgeführt!
Es kann die Fehlersuche deutlich vereinfachen.
Vertraue uns in diesem Punkt.

<p>
Wir führen also aus, was uns gesagt wird:
<blockquote><pre>
# <b>X -config /root/xorg.conf.new</b>
</pre></blockquote>

Alles was wir kriegen ist ein schwarzes Bild.
Dabei hat es so gut angefangen ...

<p>
Nun ist ein guter Zeitpunkt gekommen, um über die unterschiedlichen
Möglichkeiten zu sprechen, X zu beenden, wenn es auf diese Weise
gestartet wurde. Nach Vorzug sortiert sind es:
<ul>
<li><b>STRG-ALT-Backspace</b>: Dies wird X hoffentlich sofort
terminieren - mit samt allen X-Anwendungen, die momentan laufen.
Selbstverständlich werden während der Konfiguration keine Anwendungen
laufen, sodass dies kein Problem darstellen wird (genau genommen ist
es zu diesem Zeitpunkt die <i>beste</i> Möglichkeit, X zu beenden).
<li><b>Mit SSH auf den Rechner zugreifen</b> und
»<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkill&amp;sektion=1">pkill</a>
Xorg« aufrufen. Dies könnte den X-Prozess beenden und dich zurück auf
eine funktionierende Konsole befördern.
<li><b>Mit SSH auf den Rechner zugreifen</b> und ihn neustarten.
<li><b>Reset oder Runterfahren.</b> Manchmal gibt es wirklich keinen
anderen Ausweg. Ja, es ist grundsätzlich eine gute Idee, X konfiguriert
zu haben, bevor du wichtige Anwendungen auf deinem System ausführst.
Manchmal kann es vorkommen, dass eine schlechte X-Konfiguration die
gesamte Maschine in die Knie zwingt, sodass nur noch aus- und wieder
anstellen das Problem beheben kann.
</ul>

Zum Glück verrichtet STRG-ALT-Backspace erfolgreich seine Dienste und
wir befinden uns wieder in der Kommandozeile. Nun müssen wir
herausfinden, was fehlgeschlagen ist. Zuerst sollten wir nachsehen, was
Xorg über die Hardware denkt. Das können wir in der Datei
<tt>/var/log/Xorg.0.log</tt> nachlesen. In diesem Fall denkt X, dass
alles einwandfrei läuft - keine offensichtlich schwerwiegenden
Fehler werden in der Logdatei aufgeführt (Zeilen, die mit
»<tt>EE</tt>« beginnen, sind Fehler).

<p>
An dieser Stelle kommt unser Wissen über die Hardware ins Spiel. Wenn
wir das System an einen anderen Monitor anschließen, während ein
schwarzes Bild angezeigt wird, gibt er uns eine
»Sync. out of Range«-Meldung auf dem Bildschirm aus. Offensichtlich
scheint die Konfiguration von X nicht mit diesem Monitor zu
funktionieren. Eventuell läuft diese Konfiguration auf KEINEM Monitor,
wenn ein Videomodus ausgewählt wurde, der mit der Karte nicht zusammen
funktioniert (beachte bitte, dass X sich am Chip auf der Karte
und dessen Leistung orientiert - nicht daran, wie der Hersteller die
Komponenten zusammengestellt hat). Unterschiedliche Monitore werden
verschieden reagieren, wenn die Rate falsch ist. Einige werden
versuchen, das Bild anzuzeigen, andere werden in den Energiesparmodus
wechsel, andere schreckliche Geräusche von sich geben und wieder
andere werden hilfreiche Meldungen auf dem Bildschirm angeben. Dieser
Bildschirm scheint zu keiner der zuvor genannten Arten gehören. Wir
merken uns einfach, diesen Monitor NIE wieder für grundlegende
X-Konfigurationen zu verwenden.

<p>
Während wir durch die erstellte xorg.conf.new-Datei gehen, sehen wir
folgenden Eintrag:
<blockquote><pre>
Section "Monitor"
        #DisplaySize      370   270     # mm
        Identifier   "Monitor0"
        VendorName   "SNY"
        ModelName    "SONY CPD-G400"
 ### Comment all HorizSync and VertSync values to use DDC:
        HorizSync    30.0 - 107.0
        VertRefresh  48.0 - 120.0
        Option      "DPMS"
EndSection
</pre></blockquote>

Zum Testen werden wir einen DDC-Monitor (»Data Display Channel« - damit
kann der Monitor dem Computer und der Grafikkarte mitteilen, wozu er
in der Lage ist) verwenden und sehen, was geschieht. Dieses Mal erhalten
wir wieder das Schachbrettmuster von X und einen beweglichen Cursor. Das
ist alles, was wir von X erwarten, wenn wir es so aufrufen (wir beenden
X mit dem STRG-ALT-Backspace-Trick von vorhin). Es ist (wieder) eine
niedrige Auflösung, doch es funktioniert. Wir können also davon
ausgehen, dass wir ein Raten- und Auflösungsproblem haben. Wir werden
zuerst die »HorizSync«- und »VertRefresh«-Zeilen wiederherstellen,
da wir die Spezifikationen des Monitors im Internet gefunden und
überprüft haben.

<p>
Wir werden nun versuchen, Xorg auf eine bestimmte Auflösung zu trimmen
und zu sehen, ob wir damit Glück haben. In <tt>Section "Screen"</tt>
der xorg.conf-Datei werden wir ein paar Zeilen hinzufügen, die hier
fett gedruckt sind:

<blockquote><pre>
Section "Screen"
        Identifier "Screen0"
        Device     "Card0"
        Monitor    "Monitor0"
<b>        DefaultDepth   24</b>
        SubSection "Display"
                Viewport   0 0
                Depth     1
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     4
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     8
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     15
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     16
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     24
<b>                Modes	"1280x1024"</b>
        EndSubSection
EndSection
</pre></blockquote>

Diese beiden Änderungen teilen X mit, dass wir eine Farbtiefe von
24 Bit verwenden möchten und für 24 Bit Farbtiefe eine Auflösung
von 1280x1024. Da keine andere Auflösung unter »Depth 24« aufgelistet
ist, wird das System dazu gezwungen sein, diese Auflösung zu
verwenden.

<p>
Wir testen die neue Konfiguration und ... ERFOLG!
Wir scheinen ein schönes und hoch auflösendes Display zu besitzen.
Beachte, dass wir NUR ein Schachbrettmuster (das sehr gut geeignet ist,
um die Qualität deines Bildschirms zu prüfen und um LCDs zu kalibrieren
[»<a href="http://www.openbsd.org/cgi-bin/cvsweb/xenocara/data/bitmaps/root_weave">root
weave</a>«]) und einen beweglichen Cursor erwarten. An diesem Punkt
erwarten wir noch keine voll einsatzfähige Oberfläche.

<p>
Nun werden wir die xorg.conf-Datei installieren, sodass wir den
alltäglichen Aufruf von X testen können.

<blockquote><pre>
# cp xorg.conf.new /etc/X11/xorg.conf
</pre></blockquote>

Wir können nun versuchen, X mit dem normalen startx(1)-Kommando zu
starten. Es funktioniert!

<p>
Es wäre auch nicht schlecht, zu überprüfen, ob es sich wirklich um
die Auflösung und Farbtiefe handelt, die wir angestrebt haben. Das
ganze soll selbstverständlich auch mit einer angenehmen
Bildwiederholrate angezeigt werden. Wir können dies mit den Kommandos
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xrandr&amp;sektion=1">xrandr(1)</a>
und
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdpyinfo&amp;sektion=1">xdpyinfo(1)</a>
überprüfen. Neben anderen Informationen liefert xdpyinfo(1):
<blockquote><pre>
    [...]
screen #0:
  print screen:    no
  dimensions:    1280x1024 pixels (433x347 millimeters)
  resolution:    75x75 dots per inch
  depths (7):    24, 1, 4, 8, 15, 16, 32
  root window id:    0x44
  depth of root window:    24 planes
    [...]
</pre></blockquote>

Die Antwort ist also »ja, wir verwenden 1280x1024 mit einer Tiefe von
24 Ebenen (Bits).«

<p>
Folgende Ausgabe liefert xrandr(4):
<blockquote><pre>
 SZ:    Pixels          Physical       Refresh
*0   1280 x 1024   ( 433mm x 347mm )  *85   75   60
 1   1280 x 960    ( 433mm x 347mm )   85   60
    [...]
</pre></blockquote>

Das sagt uns, dass wir mit einer Bildwiederholrate von 85 Hz arbeiten.
Die meisten Anwender empfinden dies als eine sehr angenehme Einstellung.

<p>
<h3>11.3.3 - Was ist, wenn es nicht so »einfach« ist?</h3>
Manchmal passen Dinge einfach nicht zusammen. Hier sind ein paar Tipps.

<ul>
<li>Lies die Handbuchseite des X-Servers, den du einsetzt. In unserem
Beispiel können wir aus der <tt>/var/log/Xorg.0.log</tt>-Datei
entnehmen, dass wir TDFX als Treiber verwenden. Wir sollten also in
der <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=tdfx&amp;sektion=4">tdfx(4)</a>-Handbuchseite
nachsehen. Dort wirst du meistens Tipps, Einschränkungen und
Konfigurationsoptionen für deine Grafikkarte finden. Diese variieren
aber von Treiber zu Treiber, sodass du nicht davon ausgehen solltest,
nicht weiter auf die Handbuchseite angewiesen zu sein, nur weil du bereits
eine andere gelesen hast.

<li>Probiere unterschiedliche Monitore aus. Wie wir in unserem
Beispiel gelernt haben, liefern unterschiedliche Monitor verschiedene
Lösungsansätze.

<li>Teste den
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vesa&amp;sektion=4">vesa(4)</a>-X-Treiber.
Dieser ist zwar aus Geschwindigkeitsgründen definitiv eine »letzte
Möglichkeit«, doch funktioniert er mit den meisten Grafikkarten -
selbst mit denen, die über keinen »besseren« Treiber für den X-Server
verfügen.

<li>Teste unterschiedliche Hardware. Wenn du über mehrere Grafikkarten
verfügst, probiere ein paar andere.


</ul>

<a name="StartingX"></a>
<h2>11.4 - X starten</h2>
Es gibt zwei übliche Wege, X auszuführen:

<h3>11.4.1 - nach Bedarf:</h3>
Melde dich wie gewöhnlich an einer Konsole an und führe dann
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=startx&amp;sektion=1">startx(1)</a>
aus.

<h3>11.4.2 - boote direkt in X:</h3>
Dies wird mit
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm&amp;sektion=1">xdm(1)</a>
realisiert, dem X Display Manager.
xdm(1) wird als root ausgeführt (normalerweise über
<a href="faq10.html#rc">rc</a>) und zeigt einen Anmeldeprompt an.
Nach erfolgreicher Anmeldung wird eine X-Sitzung für diesen Benutzer
erstellt. Wenn diese X-Sitzung beendet werden soll (zum Beispiel über
STRG-ALT-Backspace), wird xdm(1) wieder die Kontrolle übernehmen und
den Benutzer erneut nach seinen Anmeldedaten fragen. Aus diesem Grund
sollte xdm(1) NICHT von <tt>/etc/rc.conf.local</tt> aus aufgerufen
werden, bis du dir sicher bist, dass X so läuft wie du es dir gedacht
hast - ansonsten wird deine Maschine sehr schlecht zu warten sein!
(Schlimmster Fall: Boote in den Singleuser-Modus als hättest du
<a href="faq8.html#LostPW">dein Passwort vergessen</a> und editiere
die xdm_flags-Zeile deiner <tt>/etc/rc.conf.local</tt>-Datei.)

<p>
Auf einigen Plattformen musst du das für die Konsolen zuständige
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getty&amp;sektion=8">getty(8)</a>
deaktivieren, um xdm(1) starten zu können.

<p>
<a name="CustomizingX"></a>
<h2>11.5 - X anpassen</h2>

<h3>11.5.1 - Einführung</h3>
Die standardmäßige X-Umgebung von OpenBSD ist voll funktionsfähig,
aber du könntest es anpassen wollen.
Du könntest das Muster oder die Farbe des Hintergrunds ändern wollen,
oder es könnte dir einfallen, den Fensterverwalter (das Programm, das deine
X-Umgebung am meisten definiert) zu ändern, oder aber welche Programme
automatisch gestartet werden, wenn X gestartet wird.

<p>
Der Standard-Fensterverwalter von OpenBSD ist
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fvwm&amp;sektion=1"
>fvwm(1)</a>.
fvwm ist ein guter Allzweck-Fensterverwalter, aber keineswegs deine einzige
Auswahl; es ist noch nicht einmal der einzige Fensterverwalter, der
standardmäßig in OpenBSD vorhanden ist (siehe
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm&amp;sektion=1"
>cwm(1)</a> und
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=twm&amp;sektion=1"
>twm(1)</a>).
Eine große Auswahl an Fensterverwaltern ist außerdem als
<a href="faq15.html">Paket</a> verfügbar.

<p>
Ähnlich den <a href="faq10.html#rc">Systemstart-Skripts</a> folgt X einem
definierten Ablaufplan, um die Benutzerumgebung einzurichten.
Genauer gesagt existieren mehrere solche Startprozedere; welchem gefolgt wird,
hängt davon ab, wie <a href="#StartingX">X gestartet wird</a>.
Zu verstehen, wie X startet, wird dir helfen zu verstehen, wie deine
Arbeitsumgebung exakt so anzupassen ist, dass es deinen Wünschen entspricht.

<p>
Man kann die Umgebung sowohl auf System-, als auch auf Benutzerebene anpassen.
Es ist vielleicht besser, Änderungen auf Benutzer-, als auf Systemebene
durchzuführen, da die Benutzerskripte in dem Heimatverzeichnis des Benutzers
gespeichert werden, sodass weniger Dateien vereinigt werden müssen, wenn du
dein OpenBSD auf eine neue Version nachrüstest (»upgrade«).

<!--XXX version -->
Die systemweit gültigen Standards befinden sich in <tt>/etc/X11</tt> und werden
ursprünglich von dem <a href="faq4.html#FilesNeeded">xetcXX.tgz</a> Dateiset
installiert, welches von dem
<a href="../upgrade52.html">vorgeschlagenen Nachrüstprozedere</a> nicht erfaßt
wird, d.&nbsp;h. werden Änderungen an den systemweiten Daten vorgenommen, so
werden diese zwar bestehen, jedoch wird es eventuell nötig sein, diese
Änderungen manuell in spätere Versionen der entsprechenden Dateien einfließen
zu lassen.


<h3>11.5.2 - startx(1)-Start</h3>
startx(1) sucht die Datei <tt>.xinitrc</tt> in dem Heimatverzeichnis des
Benutzers.
<tt>.xinitrc</tt> ist normalerweise ein Shellskript, der so viele X »Klienten«
(Anwendungen, die X benutzen) starten kann wie gewünscht.
Wird dieser Skript beendet, schließt sich der X-Server.
Im Allgemeinen sollten die meisten Programme, die von diesem Skript gestartet
werden, im Hintergrund laufen, obgleich das Letzte im Vordergrund laufen sollte
(typischerweise ist dies der Fensterverwalter); wird es beendet, beendet sich
der Skript, und X wird geschlossen.

<p>
Im einfachsten Fall braucht es aus nicht mehr als dem Namen des gewünschten
Fensterverwalters zu bestehen, der ausgeführt werden soll:

<blockquote><pre>
cwm
</pre></blockquote>

Oder man kann ein wenig ausgefallener sein:

<blockquote><pre>
xconsole -geometry -0+0 -fn 5x7 &
oclock -geometry 75x75-0-0 &
xsetroot -solid grey &
cwm
</pre></blockquote>

Dies startet die
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xconsole&amp;sektion=1"
>xconsole(1)</a>, die eine Kopie ein jeden Texts zeigt, den der Kernel auf die
Konsole geschrieben hätte (die jetzt ja von einem grafischen Bildschirm
eingenommen wird), eine analoge Uhr,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=oclock&amp;sektion=1"
>oclock(1)</a>, und konfiguriert den Hintergrund zu einer geschlossenen grauen
Fläche mit Hilfe von
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xsetroot&amp;sektion=1"
>xsetroot(1)</a>, und dies alles bevor der
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm&amp;sektion=1"
>cwm(1)</a> Fensterverwalter gestartet wird.
Beachte, wie einzig der Fensterverwalter nicht durch das Anhängen eines
»&amp;«-Zeichens »in den Hintergrund geschickt wird«.
Dies bedeutet, das X solange laufen wird, bis cwm(1) beendet wird.

<p>
Besitzt das Heimatverzeichnis eines Benutzers keine Datei <tt>.xinitrc</tt>,
so wird die des Systems, <tt>/etc/X11/xinit/xinitrc</tt>, benutzt.
Diese Datei kann dich mit einigen zusätzlichen Ideen für deinen eigenen
.xinitrc-Skript versorgen.


<h3>11.5.3 - xdm(1)-Start</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm&amp;sektion=1"
>xdm(1)</a> wird normalerweise von den
<a href="faq10.html#rc">Systemstart-Skripten</a> gestartet, aber für Testzwecke
(empfohlen, es sei denn du weißt, dass deine X-Konfiguration in Ordnung ist)
kann man ihn als root starten.

<p>
xdm(1) besitzt viel mehr Funktionalität als hier besprochen wird,
aber für unsere Zwecke gilt, dass xdm dem Benutzer einen Anmeldebildschirm
präsentieren wird, den Namen und das Passwort eines Benutzers abfragen und
verifizieren wird, um letztlich dem Benutzer seine X-Umgebung zur Verfügung zu
stellen.
Beendet sich X, entweder absichtlich oder aus Versehen, so wird xdm es erneut
starten.
Dies ist der Grund, warum man sicherstellen sollte, dass X korrekt konfiguriert
ist, bevor man xdm(1) benutzt, und in jedem Fall bevor xdm(1) beim
Systemstart gestartet wird, das es ansonsten schwierig werden könnte, die
Kontrolle über die Maschine zu erlangen.

<p>
Wenn xdm(1) startet, führt es <tt>/etc/X11/xdm/Xsession</tt> aus;
dies wiederum wird versuchen, eine Datei <tt>.xsession</tt> in dem
Heimatverzeichnis des Benutzers zu finden.
D.&nbsp;h., wünschst du die Änderung deines standardmäßigen Fensterverwalters,
führe ihn (und möglicherweise andere Sachen) in <tt>.xsession</tt> aus.
Wieder gilt, dass alle Programme, die mit X gestartet werden sollen (zum
Beispiel drei xterm(1)s), hier platziert werden müssen, dass alle im
Hintergrund auszuführen sind, ausgenommen des Fensterverwalters, der, wie
zuvor, wenn beendet, die X-Sitzung ebenfalls beendet.
In letzterem Fall wird xdm(1) X erneut starten und einen Anmeldebildschirm
präsentieren.

<h3>11.5.4 - Das Ausprobieren eines neuen Fensterverwalters</h3>
Man kann einen speziellen Fensterverwalter beim Start von X ausführen,
ohne jegliche Standardwerte anzupassen, und zwar so:

<blockquote><pre>
$ startx /usr/local/bin/fluxbox
</pre></blockquote>

Verschiedene Fensterverwalter (einschließlich cwm(1) und fvwm(1)) bieten die
Möglichkeit der Änderung des Fensterverwalters vom Fleck weg, ohne das X oder
eine andere Anwendung neu gestartet werden müssen.
Der neue Fensterverwalter ersetzt den alten; das Beenden des neu gestarteten
Fensterverwalters beendet X, und führt nicht zum Vorherigen zurück.
fvwm(1) erlaubt das Starten eines anderen Fensterverwalters durch einen
Linksklick auf den Hintergrund (»root window«), der Auswahl von »(Re)Start«
und dann des gewünschten Fensterverwalters (es ist allerdings anzumerken, dass
dafür die alternativen Fensterverwalter in der <tt>.fvwmrc</tt>-Datei des
Benutzers angeführt sein müssen [die systemweiten Standards sind in
<tt>/usr/X11R6/lib/X11/fvwm/.fvwmrc</tt>]).
cwm(1) erlaubt das Ausführen eines anderen Fenstermanagers durch Nutzung der
Tastenkombination Ctrl-Alt-w (Steuerungstaste-Meta-w), und Eingabe des
Verwalters, zu dem gewechselt werden soll.

<p>
Sobald du den Fensterverwalter gefunden hast, den du magst, kannst du ihn als
zuletzt auszuführendes Programm in deine Startskripte schreiben, wie oben
beschrieben.

<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ-Index]</a>
<a href= "faq10.html">[Zum Kapitel 10 - Systemverwaltung]</a>
<a href= "faq12.html">[Zum Kapitel 12 - Hardware- und Plattformspezifische Fragen]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq11.html,v 1.95 ]<br>
$Translation: faq11.html,v 1.41 2012/11/05 10:36:32 steffen Exp $<br>
-->
$OpenBSD: faq11.html,v 1.39 2012/11/07 09:26:25 ajacoutot Exp $
</small>
</body>
</html>
