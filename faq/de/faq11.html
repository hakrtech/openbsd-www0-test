<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>11 - Leistungstuning</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rev= "made" href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2006 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<a href="../../de/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ-Index]</a>
<a href= "faq10.html">[Zum Kapitel 10 - Systemverwaltung]</a>
<a href= "faq12.html">[Zum Kapitel 12 - Plattformspezifische Fragen]</a>
</font>

<h1><font color="#e00000">11 - Diese Sektion wird überarbeitet</font></h1>
<hr>

<p>
<h3>Inhaltsverzeichnis</h3>
<ul>
<li><a href="#XF86"   >11.4 - Deine Monitorauflösung unter X
      tunen</a>
</ul>

<hr>

<p>
<a name= "XF86"></a>
<h2>11.4 - Deine Monitorauflösung unter X tunen</h2>

<i>Hinweis: Die meisten Benutzer müssen sich NICHT um die Erstellung einer
ModeLine in modernen Versionen von X sorgen.
TROTZDEM: manchmal ist es in ungewöhnlichen Situationen notwendig.</i>

<p>
Es ist durchaus mit vielen Multisyncmonitoren möglich, einen X-Server
in einer akzeptablen Auflösung zum Laufen zu kriegen. Mit den
Standardkonfigurationswerkzeugen xorgconfig oder XF86Setup ist es aber
recht schwierig, ein gutes Ergebnis zu erhalten. Einer der
schmerzvolleren Punkte ist es, deinen Monitor zur gewünschten Auflösung
zu bewegen und dann eine vertikale Scanrate von mindestens 72 - 75 Hz zu
bekommen; eine Rate, bei der das Bildschirmgeflacker wesentlich geringer
sichtbar für das menschliche Auge ist. Was passiert aber, wenn du die
vertikale Scanfate sehr niedrig einstellst? So könntest du den
Bildschirm zum Beispiel ohne Flackern auf Video filmen - aber auch dazu
sind die Methoden mit den Standardwerkzeugen von X eher nicht intuitiv.

<p>
Schlussendlich ist es bei den Auflösungen
(800x600, 1024x768, 1152x900,1280x1024), die die meisten Leute heute 
mit preiswerten VGA-Monitoren benutzen (zumindest mit neueren Modellen)
bestens möglich, vertikale Wiederholungsraten von 85 Hz und mehr 
zu bekommen, um ein wirklich klares und ansehnliches Bild zu erhalten.
Der X-Server hat einen Mechanismus, der dir erlaubt, im Detail
den Grafikmodus zu beschreiben, den du benutzen willst: dies nennt
sich ModeLine. Eine ModeLine hat vier Sektionen: eine einzelne Nummer 
für die Pixelclock, vier Nummern für horizontales Timing, vier Nummern
für vertikales Timing und eine optionale Sektion mit einer Liste der
Flags für weitere Charakteristika wie etwa den Modus (z.&nbsp;B.
Interlace, DoubleScan und weitere&nbsp;... mehr Details gibt es in der
xorg.conf(5)-Manualseite)

<p>
Das Erzeugen einer ModeLine ist eine schwarze Kunst. Glücklicherweise
gibt es mehrere Skripte, die das für dich erledigen können.
Eines davon ist
<a href="http://www-sop.inria.fr/cgi-bin/koala/nph-colas-modelines">
Colas XFree86 ModeLine Generator</a>.  Ein weiteres ist
<a href="http://xtiming.sourceforge.net/">The XFree86 Modeline
Generator</a>, der bei SourceForge gehostet wird. Es gibt weitere bei
<a href="http://freshmeat.net/search/?q=modeline">Freshmeat</a>.
Bevor du diese ModeLinegeneratoren benutzen kannst, musst du die 
vertikalen und horizontalen Syncgrenzen für deinen Monitor herausfinden.
Diese Angaben finden sich oftmals im Handbuch oder auf der Webseite des
Monitorherstellers. Wenn du sie dort nicht finden kannst, suche einfach
im Web nach deinem Modell und Hersteller. Viele Leute waren so
freundlich, Listen mit den entsprechenden Angaben zu erstellen.

<p>
Sagen wir zum Beispiel, du hättest einen Dell-D1226H-Monitor. Du hast
auf Dells Website herausgefunden, dass er einen Bereich von 30 - 95 kHz
horizontal und 50 - 160 Hz vertikal hat. Besuche die
ModeLinegeneratorseite und gib diese Informationen ein. Als nächstes
musst du die minimale vertikale Scanrate eingeben, die du haben
willst. Jede Rate ab 72 Hz und größer sollte im Allgemeinen wenig
flackern. Je mehr, desto besser wird das Bild.

<p>
Mit all diesen Informationen wird das Skript eine ModeLine für jede
mögliche 4x3-Auflösung generieren, die dein Monitor unterstützen
kann. Wenn jemand die Dell-Spezifikationen von oben und eine minimale
vertikale Rate von 75 Hz eingibt, gibt das Skript etwas ähnliches wie
das Folgende aus:

<pre>
ModeLine "320x240" 20.07 320 336 416 448 240 242 254 280 #160Hz
ModeLine "328x246" 20.86 328 344 424 456 246 248 260 286 #160Hz
...
ModeLine "816x612" 107.39 816 856 1056 1136 612 614 626 652 #145Hz
ModeLine "824x618" 108.39 824 864 1064 1144 618 620 632 658 #144Hz
ModeLine "832x624" 109.38 832 872 1072 1152 624 626 638 664 #143Hz
...
ModeLine "840x630" 109.58 840 880 1080 1160 630 632 644 670 #141Hz
ModeLine "848x636" 110.54 848 888 1088 1168 636 638 650 676 #140Hz
...
ModeLine "1048x786" 136.02 1048 1096 1336 1432 786 788 800 826 #115Hz
ModeLine "1056x792" 136.58 1056 1104 1344 1440 792 794 806 832 #114Hz
ModeLine "1064x798" 137.11 1064 1112 1352 1448 798 800 812 838 #113Hz
...
ModeLine "1432x1074" 184.07 1432 1496 1816 1944 1074 1076 1088 1114 #85Hz
ModeLine "1576x1182" 199.86 1576 1648 2008 2152 1182 1184 1196 1222 #76Hz
ModeLine "1584x1188" 198.93 1584 1656 2016 2160 1188 1190 1202 1228 #75Hz
</pre>

<p>
Dieser Monitor gibt nun vor, 1600x1200 @ 75 Hz machen zu können.
Das Skript sagt aber nicht, dass das innerhalb der 75 Hz sei.
Wenn du also exakt 1600x1200 haben willst, geh ein wenig mit deiner
minimalen vertikalen Rate herunter. (Hier z.&nbsp;B. kannst du bis
70 Hz heruntergehen)

<pre>
ModeLine "1592x1194" 197.97 1592 1664 2024 2168 1194 1196 1208 1234 #74Hz
ModeLine "1600x1200" 199.67 1600 1672 2032 2176 1200 1202 1214 1240 #74Hz
ModeLine "1608x1206" 198.65 1608 1680 2040 2184 1206 1208 1220 1246 #73Hz
ModeLine "1616x1212" 197.59 1616 1688 2048 2192 1212 1214 1226 1252 #72Hz
ModeLine "1624x1218" 199.26 1624 1696 2056 2200 1218 1220 1232 1258 #72Hz
ModeLine "1632x1224" 198.15 1632 1704 2064 2208 1224 1226 1238 1264 #71Hz
ModeLine "1640x1230" 199.81 1640 1712 2072 2216 1230 1232 1244 1270 #71Hz
ModeLine "1648x1236" 198.64 1648 1720 2080 2224 1236 1238 1250 1276 #70Hz
</pre>

<p>
Hier sehen wir, dass der Monitor tatsächlich 1600x1200 @ 74 Hz macht,
wenn die Bandbreite (dot clock) auf 200 MHz begrenzt ist. Setze die
Bandbreite gemäß der Grenzen, die vom Monitor definiert werden.

<p>
Nachdem du einmal die ModeLines hast, schreibe sie in deine
/etc/X11/xorg.conf-Datei. Kommentiere die alten ModeLines aus, so dass
du sie noch benutzen kannst, falls die neuen nicht funktionieren.
Als nächstes wähle aus, mit welcher Auflösung du nun arbeiten willst.
Als erstes musst du nun herausfinden, ob X im beschleunigten Modus
läuft oder nicht (das tut es mit den meisten Grafikkarten), so dass 
du auch weißt, welche <tt>"Screen"</tt>-Sektion der xorg.conf-Datei du 
modifizieren musst. Alternativ kannst du natürlich einfach alle
Screensektionen modifizieren.

<pre>
Section "Screen"
   Driver          "Accel"
   Device          "Primary Card"
   Monitor         "Primary Monitor"
   DefaultColorDepth 32
   SubSection "Display"
      Depth        32
      Modes        "1280x1024" "1024x768"
   EndSubSection
</pre>

<p>
Die erste Auflösung nach dem "Modes"-Stichwort ist die Auflösung,
in der X startet. Mit dem Drücken von STRG-ALT-NUMMERN_BLOCK_MINUS oder
STRG-ALT-NUMMERN_BLOCK_PLUS kannst du zwischen den hier aufgeführten
Auflösungen hin- und herschalten. Gemäß der Angaben oben wird X
versuchen, im 32-Bit-Modus zu starten (wegen der
DefaultColorDepth-Direktive - ohne sie würde X im 8-Bit-Modus
starten). Die erste Auflösung, die versucht wird, ist 1280x1024 (es
wird einfach der Reihenfolge in der 'Modes'-Zeile gefolgt). Denke daran,
dass »1280x1024« einfach ein Label für die Werte in der ModeLine ist.

<p>
Du solltest wissen, dass das ModeLinegeneratorskript Optionen hat, um
seine Timings für ältere oder kleinere Monitore etwas zu lockern, und
dass es die Möglichkeit hat, ModeLines für spezielle Monitore
anzubieten. Abhängig davon, was für eine Hardware du hast, ist sie
vielleicht nur schwer mit den Standardoptionen zu betreiben. Wenn das 
Bild zu groß, zu breit oder zu klein ist oder nicht genügend 
horizontal oder vertikal gekippt ist und die Monitorkontrollen zur
Kompensierung nicht ausreichen, kann man mittels xvidtune(1) die
ModeLine besser dem Monitor anpassen.

<p>
In den meisten modernen Monitoren gibt es kein festes Limit der
Bandbreite, daher ist sie auch oftmals nicht in den Spezifikationen
aufgeführt. Aber je mehr du in der Bandbreite nach oben gehst, desto
verschwommener wird das Bild. Du könntest also zum Testen die
Bandbreite deiner Grafikkarte (auch dotclock genannt) eingeben (so
kannst du deinen Monitor nicht beschädigen) und Schritt für Schritt in
Bandbreite heruntergehen, bis du ein schönes, klares Bild hast.

<p>
Wenn dir das unnötig kompliziert erscheint, liegt das daran,
dass es genau das ist. X.org kümmert sich darum und macht diesen
Prozess bedeutend einfacher, da es viele eingebaute Modi hat und außerdem
in der Lage ist, Angaben aus vielen Plug-and-play-DDC- und
-DDC2-Monitoren auszulesen.

<p>
Du kannst das »Colas XFree86 ModeLine Generator script« hier
herunterladen:
<a href="http://koala.ilog.fr/ftp/pub/Klone/">http://koala.ilog.fr/ftp/pub/Klone/</a>.
Du brauchst den Kloneinterpreter und musst ihn kompilieren. Er ist als
<tt>lang/klone</tt> in den Ports. Die Skripte existieren im Verzeichnis
scripts der Klonedistribution. (Der Port installiert sie nach
/usr/local/lib/klone/scripts.)

<p>
Es sind zwei Versionen des Skriptes dabei: die erste ist eine
CGI-Version, die identisch zu der obigen Webseite ist, die zweite ist
eine Nicht-CGI-Version, die deine komplette X.org-Datei nimmt, die
Monitorspezifikationen dekodiert, die du in xorgconfig/XF86Setup
eingegeben hast (Hast du eigentlich die echten Spezifikationen für
deinen Monitor eingegeben, oder die generischen benutzt?) und passt die
existierenden ModeLines an.

<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ-Index]</a>
<a href= "faq10.html">[Zum Kapitel 10 - Systemverwaltung]</a>
<a href= "faq12.html">[Zum Kapitel 12 - Plattformspezifische Fragen]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq11.html,v 1.61 ]<br>
$Translation: faq11.html,v 1.20 2006/04/24 17:44:28 paldium Exp $<br>
-->
$OpenBSD: faq11.html,v 1.20 2006/04/25 08:25:48 saad Exp $
</small>
</body>
</html>
