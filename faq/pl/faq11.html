<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<title>11 - Dostrajanie wydajno¶ci</title>
<meta http-equiv=Content-Type content="text/html; charset=iso-8859-2">
<link rev=made href="mailto:www@openbsd.org">
<meta content=document name=resource-type>
<meta content="the OpenBSD FAQ page" name=description>
<meta content=openbsd,faq name=keywords>
<meta content=global name=distribution>
<meta content="This document copyright 1998-2006 by OpenBSD." name="copyright">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<a href="../../pl/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    
</a>

<p>
<font color= "#0000e0">
<a href="index.html">[Spis tre¶ci]</a>
<a href="faq10.html">[Sekcja 10 - Zarz±dzanie systemem]</a>
<a href="faq12.html">[Sekcja 12 - Pytania dotycz±ce poszczególnych platform]</a>
</font>

<h1><font color="#e00000">11 - Ta sekcja jest w opracowaniu.</font></h1>
<hr>

<p>
<h3>Spis tre¶ci</h3>
<ul>
<li><a href="#XF86"   >11.4 - Dostrajanie rozdzielczo¶ci ekranu pod
   X</a>
</ul>
<hr>

<p>
<a name= "XF86"></a>
<h2>11.4 - Dostrajanie rozdzielczo¶ci ekranu pod X</h2>

<i>Uwaga: Wiêkszo¶æ u¿ytkowników nie musi siê martwiæ o rêczne
ustawianie ModeLine w nowoczesnych wersjach ¶rodowiska X-ów.
NIEMNIEJ, czasem jest to konieczne w nietypowych sytuacjach.
</i>

<p>
Ustawienie optymalnej rozdzielczo¶ci na wiêkszo¶ci monitorów typu multisync
jest mo¿liwe. Ktokolwiek próbowa³by zrobiæ to przy pomocy standardowych narzêdzi 
xorgconfig or XF86Setup, prawdopodobnie nie osi±gnie najlepszych, mo¿liwych 
do osi±gniêcia rezultatów. Jedn± z bardziej uci±¿liwych rzeczy jest zbyt niskie 
od¶wie¿anie (72-75 Hz) (czêstotliwo¶æ od¶wie¿ania pionowego VSYNC, przyp. t³um) 
przy preferowanej rozdzielczo¶ci ekranu, co powoduje, ¿e dra¿ni±ce oczy migotanie 
jest jedynie mniej widoczne dla ludzi. A co je¶li spróbujesz ustawiæ ten parametr 
na bardzo nisk± warto¶æ? Mo¿esz zobaczyæ to przy ustawieniu VSYNC na 50 Hz, tak by¶ 
móg³ zapisaæ obraz na video bez migotania, ale metody te nie s± tak oczywiste 
jak standardowe narzêdzia z X oraz dokumentacja.

<p>
Obecnie, w oferowanych przez niedrogie monitory rozdzielczo¶ciach 
(800x600, 1024x768, 1152x900, 1280x1024), których normalnie u¿ywa wiêkszo¶æ 
ludzi, mo¿liwe jest uzyskanie VSYNC na poziomie 85Hz lub wiêcej, co powoduje,
i¿ obraz jest czysty i stabilny. X serwer posiada mechanizm (ModeLine) 
pozwalaj±cy opisaæ szczegó³owo tryb graficzny którego zamierzasz u¿ywaæ. 
Mechanizm ten sk³ada siê z czterech czê¶ci, pierwsza z nich to czêstotliwo¶æ rysowania piksela 
(pixel clock), nastêpna czê¶æ - cztery liczby - to takty synchronizacji poziomej, 
kolejna - cztery liczby - takty synchronizacji pionowej, wreszcie ostatnia, opcjonalna czê¶æ
zawieraj±ca listê dodatkowych parametrów (np. Interlace, DoubleScan ..).
Wiêcej informacji na ten temat znajdziesz w sekcji xorg.conf(5) podrêcznika man.

<p>
Utworzenie ModeLine'a jest czarn± magi±... Na szczê¶cie, jest kilka skryptów, 
które zrobi± to za Ciebie. Jednym z nich jest 
<a href="http://www-sop.inria.fr/cgi-bin/koala/nph-colas-modelines">Colas XFree86 ModeLine Generator</a>. 
Kolejny to 
<a href="http://xtiming.sourceforge.net/">The XFree86 Modeline Generator</a> 
umieszczony na witrynie SourceForge, inne znajdziesz na witrynie 
<a href="http://freshmeat.net/search/?q=modeline">Freshmeat</a>. Zanim zaczniesz ich u¿ywaæ, 
musisz dowiedzieæ siê w jakich zakresach VSYNC i HSYNC pracuje Twój monitor.
Jest to czêsto udokumentowane w instrukcji lub na witrynie www producenta.
Je¶li nie mo¿esz tego znale¼æ, przeszukaj sieæ www podaj±c producenta i model monitora. 
Niektóre osoby podaj± te dane na swoich stronach.

<p>
Na przyk³ad, powiedzmy, ¿e masz monitor Dell D1226H. Dowiedzia³e¶ siê, ¿e 
pracuje on przy nastêpuj±cych warto¶ciach parametrów HSYNC 30-95 kHz oraz 
VSYNC 50-160 Hz. Odwied¼ teraz stronê ModeLine generator i wprowad¼ te informacje. 
Potem wprowad¼ minimaln± warto¶æ VSYNC, jakiej chcesz u¿yæ.  
Powy¿ej 72 Hz migotanie obrazu nie powinno byæ widoczne. Im wy¿sza ta warto¶æ 
tym czystszy i stabilniejszy staje siê obraz.

<p>
Przy pomocy tych informacji, skrypt wygeneruje ModeLine'y dla w ka¿dej mo¿liwej
rozdzielczo¶ci przy proporcjach ekranu 4x3, przy od¶wie¿aniu powy¿ej minimalnej, 
wprowadzonej wcze¶niej warto¶ci VSYNC. Skrypt ten wygeneruje nastêpuj±ce wpisy: 

<pre>ModeLine "320x240" 20.07 320 336 416 448 240 242 254 280 #160Hz
ModeLine "328x246" 20.86 328 344 424 456 246 248 260 286 #160Hz
...
ModeLine "816x612" 107.39 816 856 1056 1136 612 614 626 652 #145Hz
ModeLine "824x618" 108.39 824 864 1064 1144 618 620 632 658 #144Hz
ModeLine "832x624" 109.38 832 872 1072 1152 624 626 638 664 #143Hz
...
ModeLine "840x630" 109.58 840 880 1080 1160 630 632 644 670 #141Hz
ModeLine "848x636" 110.54 848 888 1088 1168 636 638 650 676 #140Hz
...
ModeLine "1048x786" 136.02 1048 1096 1336 1432 786 788 800 826 #115Hz
ModeLine "1056x792" 136.58 1056 1104 1344 1440 792 794 806 832 #114Hz
ModeLine "1064x798" 137.11 1064 1112 1352 1448 798 800 812 838 #113Hz
...
ModeLine "1432x1074" 184.07 1432 1496 1816 1944 1074 1076 1088 1114 #85Hz
ModeLine "1576x1182" 199.86 1576 1648 2008 2152 1182 1184 1196 1222 #76Hz
ModeLine "1584x1188" 198.93 1584 1656 2016 2160 1188 1190 1202 1228 #75Hz
</pre>

<p>
Wiemy, i¿ monitor pracuje w rodzileczo¶ci 1600x1200 @ 75 Hz,
a skrypt tego nie poda³. Z tego powodu, je¶li chcemy pracowaæ w rozdzielczo¶ci
1600x1200, musimy obni¿yæ minimalny VSYNC do 70Hz. Po tych zmianach skrypt 
zwróci nastêpuj±ce wyniki:

<pre>ModeLine "1592x1194" 197.97 1592 1664 2024 2168 1194 1196 1208 1234 #74Hz
ModeLine "1600x1200" 199.67 1600 1672 2032 2176 1200 1202 1214 1240 #74Hz
ModeLine "1608x1206" 198.65 1608 1680 2040 2184 1206 1208 1220 1246 #73Hz
ModeLine "1616x1212" 197.59 1616 1688 2048 2192 1212 1214 1226 1252 #72Hz
ModeLine "1624x1218" 199.26 1624 1696 2056 2200 1218 1220 1232 1258 #72Hz
ModeLine "1632x1224" 198.15 1632 1704 2064 2208 1224 1226 1238 1264 #71Hz
ModeLine "1640x1230" 199.81 1640 1712 2072 2216 1230 1232 1244 1270 #71Hz
ModeLine "1648x1236" 198.64 1648 1720 2080 2224 1236 1238 1250 1276 #70Hz
</pre>

<p>
Teraz widzimy ,i¿ monitor pracuje naprawdê w rozdzielczo¶ci 1600x1200 @ 74 Hz 
co jest spowodowane maksymaln± warto¶ci± szeroko¶ci pasma (200 MHz). 
Ustaw tê warto¶æ stosownie do parametrów monitora.

<p>
Po wygenerowaniu w³asnych ModeLine'ów, nale¿y umie¶ciæ je w pliku /etc/X11/xorg.conf. 
Ponadto nale¿y zakomentowaæ stare ModeLine'y, na wypadek gdyby¶ musia³ ich ponownie u¿yæ,
co mo¿e mieæ miejsce, gdy nowo dodane nie chc± dzia³aæ. Nastêpnie nale¿y ustawiæ 
rozdzielczo¶æ ekranu, przy której zamierzasz pracowaæ. Po pierwsze, sprawd¼ czy system X 
pracuje w trybie z akceleracj± (co jest normalne dla wiêkszo¶ci kart graficznych),
wiêc ju¿ wiesz, któr± sekcjê <tt>"Screen"</tt> pliku xorg.conf nale¿y zmieniæ. 
Inn± mo¿liwo¶ci± jest zmiana wszystkich sekcji Screen. 
<pre>Section "Screen"
   Driver          "Accel"
   Device          "Primary Card"
   Monitor         "Primary Monitor"
   DefaultColorDepth 32
   SubSection "Display"
      Depth        32
      Modes        "1280x1024" "1024x768"
   EndSubSection
</pre>

<p>
Pierwsza rozdzielczo¶æ, któr± widzisz po s³owie "Modes" jest rozdzielczo¶ci±, 
w której system X wystartuje. Poprzez wci¶niêcie kombinacji CTRL-ALT-KEYPAD MINUS 
lub or CTRL-ALT-KEYPAD PLUS, mo¿esz prze³±czaæ siê pomiêdzy rozdzielczo¶ciami 
z tej listy. System X bêdzie próbowa³ wystartowaæ w trybie 32-bitowego koloru 
(zgodnie z dyrektyw± DefaultColorDepth, bez której wystartowa³by w trybie 8-bitowym).
Pierwsz± rozdzielczo¶ci±, któr± system X bêdzie próbowa³ u¿yæ jest 1280x1024 
(zgodnie z kolejno¶ci± wpisów w linii Modes). Zauwa¿, i¿ "1280x1024" jest etykiet±
warto¶ci zdefiniowanych w ModeLine'ach. 

<p>
Ponadto skrypt 'ModeLine generator' posiada opcje do regulacji taktowania (timings) dla starszych 
czy te¿ mniejszych monitorów, dodatkowo posiada tak¿e mo¿liwo¶æ tworzenia ModeLine'ów 
dla nietypowych rozdzielczo¶ci. W zale¿no¶ci od typu sprzêtu jaki posiadasz mo¿e nie byæ 
prostym zadaniem u¿ywanie skryptu z domy¶lnymi przy zastosowaniu opcji 
domy¶lnych. Je¶li obraz jest zbyt 
wysoki, zbyt szeroki, zbyt ma³y przesuniêty w pionie lub poziomie, a manipulacja 
ustawieniami monitora nie umo¿liwia korekcji tych zniekszta³ceñ, mo¿esz u¿yæ 
xvidtune(1) w celu lepszego dostosowania taktowania (timings) monitora.

<p>
W wiêkszo¶ci nowoczesnych monitorów nie ma ustalonego limitu pasma, 
tak wiêc nie podaje siê go w parametrach technicznych. Jedynym objawem przekroczenia
tego parametru jest to, i¿ im bardziej go przekraczasz, tym bardziej niewyra¼ny 
staje siê obraz. Tak wiêc mo¿esz uwa¿aæ za stosowne okre¶lenie tego parametru dla swojej karty
(inaczej nazywany jest "dotclock") w celach testowych (nie mo¿na w ten sposób uszkodziæ monitora), 
a po odpowiednim obni¿eniu tej warto¶ci otrzymasz wyra¼ny obraz.

<p>
Mo¿e wydawaæ Ci siê to zbyt skomplikowane, poniewa¿ tak jest w rzeczywisto¶ci. 
X.org sam wyznacza ten parametr, co upraszcza proces odk±d posiada wiele 
wbudowanych trybów i jest zdolny odczytaæ mo¿liwo¶ci monitorów "plug and play" 
poprzez DDC oraz DDC2. 

<p>
Mo¿esz pobraæ skrypt Colas XFree86 ModeLine Generator z 
<a href="http://koala.ilog.fr/ftp/pub/Klone/">http://koala.ilog.fr/ftp/pub/Klone/</a>. 
Potrzebne bêdzie pobranie 'Klone interpreter' i jego kompilacja. Znajduje siê on w portach 
pod pozycj± <tt>lang/klone</tt>. Skrypty umieszczone s± w strukturze katalogów dystrybucji 
Klone'a. (Port ten instaluje te skrypty w /usr/local/lib/klone/scripts.) 

<p>
S± tam za³±czone dwie wersje, pierwsza oparta o CGI identyczna z t± na stronie. 
Druga, nie CGI, analizuje plik xorg.conf, dekoduje parametry monitora wpisane w 
xorgconfig/XF86Setup (Teraz pomy¶l, czy aktualnie wpisa³e¶ specyfikacje swojego monitora, 
czy u¿y³e¶ domy¶lnego pliku?), i koryguje jak nale¿y istniej±ce ModeLine'y.

<p>
<font color= "#0000e0">
<a href="index.html">[Spis tre¶ci]</a>
<a href="faq10.html">[Sekcja 10 - Zarz±dzanie systemem]</a>
<a href="faq12.html">[Sekcja 12 - Pytanie dotycz±ce poszczególnych platform]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a> 
<br>
<small>
<!--
Originally [OpenBSD: faq11.html,v 1.61 ]<br>
$Translation: faq11.html,v 1.23 2006/05/23 17:51:59 tkniaz Exp $<br>
-->
$OpenBSD: faq11.html,v 1.21 2006/05/24 06:48:44 jufi Exp $
</small>
</body>
</html>
