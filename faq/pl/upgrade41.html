<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD Upgrade Guide</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq">
<meta name="distribution"  content="global">
<meta name="copyright"     content="This document copyright 2006 by OpenBSD">
</head>

<body bgcolor="#ffffff" text="#000000">
<a href="../../pl/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    

</a>
<p>
<font color="#0000e0">
<a href="upgrade35.html">[3.4 -> 3.5]</a> |
<a href="upgrade36.html">[3.5 -> 3.6]</a> |
<a href="upgrade37.html">[3.6 -> 3.7]</a> |
<a href="upgrade38.html">[3.7 -> 3.8]</a> |
<a href="upgrade39.html">[3.8 -> 3.9]</a> |
<a href="upgrade40.html">[3.9 -> 4.0]</a> |
<a href="upgrade42.html">[4.1 -> 4.2]</a> |
<a href="index.html">[FAQ Index]</a>
</font>

<h1><font color="#e00000">Przewodnik po aktualizacji: z 4.0 do 4.1</font></h1>
<hr>

<i>Uwaga: upgrade jest dostêpny tylko z release do release, zalecane jest aby nie
opuszczaæ wydañ po¶rednich.
Nie opuszczaj wersji release.</i>  

<p><i>
Jest niezwykle wa¿ne aby¶ przeczyta³ ca³y dokument i dok³adnie zrozumia³
proces zanim bêdziesz usi³owa³ go przeprowadziæ.
Je¶li zamierzasz dzia³aæ na krytycznej lub fizycznie odleg³ej maszynie,
jest zalecane aby¶ przetestowa³ ten proces na identycznej, lokalnej maszynie
i zweryfikowa³ szanse na powodzenie zanim przyst±pisz do aktualizacji.
</i>

<p>
Upgrade to wygodny sposób na utrzymywanie twojego systemu OpenBSD aktualnym
z ostatni± aktualn± wersj±.
Jednak¿e, rezultat w zamierzeniu nie odpowiada dok³adnie wynikowi
instalacji wyczy¶æ-i-za³aduj.
W szczególno¶ci stare pliki bibliotek, nie s± usuwane w procesie aktualizacji,
poniewa¿ mog± byæ wymagane przez starsze aplikacje które mog±, lecz nie musz±
byæ zaktualizowane w danym momencie.
Je¿eli NAPRAWDÊ chcesz pozbyæ siê tych wszystkich plików, prawdopodobnie lepiej
bêdzie je¶li zainstalujesz wszystko od pocz±tku.

<p>
Spis tre¶ci:
<ul>
<li><a href="#before">Zanim rozpoczniesz</a>
<li><a href="#upgrade">Upgrade</a>
<li><a href="#final">Ostatnie kroki</a>
</ul>

<hr>
<p>
<a name="before"></a>
<h2>Zanim rozpoczniesz</h2>

<p>
Sprawd¼ czy wykonywa³e¶ jakichkolwiek modyfikacji twojego kernela.
Przyk³adowo, mog³e¶ zmodyfikowaæ twoj± kartê sieciow± by korzysta³a 
z innych ni¿ domy¶lne ustawieñ, korzystaj±c z config(8).
Zapisz te ustawienia, aby je odtworzyæ dla nowego j±dra w 4.1.

<p>
<b>rc.conf:</b>
W odró¿nieniu od poprzednich wersji zak³adamy obecnie, ze plik
<tt>/etc/rc.conf</tt> nie jest edytowany przez u¿ytkownika.
Je¿eli wykonywa³e¶ zmiany w swoim pliku <tt>/etc/rc.conf</tt> przenie¶
je do <tt>/etc/rc.conf.local</tt>.
Je¿eli NIE MASZ pliku <tt>/etc/rc.conf.local</tt> po prostu skopiuj
swój plik <tt>/etc/rc.conf</tt> do <tt>/etc/rc.conf.local</tt>
i <i>usuñ ostatni± liniê z tego skryptu!</i>
W przeciwnym wypadku umie¶æ zawarto¶æ obecnego pliku <tt>rc.conf</tt>
na pocz±tku istniej±cego pliku <tt>rc.conf.local</tt> a nastêpnie
<i>usuñ ostatni± liniê skryptu</i> zanim przejdziesz do dalszych
etapów procesu.

<p>
<b><i>Uwagi dla u¿ytkowników systemów opartych na ARM (<a href="../../armish.html">armish</a>,    
<a href="../../zaurus.html">zaurus</a>):</i></b>
Zmiany w ABI wymagaj± wykonania nieznacznie ró¿ni±cego siê procesu
uaktualnienia je¿eli wykorzystywany jest niestandardowy kernel. 
Nie wykonuj restartu po instalacji kernela i przed instalacj±
nowej przestrzeni u¿ytkownika.

<p>
<hr>
<a name="upgrade"></a>
<h2>Proces uaktualnienia</h2>

<h3>Uaktualnienie za pomoc± kernela instalacyjnego</h3>
Je¿eli posiadasz dostêp do konsoli serwera wówczas naj³atwiejsz± i
najbezpieczniejsz± metod± na uaktualnienie systemu jest uruchomienie
systemu z medium instalacyjnego lub z
<a href="faq4.html#bsd.rd">bsd.rd</a> i wykonanie procesu uaktualnienia
który bardzo przypomina <a href="faq4.html">proces instalacji systemu</a>.
Nastêpnie nale¿y wykonaæ przedstawione poni¿ej <a href="#final">ostatnie
kroki</a>.

<p>
Jedn± z naj³atwiejszych metod na uruchomienie systemu z instalacyjnego kernela
jest umieszczenie pliku <i>bsd.rd</i> dla wersji 4.1 w g³ównym drzewie 
systemu plików i poinstruowanie boot loadera by wystartowa³ z 
pliku <i>bsd.rd</i>.
Dla amd64 oraz i386 wykonasz to wpisuj±c po prostu "<tt>boot bsd.rd</tt>"
gdy pojawi siê znak zachêty <tt>boot&gt;</tt>. 


<h3>Uaktualnienie bez kernela instalacyjnego</h3>
<i>Nie jest to zalecany proces. Korzystaj z medium instalacyjnego gdy 
tylko jest to mo¿liwe!</i>

<p>
Czasem kto¶ mo¿e potrzebowaæ aktualizacji na maszynie na której nie mo¿na
w ³atwy sposób przeprowadziæ normalnego procesu aktualizacji.
Mo¿na wówczas wykonaæ aktualizacjê ostro¿nie postêpuj±c w procesie podobnym
do aktualizacji opartej na ¼ród³ach:

<ul>
<li><b>Umie¶æ pliki instalacyjne w "dobrej" lokalizacji</b>.
Upewnij siê ¿e posiadasz wystarczaj±c± ilo¶æ miejsca!

<p>
<li><b>Wy³±cz wszystkie "niebezpieczne" aplikacje ze startu podczas uruchomienia systemu:</b>
Mo¿e wyst±piæ moment gdy prawdopodobnie nie bêdzie w³±czony PF podczas upgrade systemu,
ale twoje aplikacje mog± pracowaæ poprawnie.
Ka¿da aplikacja zale¿na w sensie bezpieczeñstwa od PF powinna zostaæ wy³±czona zanim
wy³±czony zostanie PF i nie powinna byæ w³±czana a¿ do poprawnej weryfikacji dzia³ania
PF po aktualizacji.
Mog± dzia³aæ równie¿ inne aplikacje które chcesz by dzia³a³y podczas aktualizacji systemu,
je równie¿ zatrzymaj i wy³±cz.

<p>
<li><b>Sprawd¼ swój kernel:</b>
Aczkolwiek <b>wiêkszo¶æ osób mo¿e pomin±æ ten krok</b>, je¿eli modyfikowa³e¶ 
swój kernel w wersji 4.0, prawdopodobnie bêdziesz musia³ to zrobiæ równie¿ 
w wersji 4.1. 
W szczególno¶ci gdy przeprowadzasz proces aktualizacji zdalnie, teraz 
jest dobry czas, aby siê upewniæ ¿e nowy kernel bêdzie dzia³a³ po 
restarcie maszyny.
Je¶li jakiekolwiek zmiany musz± byæ wprowadzone do kernela, 
najbezpieczniejsz± rzecz± jak± mo¿na zrobiæ, jest wykonanie tych zmian na 
lokalnym systemie 4.1.
Mo¿e to byæ równie proste jak modyfikacja okre¶lonego urz±dzenia korzystaj±c z config(8),
lub mo¿e poci±gaæ za sob± rekompilacjê, je¶li dana opcja nie jest w³±czona w kernelu
GENERIC.
Prosimy zobacz <a href="faq5.html">FAQ 5 - Tworzenie systemu ze ¼róde³</a>,
zanim zdecydujesz siê na rekompilacjê kernela.

<p>
<li><b>Instalacja nowego kernela(-li)</b>
<blockquote><pre>
<b>export RELEASEPATH=</b><i>/usr/rel</i>   <i># gdzie maj± znajdowaæ siê pliki</i>
<b>cd ${RELEASEPATH}</b>
<b>rm /obsd ; ln /bsd /obsd && cp bsd /nbsd && mv /nbsd /bsd</b>
<b>cp bsd.rd bsd.mp /</b>
</pre></blockquote>

Zauwa¿ dodatkowe polecenia kopiuj±ce pierwotne j±dro: wykonywane s± aby 
mieæ pewno¶æ ¿e zawsze istnieje w³a¶ciwa kopia j±dra na dysku tak, ¿e 
mo¿liwy bêdzie boot systemu w sytuacji gdy przytrafi siê przerwa w 
zasilaniu w niew³a¶ciwym momencie lub awaria systemu.

<p>
<li><b>Instalacja nowych plików <tt>/etc/firmware</tt>:</b>
Z uwagi na fakt, ¿e niektóre za³adowane fragmenty "firmware" zosta³y
przeniesione z j±dra do katalogu <tt>/etc/firmware</tt>.
Dotyczy to wprawdzie tylko u¿ytkowników kilku urz±dzeñ, jednak nie 
zaszkodzi jak wszyscy wszyscy wykonaj± ten krok.
Aby rozpakowaæ pliki mikrokodu z <tt>base41.tgz</tt>, jako root u¿yj
polecenia:

<blockquote><pre>
<b>cd /</b>
<b>tar -C / -xzpf ${RELEASEPATH}/base41.tgz ./etc/firmware</b>
</pre></blockquote>

<p>
<li><b>Reboot na nowym j±drze: (u¿ytkownicy ARM-ów powinni pomin±æ ten krok)</b>
Mo¿e kusiæ chêæ opuszczenia tego kroku, ale powinien on byæ wykonany teraz,
jak zwykle, nowe j±dro uruchomi stare aplikacje przestrzeni u¿ytkownija
(takie jak bêd±cy wkrótce wa¿ny <tt>reboot</tt>!), jednak czêsto nowe
aplikacje NIE bêd± dzia³a³y ze starym j±drem.

<p>
<i><b>Uwaga:</b> U¿ytkowniky ARM-ów (armish/zaurus) POWINNI pominaæ ten
krok w procesie uaktualnienia.</i>

<p>
<li><b>Instalacja nowych aplikacji przestrzeni u¿ytkownika</b>
<i>NIE instaluj teraz <tt>etc40.tgz</tt> oraz <tt>xetc40.tgz</tt>, poniewa¿
proces ten nadpisze twoje aktualne pliki konfiguracyjne!</i>

<blockquote><pre>
<b>export RELEASEPATH=</b>/<i>twoja_¶cie¿ka</i>
<b>cd /</b>
<b>tar xzpf ${RELEASEPATH}/base41.tgz</b>
<b>tar xzpf ${RELEASEPATH}/comp41.tgz</b>
<b>tar xzpf ${RELEASEPATH}/game41.tgz</b>
<b>tar xzpf ${RELEASEPATH}/man41.tgz</b>
<b>tar xzpf ${RELEASEPATH}/misc41.tgz</b>
<b>tar xzpf ${RELEASEPATH}/xbase41.tgz</b>
<b>tar xzpf ${RELEASEPATH}/xfont41.tgz</b>
<b>tar xzpf ${RELEASEPATH}/xserv41.tgz</b>
<b>tar xzpf ${RELEASEPATH}/xshare41.tgz</b>
</pre></blockquote>

Uwaga: nie wszystkie elementy musz± byæ zainstalowane dla wszystkich aplikacji,
jednak¿e, je¿eli zainstalowa³e¶ dany zbiór oryginalnie, powiniene¶ z pewno¶ci±
uaktualniæ go teraz nowym zbiorem.

<p>
Ponadto pliki z <tt>/etc</tt> s± zarz±dzane oddzielnie, zatem <tt>etc41.tgz</tt> 
oraz <tt>xetc41.tgz</tt> NIE s± tutaj rozpakowywane.

<p>
<li><b>Aktualizacja <tt>/dev</tt>.</b>
Nowy plik 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=MAKEDEV&amp;sektion=8&amp;arch=i386">MAKEDEV</a>
zostanie skopiowany do /dev/ podczas instalacji <tt>base40.tgz</tt>, zatem powiniene¶
zwyczajnie wykonaæ poni¿sze: 

<blockquote><pre>
<b>cd /dev</b>
<b>./MAKEDEV all</b>
</pre></blockquote>

<p>
<li><b>Zaktualizuj <tt>/etc</tt> jak poni¿ej</b>.

<p>
<li><b>Reboot</b>
</ul>

Podczas tego procesu,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&amp;sektion=8">sendmail(8)</a>
mo¿e zwróciæ pewien b³±d podobny do poni¿szego:

<pre>
    Nov 1 12:47:05 puffy sm-mta[16733]: filesys_update failed: No such file or dire
    ctory, fs=., avail=-1, blocksize=380204
</pre>
Wiadomo¶æ ta mo¿e byæ bezpiecznie zignorowana, mo¿esz te¿ chcieæ zatrzymaæ
sendmail(8)-a na czas aktualizacji.

<p>

<hr>
<a name="final"></a>
<h2>Ostatnie kroki</h2>

<a name="etcUpgrade"></a>
<h3>1. Aktualizacja <tt>/etc</tt></h3>

Jakkolwiek wykonujesz aktualizacjê, czy to przez kernel instalacyjny
i wykonanie "formalnego" procesu aktualizacji, czy te¿ aktualizacjê 
binarn± "w-miejsce", musisz wykonaæ kilka kroków.

<a name="users"></a>

<h4>Nowi u¿ytkownicy i grupy</h4>
<ul>
<li>Serwisy RIP oraz "HostState" zosta³y zaimportowane i wymagaj±
utworzenia dodatkowych u¿ytkowników oraz grup.

Jako <i>root</i>, dodaj poni¿szego u¿ytkownika i grupê korzystaj±c z
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>:

<blockquote><pre>
<b>useradd -u88 -g=uid -c"RIP Daemon" -d/var/empty -s/sbin/nologin _ripd</b>
<b>useradd -u89 -g=uid -c"HostState Daemon" -d/var/empty -s/sbin/nologin _hoststated</b>
</pre></blockquote>

W ten sposób zostanie jednocze¶nie dodany u¿ytkownik i odpowiednia grupa.
Twoje ¶rodowisko pracy mo¿e pozwoliæ ci na skopiowanie/wklejenie
tego polecenia.

</ul>

<a name="apps"></a>
<h4>1.2 - Zmiany w systemie</h4>

To <i>nie</i> jest pe³na lista zmian jakie nast±pi³y pomiêdzy wersj± 4.0 
a 4.1, lecz zestawienie kilku wa¿nych zmian mog±cych dotyczyæ wielu 
u¿ytkowników w procesie uaktualnienia systemu. 
Kompletn± listê znajdziesz na stronie <a href="../../plus41.html">plus41.html</a> 
lub w logach systemu CVS.

<ul>
<li><b>domy¶lne "flags S/SA keep state" w pf.conf(5)</b><br>
Flagi <i>flags S/SA keep state</i> s± obecnie domy¶lnymi dla "przepuszczaj±cych"
regu³ w <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5">pf.conf(5)</a>,
oraz dodane zosta³y nowe opcje <i>no state</i> i <i>flags any</i> aby
nadpisaæ zachowanie domyslne.
Obecne zestawy regu³ powinny siê wci±¿ ³adowaæ, jednak ich zachowanie
mo¿e siê nieznacznie zmieniæ poniewa¿ obecne zachowanie domy¶lne jest
bardziej restrykcyjne.
Zestawy regu³ z filtrowaniem bezstanowym (<i>no state</i>) lub wymagaj±ce
tworzenia stanów dla pakietów po¶rednich (<i>flags any</i>) powinny
zostaæ zaktualizowane i jawnie rz±daæ odpowiedniego zachowania.


<p>
Ze szczególn± uwag± nale¿y podchodziæ do interfejsu
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=enc&amp;sektion=4">enc0</a>
poniewa¿ zmienne stany s± potencjalnym problemem w filtrowaniu ruchu IPsec:
stany powinny byæ ograniczone do interfejsu, aby unikn±æ przepuszczenia
nieszyfrowanego ruchu 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>
powinien byæ wy³±czony. Zatem wszystkie regu³y na interfejsie enc0 powinny
mieæ jawnie ustawione <i>keep state (if-bound)</i>.

<p>
<li><b>Partycje DOS MBR: FreeBSD i NetBSD nie s± ju¿ wykorzystywane do
przechowywania etykiet dysków, i nie s± ju¿ pod ich k±tem przeszukiwane.</b><br>
W rezultacie dyski z podstawowymi partycjami FreeBSD lub NetBSD nie bêd± wiêcej
zawiera³y partycji 'a' utworzonych w "sztucznym" disklabel. Disklabel na takich
dyskach bêdzie przechowywany i ³adowany z pierwszego sektora, i w ten sposób 
mo¿e znale¼æ przypadkowy disklabel. Skorzystaj z fdisk(8) aby zmieniæ typ
partycji na OpenBSD ('A6') i korzystaæ z istniej±cego disklabel.

<p>
<li><b>amd64, i386, macppc, i mvmeppcnie próbuj± startowaæ z pierwszej
partycji NetBSD w sytuacji gdy nie zostaje znaleziona partycja OpenBSD.</b><br>
Aby zmieniæ typ partycji na OpenBSD ('A6') u¿yj
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8">fdisk(8)</a>.

<p>
<li><b>Nowy sposób na w³±czenie procesu accounting-u podczas startu</b><br>
Aby nakazaæ w³±cznie accounting-u podczas startu systemu musisz ustawiæ
now± zmienn± w rc.conf "accounting=YES". Istnienie pliku /var/acccount/acct
nie powoduje ju¿ jego automatycznego startu.

<p>
<li><b>spamd(8) domy¶lnie dzia³a obecnie w trybie greylistingu</b><br>
Bior±c pod uwagê, ¿e wcze¶niej greylisting w³±czany by³ poprzez parametr <tt>-g</tt>
obecnie istnienie tej flagi jest zak³adane przy starcie.
Parametr <tt>-b</tt> (u¿ywana poprzednio do podawania adresu na którym
spamd(8) ma nas³uchiwaæ) mo¿e byæ u¿yty do uruchomienia spamd tylko w trybie
czarnych-list.
Nowy parametr <tt>-l</tt> jest u¿ywany do okre¶lenia na jakim adresie IP
spamd powinien nas³uchiwaæ.

<p>
<li><b>spamd.conf(5) jest obecnie po³o¿ony w /etc/mail:</b><br>
Plik konfiguracyjny spamd.conf(5), który dotychczas po³o¿ony by³ w katalogu
<tt>/etc</tt>, zosta³ przeniesiony do <tt>/etc/mail</tt>.
Przenie¶ swój obecny plik konfiguracyjny do <tt>/etc/mail</tt> aby
spamd(8) mog³ za³adowaæ twoj± konfiguracjê. 

<p>
<li><b>MIB sysctl(3) dla sensorów jest obecnie hierarchiczny</b><br>
MIB sysctl(3) dla sensorów zawiera obecnie nazwê urz±dzenia sensora 
a tak¿e typ i indeks aktualnego sensora.
Zatem, wykonuj±c wcze¶niej "sysctl hw.sensors" otrzymywa³e¶ co¶ podobnego do
"<tt>hw.sensors.12=it0, Temp 1, 25.00 degC</tt>", obecnie uzyskasz
"<tt>hw.sensors.it0.temp0=25.00 degC</tt>".
Zaktualizuj swój plik konfiguracyjny 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sensorsd.conf&amp;sektion=5">sensorsd.conf(5)</a>
by odpowiada³ nowym nazwom czujników.

</ul>

<a name="etcfiles"></a>
<h4>1.3 - Zmiany w plikach w <tt>/etc</tt></h4>
Musisz rozpakowaæ pliki <tt>etc41.tgz</tt> do tymczasowej
lokalizacji:

<blockquote><pre>
<b>tar -C /tmp -xzpf ${RELEASEPATH}/etc41.tgz</b>
</pre></blockquote>

Pliki które prawdopodobnie mog± byæ skopiowane z <tt>etc41.tgz</tt> "w takiej postaci
w jakiej s±":

<blockquote><pre>
etc/daily
etc/disktab
etc/hoststated.conf
etc/magic
etc/monthly
etc/netstart
etc/rc
etc/rc.conf
etc/ripd.conf
etc/sasyncd.conf
etc/security
etc/weekly
etc/mail/Makefile
etc/mail/localhost.cf
etc/mail/sendmail.cf
etc/mail/submit.cf
etc/mail/spamd.conf
etc/mtree/*
var/www/conf/bgplg.css
var/www/conf/bgplg.foot
var/www/conf/bgplg.head
var/www/htdocs/bgplg/*
</pre></blockquote>

Zauwa¿, ¿e JEST mo¿liwe by lokalnie zmodyfikowaæ te pliki, je¿eli to 
by³o zrobione, bêdzie konieczne rêczne scalenie.
Zwróæ szczególn± uwagê na <tt>mail/*</tt> je¿eli u¿ywasz czego¶
innego ni¿ domy¶lna konfiguracja Sendmail(8)-a. 
Tutaj s± linie kopiuj/wklej do kopiowania tych plików, zak³adaj±c ¿e
rozpakowa³e¶ <tt>etc41.tgz</tt> w miejscu sugerowanym powy¿ej:

<blockquote><pre><b>
cd /tmp/etc
cp daily disktab hoststated.conf magic monthly netstart rc rc.conf ripd.conf sasyncd.conf security weekly /etc
cp mtree/* /etc/mtree/
cp mail/Makefile mail/localhost.cf mail/submit.cf /etc/mail
cp mail/sendmail.cf /etc/mail     </b><i># Uwa¿aj na ten plik!!</i><b>
cp mail/spamd.conf /etc/mail      </b><i># LUB ... mv /etc/spamd.conf /etc/mail </i><b>
cd /tmp/var/www
cp conf/bgplg.css conf/bgplg.foot conf/bgplg.head /var/www/conf
mkdir /var/www/htdocs/bgplg
cp htdocs/bgplg/* /var/www/htdocs/bgplg/
</b></pre></blockquote>

<p>
Pliki które musz± byæ rêcznie w³±czone, uwzglêdniaj±c lokalne
zmiany w nich wykonane, je¿eli by³y modyfikowane z domy¶lnych,
w przeciwnym wypadku, po prostu równie¿ je skopiuj:

<blockquote><pre>
etc/changelist
etc/ftpusers
etc/login.conf
etc/newsyslog.conf
etc/services
etc/sysctl.conf
etc/mail/aliases
var/cron/tabs/root
</pre></blockquote>

Zmiany w tych plikach znajduj± siê w <a href="../upgrade41.patch">
tym patch-u</a>.
Mo¿esz spróbowaæ z niego skorzystaæ wykonuj±c jako root nastepuj±ce polecenie:

<blockquote><pre>
<b>cd /</b>
<b>patch -C -p0 &lt; upgrade41.patch</b>
</pre></blockquote>

Spowoduje to przetestowanie ³atki jak dobrze pasuje do TWOJEGO systemu,
aby j± zastosowaæ opu¶æ opcjê "<tt>-C</tt>".
Zauwa¿ ¿e w sytuacji w której posiadasz zmodyfikowane pliki, lub pliki które 
nie s± wystarczaj±co aktualne, a tak¿e w sytuacji w której zosta³y zaktualizowane
z wersji "snapshot" 4.0, pliki te mog± nie zostaæ "czysto" zaakceptowane.
W takiej sytuacji, bêdziesz musia³ rêcznie uwzglêdniæ zmiany.
Prosimy wykonaj test tego procesu zanim siê na niego zdecydujesz dla maszyny
do której nie mo¿esz siê w ³atwy sposób dostaæ.

<p>
W poni¿szych plikach zosta³y wprowadzone pewne zmiany na które nale¿y zwróciæ
uwagê, lecz nie mog± byæ bezpo¶rednio skopiowane lub scalone (przyk³adowo
je¿eli korzystasz z pf.conf, przyj¿yj siê sugerowanej zmianie strategii i 
zdecyduj czy jest w³a¶ciwa dla twoich potrzeb).

<blockquote><pre>
etc/hostapd.conf
etc/pf.conf
etc/sensorsd.conf
</pre></blockquote>

Ostatecznie skorzystaj z 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newaliases&amp;sektion=8">newaliases(8)</a>
by zaktualizowac bazê aliasów oraz z
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree&amp;sektion=8">mtree(8)</a>
by utworzyæ jakiekolwiek nowe katalogi:
<blockquote><pre>
<b>newaliases</b>
<b>mtree -qdef /etc/mtree/4.4BSD.dist -p / -u</b>
</pre></blockquote>

<h3>2. Sprawdzanie kernela</h3>
Uwaga: <b>wiêkszo¶æ osób mo¿e pomin±æ ten krok!</b>

<p>
Je¿eli pod±¿a³e¶ za instrukcjami aktualizacji bez medium instalacyjnego,
ju¿ wykona³e¶ ten krok.
Jednak¿e, je¶li korzysta³e¶ z medium instalacyjnego, i posiada³e¶
zmodyfikowany kernel w 4.0, istnieje prawdopodobieñstwo, ¿e bêdziesz
musia³ zmodyfikowaæ kernel w 4.1.
Mo¿e to byæ równie proste jak modyfikacja okre¶lonego urz±dzenia korzystaj±c z config(8),
lub mo¿e poci±gaæ za sob± rekompilacjê, je¶li dana opcja nie jest w³±czona w kernelu
GENERIC.
Prosimy zobacz <a href="faq5.html">FAQ 5 - Tworzenie systemu ze ¼róde³</a>,
zanim zdecydujesz siê na rekompilacjê kernela.

<h3>3. Aktualizacja pakietów</h3>
Je¶li instalowa³e¶ jakiekolwiek pakiety w twoim systemie, powiniene¶
zaktualizowaæ je po zakoñczeniu aktualizacji systemu bazowego.
Jednak¿e pamiêtaj ¿e niektóre pakiety mog± wymagaæ dalszej konfiguracji
przed i/lub po uaktualnieniu pakietu.
Sprawd¼ informacje dotycz±ce aktualizacji koniecznych pakietów.

<p>
Poni¿sze pakiety znane s± z problemów jakie mog± wyst±piæ
podczas ich aktualizacji dla znacznej grupy u¿ytkowników.
Fakt, ¿e dany pakiet nie wystêpuje na tej li¶cie nie oznacza ¿e jego
uaktualnienie bêdzie proste.
Musisz odrobiæ "pracê domow±" dla aplikacji których U¯YWASZ.

<ul>
<li><b>Postgresql:</b> musisz zrzuciæ bazê danych przed uaktualnieniem
i po¿niej j± przywróciæ

</ul>

Narzêdzia obs³ugi pakietów pozwalaj± na aktualizacjê
"w miejsce", poprzez u¿ycie <tt>pkg_add -u</tt>.
Przyk³adowo, aby zaktualizowaæ twoje pakiety, upewnij siê ze <tt>PKG_PATH</tt>
wskazuje na katalog z pakietami dla 4.1 na twoim CD lub najbli¿szym
mirrorze FTP (przyp. t³um. lub na katalog na lokalnym dysku),
i u¿yj polecenia podobnego to poni¿szego
 
<blockquote><pre>
<b># pkg_add -ui -F update -F updatedepends</b>
</pre></blockquote>

gdzie opcja <tt>-u</tt> wskazuje tryb aktualizacji, <tt>-i</tt> okre¶la 
tryb interaktywny, wiêc pkg_add bêdzie zwraca³ siê do ciebie gdy
napotka niejasno¶æ. Przeczytaj stronê manuala dla 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;manpath=OpenBSD+4.1">pkg_add(1)</a>
oraz dokument FAQ dotycz±cy <a href="faq15.html#PkgMgmt">zarz±dzania pakietami</a>.

<p>
<font color="#0000e0">

<a href="upgrade35.html">[3.4 -> 3.5]</a> |
<a href="upgrade36.html">[3.5 -> 3.6]</a> |
<a href="upgrade37.html">[3.6 -> 3.7]</a> |
<a href="upgrade38.html">[3.7 -> 3.8]</a> |
<a href="upgrade39.html">[3.8 -> 3.9]</a> |
<a href="upgrade40.html">[3.9 -> 4.0]</a> |
<a href="upgrade42.html">[4.1 -> 4.2]</a> |
<a href="index.html">[FAQ Index]</a>
</font>

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../images/back.gif" border="0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: upgrade41.html,v 1.29 ]<br>
$Translation: upgrade41.html,v 1.6 2008/07/30 23:22:55 tkniaz Exp $<br>
-->
$OpenBSD: upgrade41.html,v 1.5 2008/08/04 12:05:27 tobias Exp $
</small>
</body>
</html>
