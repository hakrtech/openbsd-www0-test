<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Pod±¿anie za -current</title>
<link rev=" made" href=" mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
<meta name=" resource-type" content=" document">
<meta name=" description"   content=" the OpenBSD FAQ page">
<meta name=" keywords"      content=" openbsd,faq">
<meta name=" distribution"  content=" global">
<meta name=" copyright"     content=" This document copyright 2005 by OpenBSD">
</head>

<body bgcolor=" #ffffff" text=" #000000">
<a href="../../index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    

</a>
<p>
<font color=" #0000e0">
<a href="index.html">[FAQ Index]</a>
</font>

<p>

<h1><font color="#e00000">Pod±¿anie za <i>-current</i></font></h1>
<hr>

<h3>Spis tre¶ci</h3>
<p>

<ul>
<li><a href="#Intro">Wprowadzenie</a>
<!-- Oldest on top... -->
<li><a href="#20050927">2005/09/27 - Tworzenie wymaga nowych funkcji w xargs</a>
<li><a href="#20051006">2005/10/06 - Zmiany w  MAKEDEV(8) oraz ksh(1)</a>
<li><a href="#20051116">2005/11/16 - Nowa wersja ftp-proxy(8)</a>
<!-- New additions go on the bottom, please -->
</ul>
    
<hr>

<a name="Intro"></a>
<XXXversion>
<h2>Wprowadzenie</h2>
Dokument ten powsta³ dla ludzi ktorzy chc± pod±¿aæ za wersj± <i>-current</i>.
Zawiera informacje o zmianach miêdzy 3.8-release a <i>-current</i>,
i NIE powinien byæ u¿ywany przez nikogo uaktualniaj±cego z 3.7 lub wcze¶niejszych,
lub ludzi chc±cych pod±¿aæ za <a href="../../pl/stable.html"><i>-stable</i></a>.

<p>
Je¿eli zamierzasz uaktualniæ do wersji 3.8-release lub 3.8-stable z 
poprzednich wersji, zobacz <a href="upgrade38.html">upgrade</a> guide.

<p>
Je¿eli chcesz przej¿eæ informacje o uaktualnieniach z wcze¶niejszych wersji
OpenBSD, zobacz: <a href="../upgrade-old.html">upgrade-old.html</a>.
S± to informacje dostarczane jako zapis historyczny -- NIE powinien byæ u¿ywany
jako przewodnik do procedury aktualizacji.

<p>
ZAWSZE powinieneæ skorzystaæ z wersji snapshot jako punkt startowy
do uruchomienia <i>-current</i>.
Uaktualnianie poprzez kompilacje w³asnego kodu ¼ród³owego nie jest wspierane.

<p>
<a name="20050927"></a>
<h3>2005/09/27 - tworzenie wymaga nowych funkcji w xargs</h3>

Skompiluj i zainstaluj xargs(1).

<pre>
      # cd /usr/src/usr.bin/xargs && make obj && make && make install
</pre>

Nastêpnie uruchom make build.


<p>
<a name="20051006"></a>
<h3>2005/10/06 - Zmiany w MAKEDEV(8)</h3>

Zmiany w MAKEDEV wykonano znacznie zwiêkszaj± jego szybko¶æ.
Zmiany te zale¿± od wcze¶niejszych zmian wykonanych w ksh.
Zatem nie mog± byæ wykorzystane media instalacyjne zrobione wcze¶niej.  
<br>

<p>
<a name="20051116"></a>
<h3>2005/11/16 - Nowa wersja ftp-proxy(8)</h3>

ftp-proxy zosta³o zast±pione narzêdziem wcze¶niej nazywanym pftpx.
Nowy ftp-proxy dzia³a oddzielnie i nie jak poprzednio z inetd.conf.

<p>
Instrukcje uaktualniaj±ce s± nastêpuj±ce:

<p>
Zatrzymaj star± wersjê ftp-proxy instaluj±c now± wersjê /etc/inetd.conf lub
po prostu rêcznie wy³±cz wpis ftp-proxy z /etc/inetd.conf.


<pre>
cp /usr/src/etc/inetd.conf /etc/inetd.conf
</pre>

Nastêpnie wy¶lij sygna³ HUP do procesu inetd
<p>
<pre>
kill -HUP `cat /var/run/inetd.pid`
</pre>

Uruchom nowy ftp-proxy instaluj±c <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&apropos=0&sektion=0&manpath=OpenBSD+Current&arch=i386&format=html"><i>/etc/rc</i></a> oraz <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&apropos=0&sektion=0&manpath=OpenBSD+Current&arch=i386&format=html"><i>/etc/rc.conf</i></a>
i ustawiaj±c ftpproxy_flags="" w /etc/rc.conf.local.

<pre>
cp /usr/src/etc/{rc,rc.conf} /etc
echo 'ftpproxy_flags=""' >> /etc/rc.conf.local
</pre>

Alternatywnie ftp-proxy mo¿e byæ uruchomiony poprzez wywo³anie 
/usr/sbin/ftp-proxy z /etc/rc.local.

<p>
Nowe proxy korzysta z <a href="pf/anchors.html"><i>zakotwiczeñ</i></a> 
by zezwoliæ na po³±czenia, co oznacza, ¿e musi zostaæ przystosowany
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&apropos=0&sektion=0&manpath=OpenBSD+Current&arch=i386&format=html"><i>/etc/pf.conf</i></a>
W sekcji NAT bêdziesz potrzebowa³:

<p>
<pre>
nat-anchor "ftp-proxy/*"
rdr-anchor "ftp-proxy/*"
</pre>

S± wymagane, nawet je¿eli nie korzystasz z NAT-a.
Poni¿sza regu³a, która prawdopodobnie istnieje dla poprzedniego ftp-proxy,
musi pozostaæ:

<pre>
rdr pass on $int_if proto tcp from $lan to any port 21 -> \
  127.0.0.1 port 8021
</pre>

W sekcji regu³ jest potrzebne:

<pre>
anchor "ftp-proxy/*"
</pre>

Musisz pozostawiæ regu³y zezwalaj±ce proxy na tworzenie kontrolnych
po³±czeñ FTP (port docelowy 21/tcp).
Regu³y zezwalaj±ce na po³±czenia danych FTP nie s± potrzebne.
Tamte regu³y mog± zawieraæ "user proxy" lub "to port > 49151".

Do³o¿ono starañ by zachowaæ podobieñstwo w parametrach linii poleceñ, jednak
niektóre mog± byæ inne. Zobacz stronê manuala 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&apropos=0&sektion=0&manpath=OpenBSD+Current&arch=i386&format=html">ftp-proxy</a>.

<p>
Szczególna uwaga dotycz±ca jednego przypadku: je¿eli posiadasz starych
klientów, którzy polegaj± na po³±czeniach w trybie aktywnym, który korzysta
z portu 20/tcp jako portu ¼ród³owego, bêdziesz potrzebowa³ u¿yæ prze³±cznika '-r'.
(z tego powodu musia³e¶ uruchamiaæ poprzedniego ftp-proxy z opcj± "-u root").

<p>
Uruchom ftp-proxy z "-d -D7" je¿eli bêdziesz mia³ problemy i bêdziesz chcia³
diagnozowaæ co siê dzieje.

<p>
<font 
color=" #0000e0">
<a href="index.html">[FAQ Index]</a>
</font>
<p>
<hr>
<a href="index.html"><img height=" 24" width=" 24" src=" ../../images/back.gif" border=" 0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: current.html,v 1.23 ]<br>
$Translation: current.html,v 1.7 2005/11/30 01:58:10 tkniaz Exp $<br>
-->
$OpenBSD: current.html,v 1.7 2005/12/03 08:02:50 saad Exp $
</small>

</body>
</html>
