<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Pod±¿anie za -current</title>
<link rev=" made" href=" mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
<meta name=" resource-type" content=" document">
<meta name=" description"   content=" the OpenBSD FAQ page">
<meta name=" keywords"      content=" openbsd,faq">
<meta name=" distribution"  content=" global">
<meta name=" copyright"     content=" This document copyright 2007 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../../index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    

</a>
<p>
<font color= "#0000e0">
<a href="index.html">[FAQ Index]</a>
</font>

<p>

<h1><font color="#e00000">Pod±¿anie za <i>-current</i></font></h1>
<hr>

<h3>Spis tre¶ci</h3>
<p>

<ul>
<li><a href="#Intro">Wprowadzenie</a>
<!-- Oldest on top... -->
<li><a href="#20060926">2006/09/26 - przej¶cie na gcc3 (alpha)</a>
<li><a href="#20061006">2006/10/06 - domy¶lne 'flags S/SA keep state' w pf.conf(5)</a>
<li><a href="#20061011">2006/10/11 - disklabel nie na partycjach FreeBSD lub NetBSD</a>
<li><a href="#20061012">2006/10/12 - nie uruchamiaj z partycji NetBSD</a>
<li><a href="#20061029">2006/10/29 - nowy u¿ytkownik dla ripd(8)</a>
<li><a href="#20061227">2006/12/27 - ARM (zaurus/armish) "Flag day"</a>
<li><a href="#20070131">2007/01/31 - nowy u¿ytkownik dla hoststated(8)</a>
<li><a href="#20070202">2007/02/02 - nowy sposób na w³±czenie/wy³±czenie
    systemowego accounting-u podczas startu</a>
<li><a href="#20070226">2007/02/26 - spamd: domy¶lne w³±czenie greylistingu;
    pliki konfiguracyjne przeniesiono do /etc/mail</a>
<li><a href="#20070326">2007/03/26 - Xenocara zast±pi³a XF4 w <i>-current</i></a>
<li><a href="#20070327">2007/03/27 - aktualizacja ahci(4) mo¿e spowodowaæ
    zmianê nazw urz±dzeñ dysków SATA</a>
<li><a href="#20070331">2007/03/31 - zmiana w jêzyku filtrów bgpd</a>
<!-- New additions go on the bottom, please -->
</ul>
    
<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>Wprowadzenie</h2>
Dokument ten powsta³ dla ludzi którzy chc± pod±¿aæ za wersj± <i>-current</i>.
Zawiera informacje o zmianach miêdzy 4.0-release a <i>-current</i>,
i NIE powinien byæ u¿ywany przez nikogo uaktualniaj±cego z 3.9 lub wcze¶niejszych,
lub osoby chc±ce pod±¿aæ za <a href="../../pl/stable.html"><i>-stable</i></a>.

<p>
Je¿eli zamierzasz aktualizowaæ swój system do wersji 4.0-release lub 4.0-stable z 
poprzednich wersji, zobacz <a href="upgrade40.html">przewodnik aktualizacji</a>.

<p>
Upewnij siê, ¿e przeczyta³e¶ i zrozumia³e¶ dokument
<a href="faq5.html">FAQ 5 - Budowa systemu ze ¼róde³</a> zanim rozpoczniesz
korzystanie z wersji -current i instrukcji poni¿ej.

<p>
ZAWSZE powiniene¶ korzystaæ z wersji "snapshot" jako punktu startowego
do uruchomienia <i>-current</i>.
Uaktualnianie poprzez kompilacje w³asnego kodu ¼ród³owego nie jest wspierane.

<p>
Je¿eli poszukujesz informacji dotycz±cych aktualizacji wcze¶niejszych wersji
OpenBSD, zobacz <a href= "upgrade-old.html">upgrade-old.html</a>.
Materia³ ten jest dostarczany jako zapis historyczny -- NIE powinien byæ 
wykorzystywany jako dokumentacja procesu aktualizacji. 

<p>
<a name="20060926"></a>
<h3>2006/09/26 - przej¶cie na gcc3 (alpha)</h3>
OpenBSD/alpha zosta³ przeniesiony na gcc3.

Aby zaktualizowaæ,
<pre>
    # rm -rf /usr/include/g++
    # cp /usr/src/share/mk/bsd.own.mk /usr/share/mk/
</pre>
Nastêpnie, <a href="faq5.html#NewCompiler">skompiluj gcc3</a>, (korzystaj±c z 
katalogu gcc3), a dalej zbuduj nowe ld.so:
<pre>
    cd /usr/src/libexec/ld.so
    make clean
    make obj
    make depend
    make
    make install
</pre>
     
Teraz, zbuduj kernel i system jak <a href="faq5.html#Bld">zwykle</a>.
<p>

<a name="20061006"></a>
<h3>2006/10/06 - domy¶lne 'flags S/SA keep state' w pf.conf(5)</h3>
<i>flags S/SA keep state</i> jest obecnie domy¶lne dla pasuj±cych regu³ w
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5">pf.conf(5)</a>,
a nowe opcje <i>no state</i> i <i>flags any</i> pozwalaj± na nadpisanie
zachowania domy¶lnego. Aktualne regu³y mog± siê ³adowaæ, jednak ich
zachowanie mo¿e siê nieznacznie ró¿niæ, poniewa¿ nowe warto¶ci domy¶lne s± 
bardziej restryjcyjne. Zestawy regu³ z filtrowaniem bezstanowym (<i>no state</i>) 
lub konieczno¶æ tworzenia stanów dla po¶rednich pakietów (<i>flags any</i>) 
powinny zostaæ zaktualizowane aby jawnie wymusiæ porz±dane zachowanie.

<p>
Szczególn± uwagê nale¿y zwróciæ na interfejs
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=enc&amp;sektion=4">enc0</a>,
poniewa¿ ruchome stany ("floating") s± potencjalnym problemem podczas filtrowania
ruchu IPsec: stany powinny byæ ograniczone do interfejsu, aby zapobiec zezwoleniu
na nieszyfrowany ruch
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>
powinien siê wy³±czyæ. Zatem wszystkie regu³y dotycz±ce interfejsu enc0 powinny 
jawnie zawieraæ <i>keep state (if-bound)</i>.

<p>
<a name="20061011"></a>
<h3>2006/10/11 - disklabel nie na partycjach FreeBSD lub NetBSD</h3>
<i>Partycje DOS MBR: FreeBSD i NetBSD</i> nie s± ju¿ wykorzystywane do
przechowywania disklabel-i, i nie s± wiêcej przeszukiwane pod k±tem disklabel-i.
W rezultacie dyski z podstawowymi partycjami FreeBSD lub NetBSD nie bêd± wiêcej
zawiera³y partycji 'a' utworzonych w "sztucznym" disklabel. Disklabel na takich
dyskach bêdzie przechowywany i ³adowany z pierwszego sektora, i w ten sposób 
mo¿e znale¼æ przypadkowy disklabel. Skorzystaj z fdisk(8) aby zmieniæ typ
partycji na OpenBSD ('A6') i korzystaæ z istniej±cego disklabel.
<p>

<a name="20061012"></a>
<h3>2006/10/12 - nie uruchamiaj z partycji NetBSD</h3>
<i>amd64, i386, macppc, i mvmeppc</i> nie próbuj± startowaæ z pierwszej
partycji NetBSD w sytuacji gdy nie zostaje znaleziona partycja OpenBSD.
<p>

<a name="20061029"></a>
<h3>2006/10/29 - nowy u¿ytkownik dla ripd(8)</h3>
<i>Zaimportowany zosta³ nowy daemon RIP</i> i aby z niego korzystaæ konieczne jest
dodanie nowego u¿ytkownika i grupy.

Jako <i>root</i>, dodaj poni¿sz± grupê i u¿ytkownika poleceniem
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>:

<blockquote><pre>
# useradd -u88 -g=uid -c"RIP Daemon" -d/var/empty -s/sbin/nologin _ripd
</pre></blockquote>

W ten sposób zostanie utworzony u¿ytkownik i odpowiednia grupa.
Twoje ¶rodowisko powinno pozwalaæ na wykonanie kopiuj/wklej na tych
poleceniach.
<p>

<a name="20061227"></a>
<h3>2006/12/27 - ARM (zaurus/armish) "Flag day"</h3>
<i>Zmienie uleg³ mechanizm obs³ugi wywo³añ systemowych</i>, zatem programy
i biblioteki dzielone pochodz±ce przed 7 listopada nie bêd± dzia³a³y.
Wymagana jest aktualizacja ze "snapshotu" do wersji ze zmienionym ABI.
<p>

<a name="20070131"></a>
<h3>2007/01/31 - nowy u¿ytkownik dla hoststated(8)</h3>
<i>Zaimportowany zosta³ daemon HostState</i> w zwi±zku z tym wymagana jest
nowa grupa i u¿ytkownik.

Jako <i>root</i>, dodaj poni¿sz± grupê i u¿ytkownika, korzystaj±c z 
polecenia
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>:

<blockquote><pre>
# useradd -u89 -g=uid -c"HostState Daemon" -d/var/empty -s/sbin/nologin _hoststated
</pre></blockquote>

Spowoduje to dodanie zarówno nowego u¿ytkownika jak i odpowiedniej grupy.
Twoje ¶rodowisko powinno pozwoliæ ci na skopiowanie/wklejenie tego
polecenia.

<p>
<a name="20070202"></a>
<h3>2007/02/02 - nowy sposób na w³±czenie/wy³±czenie
systemowego accounting-u podczas startu</h3>
Aby nakazaæ w³±cznie accounting-u podczas startu systemu musisz ustawiæ
now± zmienn± w rc.conf "accounting=YES". Istnienie pliku /var/account/acct
nie powoduje ju¿ jego automatycznego startu.
<p>

<a name="20070226"></a>
<h3>2007/02/26 - spamd: domy¶lne w³±czenie greylistingu; pliki konfiguracyjne 
przeniesiono do /etc/mail</h3>

<p>
Greylisting jest obecnie domy¶lnym trybem pracy dla spamd(8); flaga <tt>-g</tt>
jest obecnie przestarza³a.
Aby wy³±czyæ greylisting i pracowaæ tylko w trybie blacklistingu, u¿yj flagi
<tt>-b</tt>.
Aby kontrolowaæ do którego adresu zbindowany jest spamd u¿yj nowej
flagi <tt>-l</tt>.

<p>
Mo¿liwe jest tak¿e wymuszenie na spamd-setup(8) pracy w trybie tylko blacklistingu
poprzez podanie flagi <tt>-b</tt>.

<p>
Plik spamd.conf(5) zosta³ przeniesiony z <tt>/etc</tt> do <tt>/etc/mail</tt>.

<p>
Wiêcej informacji znajdziesz na stronach manuali
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>
oraz
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd-setup&amp;sektion=8">spamd-setup(8)</a>.


<a name="20070326"></a>
<h3>2007/03/26 - Xenocara zast±pi³a XF4 w <i>-current</i></h3>
Drzewo <a href="http://www.xenocara.org/">xenocara</a> jest obecnie
u¿ywane zamiast XF4 do budowy X-ów w OpenBSD.
Wiêcej szczegó³ów znajdziesz na
<a href="http://undeadly.org/cgi?action=article&sid=20070328153001">undeadly.org</a>.

<p>
Je¿eli wci±¿ posiadasz <tt>Option "xkbrules" "xfree86"</tt> w twoim pliku konfiguracyjnym 
<tt>/etc/X11/xorg.conf</tt>, musisz tak¿e zmieniæ to ustawienie 
<tt>Option "xkbrules" "xorg"</tt>.

<p>
Gdy naprawdê chcesz zbudowaæ Xenocara'e ze ¼róde³ (nie rób tak, u¿yj snapshotu!), zobacz
<a href="http://www.openbsd.org/cgi-bin/cvsweb.cgi/xenocara/README?rev=HEAD&content-type=text/x-cvsweb-markup">
xenocara/README</a> oraz <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&amp;sektion=8">
release(8)</a>.

<a name="20070327"></a>
<h3>2007/03/27 - aktualizacja ahci(4) mo¿e spowodowaæ zmianê nazw urz±dzeñ dla dysków SATA</h3>
<p>
Ostatnie zmiany w podsystemie <tt>ahci(4)</tt> mog± spowodowaæ, ¿e dyski SATA,
które formalnie rozpoznawane s± jako urz±dzenia wd* (np. <tt>wd0</tt>), pojawi±
siê jako urz±dzenia sd* (tj. <tt>sd0</tt>).

<p>
Potencjalnie mo¿e to stanowiæ problem je¿eli aktualizowa³e¶ z wcze¶niejszego
snapshota. Zobacz wyj¶cie <tt>dmesg</tt> podczas startu.
Dysk ktory wcze¶niej pojawia³ siê jako:

<p>
<blockquote><tt>
pciide1 at pci0 dev 31 function 2 "Intel 82801GBM AHCI SATA" rev 0x02: DMA, channel 0 wired to native-PCI, channel 1 wired to native-PCI<br>
pciide1: using apic 2 int 11 (irq 11) for native-PCI interrupt<br>
wd0 at pciide1 channel 0 drive 0: &lt;FUJITSU MHV2080BH&gt;<br>
wd0: 16-sector PIO, LBA48, 76319MB, 156301488 sectors<br>
wd0(pciide1:0:0): using PIO mode 4, Ultra-DMA mode 5
</tt></blockquote>

zamiast tego mo¿e zostaæ wykryty jako:

<p>
<blockquote><tt>
ahci0 at pci0 dev 31 function 2 "Intel 82801GBM AHCI SATA" rev 0x02: AHCI 1.1: apic 2 int 16 (irq 11)<br>
scsibus1 at ahci0: 32 targets<br>
sd0 at scsibus1 targ 0 lun 0: &lt;ATA, FUJITSU MHV2080B, 0084&gt; SCSI2 0/direct fixed<br>
sd0: 76319MB, 76319 cyl, 64 head, 32 sec, 512 bytes/sec, 156301488 sec total
</tt></blockquote>

<p>
Zalecanym rozwi±zaniem jest zmiana w pliku <tt>/etc/fstab</tt> polegaj±ca na
zmianie odpowiednich wpisów <tt>/dev/wd</tt> na odpowiednie urz±dzenia i partycje
<tt>/dev/sd</tt>.

<p>
Inn± mo¿liwo¶ci± jest wy³±czenie <tt>ahci</tt> korzystaj±c z <tt>config(8)</tt> lub
<tt>boot -c</tt>.

<p>
Wiêcej informacji znajdziesz na stronach manuali
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&amp;sektion=4">ahci(4)</a>
oraz
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>.

<a name="20070331"></a>
<h3>2007/03/31 - zmiana w jêzyku filtrów bgpd</h3>
<p>
Filtry bgpd u¿ywaj±ce tylko <tt>prefixlen</tt> jako parametru filtra wymagaj± obecnie
podania rodziny adresów jak <tt>inet</tt> lub <tt>inet6</tt>:		     

<p>
<blockquote><tt>
allow from any inet prefixlen 8 - 24<br>
deny from any inet6 prefixlen &gt; 64<br>
</tt></blockquote>


<p>

<font color= "#0000e0">
<a href="index.html">[FAQ Index]</a>
</font>
<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: current.html,v 1.65 ]<br>
$Translation: current.html,v 1.26 2007/04/30 00:52:03 tkniaz Exp $<br>
-->
$OpenBSD: current.html,v 1.20 2007/04/30 08:15:01 jufi Exp $
</small>

</body>
</html>
