<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>15 - System portów i pakietów OpenBSD</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD FAQ page">
<meta name="keywords" content="openbsd,faq">
<meta name="distribution" content="global">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">

<!--
Copyright (c) 2005-2007 Steven Mestdagh <steven@openbsd.org>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

</head><body bgcolor= "#ffffff" text= "#000000">

<a href="../../pl/index.html">
<img alt="[OpenBSD]" src="../../images/smalltitle.gif" border="0" height="30" width="141">
</a>
<p>
<font color= "#0000e0">
<a href="index.html">[Spis tre¶ci]</a>
<a href="faq14.html">[Sekcja 14 - Konfiguracja dysków]</a>
</font>

<h1><font color="#e00000">15 - System portów i pakietów OpenBSD</font></h1><hr>

<h3>Spis tre¶ci</h3>
<ul>
<li><a href="#Intro">15.1 - Wprowadzenie</a>
<li><a href="#PkgMgmt">15.2 - Zarz±dzanie pakietami</a>
  <ul>
  <li><a href="#PkgHow">15.2.1 - Jak to dzia³a?</a>
  <li><a href="#Easy">15.2.2 - U³atwienia</a>
  <li><a href="#PkgFind">15.2.3 - Wyszukiwanie pakietów</a>
  <li><a href="#PkgInstall">15.2.4 - Instalacja nowych pakietów</a>
  <li><a href="#PkgList">15.2.5 - Wy¶wietlanie zainstalowanych pakietów</a>
  <li><a href="#PkgUpdate">15.2.6 - Aktualizacja zainstalowanych pakietów</a>
  <li><a href="#PkgRemove">15.2.7 - Usuwanie zainstalowanych pakietów</a>
  <!--  <li><a href="#PkgSecurity">15.2.8 - Aktualizacje bezpieczeñstwa (pakiety -stable)</a> -->
  <li><a href="#PkgPartial">15.2.8 - Instalacja lub usuwanie niekompletnych
     pakietów</a>
  </ul>
<li><a href="#Ports">15.3 - Praca z portami</a>
  <ul>
  <li><a href="#PortsHow">15.3.1 - Jak to dzia³a?</a>
  <li><a href="#PortsFetch">15.3.2 - Pobieranie drzewa portów</a>
  <li><a href="#PortsConfig">15.3.3 - Konfiguracja systemu portów</a>
  <li><a href="#PortsSearch">15.3.4 - Przeszukiwanie drzewa portów</a>
  <li><a href="#PortsInstall">15.3.5 - Bezpo¶rednia instalacja:
     przyk³ad</a>
  <li><a href="#PortsClean">15.3.6 - Porz±dki po kompilacji</a>
  <li><a href="#PortsDelete">15.3.7 - Usuwanie zainstalowanego pakietu portu</a>
  <li><a href="#PortsFlavors">15.3.8 - Korzystanie ze smaków i podpakietów</a>
  <!-- <li><a href="#PortsSecurity">15.3.9 - Aktualizacje bezpieczeñstwa (-stable)</a> -->
  </ul>
<li><a href="#PkgFAQ">15.4 - FAQ</a>
  <ul>
  <li><a href="#NoFun">15.4.1 - Dostajê wszystkie rodzaje dziwnych b³êdów.
    Po prostu nie widzê by system portów w ogóle dzia³a³.</a>
  <li><a href="#Latest">15.4.2 - Najnowsza wersja mojego 
    Ulubionego-Programu jest niedostêpna!</a>
  <li><a href="#NoPkg">15.4.3 - Dlaczego nie ma pakietu mojego 
    Ulubionego-Programu?</a>
  <li><a href="#NoPort">15.4.4 - Dlaczego nie ma portu dla mojego 
    Ulubionego-Programu?</a>
  <li><a href="#NotInBase">15.4.5 - Dlaczego mój Ulubiony-Program nie 
    jest czê¶ci± systemu bazowego?</a>
  <li><a href="#PkgVsPorts">15.4.6 - Czego powinienem u¿ywaæ: 
    pakietów czy portów?</a>
  <li><a href="#Knobs">15.4.7 - W jaki sposób dostosowaæ te porty 
    i uzyskaæ maksimum wydajno¶ci?</a>
  <li><a href="#Wait">15.4.8 - Zg³osi³em nowy port/aktualizacjê 
    tydzieñ temu. Dlaczego nie zosta³ dodany?</a>
  </ul>
<li><a href="#Problems">15.5 - Zg³aszanie problemów</a>
<li><a href="#Helping">15.6 - Jak nam pomóc?</a>
</ul>

<a name="Intro"></a>
<h2>15.1 - Wprowadzenie</h2>

<p>
Dostêpna jest ca³kiem sporo zewnêtrznych aplikacji z których niektórzy
mog± chcieæ korzystaæ w swoim systemie OpenBSD.
Aby u³atwiæ zarz±dzanie i instalacjê tego oprogramowania, a tak¿e
uwzglêdniæ politykê bezpieczeñstwa i za³o¿enia systemowe OpenBSD,
zewnêtrzne oprogramowanie jest <i>przenoszone</i> na OpenBSD.
Wysi³ek w przenoszenie aplikacji zwi±zany jest z wieloma rzeczami.
Przyk³adami s±: sprawienie by oprogramowanie korzysta³o ze standardowego
uk³adu katalogów OpenBSD (tj. pliki konfiguracyjne trafiaj± do <tt>/etc</tt>),
dostosowania specyfikacji bibliotek wspó³dzielonych OpenBSD, sprawienie
by aplikacja by³a bezpieczna na tyle na ile to mo¿liwe, itd.

<p>
Rezultatem tych dzia³añ s± gotowe do instalacji binarne pakiety.
Celem systemu pakietów jest ¶ledzenie jakie pakiety zosta³y zainstalowane,
tak by mog³y byæ w ka¿dej chwili z ³atwo¶ci± zaktualizowane lub usuniête.
W ten sposób, ¿adne zbêdne pliki nie s± zostawiane, a u¿ytkownicy utrzymuj±
swoje systemy w porz±dku.
System pakietów pozwala tak¿e mieæ pewno¶æ ¿e nic nie zostanie skasowane
przez przypadek, sprawiaj±c ¿e oprogramowanie przestanie dzia³aæ poprawnie.
Dodatw± zalet± jest to <b>¿e u¿ytkownicy rzadko musz± kompilowaæ programy
ze ¼róde³</b>, poniewa¿ pakiety zosta³y ju¿ skompilowane, s± dostêpne i
gotowe do u¿ycia w systemie OpenBSD.
W kilka minut, du¿a liczba pakietów mo¿e byæ pobrana i zainstalowana,
ze wszystkim we w³a¶ciwym miejscu.

<p>
<b><font color="#e00000">
Pakiety i kolekcja portów NIE przechodz± tego samego audytu bezpieczeñstwa
który jest wykonywany na bazowym systemie OpenBSD.
Aczkolwiek dok³adamy wszelkich starañ by utrzymaæ jako¶æ kolekcji pakietów
na wysokim poziomie, nie posiadamy wystarczaj±cych zasobów ludzkich by
zapewniæ ten sam poziom ¶wie¿o¶ci i bezpieczeñstwa.
</font></b>
Oczywi¶cie <a href="#PortsSecurity">aktualizacje bezpieczeñstwa</a> dla ró¿nych
aplikacji s± w³±czane do drzewa portów tak szybko jak to tylko mo¿liwe, a tak¿e
wykonywane s± odpowiednie aktualizacje bezpieczeñstwa jako snapshoty
dla <i>-current</i>.

<a name="PkgMgmt"></a>
<h2>15.2 - Zarz±dzanie pakietami</h2>

<a name="PkgHow"></a>
<h3>15.2.1 - Jak to dzia³a?</h3>

<p>
Pakiety s± pre-kompilowanymi binariami niektórych z najczê¶ciej
wykorzystywanych programów.

Pakietami mo¿na ³atwo zarz±dzaæ przy pomocy kilku narzêdzi,
tak¿e odnosz±cych siê do narzêdzi pkg* (pkg* tools):
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_add(1)</a>
  - narzêdzie do instalacji i aktualizacji pakietów.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_delete(1)</a>
  - narzêdzie do usuwania wcze¶niej zainstalowanych pakietów.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_info(1)</a>
  - narzêdzie do wy¶wietlania informacji o pakietach.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_create&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_create(1)</a> 
  - narzêdzie do tworzenia pakietów.
</ul>

<p>
W zale¿no¶ci od kolejno¶ci uruchomienia, aplikacja X mo¿e wymagaæ
by zainstalowane by³y aplikacje Y i Z.
Mówimy wówczas ¿e aplikacja X jest zale¿na od tych aplikacji, i z tego
powodu aplikacje Y i Z s± nazywane <i>zale¿no¶ciami</i> X.
Z kolei, Y mo¿e wymagaæ innych aplikacji P i Q, natomiast Z mo¿e wymagaæ
do poprawnego dzia³ania aplikacji R.
W ten sposób tworzone jest ca³e drzewo <i>zale¿no¶ci</i>.

<p>
Pakiety wygl±daj± jak zwyk³e paczki <tt>.tgz</tt>.
W zasadzie s± nimi, ale istnieje jedna podstawowa ró¿nica:
zawieraj± dodatkow± informacjê o <i>pakiecie</i>.
Informacja ta jest wykorzystywana przez
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_add(1)</a>
do kilku celów:

<ul>
<li>Ró¿nych kontroli: czy pakiet jest ju¿ zainstalowany lub czy jest
w konflikcie z innym zainstalowanym pakietem lub nazw± pliku?
<li>Zale¿no¶ci które nie s± jeszcze obecne w systemie, zostan±
automatycznie pobrane i zainstalowane, zanim rozpocznie siê instalacja
w³a¶ciwego pakietu.
<li>Informacje o pakiecie(-ach) jest zapisywana w centralnym
repozytorium, domy¶lnie po³o¿onym w <tt>/var/db/pkg/</tt>.
Uniemo¿liwi to, poza innymi rzeczami, by zale¿no¶ci pakietu zosta³y
skasowane zanim sam pakiet zostanie skasowany. 
Pozwala to mieæ pewno¶æ ¿e aplikacja nie zostanie przypadkowo uszkodzona
przez nieostro¿nego u¿ytkownika.
</ul>


<a name="Easy"></a>
<h3>15.2.2 - U³atwienia: PKG_PATH</h3>

<p>
Mo¿esz sprawiæ by rzeczy by³y naprawdê proste poprzez u¿ycie 
zmiennej ¶rodowiskowej <tt>PKG_PATH</tt>
Po prostu wska¿ twoj± ulubion± lokalizacjê, a pkg_add(1) bêdzie
automatycznie sprawdza³ czy znajduje siê w niej pakiet który poda³e¶,
<b>a tak¿e</b> automatycznie pobiera³ i instalowa³ niezbêdne zale¿no¶ci
pakietu.

<p>
Lista mo¿liwych lokalizacji do pobierania pakietów jest dostêpna
w <a href="#PkgFind">tej sekcji</a>.

<p>
Przyk³ad 1: pobieranie pakietu z <a href="../../orders.html">CDROM</a>,
zak³adaj±c ¿e jest podmontowany w <tt>/mnt/cdrom</tt>

<blockquote><pre>
$ <b>export PKG_PATH=/mnt/cdrom/4.2/packages/`machine -a`/</b>
</pre></blockquote>

<p>
Przyk³ad 2: pobieranie pakietu z najbli¿szego <a href="../../ftp.html">mirrora FTP</a>

<blockquote><pre>
$ <b>export PKG_PATH=ftp://twoj.mirror.ftp/pub/OpenBSD/4.2/packages/`machine -a`/</b>
</pre></blockquote>

<p>
Zazwyczaj bardzo dobrym pomys³em jest dodanie linii podobnych do podanych
powy¿ej do twojego <tt>~/.profile</tt>.
Podobnie jak w przypadku klasycznych zmiennych <tt>PATH</tt>, mo¿esz podaæ
wiele lokalizacji, oddzielaj±c je dwukropkami.
<b>Jednak¿e, ka¿da ¶cie¿ka w zmiennej <tt>PKG_PATH</tt> MUSI byæ zakoñczona
slashem (/).</b>
W ten sposób pkg_add(1) mo¿e poprawnie rozró¿niæ ¶cie¿ki nawet je¶li zawieraj±
URLe zawieraj±ce dwukropki.
Je¶li zawiedzie pierwszy wpis w <tt>PKG_PATH</tt>, zostanie sprawdzony
nastêpny, i tak dalej, a¿ pakiet nie zostanie znaleziony.
Je¿eli zawiod± wszystkie wpisy, system zwróci b³±d.

<p>
Zwróæ uwagê na u¿ycie
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=machine&amp;sektion=1">machine(1)</a>
w powy¿szych poleceniach.
Spowoduje to automatyczne wstawienie twojej "architektury aplikacyjnej",
co zazwyczaj, chocia¿ nie zawsze, oznacza nazwê twojej platformy.
Oczywi¶cie je¿eli korzystasz ze snapshotów, musisz zast±piæ "4.2"
"snapshots".


<a name="PkgFind"></a>
<h3>15.2.3 - Wyszukiwanie pakietów</h3>

Du¿a kolekcja pakietów dostêpna jest dla najbardziej powszechnych architektur.
Poszukaj pakietów w jednym z tych miejsc:

<ul>
<li>Na jednym z trzech <a href="../../orders.html">CD-ROM</a>,
w zale¿no¶ci od twojej architektury.
CD-ROMy zawieraj± tylko najczê¶ciej wykorzystywane, wolne w dystrybuowaniu
pakiety dla najbardziej powszechnych platform.
<li>Na jednym z <a href="../../ftp.html">serwerów lustrzanych FTP</a>.
Pakiety s± po³o¿one w katalogu <tt>/pub/OpenBSD/4.2/packages</tt>.
W zale¿no¶ci od architektury, pakiety umieszczone s± w odpowiednim podkatalogu.

<li>Na li¶cie pakietów na stronie OpenBSD:
<ul>
<li><a href="http://www.openbsd.org/4.2_packages/">Pakiety dla OpenBSD 4.2</a>
<li><a href="http://www.openbsd.org/4.1_packages/">Pakiety dla OpenBSD 4.1</a>
<li><a href="http://www.openbsd.org/4.0_packages/">Pakiety dla OpenBSD 4.0</a>
</ul>
</ul>

<p>
Je¿eli posiadasz drzewo portów w twoim systemie, mo¿esz szybko
znale¼æ pakiet którego szukasz jak zosta³o to opisane w
<a href="#PortsSearch">Przeszukiwanie drzewa portów</a>.

<p>
Prawdopodobnie zwróci³e¶ ju¿ uwagê na to, ¿e niektóre pakiety dostêpne s±
w kilku wariacjach, formalnie nazywanych <b>smakami</b>.
Inne s± kawa³kami tej samej aplikacji, które mog± byæ instalowane osobno.
S± one nazywane <b>podpakietami</b>.
Bardziej szczegó³owo omówimy to pó¼niej w <a href="#PortsFlavors">Korzystanie
ze smaków i podpakietów</a> ale smaki oznaczaj±, ¿e zosta³y skonfigurowane
z ró¿nymi zestawami opcji.
Obecnie, wiele pakietów posiada smaki, przyk³adowo: wsparcie dla baz danych,
wsparcie systemów bez X-ów, brak pewnych funkcjonalno¶ci sieci takich jak
SSL czy IPv6.
Ka¿dy smak pakietu ma ró¿ny przyrostek w nazwie pakietu.
Wiêcej informacji o nazwach pakietów znajdziesz w
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=packages-specs&amp;sektion=7">packages-specs(7)</a>.

<p>
<b>Uwaga:</b>
Nie wszystkie mo¿liwe pakiety s± dostêpne na serwerach FTP!
Niektóre aplikacje po prostu nie dzia³aj± na wszystkich architekturach.
Niektóre aplikacje nie mog± byæ rozpowszechniane przez FTP (lub CDROM) ze
wzglêdu na ograniczenia licencyjne.
Mo¿e byæ dostêpnych wiele kombinacji portów i pakietów, a projekt
OpenBSD nie posiada wystarczaj±cych ¶rodków by zbudowaæ je wszystkie
ze ¼róde³.
Wiêcej informacji o tym jak mo¿na to wykonaæ znajdziesz w 
<a href="#PortsFlavors">Korzystanie ze smaków i podpakietów</a> 
w czê¶ci dotycz±cej Portów w tym dokumencie.


<a name="PkgInstall"></a>
<h3>15.2.4 - Instalacja nowych pakietów</h3>

W procesie instalacji wykorzystywane jest narzêdzie
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_add(1)</a>.
Je¿eli <a href="#Easy">u³atwi³e¶ sobie sprawy z portami</a> poprzez ustawienie
zmiennej ¶rodowiskowej <tt>PKG_PATH</tt>, mo¿esz po prostu wywo³aæ
polecenie pkg_add(1) z nazw± pakietu, tak jak to pokazuje poni¿szy przyk³ad.

<blockquote><pre>$ <b>sudo pkg_add -v screen-4.0.3p0</b>
parsing screen-4.0.3p0
installed /etc/screenrc from /usr/local/share/examples/screen/screenrc | 71%
screen-4.0.3p0: complete
</pre></blockquote>

<p>
W tym przyk³adzie flaga <b>-v</b> zosta³a u¿yta by otrzymaæ bardziej
gadatliwe wyj¶cie.
Opcja ta nie jest konieczna, lecz jest u¿yteczna podczas debugowania
i zosta³a u¿yta tutaj aby nieco dok³adniej pokazaæ co w³a¶ciwie robi
pkg_add(1).
Zwróæ uwagê na wiadomo¶æ wspominaj±c± <i>/etc/screenrc</i>.
Wprowadzenie wiêkszej ilo¶ci <b>-v</b> spowoduje wy¶wietlenie
jeszcze bardziej szczegó³owego wyj¶cia.

<p>
<h4>Korzystanie z interaktywnego trybu pkg_add(1)</h4>

Od OpenBSD 3.9, pkg_add(1) posiada tryb interaktywny, uruchamiany poprzez
wywo³anie z flag± <b>-i</b>, i spowoduje zadawanie ci pytañ gdy nie 
bêdzie w stanie podj±æ decyzji samodzielnie.
Przyk³adowo, je¿eli nie wiesz jakie s± dostêpne wersje pakietów,
mo¿esz spróbowaæ w ten sposób: 

<blockquote><pre>$ <b>sudo pkg_add -i screen</b>
Ambiguous: screen could be screen-4.0.3p0 screen-4.0.3p0-shm screen-4.0.3p0-static
Choose one package
         0: &lt;None&gt;
         1: screen-4.0.3p0
         2: screen-4.0.3p0-shm
         3: screen-4.0.3p0-static
Your choice: 1
screen-4.0.3p0: complete
</pre></blockquote>


<p>
Dla niektórych pakietów, pewne wa¿ne informacje dodatkowe dotycz±ce
konfiguracji lub korzystania zostan± podane podczas instalacji.
Poniewa¿ s± wa¿ne, zostan± wy¶wietlone niezale¿nie od tego czy u¿yjesz
flagi <b>-v</b>:
Rozwa¿my poni¿szy przyk³ad:

<blockquote><pre>
$ <b>sudo pkg_add ghostscript-fonts-8.11</b>
ghostscript-fonts-8.11: complete
You may wish to update your font path for /usr/local/share/ghostscript/fonts
--- ghostscript-fonts-8.11 -------------------
To install these fonts for X11, just make sure that the fontpath
lists the 75dpi or 100dpi bitmap fonts before the ghostscript fonts,
and make sure you have the string ":unscaled" appended to the bitmap
font's fontpath. This way, the bitmap fonts will be used if they
match, and the Type 1 versions will be used if the font needs to be
scaled. Below is the relevant section from a typical xorg.conf file.

   FontPath   "/usr/X11R6/lib/X11/fonts/misc/"
   FontPath   "/usr/X11R6/lib/X11/fonts/75dpi/:unscaled"
   FontPath   "/usr/X11R6/lib/X11/fonts/100dpi/:unscaled"
   FontPath   "/usr/local/lib/X11/fonts/ghostscript/"
   FontPath   "/usr/X11R6/lib/X11/fonts/Type1/"
</pre></blockquote>

<p>
Zobaczmy teraz przyk³ad z pakietem który posiada zale¿no¶ci:

<blockquote><pre>
$ <b>sudo pkg_add -v tin-1.8.2p0</b>
 parsing tin-1.8.2p0
 Dependencies for tin-1.6.2 resolve to: gettext-0.14.6, libutf8-0.8, pcre-6.4p1, libiconv-1.9.2p3 (todo:
libiconv-1.9.2p3,gettext-0.14.6,pcre-6.4p1,libutf8-0.8)
 tin-1.8.2p0:parsing libiconv-1.9.2p3
 tin-1.8.2p0:libiconv-1.9.2p3: complete
 tin-1.8.2p0:parsing gettext-0.14.6
 Dependencies for gettext-0.14.6 resolve to: expat-2.0.0, libiconv-1.9.2p3 (todo: expat-2.0.0)
 tin-1.8.2p0:parsing expat-2.0.0
 tin-1.8.2p0:expat-2.0.0: complete
 tin-1.8.2p0:gettext-0.14.6: complete
 tin-1.8.2p0:parsing pcre-6.4p1
 tin-1.8.2p0:pcre-6.4p1: complete
 tin-1.8.2p0:parsing libutf8-0.8
 tin-1.8.2p0:libutf8-0.8: complete
 tin-1.8.2p0: complete
</pre></blockquote>

Ponownie dodali¶my flagê <b>-v</b> aby zobaczyæ wiêcej.
Po sprawdzeniu informacji o pakiecie, znalezione zosta³y zale¿no¶ci
i s± one instalowane najpierw.
Mo¿esz tak¿e zobaczyæ ¿e instalowany jest tak¿e pakiet gettext, który
zale¿y od libiconv.
Przed instalacj± gettext, sprawdzana jest informacja tego pakietu
i sprawdzane jest czy libiconv jest ju¿ zainstalowany w systemie.

<p>
Mo¿liwe jest okre¶lenie wielu nazw pakietów w jednej linii, co oznacza
¿e wszystkie zostan± zainstalowane razem, z mo¿liwymi zale¿no¶ciami.

<p>
Je¶li z jakiego¶ powodu zdecydowa³e¶ siê nie korzystaæ z <tt>PKG_PATH</tt>,
mo¿liwe jest tak¿e mo¿liwe podanie absolutnej lokalizacji pakietu w linii poleceñ.
Ta absolutna lokalizacja mo¿e byæ ¶cie¿k± lokaln± lub URLem odnosz±cym siê
do FTP, HTTP, lub lokalizacji SCP.
Rozwa¿my instalacjê z FTP:

<blockquote><pre>
$ <b>sudo pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/4.2/packages/`machine -a`/screen-4.0.3p0.tgz</b>
screen-4.0.3p0: complete
</pre></blockquote>

<p>
W tym przyk³adzie pominêli¶my flagê <b>-v</b>, zatem tylko
niezbêdne wiadomo¶ci zosta³y wy¶wietlone.
Zauwa¿ ¿e zosta³a podana pe³na nazwa pliku przez dodania rozszerzenia <b>.tgz</b>.
Mo¿esz tak¿e pomin±æ rozszerzenie, podobnie jak we wcze¶niejszych przyk³adach,
poniewa¿ pkg_add(1) u¿yje auto-dope³nienia.

<p>
<b>Uwaga:</b> Nie wszystkie architektury maj± dostêpne takie same pakiety.
Niektóre porty nie dzia³aj± na niektórych platformach, a wydajno¶æ limituje
liczbê pakietów które mog± byæ zbudowane na innych.

<p>
Dla bezpieczeñstwa, je¿eli instalujesz pakiet który zainstalowa³e¶
wcze¶niej (lub w starszej jego wersji) i go usun±³e¶, pkg_add(1)
<b>nie</b> nadpisze plików konfiguracyjnych które zosta³y zmodyfikowane.
Zamiast tego poinformuje ciê o tym jak poni¿ej (tylko je¿eli
u¿yta zosta³a flaga <b>-v</b>):

<blockquote><pre>
$ <b>sudo pkg_add -v screen-4.0.3p0</b>
parsing screen-4.0.3p0
The existing file /etc/screenrc has NOT been changed**                 | 71%
It does NOT match the sample file /usr/local/share/examples/screen/screenrc
You may wish to update it manually
screen-4.0.3p0: complete
</pre></blockquote>

Czasem mo¿esz spotkaæ siê z b³êdami jak ten z poni¿szego przyk³adu:

<blockquote><pre>$ <b>sudo pkg_add xv-3.10ap4</b>
xv-3.10ap4:jpeg-6bp3: complete
xv-3.10ap4:png-1.2.14p0: complete                                               
xv-3.10ap4:tiff-3.8.2p0: complete                                            
Can't install xv-3.10ap4: lib not found X11.9.0
Even by looking in the dependency tree:
        tiff-3.8.2p0, jpeg-6bp3, png-1.2.14p0
Maybe it's in a dependent package, but not tagged with @lib ?
(check with pkg_info -K -L)
If you are still running 3.6 packages, update them.
</pre></blockquote>

pkg_add ³adnie instalowa³ zale¿no¶ci gdy nagle przerwa³ instalacjê xv.
To jest kolejny ¶rodek ostro¿no¶ci który jest dostêpny od wersji OpenBSD 3.7.
Informacja pakietu zawarta w paczce zawiera tak¿e informacjê o wspó³dzielonych
bibliotekach, które pakiet oczekuje ¿e bêd± zainstalowane, systemowych oraz
zewnêtrznych.
Je¿eli jedna z wymaganych bibliotek nie mo¿e byæ znaleziona, pakiet nie 
zostanie zainstalowany poniewa¿ i tak nie bêdzie dzia³a³.

<p>
Aby rozwi±zaæ ten typ problemu, musisz dowiedzieæ siê co nale¿y
zainstalowaæ aby otrzymaæ wymagane biblioteki w systemie.

<!--
insert a good algorithm here
-->

Istnieje kilka rzeczy do sprawdzenia:
<ul>
<li>Mo¿esz mieæ zainstalowan± starsz± wersjê pakietu: dostêpna jest starsza
wersja wymaganej biblioteki.
W takim wypadku zaktualizuj te pakiety.
<li>Twój system nie jest kompletny: nie zainstalowa³e¶ jednego
z zestawów plików zawieraj±cego wymagan± bibliotekê.
Po prostu <a href="faq4.html#AddFileSet">Dodaj wymagany zestaw plików.</a>
<li>Twój system jest nieaktualny: posiadasz starsze wersje wymaganej biblioteki.
Uruchom instalator (jak to zosta³o opisane w<a href="faq4.html">FAQ 4</a>),
i wybierz (U)pgrade aby zaktualizowaæ swój system.
</ul>

<a name="PkgList"></a>
<h3>15.2.5 - Wy¶wietlanie zainstalowanych pakietów</h3>

Mo¿esz zobaczyæ listê zainstalowanych pakietów korzystaj±c z narzêdzia
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_info(1)</a>.

<blockquote><pre>
$ <b>pkg_info</b>
aterm-0.4.2p1       color vt102 terminal emulator with transparency support
bzip2-1.0.4         block-sorting file compressor, unencumbered
expat-2.0.0         XML 1.0 parser written in C
fluxbox-0.9.15.1p0  window manager based on the original Blackbox code
gettext-0.14.6      GNU gettext
imlib2-1.3.0        image manipulation library
jpeg-6bp3           IJG's JPEG compression utilities
libiconv-1.9.2p3    character set conversion library
libltdl-1.5.22p1    GNU libtool system independent dlopen wrapper
libungif-4.1.4p0    tools and library routines for working with GIF images
libutf8-0.8         provides UTF-8 locale support
mutt-1.4.2.2i       tty-based e-mail client
pcre-6.4p1          perl-compatible regular expression library
png-1.2.14p0        library for manipulating PNG images
screen-4.0.3p0      multi-screen window manager
tcsh-6.14.00p1      extended C-shell with many useful features
tiff-3.8.2p0        tools and library routines for working with TIFF images
tin-1.8.2p0         threaded NNTP and spool based UseNet newsreader
</pre></blockquote>

<p>
Gdy podasz nazwê zainstalowanego pakietu (lub po³o¿enie pakietu który bêdzie
instalowany), pkg_info(1) poka¿e ci bardziej szczegó³owe informacje dotycz±ce
tego pakietu.

<a name="PkgUpdate"></a>
<h3>15.2.6 - Aktualizacja zainstalowanych pakietów</h3>

Od wersji OpenBSD 3.7, mo¿liwe jest aktualizacja istniej±cych pakietów
przy pomocy flagi <b>-r</b> (= replace) polecenia
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_add(1)</a>.
W OpenBSD 3.8 wprowadzono flagê <b>-u</b> dla pkg_add(1), która zosta³a
w³±czona do prawdziwego mechanizmu aktualizacji w 3.9.

<p>
Za³ó¿my ¿e posiadasz starsz± wersjê unzip'a zainstalowanego zanim
wykona³e¶ aktualizacjê swojego systemu z 4.1 do 4.2.
Mo¿esz teraz z ³atwo¶ci± zaktualizowaæ ten pakiet do 4.2 jak poni¿ej:

<blockquote><pre>$ <b>sudo pkg_add -u unzip</b>
unzip-5.52 (extracting): complete
unzip-5.51 (deleting): complete
unzip-5.52 (installing): complete
Clean shared items: complete
</pre></blockquote>

<p>
Gdy pakiet posiada zale¿no¶ci, one równie¿ s± sprawdzane pod k±tem
aktualizacji.
Wywo³anie pkg_add(1) z flag± <b>-u</b> ale bez nazwy pakietu sprawdzi
wszystkie zainstalowane pakiety pod k±tem nowszych wersji.

<p>
<b>Uwaga:</b>
Flaga <b>-u</b> opiera siê na zmiennej ¶rodowiskowej <tt>PKG_PATH</tt>.
Gdy nie jest ona zdefiniowana, pkg_add nie bêdzie móg³ znale¼æ aktualizacji.

<p>
Pocz±wszy od wersji OpenBSD 4.2, posiadanie kilku wpisów <tt>PKG_PATH</tt>
nie oznacza, ¿e wszystkie ¼ród³a bêd± sprawdzane przy aktualizacji.
Zamiast tego, pkg_add(1) zatrzyma siê na pierwszej ¶cie¿ce zawieraj±cej
pasuj±cy pakiet.

<p>
Je¿eli istniej± pliki konfiguracyjne nale¿±ce do starszych wersji,
które modyfikowa³e¶, domy¶lnie zostan± pozostawione bez zmian.
Mo¿esz, oczywi¶cie, zast±piæ te pliki plikami domy¶lnymi nowszej
wersji, wywo³uj±c pkg_add(1) z flag± <b>-c</b>.

<a name="PkgRemove"></a>
<h3>15.2.7 - Usuwanie zainstalowanych pakietów</h3>

<p>
Aby usun±æ zainstalowany pakiet, po prostu we¼ jego pe³n± nazwê jak±
pokazuje pkg_info(1) (zobacz <a href="#PkgList">Wy¶wietlanie zainstalowanych
pakietów</a>) i u¿yj polecenia
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_delete(1)</a>.
W poni¿szym przyk³adzie usuniêty zostanie pakiet screen'a.
Zwracamy uwagê ¿e nie niektórych sytuacjach istniej± dodatkowe pozycje
które musisz usun±æ a których nie usunie za ciebie pkg_delete(1).
Podobnie jak w przypadku pkg_add(1), mo¿esz u¿yæ flagi <b>-v</b>
aby zobaczyæ bardziej szczegó³owe wyj¶cie.

<blockquote><pre>$ <b>sudo pkg_delete screen</b>
screen-4.0.3p0: complete
Clean shared items: complete
</pre></blockquote>

<p>
<b>Uwaga:</b> Czêsto nie ma potrzeby okre¶lania numerów wersji i smaku
wraz z nazw± pakietu, poniewa¿ pkg_delete(1) zazwyczaj bêdzie potrafi³
znale¼æ pe³n± nazwê samodzielnie.
Musisz okre¶liæ pe³n± nazwê pakietu (w naszym przypadku jest to
screen-4.0.3p0) tylko w sytuacjach niejednoznacznych gdy zainstalowanych
jest wiele pakietów z podan± nazw±. W takim przypadku pkg_delete(1)
nie wie jaki pakiet usun±æ.

<p>
Dla bezpieczeñstwa, pkg_delete(1) nie usuwa plików konfiguracyjnych je¿eli
zosta³y zmodyfikowane.
Zamiast tego informuje ciê o takim fakcie jak poni¿ej:

<blockquote><pre>$ <b>sudo pkg_delete screen</b>
screen-4.0.3p0: complete
Clean shared items: complete
--- screen-4.0.3p0 -------------------
You should also remove /etc/screenrc (which was modified)
</pre></blockquote>

<p>
Je¿eli chcesz by pliki konfiguracyjne by³y usuwane automatycznie,
mo¿esz tak zrobiæ korzystaj±c z flagi <b>-c</b>.

<!--
<a name="PkgSecurity"></a>
<h3>15.2.8 - Aktualizacje bezpieczeñstwa (pakiety -stable)</h3>

W sytuacji gdy wykryty zostanie b³±d lub defekt bezpieczeñstwa
w "zewnêtrznych" programach, s± one poprawiane w ga³êzi -stable
drzewa portów i udostêpniane s± pewne zaktualizowane pakiety binarne.

<p>
Prosimy zapoznaj siê ze 
<a href="../../pkg-stable.html">stron± dotycz±c± pakietów -stable</a>
aby dowiedzieæ siê wiêcej na temat aktualizowanych pakietów w ga³êzi -stable.
Zaktualizowane pakiety dostêpne s± tylko dla platform i386 i amd64.
Dla pozosta³ych platform, bêdziesz musia³ skorzystaæ z ga³êzi -stable
drzewa portów i kompilowaæ ze ¼róde³.

<p>
Je¿eli chcesz otrzymywaæ zawiadomienia zwi±zane z bezpieczeñstwem
systemu pakietów i portów, mo¿esz subskrybowaæ 
<a href="../../pl/mail.html">grupê dyskusyjn±</a>
ports-security.

<p>
Nazwy pakietów <b>zawsze</b> siê zmieniaj± w przypadku aktualizacji,
aby unikn±æ ryzyka pomy³ki pomiêdzy pakietem z wydania
a poprawionym pakietem (bug-fixed).
Nowa nazwa mo¿e zawieraæ wy¿szy numer wersji lub w przypadku gdy wersja
pakietu pozostaje niezmieniona, dodawany jest przyrostek <b>pN</b>,
gdzie <b>N+1</b> oznacza ile razy dany pakiet by³ patchowany.
-->

<a name="PkgPartial"></a>
<h3>15.2.8 - Instalacja lub usuwanie niekompletnych pakietów</h3>

W niektórych dziwnych przypadkach, mo¿esz zauwa¿yæ ¿e pakiet nie zosta³
dodany lub skasowany ca³kowicie, poniewa¿ jest w konflikcie z innymi
plikami.
Niekompletna instalacja jest zwykle oznaczana przez dodanie "partial-"
na pocz±tku nazwy pakietu.
Sytuacje takie mog± siê zdarzaæ np. w przypadku naci¶niêcia CTRL+C 
podczas instalacji:

<blockquote><pre>$ <b>sudo pkg_add screen-4.0.3p0</b>
screen-4.0.3p0: complete                                                      7%
Adjusting md5 for /usr/local/info/screen.info-3 from 49fb3fe1cc3a3b0057518459811b6dac to 3b9c7811244fb9f8d83bb27d3a0f60d8
/usr/sbin/pkg_add: Installation of screen-4.0.3p0 failed , partial installation recorded as partial-screen-4.0.3p0
</pre></blockquote>

<p>
Zawsze dobrym pomys³em jest usuniêcie niekompletnych pakietów
z systemu, i naprawienie potencjalnego problemu który mo¿e pojawiæ siê
w przysz³o¶ci.
Jest to zawsze wskazówka, ¿e twój system nie jest "czysty" ze 
wszystkim zainstalowanym z pakietów, lecz prawdopodobnie pakiety
wymiesza³y siê z innym oprogramowaniem instalowanym bezpo¶rednio ze
¼róde³.



<a name="Ports"></a>
<h2>15.3 - Praca z portami</h2>

Wspomnieli¶my na pocz±tku o tym ¿e pakiety s± kompilowane z drzewa 
portów.
W tej czê¶ci wyt³umaczymy jak dzia³aj± porty, a tak¿e kiedy powiniene¶
z nich korzystaæ a kiedy nie.

<p>
<b>WA¯NA UWAGA</b>: Drzewo portów dotyczy zaawansowanych u¿ytkowników.
<b>Zachêcamy wszystkich do korzystania z pre-kompilowanych
<a href="#PkgMgmt">pakietów</a> binarnych</b>.
NIE zadawaj prostych pytañ na grupach dyskusyjnych, w stylu
"Jak mogê sprawiæ, ¿e drzewo portów zacznie dzia³aæ?".
Je¿eli masz pytanie zwi±zane z drzewem portów, zak³adamy ¿e przeczyta³e¶
strony manuala i to FAQ, a zatem jeste¶ gotów by z nimi pracowaæ.

<a name="PortsHow"></a>
<h3>15.3.1 - Jak to dzia³a?</h3>

Drzewo portów, koncepcyjnie zapo¿yczone z 
<a href="http://www.freebsd.org">FreeBSD</a>, jest zestawem plików Makefile,
dla ka¿dej zewnêtrznej aplikacji, kontroluj±cych

<ul>
<li>sk±d i jak pobraæ ¼ród³a programu,
<li>od jakiego innego oprogramowania program zale¿y,
<li>jak zmodyfikowaæ ¼ród³a (je¿eli to konieczne),
<li>jak go skonfigurowaæ i zbudowaæ,
<li>jak go przetestowaæ (opcjonalnie),
<li>jak go zainstalowaæ.
</ul>

<p>
Niezale¿nie od Makefile, ka¿dy port zawiera tak¿e przynajmniej:

<ul>
<li>PLIST lub ewidencjê portu, która zawiera instrukcje dotycz±ce tworzenia pakietu
po jego skompilowaniu,
<li>DESCR czyli opis aplikacji,
<li>distfile, zawieraj±cy sumy kontrolne i rozmiar.
</ul>

<p>
Te wszystkie informacje s± przechowywane w hierarchii katalogów
<tt>/usr/ports</tt>
Hierarchia ta zawiera trzy podkatalogi specjalne:
<ul>
<li><tt>distfiles/</tt> - gdzie system portów przechowuje
zestawy ¼róde³ po pobraniu.
<li><tt>infrastructure/</tt> - g³ówny katalog infrastruktury portów,
zawiera wszystkie niezbêdne skrypty i pliki makefile.
<li><tt>packages/</tt> - zawiera wszystkie binarne pakiety zbudowane
przez system portów.
</ul>

Pozosta³e podkatalogi dotycz± ró¿nych kategorii aplikacji, które zawieraj±
podkatalogi z w³a¶ciwymi pakietami.
Z³o¿one porty mog± byæ zorganizowane na jeszcze ni¿szym poziomie, na przyk³ad
je¿eli zawieraj± czê¶æ bazow± programu i zestaw rozszerzeñ, lub wersjê stabiln±
i snapshot.
Ka¿dy katalog portu musi zawieraæ podkatalog <tt>pkg</tt> zawieraj±cy
ewidencjê pakietu(-ów) i plik(-i) opisów.
Mog± tak¿e istnieæ podkatalogi <tt>patches/</tt> i <tt>files</tt>,
zawieraj±ce odpowiednio ³atki ¼róde³ i dodatkowe pliki.

<p>
Gdy u¿ytkownik wywo³a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1">make(1)</a>
w podkatalogu w³a¶ciwego portu, system rekursywnie sprawdzi drzewo zale¿no¶ci, 
okre¶li czy wymagane s± jakie¶ zale¿no¶ci, zbuduje i zainstaluje wszystkie
brakuj±ce zale¿no¶ci, a nastêpnie powróci do w³a¶ciwego portu.
Ca³y proces budowy portu zachodzi wewn±trz <i>katalogu roboczego</i> który 
port utworzy.
Jest to albo podkatalog g³ównego katalogu portów, w tym przypadku rozpoznawany
jest przez jego przedrostek "w-", albo podkatalog <tt>${WRKOBJDIR}</tt>,
je¶li zmienna <tt>$WRKOBJDIR</tt> zosta³a ustawiona (zobacz
<a href="#PortsConfig">Konfiguracja systemu portów</a>).

<p>
<b>Uwaga:</b> Porty nie s± nigdy bezpo¶rednio instalowane w systemie!
Korzystaj± z <i>imitacji katalogu instalacyjnego</i>.
Wszystko co do niego trafia, jest pakowane razem w pakiet
(który jest przechowywany w podkatalogu <tt>packages/</tt> drzewa portów
o którym wspominali¶my wcze¶niej).
Instalacja portu tak na prawdê oznacza: utworzenie pakietu i pó¼niej
zainstalowanie tego pakietu!

<p>
<b>Wiêcej informacji</b> na temat systemu portów mo¿esz znale¼æ na tych 
stronach manuala:

<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ports&amp;sektion=7">ports(7)</a>
- opisuje ró¿ne fazy instalacji portu (tworzenia obiektów), jak korzystaæ ze smaków 
lub podpakietów, a tak¿e innych opcji.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bsd.port.mk&amp;sektion=5">bsd.port.mk(5)</a>
- bardzo szczegó³owe informacje dotycz±ce tworzenia obiektów, zmiennych, itd.
</ul>

<a name="PortsFetch"></a>
<h3>15.3.2 - Pobieranie drzewa portów</h3>

Zanim przejdziesz dalej, powiniene¶ przeczytaæ sekcjê dotycz±c± NIE
<a href="#NoFun">mieszania twojego systemu z systemem portów</a>.
Gdy ju¿ zdecydujesz jaki smak systemu portów chcesz, mo¿esz pobieraæ
drzewo portów z ró¿nych ¼róde³.
Poni¿sza tabela zawiera przegl±d co mo¿esz znale¼æ w ró¿nych smakach
i w jakiej formie.
'x' oznacza dostêpno¶æ, '-' oznacza brak dostêpno¶ci poprzez dane
¼ród³o.

<p>
<table border="1" align="center" style="empty-cells: show;">
<tr align="center">
<td align="left">¬ród³o</td>
<td>Forma</td>
<td colspan="4">Smak</td>
</tr>
<tr align="center">
<td colspan="2"></td>
<td>-release</td>
<td>-stable</td>
<td>snapshots</td>
<td>-current</td>
</tr>
<tr align="center">
<td align="left"><a href="../../orders.html">CD-ROM</a></td>
<td>.tar.gz</td>
<td>x</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr align="center">
<td align="left"><a href="../../ftp.html">mirror FTP</a></td>
<td>.tar.gz</td>
<td>x</td>
<td>-</td>
<td>x</td>
<td>-</td>
</tr>
<tr align="center">
<td align="left"><a href="../../pl/anoncvs.html">AnonCVS</a></td>
<td>cvs checkout</td>
<td>x</td>
<td>x</td>
<td>-</td>
<td>x</td>
</tr>
</table>

<p>
Na CD-ROMie i serwerze FTP szukaj pliku nazywaj±cego siê  <tt>ports.tar.gz</tt>
Musisz rozpakowaæ ten plik do katalogu <tt>usr/</tt>, co utworzy
<tt>/usr/ports</tt> i wszystkie podkatalogi wewn±trz niego.
Przyk³adowo:

<blockquote><pre>$ <b>cd /tmp</b>
$ <b>ftp ftp://ftp.openbsd.org/pub/OpenBSD/4.2/ports.tar.gz</b>
$ <b>cd /usr</b>
$ <b>sudo tar xzf /tmp/ports.tar.gz</b>
</pre></blockquote>

<p>
Snapshoty dostêpne na serwerach FTP s± generowane codziennie z 
drzewa portów -current.
Snapshoty znajdziesz w katalogu <tt>pub/OpenBSD/snapshots/</tt>.
Je¿eli korzystasz ze snapshotów drzewa portów, powiniene¶ mieæ
zainstalowany odpowiedni snapshot systemu OpenBSD.
Upewnij siê ¿e twoje drzewo portów i system OpenBSD s± zgodne!

<p>
Wiêcej informacji dotycz±cych pobierania drzewa portów przez AnonCVS,
prosimy zobacz <a href="../../pl/anoncvs.html">stronê AnonCVS</a>,
która zawiera tak¿e listê dostêpnych serwerów oraz kilka przyk³adów.

<a name="PortsConfig"></a>
<h3>15.3.3 - Konfiguracja systemu portów</h3>

<p>
<b>UWAGA:</b>
Ta sekcja wprowadza pewne dodatkowe globalne ustawienia dla budowy
aplikacji z portów.
Mo¿esz pomin±æ t± sekcjê, ale wtedy konieczne bêdzie wykonywanie
wszystkich polecen make(1) jako root.

<p>
Poniewa¿ projekt OpenBSD nie posiada wystarczaj±cych ¶rodków by w pe³ni
przegl±daæ kod ¼ród³owy oprogramowania zawartego w drzewie portów, mo¿esz
skonfigurowaæ system tak by zachowywa³ kilka dodatkowych ¶rodków ostro¿no¶ci.
Infrastruktura portów pozwala na wykonanie wszystkich czynno¶ci zwi±zanych
z budow± z poziomu zwyk³ego u¿ytkownika, i wykonanie jako root tylko tych 
kroków które wymagaj± uprawnieñ superu¿ytkownika.
S± to na przyk³ad tworzenie <tt>imitacji katalogu instalacyjnego portu</tt>
oraz <tt>instalacja</tt>. Nie mniej jednak, poniewa¿ uprawnienia roota
s± zawsze wymagane w kilku punktach, system portów nie uchroni ciê je¿eli
zdecydujesz by zbudowaæ z³o¶liw± aplikacjê.

<p>
<ul>
<li>Mo¿esz ustawiæ 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a>
tak aby system portów korzysta³ z niego w zadaniach wymagaj±cych uprawnieñ
superu¿ytkownika.
Po prostu dodaj do <tt>/etc/mk.conf</tt> liniê zawieraj±c±

<blockquote><pre>SUDO=/usr/bin/sudo
</pre></blockquote>

<li>Mo¿esz zmodyfikowaæ uprawnienia dla drzewa portów tak aby normalny
u¿ytkownik posiada³ prawo do zapisu.
W naszym przypadku, dodali¶my zwyk³ego u¿ytkownika do grupy wsrc, oraz
zmienili¶my uprawnienia katalogów tak aby by³y zapisywalne przez grupê. 

<blockquote><pre># <b>chgrp -R wsrc /usr/ports</b>
# <b>find /usr/ports -type d -exec chmod g+w {} \;</b>
</pre></blockquote>

<li>Mo¿esz sprawiæ by system portów korzysta³ z
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&amp;sektion=1">systrace(1)</a>
poprzez dodanie poni¿szej linii do <tt>/etc/mk.conf</tt>

<blockquote><pre>USE_SYSTRACE=Yes
</pre></blockquote>

Spowoduje to wymuszenie na procedurze budowy by nie "wychodzi³a" poza 
dozwolone katalogi, a tak¿e uniemo¿liwi zapisywanie w niedozwolonych
miejscach w rezultacie znacznie ograniczaj±c ryzyko uszkodzenia systemu.
Zwróæ uwagê, ¿e korzystanie z systrace(1) zwiêksza o oko³o 20% czas
budowy.

</ul>

<p>
Mo¿liwe jest korzystanie z drzewa portów w trybie tylko-do-odczytu,
poprzez separacjê katalogów do których nastêpuje zapis podczas
budowy portu:

<ul>
<li>Katalog roboczy portów.
Kontroluje to zmienna <tt>WRKOBJDIR</tt>, który okre¶la
katalog który zawiera katalogi robocze.
<li>Katalog zawieraj±cy pliki dystrybucyjne.
Jest to kontrolowane zmienn± <tt>DISTDIR</tt>.
<li>Katalog zawieraj±cy nowo wybudowane pakiety binarne.
Jest to kontrolowane zmienn± <tt>PACKAGE_REPOSITORY</tt>.
</ul>

Móg³by¶, na przyk³ad, dodaæ poni¿sze linie do <tt>/etc/mk.conf</tt>

<blockquote><pre>
WRKOBJDIR=/usr/obj/ports
DISTDIR=/usr/distfiles
PACKAGE_REPOSITORY=/usr/packages
</pre></blockquote>

Je¿eli sobie ¿yczysz mo¿esz tak¿e zmieniæ uprawnienia do tych katalogów
na twojego lokalnego u¿ytkownika i grupê, tak by system portów móg³
tworzyæ podkatalogi robocze jako zwyk³y u¿ytkownik.

<a name="PortsSearch"></a>
<h3>15.3.4 - Przeszukiwanie drzewa portów</h3>

Gdy ju¿ masz porty we w³a¶ciwym miejscu w swoim systemie bardzo ³atwe
staje siê wyszukiwanie programów.
Po prostu skorzystaj z <tt>make search key="poszukiwanyklucz"</tt>, jak
pokazano na przyk³adzie poni¿ej.

<blockquote><pre>$ <b>cd /usr/ports</b>
$ <b>make search key=rsnapshot</b>
Port:   rsnapshot-1.2.9
Path:   net/rsnapshot
Info:   remote filesystem snapshot utility
Maint:  Sigfred Haversen
Index:  net
L-deps: 
B-deps: :net/rsync
R-deps: :net/rsync
Archs:  any
</pre></blockquote>

Wynik poszukiwañ podaje przyjemne podsumowanie dla ka¿dego programu który
zosta³ znaleziony: nazwa portu, ¶cie¿ka do niego, jedna linia opisu,
osoba utrzymuj±ca port, s³owa kluczowe z nim zwi±zane, zale¿no¶ci
bibliotek/budowy/wykonawcze, oraz architektury na których ten port
dzia³a.

<p>
Mechanizm ten jest bardzo prosty i uruchamia awk(1) na pliku
indeksuj±cym porty.
W wersji OpenBSD 4.0 dodano nowy port nazwany "sqlports"
pozwalaj±cy na bardzo dok³adne przeszykiwanie w oparciu o SQL.
Jest to baza SQLite, jednak mo¿na wygenerowaæ dowolny format
bazy danych w oparciu o t± infrastrukturê.
W sqlports znajduj± siê skrypty dzieki ktorym mo¿na wygenerowaæ
bazê danych w innym formacie.

<p>
Po prostu dodaj przy pomocy pkg_add(1) pakiet sqlports oraz, w tym przypadku,
pakiet sqlite3.
Przyk³adowa sesja mo¿e wygl±daæ tak:

<blockquote><pre>
$ sqlite3 /usr/local/share/sqlports
SQLite version 3.3.12
Enter ".help" for instructions
sqlite> SELECT FULLPKGNAME,COMMENT FROM Ports WHERE COMMENT LIKE '%statistics%';
Guppi-0.40.3p1|GNOME-based plot program with statistics capabilities
mailgraph-1.12|a RRDtool frontend for Postfix statistics
R-2.4.1|clone of S, a powerful math/statistics/graphics language
py-probstat-0.912p0|probability and statistics utilities for Python
darkstat-3.0.540p1|network statistics gatherer with graphs
pfstat-2.2p0|packet filter statistics visualization
tcpstat-1.4|report network interface statistics
wmwave-0.4p2|Window Maker dockapp to display wavelan statistics
diffstat-1.43p0|accumulates and displays statistics from a diff file
sqlite>
</pre></blockquote>

Powy¿szy przyk³ad to wci±¿ bardzo proste zapytanie.
Dziêki SQL mo¿na wyszukiwaæ po bardzo wielu kryteriach, ³±cznie z
zale¿no¶ciami, flagami konfiguracyjnymi, dzielonymi bibliotekami, itp.

<a name="PortsInstall"></a>
<h3>15.3.5 - Bezpo¶rednia instalacja: przyk³ad</h3>

Dla jasno¶ci, rozwa¿my prosty przyk³ad: rsnapshot.
Zale¿no¶ci± tej aplikacji jest: rsync.

<blockquote><pre>
$ <b>cd /usr/ports/net/rsnapshot</b>
$ <b>make install</b>
===>  Checking files for rsnapshot-1.2.9
&gt;&gt; rsnapshot-1.2.9.tar.gz doesn't seem to exist on this system.
&gt;&gt; Fetch http://www.rsnapshot.org/downloads/rsnapshot-1.2.9.tar.gz.
100% |**************************************************|   173 KB    00:02
&gt;&gt; Size matches for /usr/ports/distfiles/rsnapshot-1.2.9.tar.gz
&gt;&gt; Checksum OK for rsnapshot-1.2.9.tar.gz. (sha1)
===&gt;  rsnapshot-1.2.9 depends on: rsync-2.6.9 - not found
===&gt;  Verifying install for rsync-2.6.9 in net/rsync
===&gt;  Checking files for rsync-2.6.9
&gt;&gt; rsync-2.6.9.tar.gz doesn't seem to exist on this system.
&gt;&gt; Fetch ftp://ftp.samba.org/pub/rsync/old-versions/rsync-2.6.9.tar.gz.
100% |**************************************************|   792 KB    00:31
&gt;&gt; Size matches for /usr/ports/distfiles/rsync-2.6.9.tar.gz
&gt;&gt; Checksum OK for rsync-2.6.9.tar.gz. (sha1)
===&gt;  Verifying specs:  c
===&gt;  found c.40.3
===&gt;  Extracting for rsync-2.6.9
===&gt;  Patching for rsync-2.6.9
===&gt;  Configuring for rsync-2.6.9
 [...snip...]
===&gt;  Building for rsync-2.6.9
 [...snip...]
===&gt;  Faking installation for rsync-2.6.9
 [...snip...]
===&gt;  Building package for rsync-2.6.9
Link to /usr/ports/packages/i386/ftp/rsync-2.6.9.tgz
Link to /usr/ports/packages/i386/cdrom/rsync-2.6.9.tgz
===&gt;  Installing rsync-2.6.9 from /usr/ports/packages/i386/all/rsync-2.6.9.tgz
rsync-2.6.9: complete
===&gt; Returning to build of rsnapshot-1.2.9
===&gt;  rsnapshot-1.2.9 depends on: rsync-2.6.9 - found
===&gt;  Extracting for rsnapshot-1.2.9
===&gt;  Patching for rsnapshot-1.2.9
===&gt;  Configuring for rsnapshot-1.2.9
 [...snip...]
===>  Building for rsnapshot-1.2.9
 [...snip...]
===&gt;  Faking installation for rsnapshot-1.2.9
 [...snip...]
===&gt;  Building package for rsnapshot-1.2.9
Link to /usr/ports/packages/i386/ftp/rsnapshot-1.2.9.tgz
Link to /usr/ports/packages/i386/cdrom/rsnapshot-1.2.9.tgz
===&gt;  rsnapshot-1.2.9 depends on: rsync-2.6.9 - found
===&gt;  Installing rsnapshot-1.2.9 from /usr/ports/packages/i386/all/rsnapshot-1.2.9.tgz
rsnapshot-1.2.9: complete
</pre></blockquote>

<p>
Jak zatem widzimy, system portów wykonuje wiele rzeczy automatycznie.
Pobiera, rozpakowuje, nak³ada ³atki na kod ¼ród³owy, konfiguruje i buduje
(kompiluje) kod, instaluje pliki w fa³szywym katalogu, tworzy pakiet
(zgodny z ewidencj± pakietu) i instaluje ten pakiet w twoim systemie
(zazwyczaj w <tt>/usr/local/</tt>).
Wykonuje to tak¿e rekursywnie dla <b>wszystkich zale¿no¶ci</b> portu.
Zwróæ uwagê ma linie
"<tt>===&gt; Verifying install for ...</tt>" oraz
"<tt>===&gt; Returning to build of ...</tt>" dla powy¿szego przyk³adu,
wskazuj±ce na spacer po drzewie zale¿no¶ci.

<p>
Je¿eli wcze¶niejsza wersja aplikacji któr± zamierzasz zainstalowaæ,
zosta³a zainstalowana wcze¶niej w twoim systemie, mo¿esz u¿yæ polecenia
<tt><b>make update</b></tt> zamiast <tt><b>make install</b></tt>.
Spowoduje to wywo³anie polecenia pkg_add(1) z flag± <b>-r</b>.

<p>
<b>Uwaga:</b>
Du¿e aplikacji bêd± wymaga³y znacznych zasobów systemowych do budowy.
Dobrym przyk³adem s± kompilatory takie jak GCC 4.0 czy Java 2 Software
Development Kit.
Je¿eli dostaniesz komunikat "out of memory" podczas kompilacji takiego
portu, zwykle oznacza to dwie rzeczy:

<ul>
<li>Twoje limity zasobów s± zbyt restrykcyjne.
Popraw je korzystaj±c z ulimit dla ksh lub limit dla csh.
Je¶li to nie pomo¿e stañ siê rootem zanim rozpoczniesz kompilacjê lub u¿yj
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a>
z flag± <tt>-c</tt> aby uruchomiæ kompilacjê z zasobami ograniczonymi okre¶lon±
klas± logowania (wiêcej szczegó³ów o klasach logowania znajdziesz w 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5">login.conf(5)</a>).
<li>Po prostu nie masz wystarczaj±cej ilo¶ci pamiêci RAM.
</ul>


<a name="PortsClean"></a>
<h3>15.3.6 - Porz±dki po kompilacji</h3>

Prawdopodobnie bêdziesz chcia³ posprz±taæ domy¶lny katalog roboczy
po tym jak skompilujesz i zainstalujesz port.

<blockquote><pre>$ <b>make clean</b>
===&gt;  Cleaning for rsnapshot-1.2.9
</pre></blockquote>

Dodatkowo mo¿esz tak¿e wyczy¶ciæ katalogi robocze wszystkich zale¿no¶ci
portu dziêki poleceniu:

<blockquote><pre>$ <b>make clean=depends</b>
===&gt;  Cleaning for rsync-2.6.9
===&gt;  Cleaning for rsnapshot-1.2.9
</pre></blockquote>

Je¿eli chcesz usun±æ ¼ród³o(-a) dystrybucyjne portu mo¿esz skorzystaæ z

<blockquote><pre>$ <b>make clean=dist</b>
===&gt;  Cleaning for rsnapshot-1.2.9
===&gt;  Dist cleaning for rsnapshot-1.2.9
</pre></blockquote>

W przypadku gdy kompilowa³e¶ wiele smaków tego samego portu,
mo¿esz wyczy¶ciæ katalog roboczy dla wszystkich smaków jednocze¶nie
korzystaj±c z

<blockquote><pre>$ <b>make clean=flavors</b>
</pre></blockquote>

Mo¿esz tak¿e czy¶ciæ katalogi podczas kompilacji ustawiaj±c specjaln± 
zmienn±. Katalogi robocze bêd± wówczas automatycznie czyszczone po
utworzeniu pakietu:

<blockquote><pre>
$ <b>make package BULK=Yes</b>
</pre></blockquote>


<a name="PortsDelete"></a>
<h3>15.3.7 - Usuwanie zainstalowanego pakietu portu</h3>

Bardzo ³atwo mo¿na odinstalowaæ port:

<blockquote><pre>$ <b>make uninstall</b>
===&gt; Deinstalling for rsnapshot-1.2.9
rsnapshot-1.2.9: complete
Clean shared items: complete
</pre></blockquote>

Zostanie wywo³ane polecenie pkg_delete(1) do usuniêcia odpowiedniego
pakietu z twojego systemu.
Je¿eli jest to potrzebne mo¿esz tak¿e usun±æ i zainstalowaæ ponownie
pakiet portu korzystaj±c z

<blockquote><pre>$ <b>make reinstall</b>
===&gt;  Cleaning for rsnapshot-1.2.9
/usr/sbin/pkg_delete rsnapshot-1.2.9
rsnapshot-1.2.9: complete
Clean shared items: complete
===&gt;  Installing rsnapshot-1.2.1 from /usr/ports/packages/i386/all/rsnapshot-1.2.9.tgz
rsnapshot-1.2.9: complete
</pre></blockquote>

Je¿eli chcesz pozbyæ siê pakietów które w³a¶nie zbudowa³e¶, mo¿esz
to zrobiæ tak jak poni¿ej:

<blockquote><pre>$ <b>make clean=packages</b>
===&gt;  Cleaning for rsnapshot-1.2.9
rm -f /usr/ports/packages/i386/all/rsnapshot-1.2.9.tgz
</pre></blockquote>


<a name="PortsFlavors"></a>
<h3>15.3.8 - Korzystanie ze smaków i podpakietów</h3>

Prosimy przeczytaj stronê manuala
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ports&amp;sektion=7">ports(7)</a>,
która powinna daæ ci dobre wprowadzenie do tematu.
Istniej± dwa mechanizmy kontroli paczek oprogramowania w zale¿no¶ci zgodnie
z ró¿nymi potrzebami.

<p>
Pierwszy z nich nazywany jest <b>smakami</b>.
Smak zazwyczaj oznacza pewien zestaw opcji kompilacji.
Przyk³adowo, niektóre aplikacje posiadaj± smaki "no_X11" który mo¿e byæ
u¿ywany w systemach bez X-ów.
Niektóre pow³oki maj± smak "static", które buduj± statycznie zlinkowan±
wersjê.
Istniej± porty które maj± ró¿ne smaki do kompilacji z ró¿nymi
graficznymi toolkitami.
Inne aplikacje zawieraj±: wsparcie dla ró¿nych baz danych,
ró¿ne opcje sieciowe (SSL, IPv6, ...), ró¿ne rozmiary papieru, itd.

<p>
<b>Podsumowuj±c:</b>
Najprawdopodobniej bêdziesz korzysta³ ze smaków gdy twój pakiet nie
zosta³ wykonany ze smakiem którego szukasz.
W takim przypadku okre¶lisz po¿±dany smak i zbudujesz port samodzielnie.

<p>
Wiêkszo¶æ smaków portu posiada swóje w³asne katalogi roboczy podczas budowy 
i aby unikn±æ nieporozumieñ, ka¿dy smak bêdzie pakowany w odpowiednio 
nazwany pakiet.
Je¿eli chcesz zobaczyæ dostêpne smaki dla danego portu, mo¿esz zmieniæ
katalog na katalog portu i wykonaæ

<blockquote><pre>$ <b>make show=FLAVORS</b>
</pre></blockquote>

Powiniene¶ tak¿e zobaczyæ zawarto¶æ plików DESCR dla portów
poniewa¿ powinny zawieraæ tak¿e informacje o dostêpnych smakach.

<p>
Drugi mechanizm nazywany jest <b>podpakietami</b>:
Opiekun portu mo¿e podj±æ decyzjê o utworzeniu subpakietów dla
ró¿nych fragmentów tej samej aplikacji, o ile mo¿na je logicznie rozdzieliæ.
Bardzo czêsto mo¿esz zobaczyæ podpakiety dla czê¶ci klienta i serwera
tego samego programu.
Czasem rozleg³e dokumentacje s± pakowane w oddzielne podpakiety
poniewa¿ pozwala to oszczêdziæ trochê przestrzeni dyskowej.
Dodatkowe funkcjonalno¶ci, poci±gaj±ce za soba wiele zale¿no¶ci, bêd± czêsto
dodawane jako osobny pakiet.
Opiekun portu zdecyduje tak¿e o tym który podpakiet bêdzie podpakietem podstawowym
i bêdzie instalowany domy¶lnie.
Innymi przyk³adami s±: obszerne zestawy narzêdzi do³±czonych do programu,
oddzielne modu³y do obs³ugi ró¿nych rzeczy, itd.

<p>
<b>Podsumowanie:</b>
Niektóre porty s± podzielone na pakiety. Polecenie make install zainstaluje
tylko pakiet podstawowy.

<p>
Aby wy¶wietliæ listê pakietów utworzonych z danego portu, u¿yj polecenia:
<blockquote><pre>
$ <b>make show=PACKAGES</b>
</pre></blockquote>
<p>
 
Polecenie <code>make install</code> zainstaluje tylko pierwszy podpakiet.
Chc±c zainstalowaæ wszystkie u¿yj polecenia:

<blockquote><pre>
$ <b>make install-all</b>
</pre></blockquote>

<p>
Listê ró¿nych podpakietów dostêpnych dla danego portu, mo¿esz zobaczyæ korzystaj±c z

<blockquote><pre>$ <b>make show=MULTI_PACKAGES</b>
</pre></blockquote>

Mo¿liwe jest wybranie który podpakiet(-y) bêdzie instalowany wewn±trz drzewa
portów.
Po kilku testach, procedura ta wywo³a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_add(1)</a>
do zainstalowania porz±danego podpakietu(-ów).

<blockquote><pre>$ <b>env SUBPACKAGE="-server" make install</b>
</pre></blockquote>

<p>
<b>Uwaga:</b>
Mechanizm podpakietów dotyczy tylko pakietów, nie modyfikuje ¿adnych
opcji konfiguracyjnych przed budow± portu.
Do tego celu musisz u¿ywaæ smaków.

<!-- 
<a name="PortsSecurity"></a>
<h3>15.3.9 - Aktualizacje bezpieczeñstwa</h3>

Gdy zostan± wykryte powa¿ne b³êdy lub defekty bezpieczeñstwa w zewnêtrznym
oprogramowaniu, s± one naprawianie w ga³êzi <b>-stable</b> drzewa portów.
Pamiêtaj o rocznym cyklu ¿ycia: tylko aktualne i ostatnie wydanie s±
aktualizowane, zgodnie z tym co zosta³o napisane w
<a href="faq5.html#Flavors">FAQ 5 - W±tki OpenBSD</a>.

<p>
Oznacza to, ¿e wszystko co musisz zrobiæ to upewniæ siê ¿e pobierasz
w³a¶ciw± ga³±¼ drzewa portów, i z niego budujesz poszukiwane programy.
Musisz pamiêtaæ o utrzymywaniu aktualnej wersji z CVS, oraz dodatkowo
subskrybowaæ <a href="../../pl/mail.html">grupê dyskusyjn±</a>
ports-security, aby otrzymywaæ komunikaty bezpieczeñstwa zwi±zane z
programami znajduj±cymi siê w drzewie portów.

<p>
Oczywi¶cie, poprawki bezpieczeñstwa wprowadzane s± najpierw do portów
wersji -current zanim trafi± do ga³êzi -stable.
-->

<a name="PkgFAQ"></a>
<h2>15.4 - FAQ</h2>

<a name="NoFun"></a>
<h3>15.4.1 - Dostajê wszystkie rodzaje dziwnych b³êdów.
Po prostu nie widzê by system portów w ogóle dzia³a³.</h3>

<p>
Jest bardzo prawdopodobne ¿e korzystasz z systemu i drzewa portów które
nie s± zgodne.

<p>
<i>Przepraszam?</i>
<ul>
<li>Przeczytaj WSZYSTKO na temat
<a href="faq5.html#Flavors">w±tków OpenBSD</a>:
-release, -stable, i -current
Poni¿ej znajduje siê krótkie podsumowanie, ale prosimy aby¶ przeczyta³
dokument wspomniany powy¿ej aby mieæ pojêcie z którego chcesz korzystaæ. 
<ul>
<li><a href="../../orders.html">Release</a>: To co znajduje siê na CD.
<li><a href="../../pl/stable.html">Stable</a>: Wydanie, 
  plus rozszerzenia bezpieczeñstwa i niezawodno¶ci.
<li><a href="current.html">Current</a>: 
Aktualnie rozwijana wersja OpenBSD.
</ul>       
<li>NIE pobieraj drzewa portów -current i oczekuj, ¿e bêdzie dzia³a³o
w systemie -release lub -stable.
Jest to jeden z najbardziej powszechnych b³êdów i zirytujesz ludzi gdy
poprosisz o pomoc w sprawie "wydaje siê ¿e nic nie dzia³a!"
<b>Je¿eli pod±¿asz za -current, potrzebujesz by zarówno system jak
i drzewo portów by³o w wersji -current</b>.
Tak, oznacza to zwykle, ¿e wspania³y nowy port nie bêdzie po prostu dzia³a³
z twoim "starszym" systemem -- nawet je¶li ten system by³ "-current" kilka
tygodni temu.
Pamiêtaj tak¿e, ¿e je¿eli u¿ywasz X11 jako czê¶ci twojego systemu, musisz
tak¿e pod±¿aæ za odpowiedn± ga³êzi±!
<li>Poniewa¿ ¿adne znacz±ce zmiany nie s± wprowadzane do -stable,
mo¿liwe jest korzystanie z drzewa portów i pakietów -release na systemie -stable.
Nie ma potrzeby aktualizacji wszystkich zainstalowanych pakietów
po na³o¿eniu kilku ³atek na twój system.
</ul>

<p>
Innym powszechnym b³êdem jest pominiêcie instalacji X11.
Nawet je¿eli port który usi³ujesz zbudowaæ nie ma bezpo¶redniej zale¿no¶ci
z X11, jego podpakiet lub jego zale¿no¶ci mog± wymagaæ nag³ówków i 
bibliotek X11.
Budowa portów w systemie bez X11 nie jest wspierana, zatem je¿eli upierasz
siê by to wykonaæ, musisz sam wymy¶leæ jak to zrobiæ.
Jednak¿e dla wielu portów istniej± "smakowe" pakiety "no_x11", które
mo¿esz zainstalowaæ w systemie bez konieczno¶ci posiadania X11.

<p>
Dla 4.2 wiele pakietów korzystaj±cych z libexpat wymusza zainstalowanie
xbase42.tgz, nawet je¶li nie posiadaj± graficznego interfejsu.
Zostanie to poprawione w 4.3.

<a name="Latest"></a>
<h3>15.4.2 - Najnowsza wersja mojego Ulubionego-Programu jest niedostêpna!</h3>

Je¿eli u¿ywasz wydania lub wersji stabilnej OpenBSD, nie znajdziesz ¿adnych
aktualizacji pakietów, a¿ do nastêpnego wydania lub a¿ wyniknie problem
bezpieczeñstwa uzasadniaj±ce aktualizacjê portu w ga³êzi -stable,
a tak¿e aktualizacja odpowiadaj±cego mu pakietu.

<p>
<b>OSTRZE¯ENIE: NIE mieszaj wersji Portów i OpenBSD!</b>

<p>
Robi±c tak prêdzej czy pó¼niej (prawdopodobnie bardzo szybko) sprawisz
sobie ból g³owy staraj±c siê rozwi±zywaæ problemy 
<a href="#NoFun">wszystkich mo¿liwych b³êdów</a>!

<p>
<i>Ale zaraz, mam wszystko -current!</i>

<p>
Kolekcja portów jest projektem wolontariuszy.
Czasem projekt po prostu nie ma wystarczaj±cych zasobów developerskich
by utrzymaæ wszystko "up-to-date".
Developerzy czêsto wybieraj± to co uwa¿aj± za interesuj±ce i co mog±
przetestowaæ w swoim ¶rodowisku.
Twoja <a href="../../donations.html">dotacja</a> mo¿e umo¿liwiæ
testowanie portów na wiêkszej liczbie platform.

<p>
Niektóre pakiety mog± pozostaæ w tyle za g³ównymi wersjami z tego
powodu.
Kolekcja portów mo¿e posiadaæ wersjê ze Stycznia, podczas gdy nowa
wersja programu zosta³a wydana przez developerów w Maju, trzy miesi±ce
temu.
Czêsto jest to ¶wiadoma decyzja; mog± wystêpowaæ problemy z now± wersj±
w OpenBSD i opiekun stara siê go rozwi±zaæ, lub po prostu zrobiono 
aplikacjê gorsz± ni¿ stara wersja: OpenBSD mo¿e mieæ inne 
<a href="../../pl/goals.html">za³o¿enia</a> ni¿ developerzy
innego projektu, co czasem skutkuje w wyborze w³a¶ciwo¶ci i wyborze
modelu lub implementacji, które s± nieporz±dane z punktu widzenia
developerów OpenBSD.
Aktualizacja mog³a byæ od³o¿ona, poniewa¿ nowa wersja nie by³a rozwa¿ana
jako aktualizacja krytyczna.

<p>
Je¿eli naprawdê potrzebujesz nowej wersji portu, powiniene¶ poprosiæ
opiekuna portu o aktualizacjê
(zobacz <a href="#Problems">poni¿ej</a> jak dowiedzieæ siê kto jest jego
opiekunem).
Je¿eli mo¿esz <a href="#Helping">pomóc</a>, tym lepiej.


<a name="NoPkg"></a>
<h3>15.4.3 - Dlaczego nie ma pakietu mojego Ulubionego-Programu?</h3>

Istnieje kilka mo¿liwych powodów:

<ul>
<li>Na p³ytach <a href="../../orders.html">CD</a> OpenBSD 
nie ma wystarczaj±cej ilo¶ci miejsca by znalaz³ siê tam ka¿dy pakiet dla
ka¿dej mo¿liwej platformy.
Dodatkowo, niektóre programy mog± byæ rozpowszechniane za darmo, co oznacza
¿e nie mog± byæ do³±czone do p³yt CD.
Je¿eli nie mo¿esz znale¼æ pakietu na CD, spróbuj innego ¼ród³a, takiego
jak mirror FTP.
<li>Niektóre programy nie mog± byæ rozpowszechniane w jakiejkolwiek
formie binarnej, stosownie do ich licencji.
Inne programy s± obci±¿one patentami i z tego powodu nie mo¿e byæ
rozpowszechniane.
Je¿eli twój Ulubiony-Program podlega tej kategorii, bêdziesz musia³
skorzystaæ z portu i skompilowaæ go ze ¼róde³.

<li>Oczywiste, ale czasem zapominane:
<a href="#NoPort">nie istnieje port twojego Ulubionego-Programu</a>.
Mo¿esz to sprawdziæ <a href="#PortsSearch">przeszukuj±c drzewo portów</a>.
Je¶li w istocie nie istnieje port dla twojego Ulubionego-Programu, 
zapraszamy do <a href="#Helping">pomocy</a>.
</ul>

<a name="NoPort"></a>
<h3>15.4.4 - Dlaczego nie ma portu dla mojego Ulubionego-Programu?</h3>

Kolekcja portów jest prac± wolontariuszy.
Aktywna praca developerska jest wykonywana przez ograniczon± liczbê osób,
w ich wolnym czasie.
Ludzie ci zazwyczaj tworz± kilka portów tylko tych programów których
bezpo¶rednio u¿ywaj± lub którymi s± zainteresowani.

<p>
Mo¿esz <a href="#Helping">pomóc</a>.
Rozwa¿ mo¿liwo¶æ tworzenia w³asnego portu.
Istnieje dokumentacja dotycz±ca tego zagadnienia:
<a href="../../pl/porting.html">Tworzenia portu OpenBSD</a>.
Przeczytaj j±, a nastêpnie przeczytaj j± jeszcze raz.
Szczególnie czê¶æ dotycz±c± <i>opieki</i> nad twoim portem.
Pó¼niej spróbuj stworzyæ w³asny port i przetestuj go dok³adnie krok
po kroku.
Je¿eli w koñcu bêdzie dzia³a³ DOBRZE dla ciebie, wy¶lij go na grupê 
dyskusyjn± dotycz± portów na
<a href="mailto:ports@openbsd.org">ports@openbsd.org</a>.
Istniej± du¿e szanse ¿e dostaniesz odpowied¼ i testy od innych osób.
Je¿eli te testy siê powiod±, zostanie rozwa¿ona mo¿liwo¶æ dodania twojego
portu do drzewa portów.


<a name="NotInBase"></a>
<h3>15.4.5 - Dlaczego mój Ulubiony-Program nie jest czê¶ci± systemu bazowego?</h3>

Poniewa¿ OpenBSD ma byæ ma³ym samowystarczalnym uniksowym systemem
operacyjnym, potrzebne jest wyznaczenie linii dotycz±cej tego co jest 
w³±czone.
Generalnie, aplikacja w³±czona do systemu bazowego:

<ul>
<li>Musi spe³niaæ wysokie standardy jako¶ci, spe³niaj±c
<a href="../../pl/goals.html">za³o¿enia</a> projektu OpenBSD.
<li>Jej licencja nie mo¿e byæ zbyt restrykcyjna i musi byæ
zgodna z licencj± BSD.
<li>Nie mo¿e byæ zbyt du¿a, w zamierzeniu utrzymuj±c rozmiar systemu bazowego
na akceptowalnym poziomie.
</ul>

<p>
Dodatkowe odpowiedzi do tego pytania znajdziesz w 
<a href="faq1.html#HowAbout">FAQ 1</a>.

<a name="PkgVsPorts"></a>
<h3>15.4.6 - Czego powinienem u¿ywaæ: pakietów czy portów?</h3>

Generalnie, <b>mocno zalecamy</b> korzystanie z pakietów zamiast
budowy aplikacji z portów.
Zespó³ tworz±cy porty OpenBSD rozwa¿a pakiety jako cel ich
pracy z portami, nie porty same w sobie.

<p>
Budowa z³o¿onej aplikacji ze ¼róde³ nie jest prosta.
Nie tylko aplikacja ma byæ kompilowana, ale tak¿e narzêdzia s³u¿±ce
jej kompilacji musz± byæ skompilowane.
Niestety, OpenBSD, narzêdzia, i aplikacje ci±gle s± rozwijane, zatem
czêsto z³o¿enie wszystkich fragmentów by dzia³a³y razem jest wyzwaniem.
Gdy ju¿ wszystko dzia³a, korekta jednej czê¶ci nastêpnego dnia
mo¿e spowodowaæ uszkodzenie.
Co<a href="faq1.html#Next">sze¶æ miesiêcy</a>, gdy tworzone jest 
<a href="faq5.html#Flavors">nowe wydanie</a> OpenBSD, spory wysi³ek
jest przeznaczany na budowê ka¿dego portu dla ka¿dej platformy,
jednak ze wzglêdu na cykl developerski, jest bardzo prawdopodobne
¿e niektóre porty bêd± uszkodzone.

<p>
Poza posiadaniem wszystkich fragmentów dzia³aj±cych razem, konieczne
jest po¶wiêcenie pewnego czasu i zasobów aby skompilowaæ niektóre
programy ze ¼róde³.
Prostym przyk³adem jest <a href="http://www.cvsup.org/">CVSup</a>, narzêdzie
czêsto wykorzystywane do <a href="../../pl/cvsup.html">¶ledzenia drzewa ¼róde³ OpenBSD</a>.
Instalacja CVSup na nowoczesnym szybkim komputerze z dobrym ³±czem
Internetowym, mo¿e zaj±c ok dziesiêciu sekund -- czas potrzebny na
pobranie i rozpakowanie pojedynczej paczki 779kB.
Przeciwnie, budowa CVSup ze ¼róde³ na tej samej maszynie jest du¿ym 
zadaniem, wymagaj±cym wielu narzêdzi i za³adowania kompilatora, zajmuj±c
nawet pó³ godziny na niektórych komputerach.
Inne aplikacjem takie jak <a href="http://www.mozilla.org">Mozilla</a>
czy <a href="http://www.kde.org">KDE</a> mog± zaj±c godziny i du¿±
ilo¶æ przestrzeni dyskowej i RAMu/swapu.
Po co traciæ tak± ilo¶æ czasu i wysi³ek, podczas gdy te programy s± ju¿
skompilowane i znajduj± siê na twoim <a href="../../orders.html">CD-ROM</a>
lub <a href="../../ftp.html">mirrorze FTP</a>, czekaj±c na u¿ycie?

<p>
Oczywi¶cie istnieje kilka dobrych powodów aby, w niektórych sytuacjach, 
korzystaæ z portów zamiast z pakietów:

<ul>
<li>Zasady dystrybucji ograniczaj± OpenBSD przed dystrybucj± w formie pakietu.  
<li>Potrzebujesz zmodyfikowaæ lub odpluskwiæ aplikacjê, lub te¿
sprawdziæ jej kod ¼ród³owy.
<li>Potrzebujesz smaku portu który nie zosta³ skompilowany przez zespó³
portów OpenBSD.
<li>Chcesz zmodyfikowaæ uk³ad katalogów (np. zmieniæ <tt>PREFIX</tt>
lub <tt>SYSCONFDIR</tt>).
</ul>

Jednak¿e, dla wiêkszo¶ci ludzi i wiêkszo¶ci aplikacji, korzystanie z 
pakietów jest znacznie prostsze, i jest to zdecydowanie zalecany sposób
dodawania aplikacji do systemu OpenBSD.


<a name="Knobs"></a>
<h3>15.4.7 - W jaki sposób dostosowaæ te porty i uzyskaæ maksimum wydajno¶ci?</h3>

OpenBSD jest o stabilno¶ci i bezpieczeñstwie.
Podobnie jak kernel GENERIC jest domy¶lnym i jedynym wspieranym kernelem,
zespó³ portów dba by system portów dzia³a³ i by by³y one stabilne.
Je¿eli chcesz skorzystaæ z jakichkolwiek opcji kompilatora, jeste¶ zdany
na siebie.

Prosimy nie pytaj na grupach mailingowych dlaczego co¶ nie dzia³a,
podczas gdy usi³ujesz przestawiæ kilka ukrytych "opcji" aby sprawiæ by
dzia³a³o szybciej. W zasadzie jest bardzo prawdopodobne ¿e bêdzie to
strata czasu, dla ciebie, jako u¿ytkownika, a tak¿e dla developerów
którzy przeczytaj± o twoich "problemach" podczas gdy tak na prawdê ich
nie ma.


<a name="Wait"></a>
<h3>15.4.8 - Zg³osi³em nowy port/aktualizacjê tydzieñ temu. Dlaczego nie zosta³
    dodany?</h3>

Zespó³ zajmuj±cy siê portami posiada bardzo ograniczone zasoby i ¿aden 
opiekun nie zd±¿y³ spojrzeæ na twój port/aktualizacjê w tym czasie. Nie
wa¿ne jak denerwuj±ce mo¿e siê to wydawaæ, zignoruj ten fakt. Zadbaj
o swój port, wysy³aj aktualizacje a¿ ostatecznie kto¶ siê tym zajmie.
Mo¿e siê tak zdarzyæ w czasie gdy który¶ opiekun bêdzie mia³ trochê
wolnego czasu który spêdzi nad portami lub swoimi zainteresowaniami
w nowych dziedzinach i wtedy twoje stare zg³oszenie stanie siê 
interesuj±ce, je¿eli zosta³o zapamiêtane.


<a name="Problems"></a>
<h2>15.5 - Zg³aszanie problemów</h2>

Je¿eli masz problem z istniej±cym portem, prosimy wys³aæ e-mail do
opiekuna portu.
O tym kto jest opiekunem portu dowiesz siê wpisuj±c przyk³adowo:

<blockquote><pre>$ cd /usr/ports/archivers/unzip
$ make show=MAINTAINER
</pre></blockquote>

<p>
Alternatywnie, je¿eli nie jest podany ¿aden opiekun, lub
nie mo¿esz do niego/niej dotrzeæ, wy¶lij e-mail na grupê mailingow±
dotycz±c± portów
<a href="mailto:ports@openbsd.org">ports@openbsd.org</a>.
Prosimy NIE u¿ywaæ listy mailingowej misc@openbsd.org do pytañ
dotycz±cych portów.
<p>
W ka¿dym przypadku do³±cz:
<ul>
<li>Twoj± wersjê OpenBSD ³±cznie z ka¿d± ³atk± jak± nak³ada³e¶.
Twoj± wersjê kernela uzyskan± przez: <tt>sysctl -n kern.version</tt>
<li>Wersjê drzewa portów: je¿eli istnieje plik <tt>/usr/ports/CVS/Tag</tt>
do³±cz jego tre¶æ.
Je¶li ten plik jest nieobecny, korzystasz z drzewa portów -current.
<li>Kompletny opis problemu.
Nie obawiaj siê podawania szczegó³ów.
Wska¿ wszystkie kroki jakie wykona³e¶ zanim wyst±pi³ problem.
Czy jest to problem powtarzalny?
Im wiêcej informacji podasz, tym wiêksze szanse na uzyskanie pomocy.
</ul>
W przypadku portów które nie kompiluj± siê poprawnie, podanie kompletnej
transkrypcji kompilacji jest prawie zawsze wymagane.
Mo¿esz u¿yæ do tego skryptu portslogger, znajduj±cego siê w
<tt>/usr/ports/infrastructure/build</tt>.
Przyk³adowe uruchomienie portsloggera mo¿e byæ takie:

<blockquote><pre>$ mkdir ~/portslogs
$ cd /usr/ports/archivers/unzip
$ make clean install 2&gt;&amp;1 | /usr/ports/infrastructure/build/portslogger \
           ~/portslogs
</pre></blockquote>

Po tym, powiniene¶ uzyskaæ plik logu budowy w twoim katalogu ~/portslogs,
który mo¿esz wys³aæ do opiekuna portu.
Ponadto powiniene¶ upewniæ siê, ¿e nie korzystasz z ¿adnych specjalnych opcji
w twojej kompilacji, przyk³adowo w <tt>/etc/mk.conf</tt>.

<p>
Alternatywnie, mo¿esz
<ul>
<li>U¿yæ 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=script&amp;sektion=1">script(1)</a>
do utworzenia kompletnego zapisu budowy.
Nie usuwaj ¿adnych informacji konfiguracyjnych.
<li>Do³±czyæ wyj¶cie polecenia
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_info(1)</a>
je¿eli wydaje siê ma³o istotny.
<li>Wbudowany kompilator <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a>
spyta czy wysy³aæ b³êdy na listê mailingow± gcc.
Oszczêdzi to trochê czasu, je¿eli bêdziesz pod±¿a³ za ich wskazówkami,
i podasz ró¿ne pliki wykonane przez <tt>gcc -save-temps</tt>.
</ul>


<a name="Helping"></a>
<h2>15.6 - Jak nam pomóc?</h2>

Jest kilka sposobów w jaki mo¿esz pomóc.
Wylistowane zosta³y poni¿ej, zgodnie z wzrostem stopnia
trudno¶ci.

<ul>
<li><a href="#Problems">Zg³aszanie problemów</a> gdy tylko ich do¶wiadczysz.
<li>Systematycznie testowanie portów i zg³aszanie uszkodzeñ, lub
sugerowanie udoskonaleñ. Po prostu zobacz dokument 
<a href="../../porttest.html">Wprowadzenie do testowania portów</a>.
<li>Testowanie aktualizacji do portów które s± wysy³ane na listê mailingow±
portów.
<li>Wysy³anie aktualizacji i ³atek do opiekuna portu, lub na listê
dyskusyjn± portów, je¿eli port nie posiada opiekuna.
Generalnie jest to bardzo warto¶ciowe, chyba ¿e twoje ³atki bêd± 
powodowaæ stratê czasu developerów, zamiast oszczêdzaæ czas.
<li>Tworzenie nowych portów.
Je¿eli jeste¶ naprawdê chêtny i chcesz wiedzieæ wszystko o tworzeniu portów
aplikacji dla OpenBSD, dobrym punktem wyj¶cia jest dokument
<a href="../../pl/porting.html">Tworzenie portów dla OpenBSD</a>.
</ul>

<b>UWAGA:</b> Dla wszystkich nowo tworzonych portów oraz dalszych testów, 
lub dla testów aktualizacji portów, <b>musisz pracowaæ na systemie -current!</b>
Generalnie nie jest to szczególnie porz±dane ¶rodowisko ze wzglêdu na jego ci±g³y
rozwój, zatem kontynuuj tylko je¿eli jeste¶ przekonany o swojej chêci 
do pod±¿ania za -current.


<p>
<font color= "#0000e0">
<a href="index.html">[Spis tre¶ci]</a>
<a href="faq14.html">[Sekcja 14 - Konfiguracja dysków]</a>
</font>

<p>
<hr>
<a href="index.html"><img height= "24" width= "24" src="../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq15.html,v 1.45 ]<br>
$Translation: faq15.html,v 1.16 2008/01/07 00:45:56 tkniaz Exp $<br>
-->
$OpenBSD: faq15.html,v 1.14 2008/01/13 13:43:35 tobias Exp $
</small>
</body></html>
