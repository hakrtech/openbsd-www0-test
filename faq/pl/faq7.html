<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE>7 - Ustawienia klawiatury i wy¶wietlania</TITLE>
<LINK rev=made href="mailto:www@openbsd.org">
<META http-equiv=Content-Type content="text/html; charset=iso-8859-2">
<META content="document" name="resource-type">
<META content="the OpenBSD FAQ page" name="description">
<META content="openbsd,faq" name="keywords">
<META content="global" name="distribution">
<META content="This document copyright 1998-2003 by OpenBSD." name=copyright>
<META content="Pawel 'Stygmat' Baranowski" name="translated_by">
</head>

<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<BODY text=#000000 bgColor=#ffffff>
<IMG height="30" alt="[OpenBSD]" src="../../images/smalltitle.gif" width="141" height="31"> 
<P>
<font color="#0000e0">
<a href="index.html">[Spis tre¶ci]</a>
<a href="faq6.html">[Sekcja 6 - Sieæ]</a>
<a href="faq8.html">[Sekcja 8 - Pytania ogólne]</a>
</font>
<h1><font color="#e00000">7 - Ustawienia klawiatury i wy¶wietlania</font></h1>
<HR>
<P>
<H3>Tablica zawarto¶ci</H3>
<UL>
<LI><A href="#Keyboard">7.1 - Jak mogê przemapowaæ klawiaturê? (wsconf)</A> 
<LI><A href="#ConsoleMouse">7.2 - Czy OpenBSD zawiera gpm lub co¶ podobnego?</A> 
<LI><A href="#ConsoleClear">7.3 - Jak czy¶ciæ konsole za ka¿dym razem, kiedy u¿ytkownik siê wyloguje?</A>
<LI><A href="#Scrollback">7.4 - Uzyskanie dostêpu do wcze¶niejszych linii w buforze konsoli (alpha/macppc/i386)</A> 
<LI><A href="#SwitchConsole">7.5 - Jak prze³±czaæ siê pomiêdzy konsolami? (i386)</A> 
<LI><A href="#80x50">7.6 - Jak ustawiæ rozdzielczo¶æ konsoli na 80x50? (i386)</A> 
<LI><A href="#SerCon">7.7 - Jak u¿ywaæ konsoli szeregowej?</A> 
<LI><A href="#Blanker">7.8 - Jak wygasiæ konsolê? (wscons)</A> </LI>
</UL>
<HR>
<BR>
<P>
<A name=Keyboard></A>
<H2>7.1 - Jak przemapowaæ klawiaturê? <I>(wscons)</I></H2>
<P>Porty u¿ywaj±ce sterownika konsoli
<A href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&amp;sektion=4">wscons(4)</A>:
<A href="../../alpha.html">alpha</A>, 
<A href="../../hppa.html">hppa</a>,
<A href="../../pl/i386.html">i386</A>, 
<A href="../../macppc.html">macppc</A>,
<a href="../../sparc.html">sparc</a>
oraz <a href="../../sparc64.html">sparc64</a>.

<P>
Wiêkszo¶æ opcji konsol u¿ywaj±cych sterownika wscons(4) mo¿na kontrolowaæ u¿ywaj±c narzêdzia 
<A href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl&amp;sektion=8">wsconsctl(8)</A>.
Na przyk³ad, w celu zmiany mapowania klawiatury za pomoc± 
<A href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl&amp;sektion=8">wsconsctl(8)</A> 
nale¿y wykonaæ nastêpuj±ce polecenie:

<BLOCKQUOTE><PRE>
# <STRONG>wsconsctl -w keyboard.encoding=uk</STRONG>
</PRE></BLOCKQUOTE>

<P>
W kolejnym przyk³adzie, przemapujemy klawisz "Caps Lock" 
na kombinacje klawiszy "Control L": 

<BLOCKQUOTE><PRE>
# <STRONG>wsconsctl -w keyboard.map+="keysym Caps_Lock = Control_L"</STRONG>
</PRE></BLOCKQUOTE>

<A name=ConsoleMouse></A>
<H2>7.2 - Czy OpenBSD zawiera gpm lub co¶ podobnego?</H2>

<P>Dla platform sprzêtowych <A href="../../alpha.html">alpha</A> 
oraz <A href="../../pl/i386.html">i386</A>, OpenBSD dostarcza 
<A  href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsmoused&amp;sektion=8&amp;arch=i386">wsmoused(8)</A>, 
 port moused(8) z sytemu FreeBSD. Mo¿e on byæ w³±czony w trakcie startu systemu poprzez edycjê okre¶lonej
 linii w pliku <A href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;sektion=8">rc.conf(8)</A>. 

<P>
<A name=ConsoleClear></A>
<H2>7.3 - Jak czy¶ciæ konsole za ka¿dym razem, kiedy u¿ytkownik siê wyloguje?</H2>

<P>Aby wykonaæ to zadanie, nale¿y dodaæ linie w pliku 
<KBD><A  href="http://www.openbsd.org/cgi-bin/man.cgi?query=gettytab&amp;sektion=5">/etc/gettytab(5)</A></KBD>. 
Zmieñ nastêpuj±c± sekcjê w tym pliku: 

<BLOCKQUOTE>
<PRE>P|Pc|Pc console:\
        :np:sp#9600:
</PRE></BLOCKQUOTE>

<P>dodaj±c liniê ":cl=\E[H\E[2J:" na koñcu sekcji, po zmianie sekcja powinna wygl±daæ tak: 

<BLOCKQUOTE><PRE>P|Pc|Pc console:\
        :np:sp#9600:\
	:cl=\E[H\E[2J:
</PRE></BLOCKQUOTE>

<P>
<A name=Scrollback></A>
<H2>7.4 - Uzyskanie dostêpu do wcze¶niejszych linii w buforze konsoli

<I>(i386 oraz niektóre Alpha)</I></H2>


<P>
Na niektórych platformach OpenBSD dostarcza mechanizmy umo¿liwiaj±ce przegl±danie 
zawarto¶ci bufora konsoli. Pozwala Ci to przegl±danie informacji, które 
przewinê³y siê wcze¶niej na ekranie. Aby przemieszczaæ siê w górê lub dó³ bufora, 
po prostu u¿yj kombinacji klawiszy <TT>[SHIFT]+[PGUP]</TT> oraz <TT>[SHIFT]+[PGDN]</TT>.

<P>
Domy¶lnie bufor konsoli pozwala na przemieszczanie siê i przegl±danie maksymalnie do 8 stron.
Jest to typowe dla sterownika 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vga&amp;sektion=4">vga(4)</a>, 
tak wiêc udogodnienie to nie bêdzie dzia³aæ na innych platformach bez kart typu VGA 
(wiele systemów Alpha posiada kartê video typu TGA).

<P>
<A name=SwitchConsole></A>
<H2>7.5 - Jak prze³±czaæ siê pomiêdzy konsolami? <I>(i386, niektóre Alpha)</I></H2>

Na platwormie sprzêtowej i386 oraz systemach Alpha wyposa¿onych w 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vga&amp;sektion=4">vga(4)</a>, 
OpenBSD domy¶lnie dostarcza sze¶æ wirtualnych konsol,
/dev/ttyC0 do /dev/ttyC5.
Konsola ttyC4 zarezerwowana jest dla systemu X Window, pozosta³e piêæ konsol
to konsole tekstowe.
Mo¿esz prze³±czaæ siê pomiêdzy nimi u¿ywaj±c
<tt>[CTRL]+[ALT]+[F1]</tt>, <tt>[CTRL]+[ALT]+[F2]</tt>,
<tt>[CTRL]+[ALT]+[F3]</tt>, <tt>[CTRL]+[ALT]+[F4]</tt> oraz 
<tt>[CTRL]+[ALT]+[F6]</tt>.

<p>
¦rodowisko X u¿ywa konsoli ttyC4, <tt>[CTRL]+[ALT]+[F5]</tt>.
Podczas u¿ywania ¶rodowiska X Window,
naci¶niêcie <tt>[CTRL]+[ALT]+[F</tt><i>n</i><tt>]</tt> prze³±czy Ciê
na konsole tekstowe;
<tt>[CTRL]+[ALT]+[F5]</tt>
prze³aczy Ciê z powrotem do ¶rodowiska graficznego.
Je¶li chcia³by¶ mieæ wiêksz± ni¿ domy¶ln± ilo¶æ konsol wirtualych, 
u¿yj komendy
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconscfg&amp;sektion=8">wsconscfg(8)</a>, 
w celu utworzenia kolejnych konsol czyli: ttyC6, ttyC7 i dalszych.
Na przyk³ad:
Wydanie polecenia
<blockquote>
<pre>
	wsconscfg -t 80x25 6
</pre>
</blockquote>
stworzy wirtualny terminal ttyC6, 
który to bêdzie dostêpny po przyci¶niêciu klawiszy <tt>[CTRL]+[ALT]+[F7]</tt>.
Je¶li chcesz mieæ dodatkow± konsolê za ka¿dym razem gdy uruchamiasz komputer, 
nie zapomnij dodaæ tej komendy do pliku
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.local&amp;section=8"><TT>rc.local</tt></a>.

<p>
Zauwa¿ jednak, ¿e nie otrzymasz na nowo stworzonej konsoli znaku logowania "<tt>login:</tt>"
dopóki nie w³±czysz jej w pliku 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ttys&amp;section=5"><tt>/etc/ttys(5)</tt></a>,
i nie dokonasz b±d¼ ponownego uruchomienia komputera b±d¼ nie wy¶lesz za pomoc± 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kill&amp;section=1">kill(1)</a> 
sygna³u HUP do procesu 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&amp;section=8">init(8)</a>

<A name="80x50"></A>
<H2>7.6 - Jak ustawiæ rozdzielczo¶æ konsoli na 80x50? <I>(i386)</I></H2>

Architektura i386 normalnie dostarcza konsole o wymiarach 25 linii ka¿da po 80 znaków. i
Jednak¿e wiele kart VGA umo¿liwia wy¶wietlanie wiêkszej rozdzielczo¶ci tekstowej 
o wymiarach 50 linii po 80 znaków.

<P>
Po pierwsze, czcionka która umo¿liwia taka pracê musi zostaæ za³adowana przy u¿yciu komendy 
<A href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsfontload&amp;sektion=8">wsfontload(8)</A> 
Standardowa konsola 80x25 u¿ywa fontów 8x16. Aby zwiêkszyæ rozdzielczo¶æ poziom± nale¿y u¿yæ fontów 8x8. 

<P>
Po tej czynno¶ci trzeba usun±æ i utworzyæ ponownie przy u¿yciu komendy <A 
href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconscfg&amp;sektion=8">wsconscfg(8)</A>
<A href="#SwitchConsole">wirtualna konsolê</A> w po¿±danej rozdzielczo¶ci.

<P>
Mo¿na to robiæ automatycznie w czasie inicjowania systemu, dodaj±c na koñcu pliku <A 
href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.local&amp;sektion=8"><TT>rc.local(8)</TT></A>: 

<BLOCKQUOTE>
<PRE>wsfontload -h 8 -e ibm /usr/share/misc/pcvtfonts/vt220l.808
wsconscfg -dF 5
wsconscfg -t 80x50 5
</PRE>
</BLOCKQUOTE>

W trakcie jakichkolwiek modyfikacji konfiguracji twojej maszyny, wskazane jest, 
aby¶ po¶wiêci³ trochê czasu na czytaniu podrêcznika man w celu zrozumienia co te komendy robi±.

<P>
Pierwsza linia ³aduje czcionkê 8x8. Druga linia usuwa konsolê numer 5 (na któr± mo¿na siê prze³±czyæ 
kombinacj± <TT>[CTRL]+[ALT]+[F6]</TT>). Trzecia linia tworzy nowy terminal o rozdzielczo¶ci 50 linii na 80 znaków. 
Je¶li to zrobisz, przekonasz siê, ¿e podstawowa konsola oraz trzy pozosta³e wykorzystuj± standardow± 
rozdzielczo¶æ 80x25, a nowa konsola numer 5, osi±galna przez wci¶niêcie <TT>[CTRL]+[ALT]+[F6]</TT> nie.

<P>
Zapamiêtaj - <TT>[CTRL]+[ALT]+[F1]</TT> przywo³uje konsolê numer 0. Je¶li chcesz zmieniæ 
parametry rozdzielczo¶ci innych konsol, zwyczajnie powtórz usuniêcie i dodanie nowej konsoli 
dla ka¿dej z tych, dla której chcesz zmieniæ rozdzielczo¶æ na 80x50.
 
<P>
Powiniene¶ wystrzegaæ siê zmiany parametrów konsoli numer 4 (ttyC4, <TT>[CTRL]+[ALT]+[F5]</TT>), 
u¿ywanej przez system X Windows. Niemo¿liwa jest tak¿e zmiana rozdzielczo¶ci znakowej pierwszej
konsoli znakowej (np. ttyC0).

<P>
Jak mo¿na domniemywaæ, wszystkie te komendy mo¿na wykonaæ bezpo¶rednio jako u¿ytkownik root, 
choæ lepszym sposobem wydaje siê u¿ycie komendy
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;section=8">sudo(8)</a>.

Dodatkowo nie wszystkie karty graficzne pozwalaj± ³adowanym czcionkom, których wymaga
<A href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&amp;sektion=4">wscons(4)</A>, 
osi±gn±æ rozdzielczo¶æ tekstow± 80x50. W takim wypadku powiniene¶ rozwa¿yæ uruchomienie systemu X Window.

<A name=SerCon></A>
<H2>7.7 - Jak u¿ywaæ konsoli szeregowej?</H2>

Jest kilka powodów, dla których powiniene¶ rozwa¿yæ u¿ycie konsoli szeregowej w swoim systemie OpenBSD:
<UL>
<LI>Zapis wyj¶cia konsoli (dokumentowanie) 
<LI>Zdalne zarz±dzanie. 
<LI>£atwiejsze zarz±dzanie du¿± ilo¶ci± komputerów 
<LI>Zapewnienie u¿ytecznego dmesg'a z maszyn, który w innych wypadkach móg³by byæ trudny do otrzymania 
<LI>Zapewnienie dok³adnych logów komend trace oraz ps w wypadku nieprawid³owych zachowañ systemu, 
tak aby deweloperzy mieli szansê skorygowaæ b³±d.
</UL>
OpenBSD wspiera konsolê szeregow± na wielu platformach, jednak¿e szczegó³y w znacznym 
stopniu zale¿± od konkretnej platformy sprzêtowej. 

<P>
Nale¿y zauwa¿yæ, i¿ po³±czenie za pomoc± portów szeregowych NIE JEST zadaniem banalnym -- 
czêsto bêdziesz potrzebowa³ niestandardowego kabla, interfejsy szeregowe nie s± 
ustandaryzowane pomiêdzy poszczególnymi platformami, a w wielu przypadkach ró¿ni± siê 
nawet w obrêbie jednej platformy sprzêtowej. W niniejszym artykule przyjmujemy, 
i¿ wiesz jak dobraæ w³a¶ciwy kabel w celu pod³±czenia Twojego komputera oraz urz±dzenia 
s³u¿±cego za Twój zdalny terminal. Pe³ny tutorial dotycz±cy ³±czenia urz±dzeñ 
za pomoc± portów szeregowych wykracza poza ramy tego artyku³u, 
jednak¿e mamy ma³± podpowied¼: Nawet je¶li wtyczki pasuj± do gniazdek, 
nie oznacza to ¿e po³±czenie bêdzie dzia³aæ.

<A name=SerContty></A>
<H3>Edycja pliku <I>/etc/ttys</I></H3>
Istniej± dwie czynno¶ci niezbêdne do tego, aby w systemie OpenBSD dzia³a³a konsola 
przez port szeregowy. Po pierwsze, musisz posiadaæ system OpenBSD, aby korzystaæ z portu 
szeregowego pracuj±cego jako konsola monitoruj±ca stan systemu lub konsola systemu w trybie 
'single-user'. Czynno¶æ ta jest bardzo uzale¿niona od tego, z jak± platform± sprzêtow± masz 
do czynienia. Po drugie, musisz w³±czyæ port szeregowy, aby by³ u¿ywany jako terminal 
interaktywny, co oznacza, ¿e u¿ytkownik mo¿e siê do niego zalogowaæ w trakcie pracy 
w trybie 'multi-user'. Wykonanie tej czynno¶ci nie ró¿ni siê znacznie pomiêdzy 
platformami sprzêtowymi i opisano j± poni¿ej. 

<P>
Sesje terminalowe kontrolowane s± przez plik 
<A href="http://www.openbsd.org/cgi-bin/man.cgi?query=ttys&amp;sektion=5"><I>/etc/ttys(5)</I></A>. 
Zanim system OpenBSD wy¶wietli napis "<TT>login:</TT>" na konsoli, musi ona byæ w³±czona 
w pliku <I>/etc/ttys</I>, po tej czynno¶ci jedna czê¶æ u¿ytkowników u¿ywa konsoli szeregowej, 
a inna czê¶æ terminali. Na platformach sprzêtowych, które typowo posiadaj± pod³±czon± 
klawiaturê i monitor, terminale szeregowe s± domy¶lnie wy³±czone. We¼my na przyk³ad platformê i386. 
Aby w³±czyæ terminal szeregowy musisz liniê wygl±daj±c± nastêpuj±co

<PRE>
     tty00   "/usr/libexec/getty std.9600"   unknown off
</PRE>
zamieniæ na tak±
<PRE>
     tty00   "/usr/libexec/getty std.9600"   vt100   on secure
</PRE>

A teraz po kolei, <TT>tty00</TT> oznacza port u¿ywany jako konsola szeregowa, s³owo
"<TT>on</TT>" aktywuje <A href="http://www.openbsd.org/cgi-bin/man.cgi?query=getty&amp;sektion=8"><I>getty</I></A> 
dla tego portu szeregowego, co pozwala na wy¶wietlenie monitu  "<TT>login:</TT>", s³owo
"<TT>secure</TT>" zezwala u¿ytkownikowi 'root' (uid 0) na logowanie przy pomocy tej konsoli 
(na co mo¿esz zezwoliæ lub nie, w zale¿no¶ci od tego jak zdecydujesz), wreszcie liczba 
"<TT>9600</TT>" oznacza szybko¶æ transmisji. Zwróæ uwagê na fakt, i¿ mo¿esz u¿ywaæ konsoli 
szeregowej w trakcje instalacji, bez wykonywania tej czynno¶ci, jako ¿e system pracuje 
w trybie 'single-user' i nie u¿ywa <I>getty</I> w celu przeprowadzenia procedury logowania.

<P>
W przypadku niektórych platform sprzêtowych i ró¿nych konfiguracji, nale¿y uruchomiæ system 
w trybie 'single user', aby dokonaæ tej zmiany,  je¶li konsola szeregowa jest tylko tym czym dysponujemy.
 
<H3>i386</H3>
Aby nakazaæ systemowi u¿ywaæ portu szeregowego jako konsoli w trakcie startu systemu 
nale¿y utworzyæ lub wyedytowaæ plik 
<I>
<A href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8&amp;arch=i386">/etc/boot.conf</A>
</I> 
tak, aby zawiera³ nastêpuj±c± liniê:
<PRE>
     set tty com0
</PRE>

pierwszy port szeregowy bedzie u¿ywany jako Twoja konsola. 
Domy¶ln± warto¶ci± szybko¶ci jest 9600bps, opcja ta mo¿e byæ zmieniona poprzez 
u¿ycie opcji stty w linii pliku /etc/boot.conf. Plik ten musi znajdowaæ siê 
na dysku startowym, którym mo¿e byæ równie¿ dyskietka startowa, lub te¿ 
jednorazowo mo¿na wprowadziæ t± komendê po otrzymanie monitu <TT>boot&gt;</TT> z boot-loadera.

<P>
<H4>Uwagi dla platformy i386:</H4>
<UL>
<LI>OpenBSD numeruje porty szeregowe poczynaj±c od <I>tty00</I>, natomiast 
DOS/Windows oznacza je poczynaj±c od<I>COM1</I>. Uwa¿aj wiêc bo <I>tty02</I> 
jest portem <I>COM3</I>, a nie <I>COM2</I> 
 
<LI>Niektóre systemy mog± pracowaæ bez karty graficznej, niew±tpliwie jednak 
nie wszystkie -- dla wielu systemów brak adaptera graficznego jest b³êdem. 
Niektóre maszyny mog± po prostu odmówiæ pracy bez pod³±czonej klawiatury.
 
<LI> Niektóre z systemów i386 s± zdolne u¿ywaæ portu szeregowego jako konsoli. 
Twój przypadek mo¿e siê ró¿niæ od innych -- port ten albo mo¿e nie byæ 
dostêpny dla systemu operacyjnego do momentu zakoñczenia procesu startu systemu, 
lub te¿ bêdzie to wymagaæ DWÓCH portów szeregowych dla pe³nego monitoringu.
 
<LI>Komputery kompatybilne z PC nie s± zaprojektowane do uruchamiania z konsoli szeregowej, 
podobnie jak inne platformy. Nawet je¶li systemy te posiadaj± opcjê konfiguracji konsoli 
szeregowej w swoim BIOS'ie -- w przypadku uszkodzenia tych informacji bêdziesz musia³ i tak 
ponownie pod³±czyæ klawiaturê i monitor. Generalnie i tak musisz posiadaæ dostêp do monitora 
i klawiatury w przypadku awarii.

<LI>Musisz zmieniæ plik <I>/etc/ttys</I> jak opisano <A href="#SerContty">powy¿ej</A>. 
<LI>Tylko pierwszy port szeregowy (com0) mo¿e byæ u¿yty na platwormie i386 jako port 
komunikacyjny konsoli.
</UL>

<H3>SPARC and UltraSPARC</H3>
Ta platforma sprzêtowa jest zaprojektowana tak, aby byæ w pe³ni zarz±dzana 
z konsoli szeregowej. Po prostu od³±cz klawiaturê od maszyny, a system uruchomi siê na konsoli szeregowej.
 
<H4>Uwagi dla platformy SPARC and UltraSPARC</H4>
<UL>
<LI>Porty szeregowe na maszynie typu SPARC oznaczone s± <I>ttya</I>, <I>ttyb</I> i tak dalej. 

<LI>Nie jest konieczne robienie jakichkolwiek zmian w plik <I>/etc/ttys</I>, aby 
u¿ywaæ konsoli szeregowej, tak jak to bywa na innych platformach. 
  
<LI>Systemy SPARC/UltraSPARC interpretuj± sygna³ BREAK na porcie konsoli 
jako komendê STOP-A, co powoduje powrót systemu do monitu Fourth, 
i zatrzymuj± wszystkie aplikacje oraz system operacyjny. Jest to przydatny mechanizm, 
kiedy jest po¿±dany, lecz niefortunnie, niektóre terminale szeregowe podczas 
wy³±czania oraz urz±dzenia pod³±czane przez port RS-232 wysy³aj± ci±g sygna³ów 
interpretowany przez komputer jako sygna³ BREAK, co powoduje wcze¶niej 
wspomniane zachowanie. Wskazane jest przetestowanie zachowania siê nowo 
przy³±czanych urz±dzeñ przed wdro¿eniem do maszyn "produkcyjnych".
 
<LI>Je¶li posiadasz pod³±czony monitor i klawiaturê mo¿esz wymusiæ, aby konsola 
szeregowa by³a u¿ywana zamiast nich wpisuj±c nastêpuj±ce komendy po monicie  <TT>ok</TT> prompt:
<PRE>
     ok <B>setenv input-device ttya</B>
     ok <B>setenv output-device ttya</B>
     ok <B>reset</B>
 </PRE>
Je¿eli klawiatura i monitor (ttyC0) s± uaktywnione w <I>/etc/ttys</I> 
(<A href="#SerContty">patrz wcze¶niej</A>), mo¿esz u¿ywaæ klawiatury i monitora w ¶rodowisku X. 
</UL>

<H3>MacPPC</H3>
Komputery MacPPC konfiguruje siê aby u¿ywa³y konsoli szeregowej poprzez OpenFirmware. U¿yj nastêpuj±cych komend:
 <PRE>
     ok <B>setenv output-device scca</B>
     ok <B>setenv input-device scca</B>
     ok <B>reset-all</B>
 </PRE>Ustaw konsolê na szybko¶æ 57600bps, tryb 8N1.

<H4>Uwagi dla platformy MacPPC</H4>
<UL>
<LI>Niestety, konsola szeregowa nie jest bezpo¶rednio dostêpna na wiêkszo¶ci komputerów MacPCC. 
Podczas gdy wiêkszo¶æ tych maszyn posiada odpowiedni hardware, nie jest on dostêpny 
na zewn±trz komputera. Na szczê¶cie kilku producentów oferuje dodatkowe przystawki dla wielu 
modeli Macintosh'ow, czyni±ce ten port dostêpnym do u¿ycia jako konsoli szeregowej 
(lub innych u¿ytkowników). U¿yj ulubionej wyszukiwarki i sprawd¼ frazê "Macintosh internal serial port".
 
<LI>Musisz w³±czyæ <TT>tty00</TT> w pliku <I>/etc/ttys</I> i ustawiæ szybko¶æ 
na 57600 zamiast domy¶lnego 9600 <A href="#SerContty">(powy¿ej)</A>.  
Zmiany te trzeba wprowadziæ w trybie 'single-mode' przed startem systemu 
w trybie 'multi-user' oraz przed pierwszym u¿yciem konsoli szeregowej.
</LI>
</UL>

<H3>Mac68k</H3>
Opcja konsoli szeregowej jest zaznaczona w programie <I>Booter</I>, 
w menu "<TT>Options</TT>", "<TT>Serial Ports</TT>". Zaznacz opcjê "Serial Console", 
nastêpnie wybierz port modemu lub drukarki. Bêdziesz tak¿e potrzebowa³ kabla modemowego 
lub drukarkowego w celu pod³±czenia go do portu szeregowego. Je¶li chcesz, aby te 
ustawienia by³y domy¶lnymi, zapisz zmienione opcje wybieraj±c odpowiedni± opcjê w programie Booter.

<H4>Uwagi dla platformy Mac68k</H4>
<UL>
<LI>Port modemu to <I>tty00</I>, port drukarki to <I>tty01</I>. 
<LI>Mac68k nie w³±cza swoich portów szeregowych do czasu ich pierwszego u¿ycia, 
dlatego wiêc 'breakout box' mo¿e nie pokazywaæ ¿adnych sygna³ów na porcie do czasu, 
a¿ proces startu OpenBSD siê nie rozpocznie.
<LI> Musisz w³±czyæ port  (<I>tty00</I> lub <I>tty01</I>) jak pokazano <A href="#SerContty">wcze¶niej</A>. 
</UL>

<A name=Blanker></A>
<H2>7.8 - Jak wygasiæ konsolê? (wscons)</H2>
Je¶li chcesz wygasiæ konsolê po okre¶lonym czasie nieaktywno¶ci bez u¿ycia X Window, 
mo¿esz zmieniæ nastêpuj±ce zmienne
<A href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&amp;sektion=4">wscons(4)</A> 

<UL>
<LI><B><TT>display.vblank</TT></B> ustawiona na <TT>on</TT> powoduje wy³±czenie 
impulsów synchronizacji pionowej, czego nastêpstwem jest, i¿ wiele monitorów 
prze³±czy siê w stan oszczêdno¶ci energii. Wymaga to wiêcej czasu, aby monitor 
ponownie siê w³±czy³, ale w znacznym stopniu redukuje ilo¶æ energii pobieranej 
przez monitor oraz ilo¶æ wydzielanego ciep³a. Gdy zmienna ta jest 
w stanie <TT>off</TT>, ekran bêdzie pusty, lecz monitor bêdzie otrzymywa³ 
impulsy synchronizacji pionowej i poziomej, co spowoduje, i¿ ponowne w³±czenie 
bêdzie natychmiastowe.
 
<LI><B><TT>display.screen_off</TT></B> wyznacza czas w tysiêcznych sekundy, po jakim ekran zostanie 
wygaszony, np. 60000 to 1 minuta.
 
<LI><B><TT>display.kbdact</TT></B> okre¶la czy wci¶niêcie klawisza spowoduje 
ponowne za³±czenie wy¶wietlania. Zwykle jest wskazane w³±czenie tej opcji.
 
<LI><B><TT>display.outact</TT></B> okre¶la czy ekran ma siê w³±czyæ 
po wypisaniu czegokolwiek na wygaszonej konsoli.
</UL>

Mo¿esz ustawiaæ te opcje z poziomu linii poleceñ u¿ywaj±c komendy 
<A href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl&amp;sektion=8">wsconsctl(8)</A>: 
<PRE>
     # <B>wsconsctl -w display.screen_off=60000</B>
     display.screen_off -&gt; 60000
</PRE>

lub te¿ ustawiæ te zmienne na sta³e edytuj±c plik 
<A href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl.conf&amp;sektion=5"><I>/etc/wsconsctl.conf</I></A>, 
ustawienia te bêd± dostêpne po ponownym uruchomieniu komputera:
<PRE>
     display.vblank=on               # enable vertical sync blank
     display.screen_off=600000       # set screen blank timeout to 10 minutes
     display.kbdact=on               # Restore screen on keyboard input
     display.outact=off              # Restore screen on display output
</PRE>

Ustawienie opcji <TT>display.kbdact</TT> lub <TT>display.outact</TT> aktywuje wygaszanie monitora.

<P>
<FONT color=#0000e0>
<A href="index.html">[Spis tre¶ci]</A>
<A href="faq6.html">[Sekcja 6 - Sieæ]</A>
<A href="faq8.html">[Sekcja 8 - Pytania ogólne]</A>
</FONT>


<P>
<HR>
<A href="index.html"><IMG height="24" alt=[back] src="../../images/back.gif" width="24" border="0"></A>
<A href="mailto:www@openbsd.org">www@openbsd.org</A> 
<BR>
<SMALL>
Originally [OpenBSD: faq7.html,v 1.56 ]<br>
$Translation: faq7.html,v 1.11 2003/12/06 20:58:44 pl-team Exp $<br>
$OpenBSD: faq7.html,v 1.11 2003/12/07 00:41:12 horacio Exp $
</SMALL> 
</BODY>
</HTML>
