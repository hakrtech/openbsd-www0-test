<html>
<head>
<title>4.0 - Installation Guide</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif">
<p>
<h2><font color=#e00000>4.0 - Installation Guide</font><hr></h2>
</p>

<p>
<ul><h3>Table of Contents</h3>
<li><a href= "#Overview"    >4.1 - Overview of the OpenBSD Installation Procedure.</a>
<li><a href= "#FilesNeeded" >4.2 - What files are needed for Installation?
                                   </a></li>
<li><a href= "#SpaceNeeded" >4.3 - How much space do I need for an
                                     OpenBSD installation?</a></li>
<li><a href= "#Multibooting">4.4 - Multibooting OpenBSD</a></li>
<li><a href= "#SendDmesg"   >4.5 - Sending your dmesg to dmesg@openbsd.org
                                     after the install</a></li>
<li><a href= "#AddFileSet"  >4.6 - Adding a file set after install</a></li>
<li><a href= "#bsd.rd"      >4.7 - What is 'bsd.rd'?</a></li>
</ul>
</p>
<hr>

<p>
<a name= "Overview"></a>
<a name= "4.1"></a>
<h2>4.1 - Overview of the OpenBSD installation procedure</h2>
</p>

<p>
This FAQ now contains installation instructions for OpenBSD 3.0. There
may be differences between the 3.0 installation and installation of earlier
versions of OpenBSD.
</p>

<p>
OpenBSD has a very robust text-based install procedure. The OpenBSD install
procedure was designed to be adaptable in almost any situation that a user
could face. In addition to its robustness, the install procedure can be done
using 1 floppy disk. Each architecture's installation procedure is very
similar, however a different set of tools will often be required. Below we
will outline the different options that an OpenBSD user has when installing
the system.
</p>

<p>
On most architectures, you have several installation options, 
including FTP, CDROM, and local disk files.  One option <b>not</b> supported is 
<a href="faq3.html#ISO">downloading an ISO image</a> to make your own
CDROM.  CDROMs are available for 
<a href="../orders.html">purchase</a>, however. 
</p>

<p>
The following information is architecture independent. Please refer to each
architecture's installation page or the OpenBSD CD cover for architecture 
dependent installation information.
</p>

<h3>4.1.1 - Supported OpenBSD Architectures</h3>

<p>
OpenBSD 3.0 supports a number of architectures listed below in alphabetical order.
Please refer to each architecture's page for specific information on what each
architecture supports.

<ul>
        <li><a href="../alpha.html">alpha</a> - DEC Alpha-based machines.
	<li><a href="../amiga.html">amiga</a> - Amiga m68k-based models (MMU required).
	<li><a href="../hp300.html">hp300</a> - Hewlett-Packard HP300/HP400 machines.
	<li><a href="../i386.html">i386</a> - Intel based PC's.
        <li><a href="../mac68k.html">mac68k</a> - Most MC680x0-based Apple Macintosh models.
	<li><a href="../mvme68k.html">mvme68k</a> -Motorola MVME147/16x/17x 68K VME cards.
	<li><a href="../macppc.html">macppc</a> - Support for Apple based PowerPC systems.
	<li><a href="../sparc.html">sparc</a> - SPARC Platform by Sun Microsystems.
	<li><a href="../sun3.html">sun3</a> - Sun's 68020 based Sun3 models. 
	<li><a href="../vax.html">vax</a> - DEC's VAX computers.
</ul>

<h3>4.1.2 - Supported Installation Media</h3>

<p>
OpenBSD has the ability to install from multiple media types. The most
common and architecture independent options are laid out below. These
options can be used after booting from either an OpenBSD CD-ROM or floppy
disk. More information on <a href="#Overview.3">creating OpenBSD installdisks </a>
is located later in this FAQ.
</p>

<table align="center" border="1" width="800">
	<tr>
		<td>
			<b>CD-ROM</b>
		</td>
		<td bgcolor="#EEEEEE">
			To do a CD-ROM install, you must have either purchased an 
			<a href="../orders.html">Official OpenBSD CD-ROM</a> or 
			created your own OpenBSD CD. This is certainly the easiest
			way to install an OpenBSD system. <br>
			<b>NOTE:</b> Official OpenBSD CDs are bootable if your bios
			supports it.
		</td>
	</tr><tr>
		<td>
			<b>FTP</b>
		</td>
		<td bgcolor="#EEEEEE">
			This installation option allows you to install OpenBSD
			by downloading the installation packages in realtime over
			the network. With this option you can choose either a 
			static IP for use or grab an IP via DHCP.
		</td>
	</tr><tr>
		<td>
			<b>Local Filesystem</b>
		</td>
		<td bgcolor="#EEEEEE">
			This option allows you to install from files on a 
			pre-existing filesystem. Support for DOS, EXT2FS and FFS 
			are included on the install disk. 
		</td>
	</tr>
</table>

<a name="Overview.3"></a>
<a name="4.1.3"></a>
<h3>4.1.3 - Creating bootable OpenBSD install floppies.</h3>

<p>
To create an installation floppy image you must first download the correct boot
floppy image from one of the OpenBSD distribution sites. You can find a list of FTP servers
at the <a href="../ftp.html">OpenBSD FTP Distribution</a> page. Each architecture
has one floppy image for download except the <a href="../i386.html">i386</a> platform, 
which has 3 images to choose from. The differences between the i386 platform installation
floppies will be outlined below. For the other architectures you will just need to
download the respective <i>floppy30.fs</i> image. <br>
<b>NOTE:</b> The <i>cdrom30.fs</i> image can be used to make a bootable OpenBSD installation
CD-ROM.
</p>

<p>
The i386 platform has 3 separate installation disks that you must choose from. The differences between
each are outlined below.

<ul>
<li><b>floppy30.fs</b> supports most desktop systems, with supported
	PCI and ISA NICs, IDE and simple SCSI adapters.  Some PCMCIA
	support.
<li><b>floppyB30.fs</b> supports many RAID controllers, however, 
	support for many standard SCSI adapters, many EISA and ISA 
	NICS has been removed.  This would be the boot disk of choice
	for many large servers.  Some more infrequently encountered 
	SCSI adapters are here, as well.
<li><b>floppyC30.fs</b> supports Cardbus and PCMCIA devices found in
	many laptops.  
<li><b>cdrom30.fs</b> supports most of the disk and network drivers
	of the installed system, it is, in effect a combination of 
	all three boot disks. It can be used to make a bootable 2.88M
	floppy, or as a boot image for a recordable CD. 
</ul>

<p>
Most i386 users will just use the <i>floppy30.fs</i> installation floppy. 
Yes, there may be situations where one install disk is required to 
support your SCSI adapter and another disk is required to support your
network adapter.  Fortunately, this is a rare event, and can usually be
worked around.
</p>

<p>
Once you have the correct floppy image, you need to get a clean floppy disk.
If there are ANY bad sectors on the floppy disk, the installation will most
likely fail. If you don't know, use the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdformat&sektion=1&arch=i386">fdformat(1)</a>
command to both format and check for bad sectors.
</p>

<ul>
<table border=0 width="800">
	<tr>
		<td nowrap bgcolor="#EEEEEE">
# <b>fdformat /dev/fd0a</b><br>
Format 1440K floppy `/dev/fd0a'? (y/n): y<br>
Processing VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV done.
		</td>
	</tr>
</table>
</ul>

<p>
If your output is like the above example, then your disk is OK. However, if you do not see
ALL &quot;V&quot;'s then your disk is most likely bad, and you should try a new one. If you
are formatting in MS-DOS, simply use the DOS <i>format</i> command.
</p>

<p>
Once you have a clean, formatted floppy it is time to write the installation image to
floppy. If you are creating this on an OpenBSD machine or another UNIX-like OS, you can 
use the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&sektion=0">dd(1)</a> utility.
an example usage of dd(1) is below:
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
# <b>dd if=floppy30.fs of=/dev/rfd0c bs=126b</b>
                </td>
        </tr>
</table>
</ul>

<p>
Once the image is written, check to make sure that the copied image is the same as the
original with the following command. If the test passes, you will just see another prompt.
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
# <b>cmp /dev/rfd0c floppy30.fs</b>
                </td>
        </tr>
</table>
</ul>

<p>
Again, if you are creating this image on the Windows/DOS platform you can get tools from the
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.0/tools/">tools</a> directory on
any of the ftp mirrors, or in <b>3.0/tools</b> directory on CD1 of the OpenBSD CD set.
For users of DOS/Windows 9x, <i>rawrite</i> will be all you need to write your boot floppy.
</p>

<ul>
Example usage of <i>rawrite</i>:
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
C:\> <b>rawrite</b><br>
RaWrite 1.2 - Write disk file to raw floppy diskette<br><br>

Enter source file name: <b>floppy30.fs</b><br>
Enter destination drive: <b>a</b><br>
Please insert a formatted diskette into drive A: and press -ENTER- : <b>&gt;Enter&lt;</b>
                </td>
        </tr>
</table>
</ul>

<p>
If you use NT, rawrite will not work for you. You can, however, use
<i>fdimage</i> or <i>ntrw</i> to write the boot floppy. Both of which
are available on the ftp sites (linked above), or the OpenBSD CD. Here are
example usages for each program.
</p>

<ul>
Example Usage of <i>fdimage</i>:
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
C:\> <strong>fdimage -q floppy30.fs a:</strong>
                </td>
        </tr>
</table>

Example Usage of <i>ntrw</i>:
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
C:\> <strong>ntrw floppy30.fs a:</strong><br>
3.5", 1.44MB, 512 bytes/sector<br>
bufsize is 9216<br>
1474560 bytes written<br>
                </td>
        </tr>
</table>
</ul>

<h3>4.1.4 - Booting OpenBSD Installation Images.</h3>

<p>
This section is initially broken down into architecture dependent
sections for popular architectures that OpenBSD supports. This is
so we can properly instruct each user on the what to do on their
respective platform.
</p>

<h4>Booting i386</h4>

<ul>
<p>
Booting an install image on the i386 architecture is nothing
new to most people. If you are using the floppy disk, simply stick
the floppy into your floppy drive and boot your system. Your install
image will automatically load. If you are planning on booting from CD,
you must go into your systems BIOS and set the boot options to allow
booting from CD. Some older BIOSs do not have this option, and you
must use a floppy for booting your installation image. Don't worry though,
even if you boot from floppy you can still install from the CD.
</p>
</ul>

<h4>Booting sparc</h4>

<ul>
<p>
To boot from floppy, place your floppy disk with the OpenBSD installation
image on it into your floppy drive. Then use the following command to 
boot from your floppy:
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
ok <b>boot floppy</b>
                </td>
        </tr>
</table>
</ul>

<p>
To boot from CD-ROM, place your OpenBSD CD-ROM disk into your drive.
If your Sun only has one CD-ROM drive, then just go to the boot prompt,
where you can '<tt>boot cdrom</tt>':
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
ok <b>boot cdrom</b>
                </td>
        </tr>
</table>
</ul>

<p>
Of course, this will only work in new command mode.  If you are at the 
old command mode prompt (a right arrow), type 'n' for the new command mode.
(If you are using an old sparc that is pre-sun4c, you probably don't have
a new command mode.  In this case, you need to experiment.)
If you have multiple CD-ROM devices, you need to boot from the correct one.
Try <tt>probe-scsi</tt> from the new command mode.
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
ok <b>probe-scsi</b><br>
Target 0<br>
  Unit 0   Disk     QUANTUM LIGHTNING 365S<br>
Target 1<br>
  Unit 0   Removable Disk     QUANTUM EMPIRE_1080S<br>
Target 3<br>
  Unit 0   Removable Disk     Joe's CD ROMs<br>
                </td>
        </tr>
</table>
</ul>

<p>
Figure out which disk is the CD ROM you want to boot from.  Note the
target number.
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
ok <b>boot /sbus/esp/sd@X,0</b>
                </td>
        </tr>
</table>
</ul>

<p>
Now that your bootdisk has been created, it's time to boot it.
When you boot this floppy, the kernel and all of the programs
that OpenBSD uses to install itself are loaded into memory.  If problems arise,
and your bootdisk doesn't boot, the problem is probably due to a
bad floppy disk. This is an extremely common problem!  If your bootdisk fails
to boot, try it a second time, and if it fails again, throw away the floppy
and get a new one.  When your floppy fails to boot, even if the floppy worked
fine for you before, keep in mind that OpenBSD uses nearly every single
bit available from the floppy!
Any error in the disk will prevent OpenBSD from loading.
</p>

<p>
When your boot is successful, you will see a lot of white on blue text,
that text is the kernel telling you what devices have been found,
and where.  Then, you will see the following:
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
rootdev=0x1100 rrootdev=0x2f00 rawdev=0x2f02<br>
Enter pathname of shell or RETURN for sh:<br>
erase ^?, werase ^W, kill ^U, intr ^C<br>
(I)nstall, (U)pgrade or (S)hell? <b>i</b><br>
==================================================<br>
Welcome to the OpenBSD/i386 3.0 installation program.<br><br>

This program is designed to help you put OpenBSD on your disk in a simple and<br>
rational way.<br><br>

As with anything which modifies your disk's contents, this program can cause<br>
SIGNIFICANT data loss, and you are advised to make sure your data is backed<br>
up before beginning the installation process.<br><br>

Default answers are displayed in brackets after the questions.  You can hit<br>
Control-C at any time to quit, but if you do so at a prompt, you may have<br>
to hit return.  Also, quitting in the middle of installation may leave your<br>
system in an inconsistent state.  If you hit Control-C and restart the<br>
install, the install program will remember many of your old answers.<br><br>

You can run a shell command at any prompt via '!foo'<br>
or escape to a shell by simply typing '!'.<br><br>

Specify terminal type [vt220]: <b>&lt;Enter&gt;</b>
                </td>
        </tr>
</table>
</ul>

<p>
Depending on the architecture you are using, the terminal type you use might 
be different. For example, OpenBSD/sparc uses the &quot;sun&quot; terminal type.
</p>
</ul>

<h3>4.1.5 - Setting up disks during installation.</h3>

<p>
Setting up disks in OpenBSD is fairly similar for each platform. For i386, disk
setup is done in two stages. One is with fdisk(8) and the other with disklabel(8).

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
The installation program needs to know which disk to consider the root disk.<br>
Note the unit number may be different than the unit number you used in the<br>
boot program (especially on a PC with multiple disk controllers).<br>
Available disks are:<br><br>

wd0<br><br>

Which disk is the root disk? [wd0] <b>&lt;Enter&gt;</b><br>
Do you want to use the *entire* disk for OpenBSD? [no] <b>yes</b><br><br>

[...]
                </td>
        </tr>
</table>
</ul>

<p>
This is the section in the install where you choose which disk you want
as your &quot;root&quot; disk. Your root disk will be where the / filesystem
and swap will be. <b>wd0</b> specifies an IDE disk;  if your disks are SCSI you
will most likely see <b>sd0</b>. There should be an entry for each disk that
OpenBSD finds. If you choose to allot the whole disk to OpenBSD, the installation
program will automatically setup the diskspace for you;  however, if you choose not
to give the whole disk to OpenBSD, you will be placed in a disk editor, 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&sektion=8&arch=i386">ie fdisk(8)</a>.
For more information on using fdisk(8), refer to <a href="faq14.html#fdisk">FAQ 14, fdisk</a>.
</p>
<p>
NOTE: OpenBSD does NOT support any sort of journaling filesystems like ReiserFS, 
IBM's JFS or SGI's XFS.  Instead we use <a href="faq14.html#SoftUpdates">Soft 
Updates</a>. The filesystem for OpenBSD is FFS.
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
Inside the BIOS 'A6' ('OpenBSD') partition you just created, there resides an<br>
OpenBSD partition table which defines how this BIOS partition is to be split<br>
up. This table declares the offsets and sizes of your / partition, your swap<br>
space, and any other partitions you might create.  (NOTE: The OpenBSD disk<br>
label offsets are absolute, ie. relative to the start of the disk... NOT<br>
relative to the start of the BIOS 'A6' partition).<br><br>

disklabel: no disk label<br>
WARNING: Disk wd0 has no label. You will be creating a new one.<br><br>

If this disk is shared with other operating systems, those operating systems<br>
should have a BIOS partition entry that spans the space they occupy completely.<br>
For safety, also make sure all OpenBSD file systems are within the offset and<br>
size specified in the 'A6' BIOS partition table.  (By default, the disklabel<br>
editor will try to enforce this).  If you are unsure of how to use multiple<br>
partitions properly (ie. separating /,  /usr, /tmp, /var, /usr/local, and other<br>
things) just split the space into a root and swap partition for now.<br><br>

# using MBR partition 3: type A6 off 63 (0x3f) size 16450497 (0xfb03c1)<br><br>

Treating sectors 63-80041248 as the OpenBSD portion of the disk.<br>
You can use the 'b' command to change this.<br>

Initial label editor (enter '?' for help at any prompt)<br>
> <strong>?</strong><br>
<pre>
Available commands:
        p [unit]  - print label.
        M         - show entire OpenBSD man page for disklabel.
        e         - edit drive parameters.
        a [part]  - add new partition.
        b         - set OpenBSD disk boundaries.
        c [part]  - change partition size.
        d [part]  - delete partition.
        g [d|b]   - Use [d]isk or [b]ios geometry.
        m [part]  - modify existing partition.
        n [part]  - set the mount point for a partition.
        r         - recalculate free space.
        u         - undo last change.
        s [path]  - save label to file.
        w         - write label to disk.
        q         - quit and save changes.
        x         - exit without saving changes.
        X         - toggle expert mode.
        ? [cmnd]  - this message or command specific help.
Numeric parameters may use suffixes to indicate units:
        'b' for bytes, 'c' for cylinders, 'k' for kilobytes, 'm' for megabytes,
        'g' for gigabytes or no suffix for sectors (usually 512 bytes).
        Non-sector units will be rounded to the nearest cylinder.
</pre>
Entering '?' at most prompts will give you (simple) context sensitive help.<br>
> <strong>p</strong><br>
device: /dev/rwd0c<br>
type: ESDI<br>
disk: ESDI/IDE disk<br>
label: Maxtor 54098U8<br>
bytes/sector: 512<br>
sectors/track: 63<br>
tracks/cylinder: 16<br>
sectors/cylinder: 1008<br>
cylinders: 16383<br>
total sectors: 80041248<br>
free sectors: 80041185<br>
rpm: 3600<br><br>

16 partitions:<br>
#        size   offset    fstype   [fsize bsize   cpg]<br>
  a: 16450497       63    unused        0     0<br>
  c: 80041248        0    unused        0     0<br>
> <strong>d a</strong><br>
> <strong>a a</strong><br>
offset: [63] <strong>&lt;Enter&gt;</strong><br>
size: [80041185] <strong>80m</strong><br>
Rounding to nearest cylinder: 164241<br>
FS type: [4.2BSD] <strong>&lt;Enter&gt;</strong><br>
mount point: [none] <strong>/</strong><br>
> <strong>a b</strong>
offset: [164304] <strong>&lt;Enter&gt;</strong><br>
size: [79876944] <strong>300m</strong><br>
Rounding to nearest cylinder: 614880
FS type: [swap] <strong>&lt;Enter&gt;</strong><br>
> <strong>a d</strong><br>
offset: [779184] <strong>&lt;Enter&gt;</strong><br>
size: [79262064] <strong>80m</strong><br>
Rounding to nearest cylinder: 164304
FS type: [4.2BSD] <strong>&lt;Enter&gt;</strong><br>
mount point: [none] <strong>/tmp</strong><br>
> <strong>a e</strong><br>
offset: [943488] <strong>&lt;Enter&gt;</strong><br>
size: [79097760] <strong>80m</strong><br>
Rounding to nearest cylinder: 164304
FS type: [4.2BSD] <strong>&lt;Enter&gt;</strong><br>
mount point: [none] <strong>/var</strong><br>
> <strong>a g</strong><br>
offset: [1107792] <strong>&lt;Enter&gt;</strong><br>
size: [78933456] <strong>350m</strong><br>
Rounding to nearest cylinder: 716688
FS type: [4.2BSD] <strong>&lt;Enter&gt;</strong><br>
mount point: [none] <strong>/usr</strong><br>
> <strong>a h</strong><br>
offset: [1824480] <strong>&lt;Enter&gt;</strong><br>
size: [78216768] <strong>&lt;Enter&gt;</strong><br>
FS type: [4.2BSD] <strong>&lt;Enter&gt;</strong><br>
mount point: [none] <strong>/home</strong><br>
> <strong>p</strong><br>
device: /dev/rwd0c<br>
type: ESDI<br>
disk: ESDI/IDE disk<br>
label: Maxtor 54098U8<br>
bytes/sector: 512<br>
sectors/track: 63<br>
tracks/cylinder: 16<br>
sectors/cylinder: 1008<br>
cylinders: 16383<br>
total sectors: 80041248<br>
free sectors: 0<br>
rpm: 3600<br><br>

<pre>
16 partitions:
#        size   offset    fstype   [fsize bsize   cpg]
  a:   164241       63    4.2BSD     1024  8192    16  # /
  b:   614880   164304      swap
  c: 80041248        0    unused        0     0
  d:   164304   779184    4.2BSD     1024  8192    16  # /tmp
  e:   164304   943488    4.2BSD     1024  8192    16  # /var
  g:   716688  1107792    4.2BSD     1024  8192    16  # /usr
  h: 78216768  1824480    4.2BSD     1024  8192    16  # /home
</pre>
> <strong>w</strong><br>
> <strong>q</strong><br>
No label changes.<br>
                </td>
        </tr>
</table>
</ul>

<p>
Notice how each mount point is split onto its own partition. For a multiuser 
machine, it is best to make at least five separate filesystems, one for 
your / filesystem, one for swap, one for /var, one for /tmp, 
and one for /usr. If your users are going to store files of any significant 
size, you want a separate /home filesystem too. 
</p>

<h3>4.1.6 - Configuring your mount points and formating your filesystems</h3>

<p>
There are four main reasons for using separate filesystems, instead of shoving everything into one or two filesystems: 
</p>

<ul>
<li><strong>Security:</strong> You can mark some filesystems as 'nosuid', 'nodev', 'noexec', 'readonly', etc.. 
<li><strong>Stability:</strong> A user, or a misbehaved program, can fill a filesystem with garbage, if they have write permissions for it.
Your critical programs, which of course run on a different filesystem, do not get interrupted. 
<li><strong>Speed:</strong> A filesystem which gets written to frequently may get somewhat fragmented. (Luckily, the ffs filesystem, what OpenBSD uses, is not prone to heavy fragmentation.) 
<li><strong>Integrity:</strong> If one filesystem is corrupted for some reason then your other filesystems are still OK. 
</ul>

<p>
Setting up your mount points is much more simple than it looks. After you setup your filesystems with disklabel, you will see text like the one below. This should 
be done for you automatically if you configured your mount points via disklabel(8). If you did not, you can do so here.
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
<pre>
You will now have the opportunity to enter filesystem information for wd0.
You will be prompted for the mount point (full path, including the prepending
'/' character) for each BSD partition on wd0.  Enter "none" to skip a
partition or "done" when you are finished.

The following partitions will be used for the root filesystem and swap:
        wd0a    /
        wd0b    swap

Mount point for wd0d (size=82152k) [/tmp, RET, none, or done]? <strong>&lt;Enter&gt;</strong>
Mount point for wd0e (size=82152k) [/var, RET, none, or done]? <strong>&lt;Enter&gt;</strong>
Mount point for wd0g (size=358344k) [/usr, RET, none, or done]? <strong>&lt;Enter&gt;</strong>
Mount point for wd0h (size=39108384k) [/home, RET, none, or done]? <strong>&lt;Enter&gt;</strong>
Mount point for wd0d (size=82002k) [/tmp, RET, none, or done]? done <strong>&lt;Enter&gt;</strong>

Now you can select another disk to initialize.  (Do not re-select a disk
you have already entered information for).  Available disks are:

wd0

Which one? [done] <strong>&lt;Enter&gt;</strong>

You have configured the following devices and mount points:

wd0a /
wd0d /tmp
wd0e /var
wd0g /usr
wd0h /home

============================================================
The next step will overwrite any existing data on:
        wd0a wd0d wd0e wd0g wd0h

Are you really sure that you're ready to proceed? [n] <strong>y</strong>
Creating filesystems...
Warning: 64 sector(s) in last cylinder unallocated
/dev/rwd0a:     164240 sectors in 163 cylinders of 16 tracks, 63 sectors
        80.2MB in 11 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
/dev/rwd0d:     164304 sectors in 163 cylinders of 16 tracks, 63 sectors
        80.2MB in 11 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
/dev/rwd0e:     164304 sectors in 163 cylinders of 16 tracks, 63 sectors
        80.2MB in 11 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
/dev/rwd0g:     716688 sectors in 711 cylinders of 16 tracks, 63 sectors
        349.9MB in 45 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
/dev/rwd0h:     78216768 sectors in 77596 cylinders of 16 tracks, 63 sectors
        38191.8MB in 4850 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
</pre>
                </td>
        </tr>
</table>
</ul>

<p>
Notice this answer defaults to no, so you will have to directly tell it to format your labels. If you chose no, you would simply be dropped into a shell and could start the install again by
typing install, or just by rebooting again with your bootdisk. At this point it will format all filesystems for you.  This could take some time depending on the size of your disk. 
</p>

<h3>4.1.7 - Configuring your Network</h3>

<p>
Now it's time to setup your network configuration. This is extremely important if you are planning on doing any network based install, considering it will be based upon the
information you are about to enter. Here is a walkthrough of the network configuration section of the install process. 
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
<pre>
You will now be given the opportunity to configure the network.  This will be
useful if you need to transfer the installation sets via FTP, HTTP, or NFS.
Even if you choose not to transfer installation sets that way, this information
will be preserved and copied into the new root filesystem.

Configure the network [y] <strong>&lt;Enter&gt;</strong>
Enter system hostname (short form): [] <strong>mybox</strong>
Enter DNS domain name: [] <strong>someisp.com</strong>

If you have any devices being configured by a DHCP server
it is recommended that you do not enter a default route or
any name servers.

You may configure the following network interfaces (the interfaces
marked with [X] have been successfully configured):

        [ ] fxp0

Configure which interface? (or, enter 'done') [fxp0] <strong>&lt;Enter&gt;</strong>
IP address (or 'dhcp') ? [] <strong>199.185.137.55</strong>
Symbolic (host) name? [test2] <strong>&lt;Enter&gt;</strong>
Netmask ? [255.255.255.0] <strong>&lt;Enter&gt;</strong>
Your use of the network interface may require non-default
media directives.  The default media is:
        media: Ethernet autoselect (100baseTX full-duplex)
This is a list of supported media:
        media autoselect
        media 100baseTX mediaopt full-duplex
        media 100baseTX
        media 10baseT mediaopt full-duplex
        media 10baseT
If the default is not satisfactory, and you wish to use another
media, copy that line from above (e.g. "media 100baseTX")
Media directives? [] <strong>&lt;Enter&gt;</strong>

You may configure the following network interfaces (the interfaces
marked with [X] have been successfully configured):

        [X] fxp0
Configure which interface? (or, enter 'done') [done] <strong>&lt;Enter&gt;</strong>
</pre>
                </td>
        </tr>
</table>
</ul>

<p>
In the above example, we use a static IP address. You can choose to use dhcp as well if you wish. In the case of DHCP, most of this information will be grabbed from a remote dhcp server.
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
<pre>
Enter IP address of default route: [none] <strong>199.185.137.128</strong>
Enter IP address of primary nameserver: [none] <strong>199.185.137.1</strong>
Would you like to use the nameserver now? [y] <strong>&lt;Enter&gt;</strong>
</pre>
                </td>
        </tr>
</table>
</ul>

<h3>4.1.8 - Choosing Installation Media</h3>

<p>
After your network is setup, the install script will give you a chance to make any changes to your network setup. (Mainly if errors were produced.) Then the filesystems you
created will be mounted and a root password set. This will get your local disks ready for the OpenBSD packages to be installed upon them. After your local disks are ready you
will get a chance to choose your installation media. The options are listed below. 
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
<pre>
You will now be given the opportunity to escape to the command shell to do
any additional network configuration you may need.  This may include adding
additional routes, if needed.  In addition, you might take this opportunity
to redo the default route in the event that it failed above.
Escape to shell? [n] <strong>&lt;Enter&gt;</strong>

/dev/wd0a on /mnt type ffs (rw, asynchronous, local)
/dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local)
/dev/wd0e on /mnt/var type ffs (rw, asynchronous, local)
/dev/wd0g on /mnt/usr type ffs (rw, asynchronous, local)
/dev/wd0h on /mnt/home type ffs (rw, asynchronous, local)

Please enter the initial password that the root account will have.
Password (will not echo): <strong>&lt;Your Password Here!&gt;</strong>
Password (again): <strong>&lt;Your Password Here!&gt;</strong>

Do you expect to run the X Window System? [y] <strong>&lt;Enter&gt;</strong>

It is now time to extract the installation sets onto the hard disk.  Make sure
the sets are either on a local device (i.e. tape, CD-ROM) or on a network
server.  You will have the chance to repeat this step or to extract sets from
several places, so you don't have to try to load all the sets in one try and
can recover from some errors.

Install from (f)tp, (h)ttp, (t)ape, (C)D-ROM, (N)FS or local (d)isk? <strong>c</strong>
</pre>
                </td>
        </tr>
</table>
</ul>

<p>
In this example we are installing via CD-ROM. This will bring up a list of devices on your computer identified as a CD-ROM. Most
people will only have one; if you don't, you need to make sure you pick the device which you will use to install OpenBSD from. After choosing the correct device, you will be
prompted for which filesystem the installation files will reside on. If you are using the OpenBSD CD-ROM you will choose 'c' here, for 'c' represents the whole disk. Here is an
example: 
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
<pre>
The following CD-ROM devices are installed on your system; please make
sure the CD is in the CD-ROM drive and select the device containing
the CD with the installation sets:

cd0

Which CD-ROM contains the installation media? [cd0] <strong>&lt;Enter&gt;</strong>
</pre>
                </td>
        </tr>
</table>
</ul>

<p>
Now you will be prompted for which filesystem to use when reading the CD-ROM, and in which directory the installation files are. If you are using the official OpenBSD
CD-ROM, you will use 'cd9660' as your filesystem. (Which is the default.) You will then be using '/3.0/i386/' as the directory in which the files reside. (Again, this is the default
option.) After this you will get a list of packages to install. You can get a description of these files in <a href="#FilesNeeded">Files Needed</a>. Here is what you will be seeing: 
</p>

<h3>4.1.9 - Choosing installation packages and finishing the install.</h3>

<p>
Now it's time to choose which packages you will be installing. You can get a description of these files in faq4.2. The files that the installdisk finds will be shown to you on the
screen. Your job is just to specify which files you want. By default only 4 packages are selected. These are 'base30.tar.gz', 'etc30.tar.gz', 'man30.tar.gz' and 'bsd'. This is because
these first 3 files MUST be present for you to have any sort of a functional system, the 'bsd' file is the kernel of the system. The rest are left up to your discretion. The example
below is that of a full install, minus the games package. 
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
<pre>
Enter the directory relative to the mount point that
contains the file. [/3.0/i386] <strong>&lt;Enter&gt;</strong>

You will now be asked for files to extract.  In addition to the
files listed in the selector you may enter any file located in
/mnt2//3.0/i386.  You can also enter 'all' to install all the standard
sets, or 'list' to list the files available in /mnt2//3.0/i386.
When you are done selecting files, enter 'done'.
Some of these sets are required for your install and some are optional --
You will want at least the base and bsd sets.
Consult the installation notes if you are not sure which sets are required!

The following sets are available for extraction.
Enter filename, `list', `all', or `done'.
You may de-select a set by prepending a '-' to its name.

        [X] base30.tgz
        [X] etc30.tgz
        [ ] misc30.tgz
        [ ] comp30.tgz
        [X] man30.tgz
        [ ] game30.tgz
        [ ] xbase30.tgz
        [ ] xshare30.tgz
        [ ] xfont30.tgz
        [ ] xserv30.tgz
        [X] bsd
File name? [] <strong>*</strong>

The following sets are available for extraction.
Enter filename, `list', `all', or `done'.
You may de-select a set by prepending a '-' to its name.

        [X] base30.tgz
        [X] etc30.tgz
        [X] misc30.tgz
        [X] comp30.tgz
        [X] man30.tgz
        [X] game30.tgz
        [X] xbase30.tgz
        [X] xshare30.tgz
        [X] xfont30.tgz
        [X] xserv30.tgz
        [X] bsd
File name? [] <strong>-game*</strong>

The following sets are available for extraction.
Enter filename, `list', `all', or `done'.
You may de-select a set by prepending a '-' to its name.

        [X] base30.tgz
        [X] etc30.tgz
        [X] misc30.tgz
        [X] comp30.tgz
        [X] man30.tgz
        [ ] game30.tgz
        [X] xbase30.tgz
        [X] xshare30.tgz
        [X] xfont30.tgz
        [X] xserv30.tgz
        [X] bsd
File name? [] <strong>done</strong>
</pre>
                </td>
        </tr>
</table>
</ul>

<p>
Once you have successfully picked which packages you want, you will be prompted to make sure you want to extract these packages and they will then be installed. A progress
bar will be shown that will keep you informed on how much time it will take. The times range greatly depending on what system it is you are installing OpenBSD on. After this your
configuration files ( networking and filesystem ) will be moved onto your disks also from the installdisk. 
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
<pre>
/mnt2//3.0/i386/base30.tgz:
100% |**************************************************| 21192 KB    00:00 ETA
/mnt2//3.0/i386/etc30.tgz:
100% |**************************************************|   987 KB    00:00 ETA
/mnt2//3.0/i386/man30.tgz:
100% |**************************************************|  4957 KB    00:00 ETA
/mnt2//3.0/i386/bsd:
100% |**************************************************|  3053 KB    00:00 ETA
/mnt2//3.0/i386/misc30.tgz:
100% |**************************************************|  1644 KB    00:00 ETA
/mnt2//3.0/i386/comp30.tgz:
100% |**************************************************| 14406 KB    00:00 ETA
/mnt2//3.0/i386/xbase30.tgz:
100% |**************************************************|  5504 KB    00:00 ETA
/mnt2//3.0/i386/xshare30.tgz:
100% |**************************************************|  1538 KB    00:00 ETA
/mnt2//3.0/i386/xfont30.tgz:
100% |**************************************************|  6019 KB    00:00 ETA
/mnt2//3.0/i386/xserv30.tgz:
100% |**************************************************| 15035 KB    00:00 ETA

Extract more sets? [n] <strong>&lt;Enter&gt;</strong>
</pre>
                </td>
        </tr>
</table>
</ul>

<p>
Once this is done, all that's left is to set your timezone and install the bootblocks. Setting your timezone is extremely easy. Just pick the area you live in and enter the name. That's
it!. Only one more question, which is whether or not you will be running X on this server. If you plan to ever run X on this server you should choose yes, otherwise you might have to
change machdep.allowaperture=0 into machdep.allowaperture=1 in your <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl.conf&sektion=5">etc/sysctl.conf(5)</a>. After this is all done, just type 'reboot' at the shell prompt and your machine will
be booted with OpenBSD! 
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
<pre>
Copying fstab, hostname.fxp0, hosts, myname, mygate, resolv.conf,  ...done.

Select a time zone for your location. Timezones are represented on the system
by a directory structure rooted in "/usr/share/timezone". Most timezones can
be selected by entering a token like "MET" or "GMT-6".  Other zones are
grouped by continent or country, with detailed zone information separated by
a slash ("/"), e.g. "US/Pacific" or "Canada/Mountain".

To get a listing of what's available in /usr/share/zoneinfo, enter "?"
at the prompts below.

What timezone are you in? [`?' for list] [GMT] <strong>?</strong>
Africa/      Chile/       GB-Eire      Israel       NZ-CHAT      Turkey
America/     Cuba         GMT          Jamaica      Navajo       UCT
Antarctica/  EET          GMT+0        Japan        PRC          US/
Arctic/      EST          GMT-0        Kwajalein    PST8PDT      UTC
Asia/        EST5EDT      GMT0         Libya        Pacific/     Universal
Atlantic/    Egypt        Greenwich    MET          Poland       W-SU
Australia/   Eire         HST          MST          Portugal     WET
Brazil/      Etc/         Hongkong     MST7MDT      ROC          Zulu
CET          Europe/      Iceland      Mexico/      ROK          posixrules
CST6CDT      Factory      Indian/      Mideast/     Singapore
Canada/      GB           Iran         NZ           SystemV/
What timezone are you in? [`?' for list] [GMT] <strong>Canada</strong>
There are several timezones available within zone 'Canada'
Select a sub-timezone [`?' for list]: ?
Atlantic            Eastern             Pacific
Central             Mountain            Saskatchewan
East-Saskatchewan   Newfoundland        Yukon
There are several timezones available within zone 'Canada'
Select a sub-timezone [`?' for list]: Mountain
You have selected timezone "Canada/Mountain".
Installing timezone link.
Making all device nodes (by running /dev/MAKEDEV all) ...... done.
Installing boot block...
boot: /mnt/boot
proto: /usr/mdec/biosboot
device: /dev/rwd0c
/usr/mdec/biosboot: entry point 0
proto bootblock size 512
room for 12 filesystem blocks at 0x16f
Will load 7 blocks of size 8192 each.
Using disk geometry of 63 sectors and 255 heads.
 0: 20 @(0 108 44) (6847-6866)
 1: 63 @(0 109 1) (6867-6929)
 2: 13 @(0 110 1) (6930-6942)
 3:  5 @(0 9 59) (625-629)
 4: 11 @(0 10 1) (630-640)
/mnt/boot: 5 entries total
using MBR partition 3: type 166 (0xa6) offset 63 (0x3f)

Enabling machdep.allowaperture. Read xf86(4) for more information.

Unmounting filesystems... /mnt/home /mnt/usr /mnt/var /mnt/tmp /mnt ... Done.
Done.

CONGRATULATIONS!  You have successfully installed OpenBSD!  To boot the
installed system, enter halt at the command prompt. Once the system has
halted, reset the machine and boot from the disk.

# <strong>reboot</strong>
</pre>
                </td>
        </tr>
</table>
</ul>

<h3>After your reboot</h3>

<p>
This section will hopefully point you in the right direction for clues on what to do initially after you 
have installed your OpenBSD system. This is basically modeled after the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&sektion=8&format=html">afterboot(8)</a> man page. Which
should definitely be one of your first steps after installing OpenBSD. Here is a table which will point you to relevant
FAQ sections.

<UL>
<LI><a href="faq10.html#AddDelUser">Adding users in OpenBSD</a> 
<LI><a href="faq6.html#Setup">Initial Network Setup</a>
<LI><a href="faq2.html#ManPages">Man Pages of popular/useful commands</a>
<LI><a href="http://www.openbsd.org/cgi-bin/man.cgi">OpenBSD man pages on the Web</a>
<li><a href="faq8.html#Packages">OpenBSD Packages</a> - Precompiled Binary Packages.
</UL>

<h3>One last thing...</h3>
The OpenBSD developers ask you to
<a href="#SendDmesg">Send in a copy of your dmesg</a>.  This is 
really appreciated by the developers, and ultimately, all 
users.
</p>


<a name="1.14"></a>
<h2>Other Information Resources</h2>

Additional documents already exist for those of you who might have 
special needs or interests. You can retrieve these from any of
the mirror ftp sites.
<ul>
<LI><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.0/i386/INSTALL.i386">INSTALL.i386</a> - Comprehensive installation document.
<LI><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.0/i386/INSTALL.linux">INSTALL.linux</a> - Installing OpenBSD along with Linux.
<LI><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.0/i386/INSTALL.mbr">INSTALL.mbr</a> - Explaining the Master Boot Record.
<LI><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.0/i386/INSTALL.pt">INSTALL.pt</a> - Explaining Partition Tables.
<LI><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.0/i386/INSTALL.dbr">INSTALL.dbr</a> - DOS Floppy Disk Boot Sector.
<LI><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.0/i386/INSTALL.chs">INSTALL.chs</a> - Explaining CHS Translation.
<LI><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.0/i386/INSTALL.ata">INSTALL.ata</a> - ATA/ATA-1/ATA-2/IDE/EIDE/etc FAQ
<LI><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.0/i386/INSTALL.os2br">INSTALL.os2br</a> - The os2 Boot Sector.
</UL>

<p>
<a name= "FilesNeeded"></a>
<a name= "4.2"></a>
<h2>4.2 - What files are needed for Installation?</h2>
</p>

<p>
There are many packages containing the OpenBSD binaries, but which ones do
you need to get your system up and running? Here is an overview of each
package.
</p>

<p>
<ul>
    <li><strong>base30.tgz</strong>    - Has the base OpenBSD system <b>Required</b></li>
    <li><strong>etc30.tgz</strong>     - Has all the files in /etc <b>Required</b></li>
    <li><strong>comp30.tz</strong>    - Has the compiler and its tools, libs. <b>Recommended</b></li>
    <li><strong>man30.tgz</strong>     - Holds man pages <b>Recommended</b></li>
    <li><strong>misc30.tgz</strong>    - Holds misc info, setup docs</li>
    <li><strong>game30.tgz</strong>    - Has the games for OpenBSD</li>
    <li><strong>xbase30.tgz</strong>   - Has the base install for X11</li>
    <li><strong>xfont30.tgz</strong>   - Holds X11's font server and fonts</li>
    <li><strong>xserv30.tgz</strong>   - Has X11's X servers</li>
    <li><strong>xshare30.tgz</strong>  - Has manpages, locale settings, includes, etc  for X</li>
    <li><strong>bsd</strong> 		  - This is the Kernel. <b>Required</b></li>
</ul>
</p>

<p>
<a name= "SpaceNeeded"></a>
<a name= "4.3"></a>
<h2> 4.3 - How much space do I need for an OpenBSD installation?</h2>
</p>

<p>
The following are suggested sub-tree sizes for a full system install. 
The numbers include enough extra space to permit you to run a typical home
system that is connected to the internet.

<UL>
<LI>For a multiuser system,
you probably want to triple these values.
<LI>If you plan to install a significant amount of third party software, make your /usr partition large!  <strong>At least</strong> triple these values!
<LI>For a system that
handles lots of email or web pages (stored, respectively, in /var/mail and /var/www) you will want to make your /var partition significantly larger.
<LI>For a
multiuser system which may generate lots of logs, you will still
want to make your /var partition significantly larger (/var/log). 
<li>If you plan to rebuild the kernel or system from source, you will
want to make the /usr partition significantly larger, probably 800M-1G 
larger than indicated below.
</UL>
As you read this, keep in mind that /usr and /usr/X11R6 are usually
both parts of the same filesystem, that is, /usr, as there is no big
advantage to making them into separate filesystems.
<ul>
<strong>
<pre>
SYSTEM          /       /usr    /var    /usr/X11R6
alpha           56M     540M    27M     161M
amiga           45M     399M    24M      36M
hp300           31M     234M    24M      47M
i386            35M     229M    24M      72M
mac68k          29M     232M    24M      36M
mvme68k         29M     232M    24M       -  (no Xserver)
pmax            50M     355M    24M      60M
sparc           40M     259M    24M      49M
</pre>
</strong>
</ul>

<p>
When you are in the disklabel editor, you may choose to make your entire
system have just an 'a' (main filesystem) and 'b' (swap) .  The 'a' filesystem which you set up
in disklabel will become your root partition, which should be the sum of
all the 3 main values above (/, /usr, and /var) plus some space for /tmp.
The 'b' partition you set up automatically becomes your system swap
partition -- we recommend a minimum of 32MB but if you have disk to spare
make it at least 64MB.  If you have lots of disk space to spare, make this
256MB, or even 512MB.  

<P>
There are four main reasons for using separate filesystems, instead of shoving
everything into one or two filesystems:
<UL>
<LI><b>Security</b>: You can mark some filesystems as 'nosuid', 'nodev', 'noexec', 'readonly', etc..
<LI><b>Stability</b>: A user, or a misbehaved program, can fill a filesystem with garbage, if they have write permissions for it.  Your critical programs, which of course run on a different filesystem, do not get interrupted.
<LI><b>Speed</b>: A filesystem which gets written to frequently may get somewhat fragmented.  (Luckily, the ffs filesystem, what OpenBSD uses, is not prone to heavy fragmentation.)
<LI><b>Integrity</b>: If one filesystem is corrupted for some reason then your other filesystems are still OK.
</UL>

<P>
<a name= "Multibooting"></a>
<a name="4.4"></a>
<h2>4.4 - Multibooting OpenBSD (i386, alpha)</h2>
</p>

<p>
<strong>OpenBSD & NT (or XP)</strong>
</p>

<p>
To multiboot OpenBSD and NT (or XP), you can use NTloader, the bootloader that NT uses. To multi-boot with NT,  you
need a copy of your OpenBSD pbr. After running installboot, you can copy it something like this:
</p>

<ul>
<pre>
	# <strong>dd if=/dev/rsd0a of=openbsd.pbr bs=512 count=1</strong>
</pre>
</ul>

<p>
Now boot NT and put openbsd.pbr in c:. Add a line like this to the end of c:\boot.ini: 
</p>

<ul>
<pre>
	c:\openbsd.pbr="OpenBSD"
</pre>
</ul>

<p>
When you reboot, you should be able to select OpenBSD from the NT loader menu. There is much more
information available about NTloader at the <a href="http://www.tburke.net/info/ntldr/ntldr_hacking_guide.htm">
NTLDR Hacking Guide. </a>
</p>
<p>
On Windows XP you can also edit the boot information using the GUI, see the
<a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;q289022">XP Boot.ini HOWTO</a>.
</p>

<p>
<strong>OpenBSD & Windows or DOS (i386)</strong>
</p>

<p>
To boot OpenBSD along with Windows 3.1, Windows95, or DOS you must use a boot loader on the system
that can handle OpenBSD, Windows, and DOS! Some bootloaders of choice are <a href="http://www.freebird.org/sw-map/bootmanager.html">
osbs20b8.zip</a> or <a href="http://www.ranish.com/part/">The Ranish Partition Manager</a>.
Both of these are able to boot OpenBSD partitions.
</p>

<p>
<strong>OpenBSD & Linux (i386)</strong>
</p>

<p>
Please refer to <a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.0/i386/INSTALL.linux">INSTALL.linux</a>, which gives indepth instructions on getting
OpenBSD working with Linux.
</p>

<p>
<a name= "SendDmesg"></a>
<a name="4.5"></a>
<h2>4.5 - Sending your dmesg to dmesg@openbsd.org after the install</h2>
</p>

<p>
Just to remind people, it's important for the OpenBSD developers to keep track
of what hardware works, and what hardware doesn't work perfectly..
</p>

<p>
A quote from /usr/src/etc/root/root.mail
<pre>
If you wish to ensure that OpenBSD runs better on your machines, please do us
a favor (after you have your mail system setup!) and type
        dmesg | mail dmesg@openbsd.org
so that we can see what kinds of configurations people are running.  We will
use this information to improve device driver support in future releases.
(We would be much happier if this information was for the supplied GENERIC
kernel; not for a custom compiled kernel).  The device driver information
we get from this helps us fix existing drivers.
</pre>
</p>
<p>
Make sure you send email from an account that is able to also receive
email so developers can contact you back if they have something they want
you to test or change in order to get your setup working. It's not important
at all to send the email from the same machine that is running OpenBSD, so
if that machine is unable to receive email, just
<pre>
 dmesg | mail your-account@yourmail.dom
</pre>
and then forward that message to
<pre>
 dmesg@openbsd.org
</pre>
where <tt>your-account@yourmail.dom</tt> is your regular email account.
(or transfer the dmesg output using ftp/scp/floppydisk/carrier-pigeon/...)
</p>

<p>
<strong>NOTE</strong> - Please send only GENERIC kernel dmesgs. Custom
kernels that have device drivers removed are not helpful.
</p>

<a name= "AddFileSet"></a>
<h2>4.6 - Adding a file set after install</h2>
"Oh no!  I forgot to add a file set when I did the install!"
<p>
Sometimes, you realize you really DID need <tt>comp31.tgz</tt> (or any
other system component) after all, but you didn't realize this at the
time you installed your system.  Good news: There are two easy ways to
add file sets after the initial install:

<h3>Using the Upgrade process</h3>
Simply boot your install media (CD-ROM or Floppy), and choose Upgrade
(rather than Install).  When you get to the lists of file sets to install,
choose the sets you neglected to install first time around, select
your source, and let it install them for you.

<h3>Using tar(1)</h3>
The install file sets are simply compressed tar files, and you can
expand them manually from the root of the file system:
<ul>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><pre>
# cd /
# tar xzvpf comp31.tgz
</pre></td></tr></table>
</ul>
Do NOT forget the <tt>'p'</tt> option in the above command in
order to restore the file permissions properly!
<p>
One common mistake is to think you can use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a>
to add a missing file sets.  This does not work.  pgk_add(1) is
for package files, not generic tar files like the install sets.
<p>

<a name="bsd.rd">
<h2>4.7 - What is 'bsd.rd'?</h2>
<b><tt>bsd.rd</tt></b> is a "RAM Disk" kernel.  This file can be very useful, many
developers are careful to keep it on the root of their system at all
times.
<p>
Calling it a "RAM Disk kernel" describes the root file
system of the kernel -- rather than being a physical drive, the 
utilities available after the boot of <tt>bsd.rd</tt> are stored 
in the kernel, and are run from a RAM-based file system.  
<tt>bsd.rd</tt> also includes a healthy set of utilities to 
allow you to do system maintenance and installation.
<p>
On some platforms, <tt>bsd.rd</tt> is actually the preferred 
installation technique -- you place this kernel on an existing 
file system, boot it, and run the install from it.  On most 
platforms, if you have a running older version of OpenBSD, you 
can FTP  a new version of <tt>bsd.rd</tt>, reboot from it, and 
install a new version of OpenBSD without using any removable 
media at all.
<p>
Here is an example of booting <tt>bsd.rd</tt> on an i386 system:

<ul>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><pre>
Using Drive: 0 Partition: 3
reading boot.....
probing pc0 com0 com1 apm mem[639k 255M a20=on]
disk fd0 hd0
>> OpenBSD/i386 BOOT 1.28
boot> <b>boot hd0a:/bsd.rd</b>
<i>. . . normal boot to install . . .</i>
</pre></td></tr></table>
</ul>
As indicated, you will be brought to the install program, but you
can also drop to the shell to do maintenance on your system.
<p>
The general rule on booting <tt>bsd.rd</tt> is to change your boot
kernel from <tt>/bsd</tt> to <tt>bsd.rd</tt> through whatever 
means used on your platform.  
<p>
<br>

<font color= "#0000e0">
<a href= "index.html">[Back to Main Index]</a>
<a href= "faq3.html">[To Section 3.0 - Obtaining OpenBSD]</a>
<a href= "faq5.html">[To Section 5.0 - Kernel configuration and Disk Setup]</a>
</font>
</p>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt= "[back]"></a> 
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: faq4.html,v 1.100 2002/04/24 03:18:41 nick Exp $</small>
</p>
</body>
</html>



