<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>4 - Prùvodce instalací OpenBSD 3.3</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-2">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2003 by OpenBSD.">
</head>

<!-- Passes validator.w3.org. Please keep it this way -->

<body bgcolor= "#ffffff" text= "#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>

<font color= "#0000e0">
<a href= "index.html">[FAQ index]</a>
<a href= "faq3.html">[Do sekce 3.0 - Jak získat OpenBSD]</a>
<a href= "faq5.html">[Do sekce 5.0 - Vytvoøení systému ze zdrojových kódù]</a>
</font>

<h1><font color=#e00000>4 - Prùvodce instalací OpenBSD 3.3</font></h1>
<hr>

<p>
<h3>Obsah</h3>
<ul>
<li><a href="#Overview	">4.1 - Pøehled instalaèních procedur 
      OpenBSD</a>
<ul>
<li><a href="#Plats	">4.1.1 - Podporované architektury</a>
<li><a href= "#Media	">4.1.2 - Podporovaná instalaèní média</a> 
<li><a href= "#MkFlop	">4.1.3 - Vytvoøení instalaèni bootovací OpenBSD 
			diskety</a>
<ul>
<li><a href= "#UnixFlop	">4.1.3.1 - Vytvoøení diskety v Unixu</a>
<li><a href= "#DosFlop	">4.1.3.2 - Vytvoøení diskety v DOSu/Windows</a>
</ul>
<li><a href= "#Boot	">4.1.4 - Bootování OpenBSD instalaèních disket</a>
</ul>
<li><a href= "#Checklist"   >4.2 - Co zkontrolovat pøed instalací</a>
<li><a href= "#Install"     >4.3 - Vlastní instalace</a>
<ul>
<li><a href="#Disks"      >4.3.1 - Nastavení diskù</a>
<li><a href="#Hostname"   >4.3.2 - Nastavení hostname</a>
<li><a href="#Network"    >4.3.3 - Konfigurace sítì</a>
<li><a href="#InstMedia"  >4.3.4 - Volba instalaèního média</a>
<li><a href="#Filesets"   >4.3.5 - Volba souborových setù</a>
<li><a href="#SmallRAM"   >4.3.6 - Procedury pro instalaci s malou RAM</a>
<li><a href="#Finish"     >4.3.7 - Zakonèení instalace</a>
<li><a href="#OtherInf"   >4.3.8 - Dal¹í zdroje informací</a>
</li></ul>

<li><a href= "#FilesNeeded" >4.4 - Které soubory potøebuji pro instalaci?</a>
<li><a href= "#SpaceNeeded" >4.5 - Kolik místa potøebuji pro instalaci
			OpenBSD ?</a>
<li><a href= "#Multibooting">4.6 - Bootování více operaèních systémù zároveò s OpenBSD</a>
<li><a href= "#SendDmesg"   >4.7 - Zaslání va¹eho dmesg na dmesg@openbsd.org 
			po instalaci systému</a>
<li><a href= "#AddFileSet"  >4.8 - Pøidání souborového setu po instalaci</a>
<li><a href= "#bsd.rd"      >4.9 - Co je 'bsd.rd'?</a>
<li><a href= "#InstProb"   >4.10 - Bì¾né instalaèní problémy</a>
  <ul>
  <li><a href="#mkdevhang" >4.10.1 - Instalace se zasekne bìhem MAKEDEV</a>
  <li><a href="#cpq16m"    >4.10.2 - Mùj Compaq rozezná pouze 16M RAM</a>
  <li><a href="#noboot"    >4.10.3 - Moje i386 po instalaci nenabootuje</a>
  <li><a href="#sshhang"   >4.10.4 - Mùj poèítaè nabootuje, ale zasekne se bìhem procesu ssh-keygen 
</a>
  <li><a href="#noftplist" >4.10.5 - Bìhem instalace se objevila zpráva "ftplist: No such
     file" when doing an install</a>
  </ul>
<li><a href= "#site"       >4.11 - Úprava instalaèního procesu</a>
<li><a href= "#Multiple"   >4.12 - Jak mohu nainstalovat mno¾ství podobných systémù?</a>
<li><a href="#getdmesg"    >4.13 - Jak mohu pou¾ít dmesg(8) pro oznámení
     instalaèních problémù?</a>
</ul>
<hr>

<p>
<a name= "Overview"></a>
<h2>4.1 - Pøehled instalaèních procedur OpenBSD</h2>

<p>
OpenBSD má velmi robustní textovì zalo¾enou instalaèní proceduru. 
Kromì svojí robusnosti mù¾e být instalaèní procedura provedena za 
pou¾ití jediné instalaèní diskety. Pro ka¾dou podporovanou architekturu je 
instalaèní procedura velmi podobná, nicménì se li¹í v urèitých detailech. Ka¾dopádnì
vám doporuèujeme pøeèíst INSTALL dokumenty v adresáøích pro jednotlivé 
platformy na CDROM nebo FTP (napø. <tt>INSTALL.i386</tt>, 
<tt>INSTALL.mac68k</tt> nebo <tt>INSTALL.sparc</tt>).

<p>
Na vìt¹inì architektur máte mo¾nost instalovat nìkolika zpùsoby,
vèetnì pou¾ití FTP, CDROM nebo souborù na lokálním disku. Jeden 
zpùsob podporován <b>není</b>, a to sice <a href="faq3.html#ISO">sta¾ení ISO image</a> 
a vypálení vlastního CD. CDROM je nicménì mo¾né 
<a href="../../cs/orders.html">koupit</a>.
Hodnì platforem má teï bootovací CD-ROM image (<tt>cd33.iso</tt>), který 
umo¾òuje vytvoøení bootovacího CD-ROM pro systémy, které nepodporují 
bootování z disket. Nicménì toto iso je pouze bootovací médium, 
instalaèní soubory musí být stejnì získány z FTP nebo jiného zdroje.

<a name="Plats"></a>
<h3>4.1.1 - Podporované architektury</h3>
<!-- XXXrelease -->
<!-- XXXversion -  Lots of places. -->

<p>
OpenBSD 3.3 podporuje následující architektury, vyjmenované v abecedním 
poøadí. Pro specifické informace o dané architektuøe se informujte na 
odpovídající stránce.

<ul>
  <li><a href="../../cs/alpha.html">alpha</a> - DEC Alpha-based poèítaèe.
  <li><a href="../../hp300.html">hp300</a> - Hewlett-Packard HP300/HP400.
  <li><a href="../../hppa.html">hppa</a> - HP PA-RISK based systems <i>*novì v 3.3*</i>
  <li><a href="../../cs/i386.html">i386</a> - Intel i386 kompatibilní.
  <li><a href="../../mac68k.html">mac68k</a> - Vìt¹ina MC680x0-based Apple 
    Macintosh modelù.
  <li><a href="../../mvme68k.html">mvme68k</a> -Motorola MVME147/16x/17x 68K 
    VME karty.
  <li><a href="../../cs/macppc.html">powerpc</a> - Podpora pro Apple-based 
   PowerPC systémy.
  <li><a href="../../cs/sparc.html">sparc</a> - Platforma SPARC od Sun Microsystems.
  <li><a href="../../cs/sparc64.html">sparc64</a> - Sun UltraSPARC systémy.
  <li><a href="../../cs/vax.html">vax</a> - poèítaèe VAX firmy DEC.
</ul>

<a name="Media"></a>
<h3>4.1.2 - Podporovaná instalaèní média</h3>

<p>
OpenBSD mù¾e být instalováno z rùzných druhù medií. Nejbì¾nìj¹í a na 
architektuøe nezávislé zpùsoby jsou vyjmenovány dále. Nejprve v¹ak 
musíte nabootovat a to z OpenBSD CD-ROM, diskety 
nebo pomocí <a href="#bsd.rd">ramdisk kernelu</a>. 

<p>
<table align="center" border="1" width="600">
<tr>
<td>
<b>CD-ROM</b>
</td>
<td bgcolor="#EEEEEE">
Pro instalaci z CD-ROM potøebujete mít 
<a href="../../cs/orders.html">Oficiální OpenBSD CD-ROM</a> 
nebo si vytvoøte vlastní CD. To je vet¹inou nejjednodu¹¹í zpùsob, 
jak OpenBSD systém nainstalovat. <br>
<b>Poznámka:</b> Oficiální CD s OpenBSD jsou bootovatelné, 
pokud to podporuje vá¹ BIOS. 
</td>
</tr><tr>
<td>
<b>FTP</b>
</td>
<td bgcolor="#EEEEEE">
Tato instalaèní procedura povoluje nainstalovat OpenBSD 
downloadem instalaèních balíkù pøímo ze sítì v reálném 
èase.
</td>
</tr><tr>
<td>
<b>Lokální Filesystém</b>
</td>
<td bgcolor="#EEEEEE">
Instalovat mù¾ete i z lokálního disku, pokud na nìm 
existuje filesystém, na kterém se nachází instalaèní 
balíky. Na instalaèním disku platformy i386 je podpora pro DOS, EXT2FS a FFS.
</td>
</tr>
</table>

<a name="MkFlop"></a>
<h3>4.1.3 - Vytvoøení bootovatelného média OpenBSD.</h3>

<p>
Pro vytvoøení instalaèních disket si nejprve stáhnìte správný boot 
floppy image z jednoho z distribuèních míst OpenBSD nebo 
zkopírujte image z oficiálního OpenBSD CD-ROM. 
Seznam FTP serverù se nachází na stránce 
<a href="../../cs/ftp.html">OpenBSD FTP Distribution</a>. 
Ka¾dá architektura má jeden nebo více floppy image; rùzné image 
jsou pro rùzné varienty hardware. Rozdíly mezi instalaèními disketami 
platformy i386 jsou vyjmenovány dále. Pokud mají jiné architektury 
více ne¾ jednu instalaèní disketu, pøeètìte si INSTALL dokument 
v jejich FTP adresáøi. Pro ty, které mají pouze jednu, si stáhnìte 
image <tt>floppy33.fs</tt>.

<p>
Platforma <a href="../../cs/i386.html">i386</a> má na výbìr z pìti rùzných 
obrazù instalaèních médií: 

<ul>
<li><b><tt>floppy33.fs</tt></b> (Desktop PC) podporuje hodnì
	PCI a ISA NIC, IDE a jednoduché SCSI adaptéry a 
	nìkteré PCMCI.
<li><b><tt>floppyB33.fs</tt></b> (Servery) podporuje hodnì RAID øadièù
	a nìkteré ménì obvyklé SCSI adaptéry. Nicménì, 
	podpora mnohých standardních SCSI adaptérù, EISA a ISA sí»ovách 
	karet je odstranìna. 
<li><b><tt>floppyC33.fs</tt></b> (Laptopy) podporuje Cardbus a PCMCIA zaøízení, která lze 
	nalézt v mnoha laptopech.
<li><b><tt>cdrom33.fs</tt></b> je v podstatì kombinace v¹ech tøí bootovacích disket. 
	Je mo¾né pou¾ít ho k výrobì bootovací 2.88M floppy nebo 
	èastìji jako boot image pro výrobu vlastního 
	bootovacího CD.
<li><b><tt>cd33.iso</tt></b> je image formátu ISO9660, který mù¾e být pou¾it pro  
        vytvoøení bootovacího CD s vìt¹inou známých programù pro tvorbu CDR
        na vìt¹inì platforem. Je to <tt>cdrom33.fs</tt> pøipravený pro 
        vypálení.
</ul>

<p>
Vìt¹ina u¾ivatelù na arch i386 pou¾ije pouze instalaèní disk 
<tt>floppy33.fs</tt>. 

<p>
Ano, mù¾e dojít k situaci, kdy je zapotøebí jeden disk kvùli podpoøe
SCSI a jiný podporující va¹i sí»ovou kartu. Na¹tìstí je to velmi vzácná
situace a vìt¹inou to lze nìjak obejít.


<p>
Jakmile máte vybraný správny image pro  disketu, potøebujete èistou 
disketu. Pokud na disketì jsou nìjaké vadné sektory, pak se instalace 
pravdìpodobnì nezdaøí. 

<p>
<a name="UnixFlop"></a>
<h4>4.1.3.1 - Vytvoøení diskety v UNIXu</h4>
Pro vytvoøení zformátované diskety pou¾ijte 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdformat&sektion=&arch=i386">fdformat(1)</a>, 
který disk jednak zformátuje, jednak pro kontrolu vadných sektorù.

<p>
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
# <b>fdformat /dev/fd0a</b>
Format 1440K floppy `/dev/fd0a'? (y/n): y
Processing VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV done.
</pre></td></tr> </table>

<p>
Pokud výstup z fdformat vypadá takto, pak je v¹e v poøádku. 
Nicménì, pokud jste nevidìli V©ECHNA &quot;V&quot;, tak je vá¹ disk zøejmì
¹patný a mìli byste zkusit jiný.

<p>
Jakmile máte èistou, formatovanou diketu, nastal èas na ní zapsat 
instaèní image. Pro tento úèel mù¾ete pou¾ít 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&sektion=0">dd(1)</a>.
Následuje pøíklad pou¾ití <tt>dd(1)</tt>:

<p>
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
# <b>dd if=floppy33.fs of=/dev/rfd0c bs=32k</b>
</pre></td></tr></table>

<p>
Jakmile je image zapsaný, zkontrolujte, ¾e je zkopírovaný image shodný
s originálem pomocí 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cmp&amp;sektion=1">cmp(1)</a>. 
Pokud je disketa stejná jako image, 
dostanete jen dal¹í prompt.

<p>
<table border=0 width="650"> <tr><td nowrap bgcolor="#EEEEEE"><pre>
# <b>cmp /dev/rfd0c floppy33.fs</b>
</pre> </td> </tr> </table>

<a name="DosFlop"</a>
<h4>4.1.3.2 - Vytvoøení diskety v DOSu/Windows</h4> 
Pokud vytváøíte na Windows/DOS platformì, 
pou¾ijte nástroje, o kterých se zmiòujeme ní¾e, z
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.3/tools/">tools</a> 
adresáøe na jakémkoli z ftp mirrorù nebo v <tt>3.3/tools</tt> adresáøi na 
CD1 OpenBSD CD. U¾ivatelé DOS/Windows 9x zøejmì pou¾ijí pøíkaz <i>rawrite</i> pro
vytvoøení va¹í bootovací floppy.

<p>
Pro pøípravu zformátované diskety v MS-DOSu nebo Windows, pou¾ijte jednodu¹e nativní 
nástroje pro formátovaní pro tu kterou platformu.

<p>
Pro zapsání instalaèního image na pøipravenou disketu mù¾ete pou¾ít
<i>rawrite</i>, <i>fdimage</i> nebo <i>ntrw</i>. <i>rawrite</i> nebude fungovat na 
Windows NT, 2000 nebo XP

<p>
Uvìdomte si, ¾e <tt>FDIMAGE.EXE</tt> a <tt>RAWRITE.EXE</tt> jsou
MS-DOS aplikace a jako takové jsou limitovány "8.3" jmennou konvencí 
DOSu. Proto¾e jak <tt>floppy33B.fs</tt> tak i <tt>floppy33C.fs</tt> mají 
del¹í jméno, musíte zjistit, jak vá¹ systém ukládá soubor v "8.3" formátu, 
ne¾ pou¾ijete <tt>FDIMAGE.EXE</tt> nebo 
<tt>RAWRITE.EXE</tt> pro vytvoøení bootovacích disket.

Pøíklad pou¾ití <i>rawrite</i>:
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <b>rawrite</b>
  RaWrite 1.2 - Write disk file to raw floppy diskette

  Enter source file name: <b>floppy33.fs</b>
  Enter destination drive: <b>a</b>
  Please insert a formatted diskette into drive A: and press -ENTER- : <i><b>Enter</b></i>
</pre> </td> </tr> </table>

<p>
Pøíklad pou¾ití <i>fdimage</i>:
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>fdimage -q floppy33.fs a:</strong>
</pre></td></tr></table>

<p>
Pøíklad pou¾ití <i>ntrw</i>:
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>ntrw floppy33.fs a:</strong>
  3.5", 1.44MB, 512 bytes/sector
  bufsize 
  1474560 bytes written
</pre></td></tr></table>

<a name="Boot"></a>
<h3>4.1.4 - Bootování OpenBSD instalaèních diskù.</h3>

<p>
Tato sekce je rozdìlena do jednotlivých oddílù podle jednotlivých 
architektur, které OpenBSD podporuje. Tímto zpùsobem mù¾eme správnì 
instruovat ka¾dého u¾ivatele co dìlat na jeho 
konkrétní platformì.

<h4>Bootování na i386</h4>

<p>
Bootování instalaèních disket není nic nového pro vìt¹inu u¾ivatelù. 
Máte-li disketu, jednodu¹e ji dejte do disketové mechaniky a nabootujte 
systém. Instalaèní obraz se automaticky nahraje 
( pøedpokládáme, ¾e bootování z diskety je povoleno v BIOSu). 
Pokud chcete bootovat z CD, musíte v BIOSu nastavit v sekci boot 
sequence bootování z CD. Nìkteré star¹í BIOSy tuto 
volbu nepodporují a musíte tedy pou¾ít disketu. 
Pokud pou¾ijete k nabootování disketu, je¹tì stále ale 
mù¾ete instalovat z CD-ROM.

<h4>Bootování SPARC</h4>

<p>
<b>POZNÁMKA:</b>Na sparc64, pouze SBus stroje (Ultra 1, Ultra 2) 
mají mon¾nost bootovat z diskety.

<p>
Pøi bootování z diskety umístìte diskety s OpenBSD instalaèním image 
do mechaniky. Dále pou¾ijte následující pøíkaz pro 
bootování z diskety:

<p>
<table border=0 width="800"> <tr><td nowrap bgcolor="#EEEEEE"><pre>
ok <b>boot floppy</b>
</pre></td></tr></table>

<p>
Pro start z CD-ROM dejte OpenBSD CD do CD-ROM mechaniky. 
Pokud máte pouze jedinou CD-ROM mechaniku, pak na boot promptu zadejte 
'<tt>boot cdrom</tt>':

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
ok <b>boot cdrom</b>
</pre></td></tr></table>

<p>
Toto samozøejmì bude platit jenom v novém pøíkazovém módu. Pokud jste 
ve starém pøíkazovém módu (a right arrow), napi¹te 'n' a dostanete se 
tak do nového pøíkazového módu. (Pou¾íváte-li starý sparc, tj. 
pre-sun4c, pak zøejmì nemáte nový pøíkazový mód. V tomto pøípadì 
musíte experimentovat.) Pokud máte více CD-ROM mechanik, pak musíte 
vybrat tu pravou. Zkuste <tt>probe-scsi</tt> z nového pøíkazového módu.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
ok <b>probe-scsi</b>

Target 0
Unit 0   Disk     QUANTUM LIGHTNING 365S
Target 1
Unit 0   Removable Disk     QUANTUM EMPIRE_1080S
Target 3
Unit 0   Removable Disk     Joe's CD ROMs
</pre></td></tr></table>

<p>
Poznamenejte si, který z diskù je CD-ROM ze kterého chcete bootovat. 
Zapi¹te si target number.

<p>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><pre>
ok <b>boot /sbus/esp/sd@X,0</b>
</pre></td></tr></table>

<p>

<a name="Checklist"></a>
</p><h2>4.2 - Preinstallation Checklist</h2>
Ne¾ zaènete s instalací, mìli byste mít urèitou pøedstavu, jak by 
to v¹echno mìlo vypadat.

Mìli byste mít jasno minimálnì v následujících vìcech:
<ul>
<li>Název poèítaèe
<li>Hardware, který je nainstalovaný a k dispozici
<ul>
<li>Ovìøte kompatibilitu va¹í platformy
na pøíslu¹né stránce
<li>Pokud máte ISA zaøízení, budete potøebovat jeho nastavení a ujistit se, 
¾e jsou tak, jak je OpenBSD vy¾aduje.
</ul>
<li>Jakou instalaèní metoda bude pou¾ita ( CDROM, FTP, etc.)
<li>Po¾adované rozlo¾ení disku
<ul>
<li>Potøebujete zachovat existující data ?
<li>Bude OpenBSD koexistovat s jiným OS ? Pokud ano, 
jak budou  oba startovat ? Bude nutné instalovat
"boot manager"?
<li>Bude celý disk pou¾it pro OpenBSD nebo bude tøeba poèítaè 
s existujícím (nebo budoucím) diskovým oddílem ? 
<li>Jak chcete rozdìlit OpenBSD èást va¹eho 
disku ?
</ul>
<li>Nastavení sítì, pokud nepou¾íváte DHCP:
<ul>
<li>Jméno domény
<li>Domain Name Server(s) (DNS)
<li>IP adresa a maska pro ka¾dou NIC
<li>Adresa brány
</ul>
<li>Budete pou¾ívat X windows ?
</ul>



<a name="Install"></a>
<h2>4.3 - Zaèátek instalace</h2>
<!-- XXXrelease -->
A» si pod pojmem bootování pøedstavíte cokoliv, teï je èas to udìlat.
Bìhem bootování se jádro systému a v¹echny programy, které OpenBSD 
pou¾ívá k instalaci, nahrají do pamìti. Nejèastìj¹ím problémem pøi 
bootování je vadná disketa nebo ¹patné nastavení disku. Bootovací disketa 
je velmi intenzivnì vyu¾ívána -- jakékoliv ¹patné místo zpùsobí problémy.

<p>
Témìø na jakémkoliv místì mù¾ete instalaèní proces pøeru¹it 
stisknutím CTRL-C a znovu ho spustit bez restartu poèítaèe 
pokud zadáte v promptu <tt>install</tt>.

<p>
Pokud nabootujete úspì¹nì, uvidíte jak se vypisuje spousta textových zpráv.
Tento text, na vet¹inì architektur bílý na modrém pozadí,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&sektion=8">dmesg</a>, 
vypisuje jádro systému a øíká vám, která zaøízení nalezlo a 
kde. Nic z toho si nemusíte pamatovat, proto¾e kopie bude ulo¾ena do 
<tt>/var/run/dmesg.boot</tt>. Na vìt¹inì architektur vám SHIFT+PGUP umo¾ní 
prozkoumat text, ktarý "proletìl" pøes obrazovku.

<p>
Pak uvidíte tohle:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
rootdev=0x1100 rrootdev=0x2f00 rawdev=0x2f02
erase ^?, werase ^W, kill ^U, intr ^C, status ^T
(I)nstall, (U)pgrade or (S)hell? <b>i</b>
</pre></td></tr></table>

<p>
A s tím se dostáváme k první otázce. Vìt¹inou budete mít 
mo¾nost vybrat si z tøí mo¾ností:
<ul>
<li><b>Install:</b> Instalovat OpenBSD systém, pøepsat cokoliv 
co tu bylo pøed tím. Existuje mo¾nost nedotýkat se urèitých diskových 
oddílù, jako <tt>/home</tt>, ale jinak se 
pøepí¹e v¹echno ostatní.
<li><b>Upgrade:</b> Instalace nového setu <a href="#FilesNeeded">instalaèních 
souborù</a> na tento poèítaè, ale nepøepsat ¾ádné konfigurace nebo 
instalované programy. Neprovádí se ¾ádné formátování 
disku ani se nesahá na /etc/ nebo /var. Nebude vám nabídnuta 
mo¾nost instalovat soubor <tt>etc33.tgz</tt>.
Po instalaci budete muset manuálnì slouèit zmìny v <tt>etc33.tgz</tt> 
do va¹ich konfigurací, ne¾ bude vá¹ systém plnì funkèní. 
Tento krok je velice dùle¾itý, jinak nìkteré 
klíèové slu¾by ( jako 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>) 
nemusí nastartovat.
<br>
<b>POZNÁMKA:</b> Upgrade proces zde není od toho, aby nahradit jednotlivá vydání systému ! 
Aèkoliv to bude èasto fungovat, tento postup není podporován. V OpenBSD 3.3, upgrade
z 3.2 na 3.3 je jediný podporovaný upgrade. Pokud musíte upgradovat ze star¹í 
verze, doporuèuje se kompletní reinstalace.	

<li><b>Shell:</b> Nìkdy budete muset provést opravu nebo údr¾bu systému, 
který nenabootuje ( nebo nemá nabootovat ) normální kernel.
Tato volba vám umo¾ní provést podobný zásah.
</ul>

Nìkdy neuvidíte volbu "Upgrade". Po tzv.
<a href="http://www.tuxedo.org/~esr/jargon/html/entry/flag-day.html">"flag 
day"</a>, není mo¾ný pøímý upgrade, je nutné systém pøedìlat od 
zaèátku. Pøíkladem mù¾e být OpenBSD/sparc 
platforma, kde se mezi 3.1 a 3.2 zmìnil formát spustitelných souborù z a.out na ELF 
a proto u¾ivatel upgradující na 3.2 nebo 3.3 
na Sparcu musí kompletnì nainstalovat celý systém znovu.

<p>
V tomto pøípadì budeme provádìt instalaci, nicménì upgrade je podobný.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
Welcome to the OpenBSD/i386 3.3 installation program.<br>

This program will help you install OpenBSD in a simple and rational way. At 
any prompt except password prompts you can run a shell command by typing 
'!foo', or escape to a shell by typing '!'. Default answers are shown in []'s 
and are selected by pressing RETURN. At any time you can exit this program by 
pressing Control-C and then RETURN, but quitting during an install can leave 
your system in an inconsistent state. 

Specify terminal type: [vt220]
Do you wish to select a keyboard encoding table? [n] <b>y</b>   
</pre></td></tr></table>

<p>
Ve vìt¹inì pøípadù je typ terminálù vyhovující, nicménì pokud 
pou¾íváte pro instalaci <a href="faq7.html#SerCon">konzoli na seriovém portu</a>, 
neakceptujte defaultní volbu, 
reagujte správnì.

<p>
Pokud nezvolíte jiné rozlo¾ení klávesnice, bude nastaven 
US layout. 

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
IS YOUR DATA BACKED UP? As with anything that modifies disk contents, this 
program can cause SIGNIFICANT data loss.

V¾dy je dobré mít po ruce instrukce a poznámky pro instalaci. Pro slo¾itou 
konfiguraci disku, budou vhodné manuály k hardware a kalkulaèka.


Proceed with install? [n]<b>y</b>
</pre></td></tr></table>

<p>
Pokud tady necháte defaultní volbu, instalace se ukonèí 
a ocitnete se v shellu.

<a name="Disks"></a>
<h3>4.3.1 - Nastavení diskù bìhem instalace.</h3>

<p>
Nastavení disku v OpenBSD se trochu li¹í v závislosti na platformì. 
Pro <a href="../../cs/i386.html">i386</a> a <a href="../../cs/macppc.html">macppc</a>
je nastavení disku rozdìleno do dvou fází. V první se èást disku pro OpenBSD 
definuje pomocí pøíkazu fdisk(8), potom se oddíl(slice) rozdìlí do OpenBSD 
oddílù(partitions) pou¾itím disklabel(8).

<p>
Nìkteøí u¾ivatelé mohou být mo¾ná trochu zmateni pou¾ívanou terminologií. 
Vypadá to, jako kdy¾ pou¾íváme slovo "partition" ve dvou rùzných významech.
Toto zji¹tìní je správné. Existují dvì úrovnì oddílù v rùzných OpenBSD
platformách. První mù¾e být pova¾ována za rozdìlení oddílù(partitions) 
Operaèního Systému, tj. jak si více OS na jednom poèítaèi oznaèí své 
vlastní místo na disku a druhá uroveò, jak je OpenBSD oddíl(partition) 
rozdìlena do jednotlivých filesystémù. První úroveò je viditelná jako diskový 
oddíl(partition) v DOSu, Windows nebo pro jakýkoliv OS, který mù¾e 
spoluexistovat s jiným OS na poèítaèi typu IBM AT. Druhá úroveò je 
viditelná pouze pro  ty OS, které mohou pøímo èíst OpenBSD file systém.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
Cool! Let's get to it...

You will now initialize the disk(s) that OpenBSD will use. To enable all
available security features you should configure the disk(s) to allow the
creation of separate filesystems for /, /tmp, /var, /usr, and /home.
				    
Available disks are: wd0.
Which one is the root disk? (or done) [wd0] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Root disk je disk, ze kterého vá¹ systém bude bootovat a kde je 
normálnì prostor pro swap. Normálnì ponecháte defaultní volbu -- pokud ne, 
musíte vìdìt, jak donutit poèítaè bootovat z nestandardního disku. 
IDE disky uvidíte jako <tt>wd0</tt>, <tt>wd1</tt> atd. SCSI disky a 
RAID zaøízení budou vidìt jako <tt>sd0</tt>, <tt>sd1</tt> atd. V¹echny 
disky, které OpenBSD mù¾e najít, uvidíte tady -- pokud máte disky, které 
nejsou vidìt, máte nepodporovaný nebo ¹patnì konfigurovaný hardware.

<p>
<table border="0" width="650"><tr><td nowrap="nowrap" bgcolor="#eeeeee"><pre>
Do you want to use *all* of wd0 for OpenBSD? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>	 
Pokud odpovíte na tuto otázku "yes", celý vá¹ disk se pou¾ije pro 
OpenBSD. Výsledkem bude jednoduchý Master Boot Record a tabulka 
oddílù (partition table) zapsaná na disk -- jeden oddíl, velikosti 
celého hard disku, typ OpenBSD, oznaèená jako 
bootovací oddíl. Tato volba bude be¾ná pro vìt¹inu u¾ivatelù 
OpenBSD, nicménì jsou systémy, kde je tøeba postupovat jinak. 
Spousta Compaq systémù, nìkteré DELLy a rùzné jiné systémy pou¾ívají 
"maintenance" partition, který by se mìl zachovat. Pokud má 
vá¹ systém jakýkoliv jiný oddíl jakéhokoliv typu, který nechcete smazat, 
nevolte v pøedchozí otázce "yes". 

<p>
Pro zjednodu¹ení budeme v tomto pøíkladì pøedpokládat, ¾e disk chceme 
rozdìlit mezi OpenBSD a ji¾ existující oddíl Windows 2000, tak¾e 
ponecháme defaultní "no", a dostaneme se do programu
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>. 
Více informací o fdisku(8) najdete 
<a href="faq14.html#fdisk">tady</a>.

<p>
<b>Dùle¾itá poznámka</b>
U¾ivatelé s velkým diskem (vìt¹ím ne¾ 8G na novìj¹ích i386, ale 
na star¹ích poèítaèích a jiných platformách èasto i men¹í) by si mìli 
pøeèíst <a href="../cs/faq14.html#LargeDrive">tento text</a>, 
ne¾ budou pokraèovat.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>  
  Your will now create a single MBR partition to contain your OpenBSD data. This
  partition must have an id of 'A6'; must *NOT* overlap other partitions; and
  must be marked as the only active partition.

  The 'manual' command describes all the fdisk commands in detail.

  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 06    0   1  1 -  202 239 63 [          63:     3069297 ] DOS >  32MB
   1: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  Enter 'help' for information
  fdisk: 1> <b>help</b>
 	  help            Command help list
	  manual          Show entire OpenBSD man page for fdisk
	  reinit          Re-initialize loaded MBR (to defaults)
	  setpid          Set the identifier of a given table entry
	  disk            Edit current drive stats
	  edit            Edit given table entry
	  flag            Flag given table entry as bootable
	  update          Update machine code in loaded MBR
	  select          Select extended partition table entry MBR
	  print           Print loaded MBR partition table
	  write           Write loaded MBR to disk
	  exit            Exit edit of current MBR, without saving changes
	  quit            Quit edit of current MBR, saving current changes
	  abort           Abort program without saving current changes
  fdisk: 1> 
</pre></td></tr></tbody></table>

<p>
Nìkolik pøíkazù hodných prozkoumání:
<ul>
<li><b><tt>r</tt></b> nebo <b><tt>reinit</tt>:</b> Vyma¾e existující 
tabulku oddílù (partition table), vytvoøí OpenBSD oddíl a oznaèí ho jako aktivní. 
Je to ekvivalent pro volbu "yes" v otázce <tt>use *all* of ...</tt>. 
<li><b><tt>p</tt></b> nebo <tt><b>print</tt>:</b> Zobrazí souèasnou 
tabulku oddílù, jednotkou jsou sektory. "<tt>p m</tt>" zobrazí tabulku 
oddílù v megabytech, "<tt>p g</tt>" zobrazí toté¾ v gigabytech. 
<li><b><tt>e</tt></b> nebo <b><tt>edit:</tt></b> editace nebo-li zmìna záznamu 
v tabulce.
<li><b><tt>f</tt></b> nebo <b><tt>flag:</tt></b> Oznaèí oddíl jako 
aktivní oddíl, ten, ze kterého se bude bootovat.
<li><b><tt>exit</tt></b> a <b><tt>quit:</tt></b> Tady pozor, proto¾e 
nìkteøí u¾ivatelé jsou zvyklý ¾e "exit" a "quit" mejí opaèné významy.
</ul>

Je dobré si je¹tì jednou pøipomenout, ¾e chyba v této fázi bude mít 
za následek ztrátu dat. Pokud tohle budete provádìt na disku, kde 
jsou dùle¾itá data, nebylo by od vìci si v¹echno vyzkou¹et na náhradním disku, 
jako doplnìk k záloze dat.

<p>
Ná¹ systém má 1.5G oddíl pro Windows 2000 ( pou¾ívá FAT 
filesystém). Pohledem na informace, které jsme dostali nahoøe vidíme, ¾e 
oddíl pro Windows zabírá disk do cylindru 202. 
Tak¾e, zabereme zbytek disku pro OpenBSD poèínaje 
cylindrem 203. Mù¾ete si také spoèítat, ¾e sektor, na kterém bude OpenBSD 
zaèínat je 3069360 pøiètením startovacího sektoru(63) a velikosti 
existujícího oddílu(3069297).

<p>
Mù¾ete editovat rozlo¾ení disku v módu Cylinder/Heads/Sectors 
nebo pouze v sektorech. Co je jednodu¹¹í zále¾í na tom, co 
právì dìláte, v tomto pøípadì, s existujícím oddílem, bude 
práce v módu CHS jednodu¹¹í.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>  
  fdisk: 1> <b>e 1</b>
  	   Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
   1: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>a6</b>
  Do you wish to edit in CHS mode? [n] <b>y</b>
  BIOS Starting cylinder [0 - 2585]: [0] <b>203</b>
  BIOS Starting head [0 - 239]: [0] <b><i>Enter</i></b>
  BIOS Starting sector [1 - 63]: [0] <b>1</b>
  BIOS Ending cylinder [0 - 2585]: [0] <b>2585</b>
  BIOS Ending head [0 - 239]: [0] <b>239</b>
  BIOS Ending sector [1 - 63]: [0] <b>63</b>
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
  	   Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 06    0   1  1 -  202 239 63 [          63:     3069297 ] DOS >  32MB
   1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  fdisk:*1> <b>p m</b>
  Disk: wd0       geometry: 2586/240/63 [19092 Megabytes]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 06    0   1  1 -  202 239 63 [          63:        1499M] DOS > 32MB
   1: A6  203   0  1 - 2585 239 63 [     3069360:       17593M] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0M] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0M] unused
  fdisk:*1> 
</pre></td></tr></table>

<p>
V¹imnìte si, ¾e se zmìnila pøíkazová øádka, zahrnuje teï hvìzdièku ('<tt>*</tt>'), 
èím¾ indikuje, ¾e máme neulo¾ené zmìny. Jak mù¾eme vidìt z výstupu 
<tt>p m</tt> nijak jsme se nedotkli oddílu s Windows a úspì¹nì jsme 
alokovali zbytek disku pro OpenBSD, oddíly se nijak nepøekrývají.
A u¾ to máme. Skoro.

<p>
Co nám je¹tì chybí je oznaèit oddíl jako aktivní, aby nám 
poèítaè nabootoval OpenBSD pøi pøístím restartu:

<p>
<table border="0" width="650"><tbody><tr><td nowrap="nowrap" bgcolor="#eeeeee"><pre>  
  fdisk:*1> <b>f 1</b>
  Partition 1 marked active.
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
   0: 06    0   1  1 -  202 239 63 [          63:     3069297 ] DOS &gt; 32MB
  *1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  fdisk:*1>
</pre></td></tr></table>

<p>
A teï mù¾eme na¹e zmìny ulo¾it:

<p>
<table border="0" width="650"><tbody><tr><td nowrap="nowrap" bgcolor="#eeeeee"><pre>  
  fdisk:*1> <b>w</b>
  Writing MBR at offset 0.
  wd0: no disk label
  fdisk: 1> <b>q</b>
</pre></td></tr></table> 

<p>

<a name="disklabel"></a>
<h3>Vytvoøení disklabel</h3>
Dal¹ím krokem je pou¾ití
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
pro rozdìlení OpenBSD oddílu. Více detailù o pou¾ívání disklabel(8)
mù¾ete najít v 
<a href="../cs/faq14.html#disklabel">FAQ 14, disklabel</a>.

<p>
<table border="0" width="650"><tr><td nowrap="nowrap" bgcolor="#eeeeee"><pre>
  Here is the partition information you chose:
  
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 06    0   1  1 -  202 239 63 [          63:     3069297 ] DOS > 32MB
   1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused

  You will now create an OpenBSD disklabel inside the OpenBSD MBR
  partition. The disklabel defines how OpenBSD splits up the MBR partition
  into OpenBSD partitions in which filesystems and swap space are created.

  The offsets used in the disklabel are ABSOLUTE, i.e. relative to the
  start of the disk, NOT the start of the OpenBSD MBR partition.

  disklabel: no disk label
  WARNING: Disk wd0 has no label. You will be creating a new one.
  
  # using MBR partition 1: type A6 off 3069360 (0x2ed5b0) size 36030960 (0x225c9f0)

  Treating sectors 3069360-39100320 as the OpenBSD portion of the disk.
  You can use the 'b' command to change this.

  Initial label editor (enter '?' for help at any prompt)
  > <b>?</b>
  Available commands:
          p [unit]  - print label.
          M         - show entire OpenBSD man page for disklabel.
          e         - edit drive parameters.
          a [part]  - add new partition.
          b         - set OpenBSD disk boundaries.
          c [part]  - change partition size.
          d [part]  - delete partition.
          D         - set label to default.
          g [d|b]   - Use [d]isk or [b]ios geometry.
          m [part]  - modify existing partition.
          n [part]  - set the mount point for a partition.
          r         - recalculate free space.
          u         - undo last change.
          s [path]  - save label to file.
          w         - write label to disk.
          q         - quit and save changes.
          x         - exit without saving changes.
          X         - toggle expert mode.
          z         - zero out partition table.
          ? [cmnd]  - this message or command specific help.
  Numeric parameters may use suffixes to indicate units:
          'b' for bytes, 'c' for cylinders, 'k' for kilobytes, 'm' for megabytes,
          'g' for gigabytes or no suffix for sectors (usually 512 bytes).
          Non-sector units will be rounded to the nearest cylinder.
  Entering '?' at most prompts will give you (simple) context sensitive help.
  > 
</pre></td></tr></table>

<p>
Opìt, podíváme se podrobnìji na tyto pøíkazy:
<ul>
<li><b><tt>p</tt></b> - Zobrazí (prints) souèasný disklabel na   
obrazovku, pøièem¾ mù¾ete pou¾ít modifikátory<tt>k, m</tt> nebo <tt>g</tt> pro
kilobyty, megabyty a nebo  gigabyty.

<li><b><tt>D</tt></b> - Vyma¾e existující disklabel, vytvoøí novou  
defaultní disklabel, který bude pokrývat pouze souèasný OpenBSD oddíl. Tato 
operace mù¾e být u¾iteèná pokud disk døíve ji¾ mìl disklabel a  
OpenBSD oddíly byly vytvoøeny znovu s jinou velikostí -- starý disklabel 
nebyl vymazán a mù¾e zpùsobit problémy.

<li><b><tt>m</tt></b> - Modifikuje existující záznam v disklabel. 
Nepøeceòujte, co pro vás mù¾e tenhle pøíkaz udìlat. Zatímco mù¾e zmìnit 
velikost disklabelu, neznmìní filesystém na disku. 
Pokud pou¾ijete tuto volbu a budete pøedpokládat, ¾e se zároveò zmìní velikost, 
tak jste na dobré cestì ztratit velké mno¾ství dat.

</ul>

<p>
Správné rozdìlení diskových oddílù je dùle¾ité. Odpovìdí na otázku 
"Jak mám vytvoøit oddíly na mém systému?" je "Pøesnì tak, jak to potøebujete". To 
se bude samozøejmì li¹it od aplikace k aplikaci. Neexistuje ¾ádná 
universální odpovìï. Pokud si nejste jistí, jak rozdìlit svùj systém, podívejte se na 
<a href="#SpaceNeeded">tuto diskusi</a>.
 
<p>
V tomto systému máme pøes 17G k dispozici pro OpenBSD. To je hodnì místa 
a není pravdìpodobné, ¾e budeme potøebovat vìt¹inu tohoto místa. Tak¾e teï 
nebudeme pou¾ívat absolutnì minimální mo¾né místo. Rad¹i budeme mít 
pár nevyu¾itých megabytù ne¾ kdyby nám chybìlo kilobyt místa.

<p>
Na root disku, <b>musíme</b> vytvoøit dva oddíly 'a' a 'b'. 
Instalace nebude pokraèovat dokud nebudou k dispozici tyto 
dva oddíly. 'a' bude pou¾ito jako root filesystém (/) a 'b' 
bude slou¾it jako swap.

<p>
Po chvilce uva¾ování jsme se rozhodli vytvoøit nìkolik dal¹ích 
oddìlených oddílù (<tt>/, /tmp, 
/var, /usr, /home</tt>) spolu s oddílem pro swap: 
<ul>
<li><i><b>wd0a: /</b></i> (root) - 150M. To by mìlo být víc ne¾ dost.
<li><i><b>wd0b: </b></i>(swap) - 300M.
<li><i><b>wd0d: /tmp</b></i> - 120M. <tt>/tmp</tt> se pou¾ívá pro napø. 
kompilaci software, 120M bude pravdìpodobnì staèit pro vìt¹inu vìcí.
<li><i><b>wd0e: /var</b></i> - 80M. Pokud by to byl web nebo mail 
server, udìlali bychom tento oddíl mnohem vìt¹í, ale to 
není ná¹ pøípad.
<li><i><b>wd0g: /usr</b></i> - 2G. Tento chceme oddíl dostateènì 
veliký, abychom mohli pou¾ívat vìt¹í mno¾ství aplikací, plus chceme mít 
mo¾nost pøekompilovat systém pokud bude tøeba. 
<a href="../cs/ports.html">Strom portù</a>(ports tree) bude také tady, co¾ 
zabere skoro 100M je¹tì pøed instalací portù samotných.
<li><i><b>wd0h: /home</b></i> - 4G. Co¾ nám dá k dispozici spoustu 
místa pro na¹e úèely.
</ul>

Teï, kdy¾ jste to v¹echno pøidali, uvidíte ¾e pøes 10G místa je nevyu¾ito!
Nevyu¾ité místo nièemu neublí¾í a navíc nám to dá mo¾nost zvìt¹it oddíly 
pokud bude tøeba. Potøebujete vìt¹í <i>/tmp</i>? ®ádný problém, 
vytvoøte nový oddíl v nevyu¾itém místì, zmìòte <i>/etc/fstab</i> a 
problém je vyøe¹en.

<p>
<table border="0" width="650"><tr><td nowrap="nowrap" bgcolor="#eeeeee"><pre>
  > <b>p m</b>
  device: /dev/rwd0c
  type: ESDI
  disk: ESDI/IDE disk
  label: ST320011A
  bytes/sector: 512
  sectors/track: 63
  tracks/cylinder: 16
  sectors/cylinder: 1008
  cylinders: 16383
  total sectors: 39102336
  free sectors: 36030960
  rpm: 3600
  
  16 partitions:
  #        size   offset    fstype   [fsize bsize   cpg]
    a: 17593.2M  1498.7M    unused        0     0
    c: 19092.9M     0.0M    unused        0     0
    i:  1498.7M     0.0M     MSDOS
  > <b>d a</b>
  > <b>a a</b>
  offset: [3069360] <b><i>Enter</i></b>
  size: [36030960] <b>150M</b>
  Rounding to nearest cylinder: 307440
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/</b>
  &gt; <b>a b</b>
  offset: [3376800] <b><i>Enter</i></b>
  size: [35723520] <b>300M</b>
  Rounding to nearest cylinder: 614880
  FS type: [swap] <b><i>Enter</i></b>
  &gt; <b>a d</b>
  offset: [3991680] <b><i>Enter</i></b>
  size: [35108640] <b>120m</b>
  Rounding to nearest cylinder: 245952
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/tmp</b>
  &gt; <b>a e</b>
  offset: [4237632] <b><i>Enter</i></b>
  size: [34862688] <b>80m</b>
  Rounding to nearest cylinder: 164304
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/var</b>
  &gt; <b>a g</b>
  offset: [4401936] <b><i>Enter</i></b>
  size: [34698384] <b>2g</b>
  Rounding to nearest cylinder: 4194288
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr</b>
  &gt; <b>a h</b>
  offset: [8596224] <b><i>Enter</i></b>
  size: [30504096] <b>4g</b>
  Rounding to nearest cylinder: 8388576
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/home</b>
  &gt; <b>p m</b>
  device: /dev/rwd0c
  type: ESDI
  disk: ESDI/IDE disk
  label: ST320011A
  bytes/sector: 512
  sectors/track: 63
  tracks/cylinder: 16
  sectors/cylinder: 1008
  cylinders: 16383
  total sectors: 39102336
  free sectors: 22115520
  rpm: 3600
  
  16 partitions:
  #        size   offset    fstype   [fsize bsize   cpg]
    a:   150.1M  1498.7M    4.2BSD     1024  8192    16  # /
    b:   300.2M  1648.8M      swap
    c: 19092.9M     0.0M    unused        0     0
    d:   120.1M  1949.1M    4.2BSD     1024  8192    16  # /tmp
    e:    80.2M  2069.2M    4.2BSD     1024  8192    16  # /var
    g:  2048.0M  2149.4M    4.2BSD     1024  8192    16  # /usr
    h:  4096.0M  4197.4M    4.2BSD     1024  8192    16  # /home
    i:  1498.7M     0.0M     MSDOS
  &gt; <b>q</b>
  Write new label?: [y] <b><i>Enter</i></b>
</pre></td></tr></tbody></table>

<p>
V¹imnìte si, ¾e existuje <i>c</i> oddíl, který jakobychom ignorovali. Tento 
oddíl je vá¹ celý hard disk, nesna¾te se ho mìnit. Také si 
v¹imnìte ¾e oddíl <i>i</i> jsme nedefinovali mi, to je ji¾ 
existující oddíl Windows 2000. Oddíly nedostávají ¾ádné specifické písmeno -- s vyjímkou 
<i>a</i> (root), <i>b</i> (swap) a <i>c</i> (celý disk) je vám zbytek oddílù 
(a¾ do písmene <i>p</i>) k dispozici jak si jen 
pøejete.

<p>
Kdy¾ se blí¾e podíváte na výstup z disklabel, v¹imnete si, ¾e 
RPM va¹eho disku je pravdìpodobnì ¹patnì. To z historických dùvodù, 
rychlost disku není nikde v systému nijak pou¾ívána, tak¾e si s tím 
nedìlejte starosti.

<h3>Konfigurace pøípojení a formátování va¹eho filesystému</h3>

Teï pøichází finální nastavení va¹eho filesystému. Pokud jste pøipojení filesystémù 
konfigurovali pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>, 
tento krok je pouze ovìøení 
va¹í volby, jinak je mo¾né provést specifikaci teï.

<p>
<table border="0" width="650"><tr><td nowrap="nowrap" bgcolor="#eeeeee"><pre>
  The root filesystem will be mounted on wd0a.
  wd0b will be used for swap space.
  Mount point for wd0d (size=122976k), none or done? [/tmp] <b><i>Enter</i></b>
  Mount point for wd0e (size=82152k), none or done? [/var] <b><i>Enter</i></b>
  Mount point for wd0g (size=2097144k), none or done? [/usr] <b><i>Enter</i></b>
  Mount point for wd0h (size=4194288k), none or done? [/home] <b><i>Enter</i></b>
  Mount point for wd0d (size=122976k), none or done? [/tmp] <b>done</b>
  Done - no available disks found.
 
  You have configured the following partitions and mount points:

  wd0a /
  wd0d /tmp
  wd0e /var
  wd0g /usr
  wd0h /home

  The next step creates a filesystem on each partition, ERASING existing data.
  Are you really sure that you're ready to proceed? [n] y
  /dev/rwd0a:     307440 sectors in 305 cylinders of 16 tracks, 63 sectors
          150.1MB in 20 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
  /dev/rwd0d:     245952 sectors in 244 cylinders of 16 tracks, 63 sectors
          120.1MB in 16 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
  /dev/rwd0e:     164304 sectors in 163 cylinders of 16 tracks, 63 sectors
          80.2MB in 11 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
  /dev/rwd0g:     4194288 sectors in 4161 cylinders of 16 tracks, 63 sectors
          2048.0MB in 261 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
  /dev/rwd0h:     8388576 sectors in 8322 cylinders of 16 tracks, 63 sectors
          4096.0MB in 521 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local, ctime=Thu Oct 10 21:
  50:36 2 002)
  /dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid,
   ctime=Thu Oct 10 21:50:36 2002)
  /dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid, 
  ctime=Thu Oct 10 21:50:36 2002)
  /dev/wd0g on /mnt/usr type ffs (rw, asynchronous, local, nodev, ctime=Th
  u Oct 10 21:50:36 2002)
  /dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid, 
  ctime=Th u Oct 10 21:50:36 2002)
</pre></td></tr></table>

<p>
Mù¾ete se divit, proè se instalaèní program znovu ptá jak pøipojit filesystémy. 
Máte tak mo¾nost opravit chyby nebo pøeklepy pøi 
tvorbì filesystémù v programu disklabel. Napøíklad 
instalaèní program automaticky sma¾e jakýkoukoliv duplikovaný záznam, 
kterého jste se dopustili bìhem konfigurace v programu disklabel. Program 
disklabel vám umo¾ní zadat duplikace a proto musí být 
konfigurace zkontrolována po ukonèení programu disklabel. Smazané duplikované 
pøípojné body skonèí jako oddíly bez pøípojného bodu, 
tak¾e jim musíte pøiøadit nový pøípojný bod, pokud chcete 
jejich místo vyu¾ít.

<p> 
V¹imnìte si, ¾e defaultní odpovìï na "Are you really sure that you are ready 
to proceed?" je ne, tak¾e musíte úmyslnì øíct, ¾e chcete pokraèovat 
a formátovat va¹e diskové oddíly. Pokud zvolíte "no", jednodu¹e 
zkonèíte v shellu a mù¾ete instalaci spustit znovu napsáním "install" nebo 
znovu restartovat s pomocí boot disku.

<p>
Teï budou v¹echny va¹e diskové oddíly zformátovány. To mù¾e zabrat 
nìjaký èas, v závislosti na velikosti oddílù a na rychlosti 
disku.

<a name="Hostname"></a>
<h3>4.3.2 - Nastavení hostname</h3>
<p>
Teï musíte nastavit jméno va¹eho systému - hostname. Tento údaj bude ulo¾en 
v souboru <tt>/etc/myname</tt>, je¾ je normálnì vyu¾it pøi bootování pro nastavení hostname 
systému. Od verze 0penBSD 3.2 jméno v <tt>/etc/myname</tt> obsahuje 
celé jméno systému vèetnì domény (FQDN). Pokud nenastavíte FQDN systému, 
pou¾ije se defaultnì 'my.domain'.


<p>
Je dùle¾ité nastavit toto jméno hned teï, proto¾e se pou¾ije pøi 
generovaní kryptografických klíèù bìhem prvního startu 
po instalaci. Generování klíèù probìhne a» u¾ je sí» nakonfigurována 
nebo ne.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Enter system hostname (short form, e.g. 'foo'): <b>puffy</b>
</pre></td></tr></table>

<a name="Network"></a>  
<h3>4.3.3 - Nastavení sítì</h3>

<p>
Nyní je èas provést nastavení va¹í sítì. Sí» musí být 
konfigurována pokud plánujete instalovat pøes ftp nebo nfs, vzhledem 
k tomu, ¾e to bude provedeno na základì údajù, které teï zadáte. 
Následuje prùvodce skrze konfiguraci sí»ì instalaèního 
procesu.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Configure the network? [y] <b><i>Enter</i></b>
  Available interfaces are: fxp0.
  Which one do you wish to initialize? (or 'done') [fxp0] <b><i>Enter</i></b>
  Symbolic (host) name for fxp0? [puffy] <b><i>Enter</i></b>
  The default media for fxp0 is
          media: Ethernet autoselect (100baseTX full-duplex)
  Do you want to change the default media? [n] <b><i>Enter</i></b>
  IP address for fxp0? (or 'dhcp') <b>199.185.137.55</b>
  Netmask? [255.255.255.0] <b><i>Enter</i></b>
  Done - no available interfaces found.
  DNS domain name? (e.g. 'bar.com') [my.domain] <b>example.com</b>
  DNS nameserver? (IP address or 'none') [none] <b>199.185.137.1</b>
  Use the nameserver now? [y] <b><i>Enter</i></b>
  Default route? (IP address, 'dhcp' or 'none') <b>199.185.137.128</b>
  add net default: gateway 199.185.137.128
  Edit hosts with ed? [n] <b><i>Enter</i></b> 
  Do you want to do any manual network configuration? [n] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
V pøíkladì jsme pou¾ili statickou IP adresu. Jak u¾ bylo naznaèeno, 
mù¾ete ale také na vet¹inì platforem pou¾ít "<tt>dhcp</tt>" (ne 
na platformì <a href="../alpha.html">Alpha</a>), pokud je ve va¹í síti 
k dispozici. V tom pøípadì budou v¹echny po¾adované informace získány 
ze vzdáleného DHCP serveru, av¹ak budete mít ¹anci údaje 
potvrdit. Následuje ukázka konfigurace sítì bìhem instalace, tentokrát 
pomocí DHCP:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Configure the network? [y] <b><i>Enter</i></b>
  Available interfaces are: fxp0.
  Which one do you wish to initialize? (or 'done') [fxp0] <b><i>Enter</i></b>
  Symbolic (host) name for fxp0? [puffy] <b><i>Enter</i></b>
  The default media for fxp0 is
          media: Ethernet autoselect (100baseTX full-duplex)
  Do you want to change the default media? [n] <b><i>Enter</i></b>
  IP address for fxp0? (or 'dhcp') <b>dhcp</b>
  Issuing hostname-associated DHCP request for fxp0.
  Internet Software Consortium DHCP Client 2.0pl5-OpenBSD
  Listening on BPF/fxp0/00:08:c7:77:b4:6b
  Sending on   BPF/fxp0/00:08:c7:77:b4:6b
  Sending on   Socket/fallback/fallback-net
  DHCPDISCOVER on fxp0 to 255.255.255.255 port 67 interval 1
  DHCPOFFER from 199.185.137.128
  DHCPREQUEST on fxp0 to 255.255.255.255 port 67
  DHCPACK from 199.185.137.128 
  New Network Number: 199.185.137.0
  New Broadcast Address: 199.185.137.255
  bound to 199.185.137.55 -- renewal in 43200 seconds.
  Done - no available interfaces found.
  DNS domain name? (e.g. 'bar.com') [example.org] <b><i>Enter</i></b>
  DNS nameserver? (IP address or 'none') [199.185.137.1] <b><i>Enter</i></b>
  Use the nameserver now? [y] <b><i>Enter</i></b>
  Default route? (IP address, 'dhcp' or 'none') [199.185.137.128] <b><i>Enter</i></b>
  add net default: gateway 199.185.137.128
  Edit hosts with ed? [n] <b><i>Enter</i></b>
  Do you want to do any manual network configuration? [n] <b><i>Enter</i></b>
</pre></td></tr></table>
<p>
<b>POZNÁMKA </b>Pouze <b>jedno</b> rozhraní je mo¾né konfigurovat 
pomocí DHCP bìhem instalace. Pokud budete chtít konfigurovat pomocí 
DHCP více ne¾ jedno rozhraní, setkáte se chybou. Budete muset 
dal¹í rozhraní nakonfigurovat po instalaci manuálnì.

<p>
Nyní nastavíme heslo pro úèet root:
<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
Password for root account? (will not echo) <b><i>pAssWOrd</i></b>
Password for root account? (again) <b><i>pAssWOrd</i></b>
</pre></td></tr></table>
<p>
Pou¾ijte bezpeèné heslo pro úèet root. A¾ systém nabootuje, 
vytvoøíte dal¹í úèty pro u¾ivatele. Man  
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=1">passwd(1)</a>:
<pre>
    The new password should be at least six characters long and not purely
    alphabetic.  Its total length must be less than _PASSWORD_LEN (currently
    128 characters).  A mixture of both lower and uppercase letters, numbers,
    and meta-characters is encouraged.
</pre>

<a name="InstMedia"></a> 
<h3>4.3.4 - Výbìr instalaèního média</h3>

<p>
Poté co je va¹e sí» nastavena, instalaèní skript vám umo¾ní manuálnì provést 
je¹tì dodateèné zmìny v jejím nastavení. Poté jsou pøipojeny filesystémy, 
které jste vytvoøili a je nastaveni heslo superu¾ivatele. Nyní jsou 
lokální disky pøipraveny pro nainstalování OpenBSD balíkù.

<p>
Dále máte mo¾nost volby instalaèního média. 
Volby jsou následující.

<p>
<table border="0" width="650"><tr><td nowrap="nowrap" bgcolor="#eeeeee"><pre>
  You will now specify the location and names of the install sets you want to
  load. You will be able to repeat this step until all of your sets have been
  successfully loaded. If you are not sure what sets to install, refer to the
  installation notes for details on the contents of each.
 
  Sets can be located on a (m)ounted filesystem; a (c)drom, (d)isk or (t)ape
  device; or a (f)tp, (n)fs or (h)ttp server.
  Where are the install sets you want to use? <b>c</b>
  Available CD-ROMs are: cd0.
</pre></td></tr></table>

<p>
V tomto pøípadì instalujeme z CD-DROM. Tak¾e dostaneme seznam 
zaøízení na na¹em poèítaèi identifikovaných jako CD-ROM. Vet¹ina lidí 
bude mít pouze jedno. Pokud nejste jedním z nich, ujistìte se, ¾e zvolíte 
zaøízení, ze kterého se bude OpenBSD instalovat.

<p>
<b>POZNÁMKA: </b>Jsou zobrazeny v¹echny mo¾nosti odkud instalovat, 
ale ne v¹echny mohou být k dispozici na va¹em systému. Tj. (n)fs je zobrazeno, ale 
ne v¹echny platformy podporují NFS instalaci. Pokud zvolíte mo¾nost 
která není k dispozici, dostanete chybu a budete mít mo¾nost 
zvolit jiný zdroj pro va¹í instalaci.

<p>
<table border="0" width="650"><tr><td nowrap="nowrap" bgcolor="#eeeeee"><pre>
  Available CD-ROMs are: cd0.
  Which one contains the install media? (or 'done') [cd0] <b><i>Enter</i></b>

  Pathname to the sets? (or 'done') [3.3/i386] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Tady jste dotázání v kterém adresáøi ¾e se nachází instalaèní soubory, 
co¾ je na oficiálním CDROM <tt>3.3/i386</tt>. 

<a name="Filesets"></a>
<h3>4.3.5 - Výbìr instalaèních balíkù.</h3>

<p>
Nyní je naèase vybrat balíky, které budete instalovat. Popis tìchto 
instalaèních souborù je v <a href="#FilesNeeded">dal¹í sekci</a>. 
Soubory, které nalezne instalaèní program se vypí¹ou na 
obrazovku. Va¹ím úkolem je vybrat souèásti, které chcete nainstalovat. 
Normálnì jsou oznaèeny pouze 4 balíky, nesouvisející s X, nicménì pokud nìkdo 
chce naprosté minimum potøebné k bìhu OpenBSD, vybere pouze 
<tt>base33.tar.gz</tt>, <tt>etc33.tar.gz</tt> a <tt>bsd</tt>. 
Ostatní si mo¾ná zvolí v¹echny balíky. Následuje pøíklad plné 
instalace.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
 The following sets are available. Enter filename, `all' to select 
 all sets, or `done'. You may de-select a set by prepending a '-' 
 to its name.

          [X] bsd
          [ ] bsd.rd
          [X] base33.tgz
          [X] etc33.tgz
          [X] misc33.tgz
          [X] comp33.tgz
          [X] man33.tgz
          [X] game33.tgz
          [ ] xbase33.tgz
          [ ] xshare33.tgz
          [ ] xfont33.tgz
          [ ] xserv33.tgz

  File Name? (or 'done') [bsd.rd] <b>all</b>

  The following sets are available. Enter a filename, 'all' to select
  all the sets, or 'done'. You may de-select a set by prepending a '-'
  to its name.

          [X] bsd
          [X] bsd.rd
          [X] base33.tgz
          [X] etc33.tgz
          [X] misc33.tgz
          [X] comp33.tgz
          [X] man33.tgz
          [X] game33.tgz
          [X] xbase33.tgz
          [X] xshare33.tgz
          [X] xfont33.tgz
          [X] xserv33.tgz
</pre></td></tr></table>

<p>
Tady mù¾ete dìlat celou øadu vychytávek -- <tt>-x*</tt> odstraní 
v¹echny X komponenty, pokud zmìníte názor. V tomto pøípadì nahrajeme 
v¹echny balíky. Aèkoliv systém bude bì¾et s men¹ím výbìrem, je doporuèován 
defaultní výbìr.
Více informací najdete <a href="#FilesNeeded">tady</a>.

<p>
Nyní kdy¾ jste úspì¹nì vybrali balíky, které chcete, budete dotázáni, 
zda jste si jisti, ¾e chcete balíky nainstalovat a ty se poté nainstalují. 
Uká¾e se ukazatel, který vás bude informovat, jak dlouho bude instalace 
trvat. Èasový rozsah závisí na systému, na který OpenBSD instalujete, 
na volbì balíkù a na rychlosti instalaèního média.
Tato èást mù¾e trvat pár minut nebo také nìkolik 
hodin.

<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  File Name? (or 'done') [done] <b><i>Enter</i></b>
  Ready to install sets? [y] <b><i>Enter</i></b>
  Getting bsd ...
  100% |**************************************************|  4472 KB    00:03
  Getting bsd.rd ...
  100% |**************************************************|  4190 KB    00:02
  Getting base33.tgz ...
  100% |**************************************************| 30255 KB    00:21
  Getting etc33.tgz ...
  100% |**************************************************|  1469 KB    00:01
  Getting misc33.tgz ...
  100% |**************************************************|  1828 KB    00:01
  Getting comp33.tgz ...
  100% |**************************************************| 16207 KB    00:13
  Getting man33.tgz ...
  100% |**************************************************|  5921 KB    00:04
  Getting game33.tgz ...
  100% |**************************************************|  2545 KB    00:01
  Getting xbase33.tgz ...
  100% |**************************************************|  9073 KB    00:06
  Getting xshare33.tgz ...
  100% |**************************************************|  1574 KB    00:02
  Getting xfont33.tgz ...
  100% |**************************************************| 30666 KB    00:21
  Getting xserv33.tgz ...
  100% |**************************************************| 14948 KB    00:11

  Sets can be located on a (m)ounted filesystem; a (c)drom, (d)isk or (t)ape
  device; or a (f)tp, (n)fs or (h)ttp server.
  Where are the install sets? (or 'done')
</pre></td></tr></table>

V tomto místì mù¾ete nahrát dal¹í soubory z jiných zdrojù, 
pokud je to potøeba, nebo zadat '<tt>done</tt>' pokud jste nainstalovali
v¹echno co chcete.

<p>
Pokud má vá¹ systém málo RAM (ménì ne¾ 20M na i386), je¹te
nemaèkejte ENTER !

<a name="SmallRAM"></a>
<h3>4.3.6 - Speciální kroky pro stroje s nedostatkem RAM</h3>
Jak roste OpenBSD, rostou také minimální nároky na RAM, a pravdìpodobnì 
je¹tì porostou. Dal¹í krok instalaèního procesu bude potøebovat více 
ne¾ 16M RAM a nepovede se na star¹ích strojích kde je ménì ne¾ 
20M RAM (opìt, tyto údaje se vztahují k i386 -- jiné platformy 
budou potøebovat mnohem ménì RAM, ale tento trik mù¾ete pou¾ít i na 
nì, pokud se dostanou blízko svých limitù).

<p>
Bìhem instalaèního procesu není pou¾íván swap, reálná RAM je 
v¹echno co máte. 'MAKEDEV', který bude následovat, bude potøebovat víc 
ne¾ zbytek instalace. Proto¾e systém s malou RAM mù¾e být stále velmi pou¾itelný 
pro mnoho aplikací, vyøe¹ení tohoto problému je 
velmi u¾iteèný trik.

<p>
øe¹ením je aktivovat swap hned teï. Swap oddíl byl vytvoøen 
a soubory jsou na disku, tak¾e jediné co potøebujeme je manuálnì 
swap aktivovat. Tak¾e, nedávejte '<tt>done</tt>', ale místo toho 
stisknìte '!', který vás pøepne do shellu a spus»te 
<a href="http://www.openbsd.org/cg-bin/man.cgi?query=swapon&amp;sektion=8">swapon</a>
z pøipojeného oddílu na harddisku:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Where are the install sets? (or 'done') <b>!</b>
  Type 'exit' to return to install.
  # <b>/mnt/sbin/swapon /dev/wd0b</b>
  # <b>exit</b>
  Where are the install sets? (or 'done') <b>done</b>
</pre></td></tr></table>

<p>
Teï se mù¾eme vrátit k normální instalaci.

<a name="Finish"></a>
<h3>4.3.7 - Zakonèení</h3>

Teï bude následovat otázka, jestli planujete provozovat X na va¹em systému. Pokud 
odpovíte 'Y', <tt>/etc/sysctl.conf</tt> bude zmìnìno tak, ¾e bude obsahovat øádku 
<tt>matchdep.allowaperture=1</tt> nebo <tt>mach.allowaperture=2</tt>, 
v závisloti na va¹í platformì.

<p>
Vá¹ poslední úkol je zadat èasové pásmo. V závislosti na tom, kde ¾ije vá¹ 
poèítaè, existuje nìkolik rovnocenných platných odpovìdí na tuto 
otázku. V následujícím pøíkladì jsme pou¾ili <tt>US/Eastern</tt>, ale 
mù¾eme také pou¾ít <tT>EST5EDT</tt> neo <tt>US/Michigan</tt> a dostaneme 
stejný výsledek. Volba <tt>?</tt> v pøíkazovém øádku vás provede 
zkrz volby.

<p>
<table border="0" width="650"><tr><td nowrap="nowrap" bgcolor="#eeeeee"><pre>
  Extract more sets? [n] <b><i>Enter</i></b>
  Do you expect to run the X Window System? [y] <b>y</b>
  Saving configuration files......done.
  Generating initial host.random file ......done.
  What timezone are you in? ('?' for list) [US/Pacific] <b>?</b>
  Africa/      Chile/       GB-Eire      Israel       NZ-CHAT      Turkey
  America/     Cuba         GMT          Jamaica      Navajo       UCT
  Antarctica/  EET          GMT+0        Japan        PRC          US/
  Arctic/      EST          GMT-0        Kwajalein    PST8PDT      UTC
  Asia/        EST5EDT      GMT0         Libya        Pacific/     Universal
  Atlantic/    Egypt        Greenwich    MET          Poland       W-SU
  Australia/   Eire         HST          MST          Portugal     WET
  Brazil/      Etc/         Hongkong     MST7MDT      ROC          Zulu
  CET          Europe/      Iceland      Mexico/      ROK          posix/
  CST6CDT      Factory      Indian/      Mideast/     Singapore    posixrules
  Canada/      GB           Iran         NZ           SystemV/     right/
  What timezone are you in? ('?' for list) [US/Pacific] <b>US</b>
  Select a sub-timezone of 'US' ('?' for list): <b>?</b>
  Alaska          Central         Hawaii          Mountain        Samoa
  Aleutian        East-Indiana    Indiana-Starke  Pacific
  Arizona         Eastern         Michigan        Pacific-New
  Select a sub-timezone of 'US' ('?' for list): <b>Eastern</b>
  Setting local timezone to 'US/Eastern'...done.
</pre></td></tr></table>

Pokud máte zájem o velmi pøesný èas, pøeètìte si 
<a href="faq8.html#NTPerror">toto</a>.

<p>
Posledním krokem je vytvoøení adresáøe <tt>/dev</tt>, co¾ udìlá systém 
(a co¾ mù¾e chvilku trvat, speciálnì pokud jste museli pou¾ít 
<a href="#SmallRAM">trik </a>pøi nedostatku RAM a instalace 
boot bloku.

<p>
<table border="0" width="650"><tr><td nowrap="nowrap" bgcolor="#eeeeee"><pre>
  Making all device nodes...done.
  Installing boot block...
  boot: /mnt/boot
  proto: /usr/mdec/biosboot
  device: /dev/rwd0c
  /usr/mdec/biosboot: entry point 0
  proto bootblock size 512
  room for 12 filesystem blocks at 0x16f
  Will load 7 blocks of size 8192 each.
  Using disk geometry of 63 sectors and 240 heads.
   0:  9 @(203 150 55) (3078864-3078872)
   1: 63 @(203 151 1) (3078873-3078935)
   2: 24 @(203 152 1) (3078936-3078959)
   3: 16 @(203 8 47) (3069910-3069925)
  /mnt/boot: 4 entries total
  using MBR partition 1: type 166 (0xa6) offset 3069360 (0x2ed5b0)
  ...done.

  CONGRATULATIONS! Your OpenBSD install has been successfully completed!
  To boot the new system, enter halt at the command prompt. Once the
  system has halted, reset the machine and boot from the disk.
  # <b>halt</b>
  syncing disks... done

  The operating system has halted.
  Please press any key to reboot.
</pre></td></tr></table>

<p>
Systém OpenBSD je teï nainstalován a pøipraven pro 
první start, ale je¹tì pøed tím... 

<p>

<h4>Ne¾ restartujete</h4>
V tomto bodì je vá¹ systém nainstalován a pøipraven k restartu 
a konfiguraci slu¾eb. Ne¾ k tomu ale pøistoupíte bylo by  moudré
zkontrolovat <a href="../../cs/errata.html">Errata</a> a podívat se
jestli existují nìjaké chyby, které se vás mohou pøímo dotknout.

<h4>Poté co restartujete</h4>

<p>
Jednou z prvních vìcí, kterou byste si po instalaci systému mìli pøeèíst je 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8&format=html">afterboot(8)</a>, 

<p>
Dal¹í linky pro vás mohou být také u¾iteèné:
<ul>
<li><a href="faq10.html#AddDelUser">Pøidávání u¾ivatelù v OpenBSD</a>
<li><a href="faq6.html#Setup">Úvodní nastavení sítì</a>
<li><a href="faq2.html#ManPages">Manuálové stránky populárních programù</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi">Manuálové stránky 
OpenBSD na webu </a>
<li><a href="../../cs/ports.html">Systém portù a balíkù v OpenBSD pro 
instalaci softwaru</a>, stejnì jako 
<li><a href="faq8.html#Ports">tady</a> a <a href="faq8.html#Packages">tady</a>
</ul>

<h4>Je¹tì jedna vìc...</h4>
Vývojáøi OpenBSD vás ¾ádájí, 
abyste <a href="#SendDmesg">poslali kopii va¹eho dmesg</a>.
Vývojáøi to skuteènì ocení a u¾ivatelé 
konec koncù také.

<a name="OtherInf"></a>
<h3>4.3.8 - Dal¹í zdroje informací</h3>

Existuje dal¹í dokumentace pro ty, kteøí mají speciální potøeby 
nebo zájem. Mù¾ete ji získat z jakéhokoliv 
z <a href="../../cs/ftp.html">ftp mirrorù</a>.
<ul>
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.3/i386/INSTALL.i386">INSTALL.i386</a>
 - Vyèerpávající instalaèní dokument. Podobné dokumenty existují pro v¹echny 
 platformy.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.3/i386/INSTALL.linux">INSTALL.linux</a>
 - Instalování OpenBSD spolu s Linuxem.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.3/i386/INSTALL.mbr">INSTALL.mbr</a>
 - Vysvìtlení Master Boot Recordu.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.3/i386/INSTALL.pt">INSTALL.pt</a>
 - Vysvìtlení k partition tables.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.3/i386/INSTALL.dbr">INSTALL.dbr</a>
 - DOS Floppy Disk Boot Sector.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.3/i386/INSTALL.chs">INSTALL.chs</a>
 - Vysvìtlení pøekladu CHS.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.3/i386/INSTALL.ata">INSTALL.ata</a>
 - ATA/ATA-1/ATA-2/IDE/EIDE/atd FAQ
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.3/i386/INSTALL.os2br">INSTALL.os2br</a>
 - The os2 Boot Sector.
</ul>

<p>
<a name="FilesNeeded"></a>
<h2>4.4 - Které soubory jsou nutné pro instalaci?</h2>
<!-- XXXrelease -->

<p>
Kompletní instalace OpenBSD je rozdìlena do nìkolika oddìlených 
<i>souborových setù</i>. Ne v¹echny aplikace vy¾adují v¹echny 
sety. Následuje pøehled ka¾dého z nich:
<p>
<ul>
    <li><b><i>bsd</i></b>	    - Toto je jádro systému.  <b>Nutné</b>
    <li><b><i>bsd.rd</i></b> - <a href="#bsd.rd">RAM disk kernel</a>
    <li><b><i>base33.tgz</i></b>    - Obsahuje základ OpenBSD systému 
      <b>Nutné</b>
    <li><b><i>etc33.tgz</i></b>     - Obsahuje v¹echny konfiguraèní soubory z /etc 
      <b>Nutné</b>
    <li><b><i>comp33.tgz</i></b>    - Obsahuje pøekladaè a s ním spojené programy, 
      nástroje, knihovny. <b>Doporuèeno</b>
    <li><b><i>man33.tgz</i></b>     - Obsahuje manuálové stránky <b>Doporuèeno</b>
    <li><b><i>misc33.tgz</i></b>    - Obsahuje rùzné informace, dokumentaci pro nastavení systému
    <li><b><i>game33.tgz</i></b>    - Obsahuje hry pro OpenBSD
    <li><b><i>xbase33.tgz</i></b>   - Obsahuje základ pro instalaci X11
    <li><b><i>xfont33.tgz</i></b>   - Obsahuje X11 fontserver a fonty
    <li><b><i>xserv33.tgz</i></b>   - Obsahuje X11 servery
    <li><b><i>xshare33.tgz</i></b>  - Obsahuje manuálové stránky, rùzná lokální nastavení, 
      hlavièkové soubory pro X atd.
</ul>

<p>
<a name= "SpaceNeeded"></a>
<h2> 4.5 - Kolik místa potøebuji pro instalaci OpenBSD?</h2>
<!-- XXXrelease -->

<p>
Následující údaje jsou minimální navrhované velikosti adresáøové struktury pro
plnou instalaci systému. Hodnoty obsahují dostatek místa, které vám umo¾ní
spustit typickou domácí instalaci systému pøipojeného k Internetu.

<ul>
<li>Toto jsou minimální hodnoty.
<li>Pokud plánujete instalovat je¹tì navíc spoustu dal¹ího softwaru, vytvoøte
diskový oddíl <tt>/usr</tt>  veliký!! <b>Nejménì</b> ztrojnásobte 
tyto hodnoty!!
<li>Pro systém, který obsluhuje spoustu emailù nebo webových stránek 
(umístìných ve <tt>/var/mail</tt> respektive <tt>/var/www</tt>) vytvoøte vá¹ diskový 
oddíl <tt>/var</tt> podstatnì vet¹í nebo ho umístìte na 
samostatný oddíl.
<li>Systém s mnoha u¾ivateli, který bude generovat spoustu logù, bude lépe
rovnì¾ vytvoøit mnohem vìt¹í diskový oddíl <tt>/var</tt> 
(<tt>/var/log</tt>).
<li>Pokud oèekáváte, ¾e budete chtít pøekompilovat kernel nebo celý systém
ze zdrojových kódù, potøebujete udìlat diskový oddíl <tt>/usr</tt> výraznì vìt¹í,
<b>minimálnì</b> o 800M-1G vìt¹í ne¾ je uvedeno vý¹e.
</ul>

Ne¾ budete èíst dál, uvìdomte si, ¾e <tt>/usr</tt> a <tt>/usr/X11R6</tt>
jsou obvykle dvì èásti jednoho a toho samého souborového systému, 
tj. <tt>/usr</tt> a není tudí¾ velkou výhodou rozdìlit 
je do samostatných oddílù.

<blockquote>
<pre>
<b>
SYSTEM          /       /usr    /var    /usr/X11R6
alpha           80M     250M    25M     140M
hp300           80M     250M    25M     140M
hppa           100M     200M    25M     120M
i386            60M     250M    25M     140M
mac68k          80M     250M    25M     100M
macppc          80M     250M    25M     140M
mvme68k         80M     250M    25M     100M
sparc           80M     250M    25M     120M
sparc64         80M     250M    25M     100M
vax            100M     200M    25M     120M
</b>
</pre>
</blockquote>

Navíc, je doporuèeno pou¾ívat <tt>/tmp</tt> oddíl. 
Oddíl <tt>/tmp</tt> so pou¾ívá pøi kompilaci portù, mimo 
jiné, tak¾e to, jak velký ho udìláte, zále¾í na tom, co s ním budete dìlat. 50M 
mù¾e být a¾ a¾ pro spoutu lidí, ale nìkteré velké aplikace mohou po¾adovat 100M 
nebo víc z místa v <tt>/tmp</tt>.

<p>
V okam¾iku, kdy se nacházíte v editoru diskových oddílù (disklabel editor),
mù¾ete zaøídit, aby celý systém obsahoval pouze 'a' (hlavní
souborý systém) a 'b' (odkládací prostor, swap). Souborový systém 'a' v 
disklabel editoru se stane va¹ím koøenovým, oddílem, jeho¾ velikost by 
mìla tudí¾ být souètem v¹ech 3 hlavních hodnot vý¹e (<tt>/</tt>, <tt>/usr</tt>, 
a <tt>/var</tt>) plus místo pro <tt>/tmp</tt>. Oddíl 'b' se automaticky 
stane odkládacím prostorem -- doporuèujeme minimum 32M, 
ale pokud máte na disku dostatek místa, roz¹iøte jej nejménì na 64 MB. 
Pokud máte spoustu místa na disku, udìlejte ho velký 256MB, nebo dokonce 512MB.

<p>
Swap je pou¾íván pro ulo¾ení informací výpisu jádra v pøípadì havárie systému, 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crash&amp;sektion=8">crash(8)</a>.
Pokud je tato vlastnost pro vás dùle¾itá, vá¹ swap by mìl být o nìco vìt¹í, 
ne¾ velikost pamìti, kterou kdy budete mít v systému.
V pøípadì havárie, hned po restartu se  
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=savecore&amp;sektion=8">savecore(8)</a>
pokusí ulo¾it obsah swap oddílu do souboru v 
<tt>/var/crash</tt>, tak¾e opìt, pokud je tato vlastnost pro vás dùle¾itá, 
vá¹ oddíl <tt>/var</tt> musí mít dostatek <i>volného místa</i>, aby mohl 
pojmout tyto soubory.

<p>
Exituje pìt hlavních dùvodù proè pou¾ívat oddìlené souborové systémy, místo
umístìní v¹eho na jeden nebo dva:

<ul>
<li><b>Bezpeènost</b>: Mù¾ete oznaèit nìkteré souborové systémz jako 'nosuid',
'nodev', 'noexec', 'readonly', atd. Toto oznaèení teï dìlá instalaèní proces, 
pokud ov¹em vyu¾ijete oddíly pou¾ité vý¹e.
<li><b>Stabilita</b>: U¾ivatel nebo ¹patnì se chovající program mù¾e zaplnit
souborový systém nesmyslnými daty, pokud má zápisová práva na tomto souborovém systému. 
Bìh va¹ich kritických aplikací, které jsou samozøejmì spu¹tìny v jiných souborových 
systémech, tímto nebude pøeru¹en. 
<li><b>Rychlost</b>: Souborový systém na který se èasto zapisuje se mù¾e svým
zpùsobem fragmentovat. (Na¹tìstí ffs filesystém, který pou¾ívá OpenBSD, se
vypoøádá se silnou fragmentací.)
<li><b>Integrita</b>: Pokud jeden filesystém je z nìjakého dùvodu poru¹en,
pak ostatní jsou stále v poøádku.
<li><b>Velikost</b>: Hodnì platform má problémý s oblastí, ze které 
mù¾e boot ROM naèíst kernel. V nìkterých pøípadech je tento limit velice 
malý (504M pro starou 486), jindy jde o mnohem vìt¹í limit 
(8G na nových i386). Proto¾e kernel mù¾e být kdekoliv v oblasti root 
oddílu, celý koøenový adresáø by mìl být v této limitní oblasti. 
Více detailù najdete <a href="../cs/faq14.html#LargeDrive">tady</a>. 
Dobrý tip je mít koøenový oddíl(root partition) v oblasti kompletnì 
pod 2G, pokud ov¹em nevíte, ¾e vá¹e platforma ( a hlavnì vá¹ poèítaè!) 
zvladne vìt¹í (nebo men¹í) limit. 
</ul>

<p>
Nìkolik dal¹ích úvah o oddílech
<ul>
  <li>Pro va¹e první experimenty a pokusy se systémem mù¾e být jeden velký <tt>/</tt> 
  oddíl a swap nejsna¾¹í, ne¾ si zjistíte, kolik místa vlastnì 
  potøebujete. Pokud budete postupovat tímto zpùsobem, obìtujete nìkteré 
  bezpeènostní vlastnosti OpenBSD, které vy¾adují oddìlené filesystémy pro 
  <tt>/</tt>, <tt>/tmp</tt>, <tt>/var</tt>, <tt>/usr</tt> a <tt>/home</tt>.
  <li>Systém pøípojený k Internetu nebo jinému nepøátelskému prostøedí by 
  mìl mít oddìlený oddíl pro <tt>/var</tt> 
  (mo¾ná dokonce <tt>/var/log/</tt>) pro logování.
  <li>Samostatný oddíl pro <tt>/home</tt> je vhodný. Nová verze OS? 
  Sma¾te v¹echno ostatní, kromì <tt>/home</tt> a reinstalujte. 
  Nicménì, pamatujte na ulo¾ení va¹ich konfiguraèních souborù.
  
  <li>Samostatný oddíl pro cokoliv co generuje velké mno¾ství souboru. Mù¾e 
  být rychlej¹í zformátovat a znovu vytvoøit file systém, ne¾ je v¹echny 
  mazat. Podívejte se na 
  <a href="../upgrade-minifaq.html#1.5">upgrade-minifaq</a> 
  pro pøíklad (<tt>/usr/obj</tt>).
  <li>Pokud budete chtít vá¹ systém zkompilovat ze zdrojù, a» u¾ z jakýchkoliv 
  dùvodù, bude zdroj v <tt>/usr/src</tt>. 
  Pokud /usr/src nebude mít vlastní oddíl, ujistìte se, ¾e je v 
  <tt>/usr</tt> dostatek místa.
  <li>Èasto opomínaný fakt:<b>nemusíte</b> alokovat v¹echno místo na hard disku 
  pøi instalaci systému. Proto¾e je dnes celkem obtí¾né sehnat nový disk 
  men¹í ne¾ 20G, dává smysl nechat si èást disku v rezervì. Pokud budete 
  potøebovat více místa na jakémkoliv oddílu, mù¾ete vytvoøit 
  nový oddíl v nealokovaném prostoru, <a href="faq10.html#DupFS">duplikovat</a> 
  existující oddíl na nový, zmìnit 
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab</a>, 
  aby záznamy ukazovaly na nový oddíl, 
  znovu pøipojit oddíl(remount) a je po problému.
  <li>Pokud udìláte oddíl velistí blí¾ící se minimu doporuèení, 
  budete toho pravdìpodobnì pozdìji litovat, kdy¾ budete potøebovat 
  upgradnout systém.
  <li>Pokud povolíte u¾ivatelùm, aby zapisovali do <tt>/var/www</tt> (tj. osobní 
  web stránky), je vhodné umístit tuto èást na samostatný oddíl, a následnì 
  pou¾ít <a href="faq10.html#Quotas">quoty</a> pro omezení prostoru, který 
  u¾ivatelé pou¾ijí, tak¾e pokud zaplní tento oddíl, ¾ádná jiná èást systému 
  nebude ovlivnìna.
</ul>


<p>
<a name= "Multibooting"></a>
<h2>4.6 - Multiboot s OpenBSD (i386)</h2>

Multibooting znamená mít na poèítaèi nìkolik operaèních systémù a 
nìjakým zpùsobem si vybrat, který OS bude bootovat. Rozhodnì to 
<i>není</i> triviální zále¾itost! Pokud nerozumíte tomu co dìláte, 
mù¾ete skonèit tak, ¾e si sma¾ete data. Nováèkùm v OpenBSD se 
<i>rozhodnì</i> doporuèuje zaèit s prázným harddiskem na dedikovaném 
poèítaèi a nacvièit si potøebnou instalaci na nepou¾ívaném stroji, 
ne¾ se pokusí o multiboot konfiguraci na produkèním systému. 
<a href="faq14.html"<FAQ 14></a> obsahuje 
více informací o boot procesu OpenBSD.

<p>
Pokud pou¾íváte multibooting, musí být ve va¹í konfiguraci 
splnìny po¾adavky v¹ech operaèních systémù. Èastou otázkou je, 
zda-li existuje zpùsob, jak se vyhnout  
<a href="faq14.html#LargeDrive">8G boot limitu</a> v OpenBSD. 
Existují sice nìjaké programy, které tvrdí, ¾e doká¾ou obejít rùzné limity operaèního systému, 
av¹ak o ¾ádném z nich není známo, ¾e to umí se souèasnou verzí OpenBSD.

<p>
Následuje nìkolik mo¾ností k multibootování:

<h3>Nastavení aktivního oddílu</h3>
Nastanení aktivního oddílu je nejvíc opomíjeným, av¹ak èasto 
nejlep¹ím øe¹ením pro multiboot. Jednodu¹e nastavte aktivní oddíl 
v tom systému, který právì pou¾íváte, tak, aby se z nìj nabootoval 
systém pøi pøístím restartu. Snad ka¾dý OS nabízí program, pomocí kterého 
se to dá udìlat; v OpenBSD je to <a href="faq14.html#fdisk">fdisk(8)</a>, 
stejnì nazvaný program je ve Windows 9x a v DOSu, stejnì jako v mnoha dal¹ích 
operaèních systémech. Tento postup mù¾e být vhodný pro OS nebo systémy, kteým 
trvá del¹í dobu ne¾ probìhne shutdown a následný reboot -- mù¾ete nastavit 
aktivní oddíl, spustit reboot, pak odejít, udìlat si kafe, a 
pøijít zpìt k nabootovanému systému, tak jak jste si pøáli -- 
¾ádné èekání a¾ oznaèíte OS, který se má nastartovat.

<h3>Bootovací disketa</h3>
Pokud máte systém, který se pou¾ívá ménì èasto pro boot OpenBSD ( nebo
si nepøejete, aby si u¾ivatelé tohoto systému nìèeho v¹imly), zva¾te 
pou¾ití bootovací diskety. Jednodu¹e pou¾ijte jednu z <a href="#MkFlop">
standartních OpenBSD instalaèních disket</a> a vytvoøte si na ní 
soubor <tt>/etc/boot.conf</tt>(a ano, budete na ní nejprve muset vytvoøit adresáø 
<tt>/etc</tt>), který bude obsahovat:

<pre>
     boot hd0a:/bsd
</pre>

co¾ zpùsobí, ¾e systém nabootuje z disku 0, OpenBSD oddíl 'a', 
kernel <tt>/bsd</tt>. V¹imnìte si, ¾e podobným zpùsobem je mo¾né 
nabootovat z jiných diskù napø. záznamem: "<tt>boot hd2a:/bsd</tt>" 
nabootujete z tøetího hardisku v systému. Tak¾e pro nabootování OpenBSD, 
zasuòte disketu, reboot. Pro start jiného systému, vyndejte disketu, reboot.

<p>
V tomto pøípadì je 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>
program nata¾en z diskety, najde a pøeète 
<tt>/etc/boot.conf</tt>. Øádka "<tt>boot hd0a:/bsd</tt>" øekne 
boot(8), odkud nbahrát kernel -- v tomto pøípadì, z prvního HD, 
který BIOS zná. Uvìdomte si, ze z diskety se nahraje pouze malý soubor, 
<tt>/boot</tt> -- systém nahrává celý kernel z pevného disku, 
tak¾e boot z diskety pøidá k celému boot procesu asi 5 vteøin.

<h3>Windows NT/2000/XP NTLDR</h3>

Pro bootování buïto OpenBSD a NT/2000/XP mù¾ete pou¾ít NTLDR, bootloader, který
pou¾ívají NT. Pro multi-boot s NT potøebujete kopii va¹eho PBR z OpenBSD.
(PBR=patrition boot record) Po spu¹tìní pøíkazu installboot mù¾ete PBR 
zkopírovat pomocí 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd(1)</a>

<pre>
 	 # <strong>dd if=/dev/rsd0a of=openbsd.pbr bs=512 count=1</strong>
</pre>

<p>
Nyní nabootujte NT a umístìte openbsd.pbr do C:. Pøidejte øádek typu tohoto
na konec souboru <i>C:\BOOT.INI</i>:

<pre>
	  c:\openbsd.pbr="OpenBSD"
</pre>

<p>
Po rebootování byste mìli být schopni vybrat OpenBSD z NT loader menu. 
Více informací o NTLDR je zde: 
<a href="http://www.tburke.net/info/ntldr/ntldr_hacking_guide.htm">
NTLDR hacking Guide. </a>

<p>
Ve Windows XP také mù¾ete upravit bootovací informace pomocí GUI, viz
<a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;q289022">XP 
Boot.ini HOWTO</a>

<p>
Poznámka: Windows NT bootloader je schopný nabootovat systém z primárního 
hard disku. Není mo¾né ho pou¾ít pro nabootování OpenBSD z druhého disku v 
systému.

<p>
<h3>Dal¹í boot loadery</h3>

<p>
Mezi dal¹í bootloadery, které u¾ivatelé OpenBSD pou¾ívají patøí
<a href="http://gag.sourceforge.net/">GAG</a>,
<a href="http://www.freebird.org/sw-map/bootmanager.html">OSBS</a>,
<a href="http://www.ranish.com/part/">The Ranish Partition Manager</a>
a <a href="http://www.gnu.org/software/grub/">GRUB</a>. 

<p>
<h3>OpenBSD and Linux (i386)</h3>
<!-- XXXversion -->

<p>
Podívejte se se prosím na 
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.2/i386/INSTALL.linux">INSTALL.linux</a>, kde najdete
dostatek instrukcí pro tuto kombinaci. 

<a name= "SendDmesg"></a>
<h2>4.7 - Zaslání va¹eho dmesg na dmesg@openbsd.org po instalaci</h2>

<p>
Pouze pro pøipomenutí, pro vývojáøe OpenBSD je dùle¾ité vìdìt na jakém hardwaru
OpenBSD pracuje, a na jakém nepracuje bezchybnì.

<p>
Citát z /usr/src/etc/root/root.mail
<pre>
If you wish to ensure that OpenBSD runs better on your machines, please do us
a favor (after you have your mail system setup!) and type
        dmesg | mail dmesg@openbsd.org
so that we can see what kinds of configurations people are running.  We will
use this information to improve device driver support in future releases.
(We would be much happier if this information was for the supplied GENERIC
kernel; not for a custom compiled kernel).  The device driver information
we get from this helps us fix existing drivers.
</pre>

<p>
Ujistìte se, ¾e posíláte email z úètu, který je rovnì¾ schopen emaily pøijímat,
aby vás vývojáøi mohli kontaktovat, pokud by mìli nìco co by chtìli otestovat
nebo nìco zmìnit na va¹em nastavení, aby toto zaèalo fungovat. Není vùbec podstatné, 
zda zasíláte email z toho samého stroje, na kterém bì¾í OpenBSD.
Pokud stroj není schopen pøijímat emaily, napi¹te jenom

<pre>
 dmesg | mail vá¹-úèet@vá¹email.cz
</pre>
a pak forwardujte zprávu na 
<pre>
 dmesg@openbsd.org
</pre>
kde <tt>vá¹-úèet@vá¹email.cz</tt> je vá¹ bì¾ný e-mail.
(nebo pøepravte výstup z dmesg pomocí ftp/scp/diskety/po¹tovního holuba...)

<p>
<strong>POZNÁMKA</strong> - Posílejte prosím jenom dmesg z GENERIC jádra.
vámi kompilované jádro s odstranìnými device drivery není pro nás pøínosem.

<a name= "AddFileSet"></a>
<h2>4.8 - Pøidání souborového setu po instalaci</h2>
<!-- XXXversion -->
"Ach jo! Zapomnìl jsem pøi instalaci pøidat instalaèní balík!"
<p>
Obèas si èlovìk uvìdomí, ¾e SKUTEÈNÌ potøebuje <tt>comp33.tgz</tt> (nebo
nìjakou jinou systémovou komponentu) a¾ po instalaci. 
Dobrá zpráva: Existují dva jednoduché zpùsoby jak pøidat instalaèní set 
poté co jste u¾ instalaci dokonèili:

<h3>Pou¾ití procesu Upgrade</h3>
Jednodu¹¹e nabootujte instalaèní médium (CD-ROM nebo Floppy) a vyberte
Upgrade (namísto Install). Kdy¾ se vám objeví seznam souborových setù pro
instalaci, vyberte si ten z nich, který jste zapomnìli nainstalovat,
vyberte zdroj, odkud ho budete instalovat a instalaèní skript v¹e u¾ udìlá za vás.

<h3>Pou¾ití tar(1)</h3>
Instalaèní sety jsou jednoduché zkompresované soubory ve formátu tar
a mù¾ete je extrahovat manuálnì do root adresáøe:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # cd /
  # tar xzvpf comp33.tgz
</pre></td></tr></table>

<p>
Nezapomeòte na volbu <tt>'p'</tt> v pøedchozím pøíkazu, aby se vám správnì
nastavila práva na souborech!
<p>
Bì¾nou chybou je pou¾ití 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>
pro pøidání chybìjících instalaèních setù. Tento zpùsob nefunguje, pgk_add(1) 
je urèen pro soubory s packages, ne pro generické tar soubory jako jsou instalaèní sety.


<a name="bsd.rd"></a>
<h2>4.9 - Co je 'bsd.rd'?</h2>

<b><tt>bsd.rd</tt></b> je "RAM disk" kernel. Tento soubor je u¾iteèný, øada
vývojáøù dbá na to, aby tento soubor nechybìl nikdy na root oddílu jejich
filesystému.

<p>
Název "RAM Disk kernel" popisuje root filesystém kernelu -- 
spí¹e ne¾ umístìný na fyzickém disku, nástroje k dispozici 
po bootu <tt>bsd.rd</tt> jsou ulo¾eny v kernelu a jsou spou¹tìny 
z filesystému umístìného v RAM. <tt>bsd.rd</tt> také obsahuje soubor 
nástrojù, které vám umo¾ní provádìt údr¾bu systému a instalaci.

<p>
Na nìkterých platformách je <tt>bsd.rd</tt> skuteèná preferovaná instalaèní
technika -- umistíte toto jádro na existující souborový systém, 
nabootujete a spustíte z nìj instalátor. Na vìt¹inì platforem na kterých
máte starou verzi OpenBSD mù¾ete pomocí FTP stáhnout novou verzi 
<tt>bsd.rd</tt>, nabootovat z ní a nainstalovat novou verzi OpenBSD 
bez pou¾ití jakéhokoliv odstranitelného média, jako je 
napø. CD nebo disketa.

<p>
Následuje pøíklad bootování <tt>bsd.rd</tt> na i386 systému:

<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Using Drive: 0 Partition: 3
  reading boot.....
  probing pc0 com0 com1 apm mem[639k 255M a20=on]
  disk fd0 hd0
  >> OpenBSD/i386 BOOT 1.29
  boot> <b>boot hd0a:/bsd.rd</b>
<i>. . . normální boot instalace . . .</i>
</pre></td></tr></table>

Jak je zvýraznìno, budete dovedeni k instalaènímu programu, ale
stejnì tak mù¾ete instalátor opustit do shellu a provést údr¾bu systému.
<p>
Obecné pravidlo pro bootování z <tt>bsd.rd</tt> je zmìnit va¹e bootovací
jádro z <tt>/bsd</tt> na <tt>bsd.rd</tt> za pou¾ití jakýchkoliv prostøedkù
typických pro va¹í platformu.
<p>
<br>

<a name="InstProb"></a>
<h2>4.10 - Mo¾né problémy pøi instalaci</h2>

<a name="mkdevhang"></a>
<h3>4.10.1 - Instalace se zasekne bìhem MAKEDEV</h3>
Velice èasto je pøíèinou tohoto chování nedostatek RAM v systému.
Podívejte se <a href="#SmallRAM">sem</a>.

<a name="cpq16m"></a>
<h3>4.10.2 - Mùj Compaq vidí pouze 16M RAM</h3>
<i>Nìkteré</i> systémy od Compaqu mají problém, kdy není celková velikost RAM
správnì detekována
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">v druhé fázi 
OpenBSD boot loaderu</a> a je vidìno a detekováno pouze 16M.
Toto chování mù¾e být opraveno bud opravením/editací souboru 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8&amp;arch=i386"><tt>/etc/boot.conf</tt></a> 
nebo zadáním pøíkazu v "<tt>boot></tt>" promptu ne¾ 
OpenBSD zaène nahrávat kernel. Pokud máte poèítaè s 64M RAM, ale OpenBSD detekovalo 
pouze prvních 16M, pou¾ijete následující pøíkaz:

<pre>
     machine mem +0x3000000@0x1000000
</pre>
pro pøidání dal¹ích 48M (<tt>0x3000000</tt>) za prvních 16M
(<tt>0x1000000</tt>). Typicky, pokud máte stroj s podobným 
problémem, zadáte pøedchozí pøíkaz v boot promptu instalèní 
dikety/CDROM, nainstalujete systém, restartujete, a vytvoøíte 
soubor <tt>/etc/boot.conf</tt> s pøíkazem uvedeným vý¹e, tak¾e dal¹í 
restarty systému rozeznají v¹echnu dostupnou RAM.

<p>
Existují pøípady, kdy na <i>nìkterých</i> systémech pomohl update 
ROM.

<a name="noboot"></a>
<h3>4.10.3 - Moje i386 po instalaci nenabootuje</h3>
Va¹e instalace vypadalo v poøadku, nicménì pøi prvním restartu nevidíte 
¾ádné známky, ¾e by se OpenBSD chystalo nastartovat. Existuje nìkolik bì¾ným 
pøíèin tohoto  problému:

<ul>
<li><b>®ádný oddíl nebyl v fdisku(8) oznaèen jak aktivní.</b> Pro opravu,
restartujte poèítaè pomocí bootovací diskety nebo jiného média a oznaète 
oddíl jako "active" (bootable). Podívejte se 
<a href="faq14.html#fdisk">sem</a> a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">sem</a>.

<li><b>Na disk nebyl zapsán správný boot loader.</b>
Pokud odpovíte bìhem instalace "Y" na otázku "Use entire disk for OpenBSD?", 
nebo pou¾ijete volbu <tt>reinit</tt> programu fdisk(8), 
OpenBSD boot record se nainstaluje do Master Boot Record èásti na disk; 
jinak bude souèasný Master Boot Record nedotèen. Co¾ zpùsobí problém 
pokud neexistuje ¾ádný jiný boot record. Øe¹ením je znovu nabootovat 
z instalaèního média, skoèet do shellu, spustit 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
a pou¾ít volbu "<tt>update</tt>".  

<li><b>V nìkterých ojedinìlých pøípadech se nemusí povést druhá 
fáze instalace boot loaderu.</b> Reinstalace druhé fáze boot 
loaderu je vysvìtlena <a href="faq14.html#InstBoot">tady</a>.
</ul>

<a name="sshhang"></a>
<h3>4.10.4 - Mùj (star¹í, pomalej¹í) poèítaè nabootuje, ale zasekne se pøi 
kroku ssh-keygen</h3>
Je velice pravdìpodobné, ¾e vá¹ poèítaè bì¾í dobøe, jenom mu zabere 
hodnì èase vygenerování ssh klíèù. Na SparcStation2 nebo na poèítaèi 
Macintosh Quadra tøi kroky 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;sektion=1">ssh-keygen(1)</a>
trvájí nìco pøes 45 minut, na nìkterých poèítaèích to trvá je¹tì déle. 
Nechte ho to dodìlat; je to jenom jednou, pøi instalaci.

<a name="noftplist"></a>
<h3>4.10.5 - Pøi instalaci dostanu hlá¹ku 
"ftplist: No such file"</h3> 

Pokud instalujete pøes FTP
<a href="upgrade-minifaq.html#1.1">snapshot</a> bìhem <i>-beta</i>
fáze <a href="faq5.html#Flavors">vývojového cyklu OpenBSD</a>,
mù¾e se vám stát, ¾e uvidíte tohle:

<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>

  Do you want to see a list of potential FTP servers?  [y] <i>ENTER</i>
  grep: /tmp/ftplist: No such file or directory
  Server IP address or hostname? 
</pre></td></tr></table>

Toto chování je normální a oèekávané, proto¾e se jedná o pre-release èást. 
Instalaèní program se dívá na seznam FTP na primárním FTP serveru do adresáøe, 
který nebude k dispozici, pøed 
<a href="faq1.html#Next">datemi vydání</a>, proto ta chyba. 

<p>
Jednudu¹e pou¾ijte <a href="../ftp.html">seznam FTP mirrorù</a>, tak najdete  
nejbli¾¹í FTP mirror, a manuálnì zadáte jeho adresu.

<p>
<b>Poznámka: Tato chyba by nemìla být vidìt pokud instalujete <i>-release</i>
nebo z CDROM.</b>

<a name="site"></a>
<h2>4.11 - Úprava instalaèního procesu</h2>
<!-- XXXversion -->

<h3>soubor <tt>siteXX.tgz</tt></h3>
Instalaèní/upgrade skript OpenBSD povoluje volbu 
souboru, který vytvoøí u¾ivatel a který se jmenuje "<tt>siteXX.tgz</tt>", kde 
XX je verze release (tj. 33). Tento <tt>siteXX.tgz</tt> soubor je, stejnì jako ostatní 
<a href="#FilesNeeded">souborové sety</a>, 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&amp;sektion=1">gzip(1)</a>em
kompresovaný 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
archiv umístìný v '/' a je rozbalen stejnì jako ostatní sety volbou 
<tt>xzpf</tt>.  Tento soubor se bude instalován jako poslední, po 
v¹ech ostatních setech. 

<p>
Tento soubor umo¾òuje u¾ivateli pøidat a nebo pøepsat soubory 
instalovené v 'normálních' setech atak upravit instalaci nebo 
upgrade.

<p>
Pøíklady pou¾ití souboru <tt>siteXX.tgz</tt>:
<ul>
<li>Vytvoøte soubor siteXX.tgz, který obsahuje v¹echny soubory, které se zmìnily 
od první instalace OpenBSD. Potom, kdy¾ bude nutné obnovit systém, 
jednodu¹e zvolte siteXX.tgz bìhem reinstalace a v¹echny va¹e zmìny se promítnou 
do nového systému.

<li>Vytvoøte øadu adresáøù pro jednotlivé poèítaèe, ka¾dý z nich 
bude obsahovat siteXX.tgz, který bude obsahovat soubory pro jednotlivé 
typy poèítaèù. Instalaci poèítaèù (napø. strojù s rùznými 
grafickými kartami) 
je mo¾né udìlat zvolením rùzných souborù siteXX.tgz.

<li>Dejte soubory, které èasto nebo rutinnì mìníte stejným nebo podobným
 zpùsobem do souboru siteXX.tgz --
soubory <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8"
><tt>/etc/skel</tt></a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5"
><tt>/etc/pf.conf</tt></a>, 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8"
><tt>/var/www/conf/httpd.conf</tt></a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;sektion=5"
><tt>/etc/rc.conf</tt></a>,
atp. 
</ul>

<h3>skripty <tt>install.site</tt>/<tt>upgrade.site</tt></h3>
Jako poslední krok pøi instalaci/upgradu se skript podívá do root 
adresáøe novì instalovaného/upgradovaného systému a hledá 
<tt>install.site</tt> nebo <tt>upgrade.site</tt>, tedy skripty vhodné pro 
daný proces a spustí skripty v 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=8">chroot</a> 
prostøedí rootu instalovaného/upgradovaného systému. Pamatujte, ¾e 
upgrade je provádìn na pøipojeném souborovém systému, tak¾e cílový 
souborový systém je pøipojen na <tt>/mnt</tt>. Nicménì, va¹e skripty 
mohou být napsány tak, jako kdyby bì¾eli na "normálním" souborovém 
systému. Proto¾e tento skript bì¾í poté, co se nainstalují 
v¹echny soubory, máte pøi spu¹tìní va¹eho skriptu k dispozici 
témìø plnì funkèní systém. 

<p>
V¹imnìte si, ¾e skript <tt>install.site</tt> by mìl 
být v souboru <tt>siteXX.tgz</tt>, zatímco 
<tt>upgrade.site</tt> mù¾e být umístìn v root adresáøi 
pøed upgradem nebo mù¾e být umístìn v souboru 
<tt>siteXX.tgz</tt>.

<p>
Skripty mohou dìlat cokoliv, co mù¾e udìlat skript.
<ul>
<li>Odstanit soubory, které se pøi procesu instalace/upgrade nahrály a vy je 
nechcete mít na svém systému.
<li> Odstranit/upgrade/instalovat 
<a href="faq8.html#Packages">packages</a>, které chcete v 
systému.
<li> Udìlat <a href="faq14.html#Backup">okam¾itou zálohu/archiv</a> 
nového systému ne¾ ho vystavíte napospas zbytku svìta.
</ul>

Kombinace souborù <tt>siteXX.tgz</tt> a 
<tt>install.site/upgrade.site</tt> vznikla za úèelem poskytnout u¾ivateli
¹iroké mo¾nosti úprav bez toho, aby vytváøeli celou vlastní 
instalaèní sadu.

<a name="Multiple"></a>
<h2>4.12 - Jak mohu nainstalovat vìt¹í mno¾ství podobných systémù?</h2>
Tady je popis nástrojù, které mù¾ete pou¾ít, pokud potøebujete 
nainstalovat mno¾ství stejných OpenBSD systémù.

<h3>Soubory <tt>siteXX.tgz</tt> a <tt>install/upgrade.site</tt></h3>
Podívejte se na oddíl <a href="#site">nahoøe</a>.

<h3>Obnovení pomocí dump</h3>
Na vìt¹inì platforem, boot média obsahují program 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>
, který mù¾e být pou¾it k obnovení zálohy vytvoøené pomocí  
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a>.
Tak¾e, mù¾ete nabootovat z 
<a href="#MkFlop">diskety</a>, 
<a href="../orders.html">CD</a>, nebo 
<a href="#bsd.rd">bsd.rd</a> souboru, potom
<a href="faq14.html#fdisk">fdisk</a>,
<a href="faq14.html#disklabel">disklabel</a>, a pomocí 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore</a>
obnovit po¾adovanou konfiguraci z pásky nebo jiného média a nainstalovat 
<a href="faq14.html#InstBoot">boot blocks</a>. Více detailù je 
<a href="faq14.html#Backup">tady</a>.

<h3>Klonování diskù</h3>
Bohu¾el, neexistuje ¾ádný známý program na klonování diskù, který 
pracuje s FFS a umí udìlat obtisk obsahující pouze aktivní diskový prostor.
Vìt¹ina hlavních klonovacích øe¹ení se bude k OpenBSD oddílu chovat jako 
k "obecnému" oddílu a mù¾e udìlat pouze obraz celého disky. Co¾ èasto 
splní úkol, ale zabere zbyteènì hodnì místa 
-- prazdný, 10G oddíl s <tt>/home</tt> bude potøebovat 10G 
místa v obtisku, i kdy¾ v nìm nebude jediný soubor. 
Aèkoliv budete typicky instalovat obtisk na vìt¹í disk, nebude 
mo¾né hned vyu¾ít dal¹í volné místo a stejnì tak nebude mo¾né 
instalovat obtisk na 
men¹í disk.

<p>
Pokud je to pro vás akceptovatelné øe¹ení, pou¾ití pøíkazu 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd</a>
udìlá co potøebujete, umo¾ní vám kopírovat jeden disk na druhý, 
sektor po sektoru. Tento postup vám dá stejnou funkcionalitu jako 
komerèní programy, ale nic nestojí.

<a name="getdmesg"></a>
<h2>4.13 - Jak mohu pou¾ít dmesg(8) pro oznámení problému s instalací?</h2>

Pokud <a href="../report.html">oznamujete problém</a>, je nezbytné 
zároveò pøilo¾it kompletní 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>.
Nicménì, èasto, kdy¾ budete dmesg potøebovat, je to proto, ¾e systém nepracuje 
správnì nebo nejde nainstalovat, tak¾e nemáte k dispozici správnì 
fungující disk, sí» nebo jiné zdroje, které potøebujete k zaslání dmesg do správného 
<a href="../mail.html">mail listu</a>.  Jsou tu ov¹em i jiné cesty:

<ul>
<li><b>Disketa:</b> Bootovací disketa a CDROM obsahují dostatek 
nástrojù pro záznam dmesg na disketu formátovanou v MSDOS pro pøeètení 
dmesg na jiném stroji. Vlo¾te disketu formátovanou v MSDOS do mechaniky a 
napi¹te následující pøíkazy:

<pre>
     mount -t msdos /dev/fd0a /mnt
     dmesg >/mnt/dmesg.txt
     umount /mnt
</pre>
Pokud máte dal¹í OpenBSD systém, mù¾ete dmesg nahrát na disketu èitelnou 
v OpenBSD -- èasto je na bootovací disketì dostatek místa pro zapsání 
dmesg. V tomto pøípadì, vynechte "<tt>-t msdos</tt>".

<p>
<li><b>Seriová konzole:</b> Podívejte se na <a href="faq7.html#SerCon">tento èlánek</a>
pro nastavení sériové konzole a následnì si ulo¾te výstup do souboru.

<p>
<li><b>FTP:</b> Za urèitých podmínek je mo¾né pou¾ít 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a>
klienta na boot disku nebo na CDROM, zaslat dmesg na lokální FTP server, 
odkud si ho pozdìji mù¾ete nahrát.
</ul>

<p>

<font color= "#0000e0">
<a href= "index.html">[FAQ index]</a>
<a href= "faq3.html">[Do sekce 3.0 - Jak získat OpenBSD]</a>
<a href= "faq5.html">[Do sekce 5.0 - Vytvoøení systému ze zdrojových kódù]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt= "[zpìt]"></a>
<a href= "mailto:www@openbsd.org">www@openbsd.org</a><br>
<small>
<br>
Originally [OpenBSD: faq4.html,v 1.138 ]
<br>
$Translation: faq4.html,v 1.26 2003/05/05 10:18:45 certik Exp $</small>
<br>
$OpenBSD: faq4.html,v 1.23 2003/05/05 11:21:45 jufi Exp $
</small>
</body>
</html>
