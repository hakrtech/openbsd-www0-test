<html>
<head>
<title>4.0 - Prùvodce instalací</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-2">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>
<h2><font color=#e00000>4.0 - Prùvodce instalací</font><hr></h2>

<p>
<ul><h3>Obsah</h3>
<li><a href="faq4.html#Overview     ">4.1 - Pøehled instalaèních procedur 
      OpenBSD.</a>
<li><a href="faq4.html#FilesNeeded  ">4.2 - Které soubory jsou nutné pro instalaci?</a>
<li><a href= "faq4.html#SpaceNeeded ">4.3 - Kolik místa potøebuji pro 
      instalaci OpenBSD?</a>
<li><a href= "faq4.html#Multibooting">4.4 - Bootování více operaèních systému spolu s OpenBSD</a>
<li><a href= "faq4.html#SendDmesg   ">4.5 - Zaslání va¹eho dmesg na dmesg@openbsd.org
      po instalaci</a>
<li><a href= "#AddFileSet     ">4.6 - Pøidání souborového setu po instalaci</a>
<li><a href= "#bsd.rd      ">4.7 - Co je 'bsd.rd'?</a>
</ul>
<hr>

<p>
<a name= "Overview"></a>
<a name= "4.1"></a>
<h2>4.1 - Pøehled instalaèních procedur OpenBSD</h2>

<p>
Tyto FAQ nyní obsahují instrukce pro instalaci OpenBSD 3.1. Mezi 
instalacemi OpenBSD 3.1 a instalacemi star¹ích verzí jsou rozdíly,
nicménì tento návod vám pomù¾e s posledními vydáními.


<p>
OpenBSD má velmi robustní textovì zalo¾enou instalaèní proceduru. 
Kromì svojí robusnosti mù¾e být instalaèní procedura provedena za 
pou¾ití jediné instalaèní diskety. Pro ka¾dou podporovanou architekturu je 
instalaèní procedura velmi podobná, nicménì se li¹í v urèitých detailech. Ka¾dopádnì
vám doporuèujeme pøeèíst INSTALL dokumenty v adresáøích pro jednotlivé 
platformy na CDROM nebo FTP (napø. <tt>INSTALL.i386</tt>, 
<tt>INSTALL.mac68k</tt> nebo <tt>INSTALL.sparc</tt>).

<p>
Na vìt¹inì architektur máte mù¾ete instalovat nìkolika zpùsoby,
vèetnì pou¾ití FTP, CDROM nebo souborù na lokálním disku. Jeden 
zpùsob podporován <b>není</b>, a to sice <a href="faq3.html#ISO">sta¾ení ISO image</a> 
a vypálení vlastního CD. CDROM je nicménì mo¾né 
<a href="../../cs/orders.html">koupit</a>.

<h3>4.1.1 - Podporované architektury</h3>

<p>
OpenBSD 3.1 podporuje následující architektury, vyjmenované v abecedním 
poøadí. Pro specifické informace o dané architektuøe se informujte na 
odpovídající stránce.

<ul>
    <li><a href="../../alpha.html">alpha</a> - DEC Alpha-based poèítaèe.
    <li><a href="../../amiga.html">amiga</a> - Amiga , modely zalo¾ené na m68k 
          (po¾adováno MMU).
    <li><a href="../../hp300.html">hp300</a> - Hewlett-Packard HP300/HP400 .
    <li><a href="../../cs/i386.html">i386</a> - PC architektura Intel.
    <li><a href="../../mac68k.html">mac68k</a> - Vìt¹ina MC680x0-based Apple 
          Macintosh modelù.
    <li><a href="../../mvme68k.html">mvme68k</a> -Motorola MVME147/16x/17x 68K 
          VME karty.
    <li><a href="../../cs/macppc.html">powerpc</a> - Podpora pro Apple-based 
          PowerPC systémy.
    <li><a href="../../cs/sparc.html">sparc</a> - Platforma SPARC od Sun Microsystems.
    <li><a href="../../cs/sparc64.html">sparc64</a> - Sun UltraSPARC systémy.
    <li><a href="../../cs/vax.html">vax</a> - poèítaèe VAX firmy DEC.
</ul>

<h3>4.1.2 - Podporovaná instalaèní média</h3>

<p>
OpenBSD podporuje instalaci z rùzných druhù medií. Nejbì¾nìj¹í a na 
architektuøe nezávislé zpùsoby jsou vyjmenovány dále. Nejprve v¹ak 
musíte nabootovat  a to z floopy diskety nebo z CD-ROM 
s OpenBSD. 

<table align="center" border="1" width="600">
<tr>
 <td>
         <b>CD-ROM</b>
        </td>
        <td bgcolor="#EEEEEE">
  Pro instalaci z CD-ROM potøebujete mít 
  <a href="../../cs/orders.html">Oficiální OpenBSD CD-ROM</a> 
  nebo si vytvoøte vlastní CD. To je nejjednodu¹¹í zpùsob, jak OpenBSD 
  systém nainstalovat. <br>
             <b>Poznámka:</b> Oficiální CD s OpenBSD jsou bootovatelné, 
  pokud to podporuje vá¹ BIOS. 
        </td>
    </tr><tr>
        <td>
  <b>FTP</b>
        </td>
        <td bgcolor="#EEEEEE">
  Tato instalaèní procedura povoluje nainstalovat OpenBSD 
  downloadem instalaèních balíkù pøímo ze sítì v reálném 
  èase. Mù¾ete specifikovat statickou IP adresu nebo 
  získat IP pøes DHCP protokol.
        </td>
    </tr><tr>
        <td>
  <b>Lokální Filesystém</b>
        </td>
        <td bgcolor="#EEEEEE">
  Instalovat mù¾ete i z lokálního disku, pokud na nìm 
  existuje filesystém, na kterém se nachází instalaèní 
  balíky. Na instalaèním disku je podpora pro DOS, EXT2FS a FFS.
        </td>
</tr>
</table>

<a name="Overview.3"></a>
<a name="4.1.3"></a>
<h3>4.1.3 - Vytvoøení bootovatelných instalaèních disket.</h3>

<p>
Pro vytvoøení instalaèních disket si nejprve stáhnìte správný boot 
floppy image z jednoho z distribuèních míst OpenBSD. 
Seznam FTP serverù se nachází na stránce 
<a href="../../cs/ftp.html">OpenBSD FTP Distribution</a>. 
Ka¾dá architektura má jeden nebo více floppy image, rùzné image 
jsou pro rùzné varienty hardware. Rozdíly mezi instalaèními disketami 
platformy i386 jsou vyjmenovány dále. Pokud mají jiné architektury více ne¾ jednu 
instalaèní disketu, pøeètìte si INSTALL dokument v jejich FTP adresáøi. 
Pro ty, které mají pouze jednu, si stáhnìte image <i>floppy31.fs</i>. <br>
<b>POZNÁMKA:</b> Image <i>cdrom31.fs</i> je mo¾né pou¾ít pro vytvoøení 
bootovatelného CD s OpenBSD.  


<p>
Platforma <a href="../../i386.html">i386</a> má na výbìr ètyøi rùzné 
instalaèní disky. 
Rozdíly mezi nimi jsou tyto:

<ul>
<li><b>floppy31.fs</b> podporuje vìt¹inu desktopových systémù, s podporou
 PCI a ISA NIC, IDE a jednoduchými SCSI adaptéry. Podporuje
 nìkteré PCMCI.
<li><b>floppyB31.fs</b> podporuje hodnì RAID øadièù, nicménì 
 podpora mnohých standardních SCSI adaptérù, EISA a ISA sí»ovách 
 karet je odstranìna. Tuto disketu si patrnì vyberete pro 
 velké serverové systémy. Podporuje také ménì obvyklé 
 SCSI adaptéry.
<li><b>floppyC31.fs</b> podporuje Cardbus a PCMCIA zaøízení, která lze 
 nalézt v mnoha laptopech.
<li><b>cdrom31.fs</b> podporuje hodnì diskových a sí»ových adaptérù, 
 v podstatì je to kombinace v¹ech tøí bootovacích disket. 
 Je mo¾né pou¾ít ho k výrobì bootovací 2.88M floppy nebo 
 èastìji jako boot image pøi vypalování CD.
</ul>

<p>
Vìt¹ina u¾ivatelù na arch i386 pou¾ije pouze instalaèní disk 
<i>floppy31.fs</i>. 
Ano, mù¾e dojít k situaci, kdy je zapotøebí jeden disk kvùli podpoøe
SCSI a jiný podporující va¹i sí»ovou kartu. Na¹tìstí je to velmi vzácná
situace a vìt¹inou to lze nìjak obejít.

<p>
Jakmile máte vybraný správny image pro  disketu, potøebujete èistou 
disketu. Pokud na disketì jsou nìjaké vadné sektory, pak se instalace 
pravdìpodobnì nezdaøí. Pro pøipravení diskety v jiným systému typu UNIX
(vèetnì OpenBSD), pou¾ijete 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdformat&sektion=&arch=i386">fdformat(1)</a>, 
který disk jednak zformátuje, jednak pro kontrolu vadných sektorù.

<ul>
<table border=0 width="800"> <tr> <td nowrap bgcolor="#EEEEEE"> <tt>
 # <b>fdformat /dev/fd0a</b><br>
 Format 1440K floppy `/dev/fd0a'? (y/n): y<br>
 Processing VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV done.
</tt></td></tr> </table>
</ul>

<p>
Pokud výstup z fdformat vypadá takto, pak je v¹e v poøádku. 
Nicménì, pokud jste nevidìli V©ECHNA &quot;V&quot;, tak je vá¹ disk zøejmì
¹patný a mìli byste zkusit jiný.

<p>
Pokud formátujete v MS-DOSu nebo Windows, pou¾ijte pøíkaz 
<tt>FORMAT</tt>.

<p>
Jakmile máte èistou, formatovanou diketu, nastal èas na ní zapsat 
instaèní image. Pokud tohle v¹echno dìláte na stroji s OpenBSD nebo 
jiným UNIXovým systémem, mù¾ete pou¾ít
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&sektion=0">dd(1)</a>.
Následuje pøíklad pou¾ití:

<ul>
<table border=0 width="800"> <tr> <td nowrap bgcolor="#EEEEEE"> <tt>
 # <b>dd if=floppy31.fs of=/dev/rfd0c bs=126b</b>
 </tt></td></tr></table>
</ul>

<p>
Jakmile je image zapsaný, zkontrolujte, ¾e je zkopírovaný image shodný
s originálem následujícím pøíkazem. Pokud test probìhne v poøádku, 
dostanete jen dal¹í prompt.

<ul>
<table border=0 width="800"> <tr><td nowrap bgcolor="#EEEEEE"><tt>
 # <b>cmp /dev/rfd0c floppy31.fs</b>
  </tt></td></tr> </table>
</ul>

<p>
Pokud vytváøíte na Windows/DOS platformì, 
pou¾ijte nástroje nacházející se zde:
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.1/tools/">tools</a> 
na jakémkoli z ftp mirrorù nebo v <b>3.1/tools</b> adresáøi na CD1 OpenBSD CD.
U¾ivatelé DOS/Windows 9x zøejmì pou¾ijí pøíkaz <i>rawrite</i> pro
vytvoøení va¹í bootovací floppy.

<ul>
Pøíklad pou¾ití <i>rawrite</i>:
 <table border=0 width="800"> <tr> <td nowrap bgcolor="#EEEEEE"><tt>
 C:\> <b>rawrite</b><br>
 RaWrite 1.2 - Write disk file to raw floppy diskette<br><br>

 Enter source file name: <b>floppy31.fs</b><br>
 Enter destination drive: <b>a</b><br>
 Please insert a formatted diskette into drive A: and press -ENTER- : </tt><i><b>Enter</b></i><tt>
 </tt></td> </tr> </table>
</ul>

<p>
Pokud pou¾íváte NT, rawrite vám nepomù¾e, mù¾ete ale pou¾ít i
<i>fdimage</i> nebo <i>ntrw</i> . Oba z nich se nacházejí na vý¹e uvedených 
ftp mirrorech nebo na OpenBSD CD. Následují
pøíklady pou¾ití jednotlivých programù:  

<ul>
  Pou¾ití <i>fdimage</i>:
 <table border=0 width="800"> <tr> <td nowrap bgcolor="#EEEEEE"><tt>
 C:\> <strong>fdimage -q floppy31.fs a:</strong>
 </tt></td></tr></table>

  Pou¾ití <i>ntrw</i>:
  <table border=0 width="800"> <tr> <td nowrap bgcolor="#EEEEEE"><tt>
 C:\> <strong>ntrw floppy31.fs a:</strong><br>
 3.5", 1.44MB, 512 bytes/sector<br>
 bufsize is 9216<br>
 1474560 bytes written<br>
  </tt></td></tr></table>
</ul>

<p>
Uvìdomte si, ¾e <tt>FDIMAGE.EXE</tt> a <tt>RAWRITE.EXE</tt> jsou
MS-DOS aplikace a jako takové jsou limitovány "8.3" jmennou konvencí 
DOSu. Proto¾e jak <tt>floppy31B.fs</tt> tak i <tt>floppy31C.fs</tt> mají 
del¹í jméno, musíte zjistit, jak vá¹ systém ukládá soubor v "8.3" formátu, 
ne¾ pou¾ijete <tt>FDIMAGE.EXE</tt> nebo 
<tt>RAWRITE.EXE</tt> pro vytvoøení bootovacích disket.

<h3>4.1.4 - Bootování instalaèních diskù.</h3>

<p>
Tato sekce je rozdìlena do jednotlivých oddílù podle jednotlivých 
architektur, které OpenBSD podporuje. Tímto zpùsobem mù¾eme správnì 
instruovat ka¾dého u¾ivatele co dìlat na jeho 
konkrétní platformì.

<h4>Bootování na i386</h4>

<ul>
<p>
Bootování instalaèních disket není nic nového pro vìt¹inu u¾ivatelù. 
Máte-li disketu, jednodu¹e ji dejte do disketové mechaniky a nabootujte 
systém. Instalaèní obraz se automaticky nahraje. Pokud chcete bootovat 
z CD, musíte v BIOSu nastavit v sekci boot sequence bootování z CD. 
Nìkteré star¹í BIOSy tuto volbu nepodporují a musíte tedy pou¾ít 
disketu. Pokud pou¾ijete k nabootování disketu, je¹tì stále ale mù¾ete 
instalovat z CD-ROM.

</ul>

<h4>Bootování SPARC</h4>

<ul>
<p>
Pøi bootování z diskety umístìte diskety s OpenBSD instalaèním image 
do mechaniky. Dále pou¾ijte následující pøíkaz pro 
 bootování z diskety:

<ul>
  <table border=0 width="800"> <tr><td nowrap bgcolor="#EEEEEE"><tt>
  ok <b>boot floppy</b>
  </tt></td></tr></table>
</ul>

<p>
Pro start z CD-ROM dejte OpenBSD CD do CD-ROM mechaniky. 
Pokud máte pouze jedinou CD-ROM mechaniku, pak na boot promptu zadejte 
'<tt>boot cdrom</tt>':

<ul>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><tt>
ok <b>boot cdrom</b>
</tt></td></tr></table>
</ul>

<p>
Toto samozøejmì bude platit jenom v novém pøíkazovém módu. Pokud jste 
ve starém pøíkazovém módu (a right arrow), napi¹te 'n' a dostanete se 
tak do nového pøíkazového módu. (Pou¾íváte-li starý sparc, tj. 
pre-sun4c, pak zøejmì nemáte nový pøíkazový mód. V tomto pøípadì 
musíte experimentovat.) Pokud máte více CD-ROM mechanik, pak musíte 
vybrat tu pravou. Zkuste <tt>probe-scsi</tt> z nového pøíkazového módu.

<ul>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><tt>
ok <b>probe-scsi</b><br>
Target 0<br>
  Unit 0   Disk     QUANTUM LIGHTNING 365S<br>
Target 1<br>
  Unit 0   Removable Disk     QUANTUM EMPIRE_1080S<br>
Target 3<br>
  Unit 0   Removable Disk     Joe's CD ROMs<br>
</tt></td></tr></table>
</ul>

<p>
Poznamenejte si, který z diskù je CD-ROM ze kterého chcete bootovat. 
Zapi¹te si target number.

<ul>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><tt>
ok <b>boot /sbus/esp/sd@X,0</b>
</tt></td></tr></table>
</ul>
</ul>

<h3>Zaèátek instalace</h3>
Nyní kdy¾ jste vytvoøili bootdisk, je èas ho nabootovat. Kdyz 
nabootujete z diskety, jádro systému a v¹echny programy, které OpenBSD 
pou¾ívá k instalaci, jsou nahrány do pamìti. Pokud narazíte na problém 
a s bootdiskem nenastartujete, pak je chyba zøejmì ve vadné disketì. 
To je velmi bì¾ný problém!!! Pokud se vám bootování nedaøí, zkuste to 
jednou dvakrát, a kdy¾ ani potom ne, zahoïte disketu a  vezmìte si jinou. 
Kdy¾ se bootování s disketou nezdaøí, tak i kdy¾ disketa pøed tím 
pracovala bez problémù, nezapomeòte, ¾e OpenBSD pou¾ívá ka¾dý dostupný 
bit z diskety. Ka¾dá sebemen¹í vada na disku mù¾e zpùsobit celkovou 
chybu pøi nahrávání instalaèního disku.

<p>
Pokud nabootujete úspì¹nì, objeví se na obrazovce spousta bílého 
textu na modrém pozadí, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&sektion=8">dmesg</a>, 
tento text vypisuje jádro systému a øíká vám, která zaøízení nalezlo a 
kde. Pak uvidíte tohle:

<ul>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><tt>
rootdev=0x1100 rrootdev=0x2f00 rawdev=0x2f02<br>
erase ^?, werase ^W, kill ^U, intr ^C, status ^T<br>
(I)nstall, (U)pgrade or (S)hell? <b>i</b><br>

Welcome to the OpenBSD/i386 3.1 installation program.<br>

This program is designed to help you put OpenBSD on your disk in a simple and<br>
rational way.<br>
<br>
As with anything which modifies your disk's contents, this program can cause<br>
SIGNIFICANT data loss, and you are advised to make sure your data is backed<br>
up before beginning the installation process.<br>
<br>
Default answers are displayed in brackets after the questions.  You can hit<br>
Control-C at any time to quit, but if you do so at a prompt, you may have<br>
to hit return.  Also, quitting in the middle of installation may leave your<br>
system in an inconsistent state.  If you hit Control-C and restart the<br>
install, the install program will remember many of your old answers.<br>
<br>
Proceed with install? [n] <b>y</b><br>
<br>
Cool! Let's get to it...<br>
<br>
Specify terminal type [vt220]: </tt><i><b>Enter</b></i><tt><br>
Do you wish to select a keyboard encoding table? [n] </tt><i><b>Enter</b></i><tt><br>
</tt></td></tr></table>
</ul>

<p>
V závislosti na architektuøe, mù¾e typ va¹eho terminálu být odli¹ný. 
Napøíklad OpenBSD/sparc pou¾ívá terminál typu 
&quot;sun&quot;.
</ul>

<h3>4.1.5 - Nastavení diskù bìhem instalace.</h3>

<p>
Nastavení disku v OpenBSD se trochu li¹í v závislosti na platformì. 
Pro <a href="../cs/i386.html">i386</a> a <a href="../cs/macppc.html">macppc</a>
je nastavení disku rozdìleno do dvou fází. V první se èást disku pro OpenBSD 
definuje pomocí pøíkazu fdisk(8), potom se oddíl(partition) rozdìlí do OpenBSD 
oddílù(partitions) pou¾itím disklabel(8).

<p>
Nìkteøí u¾ivatelé mohou být mo¾ná trochu zmateni pou¾ívanou terminologií. 
Vypadá to, jako kdy¾ pou¾íváme slovo "partition" ve dvou rùzných významech.
Toto zji¹tìní je správné. Existují dvì úrovnì oddílù v rùzných OpenBSD
platformách. První mù¾e být pova¾ována za rozdìlení oddílù(partitions) 
Operaèního Systému, tj. jak si více OS na jednom poèítaèi oznaèí své 
vlastní místo na disku a druhá uroveò, jak je OpenBSD oddíl(partition) 
rozdìlena do jednotlivých filesystémù. První úroveò je viditelná jako diskový 
oddíl(partition) v DOSu, Windows nebo pro jakýkoliv OS, který mù¾e 
spoluexistovat s jiným OS na poèítaèi typu IBM AT. Druhá úroveò je 
viditelná pouze pro OpenBSD a ty OS, které mohou pøímo èíst OpenBSD
file systém.

<ul>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><tt>
At any prompt except password prompt you can run shell command by<br>
typing '!foo', or escape to shell by typing '!'.<br>
<br>
The installation program needs to know which disk to consider the root disk.<br>
Note the unit number may be different than the unit number you used in the<br>
boot program (especially on a PC with multiple disk controllers).<br>
Available disks are:<br>
<br>
wd0<br>
<br>
Which disk is the root disk? [wd0] <i><b>&gt;Enter&lt;</b></i><br>
Do you want to use the *entire* disk for OpenBSD? [no] <b>yes</b><br>
<br>
[...]<br>
</tt></td></tr></table>
</ul>

<p>
V této èásti instalace vyberete disk, který se stane va¹ím 
&quot;root&quot;(koøenovým) diskem. Na root disku bude / file systém 
a swap. <b>wd0</b> specifikuje IDE disk; pokud jsou va¹e disky SCSI, 
uvidíte <b>sd0</b>. Mìla by zde být polo¾ka pro ka¾dý disk, který 
OpenBSD najde, co¾ za normálních okolností znamená ka¾dý disk ve va¹em 
systému. Pokud neuvidíte v¹echny va¹e disky, pak máte ¹patnì 
nakonfigurovaný nebo nepodporovaný hardware.

<p>
V tomto pøíkladì jsme se rozhodli celý disk alokovat pro OpenBSD.
Výsledkem bude jednoduchá tabulka oddílù(partition table) zapsaná na disk
-- jeden oddíl, velikosti celého hard disku, oznaèená jako OpenBSD 
oddíl(partition type) a nastavená jako bootovací oddíl. Tato volba 
bude tou nejèastìj¹í pro pou¾ívání OpenBSD, nicménì existují systémy, 
na kterých bude postup jiný. Vìt¹ina Compaq systémù, nìkteré DELLy 
a jiné systémy pou¾ívají "maintenance" oddíl, který by mìl zùstat 
zachován. Pokud má vá¹ systém jakýkoliv jiný oddíl, který nechcete 
vymazat, neodpovídejte "yes" na otázku uvedenou vý¹e.

<p> 
Pokud se rozhodnete nealokovat celý disk pro OpenBSD, instalaèní program 
spustí OpenBSD editor disku, 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&sektion=8&arch=i386">ie fdisk(8)</a>.
Více informací o pou¾ívání programu fdisk(8) se nachází ve 
<a href="faq14.html#fdisk">FAQ 14, fdisk</a>.

<p>
<b>Dùle¾itá poznámka</b>
U¾ivatelé platformy i386 s velkým diskem (vìt¹í ne¾ 8G, aèkoliv na 
star¹ích strojích bude mnohem men¹í) by si mìli pøeèíst
<a href="../cs/faq14.html#Largedrive">tento text</a>, ne¾ budou pokraèovat.


<h3>Vytvoøení disklabel</h3>
Dal¹ím krokem je pou¾ití
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8">disklabel(8)</a>
pro rozdìlení OpenBSD oddílu. Více detailù o pou¾ívání disklabel(8)
mù¾ete najít v 
<a href="../cs/faq14.html#disklabel">FAQ 14, disklabel</a>.

<p>
Poznámka: OpenBSD NEPODPORUJE ¾ádný z existujících ¾urnálovacích 
filesystémù jako je napøíklad ReiserFS, IBM JFS nebo SGI XFS. Namísto 
toho pou¾íváme <a href="../cs/faq14.html#SoftUpdates">Soft Updates</a>. 
Filesystém v OpenBSD je FFS.

<ul>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><pre>
Inside the BIOS 'A6' ('OpenBSD') partition you just created, there resides an
OpenBSD partition table which defines how this BIOS partition is to be split
up. This table declares the offsets and sizes of your / partition, your swap
space, and any other partitions you might create.  (NOTE: The OpenBSD disk
label offsets are absolute, ie. relative to the start of the disk... NOT
relative to the start of the BIOS 'A6' partition).

If this disk is shared with other operating systems, those operating systems
should have a BIOS partition entry that spans the space they occupy completely.
For safety, also make sure all OpenBSD file systems are within the offset and
size specified in the 'A6' BIOS partition table.  (By default, the disklabel
editor will try to enforce this).  If you are unsure of how to use multiple
partitions properly (ie. separating /,  /usr, /tmp, /var, /usr/local, and other
things) just split the space into a root and swap partition for now.

# using MBR partition 3: type A6 off 63 (0x3f) size 16450497 (0xfb03c1)

Treating sectors 63-80041248 as the OpenBSD portion of the disk.
You can use the 'b' command to change this.

Initial label editor (enter '?' for help at any prompt)
> <b>?</b>
Available commands:
        p [unit]  - print label.
        M         - show entire OpenBSD man page for disklabel.
        e         - edit drive parameters.
        a [part]  - add new partition.
        b         - set OpenBSD disk boundaries.
        c [part]  - change partition size.
        d [part]  - delete partition.
 	D	  - set label to default.
        g [d|b]   - Use [d]isk or [b]ios geometry.
        m [part]  - modify existing partition.
        n [part]  - set the mount point for a partition.
        r         - recalculate free space.
        u         - undo last change.
        s [path]  - save label to file.
        w         - write label to disk.
        q         - quit and save changes.
        x         - exit without saving changes.
        X         - toggle expert mode.
 z   - zero out partition table.
        ? [cmnd]  - this message or command specific help.
Numeric parameters may use suffixes to indicate units:
        'b' for bytes, 'c' for cylinders, 'k' for kilobytes, 'm' for megabytes,
        'g' for gigabytes or no suffix for sectors (usually 512 bytes).
        Non-sector units will be rounded to the nearest cylinder.
Entering '?' at most prompts will give you (simple) context sensitive help.
> <b>p</b>
device: /dev/rwd0c
type: ESDI
disk: ESDI/IDE disk
label: Maxtor 86480D6
bytes/sector: 512
sectors/track: 63
tracks/cylinder: 15
sectors/cylinder: 945
cylinders: 13395
total sectors: 12658776
free sectors: 12658713
rpm: 3600

16 partitions:
#        size   offset    fstype   [fsize bsize   cpg]
  a: 16450497       63    unused        0     0
  c: 80041248        0    unused        0     0
> <b>d a</b><br>
> <b>a a</b><br>
offset: [63] <b><i>&lt;Enter&gt;</b></i>
size: [12658713] <b>80m</b>
Rounding to nearest cylinder: 163422
FS type: [4.2BSD] <b><i>&lt;Enter&gt;</i></b>
mount point: [none] <b>/</b>
> <b>a b</b>
offset: [163485] <b><i>&gt;Enter&lt;</i></b>
size: [12495291] <b>300m</b>
Rounding to nearest cylinder: 163422 
FS type: [swap] <b><i>&gt;Enter&lt;</i></b>
> <b>a d</b>
offset: [777735] <b><i>&gt;Enter&lt;</i></b>
size: [11881041] <b>80m</b>
Rounding to nearest cylinder: 163485
FS type: [4.2BSD] <b><i>&gt;Enter&lt;</i></b>
mount point: [none] <b>/tmp</b>
> <b>a e</b>
offset: [941220] <b><i>&gt;Enter&lt;</i></b>
size: [11717556] <b>80m</b>
Rounding to nearest cylinder: 163485
FS type: [4.2BSD] <b><i>&gt;Enter&lt;</i></b>
mount point: [none] <b>/var</b>
> <b>a g</b>
offset: [1104705] <b><i>&gt;Enter&lt;</i></b>
size: [11554071] <b>2g</b>
Rounding to nearest cylinder: 4193910
FS type: [4.2BSD] <b><i>&gt;Enter&lt;</i></b>
mount point: [none] <b>/usr</b>
> <b>a h</b>
offset: [5298615] <b><i>&gt;Enter&lt;</i></b>
size: [7360161] <b><i>&gt;Enter&lt;</i></b>
FS type: [4.2BSD] <b><i>&gt;Enter&lt;</i></b>
mount point: [none] <b>/home</b>
> <b>p</b>
device: /dev/rwd0c
type: ESDI
disk: ESDI/IDE disk
label: Maxtor 86480D6
bytes/sector: 512
sectors/track: 63
tracks/cylinder: 15
sectors/cylinder: 945
cylinders: 13395
total sectors: 12658776
free sectors: 0
rpm: 3600

16 partitions:
#        size   offset    fstype   [fsize bsize   cpg]
  a:   163422       63    4.2BSD     1024  8192    16  # /
  b:   614250   163485      swap
  c: 12658776      0    unused        0     0
  d:   163485   779184    4.2BSD     1024  8192    16  # /tmp
  e:   163485   941220    4.2BSD     1024  8192    16  # /var
  g:  4193910  1104705    4.2BSD     1024  8192    16  # /usr
  h:  7360161  5298615   4.2BSD     1024  8192    16  # /home
> <b>w</b>
> <b>q</b>
No label changes.
</pre></td></tr></table>
</ul>

<p>
V¹imnìte si, ¾e ka¾dý pøípojný bod (mount point) má svùj vlastní diskový 
oddíl. Pro mnoho aplikací je nejlep¹í vytvoøít alespoò pìt oddìlených 
filesystémù, jeden z nich je vá¹ / (koøenový) filesystém, druhý je swap, 
dal¹í pak /var, /tmp a /usr . Pokud se do systému bude logovat více 
u¾ivatelù, je vhodné mít separátní /home filesystém. 

<p>
Odpovìdí na otázku "Jak mám rozdìlit disk pro svùj systém ?" je 
"Tak, jak to potøebujete". Øe¹ení se mù¾e li¹it od aplikace k aplikaci.
Pokud si nejste jisti, jak rozdìlit svùj systém, podívejte se na
<a href="#SpaceNeeded"> tuto diskusi
</a>.


<h3>4.1.6 - Konfigurace pøípojných bodù a formátování filesystému</h3>

Nyní pøichází na øadu finální nastavení va¹ích pøípojených oddílù. Pokud 
jste nakonfigurovali pøipojení va¹ich oddílù pomocí disklabel(8), v tomto 
bodì pouze ovìøíte va¹í volbu, jinak je mù¾ete specifikovat teï.

<ul>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><pre>
You will now have the opportunity to enter filesystem information for wd0.
You will be prompted for the mount point (full path, including the prepending
'/' character) for each BSD partition on wd0.  Enter "none" to skip a
partition or "done" when you are finished.

The following partitions will be used for the root filesystem and swap:
        wd0a    /
        wd0b    swap


Mount point for wd0d (size=81742k) [/tmp, RET, none, or done]? <b><i>&gt;Enter&lt;</i></b>
Mount point for wd0e (size=81742k) [/var, RET, none, or done]? <b><i>&gt;Enter&lt;</i></b>
Mount point for wd0g (size=2096955k) [/usr, RET, none, or done]? <b><i>&gt;Enter&lt;</i></b>
Mount point for wd0h (size=3680080k) [/home, RET, none, or done]? <b><i>&gt;Enter&lt;</i></b>
Mount point for wd0d (size=81742k) [/tmp, RET, none, or done]? done <b><i>&gt;Enter&lt;</i></b>

Now you can select another disk to initialize.  (Do not re-select a disk
you have already entered information for).  Available disks are:

wd0

Which one? [done] <b><i>&gt;Enter&lt;</i></b>

You have configured the following devices and mount points:

wd0a /
wd0h /home
wd0d /tmp
wd0g /usr
wd0e /var

============================================================
The next step will overwrite any existing data on:
        wd0a wd0h wd0d wd0g wd0e

Are you really sure that you're ready to proceed? [n] <b>y</b>
Creating filesystems...
Warning: 63 sector(s) in last cylinder unallocated
/dev/rwd0a:     163422 sectors in 173 cylinders of 15 tracks, 63 sectors
        79.8MB in 11 cyl groups (16 c/g, 7.38MB/g, 1792 i/g)
Warning: 445 sector(s) in last cylinder unallocated
/dev/rwd0h:     7360160 sectors in 7789 cylinders of 15 tracks, 63 sectors
        3593.8MB in 487 cyl groups (16 c/g, 7.38MB/g, 1792 i/g)
Warning: 1 sector(s) in last cylinder unallocated
/dev/rwd0d:     163484 sectors in 173 cylinders of 15 tracks, 63 sectors
        79.8MB in 11 cyl groups (16 c/g, 7.38MB/g, 1792 i/g)
/dev/rwd0g:     4193910 sectors in 4438 cylinders of 15 tracks, 63 sectors
        2047.8MB in 278 cyl groups (16 c/g, 7.38MB/g, 1792 i/g)
Warning: 1 sector(s) in last cylinder unallocated
/dev/rwd0e:     163484 sectors in 173 cylinders of 15 tracks, 63 sectors
        79.8MB in 11 cyl groups (16 c/g, 7.38MB/g, 1792 i/g)
</pre></td></tr></table>
</ul>

<p>
Mù¾ete se divit, proè se instalaèní program ptá podruhé na pøípojení oddílù. 
Dùvodem je, ¾e nemù¾ete pøipojit napø. /usr/src pøed tím, ne¾ pøipojíte /usr.]
"Mount point" dialog vám dává mo¾nost pøerovnat poøadí v jakém budou filesystémy
v souboru /etc/fstab.

<p>
V¹imnìte si, ¾e defaultní odpovìd na otázku "Are you really sure that you are ready to proceed ?" 
zní ne, tak¾e musíte pøímo specifikovat, ¾e chcete  pokraèovat a formátovat 
vá¹ disk. Pokud zadáte "no", pak budete vráceni zpìt do shellu a budete 
muset restartovat instalaci znovu napsáním 'install' nebo nabootujete 
znovu z bootdisku. V této èásti instalace dochází k formátování filesystémù. 
Tento proces bude trvat nìjakou chvíli, v závislosti na velikosti 
va¹eho disku.


<h3>4.1.7 - Nastavení sítì</h3>

<p>
Nyní je èas provést nastavení va¹í sítì. Je to velmi dùle¾ité, 
pokud plánujete instalovat dále ze sítì, proto¾e nastavení sítì bude 
provedno podle údajù, které teï zadáte. 
Následuje prùvodce konfigurace sítì instalaèního procesu.

<ul>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><pre>
You will now be given the opportunity to configure the network.  This will be
useful if you need to transfer the installation sets via FTP, HTTP, or NFS.
Even if you choose not to transfer installation sets that way, this information
will be preserved and copied into the new root filesystem.

Configure the network [y] <b><i>&gt;Enter&lt;</i></b>
Enter system hostname (short form, e.g. 'foo'): [] <b>puffy</b>

If any interfaces will be configured using a DHCP server
it is recommended that you do not enter a DNS domain name,
a default route, or any name servers.

Enter DNS domain name (e.g. 'bar.com'): [] <b>example.com</b>

You may configure the following network interfaces (the interfaces
marked with [X] have been succesfully configured):

        [ ] fxp0

Configure which interface? (or 'done') [fxp0] <b><i>&gt;Enter&lt;</i></b>
IP address (or 'dhcp') ? [] <b>199.185.137.55</b>
Symbolic (host) name? [puffy] <b><i>&gt;Enter&lt;</i></b>
Netmask ? [255.255.255.0] <b><i>&gt;Enter&lt;</i></b>
Your use of the network interface may require non-default
media directives.  The default media is:
        media: Ethernet autoselect (none)
This is a list of supported media:
 media none
        media 10baseT
        media 10baseT mediaopt full-duplex
        media 100baseTX
        media 100baseTX mediaopt full-duplex
        media autoselect
 media none instance 1
 media 100baseTX instance 1
 media 100baseTX mediaopt full-duplex instance 1
 media 100baseT4 instance 1
If the default is not satisfactory, and you wish to use another
media, copy that line from above (e.g. "media 100baseTX")
Media directives? [] <b><i>&gt;Enter&lt;</i></b>

You may configure the following network interfaces (the interfaces
marked with [X] have been succesfully configured):

        [X] fxp0
 
Configure which interface? (or 'done') [done] <b><i>&gt;Enter&lt;</i></b>
Enter IP address of default route: [none] <b>199.185.137.128</b>
Enter IP address of primary nameserver: [none] <b>199.185.137.1</b>
Would like to use the nameserver now [y] <b><i>&gt;Enter&lt;</i></b>
</pre></td></tr></table></ul>

V pøíkladu jsme pou¾ili statickou IP adresu. Mù¾ete ale pou¾ít dhcp 
pokud chcete. V tom pøípadì budou v¹echny po¾adované informace získány 
ze vzdáleného DHCP serveru.


<h3>4.1.8 - Výbìr instalaèního média</h3>

<p>
Poté co je va¹e sí» nastavena, instalaèní skript vám umo¾ní provést 
je¹tì dodateèné zmìny v jejím nastavení. Poté jsou pøipojeny filesystémy, 
které jste vytvoøili a je nastaveni heslo superu¾ivatele. Nyní jsou 
lokální disky pøipraveny pro nainstalování OpenBSD balíkù. Poté co jsou 
lokální disky pøipraveny, budete dotázáni, jestli plánujete na tomto 
pou¾ívat X. Pokud odpovíte 'Y', pøidá se do <tt>/etc/systcl.conf</tt> 
øádka <i>machdep.allowaperture=1</i>.

<p>
Nyní musíte vybrat instalaèní médium. 
Mo¾ností jsou následující.

<ul>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><pre>
You will now be given the opportunity to escape to the command shell to do
any additional network configuration you may need.  This may include adding
additional routes, if needed.  In addition, you might take this opportunity
to redo the default route in the event that it failed above.
Escape to shell? [n] <b><i>&gt;Enter&lt;</i></b>
/dev/wd0a on /mnt type ffs (rw, asynchronous, local, ctime=Tue Apr 16 15:50:28 2
002)
/dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, ctime=Tue Apr 16 15:50
:28 2002)
/dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, ctime=Tue Apr 16 15:50:
28 2002)
/dev/wd0g on /mnt/usr type ffs (rw, asynchronous, local, ctime=Tue Apr 16 15:50:
28 2002)
/dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, ctime=Tue Apr 16 15:50:
28 2002)

Please enter the initial password that the root account will have.
Password (will not echo): <b><i>&gt;enter root PW&lt;</i></b>
Password (again): <b><i>&gt;re-enter root PW&lt;</i></b>

Do you expect to run the X Window System? [y] <b><i>&gt;Enter&lt;</i></b>

You must now specify where the install sets you want to use are. They
must either be on a local device (disk, tape, or CD-ROM), an
accessible NFS filesystem or an accessible ftp or http network
server. You will have the chance to repeat this step or to extract 
sets from several places, so you don't have to try to load all the 
sets in one try and can recover from some errors.

Install from (f)tp, (h)ttp, (t)ape, (C)D-ROM or local (d)isk? <b>c</b>
</pre></td></tr></table></ul>

<p>
V tomto pøípadì instalujeme z CD-ROM. Dostanete seznam zaøízení, 
identifikovaných jako CD-ROM. Vìt¹ina lidí má pouze jedno takové; 
pokud ne, pak musíte vybrat správné zaøízení, ze kterého budete 
OpenBSD instalovat. Poté, co vyberete správné zaøízení, budete 
vyzváni na kterém filesystému jsou instalaèní média. 
Pokud pou¾íváte OpenBSD CD-ROM, zvolíte 'c', 
kde 'c' reprezentuje celý disk.
Pøíklad:


<ul>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><pre>
The following CD-ROM devices are installed on your system. 
Please make sure the CD is in the CD-ROM drive and select 
the device containing the CD with the installation sets:

cd0

Which CD-ROM contains the installation media? [cd0] <b><i>&gt;Enter&lt;</i></b>

Enter the directory relative to the mount point that contains
the file: [3.1/i386] <b><i>&gt;Enter&lt;</i></b>
</pre></td></tr></table>
</ul>

<p>
Nyní musíte zadat, v jakém adresáøi jsou instalaèní soubory,
co¾ je na <tt>/3.1/i386/</tt> na oficiálním CDROM.

<h3>4.1.9 - Výbìr instalaèních balíkù a ukonèení instalace.</h3>

<p>
Nyní je naèase vybrat balíky, které budete instalovat. Popis tìchto 
instalaèních souborù je v <a href="#FilesNeeded">dal¹í sekci</a>. 
Soubory, které nalezne instalaèní program se vypí¹ou na 
obrazovku. Va¹ím úkolem je vybrat souèásti, které chcete nainstalovat. 
Normálnì jsou oznaèeny pouze 4 balíky, nesouvisející s X, nicménì pokud nìkdo 
chce naprosté minimum potøebné k bìhu OpenBSD, vybere pouze 
<tt>base31.tar.gz</tt>, <tt>etc31.tar.gz</tt> a <tt>bsd</tt>. 
Ostatní si mo¾ná zvolí v¹echny balíky. Následuje pøíklad plné 
instalace, s vyjímkou balíky games.

<ul>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><pre>
You will now be asked which sets to install. Some of these sets are required 
for your install and some are optional. You will want at least 
the base and bsd sets. Consult the installation notes if you are not sure 
which sets are required!

The following sets are available for extraction. Enter filename, `all' to select 
all sets, or `done'. You may de-select a set by prepending a '-' 
to its name.

        [X] base31.tgz
        [X] etc31.tgz
        [X] misc31.tgz
        [X] comp31.tgz
        [X] man31.tgz
        [X] game31.tgz
        [ ] xbase31.tgz
        [ ] xshare31.tgz
        [ ] xfont31.tgz
        [ ] xserv31.tgz
        [X] bsd
File name? [xbase31.tgz] <b>*</b>

The following sets are available for extraction. Enter filename, `all' to select 
all sets, or `done'. You may de-select a set by prepending a '-' 
to its name.

        [X] base30.tgz
        [X] etc30.tgz
        [X] misc30.tgz
        [X] comp30.tgz
        [X] man30.tgz
        [X] game30.tgz
        [X] xbase30.tgz
        [X] xshare30.tgz
        [X] xfont30.tgz
        [X] xserv30.tgz
        [X] bsd
File name? [done] <b>-game31.tgz</b>

The following sets are available for extraction. Enter filename, `all' to select 
all sets, or `done'. You may de-select a set by prepending a '-' 
to its name.

        [X] base30.tgz
        [X] etc30.tgz
        [X] misc30.tgz
        [X] comp30.tgz
        [X] man30.tgz
        [ ] game30.tgz
        [X] xbase30.tgz
        [X] xshare30.tgz
        [X] xfont30.tgz
        [X] xserv30.tgz
        [X] bsd
File name? [game31.tgz] <b>done</b>
Ready to install sets? [y] <b><i>&gt;Enter&lt;</i></b>
</pre></td></tr></table>
</ul>

<p>
Nyní kdy¾ jste úspì¹nì vybrali balíky, které chcete, budete dotázáni, 
zda jste si jisti, ¾e chcete balíky nainstalovat a ty se poté nainstalují. 
Uká¾e se ukazatel, který vás bude informovat, jak dlouho bude instalace 
trvat. Èasový rozsah závisí na systému, na který OpenBSD instalujete, 
na volbì balíkù a na rychlosti instalaèního média.
Tato èást mù¾e trvat pár minut nebo také nìkolik 
hodin.

<ul>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><pre>
Ready to install sets? [y] <b><i>&gt;Enter&lt;</i></b>

Getting base31.tgz ...
100% |**************************************************| 23299 KB    00:25
Getting etc31.tgz ...
100% |**************************************************|  1164 KB    00:02
Getting misc31.tgz ...
100% |**************************************************|  1664 KB    00:01
Getting comp31.tgz ...
100% |**************************************************| 16061 KB    00:18
Getting man31.tgz ...
100% |**************************************************|  5412 KB    00:08
Getting bsd ...
100% |**************************************************|  4436 KB    00:02
Getting xbase31.tgz ...
100% |**************************************************|  8520 KB    00:06
Getting xshare31.tgz ...
100% |**************************************************|  1815 KB    00:05
Getting xfont31.tgz ...
100% |**************************************************| 30657 KB    00:31
Getting xserv31.tgz ...
100% |**************************************************| 19339 KB    00:11

Extract more sets? [n] <b><i>&gt;don't answer yet!&lt;</i></b>
</pre></td></tr></table>
</ul>

<p>
Pokud má vá¹ systém málo RAM (ménì ne¾ 20M na i386), je¹te
nemaèkejte ENTER !

<a name="SmallRAM"> </a>
<h4>Speciální kroky pro stroje s nedostatkem RAM</h4>
Jak roste OpenBSD, rostou také minimální nároky na RAM, a pravdìpodobnì 
je¹tì porostou. Dal¹í krok instalaèního procesu bude potøebovat více 
ne¾ 16M RAM a nepovede se na star¹ích strojích kde je ménì ne¾ 
20M RAM (opìt, tyto údaje se vztahují k i386 -- jiné platformy 
budou potøebovat mnohem ménì RAM, ale tento trik mù¾ete pou¾ít i na 
nì, pokud se dostanou blízko svých limitù).

<p>
Bìhem instalaèního procesu není pou¾íván swap, reálná RAM je 
v¹echno co máte. 'MAKEDEV', který bude následovat, bude potøebovat víc 
ne¾ zbytek instalace. Proto¾e systém s malou RAM mù¾e být stále velmi pou¾itelný 
pro mnoho aplikací, vyøe¹ení tohoto problému je 
velmi u¾iteèný trik.

<p>
øe¹ením je aktivovat swap hned teï. Swap oddíl byl vytvoøen 
a soubory jsou na disku, tak¾e jediné co potøebujeme je manuálnì 
swap aktivovat. Tak¾e, nemaèkejte 'ENTER', ale místo toho 
stisknìte '!', který vás pøepne do shellu a spus»te 
<a href="http://www.openbsd.org/cg-bin/man.cgi?query=swapon&sektion=8">swapon</a>
z pøipojeného oddílu na harddisku:

<ul><table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><tt>
Extract more sets? [n] <b>!</b><br>
Type 'exit' to return to install.<br>
# <b>/mnt/sbin/swapon /dev/wd0b</b><br>
# <b>exit</b><br>
<b>n</b><br>
</tt></td></tr></table>
</ul>

V¹imnìte si volby 'n' jako posledního kroku. Vzpomeòte si, ¾e jsme volali shell
z dialogu "Extract more sets?", tak¾e poslední 'n' je odpovìdí na tuto 
otázku.

<p>
Teï se mù¾eme vrátit k normální instalaci.

<h3>Zakonèení</h3>
Jakmile je hotovo, zbývá u¾ jenom nastavit èasovou zónu a nainstalovat 
boot blok. Nastavení èasové zóny je jednoduché. Prostì si vyberte místo, 
kde ¾ijete a zadejte jméno. To je v¹echno ! Po tom v¹em napi¹te 'reboot' 
na shell promptu a pøi dal¹ím startu vám u¾ 
nabootuje OpenBSD!

<ul><table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><pre>
Extract more sets? [n]

Copying... fstab hostname.fxp0 hosts myname mygate resolv.conf ...done.

Select a time zone for your location. Timezones are represented on the system
by a directory structure rooted in "/usr/share/timezone". Most timezones can
be selected by entering a token like "MET" or "GMT-6".  Other zones are
grouped by continent or country, with detailed zone information separated by
a slash ("/"), e.g. "US/Pacific" or "Canada/Mountain".

What timezone are you in? (`?' for list) [US/Pacific] <b>Canada</b>
Select a sub-timezone of 'Canada' (`?' for list): <b>?</b>
Atlantic            Eastern             Pacific
Central             Mountain            Saskatchewan
East-Saskatchewan   Newfoundland        Yukon
Sele of 'Canada' ('?' for list): <b>Mountain</b>
You have selected timezone "Canada/Mountain".
Making all device nodes (by running /dev/MAKEDEV all) ...... done.
Installing boot block...
boot: /mnt/boot
proto: /usr/mdec/biosboot
device: /dev/rwd0c
/usr/mdec/biosboot: entry point 0
proto bootblock size 512
room for 12 filesystem blocks at 0x16f
Will load 7 blocks of size 8192 each.
Using disk geometry of 63 sectors and 255 heads.
 0: 56 @(0 152 8) (9583-9638)
 1: 40 @(0 153 1) (9639-9678)
 2: 16 @(0 9 27) (593-608)
/mnt/boot: 3 entries total
using MBR partition 3: type 166 (0xa6) offset 63 (0x3f)

Enabling machdep.allowaperture. Read xf86(4) for more information.


Cleaning up...
/dev/wd0e: unmount from /mnt/var
/dev/wd0g: unmount from /mnt/usr
/dev/wd0d: unmount from /mnt/tmp
/dev/wd0h: unmount from /mnt/home
/dev/wd0a: unmount from /mnt
Done.

CONGRATULATIONS!  You have successfully installed OpenBSD!  To boot the
installed system, enter halt at the command prompt. Once the system has
halted, reset the machine and boot from the disk.

# halt
syncing disks... done

The operating system has halted.
Please press any key to reboot.
</pre></td></tr></table>
</ul>

<h3>Ne¾ restartujete</h3>
V tomto bodì je vá¹ systém nainstalován a pøipraven k restartu 
a konfiguraci slu¾eb. Ne¾ k tomu ale pøistoupíte bylo by  moudré
zkontrolovat <a href="../cs/errata.html">Errata</a> a podívat se
jestli existují nìjaké chyby, které se vás mohou pøímo dotknout.

<h3>Poté co restartujete</h3>

<p>
Tato sekce by vás mìla nasmìrovat správným smìrem, pokud máte dotazy, co 
dìlat bezprostøednì po instalaci va¹eho OpenBSD systému. 
V podstatì je v¹e shrnuto na manuálové stránce 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&sektion=8&format=html">afterboot(8)</a>, 
její¾ pøeètení by mìlo být jednou z prvních vìcí, kterou po instalaci 
OpenBSD udìláte. 
Následující tabulka vás odká¾e do dal¹ích sekcí FAQ, které budou pro vás podstatné.

<ul>
<li><a href="faq10.html#AddDelUser">Pøidávání u¾ivatelù v OpenBSD</a>
<li><a href="faq6.html#Setup">Úvodní nastavení sítì</a>
<li><a href="faq2.html#ManPages">Manuálové stránky populárních programù</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi">Manuálové stránky 
OpenBSD na webu </a>
<li><a href="faq8.html#Packages">OpenBSD Balíky</a> - Pøedkompilované binární 
balíky.
</ul>

<h3>Je¹tì jedna vìc...</h3>
Vývojáøi OpenBSD vás ¾ádájí, 
abyste <a href="#SendDmesg">poslali kopii va¹eho dmesg</a>.
Vývojáøi to skuteènì ocení a u¾ivatelé 
konec koncù také.

<a name="1.14"></a>
<h2>Jiné zdroje informací</h2>

<ul>
Existuje dal¹í dokumentace pro ty, kteøí mají speciální potøeby 
nebo zájem. Mù¾ete ji získat z jakéhokoliv 
z ftp mirrorù.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.1/i386/INSTALL.i386">INSTALL.i386</a>
 - Vyèerpávající instalaèní dokument. Podobné dokumenty existují pro v¹echny 
 platformy.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.1/i386/INSTALL.linux">INSTALL.linux</a>
 - Instalování OpenBSD spolu s Linuxem.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.1/i386/INSTALL.mbr">INSTALL.mbr</a>
 - Vysvìtlení Master Boot Recordu.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.1/i386/INSTALL.pt">INSTALL.pt</a>
 - Vysvìtelení k partition tables.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.1/i386/INSTALL.dbr">INSTALL.dbr</a>
 - DOS Floppy Disk Boot Sector.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.1/i386/INSTALL.chs">INSTALL.chs</a>
 - Vysvìtlení pøekladu CHS.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.1/i386/INSTALL.ata">INSTALL.ata</a>
 - ATA/ATA-1/ATA-2/IDE/EIDE/atd FAQ
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.1/i386/INSTALL.os2br">INSTALL.os2br</a>
 - The os2 Boot Sector.
</ul>

<p>
<a name="FilesNeeded"></a>
<a name= "4.2"></a>
<h2>4.2 - Které soubory jsou nutné pro instalaci?</h2>

<p>
K dispozici je øada balíkù obsahujících binární kód OpenBSD, ale které z nich
potøebujete k tomu, abyste nastartovali vá¹ systém? Zde je pøehled ka¾dého
z balíkù.

<p>
<ul>
    <li><strong>base31.tar.gz</strong>    - Zde je základ OpenBSD systému 
      <b>Nutné</b>
    <li><strong>etc31.tar.gz</strong>     - V¹echny konfiguraèní soubory z /etc 
      <b>Nutné</b>
    <li><strong>comp31.tar.gz</strong>    - Pøekladaè a s ním spojené programy, 
      knihovny. <b>Doporuèeno</b>
    <li><strong>man31.tar.gz</strong>     - Manuálové stránky <b>Doporuèeno</b>
    <li><strong>misc31.tar.gz</strong>    - Obsahuje rùzné informace, dokumentaci pro nastavení systému
    <li><strong>game31.tar.gz</strong>    - Hry pro OpenBSD
    <li><strong>xbase31.tar.gz</strong>   - Základ pro instalaci X11
    <li><strong>xfont31.tar.gz</strong>   - X11 fontserver a fonty
    <li><strong>xserv31.tar.gz</strong>   - X11 servery
    <li><strong>xshare31.tar.gz</strong>  - Manuálové stránky, rùzná lokální nastavení, 
      hlavièkové soubory pro X11 atd.
    <li><strong>bsd</strong>         - Toto je jádro systému. Pochopitelnì <b>Nutné</b>
</ul>

<p>
<a name= "SpaceNeeded"></a>
<a name= "4.3"></a>
<h2> 4.3 - Kolik místa potøebuji pro instalaci OpenBSD?</h2>

<p>
Následující údaje jsou minimální navrhované velikosti podstromù adresáøové struktury pro
plnou instalaci systému. Hodnoty obsahují dostatek místa, které vám umo¾ní
spustit typickou domácí instalaci systému pøipojeného k Internetu.

<ul>
<li>Toto jsou minimální hodnoty.
<li>Pokud plánujete instalovat je¹tì navíc spoustu dal¹ího softwaru, vytvoøte
diskový oddíl /usr veliký!!  <strong>Nejménì</strong> ztrojnásobte 
tyto hodnoty!!
<li>Pro systém, který obsluhuje spoustu emailù nebo webových stránek 
(umístìných ve /var/mail respektive /var/www) vytvoøte vá¹ diskový 
oddíl /var podstatnì vet¹í.
<li>Systém 
s mnoha u¾ivateli, který bude generovat spoustu logù, bude lépe
rovnì¾ vytvoøit mnohem vìt¹í diskový oddíl /var (/var/log).
<li>Pokud oèekáváte, ¾e budete chtít pøekompilovat kernel nebo celý systém
ze zdrojových kódù, potøebujete udìlat diskový oddíl /usr výraznì vìt¹í,
<b>minimálnì</b> o 800M-1G vìt¹í ne¾ je uvedeno vý¹e.
</ul>

Ne¾ budete èíst dál, uvìdomte si, ¾e /usr a /usr/X11R6 jsou obvykle dvì èásti 
jednoho a toho samého souborového systému, tj. /usr a není tudí¾ velkou výhodou
rozdìlit je do samostatných oddílù.
<ul>
<strong>
<pre>
SYSTÉM          /       /usr    /var    /usr/X11R6
alpha           50M     250M    25M     100M
amiga           40M     200M    25M     180M
hp300           40M     200M    25M      80M
i386            40M     200M    25M     140MM
mac68k          40M     200M    25M      80M
macppc  50M 200M 25M 100M
mvme68k         40M     2OOM    25M      80M 
sparc           40M     259M    25M      49M
sparc64  50M 200M 25M 100M
vax  75M 125M 25M 180M
</pre>
</strong>
</ul>

<p>
V okam¾iku, kdy se nacházíte v editoru diskových oddílù (disklabel editor),
mù¾ete zaøídit, aby celý systém obsahoval jen dva oddíly a sice 'a' (hlavní
souborý systém) a 'b' (odkládací prostor, swap). Souborový systém oznaèený jako 'a' v disklabel editoru 
se stane va¹ím koøenovým, oddílem, jeho¾ velikost by mìla tudí¾ být souètem v¹ech 3 hlavních 
hodnot vý¹e (/, /usr, a /var) plus místo pro /tmp. Oddíl oznaèený jako 'b' se automaticky stane odkládacím
prostorem -- doporuèujeme minimum 32MBi, ale pokud máte na disku dostatek místa,
roz¹iøte jej nejménì na 64 MB. Pokud máte spoustu místa na disku, udìlejte ho
velký 256MB, nebo dokonce 512MB.

<p>
Zde je pìt hlavních dùvodù proè pou¾ívat oddìlené souborové systémy, místo
umístìní v¹eho na jeden nebo dva:
<ul>
<li><b>Bezpeènost</b>: Mù¾ete oznaèit nìkteré souborové systémz jako 'nosuid',
'nodev', 'noexec', 'readonly', atd..
<li><b>Stabilita</b>: U¾ivatel nebo ¹patnì se chovající program mù¾e zaplnit
souborový systém daty, pokud má zápisová práva na tomto souborovém systému. 
Bìh va¹ich kritických aplikací, které jsou samozøejmì spu¹tìny v jiných souborových 
systémech, tímto nebude pøeru¹en. 
<li><b>Rychlost</b>: Souborový systém na který se èasto zapisuje se mù¾e svým
zpùsobem fragmentovat. (Na¹tìstí ffs filesystém, který pou¾ívá OpenBSD, se
vypoøádá se silnou fragmentací.)
<li><b>Integrita</b>: Pokud jeden filesystém je z nìjakého dùvodu poru¹en,
pak ostatní jsou stále v poøádku.
<li><b>Velikost</b>: Hodnì platform má problémý s oblastí, ze které 
mù¾e boot ROM naèíst kernel. V nìkterých pøípadech je tento limit velice 
malý (504M pro starou 486), jindy jde o mnohem vìt¹í limit 
(8G na nových i386). Proto¾e kernel mù¾e být kdekoliv v oblasti root 
oddílu, celý koøenový adresáø by mìl být v této limitní oblasti. 
Více detailù najdete <a href="faq14.html#LargeDrive">tady</a>. 
Dobrý tip je mít koøenový oddíl(root partition) v oblasti kompletnì 
pod 2G, pokud ov¹em nevíte, ¾e vá¹e platforma ( a hlavnì vá¹ poèítaè!) 
zvladne vìt¹í (nebo men¹í) limit. 
</ul>

<p>
Nìkolik dal¹ích úvah o oddílech
<ul>
  <li>Pro va¹e první experimenty a pokusy se systémem mù¾e být jeden velký / 
  oddíl a swap nejsna¾¹í, ne¾ si zjistíte, kolik místa vlastnì 
  potøebujete.
  <li>Systém pøípojený k Internetu nebo jinému nepøátelskému prostøedí by 
  mìl mít oddìlený oddíl pro /var (mo¾ná dokonce /var/log/) pro logování.
  <li>Samostatný oddíl pro /home je vhodný. Nová verze OS? Sma¾te v¹echno 
  ostatní, kromì /home a reinstalujte.
  <li>Samostatný oddíl pro cokoliv co generuje velké mno¾ství souboru. Mù¾e 
  být rychlej¹í zformátovat a znovu vytvoøit file systém, ne¾ je v¹echny 
  mazat. Podívejte se na 
  <a href="../upgrade-minifaq.html#1.5">upgrade-minifaq</a> 
  pro pøíklad (/usr/obj).
  <li>Pokud budete chtít vá¹ systém zkompilovat ze zdrojù, a» u¾ z jakýchkoliv 
  dùvodù, bude zdroj v /usr/src. Pokud /usr/src nebude mít vlastní oddíl, 
  ujistìte se, ¾e je v /usr dostatek místa.
  <li>Èasto opomínaný fakt:<b>nemusíte</b> alokovat v¹echno místo na hard disku 
  pøi instalaci systému. Proto¾e je dnes celkem obtí¾né sehnat nový disk 
  men¹í ne¾ 20G, dává smysl nechat si èást disku v rezervì. Pokud budete 
  potøebovat více místa na jakémkoliv oddílu, mù¾ete vytvoøit 
  nový oddíl v nealokovaném prostoru, <a href="faq10.html#DupFS">duplikovat</a> 
  existující oddíl na nový, zmìnit 
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&sektion=5">/etc/fstab</a>, 
  aby záznamy ukazovaly na nový oddíl, 
  znovu pøipojit oddíl(remount) a je po problému.
  <li>Pokud udìláte oddíl velistí blí¾ící se minimu, doporuèení, 
  budete toho pravdìpodobnì pozdìji litovat, kdy¾ budete potøebovat 
  upgradnout systém.
</ul> 


<p>
<a name= "Multibooting"></a>
<a name="4.4"></a>
<h2>4.4 - Bootování více operaèních systému spolu s OpenBSD (i386, alpha)</h2>

<p>
<strong>OpenBSD a NT (nebo XP)</strong>

<p>
Pro bootování buïto OpenBSD a NT (nebo XP) mù¾ete pou¾ít NTloader, bootloader, který
pou¾ívají NT. Pro multi-boot s NT potøebujete kopii va¹eho pbr z OpenBSD.
(pbr=patrition boot record) Po spu¹tìní pøíkazu installboot mù¾ete pbr 
zkopírovat nìjak takhle:

<ul>
<pre>
  # <strong>dd if=/dev/rsd0a of=openbsd.pbr bs=512 count=1</strong>
</pre>
</ul>

<p>
Nyní nabootujte NT a umístìte openbsd.pbr do C:. Pøidejte øádek typu tohoto
na konec souboru <tt>C:\BOOT.INI</tt>:

<ul>
<pre>
  c:\openbsd.pbr="OpenBSD"
</pre>
</ul>

<p>
Po rebootování byste mìli být schopni vybrat OpenBSD z NT loader menu. 
Více informací o NTloaderu je zde: 
<a href="http://www.tburke.net/info/ntldr/ntldr_hacking_guide.htm">
NTLDR hacking Guide. </a>

<p>
Ve Windows XP také mù¾ete upravit bootovací informace pomocí GUI, viz
<a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;q289022">XP 
Boot.ini HOWTO</a>

<p>
<strong>OpenBSD & Windows or DOS (i386)</strong>

<p>
Pro bootování OpenBSD spoleènì s Windows 3.1, Windows95 nebo DOSem musíte pou¾ít loader 
na systém, který doká¾e bootovat mezi OpenBSD, Windows nebo DOS! Pár
bootloaderu na výbìr je tady: 
<a href="http://www.freebird.org/sw-map/bootmanager.html">osbs20b8.zip</a> 
nebo <a href="http://www.ranish.com/part/">The Ranish Partition 
Manager</a>. Oba dva jsou schopny bootovat OpenBSD.

<p>
<strong>OpenBSD & Linux (i386)</strong>

<p>
Zamìøte se prosím na 
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.0/i386/INSTALL.linux">INSTALL.linux</a>, kde najdete
dostatek instrukcí pro tuto kombinaci. 

<p>
<a name= "SendDmesg"></a>
<a name="4.5"></a>
<h2>4.5 - Zaslání va¹eho dmesg na dmesg@openbsd.org po instalaci</h2>

<p>
Pouze pro pøipomenutí, pro vývojáøe OpenBSD je dùle¾ité vìdìt na jakém hardwaru
OpenBSD pracuje, a na jakém nepracuje bezchybnì.

<p>
Citát z /usr/src/etc/root/root.mail
<pre>
If you wish to ensure that OpenBSD runs better on your machines, please do us
a favor (after you have your mail system setup!) and type
        dmesg | mail dmesg@openbsd.org
so that we can see what kinds of configurations people are running.  We will
use this information to improve device driver support in future releases.
(We would be much happier if this information was for the supplied GENERIC
kernel; not for a custom compiled kernel).  The device driver information
we get from this helps us fix existing drivers.
</pre>

<p>
Ujistìte se, ¾e posíláte email z úètu, který je rovnì¾ schopen emaily pøijímat,
aby vás vývojáøi mohli kontaktovat, pokud by mìli nìco co by chtìli otestovat
nebo nìco zmìnit na va¹em nastavení, aby toto zaèalo fungovat. Není vùbec podstatné, 
zda zasíláte email z toho samého stroje, na kterém bì¾í OpenBSD.
Pokud stroj není schopen pøijímat emaily, napi¹te jenom

<pre>
 dmesg | mail vá¹-úèet@vá¹email.cz
</pre>
a pak forwardujte zprávu na 
<pre>
 dmesg@openbsd.org
</pre>
kde <tt>vá¹-úèet@vá¹email.cz</tt> je vá¹ bì¾ný e-mail.
(nebo pøepravte výstup z dmesg pomocí ftp/scp/diskety/po¹tovního holuba...)

<p>
<strong>POZNÁMKA</strong> - Posílejte prosím jenom dmesg z GENERIC jádra.
vámi kompilované jádro s odstranìnými device drivery není pro nás pøínosem.

<a name= "AddFileSet"></a>
<h2>4.6 - Pøidání souborového setu po instalaci</h2>
"Ach jo! Zapomnìl jsem pøi instalaci pøidat instalaèní balík!"
<p>
Obèas si èlovìk uvìdomí, ¾e SKUTEÈNÌ potøebuje <tt>comp31.tgz</tt> (nebo
nìjakou jinou systémovou komponentu) a¾ po instalaci. 
Dobrá zpráva: Existují dva jednoduché zpùsoby jak pøidat instalaèní set 
poté co jste u¾ instalaci dokonèili:

<h3>Pou¾ití procesu Upgrade</h3>
Jednodu¹¹e nabootujte instalaèní médium (CD-ROM nebo Floppy) a vyberte
Upgrade (namísto Install). Kdy¾ se vám objeví seznam souborových setù pro
instalaci, vyberte si ten z nich, který jste zapomnìli nainstalovat,
vyberte zdroj, odkud ho budete instalovat a instalaèní skript v¹e u¾ udìlá za vás.

<h3>Pou¾ití tar(1)</h3>
Instalaèní sety jsou jednoduché zkompresované soubory ve formátu tar
a mù¾ete je extrahovat manuálnì do root adresáøe:
<ul>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><pre>
# cd /
# tar xzvpf comp31.tgz
</pre></td></tr></table>
</ul>
Nezapomeòte na volbu <tt>'p'</tt> v pøedchozím pøíkazu, aby se vám správnì
nastavila práva na souborech!
<p>
Bì¾nou chybou je pou¾ití 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a>
pro pøidání chybìjících instalaèních setù. Tento zpùsob nefunguje, pgk_add(1) 
je urèen pro soubory s packages, ne pro generické tar soubory jako jsou instalaèní sety.
<p>

<a name="bsd.rd">
<h2>4.7 - Co je 'bsd.rd'?</h2>
<b><tt>bsd.rd</tt></b> je "RAM disk" kernel. Tento soubor je u¾iteèný, øada
vývojáøù dbá na to, aby tento soubor nechybìl nikdy na root oddílu jejich
filesystému.

<p>
"RAM disk kernel" je speciálnì pøipravené jádro systému, jeho¾ root file systém
je namísto tradièního fyzického disku obsa¾en pøímo v souboru obsahujícím
jádro. Programy, které jsou k dispozici v root filesystému RAM disk jádra,
jsou ulo¾eny spolu s jádrem v tom samém souboru <tt>bsd.rd</tt> a pøi
spu¹tìní jsou startovány z file systému ulo¾eného v pamìti RAM.
<tt>bsd.rd</tt> obsahuje celou øadu programù, které vám umo¾ní provést údr¾bu systému a instalaci.

<p>
Na nìkterých platformách je <tt>bsd.rd</tt> skuteèná preferovaná instalaèní
technika -- umistíte toto jádro na existující souborový systém, 
nabootujete a spustíte z nìj instalátor. Na vìt¹inì platform na kterých
máte starou verzi OpenBSD mù¾ete pomocí FTP stáhnout novou verzi 
<tt>bsd.rd</tt>, nabootovat z ní a nainstalovat novou verzi OpenBSD 
bez pou¾ití jakéhokoliv odstranitelného média, jako je 
napø. CD nebo disketa.

<p>
Zde je pøíklad bootování <tt>bsd.rd</tt> na i386 systému:

<ul>
<table border=0 width="800"><tr><td nowrap bgcolor="#EEEEEE"><pre>
Using Drive: 0 Partition: 3
reading boot.....
probing pc0 com0 com1 apm mem[639k 255M a20=on]
disk fd0 hd0
>> OpenBSD/i386 BOOT 1.28
boot> <b>boot hd0a:/bsd.rd</b>
<i>. . . normální boot instalace . . .</i>
</pre></td></tr></table>
</ul>
Jak je zvýraznìno, budete dovedeni k instalaènímu programu, ale
stejnì tak mù¾ete instalátor opustit do shellu a provést údr¾bu systému.
<p>
Obecné pravidlo pro bootování z <tt>bsd.rd</tt> je zmìnit va¹e bootovací
jádro z <tt>/bsd</tt> na <tt>bsd.rd</tt> za pou¾ití jakýchkoliv prostøedkù
typických pro va¹í platformu.
<p>
<br>

<font color= "#0000e0">
<a href= "index.html">[Zpátky na hlavní stránku]</a>
<a href= "faq3.html">[Do sekce 3.0 - Jak získat OpenBSD]</a>
<a href= "faq5.html">[Do sekce 5.0 - Konfigurace jádra a nastavení disku]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt= "[zpìt]"></a>
<a href= "mailto:www@openbsd.org">www@openbsd.org</a><br>
<small>
<br>
Originally [OpenBSD: faq4.html,v 1.111 ]
<br>
$Translation: faq4.html,v 1.21 2002/09/30 14:31:29 certik Exp $
<br>
$OpenBSD: faq4.html,v 1.18 2002/10/02 11:55:54 jufi Exp $
</small>
</body>
</html>
