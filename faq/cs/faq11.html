<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>11 - X Window systém</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD FAQ 11 - The X Window System">
<meta name="keywords" content="openbsd,faq11">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1998-2012 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000">

<a href="../../cs/index.html">
<img alt="[OpenBSD]" src="../../images/smalltitle.gif" border="0" height="30" width="141">    
</a>
<p>
<font color="#0000e0">
<a href="index.html">[FAQ Index]</a>
<a href="../faq10.html">[Do sekce 10 - Správa systému]</a>
<a href="../faq12.html">[Do sekce 12 - Specifické otázky o hardware a platformách]</a>
</font>

<h1><font color="#e00000">11 - X Window systém</font></h1>
<hr>

<p>
<h3>Obsah</h3>
<ul>
<li><a href="#Intro">11.1 - Úvod do X</a>
<li><a href="#ConfigX">11.2 - Konfigurace X</a>
<li><a href="#amd64i386">11.3 - Konfigurace X na amd64 a i386</a>
<li><a href="#StartingX">11.4 - Spuštění X</a>
<li><a href="#CustomizingX">11.5 - Přizpůsobení X</a>
</li>
</ul>

<hr>

<p>
<a name="Intro"></a>
<h2>11.1 - Úvod do X</h2>

X Window systém (občas nazývaný prostě "X", jindy zase, nesprávně nazývaný
"X Windows") je prostředí, které nabízí grafické služby pro OpenBSD a jiné
systémy založené na Unixu.
Ale samo o sobě nabízí X velmi málo: je potřeba mít také "Window Manager"
aby bylo možno uživateli nabídnout grafické rozhraní.
Většina "osobnosti", kterou je možné cítit z X je díky window manageru než
samotných X.
OpenBSD je dodáváno s free verzí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fvwm&amp;sektion=1">fvwm(1)</a>
a 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm&amp;sektion=1">cwm(1)</a>
window managerů, ačkoliv si můžete přát použít jakýkoliv jiný window manager
z těch co jsou v <a href="../faq15.html">balíčcích</a>.
Hledejte pomocí klíčového slova "<tt>window manager</tt>" pro seznam mnoha
window managerů, které jsou k dispozici.

<p>
X je považován za "client-server" strukturovaný protokol, ale terminologie
je občas matoucí.
Počítač s grafikou na obrazovce je "X Server"-
Aplikace, která řídí X server a říká mu co umístit na obrazovku je "X klient",
ačkoliv to může být mnohem více výkonější počítač v datovém centru.
Tento model může být použit k tomu, že velké a na procesor náročné aplikace
(X klienti) běžící na velmi výkonném stroji používají X server běžící na malém,
nízko výkonném stroji na vašem stole pro své uživatelské rozhraní.

<p>
Je možné pouštět X klienty na systému bez jakékoliv grafické podpory.
Například je možné mít aplikaci (X klienta) běžící na mvme88k, která
zobrazuje svůj výstup na grafickém displeji alpha (X server).
Protože X je velmi dobře definovaný multiplatformní protokol, tak je dokonce
možné aby X aplikace běžící (například) na Solaris stroji používala
OpenBSD stroj pro své zobrazení.

<p>
Klient a server mohou také běžet na stejném stroji a pro většinu této sekce
to budeme i předpokládat.

<h3>11.1.1 - Kolik potřebuji výkonu abych mohl používat X?</h3>
X samotné je docela velký program a rychlý počítač se bude hodit
pokud budete X spouštět a vypínat velmi často.
Ovšem jakmile už jednou běží, tak reaguje velmi dobře i skromném počítači.
Pro získání dobrého výkonu zobrazení na některých platformách, dokonce
i když jen pro text, tak budete chtít používat X.
Tyto platformy jako <a href="../../sparc.html">sparc</a> a
<a href="../../sparc64.html">sparc64</a> byly zamýšleny pro použití s
grafickým rozhraním a výkon textové konzole je velmi ubohý.

<p>
Prostě důvodem běžících X je obvykle spouštět X aplikace.
Některé X aplikace jsou velmi efektivní, jiné si zdánlivě vezmou a použijí
veškerý výkon procesru a všechnu RAM, kterou jim můžete dát.
Samozřejmě, že někteří uživatelé chtějí použít X jen k poskytnutí velkého
množství
Of course, some users just like to use X to provide a large number of 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xterm&amp;sektion=1">xterm(1)</a>ů,
což může být provedeno na velmi nenáročném hardware.

<h3>11.1.2 - Mohu mít alespoň nějakou grafiku i bez X?</h3>
Předpokládáme, že nebudete akceptovat
<a href="http://en.wikipedia.org/wiki/ASCII_Art">ASCII grafiku</a>,
která potřebuje nějakou formu framebuffer konzolového ovladače.
Některé operační systémy toto nabízí, ale aktuálně zde nic takového pro
OpenBSD není a není tady pro tohle ani moc zájmu mezi vývojáři.

<p>
<a name="ConfigX"></a>
<h2>11.2 - Konfigurace X</h2>
<b>Dobré zprávy:  Na většině hardware a většině platforem X
nepotřebuje žádnou konfiguraci. Prostě to funguje.</b>

<p>
Detaily manuální konfigurace X se významně liší od platformy k platformě.
Ve všech případech najdete instrukce a jiné informace specifické pro platformu
v <tt>/usr/X11R6/README</tt> v nainstalovaném systému.

<p>
Několik platforem vyžaduje 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&amp;sektion=4">xf86(4)</a>
X aperture ovladač, který poskytuje přístup do paměti a I/O 
portům VGA desky a PCI konfiguračním registrům požadovaným X serverem.
Tento ovladač musí být povolen předtím než je použit. Buď odpovědí
"yes" na tuto otázku během instalace:

<blockquote><pre>
Do you expect to run the X window System [no]
</pre></blockquote>

nebo změnou hodnoty <tt>machdep.allowaperture</tt> na
odpovídající ne-nulovou hodnotu v <tt>/etc/sysctl.conf</tt> pro vaši
platformu a restartem stroje (tato sysctl nemůže být změněna po restartu
 z bezpečnostních důvodů).
Toto má dopady na bezpečnost, takže to nedělejte, pokud to opravdu nepotřebujete.

<h3>11.2.1 - alpha</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.alpha"
>/usr/X11R6/README</a> pro alpha.

<p>
Nastavte <tt>machdep.allowaperture=1</tt> v <tt>/etc/sysctl.conf</tt>.

<p>
TGA a některé VGA karty jsou podporovány.
Žádná další konfigurace by neměla být potřeba.

<h3>11.2.2 - amd64</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.amd64"
>/usr/X11R6/README</a> pro amd64.

<p>
Nastavte <tt>machdep.allowaperture=2</tt> v <tt>/etc/sysctl.conf</tt>.

<p>
Pro většinu uživatelů se X na amd64 automaticky konfiguruje úspěšně, takže
žádná další konfigurace není potřeba.
POKUD je nějáká konfigurace nutná, tak použijte
<a href="#amd64i386">X&nbsp;-configure</a>
proces <a href="#amd64i386example">níže</a>.

<h3>11.2.3 - armish</h3>
Žádné X servery, pouze X klienti.

<h3>11.2.4 - hp300</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.hp300"
>/usr/X11R6/README</a> pro hp300.

<h3>11.2.5 - hppa</h3>
Žádný X server, pouze X klienti.

<h3>11.2.6 - i386</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.i386"
>/usr/X11R6/README</a> pro i386.

<p>
Nastavte <tt>machdep.allowaperture=2</tt> v <tt>/etc/sysctl.conf</tt>.

<p>
Pro většinu uživatelů se X na i386 automaticky konfiguruje úspěšně, takže
žádná další konfigurace není potřeba.
POKUD je nějáká konfigurace nutná, tak použijte
<a href="#amd64i386">X&nbsp;-configure</a>
proces <a href="#amd64i386example">níže</a>.

<h3>11.2.7 - landisk</h3>
Žádné X servery, pouze X klienti.

<h3>11.2.8 - loongson</h3>
Konfigurace není potřeba.

<h3>11.2.9 - luna88k</h3>
Žádné X servery, pouze X klienti.

<h3>11.2.10 - macppc</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.macppc"
>/usr/X11R6/README</a> pro macppc.
   
<p>
Nastavte <tt>machdep.allowaperture=2</tt> v <tt>/etc/sysctl.conf</tt>.

<p> 
Podporované Macintosh PPC systémy mohou běžet dvěma ruznými způsoby:
"accelerated" a "framebuffer" (bez akcelerace).

<p>
V "framebuffer" módu systém poběží s 8 bity na
pixel a video rozlišení je kontrolováno Macintosh
prostředím. Z toho důvodu budete chtít pravděpodobně zachovat
malou MacOS sekci na vašem disku pro nastavení těchto voleb.
Tento mód má tu výhodu, že "Prostě funguje", ale může být šíleně neflexibilní
(například změna rozlišení může vyžadovat spuštění MacOS).

<p>
Pokud má váš Macintosh video systém založený na ATI, tak může používat
akcelerovaný X server, který dává lepší výkon a více kontroly nad OpenBSD
prostředím.
NVIDIA video karty v některých macppc systémech budou také v mnoha
případech fungovat.
README soubor obsahuje detaily o konfiguraci akcelerovaného ovladače.
Začněte použitím ukázkového souboru.

<p>
Ačkoliv README soubor popisuje použití standardní Apple myši s jedním
tlačítkem v X, tak pokud nepoužíváte laptop je velmi doporučováno, že
si koupíte moderní USB myš od jakéhokoliv výrobce s třemi nebo více tlačítky.

<h4>CRT iMacy a X</h4>
iMacy mají velmi neobvyklé (v této době) CRT, které mají pevnou
horizontální frekvenci skenování.
Pokusy použít horizontální frekvence mimo velmi úzký rozsah
způsobí, že monitor se nezapne.
Následující řádky přidané do xorg.conf v <tt>Section
"Monitor"</tt> oblasti způsobí, že mnoho CRT-založených iMaců v rozsahu 333MHz
až 500MHz (a možná i více!) funguje dobře:

<blockquote><pre>
        HorizSync       60.0 - 60.0
        VertRefresh     43.0 - 117.0 
</pre></blockquote>

Můžete si přát omezit spodní limit <tt>VertRefresh</tt> na
hodnoty, které vám budou asi více vyhovovat jako například 70.

<h3>11.2.11 - mvme68k</h3>
Žádné X servery, pouze X klienti.

<h3>11.2.12 - mvme88k</h3>
Žádně X servery, pouze X klienti.

<h3>11.2.13 - sgi</h3>
X běží na O2 systémovém frame bufferu v neakcelerovaném módu.

<h3>11.2.14 - sparc</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.sparc"
>/usr/X11R6/README</a> pro sparc.

<p>
S jediným podporovaným framebufferem zde není potřeba žádná konfigurace.
Pokud si přejete použít konfiguraci s více monitory, tak se podívejte na 
README soubor výše pro detaily.

<p>
Rozlišení je kontrolováno firmwarem předtím než nastartuje OpenBSD.

<h3>11.2.15 - sparc64</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.sparc64"
>/usr/X11R6/README</a> pro sparc64.

<p>
Většina jednoduchých konfigurací nyní "Prostě funguje".
Pokud vaše nefunguje nebo si chcete hrát, tak se podívejte na README soubor výše.

<h3>11.2.16 - vax</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.vax"
>/usr/X11R6/README</a> pro vax.

<p>
X server aktuálně funguje pouze na VAXstation 4000 modelech buď s 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lcg&amp;sektion=4&amp;arch=vax">lcg(4)</a>
nebo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lcspx&amp;sektion=4&amp;arch=vax">lcspx(4)</a>
framebufferem.

<h3>11.2.17 - zaurus</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.zaurus"
>/usr/X11R6/README</a> pro zaurus.

<p>
Konfigurace neni potřeba, X "Prostě funguje".

<p>
<a name="amd64i386"></a>
<h2>11.3 - Konfigurace X na amd64 a i386</h2>
Pokud jste nezkusili <a href="#StartingX">prostě spustit X</a>, stop!
Nepřidělávejte si práci pokud nemusíte!
Většina i386 a amd64 uživatelů zjistí, že X prostě funguje bez jakékoliv
manuální konfigurace.

<h3>11.3.1 - X.Org konfigurace</h3>
Občas X "prostě nefunguje" jak je očekáváno a někdy potřebujete
upravit něco co funguje.

<p>
Pokud X nefunguje jak by jste chtěli s vaším systémem, tak budete potřebovat
vytvořit konfigurační soubor.
Dobré místo ke startu (a někdy i ke konci!) je spustit
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=Xorg&amp;sektion=1">Xorg(1)</a>
v "X -configure" módu.
Toto nahraje všechny dostupné moduly video ovladačů, vyhledá jiný hardware a
podle toho co najde vytvoří xorg.conf soubor, který může nebo nemusí fungovat.
I když nebude fungovat, tak to bude užitečný startovní bod pro vytvoření
konfigurace, která bude fungovat jak chceme.

<p>
Jiná a časem prověřená metoda pro konfiguraci X je použít váš oblibený
vyhledávač k nalezení někoho jiného kdo už váš problem vyřešil.
Nezapomeňte, že <tt>xorg.conf</tt> soubory pro jiné OS podobné Unixu často
nabízí užitečné tipy pro to co potřebujete, aby jste rozjeli X na vašem
podobném hardware.
I když to není špatná cesta, tak tato metoda zde nebude zvýrazňována.

<p>
<a name="amd64i386example"></a>
<h3>11.3.2 - Náš ukázkový stroj</h3>
Pro demonstraci nastavení X použijeme starý Celeron 400MHz systém s AGP
video slotem.
Video karta je stará AGP karta, která se v dmesg ukazuje jako:

<blockquote><pre>
vga1 at pci1 dev 0 function 0 "3DFX Interactive Banshee" rev 0x03
</pre></blockquote>

Toto je v dávné době highéend video karta s 16M RAM, ale nyní je většinou
nepodporovaná v moderních verzích "mainstream" operačních systémů.
Monitor připojený k systému je Sony Multiscan G400 19" CRT bylo by fajn
kdyby fungoval na 1280x1024 se slušnou obnovovací frekvencí a 24 bitovou
barevnou hloubkou.

<p>
Za prvé, po instalaci OpenBSD s X (a ověření, že aperture ovladač je povolen
v kernelu) se podíváme co X.Org auto detekce a konfigurace dělá. Nakonec, 
můžeme mít štěstí.
Takže se prostě přihlásíme a použijeme příkaz
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=startx&amp;sektion=1">startx(1)</a>.
Obrazovka na okamžik zčerná a poté získáme X "testovaciobraz" na pozadí,
"X" kurzor a poté xterm okno.

<p>
Ono to funguje!

<p>
Více nebo méně.
Zatímco systém je plně funkční, tak se zdá, že nevybral žádné z vlastností
monitoru a běží evidentně na nízkém rozlišení (680x480).
Doufáme, že to půjde lépe než tohle.
Mnohem lépe ve skutečnosti.
To znamená, že potřebujeme vyrobit náš vlastní xorg.conf soubor, bohužel.

<p>
Využijme "X -configure" proces pro vygenerování počátečního <tt>xorg.conf</tt>
souboru.
Musíte to udělat jako root:
<blockquote><pre>
# <b>X -configure</b>
 [...]
Your xorg.conf file is /root/xorg.conf.new

To test the server, run 'X -config /root/xorg.conf.new'
</pre></blockquote>

Mimochodem ta zpráva je důležitá -- použijte celou cestu k vašemu
<tt>xorg.conf.new</tt> souboru, i když je ve vašem aktuálním
adresáři.
Vynechání tohoto způsobí, že
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=X&amp;sektion=7">X(7)</a>
nenajde soubor a tiše použije defaultní konfiguraci
a pokud ta fungovala, tak by jste nepoužívali tento proces!
Tohle může trochu zpomalit vaše hledání problému.
V tomhle nám věřte.

<p>
Pojďme udělat co to říká a uvidíme co dostaneme:
<blockquote><pre>
# <b>X -config /root/xorg.conf.new</b>
</pre></blockquote>

Nyní, všechno co máme je černá obrazovka.
A přitom to začalo tak dobře...

<p>
Toto může být opravdu dobrý čas pobavit se o způsobech jak opustit X, když
je spuštěno touto cestou.
V pořadí důležitosti:
<ul>
<li><b>CTRL-ALT-Backspace</b>:  Toto snad způsobi, že X se okamžitě
vypne i s X aplikacemi, které zrovna běží.
Samozřejmě, že během konfiguračního procesu nemáte žádné běžící
aplikace a tak toto není problem (a ve skutečnosti, v tomto bodě, 
je toto vaše <i>nejlepší</i> cesta jak vypnout X).
<li><b>SSH přihlášení do systému</b> a 
"<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkill&amp;sektion=1">pkill</a>
Xorg", což může zabít X proces a může vás to vrátit do použitelné konzole.
<li><b>SSH přihlášení do systému</b> a jeho restart.
<li><b>Reset nebo power tlačítko.</b>  Někdy jdou věci hodně špatně.
Ano, obvykle je dobré mít X fungující předtím než nahrajete kritické
aplikace na systém.
Občas špatná X konfigurace zasekne celý stroj do bodu, že pouze hard reset
vyřeší tento problém.
</ul>

Naštěstí pro nás CTRL-ALT-Backspace zde odvedlo svou práci a my jsme vráceni
do příkazového řádku.
Nyní potřebujeme vědět, jestli můžeme zjistit co je špatně.
Napřed by jsme se měli podívat na to co si Xorg myslí, že se děje a toto je
uloženo v souboru <tt>/var/log/Xorg.0.log</tt>.
V tomto případě to vypadá, že si X myslí, že všechno běží v pořádku a nejsou
tady žádné obvyklé chyby v logu.
(řádky, které začínají s "<tt>(EE)</tt>" jsou chyby).

<p>
Tohle je místo, kde se znalost vašeho hardware bude hodit.
Připojení tohoto systému k jinému monitoru zatímco ukazuje prázdnou
obrazovku vyvolá "Sync. Out of Range" zprávu na monitoru.
Evidentně konfigurace, kterou nám X dodalo na tomto monitoru fungovat nebude
a nemusí fungovat na ŽÁDNÉM monitoru pokud byl vybrán video mód, který
není možný pro tuto konkrétní kartu (nezapomeňte, že X prozkoumává
chipy na kartě a čeho jsou případně schopné, ne to, jak to výrobce dal
všechno dohromady).
Různé monitory budou dělat různé věci pokud je časování úplně mimo.
Některé se pokusí zobrazit co mohou, jiné skočí do úsporného režimu, 
jiné budou dělat hrozné zvuky a některé zobrazí užitečné zprávy na obrazovce.
Tenhle monitor vypadá, že nedělá nic z toho.
Udělali jsme si poznámku o NEPOUŹÍVÁNÍ tohoto monitoru pro počáteční X
konfiguraci kdykoliv v budoucnosti.

<p>
Při prohlížení vygenerovaného xorg.conf.new souboru vidíme toto:
<blockquote><pre>
Section "Monitor"
        #DisplaySize      370   270     # mm
        Identifier   "Monitor0"
        VendorName   "SNY"
        ModelName    "SONY CPD-G400"
 ### Comment all HorizSync and VertSync values to use DDC:
        HorizSync    30.0 - 107.0
        VertRefresh  48.0 - 120.0
        Option      "DPMS"
EndSection
</pre></blockquote>

Jako test pojďme použít DDC ("Data Display Channel", což je způsob jak
monitor může říct počítači a video kartě co vlastně podporuje) a podívejme
se co se stane.
Tentokrát dostaneme v X síťové pozadí a pohybující se kurzor, což je
všechno co očekáváme, když spouštíme X tímto způsobem (ukončíme X pomocí
CTRL-ALT-Backspace triku jak je popsáno výše).
Je to (opět) velmi nízké rozlišení, ale funguje a tak si můžeme být poměrně
jistí, že máme problémy s časováním a rozlišením.
Obnovíme "HorizSync" a "VertRefresh" řádky do původního stavu, protože jsme
si potvrdili specifikace tohoto monitoru skrze lehké vyhledávání na Internetu.

<p>
Zkusme přinutit Xorg ke konkrétnímu rozlišení a sledujme jestli budeme mít
štěstí.
V <tt>Section "Screen"</tt> části xorg.conf souboru chceme přidat pár řádků.
Přidané řádky jsou zvýrazněny tučně:

<blockquote><pre>
Section "Screen"
        Identifier "Screen0"
        Device     "Card0"
        Monitor    "Monitor0"
<b>        DefaultDepth   24</b>
        SubSection "Display"
                Viewport   0 0
                Depth     1
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     4
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     8
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     15
        EndSubSection
        SubSection "Display"
                Viewport   0 0 
                Depth     16
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     24
<b>                Modes	"1280x1024"</b>
        EndSubSection
EndSection
</pre></blockquote>

Tyto dvě změny říkají X, že chceme použít 24 bitovou barevnou hloubku a 
pro tuto hloubku, že chceme použít rozlišení 1280x1024.
Protože žádné jiné rozlišení není pro "Depth 24" definováno, tak systém
bude k tomuto rozlišení přinucen.

<p>
Vyzkoušíme tak, jak už jsme zkoušeli a .. ÚSPÉCH!
Máme to co vypadá jako velmi pěkná obrazovka s vysokým rozlišením.
Uvědomte si, že VŠECHNO co očekáváme je síťové pozadí (je to velmi dobré
pro to, aby jste viděli jak dobrý váš monitor DOOPRAVDY je a také skvělé
pro kalibraci LCD displejů, nazývá se
"<a href="http://www.openbsd.org/cgi-bin/cvsweb/xenocara/data/bitmaps/root_weave">root
weave</a>") a pohyblivý kurzor.
Není to plánováno aby to bylo funkční už nyní.

<p>
Nyní chceme tento xorg.conf soubor nainstalovat, protože potřebujeme vidět
jak daleko jsme pokročili s použitelným a běžícím X.

<blockquote><pre>
# cp xorg.conf.new /etc/X11/xorg.conf
</pre></blockquote>

Nyní můžeme zkusit X pomocí normálního startx(1) příkazu.
Funguje to!

<p>
Také by asi bylo dobré ověřit, že máme rozlišení a barevnou hloubku, kterou
chceme a také, že fungujeme na slušné obnovovací frekvenci.
Toto můžeme udělat pomocí 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xrandr&amp;sektion=1">xrandr(1)</a>
a 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdpyinfo&amp;sektion=1">xdpyinfo(1)</a>
příkazů.
Mimo jiných věcí nám xdpyinfo(1) říká:
<blockquote><pre>
    [...]
screen #0:
  print screen:    no
  dimensions:    1280x1024 pixels (433x347 millimeters)
  resolution:    75x75 dots per inch
  depths (7):    24, 1, 4, 8, 15, 16, 32
  root window id:    0x44
  depth of root window:    24 planes
    [...]
</pre></blockquote>

Takže ano, fungujeme na 1280x1024 s hloubkou 24 úrovní (bitů).

<p>
xrandr(4) nám říká:
<blockquote><pre>
 SZ:    Pixels          Physical       Refresh
*0   1280 x 1024   ( 433mm x 347mm )  *85   75   60  
 1   1280 x 960    ( 433mm x 347mm )   85   60  
    [...]
</pre></blockquote>

což znamená, že fungujeme na 85Hz obnovovací frekvenci to by mělo být
velmi komfortní nastavení pro většinu uživatelů.

<p>
<h3>11.3.3 - Co dělat, když to není tak "lehké"?</h3>
Občas věci prostě nespolupracují.
Tady jsou nějáké tipy.

<ul>
<li>Přečtěte si man stránku pro X server, který používáte.
V našem příkladu <tt>/var/log/Xorg.0.log</tt> ukazuje, že X používá TDFX jako
ovladač a tak to bude
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tdfx&amp;sektion=4">tdfx(4)</a>
man stránka.
Velmi často najdete tipy, omezení a volby pro konfiguraci vaší video karty.
Tyto se liší od ovladače k ovladači, takže nepředpokládejte, že nemusíte
číst man stránku pro ovladač, který nyní používáte jen proto, že jste četli
jinou předtím.

<li>Zkuste jiné monitory.
Jak zjištěno v našem příkladu nahoře, jiné monitory často dají různé
nápovědy o tom, co by mohlo být špatně.

<li>Zkuste
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vesa&amp;sektion=4">vesa(4)</a>
X ovladač.
Toto je pochopitelně "poslední možnost" z důvodu výkonu, ale funguje takřka
na všech video kartách. Včetně těch, pro které žádný "lepší" X server ovladače
nefungují.

<li>Použijte jiný hardware.
Pokud máte možnost volby jiné video karty, tak zkuste některé jiné.


</ul>

<a name="StartingX"></a>
<h2>11.4 - Spuštění X</h2>
Jsou dva obvyklé způsoby jak spustit X:

<h3>11.4.1 - Na vyžádání:</h3>
Přihlašte se do konzole jako obvykle a poté spusťte
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=startx&amp;sektion=1">startx(1)</a>.

<h3>11.4.2 - Nastartování přímo do X:</h3>
Toto je uděláno pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm&amp;sektion=1">xdm(1)</a>,
X displej manažera.
xdm(1) je spouštěn jako root, obvykle přes <a href="../faq10.html#rc">rc</a>
a zobrazí přihlašovací obrazovku.
Po úspěšném přihlášení nastartuje X sezení pro uživatele.
Pokud má být X sezení ukončeno (včetně použití kombinace CTRL-ALT-Backspace),
tak xdm(1) se znovu spustí s výzvou pro opětovné přihlášení uživatele.
Z tohoto důvodu se NEPOKOUŠEJTE spustit xmd(1) z
<tt>/etc/rc.conf.local</tt> dokud jste neověřili, že X funguje jak chcete,
protože jinak se může váš stroj stát velmi obtižný pro správu!
(nejhorší případ: nastartujte jednouživatelský režim jako kdyby jste
 <a href="../faq8.html#LostPW">ztratili vaše heslo</a> a upravte xdm_flags
řádek ve vašem <tt>/etc/rc.conf.local</tt> souboru.)

<p>
Na některých platformách budete potřebovat vypnout konzoli
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getty&amp;sektion=8">getty(8)</a>
pro použití xdm(1).

<p>
<a name="CustomizingX"></a>
<h2>11.5 - Přizpůsobení X</h2>

<h3>11.5.1 - Úvod</h3>
OpenBSD defaultní X prostředí je plně funkční, ale můžete si přát ho
upravit.
Můžete chtít změnit pozadí nebo jeho barvu nebo můžete chtít změnit
okenní manažer (program, který nejvíce definuje vaše X prostředí)
nebo změnit aplikace, které jsou spuštěny, když X startuje.

<p>
Defaultní okenní manažer v OpenBSD je
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fvwm&amp;sektion=1">fvwm(1)</a>.
Fvwm je dobrý, všeobecně použitelný okenní manažer, ale těžko to je vaše
jediná volba; dokonce to není jediný okenní manažer v základním OpenBSD
(podívejte se na
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm&amp;sektion=1">cwm(1)</a>
a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=twm&amp;sektion=1">twm(1)</a>).
Velké množství okenních manažerů je také dostupných skrze
<a href="../faq15.html">balíčky</a>.

<p>
Podobně jako <a href="../faq10.html#rc">systémové startovací skripty</a>, tak
i X má proces, kterým prochází při nastavování uživatelského prostředí.
Přesněji řečeno má více než jeden proces, který proces se použije
záleží na tom jak <a href="#StartingX">spouštíte X</a>.
Pochopení toho, jak X startuje, vám pomůže porozumět tomu, jak upravit
vaše pracovní prostředí k obrazu svému.

<p>
Uvědomte si, že může upravit prostředí jak na systémové úrovni, tak
i pro jednotlivé uživatele.
Je asi nejlepší provádět změny na úrovni uživatele než měnit systémové
defaultní nastavení, protože uživatelské skripty jsou uloženy v domovském
adresáři uživatele a tak budete mít méně práce se spojováním souborů, když
aktualizujete systém na novější verzi OpenBSD.

Systémová defaultní nastavení jsou v <tt>/etc/X11</tt> a byli nastaveny
z <a href="faq4.html#FilesNeeded">xetcXX.tgz</a>, který se neobnovuje
při <a href="../upgrade52.html">doporučeném upgrade procesu</a>.
Takže pokud uděláte systémové změny, tak zůstanou, ale může být potřeba
spojit tyto změny s novějšími verzemi těchto souborů.

<h3>11.5.2 - startx(1) spuštění</h3>

startx(1) hledá soubor <tt>.xinitrc</tt> v domovském adresáři uživatele.
<tt>.xinitrc</tt> je obvykle shell skript, který může spustit tolik
X "klient" (aplikací, které používají X) programů, kolik je potřeba.
Když tento skript skončí, tak se X server vypne.
Obecně většina programů, které jsou spouštěny tímto skriptem by měla
běžet na pozadí, ale poslední z nich by měl běžet v popředí (typicky
okenní manažer), když ten skončí, tak skript se ukončí a X se vypne.

<p>
V nejlehčím případě může obsahovat tak málo jako jméno okenního manažera, 
který si přejete spustit:

<blockquote><pre>
cwm
</pre></blockquote>

Nebo si můžete trochu více pohrát:

<blockquote><pre>
xconsole -geometry -0+0 -fn 5x7 &
oclock -geometry 75x75-0-0 &
xsetroot -solid grey &
cwm
</pre></blockquote>

To spustí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xconsole&amp;sektion=1">xconsole(1)</a>
, která nabízí kopii jakéhokoliv textu, který by jádro poslalo na konzoli
(kterou nyní zabírá grafická obrazovka), analogové hodiny
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=oclock&amp;sektion=1">oclock(1)</a>
a nastaví pozadí na šedou výplň pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xsetroot&amp;sektion=1">xsetroot(1)</a>
.To vše před spuštěním
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm&amp;sektion=1">cwm(1)</a>
okenního manažera.
Všimněte si, že pouze okenní manažer není "upozaděn" pomoci "&amp;" znaku.
To znamená, že X zůstane běžet dokud cwm(1) neskončí.

<p>
Pokud uživatelův domovský adresář neobsahuje <tt>.xinitrc</tt> soubor, tak  
je použit systémový <tt>/etc/X11/xinit/xinitrc</tt> soubor.
Tento soubor vám může poskytnou další nápady pro váš .xinitrc skript.

<h3>11.5.3 - xdm(1) spuštění</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm&amp;sektion=1">xdm(1)</a>
je obvykle spouštěno <a href="../faq10.html#rc">systémovým spouštěcím
skriptem</a>, ale pro testovací účely (doporučeno dokud nevíte, že vaše
X konfigurace je správně!) může být spuštěn jako root.

<p>
xdm(1) má spoustu další funkcí, které tady řešit nebudeme, ale pro naše
účely bude xdm ukazovat uživateli přihlašovací obrazovku, načte a ověří
uživatelské jméno a heslo a poté dá uživateli jeho X prostředí.
Když se X vypne, ať už úmyslně nebo neúmyslně, tak xdm ho znovu spustí.
To je důvod, proč si musíte být jistí, že X je nakonfigurováno správně
předtím, než použijete xdm(1) a zcela jistě předtím, než se xdm(1) spustí
při startu počítače. Protože jinak to může být těžké získat kontrolu nad
strojem.

<p>
Když xdm(1) startuje, tak spouští <tt>/etc/X11/xdm/Xsession</tt>, které
kontroluje jestli má uživatel <tt>.xsession</tt> soubor ve svém
domovském adresáři.
Takže pokud si přejete změnit váš defaultní okenní manažer, tak to udělejte
(a možná i další věci) v <tt>.xsession</tt>.
Opakujeme, že jakékoliv programy, které chcete spustit zároveň s X
(například tři xterm(1)) mohou být umístěny zde, ale všechno musí být
spouštěno na pozadí kromě vašeho okenního manažera a opět, pokud ten skončí
tak vaše X sezení bude ukončeno.
V tom případě xdm(1) restartuje X a přenese vás zpátky do příhlašovací
obrazovky.

<h3>11.5.4 - Vyzkoušení nového okenního manažera</h3>
Můžete spustit konkrétní okenní manažer. když nahráváte X aniž by jste
změnili jakékoliv defaultni nastavení pomocí tohoto příkazu:

<blockquote><pre>
$ startx /usr/local/bin/fluxbox
</pre></blockquote>

Několik okenních manažerů (včetně cwm(1) a fvwm(1)) nabízí možnost změnit
okenní manažer za chodu, bez restartování X nebo jakékoliv vaší aplikace.
Váš nový okenní manažer nahradí váš starý. Opuštění nově nahraného
okenního manažeru vypne X. Nevrátí vás to zpět do vašeho předchozího
okenního manažeru.
fvwm(1) vám umožńuje spustit jiný okenní manažer kliknutím levým tlačítkem
myši na pozadí ("root window"), výběrem "(Re)Start" a následným výběrem
vašeho oblíbeného okenního manažeru (uvědomte si ale, že musíte přidat
váš alternativní okenni manažer do vašeho <tt>.fvmwrc</tt> souboru
(systémový defaultní soubor je <tt>/usr/X11R6/lib/X11/fvwm/.fvwmrc</tt>)).
cwm(1) vám umožňuje spustit jiný okenní manažer pomocí stisku kombinace
Ctwl-Alt-w a napsáním názvu manažeru do kterého se chcete přepnout.

<p>
Jakmile najdete okenní manažer, který se vám líbí, tak ho můžete nastavit jako
poslední program, který spouští váš startovací skript jak je popsáno výše.


<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "../faq10.html">[To Section 10 - Správa systému]</a>
<a href= "../faq12.html">[To Section 12 - Specifické otázky o hardware a platformách]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq11.html,v 1.94 ]<br>
$Translation: faq11.html,v 1.15 2012/11/04 07:03:50 bodie Exp $<br>
-->
$OpenBSD: faq11.html,v 1.15 2012/11/04 08:15:48 ajacoutot Exp $
</small>
</body>
</html>
