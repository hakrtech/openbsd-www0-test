<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-2">
<title>12.0 - Pro pokroèilé</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000"> 

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>
<h2><font color=#e00000>12.0 - Pro pokroèilé</font><hr></h2>
</p>

<p>
<ul><h3>Obsah</h3>
<li><a href="#IDEDMA">12.1 - Jak vynutit DMA pøístup pro IDE disky</a>
<li><a href= "../upgrade-minifaq.html">12.2 - Upgrade z pøeechozích verzí OpenBSD
z CVS.</a>
</ul>
</p> 
<hr>

<P>
<i>Pokroèilími</i> myslíme jednodu¹e lidi co mají znalost jak pou¾ívat a
administrovat Unix-like operaèní systém. Pokud se budete øídit instrukcemi 
bez toho, ¾e byste vìdìli co dìláte, mù¾ete zpùsobit problémy ve funkci va¹eho
systému.
<br>

<p>
<a name= "IDEDMA">
<h2>12.1 - Jak vynutit DMA pøístup pro IDE disky</h2>
</a>

<p>
PCI IDE kód nemusí poznat vá¹ chipset. Pokud to tak je, dostanete hlá¹ku jako:
<UL>
<PRE>
pciide0: DMA, (unused)
</PRE>
</UL>
Pokud dostanete takovou hlá¹ku, mù¾ete vyzkou¹et a vynutit DMA mód pou¾itím
'flags 0x0001' na va¹em záznamu pciide v konfiguráku kernelu.
To by vypadalo nìjak takhle:
<UL><PRE>
pciide* at pci ? dev ? function ? flags 0x0001
</PRE></ul>
Poté co toto udìláte, pciide kód se bude sna¾it pou¾ít DMA mód nezávisle na
tom, jestli ví jak to s va¹ím chipsetem udìlat. Pokud toto bude pracovat a vá¹
systém projde pøes fsck a nastartuje, je pravdìpoddobné=, ¾e to bude dobøe
pracovat. Pokud to nepracuje, a system zamrzne pøi startu nebo hlásí kernel
panic po bootu, pak nemù¾ete DMA mód pou¾ít (aspoò do doby ne¾ bude pøidána
podpora va¹eho chipsetu do kernelu). Jestli¾e najdete dokumentaci pro vá¹
chipset PCI-IDE kontroléru, je to dobrý zaèátek jak plnì zahrnout podporu do
PCI-IDE kódu. Mù¾ete se podívat na stránku va¹eho dodavatele nebo mu mù¾ete
zavolat. Pokud je PCI-IDE kontrolér èást va¹í základní desky, zjistìte kdo
vyrábí chipset a zkuste kontaktovat je! 
<P>
Jestli¾e uvidíte hlá¹ku podobné této, pak je DMA pøístup zapnut.
<UL><PRE>
cd0(pciide0:1:0): using PIO mode 3, DMA mode 1 (using DMA data transfers)
</PRE></UL>
To znamená, ¾e pciide0, channel 1, drive 0 (co¾ se zdá být ATAPI CD-ROM)
pou¾ívá DMA pro data transfery.
</p>
<p>
Poznámky:
</p>
<p>
DMA není podporováno, na wdc* dokud ne nespecifikujete DMA kanál (drq). Nejsem
si jist, jestli existují "standartní" drq hodnoty pro diskové kontroléry.
Pro zapnutí budete potøebovat:
<pre>
wdc0	at isa? port 0x1f0 irq 14 flags 0x00
</pre>
Non-ultra DMA nemusí nezbytnì vést k vy¹¹í ¹írce pásma v porovnání s PIO.
Nicménì znatelnì ubere zátì¾ procesoru.
</p>

<p>
<font color= "#0000e0">
<a href= "index.html">[Zpátky na Hlavní Index]</a>
<a href= "faq11.html">[Na Sekci 11.0 - Ladìní výkonu]</a>
<a href= "faq13.html">[Na Sekci 13.0 - IPsec]</a>
</font>
</p>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[zpìt]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<small>
<br>
Originally [OpenBSD: faq12.html,v 1.29 ]
<br>
$Translation: faq12.html,v 1.4 2002/02/22 11:15:18 certik Exp $
<br>
$OpenBSD: faq12.html,v 1.3 2002/02/22 19:09:01 jufi Exp $
</small>

</body>
</html>
