<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>12 - Platformovì-specifické otázky</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2003 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "faq11.html">[Sekce 11 - Performance Tuning]</a>
<a href= "faq14.html">[Sekce 14 - Nastavení disku]</a>
</font>

<h1><font color="#e00000">12 - Platformovì-specifické otázky</font></h1>
<hr>

<p>
<h3>Obsah</h3>
<ul>
<li><a href="#General">12.1 - Obecné poznámky k hardware</a>
  <ul>
  <li><a href="#GenPCI">12.1.1 - PCI</a>
  <li><a href="#GenISA">12.1.2 - ISA</a>
  </ul>
<li><a href="#alpha">12.2 - DEC Alpha </a>
<li><a href="#hp300">12.3 - HP 9000 series 300, 400</a>
<li><a href="#hppa" >12.4 - HP Precision Architecture (PA-RISC)</a>
<li><a href="#i386" >12.5 - i386</a>
  <ul>
  <li><a href="#ISANIC">12.5.1 - ISA NICs</a>
  <li><a href="#80386">12.5.2 - OpenBSD nebootuje na mém 80386 systému</a>
  <li><a href="#IrqShare">12.5.3 - Moje dmesg ukazuje nìkolik zaøízení
  sdílející ten samý interrupt</a>
  </ul>
<li><a href="#mac68k">12.6 - Mac68k</a>
  <ul>
  <li><a href="#mac68kSupport">12.6.1 - Mùj Mac68k systém nepracuje</a>
  <li><a href="#mac68kTime">12.6.2 - Proè mùj Mac68k ztrácí tolik èasu?</a>
  <li><a href="#mac68k2disks">12.6.3 - Mùj Mac68k systém nepracuje s dvìma
  disky</a>
  <li><a href="#mac68kInstCrash">12.6.4 - Instalátor spadl bìhem instalace
       </a>
  </ul>
<li><a href="#macppc">12.7 - MacPPC</a>
<li><a href="#mvme68k">12.8 - MVME68k</a>
<li><a href="#sparc">12.9 - SPARC</a>
<li><a href="#sparc64">12.10 - UltraSPARC</a>
  <ul>
  <li><a href="#sparc64Floppy">12.10.1 - Mùj UltraSPARC nechce nabootovat
  z floppy image</a>
  </ul>
<li><a href="#vax">12.11 - DEC VAX</a>
</ul>

<hr>

<a name="General"></a>
<h2>12.1 - Obecné poznámky k hardware</h2>

<a name="GenPCI"></a>
<h3>12.1.1 - PCI zaøízení</h3>

<ul>
<li>PCI zaøízení se vìt¹inou konfigurují sama -- poèítaè a OS bude
alokovat prostøedky kartám jak je po¾adováno.

<li>Pøeru¹ení mohou být na PCI sbìrnici sdílena. Nejenom ¾e mohou, ale
systém bude pracovat lépe pokud jsou IRQs sdílena, zvlá¹» na 
systémech i386.

<li>Existuje nìkolik rozdílných stanndardù PCI sbìrnice.
Obèas mù¾ete narazit na kartu splòující specifikaci PCI2.2, která
nepracuje na systému splòujícím specifikaci PCI2.1. 
Dále, mnoho karet s on-board bridgi (napø. multi-portové sí»ové karty)
nebudou pracovat na star¹ích systémech správnì.

<li>Sbìrnice PCI podporuje dvì úrovnì signalizace, 3.3v a 5v.
Karty, praucjící s 3.3v signalizací mají druhý záøez v jejich PCI
konektoru. Mnoho karet pou¾ívá 5v signallizaci, které je pou¾ívaná ve
vìt¹inì poèítaèù.
Soekris single-board poèítaèe (Net45x1 a Net4801) jsou 
poèítaèe, s kterými se ml¾ete bì¾nì setkat, které podporují pouze 3.3v
sigbalizaci.

</ul>

<a name="GenISA"></a>
<h3>12.1.2 - ISA zaøízení</h3>
<ul>
<li>ISA zaøízení nemohou sdílet prostøedky a obecnì musí být ruènì
konfigurovány, aby nebyly v konfliktu s jinými zaøízeními v systému.

<li>Nìkteré ISA zaøízení jsou "Plug and Play" 
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isapnp&amp;sektion=4">isapnp(4)</a>)
-- pokud máte problém s tìmito zaøízeními, ovìøte si jejich konfiguraci ve
va¹em
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>,
ISAPnP nepracuje v¾dy tak, jak je po¾adováno.

<li>Obecnì, pokud máte na výbìr, vyhnìte se kartám ISA ve prospìch PCI.
ISA karty jsou obtí¾nìji konfigurovatelné a mají více negativní dopad na
výkon systému.
</ul>



<p> <a name="alpha"></a>
<h2>12.2 - DEC Alpha</h2> [zatím nic]

<a name="hp300"></a>
<h2>12.3 - HP300</h2>
[zatím nic]

<a name="hppa"></a>
<h2>12.4 - HPPA</h2>
[zatím nic]

<a name="i386"></a>
<h2>12.5 - i386</h2>

<a name="ISANIC"></a>
<h3>12.5.1 - ISA NICs</h3>
Proto¾e OpenBSD bì¾í na star¹ím hardware, u¾ivatelé èasto pou¾ívají 
ISA NICs na OpenBSD systémech.
ISA hardware poøaduje mnohem více konfigurace a znalostí ne¾ 
PCI hardware.
Obecnì platí, ¾e nemù¾ete strèit kartu do poèítaèe a oèekávat, ¾e bude
fungovat.
V mnoha strojích, pokud je va¹e ISA zaøízení v "Plug 'n' Play" (PNP) módu,
musíte rezervovat prostøedky, které karta pou¾ívá v BIOSu daného systému.

<h4>3Com 3C509B ep(4)</h4>
Toto je ISA NIC s výborným výkonemm, podporovaná driverem
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ep&amp;sektion=4">ep(4)</a>.
Verze 'B' mù¾e být odli¹ena od non-B verze popiskem na kartì a vìt¹ím
"hlavním" chipem na boardu (asi 2.5cm na stranì pro 'B' verzi, vs. 2cm na
stranì u star¹í verze) a poskytne lep¹í výkon na systému se dvìma kartami.
3C509B se dodává konfigurovaná v PNP módu, které nane¹tìstí nesplòuje
standardy a zpùsobuje problémy v podpoøe
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isapnp&amp;sektion=4"
>isapnp(4)</a> v OpenBSD.
Adaptér je nejdøíve vybrán jako non-PNP zaøízení, poté je znovu vybráno
kdy¾ nabìhne PNP podpora, co¾ má za výsledek kartu navíc v dmesg.
To mù¾e pracovat dobøe nebo to mù¾e zpùsobovat problémy, Je dùraznì
doporuèeno aby byl PNP mód v kartách 3C509B vypnut a karta byla manuálnì
zkonfigurovánna na nekonfliktiní nastavení pou¾ití 3Com utility v DOSu
pøed konfigurací.

<p>
Driver ep(4) vybere karty v jakékoliv hardwarové konfiguraci, která
nezpùsobuje konflikt s jinými zaøízeními v systému.

<p>
Pokud máte ve va¹em systému více karet 3C509, je doporuèeno abyste 
popsali karty pomocí MAC adres a pou¾ili dmesg pro jejich identifikaci.

<p>
3C509, 3C905 a 3C590 jsou èasto zamìòovány.
3C509 je 10Mbps ISA, 3C905 a 3C590 jsou PCI karty.


<p>
<h4>NE2000</h4>
Originální NE2000 NIC byla vyvinuta v osmdesátých letech Novellem.
Mnoho výrobcù od té doby vyrábìlo karty, které jsou velmi podobné, které
jsou obecnì nazývané NE2000-kompatibilní nebo klony.
Výkon tìchto karet se velmi li¹í.
Zatímco nìkteré star¹í NE2000-kompatibilní mìly dobrý výkon, mnoho z tìch,
které jsou k dispozici dnes mají výkon ubohý.
NE2000-kompatibilní jsou podporovány v OpenBSD driverem 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ne&amp;sektion=4">ne(4)</a>.

<p>
OpenBSD bude zacházazet s nìkterými ISAPNP NE2000-kompatibilními kartami
Jiné karty budou muset být nastaveny buï pomocí jumperù nebo DOS-based
konfiguraèní utility.
Nane¹tìstí, proto¾e originální NE2000 karty nemìly softwarovou konfiguraci
nebo ISAPNP podporu, neexistují pro toto standardy -- budete potøebovat
utilitu, která byla originálnì dodána s va¹í specifickou kartou.
Ta mù¾e být nìkdy ziskatelná pouze obtí¾né.

<p>
Driver ne(4) podporuje tøi konfigurace karty ISA NE2000 
v jádru GENERIC OpenBSD:
<pre>
     ne0:  port 0x240 irq 9
     ne1:  port 0x300 irq 10
     ne2:  port 0x280 irq 9
</pre>
Pokud nejsou tyto nastavení pøijatelné, mù¾ete je zmìnit pomocí
<a href="faq5.html#BootConfig">User Kernel Configuration (UKC)</a> nebo
<a href="faq5.html">kompilace vlastního jádra</a>.

<p>
Driver ne(4) je docela "hloupý" -- pouze pokud je otestován I/O port,
a detekována nìkterá z vý¹e uvedených adres, pak je <i>pøedpokládáno</i>
korespondující IRQ.
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>
nebude obsahovat aktuální IRQ adaptéru v pøípadì driveru ISA ne(4).
Pokud není aktuální IRQ karty nastaveno, nebude to pracovat.

<p>
Existují non-ISA karty, které pou¾ívají ne(4) driver -- existují PCI a
PCMCIA ne(4) karty. Tyto poznámky se na nì nevztahují, tyto za¾ízení jsou
autokonfigurovatelné.

<a name="80386"></a>
<h3>12.5.2 - OpenBSD nechce nabootovat na mém 80386 (or 80386sx) systému!</h3>
<h4>80386sx</h4>
80386sx má maximální adresní rozsah 16M, co¾ je na dolním konci podpory 
OpenBSD/i386 podpory.
Vìt¹ina systémù 80386sx nemù¾e podporovat více ne¾ 8M RAM, co¾ je umis»uje
do kategorie "Pouze pro experty", proto¾e k rozchození instalace jsou
nutné netriviální kroky a druhý poèítaè.
Podívejte se na dal¹í sekcí:

<h4>80386</h4>
<!-- XXX bug in versions 2.9 thru 3.3 inclusive -->
Existuje chyba, která znemo¾òuje nabootovat OpenBSD systém 80386 nebo 80386sx
v OpenBSD 3.3 a mnoha star¹ích verzích.
Mù¾e to být napraveno výmìnou 80386 chipu nìjakým akcelerátorem na bázi
80486, které existují 
(nebo bì¾et 
<a href="faq5.html#Flavors"><i>-current</i></a>).
Opìt, toto je procesor, který se nehodí pro systém intenzivnì pou¾ívající
kryptografickké operace jako je OpenBSD. 
Pravdìpodobnì nebudete s výkonem takového systému pøi bì¾ném pou¾ití spokojeni.

<a name="IrqShare"></a>
<h3>12.5.3 - Mùj dmesg ukazuje nìkolik zaøízení sdílející ten samý
interrupt (IRQ)!</h3>
To je celkem akceptovatelné, dokonce vhodné pro PCI zaøízení.
Toto je fíèura návrhu PCI sbìrnice.
Nìkteøí lidé budou øíkat, ¾e sdílení interrupt po¾adavkù (IRQs) je ¹patné,
nicménì buï zamìòují situaci s ISA sbìrnicí (kde není sdílení IRQ
dovoleno) nebo mají zku¹enost se ¹patným hardware nebo software.

<p>
ISA zaøízení nemohou sdílet IRQ. Pokud najdete ISA zaøízení sdílející IRQ,
musíte tento problém opravit.

<a name="mac68k"></a>
<h2>12.6 - Mac68k</h2>

<a name="mac68kSupport"></a>
<h3>12.6.1 - Mùj Mac68k systém nepracuje!</h3>
Nane¹tìstí, máme málo rozdílných Mac86k strojù v rukou OpenBSD developerù,
a tak jenom nìkolik z nich v této chvíli pracuje dobøe.
Pokud mù¾ete pomoci obnovit podporu pro systémy, které nepracují, vá¹ kód
bude vítán!

<a name= "mac68kTime"></a>
<h3>12.6.2 - Proè mùj Mac68k ztrácí tak moc èasu ?</h3>
To je zpùsobeno hardwarovou chybou. OpenBSD pou¾ívá pøeru¹ení od hodin pro
udr¾ování èasu, ale tato pøeru¹ení mají na 
<a href="../mac68k.html">Mac68k</a> architektuøe nejni¾¹í prioritu.
Tím pádem pøeru¹ení od hodin pod velkou zátì¾í (jako je disková nebo
sí»ová aktivita) budou ztraceny a Unixové hodiiny nebudou postupovat tak,
jak by mìly.
<a href="../macppc.html">MacPPC</a> systémy nemají tento problém.

<p>
MacOS øe¹í tento problém tak, ¾e v¾dy ète hardwarové hodiny.
OpenBSD pouze ète hardwarové hodiny pøi bootování a tím pádem je ignoruje.
Mù¾ete zaznamenat, ¾e pøi shutdownu kernel nechce zapsat èas zpátky do
hardwarových hodin, proto¾e tento problém je známý.

<p>
Jednoduché øe¹ení je pravidelnì spou¹tìt rdate(8), tím, ¾e pro nìj
zalo¾íme záznam v crontabu. Dal¹í dobré místo pro spou¹tìní 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&amp;sektion=8">rdate
(8)</a>
je vá¹ soubor <i>/etc/ppp/ppp.linkup</i> pokud jste permanentnì pøipojeni
jako PPP u¾ivatel.

<p>
Podívejte se také na:
<a href="http://www.macbsd.com/macbsd/macbsd-docs/faq/faq-3.html#ss3.17">
http://www.macbsd.com/macbsd/macbsd-docs/faq/faq-3.html#ss3.17</a>


<a name="mac68k2disks"></a>
<h3>12.6.3 - Mùj Mac68k systém nepracuje s dvìma disky</h3>
Ano, nane¹tìstí, toto je známý problém. Toto se obvykle projeví pádem
systému krátce poté, co systém anbìhne do multiuser modu a crash nemusí
být na první pohled propojený s diskovým systémem.
Øe¹ením je pou¾ít pouze jeden disk ve va¹ich Mac68k systémech. Oprava je
vítaná!

<a name="mac68kInstCrash"></a>
<h3>12.6.4 - The instalátor spadnul bìhem instalace</h3>
Mac68k instalátor bì¾ící na MacOS nebude instalovat soubory na
"velké" parti¹nu. Pokud je nìjaká parti¹na, na kterou instalujetem, vìt¹í
ne¾ 500M, mù¾ete oèekávat tuto podivnou chybu:
<pre>
    Error on SCSIRead(), #5
    pos = 0, i = 22, fs = /
    alloccgblk: can't find blk in cyl
</pre>
Øe¹ením je nejprve nainstalovat minimální systém na "malou" rootovskou
parti¹nu a poté nabootovat OpenBSD a pøemístit vìci tak jak je potøeba.

<p>
Tak¾e, øeknìme, ¾e chcete 200M / parti¹nu.
Vytvoøte rootovskou parti¹nu, vytvoøte ostatní parti¹ny, které chcete,
vytvoøte na nich fillesystém pomocí newfs z MacOS utilit. Nainstalujte 
etc33.tgz a base33.tgz na tuto / parti¹nu.

<p>
Namontujte va¹e ostatní parti¹ny na doèasný mount point a nakopírujte
adresáøe které na nich chcete, jak je demonstrováno 
<a href="faq10.html#DupFS">zde</a>.

<p>
Nyní modifikujte /etc/fstab, proveïte reboot a rozbalte zbytek z *.tgz
souborù jak je dokumentováno
<a href="faq4.html#AddFileSet">zde</a>.

<p>
Podobným postupem mù¾e být dosa¾eno pro non-rootovské parti¹ny jekékoliv
velikosti.


<a name="macppc"></a>
<h2>12.7 - MacPPC</h2>
[zatím nic]

<a name="mvme68k"></a>
<h2>12.8 - MVME68k</h2>
[zatím nic]

<a name="sparc"></a>
<h2>12.9 - SPARC</h2>
[zatím nic]

<a name="sparc64"></a>
<h2>12.10 - UltraSPARC (sparc64)</h2>

<a name="sparc64Floppy"></a>
<h3>12.10.1 - Mùj UltraSPARC nechce nabootovat z floppy image</h3>
Pouze Ultra 1/1e a Ultra 2 umí bootovat <i>jakýkoliv</i> OS z floppy disku.
Pou¾ijte CD-ROM, Miniroot, nebo boot pøes sí» pro provedení instalace.


<a name="vax"></a>
<h2>12.11 - DEC VAX</h2>
[zatím nic]



<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "faq11.html">[Sekce 11 - Ladìní výkonu]</a>
<a href= "faq14.html">[Sekce 14 - Nastavení disku]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<small>
<br>
Originally [OpenBSD: faq12.html,v 1.44 ]
<!-- translation by Vladimir Kotal -->
<br>
$Translation: faq12.html,v 1.9 2003/11/02 21:48:53 certik Exp $
<br>
$OpenBSD: faq12.html,v 1.8 2003/11/03 14:19:31 horacio Exp $
</small>

</body>
</html>
