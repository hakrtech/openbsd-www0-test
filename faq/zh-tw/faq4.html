<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>4 - OpenBSD 3.2 安裝指南</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=big5">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
</head>

<!-- Passes validator.w3.org.  Please keep it this way -->

<body bgcolor= "#ffffff" text= "#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>
<h2><font color="#e00000">4 - OpenBSD 3.2 安裝指南</font></h2>
<hr>

<p>
<h3>內容目錄</h3>
<ul>
<li><a href= "#Overview"    >4.1 - OpenBSD 安裝步驟
                                     簡介.</a>
  <ul>
  <li><a href="#Plats"      >4.1.1 - 支援 OpenBSD 的硬體架構</a>
  <li><a href="#Media"      >4.1.2 - 支援的安裝媒介</a>
  <li><a href="#MkFlop"     >4.1.3 - 建立可開機的 OpenBSD 安裝
                                     軟碟片</a>
    <ul>
    <li><a href="#UnixFlop"  >4.1.3.1 - 在 Unix 上建立軟碟片</a>
    <li><a href="#DosFlop"   >4.1.3.2 - 在 DOS/Windows  上建立軟碟片</a>
    </ul>
  <li><a href="#Boot"       >4.1.4 - 以 OpenBSD 安裝映像檔開機</a>
  </ul>
<li><a href= "#Checklist"   >4.2 - 安裝前核對事項</a>
<li><a href= "#Install"     >4.3 - 開始安裝</a>
  <ul>
  <li><a href="#Disks"      >4.3.1 - 設定磁碟</a>
  <li><a href="#Hostname"   >4.3.2 - 設定系統主機名稱(Hostname)</a>
  <li><a href="#Network"    >4.3.3 - 設定網路</a>
  <li><a href="#InstMedia"  >4.3.4 - 選擇安裝媒介</a>
  <li><a href="#Filesets"   >4.3.5 - 選擇安裝項目</a>
  <li><a href="#SmallRAM"   >4.3.6 - 較少記憶體時的安裝步驟</a>
  <li><a href="#Finish"     >4.3.7 - 結束安裝</a>
  <li><a href="#OtherInf"   >4.3.8 - 其他資訊資源</a>
  </ul>

<li><a href= "#FilesNeeded" >4.4 - 哪些是安裝所需的檔案?</a>
<li><a href= "#SpaceNeeded" >4.5 - 需要多少空間才能安裝
                                     OpenBSD?</a>
<li><a href= "#Multibooting">4.6 - OpenBSD 多重開機</a>
<li><a href= "#SendDmesg"   >4.7 - 安裝結束後將 dmesg 寄給 dmesg@openbsd.org
                                     </a>
<li><a href= "#AddFileSet"  >4.8 - 安裝結束後, 欲增加其他安裝</a>
<li><a href= "#bsd.rd"      >4.9 - 'bsd.rd' 是什麼?</a>
</ul>
<hr>

<p>
<a name= "Overview"></a>
<h2>4.1 - OpenBSD 安裝步驟簡介</h2>

<p>
OpenBSD 有非常耐用又合用的文字模式安裝程序.
除了耐用特性之外, 安裝程序可以用一張
軟碟片完成. 大部分的硬體架構的安裝程序都很類似,
不過細節上有少數不同的地方. 大部分情況, 
鼓勵您閱讀特定平台的 INSTALL 文件, 擺在光碟片或 FTP 站的
平台目錄下(例如, <i>INSTAL.i386</i>,
<i>INSTALL.mac68k</i> 或 <i>INSTALL.sparc</i>)

<p>
在大多數的硬體架構下, 您有幾個安裝選項, 包括
FTP, CDROM, 和本機磁碟檔案.  有個<b>不</b>支援的選項是
<a href="../faq3.html#ISO">下載 ISO 映像檔</a> 來建立
官方光碟片. 不過, 光碟片是可以
<a href="../../orders.html">購買的</a>.

<a name="Plats"></a>
<h3>4.1.1 - 支援 OpenBSD 的硬體架構</h3>

<p>
OpenBSD 3.2 支援一些硬體架構, 照字母排列
表列如下. 請參照各個架構的頁面以得到每個架構
明確的支援資訊.

<ul>
  <li><a href="../../alpha.html">alpha</a> - DEC Alpha-based machines.
  <li><a href="../../amiga.html">amiga</a> - Amiga m68k-based models (MMU 
    required).
  <li><a href="../../hp300.html">hp300</a> - Hewlett-Packard HP300/HP400 machines.
  <li><a href="../../i386.html">i386</a> - Intel i386 compatibles.
  <li><a href="../../mac68k.html">mac68k</a> - Most MC680x0-based Apple 
    Macintosh models.
  <li><a href="../../mvme68k.html">mvme68k</a> - Motorola MVME147/16x/17x 68K 
    VME cards.
  <li><a href="../../macppc.html">macppc</a> - Support for Apple based 
    PowerPC systems.
  <li><a href="../../sparc.html">sparc</a> - SPARC Platform by Sun Microsystems.
  <li><a href="../../sparc64.html">sparc64</a> - Sun's UltraSPARC systems. 
  <li><a href="../../vax.html">vax</a> - DEC's VAX computers.
</ul>

<a name="Media"></a>
<h3>4.1.2 - 支援的安裝媒介</h3>

<p>
OpenBSD 可以從多樣的媒介來安裝. 最
普遍且無關硬體架構的安裝方式茲列如下. 當您從 OpenBSD 光碟機, 軟碟機或
<a href="#bsd.rd">ramdisk kernel</a>開機後, 可以使用以下選擇.

<p>
<table align="center" border="1" width="600">
<tr>
	<td>
		<b>光碟</b>
	</td>
	<td bgcolor="#EEEEEE">
		為了光碟安裝, 你必須買
		<a href="../orders.html">官方 OpenBSD 光碟</a> 或
		自製 OpenBSD 光碟片. 這是安裝 OpenBSD 系統
		最方便的方法. <br>
		<b>注意:</b> 官方 OpenBSD 光碟是可開機的, 如果您的 BIOS
		有支援光碟開的的話.
	</td>
</tr><tr>
	<td>
		<b>FTP</b>
	</td>
	<td bgcolor="#EEEEEE">
		這種安裝允許您可以
		即時從網路下載安裝
		套件來安裝.
	</td>
</tr><tr>
	<td>
		<b>本機檔案系統</b>
	</td>
	<td bgcolor="#EEEEEE">
		這個方法允許您可以從一個
		已經存在的檔案系統來安裝. DOS, EXT2FS 及 FFS 的
		支援已經包含在 i386 的安裝片中.
	</td>
</tr>
</table>

<a name="MkFlop"></a>
<h3>4.1.3 - 建立可開機的 OpenBSD 安裝軟碟片.</h3>

<p>
為了建立安裝軟碟片, 您必須從 OpenBSD 分佈的站台下載
正確的開機軟碟映像檔或
從官方 OpenBSD 光碟中複製.
您可以在<a href="../../zh-tw/ftp.html">OpenBSD
FTP 分佈</a> 找到 FTP 伺服器的列表.  大部分的硬體架構有一個或更多的開機
軟碟映像檔可以選擇, 不同的映像檔有不同的
硬體差異. 有關 i386 平台安裝軟碟片的
差異概述如下. 其他有多個開機
軟碟的硬體架構, 請參考 FTP 目錄中 INSTALL 文件.
對於那些只有一個檔案的, 就下載
對應的 <i>floppy32.fs</i> 映像檔即可. <br> <b>注意:</b>
<i>cdrom32.fs</i> 映像檔可以用來製作可開機的 OpenBSD
安裝光碟.

<p>
<a href="../../i386.html">i386</a> 平台有四個不同的
安裝映像檔可供選擇:

<ul>
<li><b><i>floppy32.fs</i></b> (桌上型個人電腦) 支援許多
	PCI 和 ISA 網路卡, IDE 和 簡單的 SCSI 卡 及一些 PCMCIA
	的支援.
<li><b><i>floppyB32.fs</i></b> (伺服器) 支援許多 RAID 控制卡,
        及一些比較不普遍的 SCSI 卡. 不過,
	支援許多標準的 SCSI 卡和許多被移除的 EISA 及 ISA 
	網路卡.
<li><b><i>floppyC32.fs</i></b> (筆記型電腦) 支援許多筆記型電腦的 Cardbus 和 PCMCIA
        裝置.  
<li><b><i>cdrom32.fs</i></b> 這個, 實際上是結合
	以上三個. 可以用來製作可開機的 2.88M
	軟碟, 或更常見的, 當成燒錄光碟的開機映像檔.
</ul>

<p>
大部分的 i386 使用者用 <i>floppy32.fs</i> 安裝
軟碟即可. 是的, 也許會有一些情況是一張安裝片支援您的
SCSI 卡而另一張安裝片支援您的網路卡. 幸運地, 這是少數的情況, 而且
通常都可以解決.

<p>
當您取得正確的軟碟片映像檔之後, 您需要一張空白的軟碟
片. 如果軟碟片上有任何壞軌的話, 安裝
很有可能會失敗.

<p>
<a name="UnixFlop"></a>
<h4>4.1.3.1 - 在 Unix 上建立軟碟片.</h4>
為了建立格式化的軟碟片, 使用
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdformat&amp;sektion=1&amp;arch=i386">fdformat(1)</a>
指令來格式化以及檢查是否有壞軌.

<p>
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
  # <b>fdformat /dev/fd0a</b>
  Format 1440K floppy `/dev/fd0a'? (y/n): y
  processing VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV done.
</pre></td></tr> </table>

<p>
如果您的輸出像以上範例所列, 您的磁片是正常的. 然而,
如果您沒有看到所有的&quot;V&quot; 的話, 您的磁片很有可能是壞的,
您應該試試另一張新的磁片.

<p>
您有了空白, 格式化過的磁片後, 接下來要寫入
安裝映像檔到磁片中. 您可以使用
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=0">dd(1)</a>
工具程式.  <i>dd(1)</i> 使用範例如下:

<p>
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
  # <b>dd if=floppy32.fs of=/dev/rfd0c bs=32k</b>
</pre></td></tr></table>

<p>
映像檔寫入後, 檢查確定所複製的映像檔是
和原始的一樣, 請使用
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cmp&amp;sektion=1">cmp(1)</a>
指令. 如果磁片是跟映像檔一樣,
您將會看到另一個提示符號.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>cmp /dev/rfd0c floppy32.fs</b>
</pre></td> </tr> </table>

<a name="DosFlop"></a>
<h4>4.1.3.2 - 在 DOS/Windows 上建立軟碟片.</h4>
如果您是要在 Windows/DOS 平台上建立映像檔, 您可以
在任何一個 ftp 映射站台的
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.2/tools/">tools</a>
目錄取得下面所提到的工具, 或在 OpenBSD 光碟套件中 CD1 的<i>3.2/tools</i>
目錄裡. DOS/Windows 9x 的使用者, 可以用<i>rawrite</i>
來寫入開機磁片.

<p>
在 MS-DOS 或 Windows 準備一張磁片, 就用原來的格式化工具就好.

<p>
要將安裝映像檔寫入準備好的磁片, 您可以使用
<i>rawrite</i>, <i>fdimage</i>, 或 <i>ntrw</i>. <i>rawrite</i> 無法在
Windows NT, 2000 或 XP 上面正常工作.

<p>
注意 <i>FDIMAGE.EXE</i> 和 <i>RAWRITE.EXE</i> 都是
MS-DOS 應用程式, 因此, 會限於 DOS 的 "8.3" 檔案命名
規則. <i>floppy32B.fs</i> 和 <i>floppy32C.fs</i> 都有
較長的檔名, 在使用 <i>FDIMAGE.EXE</i> 或
<i>RAWRITE.EXE</i> 製作開機磁片之前, 您必須要找出您的
系統是怎麼用 "8.3 格式" 來儲存這些檔案的.

<p>
<i>rawrite</i>使用範例:
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <b>rawrite</b>
  RaWrite 1.2 - Write disk file to raw floppy diskette

  Enter source file name: <b>floppy32.fs</b>
  Enter destination drive: <b>a</b>
  Please insert a formatted diskette into drive A: and press -ENTER- : <i><b>Enter</b></i>
</pre> </td> </tr> </table> 

<p>
<i>fdimage</i>使用範例:
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>fdimage -q floppy32.fs a:</strong>
</pre></td></tr></table>

<p>
<i>ntrw</i>使用範例:
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>ntrw floppy32.fs a:</strong>
  3.5", 1.44MB, 512 bytes/sector
  bufsize is 9216
  1474560 bytes written
</pre></td></tr></table>

<a name="Boot"></a>
<h3>4.1.4 - 以 OpenBSD 安裝映像檔開機.</h3>

p>
這節將較普遍的硬體架構分成獨立的小節來說明. 因而我們可以
適切地指導每個不同平台的使用者該如何來做.

<h4>開機啟動 i386 </h4>

<p>
在 i386 平台上用安裝片來開機對大部分的人來說沒有什麼陌生的.
如果您是使用磁片, 只要把磁片放進軟碟機然後打開系統. 您的安裝片
就會自動載入(假設軟碟開機選項已在 BIOS 被開啟).
如果您計畫要用光碟開機, 您必須進入
系統 BIOS 設定開機選項來允許從
光碟開機. 一些比較舊的 BIOS 沒有這類選項, 您就必須要從磁片來開機.
別擔心, 儘管您是從磁片開機的, 您還是可以從光碟來安裝.

<h4>開機啟動 sparc</h4>

<p>
<b>注意:</b> 在 sparc64, 只有 sbus 機器 (Ultra 1, Ultra 2)
才可從磁片開機.

<p>
要從磁片開機, 請將 OpenBSD 安裝磁片放到軟碟機中.
然後用下列指令從磁片開機:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot floppy</b>
</pre></td></tr></table>

<p>
要從光碟開機, 將 OpenBSD 光碟片放到光碟機中.
如果您的 Sun 機器只有一台光碟機, 到開機提示下, 
輸入 '<tt>boot cdrom</tt>':

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot cdrom</b>
</pre></td></tr></table>

<p>
當然, 這只能在新的命令模式. 如果您是在
舊的命令模式(向右的箭號), 輸入 'n' 切換到新的命令
模式. (如果您是使用舊的 sparc 是 pre-sun4c 的, 您可能
沒有新的命令模式. 如果這樣的話, 您需要進行試驗.)
如果您有多個光碟機, 您必須從正確的
那個開機. 試試看從新的命令模式輸入 <tt>probe-scsi</tt>.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>probe-scsi</b>

  Target 0
    Unit 0   Disk     QUANTUM LIGHTNING 365S
  Target 1
    Unit 0   Removable Disk     QUANTUM EMPIRE_1080S
  Target 3
    Unit 0   Removable Disk     Joe's CD ROMs
</pre></td></tr></table>

<p>
找出哪個才是您要開機的. 記下標號.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot /sbus/esp/sd@X,0</b>
</pre></td></tr></table>

<p>

<a name="Checklist"></a>
<h2>4.2 - 安裝前核對事項</h2>
在您開始安裝之前, 你應該要對你
最後想要的結果有點概念.

您必須要知道以下項目, 至少:
<ul>
<li>機器名稱
<li>安裝及可用的硬體
  <ul>
  <li>對照您的平台的硬體相容性網頁
      核對相容性
  <li>如果是 ISA, 您還要知道硬體的設定, 並且確定
      是這些設定.
  </ul>
<li>要使用的安裝方法 (光碟, FTP, 等等.)
<li>要求的磁碟安排
  <ul>
  <li>目前的資料需要儲存在其他地方嗎?
  <li>OpenBSD 會和其他 OS 並存嗎?  如果會, 
      該怎麼多重開機?  您需要安裝
      一個 "開機管理程式" 嗎?
  <li>OpenBSD 會使用整個硬碟, 或是使用目前
      (或是未來) 的分割區?
  <li>您打算如何分割 OpenBSD 這部分
      的磁區?
  </ul>
<li>網路設定, 如果不是使用 DHCP:
  <ul>
  <li>網域名稱(Domain Name)
  <li>網域名稱伺服器 (DNS 伺服器)
  <li>每張網路卡的 IP 位址及子網路遮罩(subnet masks)
  <li>閘道(Gateway)位址
  </ul>
<li>您會在這系統上使用 X 嗎?
</ul>



<a name="Install"></a>
<h2>4.3 - 開始安裝</h2>
不管您要用什麼方法開機, 現在該是開機的時候了. 在
開機的過程中, 核心和所有安裝 OpenBSD 時會用到的程式
將會載入到記憶體中. 最常見的問題是
用壞掉的磁片開機或磁碟校正的問題. 
開機片是被塞的滿滿的 -- 任何壞的地方都會產生問題.

<p>
當您成功開機後, 您將會看到一大串文字晃過.
這些文字, 在大多數的硬體架構上是藍底白字的, 是
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg</a>, 
這是核心告訴您找到了哪些裝置.
不用擔心要記住這些文字, 會有一份副本存放在
/var/run/dmesg.boot. 在大多數的硬體架構上, SHIFT+PGUP 可以
讓你一頁頁捲回去檢視這些文字.

<p>
然後, 您將會看到下面畫面:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  rootdev=0x1100 rrootdev=0x2f00 rawdev=0x2f02
  erase ^?, werase ^W, kill ^U, intr ^C, status ^T
  (I)nstall, (U)pgrade or (S)hell? <b>i</b>
</pre></td></tr></table>

<p>
在這, 我們碰到了第一個詢問. 在大多數的情況下, 您有
以下三個選擇:
<ul>
<li><b>Install:</b> 將 OpenBSD 載入系統, 會複寫
可能已經存在的檔案.  注意, 有可能有些分割區並不會
被更動到, 如 <tt>/home</tt>, 但是除此之外,
假設其他所有的都是會被複寫的.
<li><b>Upgrade:</b> 安裝一份新的 <a href="#FilesNeeded">安裝
檔案</a> 到機器上, 但是不會複寫任何設定
資料, 使用者資料, 或額外的程式. 不會執行任何
磁碟格式化動作, 也不會複寫 /etc 或 /var 目錄. 您將不會
選取安裝 <i>etc32.tgz</i> 這個選項.
安裝後, 您必須手動更新 <i>etc32.tgz</i> 的改變, 以達到您預期的
功能都可正常運作. 這是個一定要完成的重要步驟, 否則
有些重要的服務(像是
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>)
會無法啟動.
<br>
<b>注意:</b> 這個 Upgrade 的程序不是設計來跳過好幾個正式釋出版用的! 雖然
通常都還可以行得通, 但是這是不支援的. 以 OpenBSD 3.2 來說, 從
3.1 升級到 3.2 是唯一支援的升級.  如果您一定要從
更舊的版本升級, 建議最好是完全重新安裝.

<li><b>Shell:</b> 有時候, 您會須要對無法(或不要)用一般的核心
來開機的系統進行修復或維護動作.
這個選項可以讓您對系統做些維護動作.
</ul>

有時, 您不會看到 "Upgrade" 這個選項列在上面. 在經過
<a href="http://www.tuxedo.org/~esr/jargon/html/entry/flag-day.html">flag 
day</a> 事件後, 就不可能直接升級, 必須要從頭重新建立
系統.  有個這樣的例子在 OpenBSD 3.2 上是 Sparc 這個
平台, 它的執行檔格式從 a.out 轉換到 ELF, 所以使用者
要把他們的 Sparc 升級到 3.2 必須要全部重裝系統.

<p>
在這個例子中, 我們用安裝來說明, 升級的步驟會跟安裝很類似.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Welcome to the OpenBSD/i386 3.2 install program.

  This program will help you install OpenBSD in a simple and rational way. At
  any prompt except password prompts you can run a shell command by typing
  '!foo', or escape to a shell by typing '!'. Default answers are shown in []'s
  and are selected by pressing RETURN. At any time you can exit this program by
  pressing Control-C and then RETURN, but quitting during an install can leave
  your system in an inconsistent state.

  Specify terminal type: [vt220]
  Do you wish to select a keyboard encoding table? [n] <b>y</b>
</pre></td></tr></table>

<p>
在大多數的情況下, 預設的終端機型態是合適的, 不過如果您
是使用序列操控臺(serial console)來安裝, 不要使用預設值,
回答適合的設定.

<p>
如果您沒有選擇鍵盤對照表, 預設是 US 鍵盤對照.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  IS YOUR DATA BACKED UP? As with anything that modifies disk contents, this
  program can cause SIGNIFICANT data loss.

  It is often helpful to have the installation notes handy. For complex disk
  configurations, relevant disk hardware manuals and a calculator are useful.

  Proceed with install? [n] <b>y</b>
</pre></td></tr></table>

<p>
如果您採用預設值, 安裝程序會暫時終止並且
給您一個提示符號.

<a name="Disks"></a>
<h3>4.3.1 - 設定磁碟.</h3>

<p>
設定磁碟在不同平台上有些許不同.
<a href="../../i386.html">i386</a> 和 <a href="../../macppc.html">macppc</a>,
的磁碟設定在兩階段完成.  首先, OpenBSD 的硬碟分割(slice)
是透過 fdisk(8) 設定, 接著使用 disklabel(8) 再將
slice 再細分成 OpenBSD 分割區(partitions).

<p>
有些人也許對這裡使用的名詞會有些糊塗. 似乎
我們把 "partition" 這個字用在不同的地方.
這個觀察是對的. 在幾個 OpenBSD 的平台上, 會有兩個層次
的分割, 第一層, 可以視為是作業系統的硬碟分割, 這是同一台電腦上
不同的作業系統制定自己磁碟空間的方法, 第二層是將 OpenBSD
分割區再細分割成不同的檔案系統. 第一
層的分割是可以被看到的, 在 DOS, Windows, 和其他可以在 IBM AT 系列的
機器上和其他作業系統並存的
作業系統. 第二層的分割只能被 OpenBSD 和
那些可以直接讀取 OpenBSD 檔案系統的作業系統所看見.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Cool!  Let's get to it...

  You will now initialize the disk(s) that OpenBSD will use. To enable all
  available security features you should configure the disk(s) to allow the
  creation of separate filesystems for /, /tmp, /var, /usr, and /home.

  Available disks are: wd0.
  Which one is the root disk? (or done) [wd0] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
根磁碟(root disk) 是系統開機的磁區, 一般來說也是存放 
swap 空間的地方. 通常, 都會用預設值 -- 如果不是的話, 您
必須知道如何強迫您的電腦從非標準的
磁碟開機. IDE 磁碟會顯示為 <tt>wd0</tt>, <tt>wd1</tt>, 等等., SCSI 磁碟和
RAID 裝置會顯示為 <tt>sd0</tt>, <tt>sd1</tt>, 如此繼續.  所有
OpenBSD 可以找到的磁碟會列在這 -- 如果有其他磁碟
沒有列出的, 可能是不支援或設定不正確的硬體.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you want to use *all* of wd0 for OpenBSD? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
如果您輸入 "yes", 整個硬碟就會都分配給 
OpenBSD.  簡單的主開機記錄(Master Boot Record) 及分割
表會寫入磁碟 -- 一個分割區, 大小同整顆
硬碟, 設定為 OpenBSD 的分割區類別, 並標示為
可開機磁區.  這是一般用途的選項, 不過, 有些系統不能
這樣做.  許多 Compaq 系統, 一些 Dell 的和其他的系統使用一個
"維護"分割區, 這應該保持不動.  如果您的系統
有其他分割區是您不想刪除的話, 千萬不要選 "yes".

<p>
為了這個例子, 我們假設這個磁碟被分為 
OpenBSD 和一個已存在的 Windows 2000 分割區, 所以
我們選擇預設值 "no", 如此會進入
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
程式.  您也可以從
<a href="../faq14.html#fdisk">這裡</a> 得到更多 fdisk(8) 的資訊.

<p>
<b>重要訊息:</b>
使用大硬碟的使用者 (大於 8G 在較新的 i386 機器上; 雖然
在較舊的機器及不同的平台上, 通常會小的多) 在進行下一步之前
先看看 <a href="../faq14.html#LargeDrive">這節</a>.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Your will now create a single MBR partition to contain your OpenBSD data. This
  partition must have an id of 'A6'; must *NOT* overlap other partitions; and
  must be marked as the only active partition.

  The 'manual' command describes all the fdisk commands in detail.

  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 06    0   1  1 -  202 239 63 [          63:     3069297 ] DOS > 32MB
   1: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  Enter 'help' for information
  fdisk: 1> <b>help</b>
          help            Command help list
          manual          Show entire OpenBSD man page for fdisk
          reinit          Re-initialize loaded MBR (to defaults)
          setpid          Set the identifier of a given table entry
          disk            Edit current drive stats
          edit            Edit given table entry
          flag            Flag given table entry as bootable
          update          Update machine code in loaded MBR
          select          Select extended partition table entry MBR
          print           Print loaded MBR partition table
          write           Write loaded MBR to disk
          exit            Exit edit of current MBR, without saving changes
          quit            Quit edit of current MBR, saving current changes
          abort           Abort program without saving current changes
  fdisk: 1> 
</pre></td></tr></table>

<p>
一些值得詳細說明的指令:
<ul>
<li><b><tt>r</tt></b> 或 <b><tt>reinit</tt>:</b> 清除目前的
分割表, 建立一個大的 OpenBSD 分割區, 設為使用中的.
和輸入 "yes" 當回答 "<tt>use *all* of ...</tt>" 這個問題時是一樣的.
<li><b><tt>p</tt></b> 或 <b><tt>print:</tt></b> 顯示目前的
分割表, 用磁區(sector)表示.  "<tt>p m</tt>" 會用 megabytes 來顯示,
"<tt>p g</tt>" 會用 gigabytes 來顯示.
<li><b><tt>e</tt></b> 或 <b><tt>edit:</tt></b> 編輯或修改一個
項目.
<li><b><tt>f</tt></b> 或 <b><tt>flag:</tt></b> 標示分割區為
使用中的分割區, 可以從它來開機.
<li><b><tt>exit</tt></b> 和 <b><tt>quit:</tt></b> 小心這兩個指令, 
有些人習慣的 "exit" 和 "quit" 和這裡所指的是相反的意義.
</ul>

在這裡要再次強調, 如果這部分稍有失誤的話可能會導致
重要資料的遺失. 如果您是要在存有重要資料的
磁碟上安裝, 除了做好備份之外, 最好可以在其他無關的
磁碟上先練習.

<p>
我們的磁碟目前有一個 1.5G 的 Windows 2000 分割區(使用 FAT 
檔案系統).  從上面顯示的資訊可以看的出來, Windows 分割區
空間是到第 202 磁柱為止.
所以我們可以分配剩下的磁碟空間給 OpenBSD, 從第 203 磁柱
開始.  您可以計算 OpenBSD 的起始磁區為 3069360, 把目前分割區的
起始磁區 (63) 加上它的大小 (3069297) 就可得出.

<p>
您可以藉由 Cylinder/Heads/Sectors 格式或 raw sectors 編輯磁碟分配.
  Which is easier depends upon what you 
are doing, in this case, working around an existing partition, using
CHS format will probably be easier.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk: 1> <b>e 1</b>
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
   1: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>a6</b>
  Do you wish to edit in CHS mode? [n] <b>y</b>
  BIOS Starting cylinder [0 - 2585]: [0] <b>203</b>
  BIOS Starting head [0 - 239]: [0] <b><i>Enter</i></b>
  BIOS Starting sector [1 - 63]: [0] <b>1</b>
  BIOS Ending cylinder [0 - 2585]: [0] <b>2585</b>
  BIOS Ending head [0 - 239]: [0] <b>239</b>
  BIOS Ending sector [1 - 63]: [0] <b>63</b>
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 06    0   1  1 -  202 239 63 [          63:     3069297 ] DOS > 32MB
   1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  fdisk:*1> <b>p m</b>
  Disk: wd0       geometry: 2586/240/63 [19092 Megabytes]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 06    0   1  1 -  202 239 63 [          63:        1499M] DOS > 32MB
   1: A6  203   0  1 - 2585 239 63 [     3069360:       17593M] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0M] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0M] unused
  fdisk:*1> 
</pre></td></tr></table>

<p>
Note that prompt changed to include an asterisk ('<tt>*</tt>') to 
indicate you have unsaved changes.  As we can see from the output of 
<tt>p&nbsp;m</tt> we have not altered our Windows partition, we have
successfully allocated the rest of the drive for OpenBSD, and the partitions
do not overlap.  We are in business.  Almost.

<p>
What we haven't done is flagged the partition as active so the machine 
will boot OpenBSD on the next reboot:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>f 1</b>
  Partition 1 marked active.
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
   0: 06    0   1  1 -  202 239 63 [          63:     3069297 ] DOS > 32MB
  *1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  fdisk:*1>
</pre></td></tr></table>

<p>
And now, we are ready to save our changes:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>w</b>
  Writing MBR at offset 0.
  wd0: no disk label
  fdisk: 1> <b>q</b>
</pre></td></tr></table> 

<p>

<a name="disklabel"></a>
<h3>Creating a disklabel</h3>
The next step is to use 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a> 
to slice up the OpenBSD partition.  More details on using disklabel(8) 
can be found in 
<a href="../faq14.html#disklabel">FAQ 14, disklabel</a>.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Here is the partition information you chose:
  
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 06    0   1  1 -  202 239 63 [          63:     3069297 ] DOS > 32MB
   1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused

  You will now create an OpenBSD disklabel inside the OpenBSD MBR
  partition. The disklabel defines how OpenBSD splits up the MBR partition
  into OpenBSD partitions in which filesystems and swap space are created.

  The offsets used in the disklabel are ABSOLUTE, i.e. relative to the
  start of the disk, NOT the start of the OpenBSD MBR partition.

  disklabel: no disk label
  WARNING: Disk wd0 has no label. You will be creating a new one.
  
  # using MBR partition 1: type A6 off 3069360 (0x2ed5b0) size 36030960 (0x225c9f0)

  Treating sectors 3069360-39100320 as the OpenBSD portion of the disk.
  You can use the 'b' command to change this.

  Initial label editor (enter '?' for help at any prompt)
  > <b>?</b>
  Available commands:
          p [unit]  - print label.
          M         - show entire OpenBSD man page for disklabel.
          e         - edit drive parameters.
          a [part]  - add new partition.
          b         - set OpenBSD disk boundaries.
          c [part]  - change partition size.
          d [part]  - delete partition.
          D         - set label to default.
          g [d|b]   - Use [d]isk or [b]ios geometry.
          m [part]  - modify existing partition.
          n [part]  - set the mount point for a partition.
          r         - recalculate free space.
          u         - undo last change.
          s [path]  - save label to file.
          w         - write label to disk.
          q         - quit and save changes.
          x         - exit without saving changes.
          X         - toggle expert mode.
          z         - zero out partition table.
          ? [cmnd]  - this message or command specific help.
  Numeric parameters may use suffixes to indicate units:
          'b' for bytes, 'c' for cylinders, 'k' for kilobytes, 'm' for megabytes,
          'g' for gigabytes or no suffix for sectors (usually 512 bytes).
          Non-sector units will be rounded to the nearest cylinder.
  Entering '?' at most prompts will give you (simple) context sensitive help.
  > 
</pre></td></tr></table>

<p>
Again, a few of these commands could use a little elaboration:
<ul>
<li><b><tt>p</tt></b> - displays (prints) the current disklabel to the
screen, and you can use the modifiers <tt>k, m</tt> or <tt>g</tt> for
kilobytes, megabytes or gigabytes.

<li><b><tt>D</tt></b> - Clears any existing disklabel, creates a new
default disklabel which covers just the current OpenBSD partition.  This
can be useful if the disk previously had a disklabel on it, and the
OpenBSD partition was recreated to a different size -- the old disk
label may not get deleted, and may cause confusion.

<li><b><tt>m</tt></b> - Modifies an existing entry in a disklabel.
Do not over estimate what this will do for you. While it may alter the
size of a disklabel partition, it will NOT alter the filesystem on the
drive.  Using this option and expecting it to resize existing partitions
is a good way of losing large amounts of data.

</ul>

<p>
Slicing up your disk properly is important.  The answer to the question,
"How should I partition my system?" is "Exactly how you need it".  This
will vary from application to application.  There is no universal
answer.  If you are unsure of how you want to partition your system, see
<a href="#SpaceNeeded">this discussion</a>.

<p>
In this system, we have over 17G available for OpenBSD.  That's a lot 
of space, and it isn't likely we will need most of it.  So, we will 
deliberately not use absolute minimum sizes.  We would rather have a 
few hundred megabytes of unused space than a kilobyte too little.  

<p>
On the root disk, the two partitions 'a' and 'b' <b>must</b> be 
created. The installation process will not proceed until these two
partitions are available. 'a' will be used for the root filesystem (/)
and 'b' will be used as swap space.

<p>
After a little thought, we decide to create just enough partitions to
allow the creation of the recommended separate filesystems (<i>/, /tmp,
/var, /usr, /home</i>) along with a swap partition:
<ul>
<li><i><b>wd0a: /</b></i> (root) - 150M.  Should be more than enough.
<li><i><b>wd0b: </b></i>(swap) - 300M.
<li><i><b>wd0d: /tmp</b></i> - 120M.  /tmp is used for building some
  software, 120M will probably be enough for most things.
<li><i><b>wd0e: /var</b></i> - 80M.  If this were to be a web or mail
  server, we'd have made this partition much larger, but, that's not
  what we are doing.
<li><i><b>wd0g: /usr</b></i> - 2G.  We want this partition to be large
  enough to load quite a few user applications, plus be able to update
  and rebuild the system if desired or needed.  The 
  <a href="../../ports.html">Ports tree</a> will be here as well, which
  will take almost 100M of this space before ports are built.
<li><i><b>wd0h: /home</b></i> - 4G.  This will allow plenty of user file
  space.
</ul>

Now, if you add those up, you will see over 10G of space is unused!
Unused space won't hurt anything, and it gives us flexibility to enlarge
things in the future if need be.  Need more <i>/tmp</i>?  No problem,
create a new one in the unused space, change <i>/etc/fstab</i> and
problem solved.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>p m</b>
  device: /dev/rwd0c
  type: ESDI
  disk: ESDI/IDE disk
  label: ST320011A
  bytes/sector: 512
  sectors/track: 63
  tracks/cylinder: 16
  sectors/cylinder: 1008
  cylinders: 16383
  total sectors: 39102336
  free sectors: 36030960
  rpm: 3600
  
  16 partitions:
  #        size   offset    fstype   [fsize bsize   cpg]
    a: 17593.2M  1498.7M    unused        0     0
    c: 19092.9M     0.0M    unused        0     0
    i:  1498.7M     0.0M     MSDOS
  > <b>d a</b>
  > <b>a a</b>
  offset: [3069360] <b><i>Enter</i></b>
  size: [36030960] <b>150M</b>
  Rounding to nearest cylinder: 307440
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/</b>
  > <b>a b</b>
  offset: [3376800] <b><i>Enter</i></b>
  size: [35723520] <b>300M</b>
  Rounding to nearest cylinder: 614880
  FS type: [swap] <b><i>Enter</i></b>
  > <b>a d</b>
  offset: [3991680] <b><i>Enter</i></b>
  size: [35108640] <b>120m</b>
  Rounding to nearest cylinder: 245952
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/tmp</b>
  > <b>a e</b>
  offset: [4237632] <b><i>Enter</i></b>
  size: [34862688] <b>80m</b>
  Rounding to nearest cylinder: 164304
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/var</b>
  > <b>a g</b>
  offset: [4401936] <b><i>Enter</i></b>
  size: [34698384] <b>2g</b>
  Rounding to nearest cylinder: 4194288
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr</b>
  > <b>a h</b>
  offset: [8596224] <b><i>Enter</i></b>
  size: [30504096] <b>4g</b>
  Rounding to nearest cylinder: 8388576
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/home</b>
  > <b>p m</b>
  device: /dev/rwd0c
  type: ESDI
  disk: ESDI/IDE disk
  label: ST320011A
  bytes/sector: 512
  sectors/track: 63
  tracks/cylinder: 16
  sectors/cylinder: 1008
  cylinders: 16383
  total sectors: 39102336
  free sectors: 22115520
  rpm: 3600
  
  16 partitions:
  #        size   offset    fstype   [fsize bsize   cpg]
    a:   150.1M  1498.7M    4.2BSD     1024  8192    16  # /
    b:   300.2M  1648.8M      swap
    c: 19092.9M     0.0M    unused        0     0
    d:   120.1M  1949.1M    4.2BSD     1024  8192    16  # /tmp
    e:    80.2M  2069.2M    4.2BSD     1024  8192    16  # /var
    g:  2048.0M  2149.4M    4.2BSD     1024  8192    16  # /usr
    h:  4096.0M  4197.4M    4.2BSD     1024  8192    16  # /home
    i:  1498.7M     0.0M     MSDOS
  > <b>q</b>
  Write new label?: [y] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
You will note there is a <i>c</i> partition we seem to have ignored.  This
partition is your entire hard disk, don't attempt to alter it.  You will
also note the <i>i</i> partition wasn't defined by us, this is the
pre-existing Windows 2000 partition. partitions are not assigned any particular letters -- with the exception
of <i>a</i> (root), <i>b</i> (swap) and <i>c</i> (entire disk), the rest
of the partitions (through letter <i>p</i>) are available for use as you
desire.

<p>
If you look closely at the output of the disklabel, you will note that 
your drive RPM rating is probably wrong.  This is historical, the 
drive speed is not used in any way by the system, do not worry about
it.

<h3>Configuring your mount points and formating your filesystems</h3>

Now comes the final setup of your mount points.  If you configured the
mount points through 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>, 
this step consists of just verifying
your selections, otherwise, you can specify them now.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  The root filesystem will be mounted on wd0a.
  wd0b will be used for swap space.
  Mount point for wd0d (size=122976k), none or done? [/tmp] <b><i>Enter</i></b>
  Mount point for wd0e (size=82152k), none or done? [/var] <b><i>Enter</i></b>
  Mount point for wd0g (size=2097144k), none or done? [/usr] <b><i>Enter</i></b>
  Mount point for wd0h (size=4194288k), none or done? [/home] <b><i>Enter</i></b>
  Mount point for wd0d (size=122976k), none or done? [/tmp] <b>done</b>
  Done - no available disks found.
 
  You have configured the following partitions and mount points:

  wd0a /
  wd0d /tmp
  wd0e /var
  wd0g /usr
  wd0h /home

  The next step creates a filesystem on each partition, ERASING existing data.
  Are you really sure that you're ready to proceed? [n] y
  /dev/rwd0a:     307440 sectors in 305 cylinders of 16 tracks, 63 sectors
          150.1MB in 20 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
  /dev/rwd0d:     245952 sectors in 244 cylinders of 16 tracks, 63 sectors
          120.1MB in 16 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
  /dev/rwd0e:     164304 sectors in 163 cylinders of 16 tracks, 63 sectors
          80.2MB in 11 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
  /dev/rwd0g:     4194288 sectors in 4161 cylinders of 16 tracks, 63 sectors
          2048.0MB in 261 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
  /dev/rwd0h:     8388576 sectors in 8322 cylinders of 16 tracks, 63 sectors
          4096.0MB in 521 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local, ctime=Thu Oct 10 21:
  50:36 2 002)
  /dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid,
   ctime=Thu Oct 10 21:50:36 2002)
  /dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid, 
  ctime=Thu Oct 10 21:50:36 2002)
  /dev/wd0g on /mnt/usr type ffs (rw, asynchronous, local, nodev, ctime=Th
  u Oct 10 21:50:36 2002)
  /dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid, 
  ctime=Th u Oct 10 21:50:36 2002)
</pre></td></tr></table>

<p>
You may wonder why the installer again asks for mount points.  This
allows you to recover from any errors or omissions in the mount
points specified during the creation of the disklabel. For instance,
the installation process will automatically delete any duplicate
mount points you enter during the configuration of the disklabel. The
disklabel program will allow you to enter such duplicates, and thus
they must be checked for after the disklabel program exits. The
deleted duplicate mount points will result in partitions without mount
points, that you must assign new mount points for if you wish to use
the space.

<p>
Notice the "Are you really sure that you are ready to proceed?" question
defaults to no, so you will have to deliberately tell it to proceed and
format your partitions. If you chose no, you would simply be dropped
into a shell and could start the install again by typing install, or
just by rebooting again with your boot disk.

<p>
At this point all filesystems will formatted for you.  This could take
some time depending on the size of the partitions and the speed of the
disk.

<a name="Hostname"></a>
<h3>4.3.2 - 設定系統主機名稱(Hostname)</h3>
<p>
Now you must set the system hostname. This value will be saved in the
file /etc/myname, which is used during normal boots to set the hostname
of the system. As of OpenBSD 3.2 the name stored in <i>/etc/myname</i>
includes the fully qualified domain name of the system (FQDN). If you do
not set the FQDN of the system, the default value of 'my.domain' will be
used.

<p>
It is important to set this name now, because it will be used when the
cryptographic keys for the system are generated during the first boot
after installation. This generation takes place whether the network is
configured or not.

<p> 
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Enter system hostname (short form, e.g. 'foo'): <b>puffy</b>
</pre></td></tr></table>

<a name="Network"></a>
<h3>4.3.3 - 設定網路</h3>

<p>
Now it is time to configur your network.  The network must be configured
if you are planning on doing a ftp or nfs based install, considering it
will be based upon the information you are about to enter. Here is a
walk through of the network configuration section of the install
process.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Configure the network? [y] <b><i>Enter</i></b>

  If any interface will be configured by DHCP, you should not enter
  information that will be supplied via DHCP, e.g. the DNS domain name.

  Enter DNS domain name (e.g. 'bar.com'): [my.domain] <b>example.com</b>
  Available interfaces are: fxp0.
  Which one do you wish to initialize? (or done) [fxp0] <b><i>Enter</i></b>
  IP address for fxp0 (or 'dhcp')? <b>199.185.137.55</b>
  Symbolic (host) name? [puffy] <b><i>Enter</i></b>
  Netmask? [255.255.255.0] <b><i>Enter</i></b>
  The default media for fxp0 is
          media: Ethernet autoselect (100baseTX full-duplex)
  Do you want to change the default media? [n] <b><i>Enter</i></b>
  Done - no available interfaces found.
  Enter IP address of default route: [none] <b>199.185.137.128</b>
  Enter IP address of primary nameserver: [none] <b>199.185.137.1</b>
  Would you like to use the nameserver now? [y] <b><i>Enter</i></b>
  Do you want to do more, manual, network configuration? [n] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
In the above example, we use a static IP address. You can choose to use
dhcp as well if you wish. In the case of DHCP, most of this information
will be grabbed from a remote dhcp server, though you will be given a
chance to confirm it.

<p>
<b>NOTE: </b>Only <b>one</b> interface can easily be configured using
DHCP during an install. If you attempt to configure more than one
interface using DHCP you will encounter errors. You have to manually
configure the additional interfaces after the installation.


<a name="InstMedia"></a>
<h3>4.3.4 - 選擇安裝媒介</h3>

<p>
After your network is setup, the install script will give you a chance
to make manual adjustments to the configuration. Then the filesystems you
created will be mounted and a root password set. This will get your
local disks ready for the OpenBSD packages to be installed upon them.

<p>
Next, you will get a chance to choose your installation media. The
options are listed below.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  You will now specify the location and names of the install sets you want to
  load. You will be able to repeat this step until all of your sets have been
  successfully loaded. If you are not sure what sets to install, refer to the
  installation notes for details on the contents of each.
 
  Sets can be located on a (m)ounted filesystem; a (c)drom, (d)isk or (t)ape
  device; or a (f)tp, (n)fs or (h)ttp server.
  Where are the install sets you want to use? (m, c, f, etc.) <b>c</b>
  Available CD-ROMs are: cd0.
</pre></td></tr></table>

<p>
In this example we are installing from CD-ROM. This will bring up a list
of devices on your computer identified as a CD-ROM. Most people will
only have one. If you  you need to make sure you pick the device
which you will use to install OpenBSD from. 

<p>
<b>NOTE: </b>All possible sources for install sets are listed, but not
all may be available on your system. e.g. (n)fs is shown but not all
architectures allow NFS installations. If you choose a source that is
not available, you will get an error message and be given the chance
to choose another source for your installation sets.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available CD-ROMs are: cd0.
  Which one contains the install media? (or done) [cd0] <b><i>Enter</i></b>

  Enter the pathname where the sets are stored (or '?') [3.2/i386] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Here, you are prompted for which directory the installation files are, 
which is <i>3.2/i386/</i> on the official CDROM.  

<a name="Filesets"></a>
<h3>4.3.5 - 選擇安裝項目.</h3>

<p>
Now it's time to choose which packages you will be installing. You can
get a description of these files in <a href="#FilesNeeded">the next
section</a>. The files that the install program finds will be shown to
you on the screen. Your job is just to specify which files you want. By
default all the non-X packages are selected, however, some people may
wish to limit this to the bare minimum required to run OpenBSD, which
would be <i>base32.tar.gz</i>, <i>etc32.tar.gz</i> and <i>bsd</i>.
Others will wish to install all packages. The example below is that of a
full install.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  The following sets are available. Enter a filename, 'all' to select
  all the sets, or 'done'. You may de-select a set by prepending a '-'
  to its name.

          [X] base32.tgz
          [X] etc32.tgz
          [X] misc32.tgz
          [X] comp32.tgz
          [X] man32.tgz
          [X] game32.tgz
          [ ] xbase32.tgz
          [ ] xshare32.tgz
          [ ] xfont32.tgz
          [ ] xserv32.tgz
          [X] bsd

  File Name? (or 'done') [xbase32.tgz] <b>all</b>

  The following sets are available. Enter a filename, 'all' to select
  all the sets, or 'done'. You may de-select a set by prepending a '-'
  to its name.

          [X] base32.tgz
          [X] etc32.tgz
          [X] misc32.tgz
          [X] comp32.tgz
          [X] man32.tgz
          [X] game32.tgz
          [X] xbase32.tgz
          [X] xshare32.tgz
          [X] xfont32.tgz
          [X] xserv32.tgz
          [X] bsd
</pre></td></tr></table>

<p>
You can do all kinds of nifty things here -- <tt>-x*</tt> would remove
all X components, if you changed your mind.  In this case, we are going
to load all the sets.  While the system will run with fewer sets, the
starting default is recommended.

<p>
Once you have successfully picked which packages you want, you will be
prompted to make sure you want to extract these packages and they will
then be installed. A progress bar will be shown that will keep you
informed on how much time it will take. The times range greatly
depending on what system it is you are installing OpenBSD on, the
packages installed, and the speed of the source media.  This part may
from a few minutes to several hours.

<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  File Name? (or 'done') [done] <b><i>Enter</i></b>
  Ready to install sets? [y] <b><i>Enter</i></b>

  Getting base32.tgz ...
  100% |**************************************************| 23870 KB    00:15
  Getting etc32.tgz ...
  100% |**************************************************|  1447 KB    00:01
  Getting misc32.tgz ...
  100% |**************************************************|  1666 KB    00:00
  Getting comp32.tgz ...
  100% |**************************************************| 16801 KB    00:12
  Getting man32.tgz ...
  100% |**************************************************|  5428 KB    00:04
  Getting game32.tgz ...
  100% |**************************************************|  2702 KB    00:01
  Getting bsd ...
  100% |**************************************************|  4409 KB    00:01
  Getting xbase32.tgz ...
  100% |**************************************************|  8837 KB    00:04
  Getting xshare32.tgz ...
  100% |**************************************************|  1531 KB    00:02
  Getting xfont32.tgz ...
  100% |**************************************************| 30664 KB    00:14
  Getting xserv32.tgz ...
  100% |**************************************************| 14798 KB    00:05
  Extract more sets? [n] 
</pre></td></tr></table>

<p>
If your system has a small amount of RAM (less than 20M on i386), do not 
hit return at that prompt quite yet!

<a name="SmallRAM"></a>
<h3>4.3.6 - 機器較少記憶體時的特別步驟</h3>
As OpenBSD has grown, the minimum RAM requirement has grown, and is
likely to continue to increase.  The next step in the install process
will require more than 16M RAM, and will fail on older machines with
less than 20M RAM (again, these are i386 numbers -- some other platforms
will require far less RAM, though this trick can be used with them as
well, if they are running near the lower-limits.

<p>
During the install process, there is normally no swap, the real RAM is
all you have.  The 'MAKEDEV' step that follows will require more than
the rest of the install required.  As a system with small amounts of RAM
can still be very usable for many applications, working around this
limitation is a quite useful trick.

<p>
The solution is to activate swap now.  The swap partition has been
created, the files are installed to the hard disk, the only trick here
is to manually invoke it.  So, do not just hit 'ENTER' at the above
prompt, but rather, hit '!', which will bring up a shell, and launch 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=swapon&amp;sektion=8">swapon(8)</a>
from the mounted hard drive:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Extract more sets? [n] <b>!</b>
  Type 'exit' to return to install.
  # <b>/mnt/sbin/swapon /dev/wd0b</b>
  total: 307440k bytes allocated = 0k used, 307440k available
  # <b>exit</b>
  Extract more sets? [n] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
You can now resume the normal installation.

<a name="Finish"></a>
<h3>4.3.7 - 結束安裝</h3>

You will now be asked if you plan to run X on this system.  If you
answer 'Y', <i>/etc/sysctl.conf</i> will be modified to include the
line <tt>machdep.allowaperture=1</tt> or <tt>machdep.allowaperture=2</tt>,
depending on your platform.

<p>
Your last task is to enter the time zone.  Depending on where your
machine lives, there are may be several equally valid answers for the
question.  In the example that follows, we used <tt>US/Eastern</tt>, but
could also have used <tt>EST5EDT</tt> or <tt>US/Michigan</tt> and had
the same result.  Hitting <tt>?</tt> at the prompts will guide you
through your choices.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Extract more sets? [n] <b><i>Enter</i></b>
  Do you expect to run the X Window System? [y] <b>y</b>
  Saving configuration files......done.
  Generating initial host.random file ......done.
  What timezone are you in? ('?' for list) [US/Pacific] <b>?</b>
  Africa/      Chile/       GB-Eire      Israel       NZ-CHAT      Turkey
  America/     Cuba         GMT          Jamaica      Navajo       UCT
  Antarctica/  EET          GMT+0        Japan        PRC          US/
  Arctic/      EST          GMT-0        Kwajalein    PST8PDT      UTC
  Asia/        EST5EDT      GMT0         Libya        Pacific/     Universal
  Atlantic/    Egypt        Greenwich    MET          Poland       W-SU
  Australia/   Eire         HST          MST          Portugal     WET
  Brazil/      Etc/         Hongkong     MST7MDT      ROC          Zulu
  CET          Europe/      Iceland      Mexico/      ROK          posix/
  CST6CDT      Factory      Indian/      Mideast/     Singapore    posixrules
  Canada/      GB           Iran         NZ           SystemV/     right/
  What timezone are you in? ('?' for list) [US/Pacific] <b>US</b>
  Select a sub-timezone of 'US' ('?' for list): <b>?</b>
  Alaska          Central         Hawaii          Mountain        Samoa
  Aleutian        East-Indiana    Indiana-Starke  Pacific
  Arizona         Eastern         Michigan        Pacific-New
  Select a sub-timezone of 'US' ('?' for list): <b>Eastern</b>
  You have selected timezone 'US/Eastern'.
</pre></td></tr></table>

<p>
The last steps are for the system to create the <i>/dev</i> directory 
(which may take a while on some systems, especially if you had to use
the <a href="#SmallRAM">Small RAM</a> trick above), and install the 
boot blocks. 

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Making all device nodes...done.
  Installing boot block...
  boot: /mnt/boot
  proto: /usr/mdec/biosboot
  device: /dev/rwd0c
  /usr/mdec/biosboot: entry point 0
  proto bootblock size 512
  room for 12 filesystem blocks at 0x16f
  Will load 7 blocks of size 8192 each.
  Using disk geometry of 63 sectors and 240 heads.
   0:  9 @(203 150 55) (3078864-3078872)
   1: 63 @(203 151 1) (3078873-3078935)
   2: 24 @(203 152 1) (3078936-3078959)
   3: 16 @(203 8 47) (3069910-3069925)
  /mnt/boot: 4 entries total
  using MBR partition 1: type 166 (0xa6) offset 3069360 (0x2ed5b0)
  ...done.

  CONGRATULATIONS! Your OpenBSD install has been successfully completed!
  To boot the new system, enter halt at the command prompt. Once the
  system has halted, reset the machine and boot from the disk.
  # <b>halt</b>
  syncing disks... done

  The operating system has halted.
  Please press any key to reboot.
</pre></td></tr></table>

<p>
OpenBSD is now installed on your system and ready for its first
boot, but before you do...

<p>

<h4>Before you reboot</h4>
At this point, your system is installed and ready to be rebooted and
configured for service.  Before doing this, however, it would be wise to
check out the <a href="../../zh-tw/errata.html">Errata page</a> to see if there
are any bugs that would immediately impact you.

<h4>After you reboot</h4>

<p>
One of your first things to read after you install your system is
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8">afterboot(8)</a>.

<p>
You may also find the following links useful:
<ul>
<li><a href="../faq10.html#AddDelUser">Adding users in OpenBSD</a> 
<li><a href="../faq6.html#Setup">Initial Network Setup</a>
<li><a href="../faq2.html#ManPages">Man Pages of popular/useful commands</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi">OpenBSD man pages on 
  the Web</a>
<li><a href="../../ports.html">The OpenBSD Ports and Packages system for 
  installing software</a>, as well as 
<a href="../faq8.html#Ports">here</a> and <a href="../faq8.html#Packages">here</a>
</ul>

<h4>One last thing...</h4>
The OpenBSD developers ask you to
<a href="#SendDmesg">Send in a copy of your dmesg</a>.  This is 
really appreciated by the developers, and ultimately, all 
users.

<a name="OtherInf"></a>
<h3>4.3.8 - 其他資訊資源</h3>

Additional documents already exist for those of you who might have 
special needs or interests. You can retrieve these from any of
the <a href="../../zh-tw/ftp.html">mirror ftp sites</a>.
<ul>
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.2/i386/INSTALL.i386">INSTALL.i386</a> 
  - Comprehensive installation document. Similar documents exist for all 
platforms.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.2/i386/INSTALL.linux">INSTALL.linux</a> 
  - Installing OpenBSD along with Linux.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.2/i386/INSTALL.mbr">INSTALL.mbr</a> 
  - Explaining the Master Boot Record.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.2/i386/INSTALL.pt">INSTALL.pt</a> 
  - Explaining Partition Tables.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.2/i386/INSTALL.dbr">INSTALL.dbr</a> 
  - DOS Floppy Disk Boot Sector.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.2/i386/INSTALL.chs">INSTALL.chs</a> 
  - Explaining CHS Translation.
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.2/i386/INSTALL.ata">INSTALL.ata</a> 
  - ATA/ATA-1/ATA-2/IDE/EIDE/etc FAQ
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.2/i386/INSTALL.os2br">INSTALL.os2br</a>
 - The os2 Boot Sector.
</ul>

<p>
<a name= "FilesNeeded"></a>
<h2>4.4 - 哪些是安裝所需的檔案?</h2>

<p>
The complete OpenBSD installation is broken up into a number of 
separate <i>file sets</i>.  Not every application requires every
file set.  Here is an overview of each:
<p>
<ul>
  <li><b><i>base32.tgz</i></b>   - Contains the base OpenBSD system 
    <b>Required</b>
  <li><b><i>etc32.tgz</i></b>    - Contains all the files in /etc 
    <b>Required</b>
  <li><b><i>comp32.tgz</i></b>    - Contains the compiler and its 
    tools, libs. <b>Recommended</b>
  <li><b><i>man32.tgz</i></b>    - Contains man pages <b>Recommended</b>
  <li><b><i>misc32.tgz</i></b>   - Contains misc info, setup documentation
  <li><b><i>game32.tgz</i></b>   - Contains the games for OpenBSD
  <li><b><i>xbase32.tgz</i></b>  - Contains the base install for X11
  <li><b><i>xfont32.tgz</i></b>  - Contains X11's font server and fonts
  <li><b><i>xserv32.tgz</i></b>  - Contains X11's X servers
  <li><b><i>xshare32.tgz</i></b> - Contains manpages, locale settings,
    includes, etc  for X
  <li><b><i>bsd</i></b>          - This is the Kernel. <b>Required</b>
</ul>

<p>
<a name= "SpaceNeeded"></a>
<h2> 4.5 - 需要多少空間才能安裝 OpenBSD?</h2>

<p>
The following are minimum suggested filesystem sizes for a full system
install.  The numbers include enough extra space to permit you to run a
typical home system that is connected to the Internet.

<ul>
<li>These are minimum values.  
<li>If you plan to install a significant amount of third party software,
make your /usr partition large!  <strong>At least</strong> triple these
values!
<li>For a system that handles lots of email or web pages (stored, 
respectively, in /var/mail and /var/www) you will want to make your 
/var partition significantly larger.
<li>For a
multiuser system which may generate lots of logs, you will still
want to make your /var partition significantly larger (/var/log). 
<li>If you plan to rebuild the kernel or system from source, you will
want to make the /usr partition significantly larger, <b>at least</b>
800M-1G larger than indicated below.
</ul>

As you read this, keep in mind that /usr and /usr/X11R6 are usually
both parts of the same filesystem, that is, /usr, as there is no big
advantage to making them into separate filesystems.
<blockquote>
<pre>
<b>
SYSTEM          /       /usr    /var    /usr/X11R6
alpha           50M     250M    25M     100M
amiga           40M     200M    25M     180M
hp300           40M     200M    25M      80M
i386            40M     200M    25M     140M
mac68k          40M     200M    25M      80M
macppc          50M     200M    25M     100M
mvme68k         40M     200M    25M      80M
sparc           40M     259M    25M      49M
sparc64         50M     200M    25M     100M
vax             75M     125M    25M     180M
</b>
</pre>
</blockquote>

In addition, it is recommended that a <i>/tmp</i> partition be used.
The <i>/tmp</i> partition is used in the compiling of ports, among other
things, so how big you make it depends on what you do with it.  50M may
be plenty for most people, but some large applications may require 100M
or more of <i>/tmp</i> space.

<p>
When you are in the disklabel editor, you may choose to make your entire
system have just an 'a' (main filesystem) and 'b' (swap) .  The 'a'
filesystem which you set up in disklabel will become your root
partition, which should be the sum of all the 3 main values above (/,
/usr, and /var) plus some space for /tmp.  The 'b' partition you set up
automatically becomes your system swap partition -- we recommend a
minimum of 32MB but if you have disk to spare make it at least 64MB.  If
you have lots of disk space to spare, make this 256MB, or even 512MB.

<p>
There are five main reasons for using separate filesystems, instead of
shoving everything into one or two filesystems:

<ul>
<li><b>Security</b>: You can mark some filesystems as 'nosuid', 'nodev', 
  'noexec', 'readonly', etc.  This is now done by the install process,
  in fact, if you use the above described partitions.
<li><b>Stability</b>: A user, or a misbehaved program, can fill a 
  filesystem with garbage if they have write permissions for it.  Your 
  critical programs, which of course run on a different filesystem, do 
  not get interrupted.
<li><b>Speed</b>: A filesystem which gets written to frequently may get
  somewhat fragmented.  (Luckily, the ffs filesystem, what OpenBSD uses,
  is not prone to heavy fragmentation.)
<li><b>Integrity</b>: If one filesystem is corrupted for some reason
  then your other filesystems are still OK.
<li><b>Size</b>: Many platforms have limits on the area of a disk where
  the boot ROM can load the kernel from.  In some cases, this limit may
  be very small (504M for an older 486), in other cases, a much larger
  limit (8G on new i386 systems).  As the kernel can end up anywhere in
  the root partition, the entire root partition should be within this
  area. For more details, see <a href="../faq14.html#LargeDrive">this
  section</a>.  A good guideline might be to keep your / partition
  completely below 2G, unless you know your platform (and particular
  machine!) can handle more (or less!) than that.
</ul>

<p>
Some additional thoughts on partitioning:
<ul>
 <li>For your first attempt at an experimentation system, one big / 
   partition and swap may be easiest until you know how much space 
   you need. By doing this you will be sacrificing some of the default
   security features of OpenBSD that require separate filesystems for
   /, /tmp, /var, /usr, and /home.
 <li>A system exposed to the Internet or other hostile forces should
   have a separate /var (and maybe even a separate /var/log) for logging.
 <li>A /home partition can be nice.  New version of the OS?  Wipe and
   reload everything else, leave your /home partition untouched.
 <li>A separate partition for anything which may accumulate a large
   quantity of files that may need to be deleted can be faster to 
   reformat and recreate than to delete.  See the
   <a href="../upgrade-minifaq.html#1.5">upgrade-minifaq</a> for an 
   example (/usr/obj).
 <li>If you wish to rebuild your system from source for any reason, 
   the source will be in /usr/src.  If you don't make a separate 
   partition for /usr/src, make sure /usr has sufficient space.
 <li>A commonly forgotten fact: you do <b>not</b> have to allocate
   all space on a drive when you set the system up! Since  you will 
   now find it a challenge to buy a new drive smaller than 20G, it 
   can make sense to leave a chunk of your drive unallocated.  If you
   outgrow a partition, you can allocate a new partition from your
   unused space, <a href="../faq10.html#DupFS">duplicate</a> your 
   existing partition to the new partition, change
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab</a>
   to point to the new partition, remount, you now have more space.
 <li>If you make your partitions to close to the minimum size required, 
   you will probably regret it later, when it is time to upgrade your 
   system.  
</ul>


<p>
<a name= "Multibooting"></a>
<h2>4.6 - OpenBSD (i386, alpha) 多重開機</h2>

<p>
<strong>OpenBSD and Windows NT/2000/XP</strong>

<p>
To multiboot OpenBSD and Windows NT/2000/XP), you can use NTloader, the
bootloader that NT uses. To multi-boot with NT,  you need a copy of your
OpenBSD pbr. After running installboot, you can copy it something like
this:

<pre>
	# <strong>dd if=/dev/rsd0a of=openbsd.pbr bs=512 count=1</strong>
</pre>

<p>
Now boot NT and put openbsd.pbr in C:. Add a line like this to the end
of <i>C:\BOOT.INI</i>:


<pre>
	c:\openbsd.pbr="OpenBSD"
</pre>

<p>
When you reboot, you should be able to select OpenBSD from the NT loader
menu. There is much more information available about NTloader at the 
<a href="http://www.tburke.net/info/ntldr/ntldr_hacking_guide.htm"> NTLDR
Hacking Guide.</a>

<p>
On Windows XP you can also edit the boot information using the GUI, see the
<a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;q289022">XP 
Boot.ini HOWTO</a>.

<p>
<strong>OpenBSD and Windows or DOS (i386)</strong>

<p>
To boot OpenBSD along with Windows 3.1, Windows95, or DOS you must use a
boot loader on the system that can handle OpenBSD, Windows, and DOS!
Some bootloaders of choice are 
<a href="http://www.rastersoft.com/gageng.htm">GAG</a>,
<a href="http://www.freebird.org/sw-map/bootmanager.html">osbs20b8.zip</a>
or <a href="http://www.ranish.com/part/">The Ranish Partition
Manager</a>.  Both of these are able to boot OpenBSD partitions.

<p>
<strong>OpenBSD and Linux (i386)</strong>

<p>
Please refer to 
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.2/i386/INSTALL.linux">INSTALL.linux</a>,
which gives in depth instructions on getting OpenBSD working with Linux.

<p>
<a name= "SendDmesg"></a>
<h2>4.7 - 安裝結束後將 dmesg 寄給 dmesg@openbsd.org</h2>

<p>
Just to remind people, it's important for the OpenBSD developers to keep
track of what hardware works, and what hardware doesn't work perfectly.

<p>
A quote from /usr/src/etc/root/root.mail
<pre>
If you wish to ensure that OpenBSD runs better on your machines, please do us
a favor (after you have your mail system setup!) and type
        dmesg | mail dmesg@openbsd.org
so that we can see what kinds of configurations people are running.  We will
use this information to improve device driver support in future releases.
(We would be much happier if this information was for the supplied GENERIC
kernel; not for a custom compiled kernel).  The device driver information
we get from this helps us fix existing drivers.
</pre>

<p>
Make sure you send email from an account that is able to also receive
email so developers can contact you back if they have something they
want you to test or change in order to get your setup working. It's not
important at all to send the email from the same machine that is running
OpenBSD, so if that machine is unable to receive email, just

<pre>
$ dmesg | mail your-account@yourmail.dom
</pre>
and then forward that message to
<pre>
 dmesg@openbsd.org
</pre>
where <tt>your-account@yourmail.dom</tt> is your regular email account.
(or transfer the dmesg output using ftp/scp/floppydisk/carrier-pigeon/...)

<p>
<strong>NOTE</strong> - Please send only GENERIC kernel dmesgs. Custom
kernels that have device drivers removed are not helpful.

<a name="AddFileSet"></a>
<h2>4.8 - 安裝結束後, 欲增加其他安裝</h2>
"Oh no!  I forgot to add a file set when I did the install!"
<p>
Sometimes, you realize you really DID need <i>comp32.tgz</i> (or any
other system component) after all, but you didn't realize this at the
time you installed your system.  Good news: There are two easy ways to
add file sets after the initial install:

<h3>Using the Upgrade process</h3>
Simply boot your install media (CD-ROM or Floppy), and choose Upgrade
(rather than Install).  When you get to the lists of file sets to
install, choose the sets you neglected to install first time around,
select your source, and let it install them for you.

<h3>Using tar(1)</h3>
The install file sets are simply compressed tar files, and you can
expand them manually from the root of the filesystem:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # cd /
  # tar xzvpf comp32.tgz
</pre></td></tr></table>

<p>
Do NOT forget the <tt>'p'</tt> option in the above command in
order to restore the file permissions properly!
<p>
One common mistake is to think you can use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>
to add a missing file sets.  This does not work.  pgk_add(1) is
for package files, not generic tar files like the install sets.


<a name="bsd.rd"></a>
<h2>4.9 - 'bsd.rd'是什麼?</h2>

<b><i>bsd.rd</i></b> is a "RAM Disk" kernel.  This file can be very 
useful, many developers are careful to keep it on the root of their
system at all times.

<p>
Calling it a "RAM Disk kernel" describes the root filesystem of the
kernel -- rather than being a physical drive, the utilities available
after the boot of <i>bsd.rd</i> are stored in the kernel, and are run
from a RAM-based filesystem.  <i>bsd.rd</i> also includes a healthy set
of utilities to allow you to do system maintenance and installation.

<p>
On some platforms, <i>bsd.rd</i> is actually the preferred 
installation technique -- you place this kernel on an existing 
filesystem, boot it, and run the install from it.  On most 
platforms, if you have a running older version of OpenBSD, you 
can FTP  a new version of <i>bsd.rd</i>, reboot from it, and 
install a new version of OpenBSD without using any removable 
media at all.

<p>
Here is an example of booting <i>bsd.rd</i> on an i386 system:

<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Using Drive: 0 Partition: 3
  reading boot.....
  probing pc0 com0 com1 apm mem[639k 255M a20=on]
  disk fd0 hd0
  &gt;&gt; OpenBSD/i386 BOOT 1.29
  boot&gt; <b>boot hd0a:/bsd.rd</b>
<i>. . . normal boot to install . . .</i>
</pre></td></tr></table>

As indicated, you will be brought to the install program, but you
can also drop to the shell to do maintenance on your system.
<p>
The general rule on booting <i>bsd.rd</i> is to change your boot
kernel from <tt>/bsd</tt> to <i>bsd.rd</i> through whatever 
means used on your platform.  
<p>
<br>

<font color= "#0000e0">
<a href= "../../zh-tw/index.html">[Back to Main Index]</a>
<a href= "../faq3.html">[To Section 3.0 - Obtaining OpenBSD]</a>
<a href= "../faq5.html">[To Section 5.0 - Kernel configuration and Disk Setup]</a>
</font>

<p>
<hr>
<a href= "../../zh-tw/index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt= "[back]"></a> 
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq4.html,v 1.115 ]<br>
$Translation: faq4.html,v 1.2 2003/06/30 15:13:36 sjhuang Exp $<br>
$OpenBSD: faq4.html,v 1.1 2003/07/04 22:00:42 jufi Exp $
</small>
</body>
</html>
