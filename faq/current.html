<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Following -current</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2005-2009 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif" border="0">    
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
</font>

<p>

<h1><font color="#e00000">Following <i>-current</i></font></h1>
<hr>

<h3>Table of Contents</h3>
<p>
<ul>
<li><a href="#Intro">Introduction</a>
<!-- Oldest on top... -->
<li><a href="#20080907">2008/09/07 - ifconfig(8) syntax change</a>
<li><a href="#20080913">2008/09/13 - xcompmgr(1) moved from ports to xbase</a>
<li><a href="#20080929">2008/09/29 - Perl updated to 5.10.0</a>
<li><a href="#20081003">2008/10/03 - sm-client.st moved</a>
<li><a href="#20081102">2008/11/02 - Xserver updated to 1.5.2</a>
<li><a href="#20081103">2008/11/03 - Perl updated to 5.10.0</a>
<li><a href="#20081105">2008/11/05 - Perl updated to 5.10.0</a>
<li><a href="#20081106">2008/11/06 - Xserver updated to 1.5.2</a>
<li><a href="#20081107">2008/11/07 - Perl updated to 5.10.0</a>
<li><a href="#20081111">2008/11/11 - PIE support added to gcc 3.3.5 & csu</a>
<li><a href="#20081116">2008/11/16 - mixerctl(1) name changes</a>
<li><a href="#20081126">2008/11/26 - btd needs user and group</a>
<li><a href="#20090204">2009/02/04 - Perl updated to 5.10.0</a>
<li><a href="#20090215">2009/02/15 - ifconfig(8) syntax change</a>
<li><a href="#20090218">2009/02/18 - pfsync(4) version number incremented</a>
<!-- 4.5 -->
<li><a href="#20090316">2009/03/16 - makemap(8) now run through mailwrapper(8)</a>
<li><a href="#20090324">2009/03/24 - "redistribute default" behaviour change in ospfd(8) and ripd(8)</a>
<li><a href="#20090406">2009/04/06 - incompatible changes to pf(4)</a>
<li><a href="#20090407">2009/04/07 - fragment reassembly on by default</a>
<!-- New additions go on the bottom, please -->
</ul>
    
<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>Introduction</h2>
This document is for people who wish to follow <i>-current</i>.
It contains information about changes from 4.4-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 4.3 or earlier, or people
wishing to follow <a href="../stable.html"><i>-stable</i></a>.

<p>
If you wish to update to 4.4-release or 4.4-stable from previous
versions, see the <a href="upgrade44.html">upgrade guide</a>.

<p>
Make sure you have read and understood
<a href="faq5.html">FAQ 5 - Building the System from Source</a>
before using -current and the instructions below.

<p>
You should ALWAYS use a snapshot as the starting point for running
<i>-current</i>.
Upgrading by compiling your own source code is not supported.

<p>
If you wish to see upgrade information for earlier versions of OpenBSD,
see <a href= "upgrade-old.html">upgrade-old.html</a>.
This is provided as a historical record -- it should NOT be used as
an upgrade procedure guide.

<p>
<a name="20080907"></a>
<h3>2008/09/07 - ifconfig(8) syntax change</h3>
Some <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a>
options have changed. To list supported media types, you should now use:
<pre>
    <b>ifconfig &lt;interface&gt; media</b>
</pre>
The option to scan for wireless networks was also changed, but was
<a href="#20090215">revised later</a>.

<p>
<a name="20080913"></a>
<h3>2008/09/13 - xcompmgr(1) moved from ports to xbase</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xcompmgr&amp;sektion=1">xcompmgr(1)</a>
has moved from ports to xbase. If you installed it from ports,
please remove it with pkg_delete.

<p>
<a name="20080929"></a>
<h3>2008/09/29 - update to Perl 5.10.0</h3>
Due to the changes in the Perl distribution, you will need to manually
remove the old perl obj directory before building.  e.g.
<pre>
    # rm -rf /usr/obj/gnu/usr.bin/perl
</pre>
You can then recreate the obj dir:
<pre>
    # cd /usr/src/gnu/usr.bin/perl
    # make -f Makefile.bsd-wrapper obj
</pre>

Note that because this is a major Perl update, you will need to
rebuild/reinstall any Perl XS modules.  These are modules that
include a shared object that is loaded into the running perl process.
To see a list of XS modules installed via the package subsystem,
run:
<pre>
    # cd /var/db/pkg
    # fgrep .so p5-*/+CONTENTS | sed 's/+CONTENTS.*//' | sort -u
</pre>
Updating to the latest package snapshots with "pkg_add -ui" will take
care of these updates. After you have updated, you need to uninstall
several modules which are now provided as part of Perl in base:

<pre>
    # pkg_delete p5-Archive-Tar p5-Compress-Raw-Zlib p5-Compress-Zlib \
      p5-IO-Compress-Base p5-IO-Compress-Zlib p5-IO-Zlib p5-Module-Build \
      p5-Module-CoreList p5-Module-Load p5-version p5-Digest-SHA
</pre>

<p>
<a name="20081003"></a>
<h3>2008/10/03 - sm-client.st moved</h3>
The (optional) sendmail status file for email submission has moved
from <tt>/var/spool/clientmqueue/sm-client.st</tt> to
<tt>/var/log/sm-client.st</tt> to be consistent with the location
of the <tt>/var/log/sendmail.st</tt> file.

<p>
<a name="20081102"></a>
<h3>2008/11/02 - Xserver updated to 1.5.2</h3>
<tt>RgbPath</tt> is no longer a valid keyword in the <b>Files</b>
section of the <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=xorg.conf">xorg.conf(5)</a>
configuration file. The corresponding entry should be removed from
existing configuration files. This directive was ignored for a couple
of releases already.
<p>
The <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=i810">i810(4)</a>
driver for intel chipset has been completely replaced by the 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=intel">intel(4)</a>
driver. <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=xorg.conf">xorg.conf(5)</a>
configuration files should be updated accordingly.

<p>
<a name="20081103"></a>
<h3>2008/11/03 - update to Perl 5.10.0</h3>
Another module now installed by base Perl was found - please remove it.
<pre>
    # pkg_delete p5-Locale-Maketext-Simple
</pre>

<p>
<a name="20081105"></a>
<h3>2008/11/05 - update to Perl 5.10.0</h3>
There are a couple more modules installed by base Perl to remove.
<pre>
    # pkg_delete p5-Pod-Escapes p5-Pod-Simple
</pre>

<p>
<a name="20081106"></a>
<h3>2008/11/06 - Xserver updated to 1.5.2</h3>
Several xserver modules and drivers have been deprecated. To make sure
that <tt>X -configure</tt> doesn't try to configure the obsolete
modules, it is recommended to prune old contents of
<tt>/usr/X11R6/lib/modules</tt> before installing a new snapshot.

<p>
<a name="20081107"></a>
<h3>2008/11/07 - update to Perl 5.10.0</h3>
More modules moved to base, as above.
<pre>
    # pkg_delete p5-ExtUtils-ParseXS p5-ExtUtils-CBuilder \
      p5-Module-Pluggable p5-Time-Piece
</pre>

<p>
<a name="20081111"></a>
<h3>2008/11/11 - PIE support added to gcc 3.3.5 & csu</h3>
Support for position independent executables (PIE) has been added to
gcc 3.3.5 and csu.  To upgrade follow these steps:
<ul>
<li>Build and install gcc:
<pre>
     # cd /usr/src/gnu/usr.bin/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
     # make -f Makefile.bsd-wrapper clean
</pre>
<li><a href="faq5.html#BldUserland">Build and install userland</a>
</ul>

<p>
<a name="20081116"></a>
<h3>2008/11/16 - mixerctl(1) name changes</h3>
The mixer item name <tt>headphones</tt> was shortened to <tt>hp</tt>,
and <tt>speaker</tt> was shortened to <tt>spkr</tt>.
This may require changes to mixerctl.conf(5).

<p>
<a name="20081126"></a>
<h3>2008/11/26 - btd needs new user and group</h3>
The newly added Bluetooth daemon <tt>btd</tt> drops privileges to a new user
and group _btd.
As <i>root</i>, add both the new user and its corresponding group using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>:
<blockquote><pre>
# useradd -u94 -g=uid -c"Bluetooth Daemon" -d/var/empty -s/sbin/nologin _btd</b>
</pre></blockquote>

<p>
<a name="20090204"></a>
<h3>2009/02/04 - update to Perl 5.10.0</h3>
Another module moved to base, please remove it.
<pre>
    # pkg_delete p5-Module-Loaded
</pre>

<p>
<a name="20090215"></a>
<h3>2009/02/15 - ifconfig(8) syntax change</h3>
The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a>
option for scanning wireless networks has changed.
You should now use:
<pre>
    <b>ifconfig &lt;interface&gt; scan</b>
</pre>

<p>
<a name="20090218"></a>
<h3>2009/02/18 - pfsync(4) version number incremented</h3>
Due to protocol and implementation changes to the pfsync(4) interface, the
pfsync(4) protocol number has been incremented. Firewalls with differing
versions will be unable to synchronise state tables, and existing connections
will be terminated on failover.

<!-- cut-off point for 4.5 -->

<p>
<a name="20090316"></a>
<h3>2009/03/16 - makemap(8) now run through mailwrapper(8)</h3>
Since the connection of smtpd(8) to the build, makemap(8) is run through
mailwrapper(8) to avoid conflict between sendmail and smtpd version of
the binary. For this to work, one has to manually add the following line to
/etc/mailer.conf:
<pre>
makemap		/usr/libexec/sendmail/makemap
</pre>

<p>
<a name="20090324"></a>
<h3>2009/03/24 - "redistribute default" behaviour change in ospfd(8) and ripd(8)</h3>
"redistribute default", set in ospfd.conf(5) and ripd.conf(5) configuration
files, require now the presence of a default route in the kernel routing
table otherwise no route will be announced by ospfd(8) and ripd(8).

<p>
<a name="20090406"></a>
<h3>2009/04/06 - incompatible changes to pf(4)</h3>
Packet normalization ("scrubbing") has been integrated with the
main ruleset. This is now specified by adding the "scrub (options)"
parameter to rules. For example:

<pre>
        scrub in all no-df max-mss 1440
</pre>

can be replaced with a rule using the new "match" action:

<pre>
        match in all scrub (no-df max-mss 1440)
</pre>

Since ruleset ordering is enforced by default, this will either
have to be moved to the main ruleset (before "pass quick" rules),
or ruleset order checking must be disabled:

<pre>
        set require-order no
</pre>

Packet reassembly has been simplified. "Crop" and "drop-ovl" have
been removed; only full reassembly remains. It's enabled like this:

<pre>
        set reassemble yes|no [no-df]
</pre>

If "no-df" is given, fragments (and only fragments!) with the df bit
set have it cleared before entering the fragment cache, and thus the
reassembled packet doesn't have df set either. Non-fragmented packets
are unaffected by no-df.

<p>
<a name="20090407"></a>
<h3>2009/04/07 - fragment reassembly on by default in pf(4)</h3>
Since there is little to no reason not to use fragment rassembly,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>
was changed so that it is now enabled by default.

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: current.html,v 1.144 2009/04/07 16:18:56 sthen Exp $</small>

</body>
</html>
