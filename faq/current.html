<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Following -current</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2005-2008 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif" border="0">    
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
</font>

<p>

<h1><font color="#e00000">Following <i>-current</i></font></h1>
<hr>

<h3>Table of Contents</h3>
<p>
<ul>
<li><a href="#Intro">Introduction</a>
<!-- Oldest on top... -->
<li><a href="#20070903">2007/09/03 - _cxa_atexit support and sys/net headers flag day</a>
<li><a href="#20071008">2007/10/08 - new user for ospf6d</a>
<li><a href="#20071020">2007/10/20 - libexpat moved to base</a>
<li><a href="#20071030">2007/10/30 - httpd.conf changes for module configuration</a>
<li><a href="#20071125">2007/11/25 - config(8) flag day</a>
<li><a href="#20071128">2007/11/28 - AGP updates</a>
<li><a href="#20071207">2007/12/07 - _hoststated user gets renamed to _relayd</a>
<li><a href="#20080131">2008/01/31 - new user for snmpd</a>
<li><a href="#20080205">2008/02/05 - carp(4) flag day</a>
<li><a href="#20080303">2008/03/03 - default xenocara location changed</a>
<li><a href="#20080328">2008/03/28 - landisk shared libraries enabled</a>
<!-- New additions go on the bottom, please -->
</ul>
    
<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>Introduction</h2>
This document is for people who wish to follow <i>-current</i>.
It contains information about changes from 4.2-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 4.1 or earlier, or people
wishing to follow <a href="../stable.html"><i>-stable</i></a>.

<p>
If you wish to update to 4.2-release or 4.2-stable from previous
versions, see the <a href="upgrade42.html">upgrade guide</a>.

<p>
Make sure you have read and understood
<a href="faq5.html">FAQ 5 - Building the System from Source</a>
before using -current and the instructions below.

<p>
You should ALWAYS use a snapshot as the starting point for running
<i>-current</i>.
Upgrading by compiling your own source code is not supported.

<p>
If you wish to see upgrade information for earlier versions of OpenBSD,
see <a href= "upgrade-old.html">upgrade-old.html</a>.
This is provided as a historical record -- it should NOT be used as
an upgrade procedure guide.

<p>
<a name="20070903"></a>
<h3>2007/09/03 - _cxa_atexit support and sys/net headers flag day</h3>
<p>
Support for _cxa_atexit has been added to csu, libc, gcc and libstdc++ as well as changes to sys/net headers require special handling.
To upgrade follow these steps:
<ul>
<li><a href="faq5.html#BldKernel">Build and install a new kernel</a>
<li>Reboot
<li>Build and install csu:
<pre>
     # cd /usr/src/lib/csu
     # make obj && make depend && make && make install && make clean
</pre>
<li>Build and install gcc:
<pre>
     # cd /usr/src/gnu/usr.bin/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
     # make -f Makefile.bsd-wrapper clean
</pre>
<li><a href="faq5.html#BldUserland">Build and install userland</a>
</ul>

<a name="20071020"></a>
<h3>2007/10/20 - libexpat moved to base</h3>
<p>
libexpat has been moved from xenocara (xbase) to src (base);
if you are using binary snapshots and packages, things will just
update as they should, once new snapshots are available.
<p>
If you are building software from source, it is vital that
you clean up your system:
<pre>
	# mv /usr/X11R6/lib/libexpat.so.* /usr/lib
	# rm /usr/X11R6/lib/libexpat*
	# rm /usr/X11R6/include/expat*
</pre>

<a name="20071008"></a>
<h3>2007/10/08 - new user for ospf6d</h3>

<i>A ospf6d daemon has been imported</i> in order to use this daemon, a new
user and group are required.

As <i>root</i>, add the following user and group, using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>:

<blockquote><pre>
# useradd -u90 -g=uid -c"OSPF6 Daemon" -d/var/empty -s/sbin/nologin _ospf6d
</pre></blockquote>

This step will add both the new user and its corresponding group.
Your environment may allow you to copy/paste those commands.

<a name="20071030"></a>
<h3>2007/10/30 - httpd.conf changes for module configuration</h3>
<p>
Packages for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd">httpd(8)</a>
modules now install configuration files in <tt>/var/www/conf/modules.samples</tt>
and direct the user to create symbolic links in <tt>/var/www/conf/modules</tt>.
Add the following lines to <tt>/var/www/conf/httpd.conf</tt> after the
<tt>LoadModule</tt> directives (towards the end of section 1):
<pre>
	#
	# Include extra module configuration files
	#
	Include /var/www/conf/modules/*.conf
</pre>

<a name="20071125"></a>
<h3>2007/11/25 - config(8) flag day</h3>
<p>
Extended capabilities require
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=config>config(8)</a> to
be rebuilt on your system:
<pre>
	# cd /usr/src/usr.sbin/config
	# make clean
	# make obj
	# make depend
	# make
	# make install
</pre>
Then <a href="faq5.html#BldKernel">build and install a new kernel</a> as usual.

<a name="20071128"></a>
<h3>2007/11/28 - new AGP driver</h3>
<p>
The new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=agp">agp(4)</a>
driver requires an update to the X server after installing
a new kernel if your machine requires AGP support for X or XVideo.
<p>
After installing a new kernel, install new kernel headers, rebuild the X server
(or install a new X snapshot) and make sure <tt>/dev/agp0</tt> is created.
<pre>
	# cd /usr/src/include
	# make includes
	# cd /usr/src/xenocara/xserver
	# make -f Makefile.bsd-wrapper build
	# cd /usr/src/etc/etc.`uname -m`
	# install -c MAKEDEV /dev
	# cd /dev
	# ./MAKEDEV agp0
</pre>

<a name="20071207"></a>
<h3>2007/12/07 - _hoststated user gets renamed to _relayd</h3>
The hoststated(8) daemon has been renamed to
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=relayd&amp;sektion=8">relayd(8)</a>,
so the user and group need to be changed accordingly.

<p>
Use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw(8)</a>,
edit the password files and your favorite editor to edit the
<tt>/etc/group</tt> file, changing "<tt>_hoststated</tt>" to
"<tt>_relayd</tt>" in both.
Leave the rest of the line alone in each case.

<a name="20080131"></a>
<h3>2008/01/31 - new user for snmpd</h3>

<i>A SNMP daemon has been imported</i> in order to use this daemon, a new
user and group are required.

As <i>root</i>, add the following user and group, using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>:

<blockquote><pre>
# useradd -u91 -g=uid -c"SNMP Daemon" -d/var/empty -s/sbin/nologin _snmpd
</pre></blockquote>

This step will add both the new user and its corresponding group.
Your environment may allow you to copy/paste those commands.

<a name="20080205"></a>
<h3>2008/02/05 - carp(4) flag day</h3>
carp(4) has been changed to make it easier to configure.
If you are running carp with ARP or IP balancing your configuration needs to be changed accordingly:
<ul>
<li> Multiple carp(4) interfaces sharing an IP have been replaced with the <tt>carpnodes</tt> option.
<li> The <tt>net.inet.carp.arpbalance</tt> sysctl has been replaced with balancing mode <tt>arp</tt>.
<li> The <tt>LINK0,1,2</tt> flags used for IP balancing have been replaced with the balancing modes <tt>ip</tt>, <tt>ip-stealth</tt> and <tt>ip-unicast</tt>. 
</ul>

<a name="20080303"></a>
<h3>2008/03/03 - default xenocara tree location changed</h3>
The default location of the xenocara source tree is now <tt>/usr/xenocara</tt>.
This is important for people who <a href="faq5.html#Xbld">build X
from source</a>.
Just move your xenocara tree:

<blockquote><pre>
# mv /usr/src/xenocara /usr
</pre></blockquote>

and update it to -current.

<p>
<a name="20080328"></a>
<h3>2008/03/28 - landisk shared libraries enabled</h3>
To switch from static build on landisk to shared it is necessary to first
build and install gcc and ld.so before building the rest of the system:
<blockquote><pre>
# cd /usr/src/gnu/usr.bin/gcc
# make -f Makefile.bsd-wrapper obj
# make -f Makefile.bsd-wrapper depend
# make -f Makefile.bsd-wrapper 
# make -f Makefile.bsd-wrapper install
# cd /usr/src/share/mk
# make install
# cd /usr/src/libexec/ld.so
# make obj
# make depend
# make 
# make install
</pre></blockquote>
Then follow the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&amp;sektion=8">
release(8)</a>:
directions to build the full system.

<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
</font>
<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: current.html,v 1.91 2008/03/30 22:34:46 maja Exp $</small>

</body>
</html>
