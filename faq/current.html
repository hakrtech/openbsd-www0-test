<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Following -current</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2005 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif" border="0">    
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
</font>

<p>

<h1><font color="#e00000">Following <i>-current</i></font></h1>
<hr>

<h3>Table of Contents</h3>
<p>
<ul>
<li><a href="#Intro">Introduction</a>
<li><a href="#20041027">2004/10/27 - Exception handling flag day (amd64, cats,
    hppa, sgi, sparc64)</a>
<li><a href="#20041029">2004/10/29 - Switch to gcc3 (macppc)</a>
<li><a href="#20041111">2004/11/11 - bgpd behaviour change</a>
<li><a href="#20041124">2004/11/24 - New user and group: _ftp</a>
<li><a href="#20041230">2004/12/30 - Switch to gcc3 (i386)</a>
<li><a href="#20050118">2005/01/18 - New user and group: _ospfd</a>
<li><a href="#20050124">2005/01/24 - pfsync takes syncdev instead of syncif</a>
<li><a href="#20050202">2005/02/02 - POSIX hex and octal constants in (k)sh</a>
<li><a href="#20050329">2005/03/29 - Exception handling flag day (i386)</a>
<li><a href="#20050331">2005/03/31 - mmap(2) flag day (vax)</a>
<li><a href="#20050413">2005/04/13 - New user and group: _hostapd</a>
</ul>
    
<hr>

<a name="Intro"></a>
<h2>Introduction</h2>
This document is for people who wish to follow <i>-current</i>.
It contains information about changes from 3.6-release to <i>-current</i>,
and should NOT be used for anyone upgrading from 3.5 or earlier, or people
wishing to follow <a href="../stable.html"><i>-stable</i></a>.

<p>
If you wish to update to 3.6-release or 3.6-stable from previous
versions, see the <a href="upgrade36.html">upgrade</a> guide.

<p>
If you wish to see upgrade information for earlier versions of OpenBSD,
see <a href= "upgrade-old.html">upgrade-old.html</a>.

<p>
You should ALWAYS use a snapshot as the starting point for running
<i>-current</i>.
Upgrading by compiling your own source code is not supported.
   

<a name="20041027"></a>
<h2>2004/10/27 - Exception handling flag day (amd64, cats,  hppa, sgi, sparc64)</h2>
Changes have been made to gcc3 to make it possible to use
DWARF-based exception handling on OpenBSD.  Since these changes
depend on some fairly recent changes to libc, the following
steps must be followed to build a usable system.
<ul>
<li>Update your source code tree
<li>Build a new kernel
<li>Install the new kernel and reboot
<li>Install new header files:
<pre>
     # cd /usr/src && make obj && make cleandir && make includes
</pre>
<li>Build and install a new version of libc:
<pre>
     # cd /usr/src/lib/libc && make depend && make && env NOMAN=1 make install
</pre>
<li><a href="faq5.html#NewCompiler">Build and install gcc3</a>
<li>Build and install a new version of libstdc++:
<pre>
     # cd /usr/src/gnu/lib/libstdc++
     # make -f Makefile.bsd-wrapper cleandir
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
</pre>
<li>Build and install the system as usual:
<pre>
     # cd /usr/src && make build
</pre>
</ul>


<a name="20041029"></a>
<h2>2004/10/29 - Switch to gcc3 (macppc)</h2>
OpenBSD/macppc has converted to gcc3.
To upgrade,
<pre>
    # rm -rf /usr/include/g++
</pre>

Now, <a href="faq5.html#NewCompiler">build gcc3</a>, (using the gcc3
directory) then build the kernel and system as
<a href="faq5.html#Bld">usual</a>.

<a name="20041111"></a>
<h2>2004/11/11 - bgpd behaviour change</h2>
The new <i>rde route-age [evaluate|ignore]</i> changed behaviour of bgpd.
Until now <i>evaluate</i> was the implicit default but now the default
is <i>ignore</i>.
Route age evaluation is not specified in RFC 1771 and results in non
deterministic decisions in preference for more stable links.


<a name="20041124"></a>
<h2>2004/11/24 - New user and group: _ftp</h2> 
The FTP daemon is being reworked to use privilege separation.
Thus a new user and group "_ftp" are required.
Add the user and group by running

<pre>
    useradd -u84 -g=uid -c"FTP Daemon" -d/var/empty -s/sbin/nologin _ftp
</pre>
as root.


<a name="20041230"></a>
<h2>2004/12/30 - Switch to gcc3 (i386)</h2>
OpenBSD/i386 has converted to gcc3.
To upgrade,

<pre>
    # rm -rf /usr/include/g++
</pre>

Now, <a href="faq5.html#NewCompiler">build gcc3</a>, (using the gcc3
directory) then build the kernel and system as
<a href="faq5.html#Bld">usual</a>.

<p>

<a name="20050118"></a>
<h2>2005/01/18 - New user and group: _ospfd</h2> 
The upcoming ospf daemon needs its own user and group _ospfd.
Add them by running

<pre>
    useradd -u85 -g=uid -c"OSPF Daemon" -d/var/empty -s/sbin/nologin _ospfd
</pre>
as root.


<a name="20050124"></a>
<h2>2005/01/24 - pfsync takes syncdev instead of syncif</h2>
When configuring the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4">pfsync</a>
device, use 'syncdev' instead of the deprecated keyword 'syncif'. 


<a name="20050202"></a>
<h2>2005/02/02 - POSIX hex and octal constants in (k)sh</h2>
Both
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sh&amp;sektion=1">sh(1)</a>
and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">ksh(1)</a>
now interpret c-like hex (0x...) and octal (0...) constants in arithmetic
expressions.
As a consequence, the MAKEDEV script needs to be updated:
<pre>
     # cp /usr/src/etc/etc.`machine`/MAKEDEV /dev
</pre>

<p>


<a name="20050329"></a>
<h2>2005/03/29 - Exception handling flag day (i386)</h2>

OpenBSD/i386 has converted to DWARF-based exception handling.  To
upgrade, first <a href="faq5.html#NewCompiler">build and install
gcc3</a> and then build and install a new version of libstdc++:
<pre>
     # cd /usr/src/gnu/lib/libstdc++
     # make -f Makefile.bsd-wrapper cleandir
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
</pre>

<p>


<a name="20050331"></a>
<h2>2005/03/31 - mmap(2) flag day (vax)</h2>

Virtual memory limits have changed on OpenBSD/vax. The statical-linked nature
of OpenBSD/vax requires special handling of this. The following steps must be
followed to build a usable system.
<ul>
<li>Update your source tree
<li>Build and install a new kernel, do not reboot yet
<li>Build and install a new libc:
<pre>
     # cd /usr/src/lib/libc && make depend && make && env NOMAN=1 make install
</pre>
<li><a href="faq5.html#NewCompiler">Build and install gcc2</a>
<li>Build and install a new make:
<pre>
     # cd /usr/src/usr.bin/make && make depend && make && make install
</pre>
<li>Build and install new binutils:
<pre>
    # cd /usr/src/gnu/usr.bin/binutils
    # make -f Makefile.bsd-wrapper depend
    # make -f Makefile.bsd-wrapper
    # make -f Makefile.bsd-wrapper install
</pre>
<li>Reboot.
<li>Build and install the system as usual:
<pre>
    # cd /usr/src && make build
</pre>
</ul>

<p>

<a name="20050413"></a>
<h2>2005/04/13 - New user and group: _hostapd</h2> 
The new, privilege seperated HostAP daemon needs
a new user and group "_hostapd".
Add the user and group by running

<pre>
    useradd -u86 -g=uid -c"HostAP Daemon" -d/var/empty -s/sbin/nologin _hostapd
</pre>
as root.

<p>

<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
</font>
<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: current.html,v 1.7 2005/04/16 12:48:21 nick Exp $</small>

</body>
</html>
