<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Following -current</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2005-2008 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif" border="0">    
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
</font>

<p>

<h1><font color="#e00000">Following <i>-current</i></font></h1>
<hr>

<h3>Table of Contents</h3>
<p>
<ul>
<li><a href="#Intro">Introduction</a>
<!-- Oldest on top... -->
<li><a href="#20080323">2008/03/23 - cwm configuration and command line options changed</a>
<li><a href="#20080328">2008/03/28 - landisk shared libraries enabled</a>
<li><a href="#20080421">2008/04/21 - command line options for rtadvd(8) changed</a>
<li><a href="#20080508">2008/05/08 - file(1) updated, needs new /etc/magic</a>
<li><a href="#20080522">2008/05/22 - spamd(8) sync mode protocol version changed</a>
<li><a href="#20080606">2008/06/06 - httpd(8) manual moved</a>
<li><a href="#20080607">2008/06/07 - support for dhcpd.interfaces removed</a>
<li><a href="#20080609">2008/06/09 - nmeaattach(8) removed</a>
<li><a href="#20080609b">2008/06/09 - New user and group _rtadvd</a>
<li><a href="#20080610">2008/06/10 - per-address counters off by default on pf(4) tables</a>
<li><a href="#20080613">2008/06/13 - mailmode in mg(1) removed</a>
<li><a href="#20080616">2008/06/16 - pfsync(4) version number incremented</a>
<li><a href="#20080709">2008/07/09 - yacc(1) updated</a>
<li><a href="#20080710">2008/07/10 - TCP/UDP baddynamic lists, sysctl(8), named(8) and /etc/rc</a>
<li><a href="#20080711-0">2008/07/11 - openchrome(4) video driver</a>
<li><a href="#20080711-1">2008/07/11 - ati(4) video driver updated</a>
<li><a href="#20080719">2008/07/19 - softraid metadata handling rewrite</a>
<!-- New additions go on the bottom, please -->
</ul>
    
<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>Introduction</h2>
This document is for people who wish to follow <i>-current</i>.
It contains information about changes from 4.3-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 4.2 or earlier, or people
wishing to follow <a href="../stable.html"><i>-stable</i></a>.

<p>
If you wish to update to 4.3-release or 4.3-stable from previous
versions, see the <a href="upgrade43.html">upgrade guide</a>.

<p>
Make sure you have read and understood
<a href="faq5.html">FAQ 5 - Building the System from Source</a>
before using -current and the instructions below.

<p>
You should ALWAYS use a snapshot as the starting point for running
<i>-current</i>.
Upgrading by compiling your own source code is not supported.

<p>
If you wish to see upgrade information for earlier versions of OpenBSD,
see <a href= "upgrade-old.html">upgrade-old.html</a>.
This is provided as a historical record -- it should NOT be used as
an upgrade procedure guide.

<p>
<a name="20080323"></a>
<h3>2008/03/23 - cwm configuration and command line options changed</h3>
The cwm(1) window manager got a new config parser, so the configuration
needs to be changed according to
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwmrc&amp;sektion=5">cwmrc(5)</a>.
The command line option "-f" (font) and "-s" (sticky) were replaced by
config directives.
Remove these options from your .xsession, or your xdm(1) login will
fail!

<p>
<a name="20080328"></a>
<h3>2008/03/28 - landisk shared libraries enabled</h3>
To switch from static build on landisk to shared it is necessary to first
build and install gcc and ld.so before building the rest of the system:
<blockquote><pre>
# <b>cd /usr/src/gnu/usr.bin/gcc</b>
# <b>make -f Makefile.bsd-wrapper obj</b>
# <b>make -f Makefile.bsd-wrapper depend</b>
# <b>make -f Makefile.bsd-wrapper</b>
# <b>make -f Makefile.bsd-wrapper install</b>
# <b>cd /usr/src/share/mk</b>
# <b>make install</b>
# <b>cd /usr/src/libexec/ld.so</b>
# <b>make obj</b>
# <b>make depend</b>
# <b>make</b>
# <b>make install</b>
</pre></blockquote>
Then follow the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&amp;sektion=8">
release(8)</a>:
directions to build the full system.

<p>
<a name="20080421"></a>
<h3>2008/04/21 - command line options for rtadvd(8) changed</h3>
The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rtadvd">rtadvd(8)</a>
IPv6 router advertisement daemon had the command line options
<tt>"-f"</tt> (foreground), <tt>"-d"</tt> (debug) and <tt>"-D"</tt>
(even more debug).
These options were merged to <tt>-d</tt> which does the same now as the
combination of the three old options and is more OpenBSD-like.

<p>
<a name="20080508"></a>
<h3>2008/05/08 - file(1) updated, needs new /etc/magic</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=file">file(1)</a>
has been updated to a newer version which requires a new
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=magic">magic(5)</a>
file to be installed:
<blockquote><pre>
# <b>cd /tmp</b>
# <b>ftp ftp://mirror/path/to/snapshots/arch/etc43.tgz</b>
# <b>tar xzpf etc43.tgz ./etc/magic</b>
# <b>mv etc/magic /etc</b>
</pre></blockquote>

<p>
<a name="20080522"></a>
<h3>2008/05/22 - spamd(8) sync mode protocol version changed</h3>
The protocol that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd">spamd(8)</a> 
uses when run in sync mode was changed to fix a number of bugs and the
protocol version was incremented.
Because of this, new versions of spamd can not sync with old versions
(they will skip packets from one another).
Therefore all instances in a spamd sync group must be upgraded at the
same time.

<p>
<a name="20080606"></a>
<h3>2008/06/06 - httpd(8) manual moved</h3>
The Apache manual for
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd">httpd(8)</a> 
has been moved out of <tt>/var/www/htdocs/manual/</tt> to
<tt>/usr/share/doc/html/httpd/</tt>.
It has also been moved from the <i>etcXX</i> set to the <i>miscXX</i>
file set.

<p>
<a name="20080607"></a>
<h3>2008/06/07 - support for dhcpd.interfaces removed</h3>
Support for <tt>/etc/dhcpd.interfaces</tt> has been removed.
The file has been deprecated in favor of the <tt>dhcpd_flags</tt>
setting in <tt>/etc/rc.conf.local</tt>.

<p>
<a name="20080609"></a>
<h3>2008/06/09 - nmeaattach(8) removed</h3>
The
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nmeaattach">nmeaattach(8)</a>
command and the nmeaattach_flags option in /etc/rc.conf have been
removed in -current.
Use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldattach">
ldattach(8)</a> instead.
It has a slightly different synopsis than nmeaattach(8): <tt>nmeaattach
cuaU0</tt> becomes <tt>ldattach nmea cuaU0</tt>.

<p>
<a name="20080609b"></a>
<h3>2008/06/09 New user and group _rtadvd</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rtadvd&amp;sektion=8">rtadvd(8)</a>
daemon now drops privileges after initialization to a new user and group _rtadvd.
As <i>root</i>, add the user and group using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>:
<blockquote><pre>
<b>useradd -u92 -g=uid -c"IPv6 Router Advertisement Daemon" -d/var/empty -s/sbin/nologin _rtadvd</b>
</pre></blockquote>

<p>
<a name="20080610"></a>
<h3>2008/06/10 - per-address counters off by default on pf(4) tables</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf">pf(4)</a>
tables now require the <tt>counters</tt> option in order to enable
per-address byte and packet counters, eg:
<br>
<blockquote><tt>
table &lt;webservers&gt; counters { 192.168.33.4, 192.168.33.16/29 }
</tt></blockquote>
See <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf">pf.conf(5)</a>
for details.

<p>
<a name="20080613"></a>
<h3>2008/06/13 - mailmode in mg(1) removed</h3>
Because mail-mode in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg">mg(1)</a>
was merely a buggy reimplementation of auto-fill-mode it has been
removed.
If you are using this please change your commands accordingly:<br>
<blockquote><tt>
mail-mode => auto-fill-mode<br>
mail-set-margin => set-fill-column
</tt></blockquote>
Don't forget to change your .mg file as well.

<p>
<a name="20080616"></a>
<h3>2008/06/16 - pfsync(4) version number incremented</h3>
Due to changes in the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf">pf(4)</a>
state table, the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync">pfsync(4)</a>
protocol version number has been incremented; firewalls with differing
version numbers will be unable to synchronise state tables, and existing
connections will be terminated on failover.

<p>
<a name="20080709"></a>
<h3>2008/07/09 - yacc(1) updated</h3>
A rebuild and install of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=yacc">yacc(1)</a>
is needed before doing a make build with a clean obj dir to make sure all
yacc generated parsers get regenerated.

<p>
<a name="20080710"></a>
<h3>2008/07/10 - TCP/UDP baddynamic lists, sysctl(8), named(8) and /etc/rc</h3>
The kernel 
<em>net.inet.tcp.baddynamic</em> and <em>net.inet.udp.baddynamic</em> sysctls
and the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8">sysctl(8)</a>
utility
have been extended to cover the full range of TCP/UDP ports. These lists 
identify source ports to never allocate dynamically so to avoid conflicts with
well-known services. The <tt>/etc/rc</tt>
script now automatically populates these lists from <tt>/etc/services</tt>
at boot time. 
<p>
The new version of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=named&sektion=8">named(8)</a>
(9.4.2-P1) that has just been imported uses random source ports for queries and
requires this facility for robust operation.
<p>
To avoid any incompatibility, the kernel,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8">sysctl(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=named&sektion=8">named(8)</a> and
<tt>/etc/rc</tt>
should be updated in unison (build and install kernel before "make build").
<p>
<a name="20080711-0"></a>
<h3>2008/07/11 - openchrome(4) driver for Xenocara</h3>
The <a href="http://www.openchrome.org">xf86-video-openchrome</a> driver has been added to Xenocara for via chipsets in place of the old, obsolete, version of xf86-video-via that was there before.
<br>
If you're using a VIA chipset with a configuration file, replace
<blockquote><tt>
  Driver "via"
</tt></blockquote>
with
<blockquote><tt>
  Driver "openchrome"
</tt></blockquote>
in <tt>/etc/X11/xorg.conf</tt> to use the new driver. See the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=openchrome&sektion=4">openchrome(4)</a>
manual page for more configuration options.

<p>
<a name="20080711-1"></a>
<h3>2008/07/11 - ati(4) video driver updated</h3>
The ati(4) driver has been updated. This update of xf86-video-ati brings about some important changes.
<br>
<p>
No more <a href="http://dri.freedesktop.org/wiki/MergedFB">MergedFB</a>:
<br>
<blockquote>
Support for MergedFB mode has been removed in favor of xrandr(1).
</blockquote>

<p>
Quirk option for Macbooks changed:
<blockquote>
Users with Macs or Macbooks that use the following quirk
<blockquote>
<pre>
Option      "iBookHacks" "on"
</pre>
</blockquote>
should read the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeon&sektion=4">radeon(4)</a>
man page, specifically the <tt>"MacModel"</tt> section, if there are problems.
<br>
As of this revision this quirk has been removed.
</blockquote>

<p>
<a name="20080719"></a>
<h3>2008/07/19 - softraid metadata handling rewrite</h3>
The metadata handling in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&sektion=4">softraid(4)</a>
has been rewritten from scratch. The new code is not compatible with the old metadata format and hence users must
backup and recreate their softraid volumes. Softraid volumes made prior to this change will not assemble when
booting a kernel with this code.
</p>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: current.html,v 1.114 2008/07/20 01:33:13 johan Exp $</small>

</body>
</html>
