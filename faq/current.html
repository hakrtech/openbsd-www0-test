<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Following -current</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2005-2011 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif" border="0">
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
</font>

<p>

<h1><font color="#e00000">Following <i>-current</i></font></h1>
<hr>

<h3>Table of Contents</h3>
<p>
<ul>
<li><a href="#Intro">Introduction</a>
<!-- Oldest on top... -->
<li><a href="#20110919">2011/09/19 - [alpha, landisk] thread model posix enabled for gcc 3</a>
<li><a href="#20110923">2011/09/23 - [ports] PostgreSQL update</a>
<li><a href="#20111013">2011/10/13 - [ports] Subversion update</a>
<li><a href="#20111015">2011/10/15 - [xenocara] xkeyboard-config update</a>
<li><a href="#20111017">2011/10/17 - midicat hardlink to aucat(1) removed</a>
<li><a href="#20111119">2011/11/19 - bogus libssl/src/src directory</a>
<li><a href="#20111124">2011/11/24 - [alpha] gcc4 for alpha</a>
<li><a href="#20111212">2011/12/12 - [ports] QEMU binary name change</a>
<li><a href="#20120112">2012/01/12 - [ports] php 5.3</a>
<li><a href="#20120120">2012/01/20 - apropos/whatis change reverted</a>
<li><a href="#20120123">2012/01/23 - [ports] courier-imap 4.10</a>
<li><a href="#20120123a">2012/01/23 - npppd/pipex ingress filter is now configurable</a>
<li><a href="#20120125">2012/01/25 - xf86-video-ati update</a>
<li><a href="#20120126">2012/01/26 - [ports] www/ntlmaps removed</a>
<li><a href="#20120204">2012/02/04 - nsd update; rebuild database</a>
<!-- New additions go on the bottom, please -->
</ul>

<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>Introduction</h2>
This document is for people who wish to follow <i>-current</i>.
It contains information about changes from 5.0-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 4.9 or earlier, or people
wishing to follow <a href="../stable.html"><i>-stable</i></a>.

<p>
If you wish to update to 5.0-release or 5.0-stable from previous
versions, see the <a href="upgrade50.html">upgrade guide</a>.

<p>
Make sure you have read and understood
<a href="faq5.html">FAQ 5 - Building the System from Source</a>
before using -current and the instructions below.

<p>
You should ALWAYS use a snapshot as the starting point for running
<i>-current</i>.
Upgrading by compiling your own source code is not supported.

<p>
Most of these changes will have to be performed as root.

<p>
<a name="20110919"></a>
<h3>2011/09/19 - [alpha, landisk] thread model posix enabled for gcc 3</h3>
Thread model posix has been enabled for gcc 3 which makes dwarf2 exception
handling thread safe and enables thread safety for libstdc++.
This only applies to alpha and landisk platforms.
To upgrade follow these steps:
<ul>
<li>Build and install gcc:
<pre>
     # cd /usr/src/gnu/usr.bin/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
     # make -f Makefile.bsd-wrapper clean
</pre>
<li><a href="faq5.html#BldUserland">Build and install userland</a>
</ul>

<p>
<a name="20110923"></a>
<h3>2011/09/23 - [ports] PostgreSQL update</h3>
Major upgrade to PostgreSQL 9.1.0.
A dump/restore is required.

<p>
<a name="20111013"></a>
<h3>2011/10/13 - [ports] Subversion update</h3>
Major upgrade to Subversion 1.7.0.
Existing working copies need to be upgraded manually.
See the <a href="http://subversion.apache.org/docs/release-notes/1.7.html#wc-ng"
>Subversion 1.7 release notes</a> for details.

<p>
<a name="20111015"></a>
<h3>2011/10/15 - [xenocara] xkeyboard-config update</h3>
Update to xkeyboard-config 2.4.1 replaces the <tt>/usr/X11R6/share/X11/xkb/symbols/srvr_ctrl</tt> by a bare file.
When updating from source, you need to remove that directory before building Xenocara:
<pre>
  # cd /usr/X11R6/share/X11/xkb/symbols
  # rm -rf srvr_ctrl
</pre>

<p>
<a name="20111017"></a>
<h3>2011/10/17 - midicat hardlink to aucat(1) removed</h3>
MIDI files can be manipulated and MIDI thru boxes can be created with
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=aucat">aucat(1)</a>
thus midicat was removed.
For instance, to create a MIDI thru box:
<pre>
  # aucat -M
</pre>
and to record a MIDI file:
<pre>
  # aucat -M -o dump.syx
</pre>
Consequently,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sndio">sndio(7)</a>
MIDI thru box port names have the "aucat" prefix instead of "midithru".
User scripts and MIDI application settings using the old port name should be
updated to use new "aucat" prefix if possible.
<p>
The old midicat binary and its manual page could be removed:
<pre>
  # rm -f /usr/bin/midicat /usr/share/man/man1/midicat.1
</pre>

<p>
<a name="20111119"></a>
<h3>2011/11/19 - bogus lib/libssl/src/src directory</h3>
When importing OpenSSL 1.0.0e, a bogus <tt>src/lib/libssl/src/src</tt>
directory was imported.
This has been fixed manually by removing this extra directory from
the master CVS repository.
<p>
If a <tt>src</tt> tree was checked-out or updated with that
directory, it needs to be removed manually:
<pre>
 # rm -rf /usr/src/lib/libssl/src/src
</pre>
to avoid a warning from CVS server on future updates.

<p>
<a name="20111124"></a>
<h3>2011/11/24 - [alpha] gcc4 for alpha</h3>

alpha has changed from gcc3 to gcc4.
Updated makefiles, gcc, cpp and libstdc++ must be installed with these four
steps.
<p>
Firstly, gcc4 must be compiled with the existing compiler:
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/share/mk && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make && make install
</b></pre></blockquote>
Secondly, gcc4 must be rebuilt with itself:
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/usr.bin/cpp
make obj && make && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make && make install
</b></pre></blockquote>
Thirdly, libstdc++-v3 must be installed after removing the old C++ headers:
<blockquote><pre>
<b>rm -rf /usr/include/g++/*
cd /usr/src/gnu/lib/libstdc++-v3
make obj && make includes && make depend && make && make install
</b></pre></blockquote>
And lastly the entire system rebuilt with the usual procedure documented in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">release(8)</a>.

<p>
For people updating using snapshots, don't forget to:
<blockquote><pre>
<b>rm -rf /usr/include/g++/*
</b></pre></blockquote>
before installing newer snapshot.

<p>
<a name="20111212"></a>
<h3>2011/12/12 - [ports] QEMU binary name change</h3>

As of QEMU 1.0 the i386 target has been renamed from qemu to
qemu-system-i386, you will need to change scripts/command lines as necessary.

<p>
<a name="20120112"></a>
<h3>2012/01/12 - [ports] php 5.3</h3>

(As of November) the primary PHP version used in ports was switched to 5.3.
This change means that if you run PHP applications packaged in ports,
you will need to switch your webserver config to use the newer version
of PHP.
If you are currently using PHP with Apache in base, you will need to
adjust your configuration:
<blockquote><pre><b>cd /var/www/conf/modules
ln -fs /var/www/conf/modules.sample/php-5.3.conf /var/www/conf/modules/php.conf
</b></pre></blockquote>
You will also need to check for links to any active PHP extension modules
in /etc/php-5.2 and re-create them in /etc/php-5.3, e.g.
<blockquote><pre><b>cd /etc/php-5.3
ls -l ../php-5.3.sample
ln -s ../php-5.3.sample/pdo_mysql.ini .
# (etc)
</b></pre></blockquote>
Note that mhash is now part of the main php-5.3 package so an
existing mhash.ini symbolic link can be ignored.

<p>
<a name="20120120"></a>
<h3>2012/01/20 - apropos/whatis change reverted</h3>

Activation of the new 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=makewhatis">makewhatis(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apropos">apropos(1)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=whatis">whatis(1)</a>
suite had to be reverted because of insufficient speed
and because of some other regressions.

No matter which version you are coming from and how you updated,
some files can be removed:

<pre>
  # rm -f /usr/bin/makewhatis /usr/bin/mandocdb /usr/share/man/man8/mandocdb.8
</pre>

In contrast to some old versions of this FAQ, do not remove
<tt>/usr/libdata/perl5/OpenBSD/Makewhatis*</tt> or any <tt>whatis.db</tt>
files.

If you update from source by running <tt>make build</tt>,
rebuild the whatis databases afterwards:

<pre>
  # /usr/libexec/makewhatis
</pre>

<p>
<a name="20120123"></a>
<h3>2012/01/23 - [ports] courier-imap 4.10</h3>
Courier-imap has reset its epoch for the internal sequence number generator 
for new mail folders.
Please read the UPGRADING section of the
<a href="http://fossies.org/unix/misc/courier-imap-4.10.0.tar.gz:a/courier-imap-4.10.0/INSTALL">INSTALL</a>
notes for details.

<p>
<a name="20120123a"></a>
<h3>2012/01/23 - npppd/pipex ingress filter is now configurable</h3>

Users of pipex and npppd (which is not currently built by default)
should note that the ingress filter is now configurable.
Previously it was always enabled.
It is no longer enabled by default; if it is needed, add the following
to /etc/npppd/npppd.conf:
<pre>
  ppp.ingress_filter: true
</pre>

<p>
<a name="20120125"></a>
<h3>2012/01/25 - xf86-video-ati update</h3>

The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeon">radeon(4)</a>
driver has been updated to version 6.14.3.
The <b>radeonhd</b> driver is now deprecated.
A few users may be affected by a bug is zaphod mode support in the
new radeon driver, so the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeonold">radeonold(4)</a>
driver is now providing a frozen version of the last working driver, until
zaphod mode support in the main driver is fixed.
<ul>
<li>users with 
   <pre>
     Driver "radeonhd"
   </pre> 
   in their <tt>/etc/X11/xorg.conf</tt> can replace this with 
   <pre>
     Driver "radeon"
   </pre>
   or just remove <tt>xorg.conf</tt> completely.
<li>users of zaphod configurations (2 or more <b>Screen</b> sections 
   in <tt>xorg.conf</tt>) with the ati or radeon driver should replace 
   the <tt>Driver</tt> lines in their xorg.conf with 
   <pre>Driver "radeonold"</pre>.
</ul>

<p>
<a name="20120126"></a>
<h3>2012/01/26 - [ports] www/ntlmaps removed</h3>
www/ntlmaps has been removed. You can use www/cntlm as a replacement.

<p>
<a name="20120204"></a>
<h3>2012/02/04 - nsd update; rebuild database</h3>
NSD was updated to v3.2.9.
The binary database format has changed; after upgrading, you will need
to rebuild it from the zone files and re-start nsd:
<pre>
  # nsdc rebuild
  # /etc/rc.d/nsd restart
</pre>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: current.html,v 1.314 2012/02/04 21:26:57 sthen Exp $</small>

</body>
</html>
