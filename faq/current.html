<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Following -current</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2006 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif" border="0">    
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
</font>

<p>

<h1><font color="#e00000">Following <i>-current</i></font></h1>
<hr>

<h3>Table of Contents</h3>
<p>
<ul>
<li><a href="#Intro">Introduction</a>
<!-- Oldest on top... -->
<li><a href="#20060327">2006/03/27 - New iwi(4) firmware</a>
<li><a href="#20060518">2006/05/18 - spppcontrol(8) removal</a>
<li><a href="#20060526">2006/05/26 - ipsecadm(8) removal</a>
<li><a href="#20060621">2006/06/21 - dvmrpd(8) added</a>
<li><a href="#20060625">2006/06/25 - wicontrol(8) removal</a>
<li><a href="#20060727">2006/07/27 - new compiler option</a>
<li><a href="#20060926">2006/09/26 - Switch to gcc3 (alpha)</a>
<li><a href="#20061006">2006/10/06 - 'flags S/SA keep state' implicit in pf.conf(5)</a>
<li><a href="#20061011">2006/10/11 - disklabel not in FreeBSD or NetBSD partitions</a>
<li><a href="#20061012">2006/10/12 - don't boot from NetBSD partitions</a>
<!-- New additions go on the bottom, please -->
</ul>
    
<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>Introduction</h2>
This document is for people who wish to follow <i>-current</i>.
It contains information about changes from 3.9-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 3.8 or earlier, or people
wishing to follow <a href="../stable.html"><i>-stable</i></a>.

<p>
If you wish to update to 3.9-release or 3.9-stable from previous
versions, see the <a href="upgrade39.html">upgrade guide</a>.

<p>
Make sure you have read and understood
<a href="faq5.html">FAQ 5 - Building the System from Source</a>
before using -current and the instructions below.

<p>
You should ALWAYS use a snapshot as the starting point for running
<i>-current</i>.
Upgrading by compiling your own source code is not supported.

<p>
If you wish to see upgrade information for earlier versions of OpenBSD,
see <a href= "upgrade-old.html">upgrade-old.html</a>.
This is provided as a historical record -- it should NOT be used as
an upgrade procedure guide.

<p>

<a name="20060327"></a>
<h3>2006/03/27 - New iwi(4) firmware</h3>
iwi(4) now requires firmware version 3.0 to run.  Due to license problems
the firmware is not currently distributed with OpenBSD.
The firmware can be installed via the pkg tools with the
package at
<a href="http://damien.bergamini.free.fr/iwifw/OpenBSD/iwi-firmware-3.0.tgz">http://damien.bergamini.free.fr/iwifw/OpenBSD/iwi-firmware-3.0.tgz</a>.
<p>


<a name="20060518"></a>
<h3>2006/05/18 - spppcontrol(8) removal</h3>
In-kernel PPP configuration is now fully supported by
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a>.
The obsolete
<em><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spppcontrol&amp;sektion=8&amp;manpath=OpenBSD+3.9">spppcontrol(8)</a></em>
utility has been removed from the tree.
See the manual pages
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sppp&amp;sektion=4">sppp(4)</a>
and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pppoe&amp;sektion=4">pppoe(4)</a>
for configuration examples.
<p>
Previously, the /etc/hostname.pppoe0 file looked like this:
<pre>
pppoedev ne0
!/sbin/ifconfig ne0 up
!/usr/sbin/spppcontrol \$if myauthproto=pap myauthname=testcaller \
        myauthkey=donttell
!/sbin/ifconfig \$if inet 0.0.0.0 0.0.0.1 netmask 0xffffffff
!/sbin/route add default 0.0.0.1
up
</pre>
This should be updated according to the following example:
<pre>
inet 0.0.0.0 255.255.255.255 0.0.0.1 pppoedev ne0 \
	authproto pap authname testcaller authkey donttell up
!/sbin/route add default 0.0.0.1
</pre>
And the physical interface must be marked UP:
<pre>
# echo "up" > /etc/hostname.ne0
</pre>
<p>

<a name="20060526"></a>
<h3>2006/05/26 - ipsecadm(8) removal</h3>
IPsec configuration is now fully supported by
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecctl&amp;sektion=8">ipsecctl(8)</a>.
The obsolete
<em><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&amp;sektion=8&amp;manpath=OpenBSD+3.9">ipsecadm(8)</a></em>
utility has been removed from the tree.
See the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec.conf&amp;sektion=5">ipsec.conf(5)</a>
manual page for configuration examples.
<p>

<a name="20060621"></a>
<h3>2006/06/21 - dvmrpd(8) added</h3>
A mrouted(8) replacement has been started and imported, in order to use
(note: not very useful yet) this new daemon the user _dvmrpd must be added:<p>
<pre>
# useradd -u87 -g=uid -c"DVMRP Daemon" -d/var/empty -s/sbin/nologin _dvmrpd
</pre>

<a name="20060625"></a>
<h3>2006/06/25 - wicontrol(8) removal</h3>
Wireless configuration for
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&amp;sektion=4">wi(4)</a>
is now fully supported by
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a>.
The obsolete
<em><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wicontrol&amp;sektion=8&amp;manpath=OpenBSD+3.9">wicontrol(8)</a></em>
utility has been removed from the tree.
<p>

<a name="20060727"></a>
<h3>2006/07/27 - new compiler option</h3>
The kernel on all platforms is now built with the recently introduced
<i>-Wstack-larger-than</i> compiler option. Before building a kernel, the
compiler needs to be built and installed.

<p>
Follow the instructions in
<a href="faq5.html#NewCompiler">FAQ 5 - How do I bootstrap a newer version of
the compiler</a> for details.
<p>

<a name="20060926"></a>
<h3>2006/09/26 - Switch to gcc3 (alpha)</h3>
OpenBSD/alpha has converted to gcc3.
To upgrade,
<pre>
    # rm -rf /usr/include/g++
    # cp /usr/src/share/mk/bsd.own.mk /usr/share/mk/
</pre>
Now, <a href="faq5.html#NewCompiler">build gcc3</a>, (using the gcc3
directory) then build new ld.so:
<pre>
    cd /usr/src/libexec/ld.so
    make clean
    make obj
    make depend
    make
    make install
</pre>

Now, build the kernel and system as <a href="faq5.html#Bld">usual</a>.
<p>

<a name="20061006"></a>
<h3>2006/10/06 - 'flags S/SA keep state' implicit in pf.conf(5)</h3>
<i>flags S/SA keep state</i> is now the default for pass rules in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5">pf.conf(5)</a>,
and new <i>no state</i> and <i>flags any</i> options have been added to
override these defaults.  Current rulesets will continue to load, but the
behaviour may be slightly changed as these defaults are more restrictive.
Rulesets with stateless filtering (<i>no state</i>) or a requirement to
create states on intermediate packets (<i>flags any</i>) should be updated
to explicitly request the desired behaviour.
<p>
In particular care should be taken with the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=enc&amp;sektion=4">enc0</a>
interface, as floating states are a potential problem for filtering IPsec
traffic: states need to be interface bound, to avoid permitting unencrypted
traffic should
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>
exit. Therefore all rules on the enc0 interface should explicitly set
<i>keep state (if-bound)</i>.
<p>

<a name="20061011"></a>
<h3>2006/10/11 - disklabel not in FreeBSD or NetBSD partitions</h3>
<i>FreeBSD and NetBSD DOS MBR partitions</i> are no longer used to store
disklabels, and are no longer searched for a disklabel. As a result disks with
only FreeBSD or NetBSD DOS MBR partitions will no longer have an 'a' partition
created in the spoofed disklabel. The disklabel on such disks will be stored
and loaded from sector 1, and this could find an old accidental disklabel. Use
fdisk(8) to change the partition type to OpenBSD ('A6') to use the existing
disklabel.
<p>
 
<a name="20061012"></a>
<h3>2006/10/12 - don't boot from NetBSD partitions</h3>
<i>amd64, i386, macppc, and mvmeppc</i> no longer try to boot from the first
NetBSD partition when no OpenBSD partition is found.
<p>

<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
</font>
<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: current.html,v 1.50 2006/10/20 13:39:21 mcbride Exp $</small>

</body>
</html>
