<html>
<head>
<title>7.0 - Keyboard controls</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2001 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000" link= "#23238E">

<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif">
<p>
<h2><font color=#e00000>7.0 - Keyboard Controls</font><hr></h2>
</p>

<p>
<ul><h3>Table of Contents</h3>
<li><a href= "#Keyboard"     >7.1 - How do I remap the keyboard?</a></li>
<li><a href= "#ConsoleMouse" >7.2 - Is there gpm or the like in OpenBSD?</a></li>
<li><a href= "#ConsoleClear" >7.3 - How do I clear the console each time a user logs out?</a></li>
<li><a href= "#Scrollback"   >7.4 - Accessing the console scrollback buffer.</a></li>
<li><A HREF= "#SwitchConsole">7.5 - Why doesn't F9 through F12 switch consoles on i386 anymore?</a></li>
</ul>
</p> 
<hr>

<br>
<p>
<a name= "Keyboard"></a>
<a name= "7.1"></a>
<h2>7.1 - How do I remap the keyboard? <i>(wscons specific)</i></h2>
</p>

<p>
The ports that use the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&sektion=4">wscons(4)</a> console driver: 
<a href="../alpha.html">alpha</a>, <a href="../i386.html">i386</a>, and <a href="../macppc.html">macppc</a>.
</p>

<b>For OpenBSD 3.0 and after:</b>

<p>
Since OpenBSD 2.9, OpenBSD changed to using the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&sektion=4">wscons(4)</a> console driver.
In OpenBSD 2.8 and earlier, the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcvt&sektion=4&manpath=OpenBSD+2.7&arch=i386">pcvt(4)</a>
console driver was used.
</p>

<p>
With wscons(4) consoles, most options can be controlled using the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl&sektion=8">wsconsctl(8)</a> utility. For
example, to change keymappings with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl&sektion=8">wsconsctl(8)</a> 
one would execute the following:
</p>

<ul><pre>
# <strong>wsconsctl -w keyboard.encoding=uk</strong>
</pre></ul>

<p>
In the next example, we will remap &quot;Caps Lock&quot; to be &quot;Control L&quot;:
</p>

<ul><pre>
# <strong>wsconsctl -w keyboard.map+="keysym Caps_Lock = Control_L"</strong>
</pre></ul>

<b>For OpenBSD 2.9:</b>

<p>
OpenBSD 2.9 expected slightly different arguments for the
wsconsctl command; in specific, you didn't need to prepend the
``keyboard'' keyword, but to specify that the command applied
to the keyboard portion of the device with the ``-k'' flag.
</p>

<ul><pre>
# <strong>wsconsctl -k -w encoding=uk</strong>
</pre></ul>

<p>and</p>

<ul><pre>
# <strong>wsconsctl -k -w map+="keysym Caps_Lock = Control_L"</strong>
</pre></ul>

<b>For OpenBSD 2.8 and earlier:</b>

<p>
By using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kcon&sektion=1&manpath=OpenBSD+2.7">kcon(1)</a>, 
"kcon - keyboard control and remapping for the pcvt driver".<br>
Before you can use this, you need to turn on character mapping with 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scon&sektion=1&manpath=OpenBSD+2.7">scon(1)</a>.
</p>

<p>
Example:
</p>

<ul><pre>
# <strong>scon -o</strong>
# <strong>kcon -m gb</strong>
</pre></ul>

<p>
This will load the keycap file for Great Britain.
Note that if you run <b>scon -o</b> again, this will turn character mapping back off,
which you probably don't want to do if you are using kcon for remapping.
Keep this in mind if you use scon in any automated fashion, such as in scripts.
<p>
These commands can only be executed from a pcvt virtual terminal.

<p>
<a name= "ConsoleMouse"></a>
<a name= "7.2"></a>
<h2>7.2 - Is there gpm or the like in OpenBSD?</h2>
</p>

<p>
For platforms using the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&sektion=4">wscons(4)</a> console driver, 
there is a port of FreeBSD's moused(8).
The original port of moused(8) was done for OpenBSD 2.7 using
the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcvt&sektion=4&manpath=OpenBSD+2.7&arch=i386">pcvt(4)</a> 
console driver, it was then later changed to use wscons. The
daemon was renamed to 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsmoused&sektion=8&arch=i386">wsmoused(8)</a>,
and is packaged with OpenBSD 2.9 and later by default.
</p>

<p>
The architectures that wsmoused(8) should work on are: <a href="../alpha.html">alpha</a>, <a href="../i386.html">i386</a>, 
and <a href="../macppc.html">macppc</a>.

<p>
<a name= "ConsoleClear"></a>
<a name="7.3"></a>
<h2>7.3 - Clearing the console each time a user logs out.</h2>
</p>

<p>
To do this you must add a line in <kbd><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gettytab&sektion=5">/etc/gettytab(5)</a></kbd>.
Change the current section:
</p>

<ul><pre>
P|Pc|Pc console:\
        :np:sp#9600:
</pre></ul>

<p>
adding the line &quot;:cl=\E[H\E[2J:&quot; at the end, so that
it ends up looking like this:
</p>

<ul><pre>
P|Pc|Pc console:\
        :np:sp#9600:\
	:cl=\E[H\E[2J:
</pre></ul>

<p>
<a name= "Scrollback"></a>
<a name="7.4"></a>
<h2>7.4 - Accessing the Console Scrollback Buffer <i>(alpha/macppc/i386 specific)</i></h2>
</p>

<p>
Ever since OpenBSD 2.6, there has been the ability to access
the console scrollback buffer. This allows you to see
information that has already scrolled past your screen. To be
able to move up and down in the buffer, simply use the key
combination:
</p>

To move up:
<ul><pre>
&quot;[shift]+[pgup]&quot;
</pre></ul>

To move back down:
<ul><pre>
&quot;[shift]+[pgdn]&quot;
</pre></ul>

<p>
The default scrollback buffer, or the amount of pages that you can move up and view, is 8.
</p>

<p>
<a name= "SwitchConsole"></a>
<a name="7.5"></a>
<h2>7.5 - Why doesn't F9 through F12 switch consoles anymore? <i>(i386 specific)</i></h2>

In OpenBSD 2.6 and below, the pcvt console driver on the i386 port allowed
you to press F9, F10, F11, F12 and get corresponding virtual terminals
1, 2, 3, and 4.  In 2.7 and above, this behavior is removed, because several
applications use these keys for input.  

<p>
<font color= "#0000e0">
<a href= "index.html">[Back to Main Index]</a>
<a href= "faq6.html">[To Section 6.0 - Networking]</a>
<a href= "faq8.html">[To Section 8.0 - General Questions]</a>
</font>
</p>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt= "[back]"></a> 
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: faq7.html,v 1.31 2002/01/12 01:39:30 ericj Exp $</small>
</p>
</body>
</html>
