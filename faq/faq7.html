<html>
<head>
<title>7.0 - Keyboard controls</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2001 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000" link= "#23238E">

<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif">
<p>
<h2><font color=#e00000>7.0 - Keyboard Controls</font><hr></h2>
</p>

<p>
<ul><h3>Table of Contents</h3>
<li><a href= "faq7.html#7.1">7.1 - How do I remap the keyboard?</a></li>
<li><a href= "faq7.html#7.2">7.2 - Is there gpm or the like in OpenBSD?</a></li>
<li><a href= "faq7.html#7.3">7.3 - How do I clear the console each time a user logs out?</a></li>
<li><a href= "faq7.html#7.4">7.4 - Accessing the console scrollback buffer.</a></li>
<li><A HREF= "faq7.html#7.5">7.5 - Why doesn't F9 through F12 switch consoles on i386 anymore?</a></li>
</ul>
</p> 
<hr>

<br>
<p>
<a name= "7.1"></a>
<h2>7.1 - How do I remap the keyboard? <i>(wscons specific)</i></h2>
</p>

<p>
The ports that use the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&sektion=4">wscons(4)</a> console driver: 
<a href="../alpha.html">alpha</a>, <a href="../i386.html">i386</a>, and <a href="../powerpc.html">powerpc</a>.
</p>

<b>For OpenBSD 2.9 and after:</b>

<p>
Starting in OpenBSD 2.9, OpenBSD changed to using the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&sektion=4">wscons(4)</a> console driver. 
This is changed from the earlier pcvt(4) console driver.
</p>

<p>
With wscons(4) consoles, most options can be controlled using the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl&sektion=8">wsconsctl(8)</a> utility. To change keymappings 
with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl&sektion=8">wsconsctl(8)</a> follow the below usage 
which will change the keymapping to UK.
</p>

<ul><pre>
# <strong>wsconsctl -w encoding=uk</strong>
</pre></ul>

<p>
In the next example, we will remap &quot;Caps Lock&quot; to be &quot;Control L&quot;:
</p>

<ul><pre>
# <strong>wsconsctl -w map+="keysym Caps_Lock = Control_L"</strong>
</pre></ul>

<b>For OpenBSD 2.8 and earlier:</b>

<p>
By using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kcon&sektion=1&manpath=OpenBSD+2.7">kcon(1)</a>, 
"kcon - keyboard control and remapping for the pcvt driver"<br>
Before you can use this, you need to turn on character mapping with 
scon.
</p>

<p>
Example:
</p>

<ul><pre>
# <strong>scon -o</strong>
# <strong>kcon -m gb</strong>
</pre></ul>

<p>
This will load the keycap file for Great Britain.
Note that if you run <b>scon -o</b> again, this will turn character mapping back off,
which you probably don't want to do if you are using kcon for remapping.
Keep this in mind if you use scon in any automated fashion, such as in scripts.
<p>
These commands can only be executed from a pcvt virtual terminal.

<p>
<a name= "7.2"></a>
<h2>7.2 - Is there gpm or the like in OpenBSD?</h2>
</p>

<p>
For platforms using the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&sektion=4">wscons(4)</a> console driver, 
there is a port of FreeBSD's <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=moused&sektion=8&manpath=OpenBSD+2.8">moused(8)</a>. 
The original port of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=moused&sektion=8">moused(8)</a> was done for 
OpenBSD 2.7 using the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcvt&sektion=4&manpath=OpenBSD+2.7">pcvt(4)</a> 
console driver, it was then later changed to use wscons. The daemon was renamed to 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsmoused&sektion=8">wsmoused(8)</a>, and is packaged with 
OpenBSD 2.9 by default.
</p>

<p>
The architectures that wsmoused(8) should work on are: <a href="../alpha.html">alpha</a>, <a href="../i386.html">i386</a>, 
and <a href="../powerpc.html">powerpc</a>.

<p>
<a name="7.3"></a>
<h2>7.3 - Clearing the console each time a user logs out.</h2>
</p>

<p>
To do this you must add a line in <kbd>/etc/gettytab</kbd>. Change the section currently:
</p>

<ul><pre>
P|Pc|Pc console:\
        :np:sp#9600:
</pre></ul>

<p>
Add the line &quot;:cl=\E[H\E[2J:&quot; at the end, so it ends up looking like this:
</p>

<ul><pre>
P|Pc|Pc console:\
        :np:sp#9600:\
	:cl=\E[H\E[2J:
</ul></pre>

<p>
<a name="7.4"></a>
<h2>7.4 - Accessing the Console Scrollback Buffer <i>(alpha/powerpc/i386 specific)</i></h2>
</p>

<p>
Starting with OpenBSD 2.6, there has been the ability to access the console scrollback buffer. this allows you 
to see information that has already scrolled past your screen. To be able to move up and down in the buffer, 
simply use the key combination:
</p>

To move up:
<ul><pre>
&quot;[shift]+[pgup]&quot;
</pre></ul>

To move back down:
<ul><pre>
&quot;[shift]+[pgdn]&quot;
</pre></ul>

<p>
The default scrollback buffer, or the amount of pages that you can move up and view, is 8.
</p>

<p>
<a name="7.5"></a>
<h2>7.5 - Why doesn't F9 through F12 switch consoles anymore? <i>(i386 specific)</i></h2>

In OpenBSD 2.6 and below, the pcvt console driver on the i386 port allowed
you to press F9, F10, F11, F12 and get corresponding virtual terminals
1, 2, 3, and 4.  In 2.7 and above, this behavior is removed, because several
applications use these keys for input.  

<p>
<font color= "#0000e0">
<a href= "index.html">[Back to Main Index]</a>
<a href= "faq6.html">[To Section 6.0 - Networking]</a>
<a href= "faq8.html">[To Section 8.0 - General Questions]</a>
</font>
</p>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt= "[back]"></a> 
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: faq7.html,v 1.24 2001/08/25 09:31:33 jufi Exp $</small>
</p>
</body>
</html>
