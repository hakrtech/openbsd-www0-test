<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>7.0 - Keyboard and Display Controls</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
</head>

<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<body bgcolor= "#ffffff" text= "#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif">
<p>
<h2><font color="#e00000">7.0 - Keyboard and Display Controls</font></h2>
<hr>
<p>
<h3>Table of Contents</h3>
<ul>
<li><a href= "#Keyboard"     >7.1 - How do I remap the keyboard? (wscons)</a>
<li><a href= "#ConsoleMouse" >7.2 - Is there gpm or the like in OpenBSD?</a>
<li><a href= "#ConsoleClear" >7.3 - How do I clear the console each time
    a user logs out?</a>
<li><a href= "#Scrollback"   >7.4 - Accessing the console scrollback
    buffer. (alpha/macppc/i386)</a>
<li><a href= "#SwitchConsole">7.5 - How do I switch consoles? (i386)</a>
<li><a href= "#80x50"        >7.6 - How can I use a console resolution 
    of 80x50? (i386)</a>
</ul>
<hr>

<br>
<p>
<a name= "Keyboard"></a>
<a name= "7.1"></a>
<h2>7.1 - How do I remap the keyboard? <i>(wscons)</i></h2>

<p>
The ports that use the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&amp;sektion=4">wscons(4)</a>
console driver: <a href="../alpha.html">alpha</a>, 
<a href="../i386.html">i386</a>, and <a href="../macppc.html">macppc</a>.

<b>For OpenBSD 3.0 and after:</b>

<p>
With wscons(4) consoles, most options can be controlled using the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl&amp;sektion=8">wsconsctl(8)</a>
utility. For example, to change keymappings with
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl&amp;sektion=8">wsconsctl(8)</a> 
one would execute the following:

<blockquote><pre>
# <strong>wsconsctl -w keyboard.encoding=uk</strong>
</pre></blockquote>

<p>
In the next example, we will remap &quot;Caps Lock&quot; to be
&quot;Control L&quot;:

<blockquote><pre>
# <strong>wsconsctl -w keyboard.map+="keysym Caps_Lock = Control_L"</strong>
</pre></blockquote>

<b>For OpenBSD 2.9:</b>

<p>
OpenBSD 2.9 expected slightly different arguments for the
wsconsctl command; in specific, you didn't need to prepend the
``keyboard'' keyword, but to specify that the command applied
to the keyboard portion of the device with the ``-k'' flag.

<blockquote><pre>
# <strong>wsconsctl -k -w encoding=uk</strong>
</pre></blockquote>

<p>and

<blockquote><pre>
# <strong>wsconsctl -k -w map+="keysym Caps_Lock = Control_L"</strong>
</pre></blockquote>

<p>
This will load the keycap file for Great Britain.

<a name= "ConsoleMouse"></a>
<a name= "7.2"></a>
<h2>7.2 - Is there gpm or the like in OpenBSD?</h2>

<p>
For the <a href="../alpha.html">alpha</a> and <a href="../i386.html">i386</a> 
platforms, OpenBSD provides 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsmoused&amp;sektion=8&amp;arch=i386">wsmoused(8)</a>,
a port of FreeBSD's moused(8).  It can be enabled automatically 
at startup by editing the appropriate line in 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;sektion=8">rc.conf(8)</a>. 

<p>
<a name= "ConsoleClear"></a>
<a name="7.3"></a>
<h2>7.3 - Clearing the console each time a user logs out.</h2>

<p>
To do this you must add a line in 
<kbd><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gettytab&amp;sektion=5">/etc/gettytab(5)</a></kbd>.
Change the current section:

<blockquote><pre>
P|Pc|Pc console:\
        :np:sp#9600:
</pre></blockquote>

<p>
adding the line &quot;<tt>:cl=\E[H\E[2J:</tt>&quot; at the end, so that
it ends up looking like this:

<blockquote><pre>
P|Pc|Pc console:\
        :np:sp#9600:\
	:cl=\E[H\E[2J:
</pre></blockquote>

<p>
<a name= "Scrollback"></a>
<a name="7.4"></a>
<h2>7.4 - Accessing the Console Scrollback Buffer 
  <i>(alpha/macppc/i386)</i></h2>

<p>
OpenBSD provides a console scrollback buffer. This allows you 
to see information that has already scrolled past your screen. 
To move up and down in the buffer, simply use the key combinations
<tt>[SHIFT]+[PGUP]</tt> and <tt>[SHIFT]+[PGDN]</tt>

<p>
The default scrollback buffer, or the number of pages that you can 
move up and view, is 8.

<p>
<a name= "SwitchConsole"></a>
<a name="7.5"></a>
<h2>7.5 - How do I switch consoles? <i>(i386)</i></h2>

The user on an i386 system can switch between five virtual terminals 
from the console by hitting <tt>[CTRL]+[ALT]+[F1], [CTRL]+[ALT]+[F2], 
[CTRL]+[ALT]+[F3], [CTRL]+[ALT]+[F4]</tt> and <tt>[CTRL]+[ALT]+[F6]</tt>.

<p>
This can also be done from within the X environment, which will take you
out of the graphical environment back to a text-mode environment.  To 
return to the graphical environment, hit <tt>[CTRL]+[ALT]+[F5]</tt>.

<a name="80x50"></a>
<h2>7.6 - How do I use a console resolution of 80x50? <i>(i386)</i></h2>

i386 users normally get a console screen of 25 lines of 80 characters.
However, the many VGA video cards are capable of displaying a higher
text resolution of 50 lines of 80 characters.  

<p>
First, a font that supports the desired resolution must be loaded using
the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsfontload&sektion=8">wsfontload</a>
command.  The standard 80x25 text screen uses 8x16 pixel
fonts, to double the vertical resolution, we will have to use 8x8 pixel
fonts.

<p>
After that, we will have to delete and recreate a 
<a href="#SwitchConsole">virtual console</a> at the desired screen 
resolution, using the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconscfg&sektion=8">wsconscfg</a>
command.

<p>
This can be done automatically at boot by adding the following lines to
the end of your 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.local&sektion=8"><tt>rc.local</tt></a>
file:
<blockquote>
<pre>
wsfontload -h 8 -e ibm /usr/share/misc/pcvtfonts/vt220l.808
wsconscfg -dF 5
wsconscfg -t 80x50 5
</pre>
</blockquote>

As with any modification to your system configuration, it is
recommended you spend some time with the man pages to understand what
these commands do.

<p>
The first line above loads the 8x8 font.  The second line deletes screen
5 (which would be accessed by <tt>[CTRL]-[ALT]-[F6]</tt>).  The third
line creates a new screen 5 with the resolution of 50 lines of 80
characters each.  If you do this, you will see your primary screen, and
the other three default virtual consoles, come up in the standard 80x25
mode, but a new screen 5 accessible through <tt>[CTRL]-[ALT]-[F6]</tt>

<p>
Note that <tt>[CTRL]-[ALT]-[F1]</tt> is screen 0 here.  If you wish to 
alter the other screens, simply repeat the delete and add screen steps
for whichever screens you want running at the 80x50 resolution.

<p>
You should avoid changing screen 4 (ttyC4, <tt>[CTRL]-[ALT]-[F5]</tt>),
which is used by X as a graphical screen.  You can also add more virtual
terminals to your OpenBSD system by altering 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ttys&sektion=5"><tt>/etc/ttys</tt></a>,
which can then be made whichever resolution you prefer.

<p>
As one might expect, all these commands can also be entered at the 
command prompt, as root.

<p>
<b>Note: this will not work on all video cards.</b>  Unfortunately, not
all video cards support the uploaded fonts that
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&sektion=4">wscons</a>
requires to achieve the 80x50 text mode.  In these cases, you might wish
to consider running X.


<p>
<font color= "#0000e0">
<a href= "index.html">[Back to Main Index]</a>
<a href= "faq6.html">[To Section 6.0 - Networking]</a>
<a href= "faq8.html">[To Section 8.0 - General Questions]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt= "[back]"></a> 
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: faq7.html,v 1.40 2002/10/08 02:30:34 nick Exp $</small>
</body>
</html>
