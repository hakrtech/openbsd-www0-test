<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>4 - OpenBSD 3.5 Guide d'Installation</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2004 by OpenBSD.">
</head>

<!-- Passes validator.w3.org.  Please keep it this way -->

<body bgcolor= "#ffffff" text= "#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>

<font color= "#0000e0">
<a href= "index.html">[Retour &agrave; l'Index principal]</a>
<a href= "faq3.html">[Section 3 - Obtenir OpenBSD]</a>
<a href= "faq5.html">[Section 5 - Construire le Syst&egrave;me &agrave; partir des Sources]</a>
</font>

<h1><font color="#e00000">4 - OpenBSD 3.5 Guide d'Installation</font></h1>
<!-- UNCOMMENT ONLY WHEN THE FILE IS OUT OF SYNC

<hr>
<p>
<b><font color="#e00000">Remarque Importante :</font></b> Le contenu de
   ce fichier est obsol&egrave;te. Consultez la version anglaise 
   <a href="../faq4.html">ici</a> pour des informations &agrave; jour.

<p>
Si vous souhaitez contribuez &agrave; l'effort de traduction,
pri&egrave;re de consulter
<a href="../../fr/translation.html">la page de traduction</a>.

-->
<hr>

<p>
<h3>Table des Mati&egrave;res</h3>
<ul>
<li><a href= "#Overview"    >4.1 - Pr&eacute;sentation de la proc&eacute;dure d'installation
                                     d'OpenBSD</a>
<li><a href= "#Checklist"   >4.2 - V&eacute;rifications avant l'installation</a>

<li><a href="#MkInsMedia"   >4.3 - Cr&eacute;er un m&eacute;dia d'installation OpenBSD amor&ccedil;able</a>
    <ul>
    <li><a href="#UnixFlop" >4.3.1 - Cr&eacute;er des disquettes de d&eacute;marrage sur Unix</a>
    <li><a href="#DosFlop"  >4.3.2 - Cr&eacute;er des disquettes de d&eacute;marrage sur Windows ou DOS</a>
    <li><a href="#MkCD-ROM" >4.3.3 - Cr&eacute;er un CD-ROM amor&ccedil;able</a>
    </ul>
<li><a href="#Boot"         >4.4 - D&eacute;marrer le m&eacute;dia d'installation OpenBSD</a>
<li><a href="#Install"      >4.5 - Installer OpenBSD</a>
  <ul>
  <li><a href="#Start"      >4.5.1 - Commencer l'installation</a>
  <li><a href="#Disks"      >4.5.2 - Configurer les disques</a>
  <li><a href="#Hostname"   >4.5.3 - Configurer le nom d'h&ocirc;te du syst&egrave;me ("hostname")</a>
  <li><a href="#Network"    >4.5.4 - Configurer le r&eacute;seau</a>
  <li><a href="#InstMedia"  >4.5.5 - Choisir le m&eacute;dia d'installation</a>
  <li><a href="#Filesets"   >4.5.6 - Choisir les packages</a>
  <li><a href="#Finish"     >4.5.7 - Terminer l'installation</a>
  </ul>

<li><a href= "#FilesNeeded" >4.6 - Quels sont les fichiers n&eacute;cessaires &agrave; l'installation ?</a>
<li><a href= "#SpaceNeeded" >4.7 - De combien d'espace disque ai-je besoin pour une installation
                                     OpenBSD ?</a>
<li><a href= "#Multibooting">4.8 - Multiboot OpenBSD/i386</a>
<li><a href= "#SendDmesg"   >4.9 - Envoyer votre dmesg &agrave; dmesg@openbsd.org apr&egrave;s l'installation</a>
<li><a href= "#AddFileSet"  >4.10 - Ajouter un package apr&egrave;s l'installation</a>
<li><a href= "#bsd.rd"      >4.11 - Qu'est ce que 'bsd.rd' ?</a>
<li><a href= "#InstProb"    >4.12 - Probl&egrave;mes d'installation courants</a>
  <ul>
  <li><a href="#cpq16m"     >4.12.1 - Mon Compaq ne reconna&icirc;t que 16M de RAM</a>
  <li><a href="#noboot"     >4.12.2 - Mon i386 ne d&eacute;marre pas apr&egrave;s l'installation</a>
  <li><a href="#sshhang"    >4.12.3 - Ma machine &agrave; d&eacute;marr&eacute;e, mais bloque pendant la proc&eacute;dure
     ssh-keygen</a>
  <li><a href="#noftplist"  >4.12.4 - J'ai le message "Failed to change directory" pendant
     l'installation</a>
  <li><a href="#krb4"       >4.12.5 - Quand je m'identifie j'obtiens
     "login_krb4-or-pwd: Exec format error"</a>
  <li><a href="#blankfdisk"       >4.12.6 - Ma table de partition fdisk est vide !</a>     
  </ul>
<li><a href= "#site"        >4.13 - Personnaliser la proc&eacute;dure d'installation</a>
<li><a href= "#Multiple"    >4.14 - Comment puis-je installer plusieurs syst&egrave;mes identiques ?</a>
<li><a href="#getdmesg"     >4.15 - Comment puis-je obtenir un dmesg(8) pour rapporter un
     probl&egrave;me d'installation ?</a>
<li><a href="#bsdrdaout"    >4.16 - Mettre &agrave; jour/R&eacute;installer OpenBSD/i386
     en utilisant <tt>bsd.rd-a.out</tt></a>.
</ul>
<hr>

<p>
<a name= "Overview"></a>
<h2>4.1 - Pr&eacute;sentation de la proc&eacute;dure d'installation OpenBSD</h2>

<p>
OpenBSD a une proc&eacute;dure d'installation robuste, adaptable et peut
&ecirc;tre install&eacute; depuis une simple disquette.
La plupart des architectures suivent une proc&eacute;dure d'installation
similaire ; cependant quelques d&eacute;tails diff&egrave;rent.
Dans tous les cas, il vous est vivement conseill&eacute; de lire le
document INSTALL sp&eacute;cifique &agrave; votre architecture se trouvant dans
le dossier <i>"platform"</i> sur le CD-ROM ou les sites FTP (par
exemple, <tt>i386/INSTALL.i386</tt>, <tt>mac68k/INSTALL.mac68k</tt>
ou <tt>sparc/INSTALL.sparc</tt>).

<p>
Sur la plupart des architectures, l'installation OpenBSD utilise un
noyau sp&eacute;cial avec un certain nombre d'utilitaires et de scripts
d'installation inclus dans un disque RAM pr&eacute;charg&eacute;.
Apr&egrave;s le d&eacute;marrage de ce noyau, le syst&egrave;me d'exploitation est extrait
depuis plusieurs fichiers
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
(<tt>.tgz</tt>) compress&eacute;s.
Il existe de nombreux moyens de d&eacute;marrer ce noyau d'installation :

<ul>
<li><b>Disquette :</b>
Des images de disquettes utilisables pour
cr&eacute;er une disquette d'installation depuis un autre syst&egrave;me
<a href="#UnixFlop">Compatible Unix</a> ou sur un syst&egrave;me
<a href="#DosFlop">DOS/Windows</a> sont fournies.
Les noms de fichiers typiques sont <tt>floppy35.fs</tt>, bien que
plusieurs architectures poss&egrave;dent de multiples images de disquettes.

<li><b>CD-ROM :</b> Sur plusieurs architectures une image CD-ROM
(<tt>cd35.iso</tt>) est fournie, autorisant la cr&eacute;ation d'un CD-ROM amor&ccedil;able.
Il contient simplement le noyau d'installation - les fichiers d'installation doivent
toujours &ecirc;tre t&eacute;l&eacute;charg&eacute;s via FTP ou une autre source.
Vous pouvez, bien s&ucirc;r, cr&eacute;er votre propre CD-ROM avec les fichiers et outils
que vous d&eacute;sirez.

<li><b><a href="#bsd.rd">bsd.rd</a> :</b> Le noyau RAM,
cr&eacute;&eacute; pour le d&eacute;marrage depuis une partition OpenBSD existante ou &agrave; travers le r&eacute;seau.

<li><b>R&eacute;seau:</b> Quelques architectures supportent le d&eacute;marrage &agrave; travers un r&eacute;seau.

<li><b>Ecrire une image de syst&egrave;me de fichiers sur disque :</b> Une image de syst&egrave;me de
fichiers qui peut &ecirc;tre &eacute;crite depuis une partition existante, et qui sera ensuite
amor&ccedil;able.

<li><b>Cassettes amor&ccedil;able :</b> Certaines architectures supportent l'amor&ccedil;age depuis
des cassettes.

Ces cassettes peuvent &ecirc;tre cr&eacute;&eacute;es en suivant les instructions du fichier
INSTALL.<i>platform</i>.
</ul>

Toutes les <a href="../../fr/plat.html">architectures</a> ne supportent pas chacune des
options de d&eacute;marrage :

<ul>
<li><a href="../../fr/alpha.html"><b>alpha :</b></a> Disquette, CD-ROM, Ecriture d'une image
de disquette sur le disque dur.

<li><a href="../../fr/amd64.html"><b>amd64 :</b></a> Disquette, CD-ROM,
<a href="faq6.html#PXE">R&eacute;seau</a>.

<li><a href="../../fr/cats.html"><b>cats :</b></a> CD-ROM.

<li><a href="../../fr/hp300.html"><b>hp300 :</b></a> CD-ROM, R&eacute;seau.

<li><a href="../../fr/hppa.html"><b>hppa :</b></a> R&eacute;seau.

<li><a href="../../fr/i386.html"><b>i386 :</b></a> Disquette, CD,
<a href="faq6.html#PXE">R&eacute;seau</a>.

<li><a href="../../fr/mac68k.html"><b>mac68k :</b></a> Install&eacute; (et d&eacute;marr&eacute;) en utilisant
des outils lanc&eacute;s sur Mac OS.
Voir
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.5/mac68k/INSTALL.mac68k">INSTALL.mac68k</a> pour plus
de d&eacute;tails.

<li><a href="../../fr/macppc.html"><b>macppc :</b></a> CD-ROM, R&eacute;seau.

<li><a href="../../fr/mvme68k.html"><b>mvme68k :</b></a> R&eacute;seau, Cassette amor&ccedil;able.

<li><a href="../../fr/mvme88k.html"><b>mvme88k :</b></a> R&eacute;seau, Cassette amor&ccedil;able.

<li><a href="../../fr/sparc.html"><b>sparc :</b></a> Disquette, CD-ROM, R&eacute;seau,
Ecriture d'une image sur une partition swap existante, Cassette amor&ccedil;able.

<li><a href="../../fr/sparc64.html"><b>sparc64 :</b></a> Disquette (U1/U2 uniquement),
CD-ROM, R&eacute;seau, Ecriture d'une image sur une partition existante.

<li><a href="../../fr/vax.html"><b>vax :</b></a> Disquette, R&eacute;seau.

</ul>

Toutes les installations autres que mac68k peuvent aussi utiliser un noyau
<a href="#bsd.rd">bsd.rd</a> lors d'une mise &agrave; jour ou d'une r&eacute;installation.

<p>
Une fois le noyau d&eacute;marr&eacute;, vous avez plusieurs options pour obtenir les
<a href="#FilesNeeded">Packages d'installation</a>.
Une fois de plus, toutes les architectures ne supportent pas toutes ces options.

<ul>
<li><b>CD-ROM :</b> Bien s&ucirc;r, nous pr&eacute;f&eacute;rons que vous utilisiez les
<a href="../../orders.html">CD-ROMS Officiels</a>, mais pour des besoins sp&eacute;ciaux,
vous pouvez aussi cr&eacute;er les v&ocirc;tres.

<li><b>FTP :</b>
L'un des diff&eacute;rents
<a href="../../fr/ftp.html">sites miroirs FTP</a>
OpenBSD ou votre serveur FTP local contenant les packages.

<li><b>HTTP :</b>
L'un des diff&eacute;rents
<a href="../../fr/ftp.html#http">sites miroirs HTTP</a>
OpenBSD ou votre serveur web local contenant les packages.

<li><b>Partition de disque local :</b>
Dans la plupart des cas, vous pouvez installer les packages depuis une autre
partition de votre disque dur local.
Par exemple, sur <a href="../../fr/i386.html">i386</a>,
vous pouvez installer &agrave; partir d'une partition FAT ou d'un CD-ROM format&eacute;
en format ISO9660, Rock Ridge ou Joliet.
Dans certains cas, vous devrez manuellement monter le syst&egrave;me de fichiers avant
de l'utiliser.

<li><b>NFS :</b>
Quelques architectures supportent les montages NFS de packages.

<li><b>Cassette :</b>
Les packages peuvent aussi &ecirc;tre lus depuis une cassette format&eacute;e.
</ul>

<a name="Checklist"></a>
<h2>4.2 - V&eacute;rifications avant l'installation</h2>

<p>
Avant de commencer votre installation, vous devriez avoir une
id&eacute;e de ce que vous aller devoir faire.

Vous devriez conna&icirc;tre ces diff&eacute;rents &eacute;l&eacute;ments au minimum :
<ul>
<li>Nom de la machine
<li>Mat&eacute;riel install&eacute; et disponible
  <ul>
  <li>La compatibilit&eacute; de votre architecture gr&acirc;ce &agrave; la page de compatibilit&eacute;.
  <li>Dans les cas d'utilisation de mat&eacute;riel ISA, vous devrez aussi conna&icirc;tre les param&egrave;tres mat&eacute;riels
      et confirmer qu'ils sont tels qu'OpenBSD les requiert.
  </ul>
<li>La m&eacute;thode d'installation qui sera utilis&eacute;e (CD-ROM, FTP, etc.)
<li>Comment le syst&egrave;me sera-t'il mis &agrave; jour et patch&eacute; ?
  <ul>
  <li>Si cela est fait localement, vous devrez b&eacute;n&eacute;ficier de suffisamment
      <a href="#SpaceNeeded">d'espace libre</a> pour stocker l'arbre des sources
      et le construire.
  <li>Autrement, vous aurez besoin d'acc&eacute;der &agrave; une autre machine pour y construire une
      <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&amp;sektion=8">"release"</a>
      patch&eacute;e.
  </ul>
<li>Partitionnement de disque d&eacute;sir&eacute;.
  <ul>
  <li>Y a t'il des donn&eacute;es &agrave; sauvegarder quelque part ?
  <li>OpenBSD coexistera t'il sur ce syst&egrave;me avec d'autres OS ?
      Si oui, comment seront-il d&eacute;marr&eacute;s ?
      Aurez vous besoin d'installer un gestionnaire de d&eacute;marrage ?
  <li>La totalit&eacute; du disque sera t'elle utilis&eacute;e par OpenBSD ou voulez-vous conserver
      une partition ou un OS (ou de la place pour un autre) ?
  <li>Comment voulez vous partitionner la partie r&eacute;serv&eacute;e &agrave; OpenBSD de votre disque ?
  </ul>
<li>Param&egrave;tres R&eacute;seau, si vous n'utilisez pas DHCP:
  <ul>
  <li>Nom de domaine.
  <li>Adresse des Serveurs de Nom de Domaine (DNS)
  <li>Adresse IP et masque de sous-r&eacute;seau pour chaque NIC
  <li>Adresse de la passerelle
  </ul>
<li>Lancerez vous le syst&egrave;me de fen&ecirc;tres X ?
</ul>


<a name="MkInsMedia"></a>
<h2>4.3 - Cr&eacute;er un m&eacute;dia d'installation OpenBSD amor&ccedil;able</h2>

<p>
Comme exemples, nous allons regarder les images d'installation disponibles pour les
architectures
<a href="../../fr/i386.html">i386</a>
et <a href="../../fr/sparc.html">sparc</a>.

<p>
L'architecture <a href="../../fr/i386.html">i386</a> dispose de quatre images
de disques s&eacute;par&eacute;es parmis lesquelles choisir :

<ul>
<li><b><tt>floppy35.fs</tt></b> (PC de bureau) supporte la plupart
	des NICs PCI et ISA, des adaptateurs IDE et des adaptateurs
	simples SCSI et supporter quelques mat&eacute;riels PCMCIA.
	La <i>plupart</i> des utilisateurs utiliserons cette image.
<li><b><tt>floppyB35.fs</tt></b> (Serveurs) supporte plusieurs contr&ocirc;leurs
	RAID et quelques adaptateurs SCSI courants. Toutefois le support pour
	certains adaptateurs SCSI et plusieurs NICs EISA et ISA a &eacute;t&eacute; retir&eacute;.
<li><b><tt>floppyC35.fs</tt></b> (Portables) supporte les mat&eacute;riels CardBus
	et PCMCIA trouv&eacute;s sur la plupart des portables.
<li><b><tt>cdrom35.fs</tt></b> est, en effet, la combinaison des trois
	disques de d&eacute;marrage. Il peut &ecirc;tre utilis&eacute; pour cr&eacute;er des disquettes
	amor&ccedil;ables de 2.88M, ou plus couramment, comme une image d'amor&ccedil;e
	de CD enregistrables personnalis&eacute;s.
<li><b><tt>cd35.iso</tt></b> est une image ISO9660 qui peut &ecirc;tre utilis&eacute;e
	pour cr&eacute;er un CD amor&ccedil;able avec la plupart des logiciels de cr&eacute;ation
	de CD-ROM sur la plupart des architectures.
        Ce <tt>cdrom35.iso</tt> est un format "pr&ecirc;t-&agrave;-graver".
</ul>

Oui, il peut y avoir des situations dans lesquelles un disque
d'installation est requis pour supporter votre adaptateur SCSI et un
autre disque pour votre adaptateur r&eacute;seau.
Heureusement, ce cas est rare, et peut &ecirc;tre g&eacute;n&eacute;ralement contourn&eacute;.

<p>
L'architecture
<a href="../../fr/sparc.html">sparc</a> dispose de trois images disques
d'installation permis lesquelles choisir :

<ul>
<li><b><tt>floppy35.fs:</tt></b> Supporte les syst&egrave;mes &eacute;quip&eacute;s d'un
  lecteur de disquettes.
<li><b><tt>cd35.iso</tt></b> Une image ISO utilisable pour cr&eacute;er votre
  propre CD afin de d'amorcer les syst&egrave;mes SPARC &agrave; l'aide un CD-ROM.
<li><b><tt>miniroot35.fs</tt></b> Peut &ecirc;tre &eacute;crite sur une partition swap
  et d&eacute;marr&eacute;e.
</ul>

<a name="MkFlop"></a>
<a name="UnixFlop"></a>
<h3>4.3.1 - Cr&eacute;er des disquettes de d&eacute;marrage sur Unix</h3>

<p>
Pour cr&eacute;er une disquette format&eacute;e, utilisez la commande
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdformat&amp;sektion=1&amp;arch=i386">fdformat(1)</a>
pour chacun des formats et recherchez les secteurs d&eacute;fectueux..

<p>
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
  # <b>fdformat /dev/rfd0c</b>
  Format 1440K floppy `/dev/rfd0c'? (y/n): y
  Processing VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV done.
</pre></td></tr> </table>

<p>
Si votre sortie est identique &agrave; celle ci-dessus, votre disque est correct.
Cependant, si vous ne voyez pas tous les "V" alors votre disque est
probablement endommag&eacute; et vous devriez en essayer un autre.

<p>
Notez que certains syst&egrave;mes compatibles UNIX ont des commandes diff&eacute;rentes
pour le formattage des disquettes.
R&eacute;ferrez-vous &agrave; votre documentation syst&egrave;me pour conna&icirc;tre la proc&eacute;dure exacte.

<p>
Une fois que vous avez une disquette propre et format&eacute;e, il est
l'heure d'&eacute;crire l'image d'installation sur celle-ci.
Pour cela, vous pouvez recourir &agrave; l'utilitaire
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=0">dd(1)</a>.
Un exemple d'utilisation de <tt>dd(1)</tt> est fourni ci-dessous :

<p>
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
  # <b>dd if=floppy35.fs of=/dev/rfd0c bs=32k</b>
</pre></td></tr></table>

<p>
Une fois l'image &eacute;crite, v&eacute;rifiez qu'elle &agrave; &eacute;t&eacute; correctement copi&eacute;e et qu'elle
est identique &agrave; l'image d'origine avec la commande
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cmp&amp;sektion=1">cmp(1)</a>.
Si la disquette est identique &agrave; l'image, vous ne verrez qu'une nouvelle invite.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>cmp /dev/rfd0c floppy35.fs</b>
</pre></td> </tr> </table>

<a name="DosFlop"></a>
<h3>4.3.2 - Cr&eacute;er des disquettes de d&eacute;marrage sur Windows ou DOS</h3>

<p>
Cette section d&eacute;crit comment ecrire des images d'installation sur une
disquette &agrave; partir de Windows ou DOS.
Vous pouvez obtenir les utilitaires mentionn&eacute;s ci-dessous depuis le
dossier
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.5/tools/">tools</a>
de n'importe quel miroir FTP, ou depuis le dossier <tt>3.5/tools</tt>
directement sur le CD1 du lot de CD-ROM OpenBSD.

<p>
Pour pr&eacute;parer la disquette sous MS-DOS ou Windows, utilisez tout
d'abord les utilitaires natifs pour formatter le disque.

<p>
Pour &eacute;crire l'image d'installation sur la disquette pr&eacute;par&eacute;e vous
pouvez utiliser
<i>rawrite</i>, <i>fdimage</i>, ou <i>ntrw</i>.
<i>rawrite</i> ne fonctionnera pas sur Windows NT, 2000 ou XP.

<p>
Notez que <tt>FDIMAGE.EXE</tt> et <tt>RAWRITE.EXE</tt> sont toutes deux
des applications MS-DOS, et sont donc limit&eacute;es &agrave; la convention de nomage de
fichiers MS-DOS "8.3".
Comme <tt>floppyB35.fs</tt> et <tt>floppyC35.fs</tt> ont des noms de fichiers
longs, vous devrez trouver comment votre syst&egrave;me a sauvegard&eacute; ces derniers dans
le format "8.3" avant d'utiliser <tt>FDIMAGE.EXE</tt> ou <tt>RAWRITE.EXE</tt>
pour cr&eacute;er les images de disquettes de d&eacute;marrage.

<p>
Exemple d'utilisation de <i>rawrite</i> :
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <b>rawrite</b>
  RaWrite 1.2 - Write disk file to raw floppy diskette

  Enter source file name: <b>floppy35.fs</b>
  Enter destination drive: <b>a</b>
  Please insert a formatted diskette into drive A: and press -ENTER- : <i><b>Enter</b></i>
</pre> </td> </tr> </table>

<p>
Exemple d'utilisation de <i>fdimage</i> :
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>fdimage -q floppy35.fs a:</strong>
</pre></td></tr></table>

<p>
Exemple d'utilisation de <i>ntrw</i> :
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>ntrw floppy35.fs a:</strong>
  3.5", 1.44MB, 512 bytes/sector
  bufsize is 9216
  1474560 bytes written
</pre></td></tr></table>

<a name="MkCD-ROM"></a>
<h3>4.3.3 - Cr&eacute;er un CD-ROM amor&ccedil;able</h3>

<p>
Vous pouvez cr&eacute;er un CD-ROM soit en utilisant le fichier <tt>cd35.iso</tt>,
ou dans le cas de l'architecture i386, vous pouvez aussi utiliser
<tt>cdrom35.fs</tt> comme image de disquette amor&ccedil;able
pour d&eacute;marrer un syst&egrave;me i386 depuis le CD-ROM.
Les d&eacute;tails exacts ici pr&eacute;sents sont laiss&eacute;s au lecteur afin de
l'aider &agrave; se d&eacute;cider sur les outils mis &agrave; sa disposition.

<p>
Voici quelques-uns des outils pr&eacute;sents dans OpenBSD :
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkhybrid&amp;sektion=8">mkhybrid(8)</a>
<li><a href="http://www.fokus.gmd.de/research/cc/glone/employees/joerg.schilling/private/cdrecord.html">cdrecord</a>,
qui est une partie de la collection cdrtools dans le <a href="faq8.html#Ports">Syst&egrave;me de
Ports OpenBSD</a>.
</ul>

<a name="Boot"></a>
<h2>4.4 - D&eacute;marrer le m&eacute;dia d'installation OpenBSD</h2>

<h3>D&eacute;marrer sur i386</h3>

D&eacute;marrer une image d'installation sur l'architecture PC i386 n'est
pas nouveau pour la plupart des gens.
Si vous utilisez une disquette, ins&eacute;rez la simplement dans le lecteur
et d&eacute;marrez le syst&egrave;me.
L'image d'installation va se charger si le d&eacute;marrage depuis la disquette
est activ&eacute; dans votre BIOS.
Si vous souhaitez d&eacute;marrer depuis un CD-ROM, vous devrez allez dans votre BIOS
syst&egrave;me et autoriser le d&eacute;marrage depuis celui-ci.
Quelques anciens BIOS ne supportent pas cette option, et vous
devrez utiliser une disquette pour d&eacute;marrer votre image d'installation.
Ne vous inqui&eacute;tez pas ; bien que vous d&eacute;marriez depuis la disquette, vous
pourrez installer depuis le CD.
<p>
Vous pouvez aussi d&eacute;marrer <a href="#bsd.rd">bsd.rd</a> depuis une
partition OpenBSD existante, ou depuis le r&eacute;seau en utilisant le
<a href="faq6.html#PXE">proc&eacute;d&eacute; de d&eacute;marrage PXE</a>.

<h3>D&eacute;marrer sur sparc/sparc64</h3>

<b>NOTE :</b>
Sur l'architecture <a href="../../fr/sparc64.html">sparc64</a>, seules
les machines SBus (Ultra 1, Ultra 2) sont amor&ccedil;ables depuis une
disquette.

<p>
Pour d&eacute;marrer depuis une disquette, placez la disquette contenant
l'image d'installation OpenBSD dans le lecteur.
Utilisez ensuite la commande suivante pour d&eacute;marrer :

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot floppy</b>
</pre></td></tr></table>

<p>
Pour d&eacute;marrer depuis un CD-ROM, placez le CD-ROM OpenBSD dans le
lecteur.
Si votre Sun n'a qu'un lecteur de CD-ROM, alors allez simplement &agrave;
l'invite de d&eacute;marrage et tapez :

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot cdrom</b>
</pre></td></tr></table>

<p>
Bien s&ucirc;r, cela ne fonctionnera que dans le nouveau mode de commande.
Si vous poss&eacute;dez l'ancien mode de commande (une fl&ecirc;che droite), tapez
'n' pour le nouveau mode de commande.
(Si vous utilisez un ancien sparc qui est ant&eacute;rieur &agrave; sun4c, vous
n'avez probablement pas de nouveau mode de commande.
Dans ce cas, vous allez devoir exp&eacute;rimenter.)

Si vous avez de multiples lecteurs CD-ROM, vous devez d&eacute;marrer depuis le
bon.
Essayez <tt>probe-scsi</tt> depuis le nouveau mode de commande.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>probe-scsi</b>

  Target 0
    Unit 0   Disk     QUANTUM LIGHTNING 365S
  Target 1
    Unit 0   Removable Disk     QUANTUM EMPIRE_1080S
  Target 3
    Unit 0   Removable Disk     Joe's CD-ROM
</pre></td></tr></table>

<p>
Regardez depuis lequel vous souhaitez d&eacute;marrer. Notez le num&eacute;ro
de cible ("Target").

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot /sbus/esp/sd@X,0</b>
</pre></td></tr></table>

<a name="Install"></a>
<h2>4.5 - Installer OpenBSD</h2>
<a name="Start"></a>
<h3>4.5.1 - Commencer l'installation</h3>
<!-- XXXrelease -->
Quelque soit votre m&eacute;thode de d&eacute;marrage, il est temps de l'utiliser.
Pendant la proc&eacute;dure de d&eacute;marrage, le noyau et tous les programmes
utilis&eacute;s pour installer OpenBSD sont charg&eacute;s en m&eacute;moire. Le
probl&egrave;me le plus courant au d&eacute;marrage est une disquette
endommag&eacute;e ou un probl&egrave;me d'alignement de lecteur. La disquette de
d&eacute;marrage est tr&egrave;s compact&eacute;e -- un seul mauvais bloc causera
des probl&egrave;mes.

<p>
A presque tout moment de la proc&eacute;dure d'installation OpenBSD,
vous pouvez arr&ecirc;ter la proc&eacute;dure en frappant CTRL-C et pourrez
la relancer sans red&eacute;marrer en lan&ccirc;ant <tt>install</tt> &agrave; l'invite shell.

<p>
Si votre d&eacute;marrage r&eacute;ussi, vous verrez beaucoup de messages textes
d&eacute;filer.
Ces textes, dans beaucoup d'architectures en blanc sur bleu, repr&eacute;sentent le
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg</a>,
du noyau qui donne les mat&eacute;riels trouv&eacute;s et leur emplacement. Ne vous
souciez pas de retenir ce message, une copie est conserv&eacute;e dans
<tt>/var/run/dmesg.boot</tt>. Sur quelques architectures, SHIFT+PUG va vous permettre
d'examiner le texte ayant d&eacute;fil&eacute; &agrave; l'&eacute;cran.

<p>
Ensuite, vous verrez ce qui suit :

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  rootdev=0x1100 rrootdev=0x2f00 rawdev=0x2f02
  erase ^?, werase ^W, kill ^U, intr ^C, status ^T
  (I)nstall, (U)pgrade or (S)hell? <b>i</b>
</pre></td></tr></table>

<p>
Avec cela, nous atteignons notre premi&egrave;re question. Dans la plupart des
cas, vous avez ces trois options :
<ul>
<li><b>Install :</b> Charge OpenBSD dans le syst&egrave;me, rempla&ccedil;ant un
&eacute;ventuel autre syst&egrave;me se trouvant l&agrave;. Notez qu'il est possible
de laisser certaines partitions intactes dans cette proc&eacute;dure, comme <tt>/home</tt>,
mais dans les autres cas, consid&eacute;rez que tout le reste sera &eacute;cras&eacute;.
<li><b>Upgrade :</b> Installer un nouveau package de <a href="#FilesNeeded">fichiers
d'installation</a> sur cette machine, mais ne remplacer aucune information
de configuration, donn&eacute;e utilisateur ou programme additionnel. Aucun formatage
de disque n'est r&eacute;alis&eacute;, ni le dossier /etc ni /var ne sont remplac&eacute;s.
Quelques notes importantes :
<ul>
<li> Vous n'aurez pas l'option d'installer le package
<tt>etc35.tgz</tt>.
Apr&egrave;s l'installation, vous devrez manuellement greffer
<tt>etc35.tgz</tt> sur votre syst&egrave;me avant qu'il puisse &ecirc;tre compl&egrave;tement
fonctionnel.
C'est une &eacute;tape importante qui doit &ecirc;tre r&eacute;alis&eacute;e, car dans le cas
contraires certains services cl&eacute;s (tel que
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>)
ne d&eacute;marrerons pas.

<li>
La proc&eacute;dure de mise &agrave; jour n'est pas faite pour sauter des "releases" !
Tandis que ce saut fonctionnera souvent, il n'est pas support&eacute;.
Pour OpenBSD 3.5, mettre &agrave; jour de version 3.4 &agrave; la version 3.5 est la
seule mise &agrave; jour support&eacute;e.
Si vous mettez &agrave; jour depuis une version plus vielle, une r&eacute;-installation
compl&egrave;te est recommand&eacute;e.<br>

</ul>

<li><b>Shell :</b> Parfois, vous devez r&eacute;aliser des r&eacute;parations ou de
la maintenance sur un syst&egrave;me qui ne d&eacute;marrera pas (ou ne devra pas
d&eacute;marrer) un noyau normal.
Cette option vous autorisera cette maintenance sur le syst&egrave;me.
</ul>

Parfois, vous ne verrez pas l'option "Upgrade" list&eacute;e.
Apr&egrave;s un &eacute;v&egrave;nement <i>"flag day"</i>, il n'est pas possible de mettre
&agrave; jour directement ; l'on doit recr&eacute;er le syst&egrave;me depuis le d&eacute;but.

<p>
Dans cet exemple, nous allons faire une installation mais la proc&eacute;dure de
mise &agrave; jour est similaire.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Welcome to the OpenBSD/i386 3.5 install program.

  This program will help you install OpenBSD in a simple and rational way. At
  any prompt except password prompts you can run a shell command by typing
  '!foo', or escape to a shell by typing '!'. Default answers are shown in []'s
  and are selected by pressing RETURN. At any time you can exit this program by
  pressing Control-C and then RETURN, but quitting during an install can leave
  your system in an inconsistent state.

  Specify terminal type: [vt220] <b><i>Entr&eacute;e</i></b>
  Do you wish to select a keyboard encoding table? [no] <b><i>Entr&eacute;e</i></b>
</pre></td></tr></table>

<p>
Dans la plupart des cas, le type de terminal par d&eacute;faut est appropri&eacute; ;
cependant si vous utilisez une <a href="faq7.html#SerCon">console s&eacute;rie</a> pour
l'installation, ne prenez pas l'option par d&eacute;faut, r&eacute;pondez de mani&egrave;re
appropri&eacute;e.

<p>
Si ne vous choisissez pas une table d'encodage, une disposition de
clavier US est choisie.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  IS YOUR DATA BACKED UP? As with anything that modifies disk contents, this
  program can cause SIGNIFICANT data loss.

  It is often helpful to have the installation notes handy. For complex disk
  configurations, relevant disk hardware manuals and a calculator are useful.

  Proceed with install? [no] <b>y</b>
</pre></td></tr></table>

<p>
Si vous s&eacute;lectionnez l'option par d&eacute;faut ici, le proccessus
d'installation va se terminer et vous envoyer sur une invite de commande
shell.

<a name="Disks"></a>
<h3>4.5.2 - Configurer les disques</h3>

<p>
Configurer les disques sur OpenBSD varie d&eacute;pendamment des
architectures. Pour
<a href="../../fr/i386.html">i386</a> et <a href="../../fr/macppc.html">macppc</a>,
la configuration est faite en deux &eacute;tapes. D'abord, la partition OpenBSD
du disque dur est d&eacute;finie avec fdisk(8), ensuite cette partition est
divis&eacute;e en partitions OpenBSD avec disklabel(8).

<p>
Quelques utilisateurs peuvent &ecirc;tre d&eacute;sorient&eacute;s par la terminologie
utilis&eacute;e ici. Nous utiliserons le mot "partition" dans deux sens
diff&eacute;rents. Il y a deux niveaux de partitionnement pour certaines
architectures sous OpenBSD, la premi&egrave;re, peut &ecirc;tre consid&eacute;r&eacute;e comme le
partitionnement des Syst&egrave;mes d'Exploitation, qui permet &agrave; de multiples
syst&egrave;mes d'exploitation de d&eacute;finir leur espace sur le disque, et la
seconde d&eacute;finie comment la partition OpenBSD est subdivis&eacute;e en plusieurs
syst&egrave;mes de fichiers individuels. La premi&egrave;re couche est visible comme
une partition de disque pour DOS, Windows ou tout autre syst&egrave;me
d'exploitation pouvant coexister avec d'autres syst&egrave;mes sur les machines
d&eacute;scendantes de l'AT d'IBM. La seconde couche de partitionnement est
visible seulement par OpenBSD et les syst&egrave;mes d'exploitation pouvant
lire directement un syst&egrave;me de fichiers OpenBSD.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Cool!  Let's get to it...

  You will now initialize the disk(s) that OpenBSD will use. To enable all
  available security features you should configure the disk(s) to allow the
  creation of separate filesystems for /, /tmp, /var, /usr, and /home.

  Available disks are: wd0.
  Which one is the root disk? (or done) [wd0] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Le disque "root" est le disque depuis lequel le syst&egrave;me d&eacute;marrera et
normalement sur lequel l'espace "swap" r&eacute;side.
Souvent, ce sera l'option par d&eacute;faut -- si ce n'est pas le cas, vous devrez
savoir comment forcer votre ordinateur &agrave; d&eacute;marrer depuis un disque non standard.
Les disques IDE vont &ecirc;tre d&eacute;sign&eacute;s comme <tt>wd0</tt>, <tt>wd1</tt>, etc., tandis
que les disques SCSI et les mat&eacute;riels RAID appara&icirc;trons comme <tt>sd0</tt>,
<tt>sd1</tt>, et ainsi de suite.
Les disques que OpenBSD peut utiliser sont list&eacute;s ici -- si vous avez
des lecteurs qui ne sont pas montr&eacute;s, votre mat&eacute;riel est soit non
support&eacute;, soit mal configur&eacute;.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you want to use *all* of wd0 for OpenBSD? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Si vous r&eacute;pondez "yes" &agrave; cette question, l'int&eacute;gralit&eacute; du disque sera
allou&eacute;e &agrave; OpenBSD. Le r&eacute;sultat sera un "Master Boot Record" valide et
une table de partition &eacute;crite sur le disque -- une partition, de la
taille du disque entier, configur&eacute; avec le type de partition OpenBSD,
et indiqu&eacute; comme partition amor&ccedil;able. Ce sera un choix courant pour la
plupart des utilisations en production d'OpenBSD ; cependant, il y a
quelques syst&egrave;mes sur lesquels cela ne doit pas &ecirc;tre fait.
La plupart des syst&egrave;mes Compaq, des ordinateurs portables, quelques
DELL et d'autres syst&egrave;mes utilisant une partition "maintenance" ou
"Suspend to Disk", qui devrait &ecirc;tre gard&eacute;e intacte.
Si votre syst&egrave;me a d'autres partitions, quelque soit leur type, que
vous ne voulez pas effacer, ne r&eacute;pondez pas "yes" &agrave; la question
pr&eacute;c&eacute;dente.

<p>
Dans le cas de cet exemple, nous consid&ecirc;rerons que le disque doit
&ecirc;tre partag&eacute; entre OpenBSD et une partition Windows 2000 existante,
donc nous r&eacute;pondrons l'option par d&eacute;faut "no", qui nous enverra dans
le programme
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>.
Vous pouvez obtenir plus d'informations sur fdisk(8)
<a href="../faq14.html#fdisk">ici</a>.

<p>
<b>Note importante :</b>
Les utilisateurs avec un disque de grande capacit&eacute; (plus de 8Go sur un
nouveau i386, cependant sur des vielles machines et diff&eacute;rentes
architectures, souvent plus petites) voudrons surement consulter
<a href="../faq14.html#LargeDrive">cette section</a> avant d'aller
plus loin.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  You will now create a single MBR partition to contain your OpenBSD data. This
  partition must have an id of 'A6'; must *NOT* overlap other partitions; and
  must be marked as the only active partition.

  The 'manual' command describes all the fdisk commands in detail.

  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 06    0   1  1 -  202 239 63 [          63:     3069297 ] DOS > 32MB
   1: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  Enter 'help' for information
  fdisk: 1> <b>help</b>
          help            Command help list
          manual          Show entire OpenBSD man page for fdisk
          reinit          Re-initialize loaded MBR (to defaults)
          setpid          Set the identifier of a given table entry
          disk            Edit current drive stats
          edit            Edit given table entry
          flag            Flag given table entry as bootable
          update          Update machine code in loaded MBR
          select          Select extended partition table entry MBR
          print           Print loaded MBR partition table
          write           Write loaded MBR to disk
          exit            Exit edit of current MBR, without saving changes
          quit            Quit edit of current MBR, saving current changes
          abort           Abort program without saving current changes
  fdisk: 1>
</pre></td></tr></table>

<p>
Quelques commandes doivent &ecirc;tre expliqu&eacute;es :
<ul>
<li><b><tt>r</tt></b> ou <b><tt>reinit :</tt></b> Efface la table
des partitions existantes, cr&eacute;e une grande partition OpenBSD,
la d&eacute;finie active et installe le code MBR OpenBSD.
Cela &eacute;quivaut &agrave; r&eacute;pondre "yes" &agrave; la question
"<tt>use *all* of ...</tt>" pr&eacute;c&eacute;dente.
<li><b><tt>p</tt></b> ou <b><tt>print :</tt></b> Montre la table des
partitions courante en secteurs. "<tt>p m</tt>" montrera la
table en m&eacute;ga-octets, "<tt>p g</tt>" la montrera en
giga-octets.
<li><b><tt>e</tt></b> ou <b><tt>edit :</tt></b> Editer ou modifier
une entr&eacute;e de la table.
<li><b><tt>f</tt></b> ou <b><tt>flag :</tt></b> Marquer une partition
comme active, ce sera celle depuis laquelle le syst&egrave;me d&eacute;marrera.
<li><b><tt>exit</tt></b> et <b><tt>quit :</tt></b> Soyez prudents, car
certains utilisateurs ont l'habitude d'utiliser "exit" et "quit" qui
ont des sens oppos&eacute;s.
</ul>

Il est n&eacute;cessaire de le rappeler, une erreur &agrave; ce stade entrainera
de lourdes pertes de donn&eacute;es. Si vous comptez faire cette manipulation
sur un disque avec des donn&eacute;es importantes, il serait plus judicieux
de vous exercer sur un disque plus "disponible", en plus d'avoir une
bonne sauvegarde.

<p>
Notre disque ici &agrave; une partition de 1.5Go pour Windows 2000
(utilisant le syst&egrave;me de fichiers FAT). En regardant les informations
ci-dessous, nous pouvons voir que la partition Windows occupe le
lecteur jusqu'au cylindre 202. Nous allons donc allouer le reste du
disque &agrave; OpenBSD en commen&ccedil;ant au cylindre 203. Vous pouvez aussi
calculer le secteur de d&eacute;but d'Openbsd &eacute;tant 3069360, en ajoutant
le secteur de d&eacute;but de partition existante (63) et sa taille (3069297).

<p>
Vous pouvez &eacute;diter la disposition du disque sur chaque
Cylindre/T&ecirc;te/Secteur ou simplement en secteurs bruts. Ce qui est
le plus simple d&eacute;pend de ce que l'on fait ; dans notre cas, travailler
autour d'une partition existante, utiliser le format CHS sera
probablement plus simple.
Si vous cr&eacute;ez la premi&egrave;re partition sur le disque, utiliser les
secteurs bruts sera probablement plus ais&eacute;.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk: 1> <b>e 1</b>
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
   1: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>a6</b>
  Do you wish to edit in CHS mode? [n] <b>y</b>
  BIOS Starting cylinder [0 - 2585]: [0] <b>203</b>
  BIOS Starting head [0 - 239]: [0] <b><i>Enter</i></b>
  BIOS Starting sector [1 - 63]: [0] <b>1</b>
  BIOS Ending cylinder [0 - 2585]: [0] <b>2585</b>
  BIOS Ending head [0 - 239]: [0] <b>239</b>
  BIOS Ending sector [1 - 63]: [0] <b>63</b>
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 06    0   1  1 -  202 239 63 [          63:     3069297 ] DOS > 32MB
   1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  fdisk:*1> <b>p m</b>
  Disk: wd0       geometry: 2586/240/63 [19092 Megabytes]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 06    0   1  1 -  202 239 63 [          63:        1499M] DOS > 32MB
   1: A6  203   0  1 - 2585 239 63 [     3069360:       17593M] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0M] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0M] unused
  fdisk:*1>
</pre></td></tr></table>

<a name="trackoffset"></a>
<p>
Il est important que la premi&egrave;re partition saute la premi&egrave;re piste
du disque, dans notre cas, qu'elle commence au secteur <tt>63</tt>.
Si une partition OpenBSD est cr&eacute;e en ayant pour origine le secteur
<tt>0</tt>, la table de partition finira &eacute;cras&eacute;e par le
<a href="../faq14.html#Boot386">"Partition Boot Record"</a> de la
partition OpenBSD.
Le syst&egrave;me sera toujours amor&ccedil;able, mais il sera tr&egrave;s difficile &agrave;
maintenir, et ce type de configuration n'est <i>ni recommand&eacute;
ni support&eacute;</i>.

<p>
Notez que l'invite a chang&eacute;e pour inclure un ast&eacute;risque ('<tt>*</tt>')
indiquant que nous avons des changements non enregistr&eacute;s. Comme nous
pouvons le voir &agrave; partir de la sortie <tt>p&nbsp;m</tt> nous n'avons
pas alt&eacute;r&eacute; notre partition Windows, nous avons correctement allou&eacute;
le reste du disque &agrave; OpenBSD et les partitions ne se chevauchent pas. Nous
avons termin&eacute;. Presque.

<p>
Ce que nous n'avons pas fait est de d&eacute;finir active la partition pour que
la machine l'amorce lors du prochain red&eacute;marrage :

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>f 1</b>
  Partition 1 marked active.
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
   0: 06    0   1  1 -  202 239 63 [          63:     3069297 ] DOS > 32MB
  *1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  fdisk:*1>
</pre></td></tr></table>

<p>
Maintenant, nous sommes pr&ecirc;ts &agrave; enregistrer nos changements :

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>w</b>
  Writing MBR at offset 0.
  wd0: no disk label
  fdisk: 1> <b>q</b>
</pre></td></tr></table>

<p>

<a name="disklabel"></a>
<h3>Cr&eacute;er le "disklabel"</h3>
La prochaine &eacute;tape est d'utiliser
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
pour diviser la partition OpenBSD. Plus de d&eacute;tails concernant disklabel(8)
peuvent &ecirc;tre trouv&eacute;s sur la
<a href="../faq14.html#disklabel">FAQ 14, disklabel</a>.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Here is the partition information you chose:

  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 06    0   1  1 -  202 239 63 [          63:     3069297 ] DOS > 32MB
   1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused

  You will now create an OpenBSD disklabel inside the OpenBSD MBR
  partition. The disklabel defines how OpenBSD splits up the MBR partition
  into OpenBSD partitions in which filesystems and swap space are created.

  The offsets used in the disklabel are ABSOLUTE, i.e. relative to the
  start of the disk, NOT the start of the OpenBSD MBR partition.

  disklabel: no disk label
  WARNING: Disk wd0 has no label. You will be creating a new one.
  
  # using MBR partition 1: type A6 off 3069360 (0x2ed5b0) size 36030960 (0x225c9f0)

  Treating sectors 3069360-39100320 as the OpenBSD portion of the disk.
  You can use the 'b' command to change this.

  Initial label editor (enter '?' for help at any prompt)
  > <b>?</b>
  Available commands:
          p [unit]  - print label.
          M         - show entire OpenBSD man page for disklabel.
          e         - edit drive parameters.
          a [part]  - add new partition.
          b         - set OpenBSD disk boundaries.
          c [part]  - change partition size.
          d [part]  - delete partition.
          D         - set label to default.
          g [d|b]   - Use [d]isk or [b]ios geometry.
          m [part]  - modify existing partition.
          n [part]  - set the mount point for a partition.
          r         - recalculate free space.
          u         - undo last change.
          s [path]  - save label to file.
          w         - write label to disk.
          q         - quit and save changes.
          x         - exit without saving changes.
          X         - toggle expert mode.
          z         - zero out partition table.
          ? [cmnd]  - this message or command specific help.
  Numeric parameters may use suffixes to indicate units:
          'b' for bytes, 'c' for cylinders, 'k' for kilobytes, 'm' for megabytes,
          'g' for gigabytes or no suffix for sectors (usually 512 bytes).
          Non-sector units will be rounded to the nearest cylinder.
  Entering '?' at most prompts will give you (simple) context sensitive help.
  >
</pre></td></tr></table>

<p>
Une fois de plus, certaines commandes doivent &ecirc;tre expliqu&eacute;es :
<ul>
<li><b><tt>p</tt></b> - Montre le partitionnement courant &agrave; l'&eacute;cran, vous pouvez
utiliser les arguments <tt>k, m</tt> ou <tt>g</tt> pour obtenir des
kilo-octets, m&eacute;ga-octets ou giga-octets.

<li><b><tt>D</tt></b> - Efface tout partitionnement existant au pr&eacute;alable, cr&eacute;e
un nouveau partitionnement par d&eacute;faut qui recouvre juste la partition OpenBSD
courante. Ceci peut &ecirc;tre utile si le disque contenait pr&eacute;alablement un
partitionnement, et que la partition OpenBSD avait &eacute;t&eacute; recr&eacute;&eacute;e avec une taille
diff&eacute;rente -- l'ancien partitionnement n'aurais pas &eacute;t&eacute; supprim&eacute;, et aurait
pu &ecirc;tre d&eacute;routant.

<li><b><tt>m</tt></b> - Modifie une entr&eacute;e existante dans un partitionnement.
Ne surestimez pas ce que cette option pourra vous permettre. Alors que vous
pourrez modifier la taille d'une partition "disklabel", cela ne changera
PAS le syst&egrave;me de fichiers sur le disque. Utiliser cette option et
vouloir redimensionner une partition existante est une bonne solution pour
perdre de grandes quantit&eacute;s de donn&eacute;es.

</ul>

<p>
Diviser votre disque proprement est important. La r&eacute;ponse &agrave; la question,
"Comment dois-je partitionner mon syst&egrave;me ?" est "Exactement comme vous
en avez besoin". Cela variera d'applications en applications. Il n'y &agrave;
pas de r&eacute;ponse universelle. Si vous n'&ecirc;tes pas sur de comment vous
voulez partitionner votre syst&egrave;me, regardez
<a href="#SpaceNeeded">cette discussion</a>.

<p>
Dans ce syst&egrave;me, nous avons pr&egrave;s de 17Go disponibles pour OpenBSD. Cela
repr&eacute;sente beaucoup d'espace, et nous n'aurons probablement pas besoin
d'autant. Nous n'utiliserons donc pas les tailles minimales absolues.
Nous pr&eacute;f&eacute;rerons avoir quelques centaines de mega-octets en trop
plut&ocirc;t qu'un kilo-octets en moins.

<p>
Sur le disque "root", deux partitions 'a' et 'b' <b>doivent</b> &ecirc;tre cr&eacute;&eacute;es.
La proc&eacute;dure d'installation ne d&eacute;marrera pas tant que ces deux partitions
ne seront pas disponibles. 'a' sera utilis&eacute;e comme racine du syst&egrave;me de
fichiers (/) et 'b' sera utilis&eacute; comme zone de "swap".

<p>
Apr&egrave;s quelques r&eacute;flexions, nous d&eacute;cidons de cr&eacute;er juste assez de partitions
pour autoriser la cr&eacute;ation des syst&egrave;mes de fichiers s&eacute;par&eacute;s qui est
recommand&eacute;e (<tt>/, /tmp, /var, /usr, /home</tt>) et une partition
de "swap" :
<ul>
<li><i><b>wd0a: /</b></i> (root) - 150Mo.  Devrait &ecirc;tre plus que suffisant.
<li><i><b>wd0b: </b></i>(swap) - 300Mo.
<li><i><b>wd0d: /tmp</b></i> - 120Mo.  <tt>/tmp</tt> utilis&eacute; pour construire
  certains logiciels, 120Mo sera probablement suffisant pour la plupart des
  utilisations.
<li><i><b>wd0e: /var</b></i> - 80Mo. Si ce f&ucirc;t un serveur web ou de mail,
  nous aurions fait une partition plus large, mais, ce n'est pas ce que
  nous souhaitons r&eacute;aliser.
<li><i><b>wd0g: /usr</b></i> - 2Go. Nous voulons que cette partition sois
  assez grande pour charger quelques applications utilisateurs, et en plus
  &ecirc;tre capable de mettre &agrave; jour et reconstruire le syst&egrave;me si voulu ou
  n&eacute;cessaire. La
  <a href="../../fr/ports.html">Racine des "Ports"</a> sera tr&egrave;s bien ici, occupant
  moins de 100Mo avant la construction des "ports".
<li><i><b>wd0h: /home</b></i> - 4Go. Cela permettra l'abondance de fichiers
  utilisateurs.
</ul>

Maintenant, si vous ajoutez tout cela, vous verrez que plus de 10Go d'espace
est inutilis&eacute; ! De l'espace inutilis&eacute; ne d&eacute;range en rien, et donne la
flexibilit&eacute; d'agrandir une de nos partitions dans le futur si le besoin
se fait sentir. Vous voulez plus de <i>/tmp</i> ? Pas de probl&egrave;mes, cr&eacute;ez
en un nouveau dans l'espace non utilis&eacute;, changez le <i>/etc/fstab</i> et le
probl&egrave;me est r&eacute;gl&eacute;.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>p m</b>
  device: /dev/rwd0c
  type: ESDI
  disk: ESDI/IDE disk
  label: ST320011A
  bytes/sector: 512
  sectors/track: 63
  tracks/cylinder: 16
  sectors/cylinder: 1008
  cylinders: 16383
  total sectors: 39102336
  free sectors: 36030960
  rpm: 3600

  16 partitions:
  #        size   offset    fstype   [fsize bsize   cpg]
    a: 17593.2M  1498.7M    unused        0     0
    c: 19092.9M     0.0M    unused        0     0
    i:  1498.7M     0.0M     MSDOS
  > <b>d a</b>
  > <b>a a</b>
  offset: [3069360] <b><i>Enter</i></b>
  size: [36030960] <b>150M</b>
  Rounding to nearest cylinder: 307440
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/</b>
  > <b>a b</b>
  offset: [3376800] <b><i>Enter</i></b>
  size: [35723520] <b>300M</b>
  Rounding to nearest cylinder: 614880
  FS type: [swap] <b><i>Enter</i></b>
  > <b>a d</b>
  offset: [3991680] <b><i>Enter</i></b>
  size: [35108640] <b>120m</b>
  Rounding to nearest cylinder: 245952
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/tmp</b>
  > <b>a e</b>
  offset: [4237632] <b><i>Enter</i></b>
  size: [34862688] <b>80m</b>
  Rounding to nearest cylinder: 164304
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/var</b>
  > <b>a g</b>
  offset: [4401936] <b><i>Enter</i></b>
  size: [34698384] <b>2g</b>
  Rounding to nearest cylinder: 4194288
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr</b>
  > <b>a h</b>
  offset: [8596224] <b><i>Enter</i></b>
  size: [30504096] <b>4g</b>
  Rounding to nearest cylinder: 8388576
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/home</b>
  > <b>p m</b>
  device: /dev/rwd0c
  type: ESDI
  disk: ESDI/IDE disk
  label: ST320011A
  bytes/sector: 512
  sectors/track: 63
  tracks/cylinder: 16
  sectors/cylinder: 1008
  cylinders: 16383
  total sectors: 39102336
  free sectors: 22115520
  rpm: 3600

  16 partitions:
  #        size   offset    fstype   [fsize bsize   cpg]
    a:   150.1M  1498.7M    4.2BSD     1024  8192    16  # /
    b:   300.2M  1648.8M      swap
    c: 19092.9M     0.0M    unused        0     0
    d:   120.1M  1949.1M    4.2BSD     1024  8192    16  # /tmp
    e:    80.2M  2069.2M    4.2BSD     1024  8192    16  # /var
    g:  2048.0M  2149.4M    4.2BSD     1024  8192    16  # /usr
    h:  4096.0M  4197.4M    4.2BSD     1024  8192    16  # /home
    i:  1498.7M     0.0M     MSDOS
  > <b>q</b>
  Write new label?: [y] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Vous noterez qu'il y a une partition <i>c</i> que nous avons vraissemblablement
ignor&eacute;e. Cette partition repr&eacute;sente votre disque entier ; n'essayez pas de la
modifier. Vous noterez aussi que la partition <i>i</i> n'as pas &eacute;t&eacute; d&eacute;finie par
nous ; elle est la partition existante Windows 2000. Les partitions n'ont pas de
lettre pr&eacute;d&eacute;finie particuli&egrave;re -- &agrave; l'exception de <i>a</i> (racine),
<i>b</i> (swap) et <i>c</i> (disque entier), le reste des partitions (jusqu'a
la lettre <i>p</i>) est disponible pour l'utilisation que vous d&eacute;sirez en faire.

<p>
Si vous regardez de pr&egrave;s &agrave; la sortie de disklabel, vous verrez que le taux
de "RPM" est probablement faux. Ceci est historique ; la vitesse du disque
n'est utilis&eacute;e nulle part dans le syst&egrave;me. Ne vous inqui&eacute;tez pas de cela.

<h3>Configurez vos points de montage et formatez vos syst&egrave;mes de fichiers</h3>

Maintenant vient la configuration finale de vos points de montage. Si vous les
avez configur&eacute;s &agrave; travers
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>,
cette &eacute;tape consiste juste en la v&eacute;rification de vos s&eacute;lections ; autrement,
vous pouvez le sp&eacute;cifier maintenant.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  The root filesystem will be mounted on wd0a.
  wd0b will be used for swap space.
  Mount point for wd0d (size=122976k), none or done? [/tmp] <b><i>Enter</i></b>
  Mount point for wd0e (size=82152k), none or done? [/var] <b><i>Enter</i></b>
  Mount point for wd0g (size=2097144k), none or done? [/usr] <b><i>Enter</i></b>
  Mount point for wd0h (size=4194288k), none or done? [/home] <b><i>Enter</i></b>
  Mount point for wd0d (size=122976k), none or done? [/tmp] <b>done</b>
  Done - no available disks found.

  You have configured the following partitions and mount points:

  wd0a /
  wd0d /tmp
  wd0e /var
  wd0g /usr
  wd0h /home

  The next step creates a filesystem on each partition, ERASING existing data.
  Are you really sure that you're ready to proceed? [no] <b>y</b>
  /dev/rwd0a:     307440 sectors in 305 cylinders of 16 tracks, 63 sectors
          150.1MB in 20 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
  /dev/rwd0d:     245952 sectors in 244 cylinders of 16 tracks, 63 sectors
          120.1MB in 16 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
  /dev/rwd0e:     164304 sectors in 163 cylinders of 16 tracks, 63 sectors
          80.2MB in 11 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
  /dev/rwd0g:     4194288 sectors in 4161 cylinders of 16 tracks, 63 sectors
          2048.0MB in 261 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
  /dev/rwd0h:     8388576 sectors in 8322 cylinders of 16 tracks, 63 sectors
          4096.0MB in 521 cyl groups (16 c/g, 7.88MB/g, 1920 i/g)
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local, ctime=Thu Oct 10 21:
  50:36 2 002)
  /dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid,
   ctime=Thu Oct 10 21:50:36 2002)
  /dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid,
  ctime=Thu Oct 10 21:50:36 2002)
  /dev/wd0g on /mnt/usr type ffs (rw, asynchronous, local, nodev, ctime=Th
  u Oct 10 21:50:36 2002)
  /dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid,
  ctime=Th u Oct 10 21:50:36 2002)
</pre></td></tr></table>

<p>
Vous devez vous demander pourquoi la proc&eacute;dure d'installation vous
demande encore vos points de montage. Cela vous permet de vous abolir d'erreurs ou
omissions sur les points de montage sp&eacute;cifi&eacute;s pendant la cr&eacute;ation du
partitionnement. Par exemple, la proc&eacute;dure d'installation va
automatiquement supprimer les points de montages identiques que
vous avez entr&eacute;s lors du partionnement. Le programme "disklabel" vous
autorisera de telles erreurs, ils doivent donc &ecirc;tre v&eacute;rifi&eacute;s
apr&egrave;s la terminaison du programme "disklabel". Les points de
montages en doubles qui ont &eacute;t&eacute; supprim&eacute;s deviendrons des
partitions sans point de montage, auxquelles vous devez assigner de nouveaux points de
montage si vous souhaitez utiliser l'espace.

<p>
Notez que la question "Are you really sure that you are ready to proceed?"
a pour r&eacute;ponse par d&eacute;faut "no", vous devrez donc
d&eacute;lib&eacute;r&eacute;ment lui indiquer de d&eacute;marrer la proc&eacute;dure
et de formatter vos partitions. Si vous choisissez "no", vous serez simplement
renvoy&eacute; vers une invite de commande shell et pourrez relancer l'installation
en tapant la commande "install", ou en red&eacute;marrant simplement depuis votre
m&eacute;dia d'amor&ccedil;age.

<p>
A ce moment tous les syst&egrave;mes de fichiers sont format&eacute;s pour vous. Cela
peut prendre un certain temps, d&eacute;pendamment de la taille des partitions
et de la vitesse du disque.

<a name="Hostname"></a>
<h3>4.5.3 - Configurer le nom d'h&ocirc;te du syst&egrave;me ("hostname")</h3>
<p>
Vous devez maintenant configurer le nom d'h&ocirc;te du syst&egrave;me ("hostname").

Cette valeur, avec le nom de domaine DNS (sp&eacute;cifi&eacute;
<a href="#Network">ci-dessous</a>), sera sauv&eacute;e dans le fichier
<tt>/etc/myname</tt>, qui est utilis&eacute; pendant le d&eacute;marrage normal pour
configurer le nom d'h&ocirc;te du syst&egrave;me.
Si vous ne configurez pas le nom de domaine du syst&egrave;me, la valeur par
d&eacute;faut 'my.domain' sera utilis&eacute;e.

<p>
Il est important de configurer ce nom maintenant, car il sera utilis&eacute;
lorsque que les cl&eacute;s cryptographiques n&eacute;cessaires au syst&egrave;me serons g&eacute;n&eacute;r&eacute;es
lors du premier d&eacute;marrage suivant l'installation. Cette g&eacute;n&eacute;ration
intervient que le r&eacute;seau soit configur&eacute; ou pas.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Enter system hostname (short form, e.g. 'foo'): <b>puffy</b>
</pre></td></tr></table>

<a name="Network"></a>
<h3>4.5.4 - Configurer le r&eacute;seau</h3>

<p>
Maintenant il est temps de configurer votre r&eacute;seau. Le r&eacute;seau doit
&ecirc;tre configur&eacute; si vous voulez proc&eacute;der &agrave; une installation
par FTP ou NFS car elle sera bas&eacute;e sur les informations que vous aller entrer.
Voici une entrevue de la section de configuration r&eacute;seau de la
proc&eacute;dure d'installation.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Configure the network? [yes] <b><i>Enter</i></b>
  Available interfaces are: fxp0.
  Which one do you wish to initialize? (or 'done') [fxp0] <b><i>Enter</i></b>
  Symbolic (host) name for fxp0? [puffy] <b><i>Enter</i></b>
  The default media for fxp0 is
          media: Ethernet autoselect (100baseTX full-duplex)
  Do you want to change the default media? [no] <b><i>Enter</i></b>
  IP address for fxp0? (or 'dhcp') <b>199.185.137.55</b>
  Netmask? [255.255.255.0] <b><i>Enter</i></b>
  Done - no available interfaces found.
  DNS domain name? (e.g. 'bar.com') [my.domain] <b>example.com</b>
  DNS nameserver? (IP address or 'none') [none] <b>199.185.137.1</b>
  Use the nameserver now? [yes] <b><i>Enter</i></b>
  Default route? (IP address, 'dhcp' or 'none') <b>199.185.137.128</b>
  add net default: gateway 199.185.137.128
  Edit hosts with ed? [no] <b><i>Enter</i></b>
  Do you want to do any manual network configuration? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Dans l'exemple pr&eacute;c&eacute;dent nous utilisons une adresse IP statique. Comme
indiqu&eacute;, il est possible d'utiliser le "<tt>dhcp</tt>" &agrave; la place sur la
plupart des architectures (sauf <a href="../../fr/alpha.html">Alpha</a>), si votre
environnement le supporte. Dans le cas du DHCP, la plupart des informations
seront obtenues depuis le serveur distant DHCP ; vous aurez la possibilit&eacute;
de les confirmer. Voici un exemple de configuration r&eacute;seau, cette fois cela
est r&eacute;alis&eacute; en utilisant DHCP :

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Configure the network? [yes] <b><i>Enter</i></b>
  Available interfaces are: fxp0.
  Which one do you wish to initialize? (or 'done') [fxp0] <b><i>Enter</i></b>
  Symbolic (host) name for fxp0? [puffy] <b><i>Enter</i></b>
  The default media for fxp0 is
          media: Ethernet autoselect (100baseTX full-duplex)
  Do you want to change the default media? [no] <b><i>Enter</i></b>
  IP address for fxp0? (or 'dhcp') <b>dhcp</b>
  Issuing hostname-associated DHCP request for fxp0.
  Internet Software Consortium DHCP Client 2.0pl5-OpenBSD
  Listening on BPF/fxp0/00:08:c7:77:b4:6b
  Sending on   BPF/fxp0/00:08:c7:77:b4:6b
  Sending on   Socket/fallback/fallback-net
  DHCPDISCOVER on fxp0 to 255.255.255.255 port 67 interval 1
  DHCPOFFER from 199.185.137.128
  DHCPREQUEST on fxp0 to 255.255.255.255 port 67
  DHCPACK from 199.185.137.128 
  New Network Number: 199.185.137.0
  New Broadcast Address: 199.185.137.255
  bound to 199.185.137.55 -- renewal in 43200 seconds.
  Done - no available interfaces found.
  DNS domain name? (e.g. 'bar.com') [example.org] <b><i>Enter</i></b>
  DNS nameserver? (IP address or 'none') [199.185.137.1] <b><i>Enter</i></b>
  Use the nameserver now? [yes] <b><i>Enter</i></b>
  Default route? (IP address, 'dhcp' or 'none') [199.185.137.128] <b><i>Enter</i></b>
  add net default: gateway 199.185.137.128
  Edit hosts with ed? [no] <b><i>Enter</i></b>
  Do you want to do any manual network configuration? [no] <b><i>Enter</i></b>
</pre></td></tr></table>
<p>
<b>NOTE : </b><b>Une</b> seule interface peut &ecirc;tre facilement
configur&eacute;e en utilisant DHCP pendant l'installation. Si vous essayez
de configurer plus d'une interface en utilisant DHCP vous allez au devant
d'erreurs. Vous devrez configurer manuellement les autres interfaces apr&egrave;s
l'installation.

<p>
Maintenant, configurez le mot de passe pour le compte root :
<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
Password for root account? (will not echo) <b><i>pAssWOrd</i></b>
Password for root account? (again) <b><i>pAssWOrd</i></b>
</pre></td></tr></table>
<p>
Utilisez un mot de passe s&eacute;curis&eacute; pour le compte root. Vous cr&eacute;erez
d'autres comptes utilisateurs apr&egrave;s le d&eacute;marrage du syst&egrave;me.
Extrait de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=1">passwd(1)</a>:
<pre>
    The new password should be at least six characters long and not purely
    alphabetic.  Its total length must be less than _PASSWORD_LEN (currently
    128 characters).  A mixture of both lower and uppercase letters, numbers,
    and meta-characters is encouraged.
</pre>

<a name="InstMedia"></a>
<h3>4.5.5 - Choisir le m&eacute;dia d'installation</h3>

<p>
Une fois que votre r&eacute;seau sera configur&eacute;, le script d'installation vous
donnera la possibilit&eacute; de faire des ajustements manuels &agrave; la configuration.
Ensuite les syst&egrave;mes de fichiers que vous avez cr&eacute;&eacute;s seront mont&eacute;s et le
mot de passe root configur&eacute;. Cela pr&eacute;parera vos disques &agrave; l'installation
des packages de fichiers OpenBSD.

<p>
Ensuite, vous aurez la possibilit&eacute; de choisir le m&eacute;dia d'installation.
Les options sont list&eacute;es ci-dessous.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  You will now specify the location and names of the install sets you want to
  load. You will be able to repeat this step until all of your sets have been
  successfully loaded. If you are not sure what sets to install, refer to the
  installation notes for details on the contents of each.

  Sets can be located on a (m)ounted filesystem; a (c)drom, (d)isk or (t)ape
  device; or a (f)tp, (n)fs or (h)ttp server.
  Where are the install sets? <b>c</b>
  Available CD-ROMs are: cd0.
</pre></td></tr></table>

<p>
Dans cet exemple nous installons depuis le CD-ROM. Cela nous donnera une
liste des mat&eacute;riels sur notre machine identifi&eacute;s comme lecteurs de
CD-ROM. La plupart des gens n'en auront qu'un. Si vous en avez besoin,
soyez s&ucirc;r d'indiquer le bon mat&eacute;riel que vous souhaitez utiliser pour
installer OpenBSD.

<p>
<b>NOTE : </b>Toutes les sources possibles sont list&eacute;es, mais toutes ne
sont pas forcement disponibles sur votre syst&egrave;me. Ex. (N)fs est montr&eacute;
mais toutes les architectures n'autorisent pas les installations NFS.
Si vous choisissez une source qui n'est pas disponnible, vous recevrez
un message d'erreur et vous aurez la possibilit&eacute; de choisir une autre
source pour vos packages d'installation.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available CD-ROMs are: cd0.
  Which one contains the install media? (or 'done') [cd0] <b><i>Enter</i></b>

  Pathname to the sets?  (or 'done') [3.5/i386] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Ici, on vous demande dans quel dossier se trouvent les fichiers
d'installation, celui-ci est <tt>3.5/i386/</tt> sur les CD-ROM officiels.

<a name="Filesets"></a>
<h3>4.5.6 - Choisir les packages</h3>

<p>
Maintenant il est temps de choisir quels packages vous aller installer.
Vous pouvez avoir une description de ces fichiers dans
<a href="#FilesNeeded">la section suivante</a>. Les fichiers que le
programme d'installation d&eacute;tecte sont montr&eacute;s &agrave; l'&eacute;cran.
Votre travail est simplement de sp&eacute;cifier quels fichiers vous souhaitez
installer. Par d&eacute;faut tous les packages ne concernant pas X sont
s&eacute;lectionn&eacute;s ; cependant, certaines personnes peuvent
pr&eacute;f&eacute;rer se limiter au strict minimum requis pour d&eacute;marrer
OpenBSD, qui devrait &ecirc;tre <tt>base35.tgz</tt>,
<tt>etc35.tgz</tt> et <tt>bsd</tt>.
D'autres vondrons installer tous les packages. L'exemple suivant est
celui d'une installation compl&egrave;te.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  The following sets are available. Enter a filename, 'all' to select
  all the sets, or 'done'. You may de-select a set by prepending a '-'
  to its name.

          [X] bsd
          [ ] bsd.rd
          [X] base35.tgz
          [X] etc35.tgz
          [X] misc35.tgz
          [X] comp35.tgz
          [X] man35.tgz
          [X] game35.tgz
          [ ] xbase35.tgz
          [ ] xshare35.tgz
          [ ] xfont35.tgz
          [ ] xserv35.tgz

  File Name? (or 'done') [bsd.rd] <b>all</b>

  The following sets are available. Enter a filename, 'all' to select
  all the sets, or 'done'. You may de-select a set by prepending a '-'
  to its name.

          [X] bsd
          [X] bsd.rd
          [X] base35.tgz
          [X] etc35.tgz
          [X] misc35.tgz
          [X] comp35.tgz
          [X] man35.tgz
          [X] game35.tgz
          [X] xbase35.tgz
          [X] xshare35.tgz
          [X] xfont35.tgz
          [X] xserv35.tgz
</pre></td></tr></table>

<p>
Vous pouvez faire toutes sortes de combinaisons ici -- <tt>-x*</tt>
d&eacute;selectionnera tous les composants X. Dans notre cas, nous allons
installer tous les packages. Bien que le syst&egrave;me se lancera avec un
minimum de packages, la s&eacute;lection par d&eacute;faut ou une installation
compl&egrave;te sont recommand&eacute;es.
Plus de d&eacute;tails sur la s&eacute;lection des packages sont disponibles
<a href="#FilesNeeded">ici</a>.

<p>
Une fois que vous avez choisi les packages que vous d&eacute;sirez, il vous
sera demand&eacute; si vous &ecirc;tes d'accord pour d&eacute;compresser puis
installer ces derniers. Une barre de progression sera affich&eacute;e
pour vous informer du temps n&eacute;cessaire. Les temps varient
ennorm&eacute;ment en fonction du syst&egrave;me sur lequel vous installez OpenBSD,
les packages que vous avez s&eacute;lectionn&eacute; et la vitesse du m&eacute;dia source.
Cela va de quelques minutes &agrave; plusieurs heures.

<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  File Name? (or 'done') [done] <b><i>Enter</i></b>
  Ready to install sets? [yes] <b><i>Enter</i></b>
  Getting bsd ...
  100% |**************************************************|  4735 KB    00:03
  Getting bsd.rd ...
  100% |**************************************************|  4275 KB    00:02
  Getting base35.tgz ...
  100% |**************************************************| 30267 KB    00:21
  Getting etc35.tgz ...
  100% |**************************************************|  1545 KB    00:01
  Getting misc35.tgz ...
  100% |**************************************************|  1909 KB    00:01
  Getting comp35.tgz ...
  100% |**************************************************| 17074 KB    00:13
  Getting man35.tgz ...
  100% |**************************************************|  6139 KB    00:04
  Getting game35.tgz ...
  100% |**************************************************|  2534 KB    00:01
  Getting xbase35.tgz ...
  100% |**************************************************| 10940 KB    00:06
  Getting xshare35.tgz ...
  100% |**************************************************|  1656 KB    00:02
  Getting xfont35.tgz ...
  100% |**************************************************| 31160 KB    00:21
  Getting xserv35.tgz ...
  100% |**************************************************| 15228 KB    00:11

  Sets can be located on a (m)ounted filesystem; a (c)drom, (d)isk or (t)ape
  device; or a (f)tp, (n)fs or (h)ttp server.
  Where are the install sets? (or 'done')
</pre></td></tr></table>

<p>
A ce point, vous pouvez sp&eacute;cifier des fichiers additionnels venant
d'autres sources (incluant <a href="#site">les packages personnalis&eacute;s</a>)
si vous le souhaitez, ou tapez '<tt>done</tt>' si vous avez install&eacute;
tous les packages dont vous avez besoin.

<a name="Finish"></a>
<h3>4.5.7 - Terminer l'installation</h3>

Ensuite, plusieurs questions vous seront pos&eacute;es concernant les param&egrave;tres
de votre syst&egrave;me une fois install&eacute;.
La premi&egrave;re est si
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8">sshd(8)</a>
doit &ecirc;tre lanc&eacute; au d&eacute;marrage.
La plupart du temps, vous souhaiterez que sshd(8) se lance, mais
occasionnellement vous ne le souhaiterez pas. Si votre configuration
n'a aucune n&eacute;cessit&eacute; de sshd(8), il y a un petit avantage de
s&eacute;curit&eacute; th&eacute;orique &agrave; ne pas le lancer.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you wish sshd(8) to be started by default? [yes] <b>y</b>
</pre></td></tr></table>

<p>
On vous demande maintenant si vous souhaitez lancer X sur votre
syst&egrave;me. Si vous r&eacute;pondez 'Y', <tt>/etc/sysctl.conf</tt> sera modifi&eacute; pour
inclure la ligne <tt>machdep.allowaperture=1</tt> ou <tt>machdep.allowaperture=2</tt>,
d&eacute;pendamment de votre architecture.
Sous certaines architectures cette question ne sera pas pos&eacute;e du tout.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you expect to run the X Window System? [yes] <b>y</b>
</pre></td></tr></table>

<p>
Votre derni&egrave;re t&acirc;che est d'entrer votre "time zone". D&eacute;pendemment
de l'endroit o&ugrave; votre machine r&eacute;side, il peut y avoir plusieurs
r&eacute;ponses &eacute;quivalentes &agrave; la question. Dans l'exemple suivant,
nous utilisons <tt>US/Eastern</tt>, mais l'on pourrait aussi utiliser
<tt>EST5EDT</tt> ou <tt>US/Michigan</tt> et obtenir le m&ecirc;me r&eacute;sultat.
Appuyer sur <tt>?</tt> &agrave; l'invite vous aidera dans vos choix.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Saving configuration files......done.
  Generating initial host.random file ......done.
  What timezone are you in? ('?' for list) [US/Pacific] <b>?</b>
  Africa/      Chile/       GB-Eire      Israel       NZ-CHAT      Turkey
  America/     Cuba         GMT          Jamaica      Navajo       UCT
  Antarctica/  EET          GMT+0        Japan        PRC          US/
  Arctic/      EST          GMT-0        Kwajalein    PST8PDT      UTC
  Asia/        EST5EDT      GMT0         Libya        Pacific/     Universal
  Atlantic/    Egypt        Greenwich    MET          Poland       W-SU
  Australia/   Eire         HST          MST          Portugal     WET
  Brazil/      Etc/         Hongkong     MST7MDT      ROC          Zulu
  CET          Europe/      Iceland      Mexico/      ROK          posix/
  CST6CDT      Factory      Indian/      Mideast/     Singapore    posixrules
  Canada/      GB           Iran         NZ           SystemV/     right/
  What timezone are you in? ('?' for list) [US/Pacific] <b>US</b>
  What sub-timezone of 'US' are you in? ('?' for list) <b>?</b>
  Alaska          Central         Hawaii          Mountain        Samoa
  Aleutian        East-Indiana    Indiana-Starke  Pacific
  Arizona         Eastern         Michigan        Pacific-New
  Select a sub-timezone of 'US' ('?' for list): <b>Eastern</b>
  Setting local timezone to 'US/Eastern'...done.
</pre></td></tr></table>

Si vous &ecirc;tes int&eacute;ress&eacute; par un horodatage vraiment pr&eacute;cis, vous devriez
lire <a href="faq8.html#NTPerror">ceci</a>.

<p>
Les &eacute;tapes suivantes permettent au syst&egrave;me de cr&eacute;er le dossier
<tt>/dev</tt> (ce qui pourra prendre du temps sur certains syst&egrave;mes,
surtout si vous avez peu de RAM), et installer les blocs
d'amorce.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Making all device nodes...done.
  Installing boot block...
  boot: /mnt/boot
  proto: /usr/mdec/biosboot
  device: /dev/rwd0c
  /usr/mdec/biosboot: entry point 0
  proto bootblock size 512
  room for 12 filesystem blocks at 0x16f
  Will load 7 blocks of size 8192 each.
  Using disk geometry of 63 sectors and 240 heads.
   0:  9 @(203 150 55) (3078864-3078872)
   1: 63 @(203 151 1) (3078873-3078935)
   2: 24 @(203 152 1) (3078936-3078959)
   3: 16 @(203 8 47) (3069910-3069925)
  /mnt/boot: 4 entries total
  using MBR partition 1: type 166 (0xa6) offset 3069360 (0x2ed5b0)
  ...done.

  CONGRATULATIONS! Your OpenBSD install has been successfully completed!
  To boot the new system, enter halt at the command prompt. Once the
  system has halted, reset the machine and boot from the disk.
  # <b>halt</b>
  syncing disks... done

  The operating system has halted.
  Please press any key to reboot.
</pre></td></tr></table>

<p>
OpenBSD est maintenant install&eacute; sur votre syst&egrave;me et pr&ecirc;t pour son
premier d&eacute;marrage, mais avant cela...

<p>

<h4>Avant de red&eacute;marrer</h4>
A ce point, votre syst&egrave;me est install&eacute; et pr&ecirc;t &agrave; &ecirc;tre red&eacute;marr&eacute; et
configur&eacute; pour votre service. Avant de faire cela, cependant, il serait
sage de consulter la <a href="../../fr/errata.html">page d'Errata</a> pour voir
s'il existe des bugs qui vous pourraient vous concerner.

<h4>Apr&egrave;s avoir red&eacute;marr&eacute;</h4>

<p>
Une des premi&egrave;res choses que vous devrez lire apr&egrave;s avoir install&eacute; votre
syst&egrave;me est
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8">afterboot(8)</a>.

<p>
Vous devriez aussi trouver ces diff&eacute;rents liens utiles :
<ul>
<li><a href="faq10.html#AddDelUser">Ajouter des utilisateurs sur OpenBSD</a>
<li><a href="faq6.html#Setup">Configuration initiale du r&eacute;seau</a>
<li><a href="faq2.html#ManPages">Page des manuels de commandes populaires/utiles</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi">Page de manuel OpenBSD sur le web</a>
<li><a href="../../fr/ports.html">Le syst&egrave;me de Ports et de Packages OpenBSD pour installer
  des logiciels</a>, aussi bien que <a href="faq8.html#Ports">ceci</a> et
  <a href="faq8.html#Packages">ceci</a>
</ul>

<h4>Une derni&egrave;re chose...</h4>
Les d&eacute;veloppeurs OpenBSD vous demandent de leur
<a href="#SendDmesg">Envoyer une copie de votre "dmesg"</a>. Celle-ci est
vraiment utile &agrave; ces derniers, et au final, &agrave; tous les
utilisateurs.

<p>
<a name= "FilesNeeded"></a>
<h2>4.6 - Quels sont les fichiers n&eacute;cessaires &agrave; l'installation ?</h2>
<!-- XXXrelease -->

<p>
L'installation compl&egrave;te d'OpenBSD est divis&eacute;e en plusieurs <i>packages
de fichiers</i> s&eacute;par&eacute;s. Toutes les utilisations ne requi&egrave;rent pas
tous les packages. Voici une vue d'ensemble de chacun :
<p>
<ul>
  <li><b><i>bsd</i></b>          - Ceci est le noyau. <b>Requis</b>
  <li><b><i>bsd.mp</i></b>          - Noyau pour les syst&egrave; multi-processeurs
  (SMP) (seulement disponible pour quelques plateformes, uniquement <i>-current</i>)
  <li><b><i>bsd.rd</i></b> - <a href="#bsd.rd">Kernel de disque RAM</a>
  <li><b><i>base35.tgz</i></b>   - Contient le syst&egrave;me de base OpenBSD
    <b>Requis</b>
  <li><b><i>etc35.tgz</i></b>    - Contient tous les fichiers de /etc
    <b>Requis</b>
  <li><b><i>comp35.tgz</i></b>    - Contient le compilateur et ses
    outils, en-t&ecirc;tes et librairies <b>Recommand&eacute;</b>
  <li><b><i>man35.tgz</i></b>    - Contient les pages de manuels <b>Recommand&eacute;</b>
  <li><b><i>misc35.tgz</i></b>   - Contient diff&eacute;rentes informations et documentations
    de configuration
  <li><b><i>game35.tgz</i></b>   - Contient les jeux pour OpenBSD
  <li><b><i>xbase35.tgz</i></b>  - Contient l'installation de base pour X11
  <li><b><i>xetc35.tgz</i></b>   - Contient les fichiers de configuration /etc/X11 et /etc/fonts (uniquement <i>-current</i>)
  <li><b><i>xfont35.tgz</i></b>  - Contient le serveur de fontes X11 et les fontes
  <li><b><i>xserv35.tgz</i></b>  - Contient les serveur X de X11
  <li><b><i>xshare35.tgz</i></b> - Contient les pages de manuels, les options de localisations,
    les inclusions, etc. pour X
</ul>

Les packages <b>etc35.tgz</b> et <b>xetc35.tgz</b> ne sont pas install&eacute;s lors
d'une mise &agrave; mais uniquement lors d'une installation compl&egrave;te, de ce fait,
toute configuration que vous ferez sera conserv&eacute;e.
Vous devrez mettre &agrave; jour vos dossiers <tt>/etc</tt>, <tt>/dev</tt> et
<tt>/var</tt> manuellement.

<p>
<a name= "SpaceNeeded"></a>
<h2>De combien d'espace disque ai-je besoin pour une installation OpenBSD ?</h2>
<!-- XXXrelease -->

<p>
Ce qui suit est le minimum sugg&eacute;r&eacute; pour les tailles de syst&egrave;me de fichiers
lors d'une installation compl&egrave;te. Les chiffres incluent un peu d'espace
suppl&eacute;mentaire vous permettant de lancer un syst&egrave;me connect&eacute; &agrave; l'internet.

<ul>
<li>Ces valeurs sont les valeurs minimales.
<li>Si vous voulez installer un certain nombre de logiciels tierces,
faites vous une grosse partition <tt>/usr</tt> ! Triplez <b>au moins</b>
ces valeurs !
<li>Pour un syst&egrave;me qui devra garder un nombre de mails et de pages web
cons&eacute;quent (enregistr&eacute;s respectivement, dans <tt>/var/mail</tt> et
<tt>/var/www</tt>) vous aurez besoin d'une grande partition <tt>/var</tt>
, ou de les stocker dans des partitions diff&eacute;rentes.
<li>Pour un syst&egrave;me multi-utilisateurs qui pourrait g&eacute;n&eacute;rer beaucoup
de journaux, vous devrez avoir une partition <tt>/var</tt> de taille
confortable (<tt>/var/log</tt>).
<li>Si vous pensez r&eacute;construire le noyau ou le syst&egrave;me depuis les sources,
vous devrez avoir une partition <tt>/usr</tt> volumineuse, <b>au moins</b>
de 800Mo-1Go comme indiqu&eacute; ci-dessous.
</ul>

En lisant cela, gardez &agrave; l'esprit que les r&eacute;pertoires <tt>/usr</tt> et
<tt>/usr/X11R6</tt> sont souvent tous deux parties du m&ecirc;me syst&egrave;me
de fichiers, qui est <tt>/usr</tt>, du fait qu'il n'y a pas de gros avantage
&agrave; les s&eacute;parer en deux syst&egrave;mes de fichiers.

<blockquote>
<pre>
<b>
SYSTEM          /       /usr    /var    /usr/X11R6
alpha           80M     250M    25M     140M
hp300           80M     250M    25M     140M
hppa           100M     200M    25M     120M
i386            60M     250M    25M     140M
mac68k          80M     250M    25M     100M
macppc          80M     250M    25M     140M
mvme68k         80M     250M    25M     100M
sparc           80M     250M    25M     120M
sparc64         80M     250M    25M     100M
vax            100M     200M    25M     120M
</b>
</pre>
</blockquote>

En compl&eacute;ment, il est recommand&eacute; qu'une partition <tt>/tmp</tt> soit
utilis&eacute;e.
La partition <tt>/tmp</tt> est utilis&eacute;e dans la compilation des ports,
parmis d'autres choses, donc la taille que vous lui donnez d&eacute;pendra de
ce que vous en ferrez.
50Mo devraient &ecirc;tre suffisants pour la plupart des gens, mais quelques
grosses applications peuvent n&eacute;cessiter 100Mo ou plus d'espace dans
<tt>/tmp</tt>.

<p>
Lorsque vous &ecirc;tre dans l'editeur de "disklabel", vous pourriez choisir
de faire votre syst&egrave;me de telle sorte qu'il n'ai qu'une partition
'a' (syst&egrave;me de fichier principal) et 'b' (zone de "smap"). Le syst&egrave;me
de fichiers 'a' que vous avez configur&eacute; dans "disklabel" va devenir
votre partition racine, qui devrait &ecirc;tre la somme des trois valeurs
pr&eacute;c&eacute;dentes (<tt>/</tt>, <tt>/usr</tt>, et <tt>/var</tt>) plus un
peu de place pour <tt>/tmp</tt>. La partition 'b' que vous configurez
devient automatiquement votre partition swap syst&egrave;me -- nous recommandons
un minimum de 32Mo mais si vous avez un peu de place disponnible, r&eacute;servez
au minimum 64Mo. Si vous avez beaucoup de place disponnible, faite une
partition de 256Mo, ou m&ecirc;me 512Mo.

<p>
L'espace "swap" est utilis&eacute; pour sauvegarder les copies de la m&eacute;moire dans
l'&eacute;ventualit&eacute; d'un
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crash&amp;sektion=8">crash(8)</a>.
Si cela entre en ligne de consid&eacute;ration pour vous, votre zone de swap
devra &ecirc;tre au moins &eacute;gale &agrave; la taille de m&eacute;moire vive dont vous pourrez
disposer dans le syst&egrave;me. Notez que lors du red&eacute;marage,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=savecore&amp;sektion=8">savecore(8)</a>
essayera de sauvegarder le contenu de la partition swap dans un fichier
stock&eacute; dans <tt>/var/crash</tt> donc une fois de plus, si cela est une
priorit&eacute; pour vous, votre partition <tt>/var</tt> devra avoir suffisement
d'espace disponnible pour enregistrer ces fichiers de copie m&eacute;moire.

<p>
Il y a cinq raisons principales a utiliser des syst&egrave;mes de fichiers
s&eacute;par&eacute;s plutot que de n'en utiliser qu'un seul pour stocker tout dans un
seul ou deux syst&egrave;mes de fichiers :

<ul>
<li><b>S&eacute;curit&eacute;</b> : Vous pouvez marquer certains syst&egrave;mes de fichiers
  d'un 'nosuid', 'nodev', 'noexec', 'readonly', etc. Cela est maintenant
  fait par la proc&eacute;dure d'installation, si vous utilisez les partitions
  d&eacute;crites ci-dessus.
<li><b>Stabilit&eacute;</b> : Un utilisateur, ou un programme se conduisant mal,
  peut remplir votre syst&egrave;me de fichiers s'ils ont les droits d'&eacute;criture
  pour le faire. Vos programmes critiques, qui bien s&ucirc;r sont lanc&eacute;s sur
  un syst&egrave;me de fichier &agrave; part, ne seront pas interrompus.
<li><b>Vitesse</b> : Un syst&egrave;me de fichiers sur lequel on &eacute;cris souvent
  peut devenir quelque peu fragment&eacute;.
  (Par chance, le syst&egrave;me de fichiers ffs, que OpenBSD utilise, n'est
  pas enclin &agrave; &ecirc;tre tr&egrave;s fragment&eacute;.)
<li><b>Int&eacute;grit&eacute;</b> : Si un syst&egrave;me de fichiers est corrompu pour
  quelque raison que ce soit, les autres restent en bon &eacute;tat.
<li><b>Taille</b> : Beaucoups de machines ont une limite sur la
  taille de la zone d'un disque d'o&ugrave; la ROM de d&eacute;marrage peut charger
  le noyau. Dans certains cas, cette limite peut &ecirc;tre vraiment
  basse (504Mo pour un ancien 486), dans d'autre cas, elle peut &ecirc;tre
  plus grande (par exemple, 2Go, 8Go ou 128Go sur les syst&egrave;mes i386).
  Comme le syst&egrave;me
  peut &ecirc;tre install&eacute; n'importe o&ugrave; sur la partition racine, la totalit&eacute;
  de la partition racine devrait &ecirc;tre sur cette zone. Pour plus de
  d&eacute;tails, regardez <a href="../faq14.html#LargeDrive">cette section</a>.
  Une bonne ligne de conduite peut &ecirc;tre de conserver votre partition /
  inf&eacute;rieure &agrave; 2Go, dans le cas o&ugrave; vous ne savez pas si votre architecture
  (et votre machine) peuvent en supporter plus (ou moins !).
</ul>

<p>
Quelques remarques sur le partitionnement :
<ul>
 <li>Pour votre premi&egrave;re tentative sur un syst&egrave;me d'exp&eacute;rimentation, une
   grosse partition <tt>/</tt> et une zone "swap" devraient &ecirc;tre plus
   simples jusqu'&agrave; ce que vous sachiez combien de place vous est
   n&eacute;cessaire.
   En faisant cela vous sacrifierez certaines fonctions de s&eacute;curit&eacute;
   d'OpenBSD qui requi&egrave;rent des syst&egrave;mes de fichiers s&eacute;par&eacute;s pour
   <tt>/, /tmp, /var, /usr</tt> et <tt>/home</tt>.
 <li>Un syst&egrave;me expos&eacute; &agrave; l'internet ou d'autres forces hostiles devrait
   avoir une partition <tt>/var</tt> s&eacute;par&eacute;e (et peut &ecirc;tre m&ecirc;me une
   partition <tt>/var/log</tt> s&eacute;par&eacute;e) pour la journalisation.
 <li>Une partition <tt>/home</tt> peut &ecirc;tre int&eacute;ressante. Nouvelle version
   de l'OS ? Supprimez et rechargez tout le reste, conservez votre
   partition <tt>/home</tt> intacte. Rappelez vous de garder une copie
   de vos fichiers de configuration tout de m&ecirc;me.
 <li>Une partition s&eacute;par&eacute;e pour tout ce qui risque d'accumuler une grosse
   quantit&eacute; de fichiers qui devront &ecirc;tre supprim&eacute;e peut &ecirc;tre plus rapide
   &agrave; reformater re-cr&eacute;&eacute;r que de supprimer les fichiers. Regardez la
   <a href="../upgrade-minifaq.html#1.5">Minifaq de mise &agrave; jour</a> pour
   un exemple (<tt>/usr/obj</tt>).
 <li>Si vous souhaitez reconstruire votre syst&egrave;me depuis les sources pour
   quelque raison que ce soit, le sources seront dans <tt>/usr/src</tt>. Si vous
   ne faites pas une partition s&eacute;par&eacute;e pour <tt>/usr/src</tt>, soyez s&ucirc;r
   que <tt>/usr</tt> a suffisament de place.
 <li>Un fait souvent oubli&eacute; : vous n'avez <b>pas</b> besoin d'allouer toute
   la place sur un disque quand vous configurez un syst&egrave;me ! Etant donn&eacute;
   qu'il est maintenant compliqu&eacute; de trouver un disque dur plus petit que 20Go, il
   devient sens&eacute; de laisser une certaine place du disque non allou&eacute;e.
   Si vous d&eacute;passez la taille d'une partition, vous pouvez allouer une
   nouvelle partition depuis l'espace non utilis&eacute;,
   <a href="faq10.html#DupFS">dupliquer</a> votre partition existante sur
   la nouvelle, changer
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab</a>
   pour pointer vers votre nouvelle partition, la remonter, vous avez maintenant plus
   d'espace.
 <li>Si vous cr&eacute;ez vos partitions avec une taille trop proche de la taille
   minimum requise, vous allez probablement le regretter plus tard lorsqu'il
   sera temps de mettre &agrave; jour votre syst&egrave;me.
 <li>Si vous autorisez les utilisateurs &agrave; &eacute;crire dans <tt>/var/www</tt> (ex., pages
   web personnelles), vous devriez le placer dans une partition separ&eacute;e, vous pouvez
   par exemple utiliser les <a href="faq10.html#Quotas">quotas</a> pour restreindre
   la place qu'il utiliserons, s'ils remplissent la partition, les autres parties du
   syst&egrave;me ne seront pas affect&eacute;es.
</ul>

<p>
<a name= "Multibooting"></a>
<h2>4.8 - Multiboot OpenBSD/i386</h2>

Le "Multibooting" est le fait d'avoir plusieurs syst&egrave;mes d'exploitation
sur le m&eacute;me ordinateur, et de pouvoir choisir depuis lequel vous
souhaitez d&eacute;marrer.
Ce n'est <i>pas</i> une t&acirc;che triviale ! Si vous ne comprennez pas ce que
vous &ecirc;tes en train de faire, vous finirez par perdre une somme
cons&eacute;quente de donn&eacute;es sur votre ordinateur. Les nouveaux utilisateurs OpenBSD
sont <i>vivement</i> encourag&eacute;s a d&eacute;marrer avec un disque dur vierge et sur une
machine d&eacute;di&eacute;e, afin d'essayer la configuration d&eacute;sir&eacute;e sur un
syst&egrave;me qui n'est pas en production avant d'installer une configuration
"multiboot" sur une machine de production. <a href="../faq14.html">La FAQ 14</a>
donne plus d'informations sur la proc&eacute;dure d'amor&ccedil;age OpenBSD.

<p>
Voici plusieurs options pour le "multiboot" :

<h3>Configurer la partition active</h3>

C'est probablement la solution la plus n&eacute;glig&eacute;e, et parfois la plus
int&eacute;ressante pour le "multiboot".
Configurez simplement comme partition active, la partition d'OS depuis
laquelle vous souhaitez d&eacute;marrer par d&eacute;faut au prochain d&eacute;marrage.
Chaque OS offre un programme pour faire ce&ccedil;i ; celui
d'OpenBSD est <a href="../faq14.html#fdisk">fdisk(8)</a>, des programmes
portant des noms similaires sont disponibles sous Windows 9x et DOS,
et la plupart des autres syst&egrave;mes d'exploitation. Ceci peut &ecirc;tre tr&egrave;s
utile pour les OS ou syst&egrave;mes long &agrave; arr&ecirc;ter et red&eacute;marrer -- vous
pouvez le configurer et lancer la proc&eacute;dure de red&eacute;marrage,  ensuite
aller faire un tour, prendre une tasse de caf&eacute;, et revenir devant le
syst&egrave;me d&eacute;marr&eacute; comme vous le souhaitiez -- pas d'attente du Moment
Magique pour choisir le syst&egrave;me d'exploitation d&eacute;sir&eacute;.

<h3>Disquette d'amor&ccedil;age</h3>
Si vous avez un syst&egrave;me qui utilise OpenBSD non fr&eacute;quement (ou que vous
ne voulez pas que les autres utilisateurs de l'ordinateur notent que quoi
que ce soit ai chang&eacute;), vous pouvez utiliser une disquette d'amor&ccedil;age.
Utilisez simplement l'une des <a href="#MkFlop">disquettes d'installation
standard d'OpenBSD</a>, et cr&eacute;ez un fichier <tt>/etc/boot.conf</tt>
(oui, vous devrez aussi cr&eacute;er un dossier <tt>/etc</tt> sur la disquette)
ayant le contenu suivant :

<pre>
     boot hd0a:/bsd
</pre>

pour que le syst&egrave;me d&eacute;marre sur le disque dur 0, la partition OpenBSD
'a' et le fichier de noyau <tt>/bsd</tt>. Notez que vous pouvez aussi
d&eacute;marrer d'autres disques avec une ligne comme :
"<tt>boot hd2a:/bsd</tt>" pour lancer le troisi&egrave;me disque dur de votre
syst&egrave;me. Pour lancer OpenBSD, ins&eacute;rez la disquette dans le lecteur et
red&eacute;marrez. Pour lancer un autre syst&egrave;me d'exploitation, &eacute;jectez la
disquette et red&eacute;marrez.

<p>
Dans ce cas, le programme
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>
charg&eacute; depuis la disquette, cherche et lis
<tt>/etc/boot.conf</tt>. L'instruction "<tt>boot hd0a:/bsd</tt>" indique
&agrave; boot(8) depuis quel endroit charger le noyau -- dans ce cas, le premier
disque dur que le BIOS voit. Gardez &agrave; l'esprit que seulement un petit
fichier (<tt>/boot</tt>) est charg&eacute; depuis la disquette -- le syst&egrave;me
charge le noyau entier depuis le disque dur, cela ne ralenti que de
quelques secondes la proc&eacute;dure de d&eacute;marrage.

<h3>Windows NT/2000/XP NTLDR</h3>

Pour un "multiboot" entre OpenBSD et Windows NT/2000/XP, vous pouvez
utilisez NTLDR, le chargeur de d&eacute;marrage que NT utilise. Pour "multi-booter"
avec NT, vous aurez besoin d'un copie de votre "Partition Boot Record" (PBR)
OpenBSD. Apr&egrave;s avoir lanc&eacute; "installboot" vous pouvez en obtenir une copie dans un
fichier en utilisant
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd(1)</a>:

<pre>
	# <strong>dd if=/dev/rsd0a of=openbsd.pbr bs=512 count=1</strong>
</pre>

<p>
Maintenant d&eacute;marrez sous NT et mettez <tt>openbsd.pbr</tt> dans C:. Ajoutez
une ligne comme celle-ci &agrave; la fin du fichier <tt>C:\BOOT.INI</tt> :

<pre>
	c:\openbsd.pbr="OpenBSD"
</pre>

<p>
Quand vous red&eacute;marrerez, vous devriez &ecirc;tre en mesure de choisir OpenBSD
dans le menu de chargement NT. D'autres informations sur le NTLDR sont
disponibles dans le
<a href="http://www.tburke.net/info/ntldr/ntldr_hacking_guide.htm">"NTLDR
Hacking Guide"</a>.

<p>
Sur Windows XP vous pouvez aussi &eacute;diter les informations en utilisant la
"GUI" ; consultez le
<a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;q289022">XP
Boot.ini HOWTO</a>.

<p>
Des programmes faisant la plupart de ce travail sont &agrave; votre disposition,
par exemple
<a href="http://www.winimage.com/bootpart.htm">BootPart</a>.
Ce programme peut &ecirc;tre lanc&eacute; depuis Windows NT/2000/XP, et ira chercher
le PBR OpenBSD, le mettre dans votre partition NT/2000/XP partition, et
le rajouter dans <tt>C:\BOOT.INI</tt>.

<p>
<!-- XXXVersion: issue "expires" after last 3.4 systems are upgraded. -->
La proc&eacute;dure d'installation et de mise &agrave; jour d'OpenBSD va r&eacute;installer
le
<a href="../faq14.html#Boot386">chargeur de d&eacute;marrage</a>, dont la
localisation est cod&eacute;e dans le PBR, donc si vous r&eacute;installez ou mettez
&agrave; jour OpenBSD, vous devrez recommencer l'&eacute;tape ci-dessus pour prendre
une nouvelle copie du PBR OpenBSD.

<p>
Note : Le chargeur de d&eacute;marrage Windows NT/2000/XP est seulement capable
de d&eacute;marrer des syst&egrave;mes depuis le premier disque dur.
Vous ne pouvez pas l'utiliser pour charger OpenBSD depuis le second
disque sur un syst&egrave;me.

<p>
<h3>Autres chargeurs de d&eacute;marrage</h3>

<p>
D'autres utilisateurs de chargeurs de d&eacute;marrage OpenBSD ont inclus avec
succ&egrave;s
<a href="http://gag.sourceforge.net/">GAG</a>,
OS-BS,
<a href="http://www.ranish.com/part/">The Ranish Partition Manager</a>
et <a href="http://www.gnu.org/software/grub/">GRUB</a>.

<p>
<h3>OpenBSD et Linux (i386)</h3>
<!-- XXXversion -->

<p>
Veuillez vous r&eacute;ferer au
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.5/i386/INSTALL.linux">INSTALL.linux</a>,
qui donne les instructions en profondeur pour faire fonctionner OpenBSD avec Linux.

<a name= "SendDmesg"></a>
<h2>4.9 - Envoyer votre dmesg &agrave; dmesg@openbsd.org apr&egrave;s l'installation</h2>

<p>
Rappelez vous, il est important pour les d&eacute;veloppeurs OpenBSD de garder une
trace de quels m&eacute;t&eacute;riels fonctionnent, et de quels mat&eacute;riels ne fonctionnent pas parfaitement.

<p>
Un commentaire de /usr/src/etc/root/root.mail
<pre>
If you wish to ensure that OpenBSD runs better on your machines, please do us
a favor (after you have your mail system configured!) and type something like:
 # dmesg | mail -s "Sony VAIO 505R laptop, apm works OK" dmesg@openbsd.org
so that we can see what kinds of configurations people are running.  As shown,
including a bit of information about your machine in the subject or the body
can help us even further.  We will use this information to improve device driver
support in future releases.  (Please do this using the supplied GENERIC kernel,
not for a custom compiled kernel, unless you're unable to boot the GENERIC
kernel).  The device driver information we get from this helps us fix existing
drivers. Thank you!
</pre>

<p>
Soyez sur d'envoyer le mail depuis un compte sous lequel pour serez habilit&eacute;
&agrave; recevoir pour que les d&eacute;veloppeurs puissent vous contacter s'il ont quelque
chose qu'il voudraient que vous testiez ou changiez pour que votre
configuration fonctionne. Il n'est pas important d'envoyer le mail depuis
la m&ecirc;me machine que celle sur laquelle tourne OpenBSD, donc si cette
derni&egrave;re n'est pas en mesure de recevoir des mails, faites simplement :

<pre>
$ dmesg | mail your-account@yourmail.dom
</pre>
et tranf&eacute;rez le message &agrave;
<pre>
 dmesg@openbsd.org
</pre>
O&ugrave; <tt>your-account@yourmail.dom</tt> est votre compte de messagerie
r&eacute;gulier.
(ou tranf&eacute;rez votre sortie dmesg en utilisant
FTP/scp/floppydisk/pigeon-porteur/...)

<p>
<strong>NOTE</strong> - N'envoyez que des dmesg concernant les noyaux
GENERIC. Les noyaux personnalis&eacute;s qui ont des drivers de mat&eacute;riels en moins
ne sont pas utiles.

<p>
Notre aussi que les dmesgs sont re&ccedil;us sur un ordinateur utilisant le
syst&egrave;me de filtrage de spam
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd</a>.
Cela peut causer le rejet temporaire de votre dmesg par les serveurs de mails.
Soyez patient, apr&egrave;s une demi-heure voire une heure, il sera re&ccedil;u.

<a name="AddFileSet"></a>
<h2>4.10 - Ajouter un package apr&egrave;s l'installation</h2>
<!-- XXXversion -->
"Oh non ! J'ai oubli&eacute; de rajouter un package quand j'ai fait l'installation !"
<p>
Parfois, vous r&eacute;alisez que vous AURIEZ vraiment eu besoin de
<tt>comp35.tgz</tt> (ou de n'importe quel composant syst&egrave;me) apr&egrave;s tout,
mais vous ne l'avez pas r&eacute;alis&eacute; quand vous avez install&eacute; votre syst&egrave;me.
Bonne nouvelle : Il y a deux voies relativement simples pour rajouter un
package apr&egrave;s l'installation initiale :

<h3>En utilisant la proc&eacute;dure de mise &agrave; jour</h3>
D&eacute;marrez simplement votre m&eacute;dia d'installation (CD-ROM ou disquette), et
choisissez "Upgrade" (plut&ocirc;t que "Install"). Quand vous aurez la liste
des packages, s&eacute;lectionnez simplement celui que vous avez oubli&eacute;
d'installer la premi&egrave;re fois, choisissez la source, et laissez-le
l'installer pour vous.

<h3>En utilisant tar(1)</h3>
Les packages d'installation sont de simples fichiers compress&eacute;s tar, et
vous pouvez les d&eacute;compresser vous m&ecirc;me manuellement depuis la racine
du syst&egrave;me de fichiers.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # cd /
  # tar xzvpf comp35.tgz
</pre></td></tr></table>

<p>
N'oubliez PAS l'option <tt>'p'</tt> ci-dessus qui restaurera correctement
les permissions sur les fichiers !
<p>
Une m&eacute;prise courante est de croire qu'il est possible d'utiliser
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>
pour rajouter des packages manquants. Cela ne fonctionne pas.
pkg_add(1) est pour les fichiers packages, pas pour les
fichiers archives tar comme les sets d'installation.


<a name="bsd.rd"></a>
<h2>4.11 - Qu'est ce que 'bsd.rd' ?</h2>

<b><tt>bsd.rd</tt></b> est un noyau "RAM Disk". Ce fichier peut
&ecirc;tre vraiment int&eacute;ressant ; beaucoup de d&eacute;veloppeurs prudents
en pla&ccedil;ent un tout le temps &agrave; la racine de leur syst&egrave;me.

<p>
Le noyau "RAM Disk" d&eacute;finit la racine du syst&egrave;me de fichiers
du noyau -- plus qu'un &eacute;tant un disque physique, les utilitaires
disponibles apr&egrave;s l'ammorcage de <tt>bsd.rd</tt> sont enregistr&eacute;s
dans le kernel, et lanc&eacute; depuis un syst&egrave;me de fichiers bas&eacute; en
m&eacute;moire RAM.
<tt>bsd.rd</tt> inclu aussi une flopp&eacute;e d'utilitaires de sauvetage
vous permettant de faire de la maintenance syst&egrave;me et de lancer une
l'installation.
<p>
Sur certaines architectures, <tt>bsd.rd</tt> est actuellement la
m&eacute;thode d'installation pribil&eacute;gi&eacute;e -- vous placez ce noyau sur un
syst&egrave;me de fichiers, vous le d&eacute;marrez, et lancez l'installation
depuis ce dernier. Sur la plupart des architectures, si vous
utilisez une ancienne version d'OpenBSD, vous pouvez obtenir
une nouvelle version de <tt>bsd.rd</tt>  par FTP, red&eacute;marrer
&agrave; partir de lui, et installer la nouvelle version d'OpenBSD
sans avoir besoin de quelque m&eacute;dia amovible que ce soit.

<p>
Voici un exemple d'amor&ccedil;age de <tt>bsd.rd</tt> sur un syst&egrave;me
i386 :

<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Using Drive: 0 Partition: 3
  reading boot.....
  probing: pc0 com0 com1 apm mem[639k 255M a20=on]
  disk: fd0 hd0+
  &gt;&gt; OpenBSD/i386 BOOT 2.02
  boot&gt; <b>boot hd0a:/bsd.rd</b>
<i>. . . normal boot to install . . .</i>
</pre></td></tr></table>

Comme indiqu&eacute;, vous allez &ecirc;tre amen&eacute; au programme d'installation,
mais vous pouvez aussi aller &agrave; une invite de shell pour faire de
la maintenance sur votre syst&egrave;me.
<p>
La r&egrave;gle g&eacute;n&eacute;rale en lan&ccedil;ant <tt>bsd.rd</tt> est de changer votre
noyau d'amor&ccedil;age de <tt>/bsd</tt> &agrave; <tt>bsd.rd</tt> quelque soit
la m&eacute;thode pour votre architecture.
<p>
<br>

<a name="InstProb"></a>
<h2>4.12 - Probl&egrave;mes d'installation courants</h2>

<a name="cpq16m"></a>
<h3>4.12.1 - Mon Compaq ne reconnait que 16Mo de RAM</h3>
<i>Certains</i> syst&egrave;mes Compaq rencontrent un probl&egrave;me o&ugrave; la m&eacute;moire
RAM n'est pas compl&egrave;tement d&eacute;tect&eacute;e par le
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">Chargeur d'ammor&ccedil;age de second niveau OpenBSD</a>
et seulement 16Mo seront d&eacute;tect&eacute;s et utilis&eacute;s par OpenBSD.
Ce&ccedil;i peut &ecirc;tre corrig&eacute; en cr&eacute;ant/&eacute;diant le fichier
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8&amp;arch=i386"><tt>/etc/boot.conf</tt></a>,
ou en entrant des commandes &agrave; l'invite "<tt>boot></tt>" avant
qu'OpenBSD ne se charge. Si vous avez une machine avec 64Mo
de RAM, mais qu'OpenBSD n'en a d&eacute;tect&eacute; que 16Mo, la commande
devrait &ecirc;tre :

<pre>
     machine mem +0x3000000@0x1000000
</pre>

pour ajouter 48Mo (<tt>0x3000000</tt>) apr&egrave;s les premiers 16Mo
(<tt>0x1000000</tt>). Typiquement, si vous avez une machine avec
ce probl&egrave;me, vous devriez entrer la commande pr&eacute;c&eacute;dente d'abord
dans l'invite <tt>boot></tt> du CD-ROM ou de la Disquette, charger
la disquette, r&eacute;d&eacute;marrer et cr&eacute;er un fichier <tt>/etc/boot.conf</tt>
avec la ligne pr&eacute;c&eacute;dente pour que dans les d&eacute;marrages suivants
OpenBSD reconnaisse toute la m&eacute;moire disponnible.

<p>
Une mise &agrave; jour ROM r&egrave;glera ce probl&egrave;me sur
<i>certains</i> syst&egrave;mes.

<a name="noboot"></a>
<h3>4.12.2 - Mon i386 ne d&eacute;marre pas apr&egrave;s l'installation</h3>
Votre installation &agrave; eu l'air de bien se d&eacute;rouler, mais lors
de votre premier d&eacute;marrage, vous ne voyez aucun signes montrant
qu'OpenBSD essaye de d&eacute;marrer. Il y a plusieurs probl&egrave;mes courant
pouvant expliquer ce probl&egrave;me :

<ul>
<li><b>Aucune partition n'a &eacute;t&eacute; d&eacute;finie active dans fdisk(8).</b>
Pour corriger cela, relancez la machine en utilisant une disquette
de d&eacute;marrage ou tout autre m&eacute;dia, et marquez une partition comme active.
Regardez
<a href="../faq14.html#fdisk">ici</a> et
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">ici</a>

<li><b>Aucun chargeur de d&eacute;marrage valide n'a &eacute;t&eacute; install&eacute; sur le disque.</b>
Si vous avez r&eacute;pondu "Y" &agrave; la question "Use entire disk for OpenBSD?" pendant
l'installation, ou utilis&eacute; l'option "<tt>reinit</tt>"
de fdisk(8), l'ammorce OpenBSD &agrave; &eacute;t&eacute; install&eacute;e sur le "Master Boot Record"
du disque ; autrement, le programme d'amorce est conserv&eacute; intact.
Ce sera un probl&egrave;me si aucun autre programme d'amorce n'existe.
Une solution est de d&eacute;marrer le m&eacute;dia d'installation une nouvelle fois,
basculer dans le shell et invoquer la commande
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a> pour mettre &agrave; jour le MBR depuis la ligne de commande :
<pre>
  # fdisk -u wd0
</pre>
Note : l'option "update" du mode interactif ("-e") de fdisk n'&eacute;crira pas les
bits de signature requis pour rendre le disque amor&ccdeil;able.

<li><b>Dans quelques rares cas, quelque chose s'est mal d&eacute;roul&eacute; dans
l'installation du chargeur de d&eacute;marrage de stage 2.</b> La
r&eacute;installation du chargeur de d&eacute;marrage de stage 2
est vue <a href="../faq14.html#InstBoot">ici</a>.

</ul>

<a name="sshhang"></a>
<h3>4.12.3 - Ma (vielle et lente) machine &agrave; d&eacute;marr&eacute;e, mais bloque pendant
la proc&eacute;dure ssh-keygen</h3>
Il semble que votre machine fonctionne correctement, mais prend juste
beaucoup de temps pendant la proc&eacute;dure de g&eacute;n&eacute;ration de cl&eacute;s ssh.
Une SPARCStation2 ou un Macintosh Quadra peut prendre 45 minutes
ou plus pour terminer les trois &eacute;tapes
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;sektion=1">ssh-keygen(1)</a>,
quelques machines peuvent m&ecirc;me prendre plus de temps. Laissez le simplement
terminer ; cela n'est r&eacute;alis&eacute; qu'une fois par installation.

<a name="noftplist"></a>
<h3>4.12.4 - J'ai le message "Failed to change directory" pendant
     l'installation</h3>

Quand vous faites l'installation d'un
<a href="../upgrade-minifaq.html#1.1">"snapshot"</a> pendant le
stage <i>-beta</i> du
<a href="faq5.html#Flavors">cycle de d&eacute;veloppement OpenBSD</a>,
vous devriez voir ceci :

<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>

  Do you want to see a list of potential FTP servers?  [yes] <b><i>Enter</i></b>
  Getting the list from 192.128.5.191 (ftp.openbsd.org)... FAILED
  Failed to change directory.
  Server IP address or hostname? 
</pre></td></tr></table>

Cela est normal et souhait&eacute; pendant la version pr&eacute;c&eacute;dent la sortie officielle
dans le cycle. Le programme d'installation cherche la liste FTP sur le
premier serveur FTP dans un dossier qui ne sera pas disponible avant
<a href="faq1.html#Next">la date de "release"</a>, donc vous obtiendrez
les messages pr&eacute;c&eacute;dents.

<p>
Utilisez simplement la
<a href="../../fr/ftp.html">liste de miroirs FTP</a> pour trouver votre
site mirroir FTP favori, et entrez manuellement son nom lorsque
cela vous est demand&eacute;.

<p>
<b>Note : Vous ne devriez pas voir cela si vous installez une version
<i>"-release"</i> ou depuis un CD-ROM.</b>

<a name="krb4"></a>
<h3>4.12.5 - Quand je m'identifie j'obtiens
  "login_krb4-or-pwd: Exec format error"</h3>

Kerberos IV &agrave; &eacute;t&eacute; retir&eacute; d'OpenBSD 3.4, mais si vous avez fait une mise
&agrave; jour, les anciens binaires de Kerberos IV seront toujours sur votre syst&egrave;me.
Ce&ccedil;i est un probl&egrave;me li&eacute; &agrave; l'architecture i386, car les anciens fichiers Kerberos
sont au format
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=a.out&amp;sektion=5">a.out</a>,
et donc impossible &agrave; lancer sur le noyau standart ELF (sur lequel les
&eacute;mulations de format a.out sont d&eacute;sactiv&eacute;es, comme mentionn&eacute;
<a href="faq1.html#WhatsNew">ici</a>).
Si vous rencontrez ce probl&egrave;me , vous devrez &eacute;craser la m&eacute;thode
d'authentification krb4 lorsque vous vous identifierez :
<pre>
    OpenBSD/i386 (puffy.openbsd.org) (ttyC0)

    login: joeuser:passwd
    password:
</pre>
Vous pouvez utiliser la m&ecirc;me syntaxe "<tt><i>username</i>:passwd</tt>"
pour une connexion ssh et avec
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&amp;sektion=1">su(1)</a>
pour acc&eacute;der &agrave; votre syst&egrave;me
Maintenant &eacute;ditez <tt>/etc/login.conf</tt>, et retirez les r&eacute;f&eacute;rences
&agrave; krb4.

<a name="blankfdisk"></a>
<h3>4.12.6 - Ma table de partition fdisk est vide !</h3>
Occasionellement, un utilisateur trouvera un syst&egrave;me fonctionnant, mais en faisant
un <tt>fdisk wd0</tt>, il trouvera une table de partitions vide (ou polu&eacute;e).
Cela est usuellement du &agrave; la cr&eacute;ation d'une partition dans
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
ayant un offset de zero secteurs, au lieu de <a href="#trackoffset">l'offset
d'une piste</a> qu'elle est senc&eacute;e avoir.
(note : cela ne concerne que les plateformes <a href="../../fr/i386.html">i386</a> et <a href="../../fr/amd64.html">amd64</a>. Les autres plateformes requi&egrave;rents
des offsets diff&eacute;rents, certaines n'en requi&egrave;rent pas)
Le syst&egrave;me <a href="../faq14.html#Boot386">d&eacute;marre</a> ensuite en utilisant le PBR, pas le MBR.

<p>
Tandis que cette configuration peut fonctionner, cela peut causer des probl&egrave;mes de
maintenance et devrait &ecirc;tre corrig&eacute;.
Pour corriger ce probl&egrave;me, le syst&egrave;me de fichiers doit
g&eacute;n&eacute;rallement &ecirc;tre recr&eacute;e depuis le début (si vous savez
VRAIMENT ce que vous faites, vous devrier &ecirc;tre en mesure de recr&eacute;er juste le disklabel et le MBR et ne perdre que la premi&egrave;re partition OpenBSD du disque).

<a name="site"></a>
<h2>4.13 - Personnaliser la proc&eacute;dure d'installation</h2>
<!-- XXXversion -->

<h3>Fichier <tt>siteXX.tgz</tt></h3>
Les scripts d'installation/mise &agrave; jour d'OpenBSD autorisent
la cr&eacute;ation d'un set utilisateur nomm&eacute; "<tt>siteXX.tgz</tt>",
o&ugrave; XX repr&eacute;sente la version (ex. 35). Le fichier <tt>siteXX.tgz</tt>
est, comme les autres
<a href="#FilesNeeded">packages</a>, une compression
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&amp;sektion=1">gzip(1)</a>
d'archive
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
dans la racine est '/' et est d&eacute;compress&eacute; comme les autres avec les options
<tt>xzpf</tt>. Ce package sera install&eacute; en dernier, apr&egrave;s tous les autres
packages.

<p>
Ce package vous permet d'ajouter et/ou &eacute;craser des fichiers install&eacute;s
dans les packages 'normaux' et donc de personnaliser l'installation
ou la mise &agrave; jour.

<p>
Quelques exemples d'utilisation de fichier <tt>siteXX.tgz</tt> :
<ul>
<li>Cr&eacute;er un fichier siteXX.tgz qui contient tous les changements
que vous avez fait depuis la premi&egrave;re installation de OpenBSD. Ensuite,
si vous avez &agrave; r&eacute;cr&eacute;er le syst&egrave;me s&eacute;lectionnez simplement
siteXX.tgz pendant la proc&eacute;dure de r&eacute;installation et toutes les
modifications que vous avez faites seronts r&eacute;pliqu&eacute;es sur le nouveau
syst&egrave;me.

<li>Cr&eacute;er une s&eacute;rie de dossiers sp&eacute;cifiques machine qui
contiennent chacun un fichier siteXX.tgz dans lequel se trouvent les
fichiers sp&eacute;cifiques &agrave; la machine.
L'installation de machines (ex. machines avec des cartes graphiques
diff&eacute;rentes) d'une cat&eacute;gorie particuli&egrave;re peut &ecirc;tre faite en
choisissant le fichier siteXX.tgz appropri&eacute;.

<li>Mettez les fichiers que vous param&eacute;trez constamment dans un fichier
siteXX.tgz similaire -- fichiers
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8"
><tt>/etc/skel</tt></a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5"
><tt>/etc/pf.conf</tt></a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8"
><tt>/var/www/conf/httpd.conf</tt></a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;sektion=5"
><tt>/etc/rc.conf</tt></a>,
etc.
</ul>

<h3>Scripts <tt>install.site</tt>/<tt>upgrade.site</tt>.</h3>
A la derni&egrave;re &eacute;tape de la proc&eacute;dure d'installation/mise &agrave; jour, le script
cherche dans la racine un <tt>install.site</tt> ou un <tt>upgrade.site</tt>
d'un nouveau syst&egrave;me ou d'une nouvelle mise &agrave; jour, d&eacute;pendemment de
la proc&eacute;dure en cours, et lande le script dans un environnement
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=8">chroot</a>&eacute;
de la racine syst&egrave;me de l'installation/de la mise &agrave; jour.
Rapellez vous, la mise &agrave; jour est faite depuis un syst&egrave;me de fichier d&eacute;marr&eacute;
donc votre syst&egrave;me de fichiers cible est actuellement mont&eacute; dans
<tt>/mnt</tt>. Cependant, votre script peut &ecirc;tre &eacute;crit tel quel,
comme s'il &eacute;tait &eacute;crit dans la racine normale de votre syst&egrave;me de fichiers.
Comme ce script est lanc&eacute; apr&egrave;s que tous les fichiers aient &eacute;t&eacute; install&eacute;s,
vous avez un syst&egrave;me totalement fonctionnel (bien que lanc&eacute; en mode
mono-utilisateur) quand votre script est invoqu&eacute;.

<p>
Notez que le script <tt>install.site</tt> devra &ecirc;tre plac&eacute; dans un fichier
<tt>siteXX.tgz</tt>, tandis que le script <tt>upgrade.site</tt> pourra
&ecirc;tre plac&eacute; &agrave; la racine du syst&egrave;me de fichier avant la mise &agrave; jour ou
bien &ecirc;tre plac&eacute; lui aussi dans fichier <tt>siteXX.tgz</tt>.

<p>
Ce script peut &ecirc;tre utilis&eacute; pour faire tout ce qui est possible
dans un script.
<ul>
<li> Supprimer des fichiers qui sont install&eacute;s/mis &agrave; jour et que vous ne
souhaitez pas pr&eacute;sent dans votre syst&egrave;me.
<li> Supprimer/mettre &agrave; jour/installer les
<a href="faq8.html#Packages">packages</a> que vous souhaitez sur le syst&egrave;me
install&eacute;.
<li> Faire une <a href="../faq14.html#Backup">sauvegarde/archive imm&eacute;diate</a>
de votre nouveau syst&egrave;me avant de l'exposer au reste du monde.
</ul>

La combinaison de <tt>siteXX.tgz</tt> et de
<tt>install.site/upgrade.site</tt> &agrave; pour but de donner de larges capacit&eacute;s
de personnalisation sans avoir &agrave; cr&eacute;er ses propres packages d'installation.

<a name="Multiple"></a>
<h2>4.14 - Comment puis-je installer plusieurs syst&egrave;mes identiques ?</h2>
Voici quelques utilitaires que vous pouvez utiliser lorsque vous avez
plusieurs syst&egrave;mes OpenBSD identiques &agrave; d&eacute;ployer.

<h3>Les fichiers <tt>siteXX.tgz</tt> and <tt>install/upgrade.site</tt></h3>
Voir l'article <a href="#site">pr&eacute;c&eacute;dent</a>.

<h3>Restauration depuis dump(8)</h3>
Sur la plupart des architectures, le m&eacute;dia de d&eacute;marrage inclut le programme
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>
qui peut &ecirc;tre utilis&eacute; pour restaurer une sauvegarde faite par
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a>.
Ainsi, vous pouvez d&eacute;marrer depuis
<a href="#MkFlop">disquettes</a>,
<a href="../../orders.html">CD</a>, ou
fichier <a href="#bsd.rd">bsd.rd</a>, ensuite
<a href="../faq14.html#fdisk">fdisk</a>,
<a href="../faq14.html#disklabel">disklabel</a>, et
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore</a>
pour restaurer la confiuration d&eacute;sir&eacute;e depuis une bande ou autre m&eacute;dia, et installer les
<a href="../faq14.html#InstBoot">blocs de d'amor&ccedil;e</a>. Plus de d&eacute;tails
<a href="../faq14.html#Backup">ici</a>.

<h3>Image de disque</h3>
Malheureusement, il n'existe pas de package d'image de disque attentif
au FFS qui peuvent faire une image contenant simplement l'espace de
disque utilis&eacute;. La plupart des solutions d'image de disque traiterons
la partition OpenBSD comme une partition "g&eacute;n&eacute;rique", et pourront
simplement faire l'image de l'int&eacute;gralit&eacute; du disque. Cela rejoint
souvent notre but, mais souvent avec d'enormes quantit&eacute;s d'espace
perdu -- une partition <tt>/home</tt> de 10Go vide demandera 10Go
d'espace dans l'image, m&ecirc;me s'il n'y a aucun fichier &agrave; l'int&eacute;rieur.
Tandis que vous pouvez typiquement installer une image de disque sur
un disque plus grand, vous ne pourrez pas l'installer sur un disque de plus
petite taille.

<p>
Si cela est pour vous acceptable, vous devriez trouver dans la
commande
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd</a>
tout ce dont vous avez besoin, autorisant la copie d'un disque vers un
autre, secteur-par-secteur. Celui-ci vous donnera souvent les m&ecirc;mes fonctionalit&eacute;s que
les programmes commerciaux, sans le prix.

<a name="getdmesg"></a>
<h2>4.15 - Comment puis-je obtenir un dmesg(8) pour rapporter un
  probl&egrave;me d'installation ?</h2>
Lorsque vous <a href="../../report.html">reportez un probl&egrave;me</a>, il est
important d'inclure le
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>
complet du syst&egrave;me.
Cependant, souvent lorsque vous en avez besoin, c'est car le syst&egrave;me
ne fonctionne pas proprement ou ne s'installe pas donc vous n'aurez pas
de disque, de r&eacute;seau ou autre ressource vous permettant d'envoyer votre
dmesg &agrave; la
<a href="../../fr/mail.html">mailing liste</a> appropri&eacute;e.
Il y a d'autres fa&ccedil;ons de faire cela, cependant :

<ul>
<li><b>Disquette :</b> Les disques d'amorces et CD-ROM ont assez d'outils
pour permettre d'enregistrer votre dmesg sur une disquette MSDOS pour le
lire sur une autre machine. Mettez une disquette MSDOS format&eacute;e dans
votre lecteur de disquette et tapez les commandes suivantes :

<pre>
     mount -t msdos /dev/fd0a /mnt
     dmesg >/mnt/dmesg.txt
     umount /mnt
</pre>
Si vous avez un autre syst&egrave;me OpenBSD, vous pouvez aussi &eacute;crire sur une
disquette compatible OpenBSD -- souvent, la disquette d'amorce &agrave; encore
assez d'espace libre pour contenir le dmesg. Dans ce cas, retirez le
"<tt>-t msdos</tt>" ci-dessus.

<p>
<li><b>Console s&eacute;rie :</b>
Utiliser une console s&eacute;rie et capturer la sortie sur un autre ordinateur est
souvent la meilleure solution d'obtenir des informations de diagnostic -
particuli&egrave;rement si l'ordinateur "panic" imm&eacute;diatement apr&egrave;s le
d&eacute;marrage.
Aussi bien qu'un second ordinateur, vous aurez besoin d'un cable s&eacute;rie (souvent un
cable null-modem), et un &eacute;mulateur de terminal pouvant capturer la sortie de
l'&eacute;cran dans un fichier.

Des informations sur la configuratio d'une console s&eacute;rie sont donn&eacute;es <a href="faq7.html#SerCon">ailleur dans la FAQ</a>;
dans le but de capturer le log de l'installation, les commandes suivantes sont souvent
suffisantes.

<p><b>i386</b>

<p>
A l'invite de d&eacute;marrage tapez :
<p>
<blockquote>
<pre>
boot> <b>set tty com0</b>
</pre>
</blockquote>

<p>
Cela indiquera &agrave; OpenBSD d'utiliser le premier port s&eacute;rie (souvent
appel&eacute; COM1 ou COMA dans la documentation du PC) en tant que console s&eacute;rie.
La bande passante par d&eacute;faut est 9600 bauds.

<p><b>Sparc/Sparc64</b>

<p>
Ces machines utiliseront automatiquement une console s&eacute;rie si elles
sont lanc&eacute;es sans clavier.
Si vous avez un clavier et un &eacute;cran attach&eacute;s, vous pouvez toujours
forcer le syst&egrave;me &agrave; utiliser une console s&eacute;rie avec l'invocation
suivante &agrave; l'invite <tt>ok</tt>.

<p>
<blockquote>
<pre>
ok <b>setenv input-device ttya</b>
ok <b>setenv out-device ttya</b>
ok <b>reset</b>
</pre>
</blockquote>

<p>
<li><b>FTP :</b> Dans certaines circonstances, vous aurez la possibilit&eacute; d'utiliser
le client
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a>
sur le disque d'amorce ou le CD-ROM pour envoyer le dmesg sur un serveur FTP local,
o&ugrave; vous pourrez le r&eacute;cup&eacute;rer ensuite.
</ul>

<p>

<a name="bsdrdaout"></a>
<h2>4.16 - Mettre &agrave; jour/R&eacute;installer OpenBSD/i386
  en utilisant <tt>bsd.rd-a.out</tt></h2>

Il est normalement possible de r&eacute;aliser des mises &agrave; jours et des
installations en utilisant le noyau
the <a href="faq4.html#bsd.rd">bsd.rd</a>.
Cependant, avec OpenBSD 3.4, l'architecture i386 change de format ex&eacute;cutable
de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=a.out&amp;sektion=5"
>a.out</a> &agrave;
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=elf&amp;sektion=5"
>ELF</a>,
donc les anciens
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386"
>chargeur de d&eacute;marrage</a> (OpenBSD 3.3 et pr&eacute;c&eacute;dents) ne peuvent pas lancer le nouveau
format du noyau <tt>bsd.rd</tt>.

<p>
Pour contourner ce probl&egrave;me, et autoriser les mises &agrave; jours en utilisant
<tt>bsd.rd</tt>,
une version a.out de <tt>bsd.rd</tt> &agrave; &eacute;t&eacute; r&eacute;alis&eacute;e et mise &agrave; disposition sur la
<a href="../../fr/ftp.html">distribution FTP</a>.
Ce fichier, <tt>bsd.rd-a.out</tt>,
peut &ecirc;tre charg&eacute; depuis OpenBSD 3.3 et pr&eacute;c&eacute;dents,
mais est un noyau OpenBSD 3.5 authentique, incluant le nouveau chargeur de
d&eacute;marrage ELF, et peut donc &ecirc;tre utilis&eacute; pour d&eacute;marrer un syst&egrave;me
OpenBSD/i386 3.5 depuis une version pr&eacute;c&eacute;dente.

<p>
T&eacute;l&eacute;chargez simplement <tt>bsd.rd-a.out</tt> et placez le &agrave; la
racine du syst&egrave;me de votre machine.
D&eacute;marrez le, au lieu des noyaux normaux <tt>bsd</tt> ou
<tt>bsd.rd</tt> comme montr&eacute;
<a href="faq4.html#bsd.rd">ici</a> (en sp&eacute;cifiant
<tt>bsd.rd-a.out</tt> comme votre noyau de d&eacute;marrage,
bien s&ucirc;r).

<p>
Si vous voulez installer <i>"-current"</i>, il vous est recommand&eacute;
d'installer un syst&egrave;me "3.5-release" minimal (<tt>base35.tgz,
etc35.tgz, bsd</tt>), et ensuite r&eacute;installer en utilisant le fichier
<i>-snapshot</i> <tt>bsd.rd</tt>.

<p>

<font color= "#0000e0">
<a href= "index.html">[Retour &agrave; l'Index principal]</a>
<a href= "faq3.html">[Section 3 - Obtenir OpenBSD]</a>
<a href= "faq5.html">[Section 5 - Construire le Syst&egrave;me &agrave; partir des Sources]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt= "[back]"></a> 
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq4.html,v 1.169 ]<br>
$Translation: faq4.html,v 1.17 2004/10/06 16:37:29 saad Exp $<br>
$OpenBSD: faq4.html,v 1.9 2004/10/07 10:23:59 jufi Exp $
</small>
</body>
</html>
