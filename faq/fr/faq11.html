<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>11 - Optimisation des Performances</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rev= "made" href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2006 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<a href="../../fr/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[Index de La FAQ]</a>
<a href= "faq10.html">[Section 10 - Gestion du Système]</a>
<a href= "faq12.html">[Section 12 - Questions Spécifiques Aux
Plates-Formes]</a>
</font>

<h1><font color="#e00000">11 - Optimisation des Performances</font></h1>
<!-- UNCOMMENT ONLY WHEN THE FILE IS OUT OF SYNC

<hr>
<p>
<b><font color="#e00000">Remarque Importante :</font></b> Le contenu de
   ce fichier est obsolète. Consultez la version anglaise 
   <a href="../faq11.html">ici</a> pour des informations à jour.

<p>
Si vous souhaitez contribuez à l'effort de traduction,
prière de consulter
<a href="../../fr/translation.html">la page de traduction</a>.

-->
<hr>

<p>
<h3>Table des matières</h3>
<ul>
<li><a href="#XF86"   >11.4 - Optimisation de la Résolution de
votre Écran sous X</a>
</ul>

<hr>

<p>
<a name= "XF86"></a>
<h2>11.4 - Optimisation de la Résolution de Votre écran
       sous X</h2>

<i>Remarque : La plupart des utilisateurs n'ont pas à se soucier
de la création manuelle du ModeLine avec les versions récentes de X.
CEPENDANT, cette opération est parfois nécessaire dans des situations
unusuelles.</i>

<p>
Avec plusieurs moniteurs multi-sync, il est possible de configurer un
serveur X avec une résolution acceptable. Si quelqu'un a déjà essayé de
faire ceci avec les utilitaires standards xorgconfig ou XF86Setup, il
est fort probable qu'il n'aie pas obtenu les meilleurs résultats
possibles. Un des aspects les plus difficiles est de simplement
configurer votre moniteur avec votre résolution préférée, puis de
paramétrer la vitesse de balayage vertical à une valeur d'au moins 72-75
Hz, une valeur où le scintillement de l'écran est beaucoup moins visible
à l'oeil humain. Inversement, qu'en est t'il quand vous essayez de
positionner la vitesse de balayage vertical à une vitesse très faible ?
Vous pouvez le positionner à 50 Hz de telle manière à pouvoir en
capturer le contenu sur une vidéo sans scintillement, mais les méthodes
pour effectuer cette opération ne sont pas évidentes avec les outils et
la documentation standards de X.

<p>
Enfin, il est possible (avec les nouveaux moniteurs du moins) d'utiliser
des vitesses de balayage vertical de 85 Hz et plus, afin d'obtenir une
image très propre et agréable à des résolutions normalement utilisées
par beaucoup de gens sur des moniteurs VGA à faible coût (800x600,
1024x768, 1152x900, 1280x1024). Le serveur X possède un mécanismequi
vous permet de décrire en détail le mode vidéo que vous voulez utiliser
: C'est le ModeLine. Un ModeLine a quatre sections. Un chiffre pour la
dotclock (bande passante), quatre chiffres pour les temporisations
horizontales, quatre chiffres pour les temporisations verticales, et une
section optionnelle contenant une liste de drapeaux spécifiant d'autres
caractéristiques du mode (telles que l'interlaçage, DoubleScan, ... Voir
la page xorg.conf(5) du manuel pour plus de détails concernant
ModeLine).

<p>
La génération d'un ModeLine s'apparente à de la magie noire...
Heureusement, il existe plusieurs scripts qui peuvent vous en générer
un. Un de ces scripts est
<a href="http://www-sop.inria.fr/cgi-bin/koala/nph-colas-modelines">Colas
XFree86 ModeLine Generator</a>. Un autre est 
<a href="http://xtiming.sourceforge.net/">The XFree86 ModeLine Generator</a> 
hébérgé par SourceForge et plusieurs
autres sont disponibles sur
<a href="http://freshmeat.net/search/?q=modeline">Freshmeat</a>.
Avant de pouvoir utiliser ces générateurs ModeLine, vous devez trouver
les limites de synchronisation verticale et horizontale de votre
moniteur. C'est souvent documenté dans le manuel ou sur le site Web du
constructeur. Si ne vous trouvez ni l'un ni l'autre, faites une
recherche sur le Web avec le modèle et la marque du moniteur. Plusieurs
personnes sympathiques ont rassemblé des listes avec ce type
d'informations.

<p>
Par exemple, supposons que vous avez un moniteur Dell D1226H. Vous avez
effectué des recherches en agonisant sur le site Web de Dell pour savoir
qu'il a une plage de balayage horizontal de 30-95 kHz et 50-160 Hz en
balayage vertical. Visitez la page du générateur de ModeLine et
saisissez ces informations. La prochaine étape consiste à saisir la
vitesse minimale de balayage vertical que vous voulez. N'importe quelle
vitesse de 72 Hz et au delà devrait permettre d'obtenir un scintillement
peu visible. Plus vous montez la vitesse, plus votre image est claire et
précise.

<p>
Avec toutes ces informations, le script va générer un ModeLine pour
toutes les résolutions 4x3 possibles que votre moniteur peut supporter,
et au-dessus de la vitesse minimale de balayage verticale que vous avez
saisi. Si quelqu'un avait saisi les spécifications de ce moniteur Dell
avec une vitesse minimale de balayage verticale de 75 Hz, le script
donnera quelque chose comme :

<pre>
ModeLine "320x240" 20.07 320 336 416 448 240 242 254 280 #160Hz
ModeLine "328x246" 20.86 328 344 424 456 246 248 260 286 #160Hz
...
ModeLine "816x612" 107.39 816 856 1056 1136 612 614 626 652 #145Hz
ModeLine "824x618" 108.39 824 864 1064 1144 618 620 632 658 #144Hz
ModeLine "832x624" 109.38 832 872 1072 1152 624 626 638 664 #143Hz
...
ModeLine "840x630" 109.58 840 880 1080 1160 630 632 644 670 #141Hz
ModeLine "848x636" 110.54 848 888 1088 1168 636 638 650 676 #140Hz
...
ModeLine "1048x786" 136.02 1048 1096 1336 1432 786 788 800 826 #115Hz
ModeLine "1056x792" 136.58 1056 1104 1344 1440 792 794 806 832 #114Hz
ModeLine "1064x798" 137.11 1064 1112 1352 1448 798 800 812 838 #113Hz
...
ModeLine "1432x1074" 184.07 1432 1496 1816 1944 1074 1076 1088 1114 #85Hz
ModeLine "1576x1182" 199.86 1576 1648 2008 2152 1182 1184 1196 1222 #76Hz
ModeLine "1584x1188" 198.93 1584 1656 2016 2160 1188 1190 1202 1228 #75Hz
</pre>

<p>
Bien que ce moniteur prétend atteindre 1600x1200 @ 75 Hz, le script ne
dit pas que cette résolution peut être atteinte à 75 Hz. Si vous voulez
précisément avoir 1600x1200, abaissez un peu votre vitesse minimale ...
(Dans l'exemple qui suit, nous fixons cette vitesse à 70 Hz)

<pre>
ModeLine "1592x1194" 197.97 1592 1664 2024 2168 1194 1196 1208 1234 #74Hz
ModeLine "1600x1200" 199.67 1600 1672 2032 2176 1200 1202 1214 1240 #74Hz
ModeLine "1608x1206" 198.65 1608 1680 2040 2184 1206 1208 1220 1246 #73Hz
ModeLine "1616x1212" 197.59 1616 1688 2048 2192 1212 1214 1226 1252 #72Hz
ModeLine "1624x1218" 199.26 1624 1696 2056 2200 1218 1220 1232 1258 #72Hz
ModeLine "1632x1224" 198.15 1632 1704 2064 2208 1224 1226 1238 1264 #71Hz
ModeLine "1640x1230" 199.81 1640 1712 2072 2216 1230 1232 1244 1270 #71Hz
ModeLine "1648x1236" 198.64 1648 1720 2080 2224 1236 1238 1250 1276 #70Hz
</pre>

<p>
Comme on peut le voir, ce moniteur peut faire 1600x1200 @ 74 Hz quand la
vitesse de point (bande passante) est limitée à 200 Mhz. Positionnez la
bande passante par rapport aux limites définies par le moniteur.

<p>
Une fois que vous avez vos ModeLines, mettez les dans le fichier
/etc/X11/xorg.conf. Mettez en commentaire les anciens ModeLines de
telle façon à pouvoir les utiliser par la suite si les nouveaux ne
fonctionnent pas. Ensuite choisissez votre résolution. D'abord vous
devez déterminer si X tourne en mode accéléré (ce qui est le cas avec la
plupart des cartes graphiques) afin de savoir quelle section
<tt>"Screen"</tt> modifier dans le fichier xorg.conf. Sinon, modifiez
toutes les sections Screen.

<pre>
Section "Screen"
   Driver          "Accel"
   Device          "Primary Card"
   Monitor         "Primary Monitor"
   DefaultColorDepth 32
   SubSection "Display"
      Depth        32
      Modes        "1280x1024" "1024x768"
   EndSubSection
</pre>

<p>
La première fréquence que vous voyez après la ligne &quot;Modes&quot;
est la fréquence avec laquelle X va démarrer. En appuyant sur les
touches CTRL-ALT-MOINS DU PAVE NUMERIQUE, ou CTRL-ALT-PLUS DU PAVE
NUMERIQUE, vous pouvez commuter entre les fréquences que vous avez
spécifié sur cette ligne. Selon la section ci-dessus, X va essayer de
démarrer en mode couleur 32 bits (via la directive DefaultColorDepth
sans laquelle X va démarrer en mode couleur 8 bits). La première
résolution qu'il essayera de charger est 1280x1024 (il suit l'ordre
précisé dans la ligne Modes). Notez que &quot;1280x1024&quot; est
simplement un label des valeurs du ModeLine.

<p>
Il est à noter que le script de génération du ModeLine possède des
options qui permettent de rendre ces temporisations plus flexibles pour
les vieux ou petits moniteurs. De même, il a la capacité de fournir des
ModeLines pour des résolutions spécifiques. Selon le type de matériel
que vous avez, il ne sera peut-être pas facile de l'utiliser avec les
options par défaut. Si l'image est trop grande, trop large, ou trop
petite, ou elle est décalée horizontalement ou verticalement, et les
contrôles du moniteur ne sont pas suffisants pour corriger son
apparence, vous pouvez utiliser xvidtune(1) afin d'ajuster le ModeLine
pour mieux respecter les temporisations du moniteur.

<p>
Sur la plupart des moniteurs modernes, il n'y a pas de limite fixée sur
la bande passante. C'est pourquoi elles ne sont plus listées dans les
spécifications. Mais plus vous augmentez la bande passante, plus l'image
devient floue. Ainsi, vous pouvez commencer par la bande passante
(appelée aussi &quot;dotclock&quot;) de votre carte pour tester (vous ne
pouvez pas abimer votre moniteur comme ça) et diminuer la bande passante
au fur et à mesure jusqu'à ce que vous obteniez une image précise.

<p>
Cette procédure est inutilement complexe. X.org améliore nettement ce
processus puisque cette version possède des modes internes et est
capable de découvrir les capacités des moniteurs &quot;plug and
play&quot; à travers DCC et DCC2.

5A
<p>
Vous pouvez télécharger le script Colas XFree86 ModeLine
Generator à l'adresse 
<a href="http://koala.ilog.fr/ftp/pub/Klone/">http://koala.ilog.fr/ftp/pub/Klone/</a>. 
Vous aurez besoin de télécharger et de compiler l'interpréteur Klone.
Cet interpréteur se trouve dans la collection de ports sous
<tt>lang/klone</tt>. Les scripts sont dans le répertoire scripts de la
distribution Klone (la collection de ports les installe dans
/usr/local/klone/scripts).

<p> 
Deux versions du script sont incluses. La première est une version CGI
identique à la page Web ci-dessus. La seconde est une version non-CGI
qui va lire votre fichier xorg.conf dans sa totalité, décoder les
spécifications du moniteur que vous avez saisi dans xorgconfig/XF86Setup
(Réfléchissez, avez-vous réellement renseigné le fichier avec les
spécifications de votre moniteur ou avez-vous gardé les valeurs
génériques ?), et corriger les ModeLines existants en conséquence.

<p>
<font color= "#0000e0">
<a href= "index.html">[Index de La FAQ]</a>
<a href= "faq10.html">[Section 10 - Gestion du Système]</a>
<a href= "faq12.html">[Section 12 - Questions Spécifiques Aux
Plates-Formes]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq11.html,v 1.60 ]<br>
$Translation: faq11.html,v 1.29 2006/02/27 09:04:42 ajacoutot Exp $<br>
-->
$OpenBSD: faq11.html,v 1.24 2006/02/27 21:23:27 saad Exp $
</small>

</body>
</html>
