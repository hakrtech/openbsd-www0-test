<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>8 - Questions G&eacute;n&eacute;rales</title>
<link rev=  "made"          href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2003 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif">
<p>
<font color= "#0000e0">
<a href= "index.html">[Index de la FAQ]</a>
<a href= "faq7.html">[Section 7 - Contr&ocirc;les du clavier et de
    l'affichage]</a>
<a href= "faq9.html">[Section 9 - Migrer depuis Linux]</a>
</font>

<h1><font color="#e00000">8 - Questions Générales</font></h1>

<!-- UNCOMMENT ONLY WHEN THE FILE IS OUT OF SYNC -->
<hr>
<p>
<b><font color="#e00000">Remarque Importante :</font></b> Le contenu de
   ce fichier est obsol&egrave;te. Consultez la version anglaise 
   <a href="../faq8.html">ici</a> pour des informations &agrave; jour.

<p>
Si vous souhaitez contribuez &agrave; l'effort de traduction,
pri&egrave;re de consultez
<a href="../../fr/translation.html">la page de traduction</a>.

<!-- -->
<hr>

<p>
<h3>Table des matières</h3>
<ul>
<li><a href= "#LostPW"      >8.1 - J'ai oubli&eacute; mon mot de
    passe root... Que dois-je faire !</a>
<li><a href= "#X"           >8.2 - X ne veut pas d&eacute;marrer, j'ai
    plein de messages d'erreur </a>
<li><a href= "#CVS"         >8.3 - Qu'est-ce que CVS, et comment
    est-ce que je l'utilise ?</a>
<li><a href= "#Ports"       >8.4 - Qu'est que l'arborescences des
    ports ?</a>
<li><a href= "#Packages"    >8.5 - Qu'est-ce qu'un package ?</a>
<li><a href= "#PortsvsPkgs" >8.6 - Dois-je Utiliser Les
Ports ou Les Packages ?</a>
<li><a href= "#NoFloppy"    >8.8 -  Existe-il un moyen d'utiliser
    mon lecteur de disquettes # alors qu'il n'&eacute;tait pas
    connect&eacute; durant la phase de d&eacute;marrage ?</a> 
<li><a href= "#Bootloader"  >8.9 - Le chargeur de
    d&eacute;marrage OpenBSD (<i>sp&eacute;cifique &agrave;
    i386</i>)</a>
<li><a href= "#SKey"        >8.10 - Utilisation de S/Key avec votre
    syst&egrave;me OpenBSD</a>
<li><a href= "#SMP"         >8.12 - Est-ce qu'OpenBSD supporte
    plusieurs processeurs ?</a>
<li><a href= "#TTY"         >8.13 - Parfois, j'ai des erreurs
    d'entr&eacute;e/sortie lorsque j'essaie d'utiliser mes
    p&eacute;riph&eacute;riques tty</a>
<li><a href= "#Browsers"    >8.14 - Quels sont les navigateurs 
          web disponibles sur OpenBSD ?</a>
<li><a href= "#mg"          >8.15 - Comment s'utilise l'&eacute;diteur
    mg ?</a>
<li><a href= "#ksh"         >8.16 - Apparemment, Ksh ne lit pas mon
    fichier .profile !</a>
<li><a href= "#motd"        >8.17 - Pourquoi le contenu de /etc/motd
    est-il &eacute;cras&eacute; alors que je l'ai modifi&eacute; ?</a>
<li><a href= "#wwwsolaris"  >8.18 - Pourquoi le site
    www.openbsd.org est-il h&eacute;berg&eacute; sur une machine Solaris
    ?</a>
<li><a href= "#PCI"         >8.19 - J'ai des probl&egrave;mes de
    d&eacute;tection de p&eacute;riph&eacute;riques PCI</a>
<li><a href= "truetype.html">8.20 - Les polices anti-alias&eacute;es
    et &quot;TrueType&quot; sous XFree86</a>
<li><a href= "#Journaling"  >8.21 -  Est-ce qu'OpenBSD supporte
    des syst&egrave;mes de fichiers journalis&eacute;s ? </a>
<li><a href= "#RevDNS"      >8.22 - Le DNS Inverse ou Pourquoi
    &ccedil;a prend autant de temps pour me connecter ?</a>
<li><a href= "#wwwnotstd"   >8.23 - Pourquoi les pages web
    OpenBSD ne sont pas conformes &agrave; HTML4/XHTML?</a>
<li><a href= "#NTPerror"    >8.24 - Pourquoi mon horloge
    est-elle d&eacute;cal&eacute;e d'une vingtaine de secondes ?</a>
</ul>

<hr> 

<p>
<a name= "LostPW"></a>
<h2>8.1 - J'ai oubli&eacute; mon mot de passe root... Que dois-je faire
      !</h2>

<p>
Appliquez la procédure suivante pour récupérer le mot de passe root :
<ol>
<li>Démarrer en mode "single user". Pour les architectures de type i386,
tapez "boot -s" à l'invite de démarrage.
<li>montez les disques.
<div style="margin-left: 2em">
<kbd># <b>fsck -p / &amp;&amp; mount -uw /</b></kbd>
</div>
<li>Si /usr n'est pas dans la même partition que / (/usr et / devraient
toujours être situés sur des partitions différentes), vous devrez alors
le monter aussi
<div style="margin-left: 2em">
<kbd># <b>fsck -p /usr &amp;&amp; mount /usr</b></kbd>
</div>

<li>exécutez <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=1">passwd(1)</a>
<li>démarrer en mode multi-utilisateur... et <i>souvenez-vous</i> de
votre mot de passe cette fois-ci !
</ol>

<p>
<a name= "X"></a>
<h2>8.2 - X ne veut pas d&eacute;marrer, j'ai plein de messages
      d'erreur</h2>

<p>
Si vous avez configuré correctement X et si vous utilisez un fichier
XF86Config dont le bon fonctionnement est sûr alors le problème réside
très probablement dans le paramètre machdep.allowaperture. Vous devez
aussi vous assurer que :

<blockquote><pre>
option APERTURE
</pre></blockquote>

<p>
fait partie de votre configuration noyau. [Cette option figure déjà dans
le noyau GENERIC]

<p>
Vous aurez alors besoin d'éditer <i>/etc/sysctl.conf</i> et changer la
valeur de machdep.allowaperture à 2 (<b>machdep.allowaperture=2</b>).
Ainsi X pourra accéder au pilote "aperture". Ce paramètre est
correctement positionné si vous avez répondu oui à la question qui vous
demande si vous comptez utiliser X lors de l'installation. OpenBSD
nécessite ce paramètre pour tout serveur X car il contrôle l'accès aux
ports d'E/S sur les cartes vidéo.

<p>
Concernant les autres problèmes de X sur i386, consultez la
Documentation En Lgne de X disponible à l'adresse 
<a href= "http://www.xfree86.org/support.html">http://www.xfree86.org/support.html</a>.

<p>
<a name= "CVS"></a>
<h2>8.3 - Qu'est-ce que CVS, et comment est-ce que je l'utilise ?</h2>

<p>
CVS est l'outil utilisé par le projet OpenBSD pour contrôler les
modifications apportées au code source. CVS est une contraction de
"Concurrent Versions System". Vous pouvez obtenir plus d'informations
concernant CVS à l'adresse
<a href="http://www.cvshome.org/">http://www.cvshome.org/</a>. CVS peut
être utilisé par l'utilisateur final pour maintenir ses arborescences
des sources et des ports à jour. CVS rend très simple le téléchargement
des sources à partir d'un des nombreux miroirs du projet.

<h3>Comment configurer initialement votre environnement CVS</h3>

<p>
Vous pouvez récupérer les sources à partir d'un des serveurs AnonCVS
OpenBSD. Ces serveurs sont listés dans la page
<a href="../../fr/anoncvs.html">OpenBSD AnonCVS</a>.
Une fois que vous avez choisi un serveur, vous devez choisir le module
que vous souhaitez récupérer. Il existe trois modules principaux dans
l'arborescence CVS :

<ul>
<li><i>src</i> - Le module "src" contient tout le code source d'OpenBSD,
y compris les sources "userland" et noyau.
<li><i>ports</i> - Le module "ports" contient tout ce dont vous aurez
besoin pour avoir l'arborescence des ports OpenBSD en entier. Pour en
savoir plus au sujet de cette arborescence, consultez <a
href="faq8.html#Ports">FAQ 8, Ports</a>.
<li><i>XF4</i> - Le module "XF4" contient la source pour compiler XFree
4.
</ul>

<p>
Maintenant que vous avez choisi le(s) module(s) à récupérer, il vous
reste une étape supplémentaire avant de pouvoir effectuer la
récupération. Vous devez choisir la méthode à utiliser. Par défaut, CVS
récupére les fichiers à l'aide de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1),</a> 
Mais quelques serveurs AnonCVS permettent l'utilisation de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rsh&amp;sektion=1">rsh.</a> 
Pour celles/ceux qui sont derrière un pare-feu, il existe aussi les
options "pserver" et certains serveurs AnonCVS exécutent ssh sur le port
2022. Assurez-vous d'avoir lu la
<a href="../../fr/anoncvs.html">page OpenBSD AnonCVS</a> pour savoir
quels serveurs supportent telle ou telle méthode. Maintenant voyons
comment récupérer les sources de façon simple. Dans l'exemple ci-après,
nous allons utiliser un serveur AnonCVS situé aux Etats-Unis mais si
vous êtes dans un autre pays, utilisez un serveur proche de chez vous.
Il existe plusieurs serveurs AnonCVS, situés un peu partout dans le
monde. Nous allons aussi utiliser ssh pour récupérer les fichiers.

<blockquote><pre>
$ <strong>export CVSROOT=anoncvs@anoncvs.usa.openbsd.org:/cvs</strong>
$ <strong>cvs get src</strong>
Warning: Remote host denied X11 forwarding, perhaps xauth program could not be run on the server side.
cvs checkout: in directory src:
cvs checkout: cannot open CVS/Entries for reading: No such file or directory
cvs server: Updating src
U src/Makefile
[snip]
</pre></blockquote>

<p>
Notez comment nous avons utilisé la variable d'environnement CVSROOT.
Cette variable permet à 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1">cvs(1)</a>
de savoir quel serveur AnonCVS il doit utiliser. Il est aussi possible
de faire ça avec l'option <i>-d</i>. Par exemple :

<blockquote><pre>
$ <strong>cvs -d anoncvs@anoncvs.usa.openbsd.org:/cvs get src</strong>
</pre></blockquote>

<p>
Ces commandes doivent être exécutées dans <i>/usr</i>, qui va ensuite
créer les répertoires <i>/usr/src</i>, <i>/usr/ports</i>, et
<i>/usr/www</i>. Cela dépend bien évidemment du/des module(s) que vous
souhaitez récupérer. Vous pouvez télécharger ces modules et les mettre
dans n'importe quel répertoire mais si vous voulez les utiliser (ç.à.d.
faire un "make build"), ils doivent être situés aux endroits précités.

<h3>Garder votre arborescence CVS à jour</h3>

<p>
Une fois que vous avez récupéré votre arborescence initiale, la garder à
jour est la partie facile. Vous pouvez la mettre à jour à n'importe quel
moment. Certains serveurs AnonCVS récupèrent les mises à jour plus
souvent que d'autres. Encore une fois, consultez la <a
href="../../fr/anoncvs.html">page OpenBSD AnonCVS</a>. Dans l'exemple
suivant, nous allons mettre à jour le module "www" à partir de
anoncvs.usa.openbsd.org. Remarquez l'utilisation de l'option "-q" qui
diminue la verbosité du serveur.

<blockquote><pre>
$ <strong>echo $CVSROOT</strong>
anoncvs@anoncvs.usa.openbsd.org:/cvs
$ <strong>cvs -q up -Pd www</strong>
Warning: Remote host denied X11 forwarding, perhaps xauth program could not be run on the server side.
U www/want.html
M www/faq/faq8.html
ericj@oshibana:~&gt;
</pre></blockquote>

<h3>Autres options cvs</h3>

<p>
Pour certaines personnes, la bande passante et le temps sont de sérieux
problèmes qu'il faut prendre en considération lors de la mise à jour des
arborescences. CVS a une option "-z[1-9]" qui utilise gzip pour
compresser les données. Pour l'utiliser, faites "-z[compression-level]"
: Par exemple "-z3" pour un niveau de compression 3.

<p>
<a name= "Ports"></a>
<h2>Qu'est que l'arborescences des ports ?</h2>
<!-- XXXversion -->
<p>
L'arborescence des ports est un ensemble de fichiers Makefile qui
téléchargent, corrigent, configurent et installent des programmes
utilisateur afin que vous puissiez les utiliser dans un environnement
OpenBSD sans avoir à faire toutes les opérations précitées manuellement.
Vous pouvez récupérer cette arborescence à partir de n'importe quel
serveur FTP OpenBSD. Elle y est représentée par le fichier
<kbd>/pub/OpenBSD/3.3/ports.tar.gz</kbd>. Les ports les plus récents
sont aussi disponibles par le biais de l'arborescence cvs "ports" ou par
FTP : <kbd>/pub/OpenBSD/snapshots/ports.tar.gz</kbd>.  Cependant, pour
la plupart des utilisateurs, les packages sont une meilleure option. Les
packages sont crées à partir des ports et sont déjà compilés et prêts à
l'utilisation. Pour en savoir plus concernant les packages, consultez 
<a href="#Packages">FAQ 8, Packages</a>.

<h3>Note importante concernant la synchronisation du système et des
ports</h3>

<p>
A tout moment, OpenBSD a trois versions "actives" :
<ul>
<li><a href="../../orders.html">Release</a>: Version sur le CD.
<li><a href="../../fr/stable.html">Stable</a>: Release, plus des
améliorations de la sécurité et la fiabilité<br>
<li><a href="upgrade-minifaq.html">Current</a>: La version de
développement d'OpenBSD.
</ul>
<strong>NE MIXEZ PAS des versions des Ports et d'OpenBSD !</strong>
<p>
Si votre système est une version "Release", utilisez la version
"Release" de l'arborescence des ports. N'essayez pas d'utiliser une
version "Current" de l'arborescence des ports sur un système "Release"
ou "Stable". Non seulement il y a peu de chances pour que cela
fonctionne mais en plus vous allez irriter des personnes quand vous
demandez de l'aide lorsque "rien ne semble fonctionner !". Il est à
noter qu'il y a aussi une branche <a href="../../fr/stable.html">-Stable</a> de l'arborescence des Ports, qui
contient les correctifs critiques des ports "Release".

<p>
Ainsi, un nouveau port a peu de chances de fonctionner sur votre
"ancien" système -- même si votre système est une version -current
vieille de quelques semaines seulement.

<p>
Si vous n'avez pas installé l'arborescence des ports, vous pouvez la
télécharger à partir d'un des <a href="../../fr/ftp.html">serveurs
FTP</a> OpenBSD ou, bien entendu, la récupérer à partir du <a
href="../../orders.html">CDROM</a>. Le fichier se nomme
<kbd>ports.tar.gz</kbd>. Vous devez extraire l'archive dans le
répertoire /usr. Cela va créer le sous-répertoire /usr/ports et tous les
répertoires en dessous. Par exemple :

<pre>
     $ <strong>ftp ftp://ftp.openbsd.org/pub/OpenBSD/3.3/ports.tar.gz</strong>
     $ <strong>sudo cp ports.tar.gz /usr</strong>
     $ <strong>cd /usr; sudo tar xzf ports.tar.gz</strong>
</pre>

<p>
Un snapshot de l'arborescence des ports est aussi créée quotidiennement
et peut être téléchargée à partir de n'importe quel <a
href="../../fr/ftp.html">serveur FTP OpenBSD</a>. Le fichier
correspondant est <kbd>/pub/OpenBSD/snapshots/ports.tar.gz</kbd>. Si
vous installez un snapshot d'OpenBSD, vous devriez utiliser un snapshot
correspondant des ports. Encore une fois, assurez-vous de synchroniser
votre arborescence des ports et votre système OpenBSD.

<h3>Quels ports sont disponibles ? Comment les trouver ?</h3>

<p>
Utilisez l'arborescence des ports pour rechercher des mots-clés. Pour
tirer profit de cette fonctionnalité, utilisez <kbd>make
search key="searchkey"</kbd>. Voici un exemple de recherche de 'samba' :

<blockquote><pre>
$ <strong>make search key=&quot;samba&quot;</strong>
  [...snip...]
Port:   amanda-client-2.4.2.2
Path:   misc/amanda,-client
Info:   network-capable tape backup (client only)
Maint:  Tom Schutter &lt;t.schutter@att.net&gt;
Index:  misc
L-deps:
B-deps: :devel/gmake gnuplot-*:math/gnuplot gtar-*:archivers/gtar samba-*:net/samba/stable
R-deps:
Archs:  any

Port:   samba-2.2.8a
Path:   net/samba/stable
Info:   SMB and CIFS client and server for UNIX
Maint:  The OpenBSD ports mailing-list &lt;ports@openbsd.org&gt;
Index:  net
L-deps: popt::devel/popt
B-deps: :devel/autoconf/2.13 :devel/metaauto
R-deps:
Archs:  any
  [...snip...]
</pre></blockquote>

<h3>Installer des Ports</h3>

<p>
Les ports sont configurés de telle à façon à être EXTREMEMENT faciles à
utiliser. Voici un exemple d'installation du programme X11 xfig. Notez
que les dépendances sont automatiquement détectées et respectées.

<p>
Tout d'abord, vous devez aller dans le répertoire du programme que vous
souhaitez installer. Si vous recherchez un programme particulier, vous
pouvez soit mettre à jour votre base locate, ou utilisez la fonction
"search" précitée. Une fois que vous êtes dans le bon répertoire, vous
pouvez tout simplement taper <kbd>make install</kbd>. Par exemple :

<blockquote><pre>
$ <strong>sudo make install</strong>
===&gt;  Checking files for xfig-3.2.4
&gt;&gt; xfig.3.2.4.full.tar.gz doesn't seem to exist on this system.
&gt;&gt; Attempting to fetch /usr/ports/distfiles/xfig.3.2.4.full.tar.gz from http://w
ww.xfig.org/xfigdist/.
100% |**************************************************|  5042 KB    00:31
&gt;&gt; Checksum OK for xfig.3.2.4.full.tar.gz. (sha1)
===&gt;  xfig-3.2.4 depends on: jpeg.62 - jpeg.62 missing...
===&gt;  Verifying install for jpeg.62 in graphics/jpeg
===&gt;  Checking files for jpeg-6b
&gt;&gt; jpegsrc.v6b.tar.gz doesn't seem to exist on this system.
&gt;&gt; Attempting to fetch /usr/ports/distfiles/jpegsrc.v6b.tar.gz from ftp://ftp.uu
.net/graphics/jpeg/.
'EPSV': command not understood.
100% |**************************************************|   598 KB    00:06
&gt;&gt; Checksum OK for jpegsrc.v6b.tar.gz. (sha1)
===&gt;  Extracting for jpeg-6b
===&gt;  Patching for jpeg-6b
===&gt;  Configuring for jpeg-6b
checking for gcc... cc
checking whether the C compiler (cc -O2   ) works... yes
checking whether the C compiler (cc -O2   ) is a cross-compiler... no
checking whether we are using GNU C... yes
  [...snip...]
</pre></blockquote>

<h3>Utiliser les Saveurs</h3>
<p>
Plusieurs applications dans l'arborescence des ports supportent des
options d'installation différentes, appelées <i>saveurs</i> ("flavors"
en anglais). Si un port est disponible dans plusieurs saveurs, vous
pouvez choisir la saveur souhaitée en utilisant tout simplement une
variable d'environnement avant de compiler le port. Si plusieurs
fonctionnalités sont souhaitées, la variable FLAVOR peut être
initialisée a une liste de saveurs souhaitées séparées par des espaces.
A l'heure actuelle, plusieurs ports ont des saveurs qui incluent le
support base de données, le support des systèmes sans environnement X,
ou des fonctionnalités réseau supplémentaires telles que SSL et IPv6.

<blockquote><pre>
$ <strong>pwd</strong>
/usr/ports/net/mtr
$ <strong>make show=FLAVORS</strong>
no_x11
$ <strong>env FLAVOR="no_x11" make</strong>
===&gt;  mtr-0.49-no_x11 depends on: gmake-3.80 - not found
===&gt;  Verifying install for gmake-3.80 in devel/gmake
===&gt;  Checking files for gmake-3.80
&gt;&gt; make-3.80.tar.gz doesn't seem to exist on this system.
&gt;&gt; Attempting to fetch /usr/ports/distfiles/make-3.80.tar.gz from ftp://ftp.gnu.
org/gnu/make/.
Unknown command.
100% |**************************************************|  1183 KB    00:07
&gt;&gt; Checksum OK for make-3.80.tar.gz. (sha1)
  [...snip...]
$ <strong>sudo env FLAVOR="no_x11" make install</strong>
===>  Faking installation for mtr-0.49-no_x11
  [...snip...]
===>  Building package for mtr-0.49-no_x11
Creating package /usr/ports/packages/i386/All/mtr-0.49-no_x11.tgz
Using SrcDir value of /usr/ports/net/mtr/w-mtr-0.49-no_x11/fake-i386-no_x11/usr/
local
Creating gzip'd tar ball in '/usr/ports/packages/i386/All/mtr-0.49-no_x11.tgz'
===>  Installing mtr-0.49-no_x11 from /usr/ports/packages/i386/All/mtr-0.49-no_a
x11.tgz
</pre></blockquote>

<h3>Afficher les ports/packages installés</h3>
<p>
Vous pouvez obtenir une liste des ports/packages installés en utilisant
la commande pkg_info.
<blockquote><pre>
$ <strong>/usr/sbin/pkg_info</strong>
zsh-4.0.6           The Z shell.
screen-3.9.13       A multi-screen window manager.
emacs-21.2          GNU editing macros.
tcsh-6.12.00        An extended C-shell with many useful features.
bash-2.05b          The GNU Borne Again Shell.
zip-2.3             Create/update ZIP files compatible with pkzip.
ircII-20030314      An enhanced version of ircII, the Internet Relay Chat client
ispell-3.2.06       An interactive spelling checker.
tin-1.4.6           TIN newsreader (termcap based)
procmail-3.22       A local mail delivery agent.
strobe-1.06         Fast scatter/gather TCP port scanner
lsof-4.67           Lists information about open files.
ntp-4.1.74          Network Time Protocol Implementation.
ncftp-3.1.5p0       ftp replacement with advanced user interface
nmh-1.0.4p1         The New MH mail handling program
bzip2-1.0.2         A block-sorting file compressor
</pre></blockquote>


<h3>Informations supplémentaires</h3>

<p>
Vous pouvez trouver plus d'informations concernant les ports dans la
page du manuel 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ports&amp;sektion=7">ports(7)</a> 
et la <a href="../../frports.html">page des ports</a>.

<p>
Notre arborescence des ports évolue constamment et si vous voulez nous
aider à la faire évoluer, merci de consulter :
<a href="../../porting.html">http://www.openbsd.org/porting.html</a>.


<p>
<a name= "Packages"></a>
<h2>8.5 - Qu'est-ce qu'un package ?</h2>

<p>
Les packages sont les binaires précompilés de quelques programmes très
utilisés. Ils sont prêts à l'utilisation sous OpenBSD. Comme les ports,
les packages sont très faciles à maintenir et à mettre à jour. Des
packages sont constamment ajoutés. Assurez-vous de vérifier chaque
nouvelle version d'OpenBSD pour avoir les packages additionnels.

<p>
Voici une liste des outils utilisés pour gérer les packages.<br>
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a> 
  - un outil pour installer les distributions logicielles sous
    forme de packages
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_create&amp;sektion=1">pkg_create(1)</a> 
  - un outil pour créer les distributions logicielles sous 
    forme de packages
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&amp;sektion=1">pkg_delete(1)</a>
  - un outil pour supprimer les distributions logicielles 
    précédemment installées sous forme de packages
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&amp;sektion=1">pkg_info(1)</a>
  - un outil pour afficher des informations relatives aux packages
    logiciels
</ul>

<h3>Où trouver des packages</h3>
<!-- XXXversion -->
<p>
Si vous êtes un utilisateur intelligent et que vous avez acheté un des
<a href="../../orders.html">CDs OpenBSD</a>, alors les packages se
trouvent sur n'importe quel CD suivant votre architecture. Si vous ne
possédez pas de CD OpenBSD, vous pouvez télécharger les packages à
partir de n'importe quel miroir ftp. La liste des miroirs figure dans la
page <a href="../../fr/ftp.html">FTP OpenBSD</a>. Les packages sont
situés sous <i>/pub/OpenBSD/3.3/packages</i>. Les packages sont classés
ensuite par architecture matérielle. 

<h3>Installer des Packages</h3>

<p>
Pour installer des packages, utilisez l'outil 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>. 
pkg_add(1) est très facile à utiliser. Dans les deux exemples suivants,
pkg_add(1) sera utilisé pour installer un package. Le premier exemple
montre comment pkg_add(1) est utilisé pour installer un package se
trouvant sur un disque local alors que le second exemple montre
l'installation d'un package via ftp. Dans les deux exemples,
screen-3.9.13 est installé.

<p>
Installation à partir d'un disque local
<blockquote><pre>
$ <strong>sudo pkg_add -v screen-3.9.13.tgz</strong>
Requested space: 749864 bytes, free space: 2239117312 bytes in /var/tmp/instmp.cpsHA27596
Running install with PRE-INSTALL for `screen-3.9.13'
extract: Package name is screen-3.9.13
extract: CWD to /usr/local
extract: /usr/local/bin/screen-3.9.13
extract: execute 'ln -sf screen-3.9.13 /usr/local/bin/screen'
extract: /usr/local/man/man1/screen.1
extract: /usr/local/info/screen.info
extract: execute '[ -f /usr/local/info/dir ] || sed -ne '1,/Menu:/p' /usr/share/info/dir &gt; /usr/local/info/dir'
extract: execute 'install-info /usr/local/info/screen.info /usr/local/info/dir'
extract: /usr/local/lib/screen/screencap
extract: /usr/local/lib/screen/screenrc
extract: CWD to .
Running mtree for `screen-3.9.13'
mtree -q -U -f +MTREE_DIRS -d -e -p /usr/local
Running install with POST-INSTALL for `screen-3.9.13'

+---------------
| The file /etc/screenrc has been created on your system.
| You may want to verify/edit its contents
|
| The file /usr/local/lib/screen/screencap contains a
| termcap like description of the screen virtual terminal.
| You may use it to update your terminal database.
| See <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=termcap&amp;sektion=5">termcap(5)</a>.
+---------------

Attempting to record package into `/var/db/pkg/screen
Package `screen-3.9.13' registered in `/var/db/pkg/screen-3.9.13'
</pre></blockquote>

<p>
Dans cet exemple, le drapeau <b>-v</b> est utilisé pour obtenir une
sortie plus verbeuse. Cette option n'est pas nécessaire mais elle est
utile pour le déboguage. Elle a été employée dans cet exemple pour
montrer ce que pkg_add(1) fait en réalité. Notez cependant qu'il y a un
certain nombre de messages valides affichés et indépendants de l'option
<b>-v</b> qui mentionnent le fichier <i>/etc/screenrc</i>.

<p>
Installation via ftp
<blockquote><pre>
$ <strong>sudo pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/3.3/packages/i386/screen-3.9.13.tgz</strong>
&gt;&gt;&gt; ftp -o - ftp://ftp.openbsd.org/pub/OpenBSD/3.3/packages/i386/screen-3.9.13.tgz

+---------------
| The file /etc/screenrc has been created on your system.
| You may want to verify/edit its contents
|
| The file /usr/local/lib/screen/screencap contains a
| termcap like description of the screen virtual terminal.
| You may use it to update your terminal database.
| See termcap(5).
+---------------
</pre></blockquote>

<p>
Dans cet exemple, vous pouvez voir que nous avons installé un package
i386. Changez ce paramètre avec votre architecture. Remarque : Les
architectures n'ont pas forcèment les mêmes packages. Quelques ports ne
fonctionnement pas sur certaines architectures. Le drapeau <b>-v</b> n'a
pas été utilisé. Seuls les messages NECESSAIRES sont affichés.

<h3>Voir et Supprimer Les Packages Installés</h3>

<p>
L'outil
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&amp;sektion=1">pkg_info(1)</a>
est utilisé pour visualiser la liste des packages installés sur votre
systèmes. Cette opération est généralement nécessaire pour trouver le
nom correct d'un package avant de pouvoir le supprimer. Pour voir les
packages installés sur votre système, utilisez :

<blockquote><pre>
$ <strong>pkg_info</strong>
mpg123-0.59r       mpeg audio 1/2 layer 1, 2 and 3 player
nmap-3.00          port scanning large networks
ircII-20030314     enhanced version of ircII (internet relay chat)
screen-3.9.13      multi-screen window manager
unzip-5.50         extract, list &amp; test files in a ZIP archive
ntp-4.1.74         Network Time Protocol implementation
icb-5.0.9p1        Internet CB - mostly-defunct chat client
</pre></blockquote>

<p>
Pour supprimer un package, notez le nom correct du package tel qu'il est
affiché par pkg_info(1) et utilisez 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&amp;sektion=1">pkg_delete(1)</a>
pour supprimer le package. Dans l'exemple ci-dessous, le package screen
est supprimé. Il est à noter que dans certains cas, des instructions
pour supprimer des objets supplémentaires non supprimés par
pkg_delete(1) sont affichées. Vous pouvez utiliser le drapeau <b>-v</b>
pour obtenir une sortie plus verbeuse.

<blockquote><pre>
$ <strong>sudo pkg_delete screen-3.9.13</strong>

+---------------
| To completely deinstall the screen-3.9.13 package you need to perform
| this step as root:
|
|           rm -f /etc/screenrc
|
| Do not do this if you plan on re-installing screen-3.9.13
| at some future time.
+---------------
</pre></blockquote>

<a name="PortsvsPkgs"></a>
<h2>8.6 - Dois-je Utiliser Les
Ports ou Les Packages ?</h2>
Il est généralement HAUTEMENT conseillé d'utiliser les 
<a href="#Packages">packages</a> au lieu de construire une application à
partir des <a href="#Ports">ports</a>. L'équipe OpenBSD gérant les ports
considèrent les packages comme l'objectif de leur travail de portage et
pas les ports.

<p>
Compiler une application complexe à partir des sources n'est pas une
chose triviale. Non seulement l'application doit être compilée mais en
plus, les outils permettant sa compilation doivent aussi être compilés.
Malheureusement, OpenBSD, les outils et l'application sont tous en
évolution et souvent, faire marcher toutes les composants ensemble est un
challenge. Une fois que tout fonctionne, une mise à jour dans un des
composants le lendemain pourrait très bien casser cette belle mécanique.
Tous les <a href="faq1.html#Next">six mois</a>, alors qu'une <a
href="faq5.html#Flavors">nouvelle version</a> d'OpenBSD est créée, un
effort est effectué pour tester la compilation de chaque port sur chaque
plate-forme mais durant le cycle de développement, il est probable que
certains ports ne fonctionnent pas.

<p>
En plus de faire fonctionner tous les composants ensemble, il y a aussi
les problèmes liés au temps et aux ressources requis pour compiler
quelques applications à partir des sources. Un exemple usuel est <a
href="http://www.cvsup.org/">CVSup</a>, un outil communément utilisé
pour <a href="../fr/cvsup.html">mettre à jour l'arborescence des sources
OpenBSD</a>. L'installation de CVSup sur un système assez rapide avec
une bonne connexion Internet nécessite environ dix secondes : le temps
nécessaire pour télécharger et extraire les données d'un seul package de
511kB. Par contraste, la compilation de CVSup sur la même machine à
partir des sources est une énorme tâche, nécessitant plusieurs outils et
un "bootstrap" au niveau du compilateur : une demi-heure environ est
nécessaire.
D'autres applications, telles que <a
href="http://www.mozilla.org">Mozilla</a> ou <a
href="http://www.kde.org">KDE</a> nécessiteraient plusieurs heures et
des quantités énormes d'espace disque et de RAM/swap pour être
compilées. Pourquoi perdre autant de temps et d'énergie lorsque les
programmes sont déjà compilés et prêts à l'utilisation sur votre <a
href="../orders.html">jeu de CDs</a> ou sur un <a
href="../../fr/ftp.html">miroir FTP</a> ?

<p>
Bien entendu, il y a un certain nombre de raisons pour utiliser les
ports au lieu des packages dans certains cas :

<ul>
<li>Les règles de distribution empêchent OpenBSD de distribuer un
package.
<li>Vous souhaitez modifier ou déboguer l'application ou étudier son
code source.
<li>Vous avez besoin d'une saveur ("FLAVOR") d'un port qui n'est pas
prise en compte par l'équipe OpenBSD de gestion des ports.
<li>Vous souhaitez modifier l'agencement des répertoires (en modifiant
PREFIX ou SYSCONFDIR)
</ul>

Cependant, pour la plupart des gens et la plupart des applications,
l'utilisation des packages est bien plus facile. C'est la méthode
recommandée pour ajouter des applications à OpenBSD.

<p>
<a name= "NoFloppy"></a>
<h2>8.8 - Existe-il un moyen d'utiliser mon lecteur de disquettes #
      alors qu'il n'&eacute;tait pas connect&eacute; durant la phase de
      d&eacute;marrage ?</h2>

<p>
Bien sûr. Vous devez ajouter "flags 0x20" à la fin de l'entrée fd* dans
le fichier de configuration du noyau et recompiler votre noyau. La ligne
devrait correspondre à :

<blockquote><pre>
fd*     at fdc? drive ? flags 0x20
</pre></blockquote>

<p>
Après cela, vous serez en mesure d'utiliser le lecteur de disquettes
n'importe quand. Il ne sera plus nécessaire de l'attacher avant le
démarrage.

<p>
<a name= "Bootloader"></a>
<h2>8.9 - Le chargeur de d&eacute;marrage OpenBSD (<i>sp&eacute;cifique
      &agrave; i386</i>)</h2>

<p>
Lorsque vous démarrez votre système OpenBSD, vous avez probablement
remarqué l'invite de démarrage.

<p>
<blockquote>
boot&gt;
</blockquote>

<p>
La grande majorité des utilisateurs n'auront pas besoin de saisir
quelque chose à cette invite. Après un court laps de temps, le système
démarrera automatiquement si aucune commande n'est fournie. Mais
parfois, des problèmes arrivent. Et dans d'autres cas on peut avoir
besoin de fonctions particulières. C'est à ce moment que les options
suivantes seront utiles. Pour commencer, vous devriez lire la page du
manuel 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>.
Nous allons décrire quelques unes des commandes les plus utilisées dans
le chargeur de démarrage OpenBSD.

<p>
Pour commencer, si aucune commande n'est fournie, le chargeur de
démarrage va essayer de démarrer <strong>/bsd</strong>. Si ça échoue, il
va essayer <strong>/obsd</strong>. Et si ça échoue de nouveau, il va
essayer <strong>/bsd.old</strong>. Vous pouvez spécifier le noyau à
démarrer en tapant :

<blockquote>
boot&gt; <strong>boot wd0a:/bsd</strong>
</blockquote>

ou

<blockquote>
boot&gt; <strong>b /bsd</strong>
</blockquote>

<p>
Cela fonctionnera si le périphérique wd0a est configuré comme
périphérique racine.

<p>
Voici une liste brève des options que vous pouvez utiliser au niveau du
noyau OpenBSD.
<ul>
<li><strong>-a</strong> : Permet de spécifier un périphérique racine
alternatif après avoir démarré le noyau.
<li><strong>-c</strong> : Permet d'entrer dans le mode de configuration
du démarrage. Consultez la section <a href="faq5.html#BootConfig">
Configuration au d&eacute;marrage </a>de la FAQ.
<li><strong>-s</strong> : Permet de démarrer en mode "single user".
<li><strong>-d</strong> : Permet de faire un "dump" du noyau dans ddb.
Il est nécessaire d'activer DDB au niveau du noyau.
</ul>

<p>
Ces options sont utilisées comme suit :
<strong>boot [ image [-acds]]</strong>

<p>
Pour plus d'informations veuillez lire la page du manuel
<a href="http://www.OpenBSD.org/cgi-bin/man.cgi?query=boot_i386&amp;sektion=8">boot_i386(8)</a>

<p>
<a name= "SKey"></a>
<h2>8.10 - S/Key</h2>

<p>
S/Key est un système à "mot de passe unique". Il permet d'utiliser des
mots de passe à usage unique sur des canaux non-sécurisés. Cette
fonctionnalité peut être pratique pour ceux qui n'ont pas la possibilité
d'utiliser ssh ou d'autres canaux chiffrés. L'implémentation S/Key
d'OpenBSD peut utiliser différents algorithmes pour le hachage à sens
unique. Les algorithmes suivants sont disponibles :

<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md4&amp;sektion=3">md4</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5&amp;sektion=3">md5</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sha1&amp;sektion=3">sha1</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rmd160&amp;sektion=3">rmd160</a>.
</ul>

<h3>Paramètrage de S/Key - Les premières étapes</h3>

<p>
Pour commencer, le répertoire <i>/etc/skey</i> doit exister. Si tel
n'est pas le cas, demandez au super-utilisateur de le créer :

<blockquote><pre>
<strong># mkdir /etc/skey</strong>
</pre></blockquote>

<p>
Une fois ce répertoire crée, vous pourrez alors initialiser S/Key. Pour
ce faire, vous devez utiliser
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skeyinit&amp;sektion=1">skeyinit(1)</a>.
Avec skeyinit(1), votre mot de passe système vous sera demandé d'abord.
C'est le même mot de passe que vous utilisez lorsque vous vous connectez
au système. L'utilisation de skeyinit(1) via un canal non sûr est très
fortement déconseillé. Vous devriez utiliser un canal sûr (tel que ssh)
ou la console. Une fois authentifié avec votre mot de passe système, un
autre mot de passe vous sera demandé. Ce dernier est le <i>mot de passe
secret</i> S/Key. Ce n'est <strong>PAS</strong> votre mot de passe
système. Votre mot de passe secret doit avoir une longueur d'au moins 10
caractères. Nous vous suggérons d'utiliser une phrase mnémonique
contenant plusieurs mots. Voici un exemple montrant comment ajouter un
utilisateur.

<blockquote><pre>
$ <strong>skeyinit ericj</strong>
[Adding ericj]
Reminder - Only use this method if you are directly connected
   or have an encrypted channel.  If you are using telnet
   or rlogin, exit with no password and use skeyinit -s.
Enter secret password:
Again secret password:

ID ericj skey is otp-md5 99 oshi45820             
Next login password: HAUL BUS JAKE DING HOT HOG
</pre></blockquote>

<p>
Une ligne particulièrement importante ici est <i>ID ericj skey is
otp-md5
99 oshi45820</i>. Elle fournit beaucoup d'informations concernant
l'utilisateur dont voici le détail.

<ul>
<li><i>otp-md5</i> - Ceci indique quelle fonction &agrave; sens unique a
       &eacute;t&eacute; utilis&eacute;e pour cr&eacute;er votre mot de
       passe &agrave; usage unique (One-Time Password ou otp).
<li><i>99</i> - C'est votre num&eacute;ro de s&eacute;quence. Ce
       num&eacute;ro appartient &agrave; l'intervalle 1-100. Une fois le
       num&eacute;ro 1 atteint, un autre mot de passe secret doit
       &ecirc;tre g&eacute;n&eacute;r&eacute;.
<li><i>oshi45820</i> - Ceci est votre cl&eacute;.
</ul>

<p>
Mais le plus important est votre mot de passe. Il consiste en 6 petits
mots. Combin&eacute;s, ils constituent votre mot de passe, espaces
compris.

<h3>Utilisation de S/Key pour se connecter.</h3>

<p>
Maintenant, S/Key est initialis&eacute; et vous avez votre mot de passe.
Vous &ecirc;tes pr&ecirc;t &agrave; vous connecter. Voici un exemple
d'une session utilisant S/Key pour se connecter. A partir d'OpenBSD 3.0,
les logins S/Key fonctionnent différemment : vous devez ajouter
<b>:skey</b> à votre nom de login. Pour les versions antérieures à
OpenBSD 3.0, vous devez utiliser <b>s/key</b> comme mot de passe. Votre
mot de passe S/Key vous sera alors demandé (excepté pour ftpd(8) qui
présentera d'abord le challenge S/Key pour un utilisateur pour lequel ce
mécanisme a été initialisé sous OpenBSD &lt; 3.0). Les exemples ci-après
supposent que vous avez OpenBSD 3.0 ou plus.

<blockquote><pre>
$ <strong>ftp localhost</strong>
Connected to localhost.
220 oshibana.shin.ms FTP server (Version 6.5/OpenBSD) ready.
Name (localhost:ericj): ericj:skey
331- otp-md5 96 oshi45820
331 S/Key Password: 
230- OpenBSD 3.3 (GENERIC) #44: Sat Mar 29 13:22:05 MST 2003
230-
230- Welcome to OpenBSD: The proactively secure Unix-like operating system.
230-
230- Please use the sendbug(1) utility to report bugs in the system.
230- Before reporting a bug, please try to reproduce it with the latest
230- version of the code.  With bug reports, please try to ensure that
230- enough information to reproduce the problem is enclosed, and if a
230- known fix for it exists, include that as well.
230-
230 User ericj logged in.
Remote system type is UNIX.
Using binary mode to transfer files.
ftp&gt; quit
221 Goodbye.
</pre></blockquote>

<p>
Notez que nous avons rajouté ":skey" au nom de l'utilisateur dans
l'exemple. Ceci informe ftpd que nous voulons nous authentifier en
utilisant S/Key. Vous aurez peut-être remarqué que mon numéro de
séquence a changé en <i>otp-md5 96 oshi45820</i>. C'est normal étant
donné que nous avons utilisé S/Key plusieurs fois. Mais comment obtenir
son mot de passe après s'être connecté une seule fois ? Vous aurez
besoin de connaitre le numéro de séquence ainsi que votre clé. Vous vous
demandez peut-être comment faire pour se rappeler du numéro de séquence
? C'est très simple. Il suffit d'utiliser
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skeyinfo&amp;sektion=1">skeyinfo(1)</a>,
qui va vous dire lequel utiliser. Par example, supposons que nous
voulions générer un autre mot de passe pour une connexion future (bien
entendu, nous effectuons cette opération en utilisant un canal sûr).

<blockquote><pre>
$ <strong>skeyinfo</strong>
95 oshi45820
</pre></blockquote>

<p>
An even better way is to use <strong>skeyinfo -v</strong>, which outputs
a command suitable to be run in the shell.  For instance:

<blockquote><pre>
$ <strong>skeyinfo -v</strong>
otp-md5 95 oshi45820
</pre></blockquote>

<p>
Not only is <i>otp-md5</i> a description of the hash used, it is also
an alternate name for the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skey&amp;sektion=1">skey(1)</a> 
command.  So, the simplest way to generate the next S/Key password is
simply:

<blockquote><pre>
$ <strong>`skeyinfo -v`</strong>
Reminder - Do not use this program while logged in via telnet or rlogin.
Enter secret password:
NOOK CHUB HOYT SAC DOLE FUME
</pre></blockquote>

<p>
Note the backticks in the above example.

<p>
I'm sure many of you won't always have a secure connection to create
these passwords, and creating them over an insecure connection isn't
feasible, so how can you create multiple passwords at one time? Well you
can supply skey(1) with a number of how many passwords you want created.
This can then be printed out and taken with you wherever you go.

<blockquote><pre>
$ <strong>otp-md5 -n 5 95 oshi45820</strong>
Reminder - Do not use this program while logged in via telnet or rlogin.
Enter secret password:
91: SHIM SET LEST HANS SMUG BOOT
92: SUE ARTY YAW SEED KURD BAND
93: JOEY SOOT PHI KYLE CURT REEK
94: WIRE BOGY MESS JUDE RUNT ADD
95: NOOK CHUB HOYT SAC DOLE FUME
</pre></blockquote>

<p>
Notice here though, that the bottom password should be the first used,
because we are counting down from 100.

<h4>Using S/Key with telnet(1), ssh(1), and rlogin(1)</h4>

<p>
Using S/Key with telnet(1), ssh(1), or rlogin(1) is done in pretty much
the same fashion as with ftp--you simply tack ":skey" to the end of your
username.
Example:

<blockquote><pre>
$ <strong>telnet localhost</strong>
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.

OpenBSD/i386 (oshibana) (ttyp2)

login: ericj:skey
otp-md5 98 oshi45821
S/Key Password: <strong>SCAN OLGA BING PUB REEL COCA</strong>
Last login: Thu Oct  7 12:21:48 on ttyp1 from 156.63.248.77
Warning: no Kerberos tickets issued.
OpenBSD 3.3 (GENERIC) #44: Sat Mar 29 13:22:05 MST 2003

Welcome to OpenBSD: The proactively secure Unix-like operating system.

Please use the sendbug(1) utility to report bugs in the system.
Before reporting a bug, please try to reproduce it with the latest
version of the code.  With bug reports, please try to ensure that
enough information to reproduce the problem is enclosed, and if a
known fix for it exists, include that as well.

You have mail.
$
</pre></blockquote>

<p>
<a name= "SMP"></a>
<h2>8.12 - Does OpenBSD support SMP?<br>
(Symmetric Multi-Processor)</h2>

<p>
Not at this time.  Work is on-going, there is an 
<a href="../smp.html">OpenBSD SMP project</a>, though there is nothing
usable yet, nor is there any time schedule for OpenBSD SMP support.

<p>
On most platforms, OpenBSD will run on an SMP system, but only utilizing
one processor.  The exception to this is the
<a href="../sparc.html">SPARC</a> platform --
OpenBSD/sparc will sometimes require that extra MBus modules be removed
for the system to boot.
Multi-processor
SPARC64 systems run as long as the base machine is 
<a href="../sparc64.html">supported</a>.

<p>
<b>How can I help?</b><br>
<ul>
<li>Write code.  There is lots of work to do.
<li>Donate hardware.  The goal of the OpenBSD SMP project is to support
as many platforms as possible, including 
<a href="../sparc.html">SPARC</a>, 
<a href="../sparc64.html">SPARC64</a>, 
<a href="../alpha.html">Alpha</a>, 
<a href="../macppc.html">MacPPC</a> 
and of course, the <a href="../i386.html">i386</a>.  
Donations of <a href="../want.html">desired 
hardware</a> are welcome!<br>
<li>Don't offer to "test".  The SMP project is not part of the core
OpenBSD project right now for a reason -- it isn't ready for production
use yet, or even general "testing".  Informing the developers that it
didn't work on your hardware without code to make it work isn't useful
at this point.  <a href="faq4.html#SendDmesg">Send in your dmesg</a>, if
a developer sees something interesting in your hardware, they can
contact you for testing.
</ul>

<p>
<a name= "TTY"></a>
<h2>8.13 - I get Input/output error when trying to use my tty devices</h2>
<p>
You need to use /dev/cuaXX for connections initiated from the OpenBSD
system, the /dev/ttyXX devices are intended only for terminal or dial-in
usage.  While it was possible to use the tty devices in the past, the
OpenBSD kernel is no longer compatible with this usage.

<p> From 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cua&amp;sektion=4">cua(4)</a>:
<p>
For hardware terminal ports, dial-out is supported through matching
device nodes called calling units.  For instance, the terminal called
/dev/tty03 would have a matching calling unit called /dev/cua03. These
two devices are normally differentiated by creating the calling unit
device node with a minor number 128 greater than the dial-in device
node.  <i>Whereas the dial-in device (the tty) normally requires a
hardware signal to indicate to the system that it is active, the
dial-out device (the cua) does not, and hence can communicate unimpeded
with a device such as a modem</i>.  This means that a process like
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getty&amp;sektion=8">getty(8)</a>
will wait on a dial-in device until a connection is established.
Meanwhile, a dial-out connection can be established on the dial-out
device (for the very same hardware terminal port) without disturbing
anything else on the system.  The
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getty&amp;sektion=8">getty(8)</a>
process does not even notice that anything is happening on the
terminal port.  If a connecting call comes in after the dial-out connection
has finished, the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getty&amp;sektion=8">getty(8)</a>
process will deal with it properly, without having noticed the
intervening dial-out action.

<a name="Browsers"></a>
<h2>8.14 - What web browsers are available for OpenBSD? </h2>

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lynx&amp;sektion=1">Lynx</a>,
a text-based browser, is in the base system, and has SSL support.
Other browsers in the ports tree, include (in no particular order):

<p>
<b>Graphical (X) Browsers</b>
<ul>
 <li><a href="http://www.dillo.org/">Dillo</a> 
   Minimal feature set, very fast and small, runs well on slower hardware.
 <li><a href="http://www.konqueror.org/">Konqueror</a>
   Installed as part of the <a href="http://www.kde.org/">KDE desktop environment</a>.
 <li><a href="http://www.konqueror.org/embedded.html">Konqueror-embedded</a>
   (konq-e) Konqueror, using only the KDE libraries rather than all of KDE.
 <li><a href="http://www.netscape.com/">Netscape 4</a> 
   For sparc and i386 only, not Open Source, no package
   available.
 <li><a href="http://www.opera.com/">Opera</a> Commercial browser.
 <li><a href="http://www.w3.org/Amaya/">Amaya</a> The W3C's browser and editor.
 <li><a href="http://atrey.karlin.mff.cuni.cz/~clock/twibright/links/">Links+</a>
   Another fast and small graphical browser. (Also has a text-only mode)
</ul>

<p>
<b>Console (Text mode) Browsers</b>
<ul>
 <li><a href="http://www.w3m.org/">w3m</a> Has table and frame
   support (also has a graphical mode).  
 <li><a href="http://artax.karlin.mff.cuni.cz/~mikulas/links/">links</a>
  Has table support.
</ul>

<p>
<a href="http://www.mozilla.org">Mozilla</a> is not supported on OpenBSD
3.3<i>-release</i> or <i>-stable</i>.  Work is progressing on this in
<i>-current</i>.  See the 
<a href="../mail.html">mailing list</a> archives for details.

<p>
You will find all these in the <a href="../ports.html">ports
collection</a>.  All the above mentioned browsers are
located in <tt>/usr/ports/www/</tt> after the installation of the ports
tree.  Most are also available as pre-compiled 
<a href="../ports.html">packages</a>, available on the 
<a href="../ftp.html">FTP servers</a> and on the 
<a href="../orders.html">CDROM</a>.  As most of the graphical browsers
are very large and require quite some time to download and compile, 
one should seriously consider the use of packages where available.


<p>
<a name= "mg"></a>
<h2>8.15 - How do I use the mg editor?</h2>
<p>
Mg is a micro Emacs-style text editor included in OpenBSD.  Micro means that it's small
(Emacs is very large!) For the basics, read the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a>
manual page and the 
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/usr.bin/mg/tutorial?rev=1.2">tutorial</a>,
as included with the source code.  For more interesting questions (such
as, "I don't have a Meta key!") check out the
<a href="http://www.lerner.co.il/emacs/faq_toc.html">Emacs FAQ</a>.  

<p>
Note that since mg is a small Emacs implementation, which is mostly
similar to the text editor features of Emacs 17, it does not implement
many of Emacs' other functionality.  (Including mail and news
functionality, as well as modes for Lisp, C++, Lex, Awk, Java, etc...)

<p>
<a name= "ksh"></a>
<p>
<h2>8.16 - ksh(1) does not appear to read my <tt>.profile!</tt></h2>
<p>
There are two likely reasons for 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">ksh(1)</a>
to seemingly ignore a user's <tt>.profile</tt> file.
<ul>
<li><tt>.profile</tt> is not owned by the user.
To fix for <b>username</b>,
<p>
 <blockquote><tt>
 # <b>chown username ~username/.profile</b>
 </tt></blockquote>
<p>
<li>You are using ksh(1) from within X Window System
<p>
Under 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xterm&amp;sektion=1">xterm(1)</a>,
argv[0] for ksh(1) is not prepended with a
dash ("-").  Prepending a dash to argv[0] will cause csh(1) and ksh(1)
to know they should
interpret their login files.
(For csh(1) that's <tt>.login</tt>, with a separate <tt>.cshrc</tt>
that is always run when
csh(1) starts up.  With ksh(1), this is more noticeable because there is only
one startup script, <tt>.profile</tt>.  This file is ignored unless the shell is
a login shell.)
<p>
To fix this, add the line "<tt>XTerm*loginShell: true</tt>"
to the file <tt>.Xdefaults</tt> in your home directory.  Note, this file
does not exist by default, you may have to create it.
<p>
 <blockquote><tt>
 $ <b>echo "XTerm*loginShell: true" &gt;&gt; ~/.Xdefaults</b>
 </tt></blockquote>
<p>
You may not have had to do this on other systems, as some installations
of X Window System come with this setting as default.  OpenBSD has
chosen to follow the XFree86 behavior.
</ul>

<p>
<a name= "motd"></a>
<h2>8.17 - Why does my <tt>/etc/motd</tt> file get overwritten when
I modified it?</h2>

<p>
The <tt>/etc/motd</tt> file is edited upon every boot of the system,
replacing everything up to, but not including, the first blank line
with the system's kernel version information.
When editing this file, make sure that you start after this blank line,
to keep <tt>/etc/rc</tt> from deleting these lines when it edits
<tt>/etc/motd</tt> upon boot.

<p>
<a name= "wwwsolaris"></a>
<h2>8.18 - Why does www.openbsd.org run on Solaris?</h2>

<p>
Although none of the developers think it is particularly relevant, this
question comes up frequently enough in the mailing lists that it is
answered here.  <i>www.openbsd.org</i> and the main OpenBSD ftp site are
hosted at a <a href="http://sunsite.ualberta.ca">SunSITE</a> at the University of Alberta, Canada.   These sites
are hosted on a large Sun system, which has access to lots of storage
space and Internet bandwidth.  The presence of the SunSITE gives the
OpenBSD group access to this bandwidth.  This is why the main site runs
here.  Many of the OpenBSD mirror sites run OpenBSD, but since they do
not have guaranteed access to this large amount of bandwidth, the group
has chosen to run the main site at the University of Alberta SunSITE.

<p>
<a name= "PCI"></a>
<h2>8.19 - I'm having problems with my PCI devices being detected</h2>

<p>
There exists a condition where some machines might not detect some PCI 
devices properly, or might freeze while detecting multiple NIC's in one 
machine. This is the fault of PCIBIOS, and involves a simple workaround 
to make it work properly.  Simply enter the boot time configuration and 
disable PCIBIOS. An example is below:

<div style="margin-left: 2em">
<table border=0 width="650">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
<pre>
boot&gt; <b>boot -c</b>
Copyright (c) 1982, 1986, 1989, 1991, 1993
        The Regents of the University of California.  All rights reserved.
Copyright (c) 1995-2002 OpenBSD. All rights reserved.  http://www.OpenBSD.org

OpenBSD 3.3 (GENERIC) #44: Sat Mar 29 13:22:05 MST 2003
    deraadt@i386.openbsd.org:/usr/src/sys/arch/i386/compile/RAMDISK_CD
cpu0: Intel Pentium III (Coppermine) ("GenuineIntel" 686-class, 128KB L2 cache)
1 GHz
cpu0: FPU,V86,DE,PSE,TSC,MSR,PAE,MCE,CX8,SYS,MTRR,PGE,MCA,CMOV,PAT,PSE36,MMX,FXS
R,SIMD
real mem  = 267956224 (261676K)
avail mem = 243347456 (237644K)
using 3296 buffers containing 13500416 bytes (13184K) of memory
User Kernel Config
UKC&gt; <b>disable pcibios</b>
UKC&gt; <b>quit</b>
[... snip ...]
</pre>
                </td>
        </tr>
</table>
</div>

<p>
Once this is done, you can follow the directions in 
<a href="./faq5.html#Building">FAQ 5, Building a Kernel</a> to create a
new kernel so that you don't have to worry about this in the future.

<p>
<a name= "TrueType"></a>
<h2>8.20 - Antialiased and TrueType fonts in XFree86</h2>
<p>
See <a href="truetype.html">this document</a>.

<p>
<a name= "Journaling"></a>
<h2>8.21 - Does OpenBSD support any journaling filesystems?</h2>
<p>
No it doesn't. We use a different mechanism to achieve similar results
that is called <a href="faq14.html#SoftUpdates">Soft Updates</a>. Please
read in FAQ 14 to get more details.  

<p>
<a name= "RevDNS"></a>
<h2>8.22 - Reverse DNS <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small>- or -</small><br>
Why is it taking so long for me to log in?</h2>
<p>
Many new users to OpenBSD experience a two minute login delay when using
services such as 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh,</a> 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp,</a> or 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=telnet&amp;sektion=1">telnet.</a>  
This can also be experienced when using a proxy, such as 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8">ftp-proxy,</a>
or when sending mail out from a workstation through 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&amp;sektion=8">sendmail.</a>
<p>
This is almost always due to a reverse-DNS problem.  DNS is Domain Name
Services, the system the Internet uses to convert a name, such as 
"www.openbsd.org" into a numeric IP address.  Another task of DNS is
the ability to take a numeric address and convert it back to a "name",
this is "Reverse DNS".
<p>
In order to provide better logging, OpenBSD performs a reverse-DNS 
lookup on any machine that attaches to it in many different ways, 
including 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh,</a>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp,</a> 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=telnet&amp;sektion=1">telnet,</a>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&amp;sektion=8">sendmail</a> or
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8">ftp-proxy.</a>
Unfortunately, in some cases, the machine that is making the connection
does not have a proper reverse DNS entry.

<p>
<h3>An example of this situation:</h3> 
A user sets up an OpenBSD box as a firewall and gateway to their
internal home network, mapping all their internal computers to one
external IP using <a href="faq6.html#NAT">NAT.</a> They may also use it
as an outbound mail relay.  They follow the installation guidelines, and
are very happy with the results, except for one thing -- every time they
try to attach to the box in any way, they end up with a two minute delay
before things happen.

<p>
<h3>What is going on:</h3>
From a workstation behind the NAT of the gateway with an 
<a href="http://www.geektools.com/rfc/rfc1918.txt">unregistered IP</a> 
address of 192.168.1.35, the user uses 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh</a>
to access the gateway system.  The 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh</a>
client prompts for username and password, and sends 
them to the gateway box.  The gateway then tries to figure out who 
is trying to log in by performing a reverse DNS lookup of 
192.168.1.35.  The problem is 192.168.0.0 addresses are for private
use, so a properly configured DNS server outside your network 
knows it should have no information about those addresses.  Some will 
quickly return an error message, in these cases, OpenBSD will assume 
there is no more information to be gained, and it will quickly 
give up and just admit the user.  Other DNS servers will not return 
ANY response. In this case you will find yourself waiting for the OpenBSD 
name resolver to time out, which takes about two minutes before the 
login will be permitted to continue.  In the case of 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8">ftp-proxy</a>, some
ftp clients will timeout before the reverse DNS query times out, leading
to the impression that ftp-proxy isn't working.
<p>
This can be quite annoying.  Fortunately, it is an easy thing to fix.
<p>
<h3>Fix, using <tt>/etc/hosts</tt>:</h3>
The simplest fix is to populate your 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hosts&amp;sektion=5"><tt>/etc/hosts</tt></a> 
file with all the workstations
you have in your internal network, and ensure that your 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=resolv.conf&amp;sektion=5"><tt>/etc/resolv.conf</tt></a> 
file contains the line <tt>lookup file bind</tt>
which ensures that the resolver knows to start with the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hosts&amp;sektion=5"><tt>/etc/hosts</tt></a>
file,
and failing that, to use the DNS servers specified by the "nameserver" 
lines in your 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=resolv.conf&amp;sektion=5"><tt>/etc/resolv.conf</tt></a>
file.

<p>
Your <tt>/etc/hosts</tt> file will look something like this:

<div style="margin-left: 2em">
<table border=0 width="650"> <tr> <td nowrap bgcolor="#eeeeee">
<pre>
::1 localhost.in.example.org localhost
127.0.0.1 localhost.in.example.org localhost
192.168.1.1 gw.in.example.org gw
192.168.1.20 scrappy.in.example.org scrappy
192.168.1.35 shadow.in.example.org shadow
</pre>
</td></tr></table>
</div>

<p>
Your <tt>resolv.conf</tt> file will look something like this:

<div style="margin-left: 2em">
<table border=0 width="650"> <tr> <td nowrap bgcolor="#eeeeee">
<pre>
search in.example.org 
nameserver 24.2.68.33
nameserver 24.2.68.34
lookup file bind
</pre>
</td></tr></table>
</div>

<p>
A common objection to this is "But, I use DHCP for my internal network!
How can I configure my <tt>/etc/hosts</tt>?"  Rather easily, actually.
Just enter lines for all the addresses your DHCP server is going to 
give out, plus any static devices:

<div style="margin-left: 2em">
<table border=0 width="650"> <tr> <td nowrap bgcolor="#eeeeee">
<pre>
::1 localhost.in.example.org localhost
127.0.0.1 localhost.in.example.org localhost
192.168.1.1 gw.in.example.org gw
192.168.1.20 scrappy.in.example.org scrappy
192.168.1.35 shadow.in.example.org shadow
192.168.1.100 d100.in.example.org d100
192.168.1.101 d101.in.example.org d101
192.168.1.102 d102.in.example.org d102
         [... snip ...] 
192.168.1.198 d198.in.example.org d198
192.168.1.199 d199.in.example.org d199
</pre>
</td></tr></table>
</div>

<p>
In this case, I am assuming you have the DHCP range set to 192.168.1.100 
through 192.168.1.199, plus the three static definitions as listed at
the top of the file.
<p>
If your gateway must use DHCP for configuration, you may well find you
have a problem -- 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&amp;sektion=8">dhclient</a>
will overwrite your <tt>/etc/resolv.conf</tt> every time the lease is
renewed, which will remove the "lookup file bind" line.  This can be
solved by putting the line "lookup file bind" in the file
<tt>/etc/resolv.conf.tail</tt>.

<p>
<h3>Fix, using a local DNS server</h3>
Details on this are somewhat beyond the scope of this document, but the
basic trick is to setup your favorite DNS server, and make sure it knows
it is authoritative for both forward and reverse DNS resolution for all
nodes in your network, and make sure your computers (including your
gateway) know to use it as a DNS server.

<a name= "wwwnotstd"></a>
<h2>8.23 - Why do the OpenBSD web pages not conform to HTML4/XHTML?</h2>
<p>The present web pages have been carefully crafted to
work on a wide variety of actual browsers going back to
browser versions 4.0 and later. We do not want to make
these older pages conform to HTML4 or XHTML until we're
sure that they will also work with older browsers;
it's just not a priority. We welcome new contributors,
but suggest you work on writing code, or
on documenting new aspects of the system, not on
tweaking the existing web pages to conform to newer standards.

<a name= "NTPerror"></a>
<h2>8.24 - Why is my clock off by twenty-some seconds?</h2>

<p>
When using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&amp;sektion=8">rdate</a>(8)
to synchronize your clock to a NTP server, you may find your clock is 
off by twenty-some seconds from your local definition of time.

<p>
This is caused by a difference between the UTC (Coordinated Universal
Time, based on astronomical observations) time and TAI (International
Atomic Time, based on atomic clocks) time.  To compensate for variations
in the earth's rotation, "leap seconds" are inserted into UTC, but TAI
is unadjusted.  These leap seconds are the cause of this discrepancy.
For a more detailed description, search the web for "<tt>leap seconds
UTC TAI</tt>".

<p>
Addressing the problem is fairly simple.  In most countries you will get
the correct time if you use the "<tt>-c</tt>" parameter to
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&amp;sektion=8">rdate(8)</a>
and use a time zone out of the directory
<tt>/usr/share/zoneinfo/right/</tt>.  For example, if you are located in
Germany, you could use these commands: 

<pre>
     # <b>cd /etc && ln -sf /usr/share/zoneinfo/right/CET localtime</b>
     # <b>rdate -ncv ptbtime1.ptb.de</b>
</pre>

In other countries, the rules may differ.

<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "faq7.html">[To Section 7 - Keyboard and Display Controls]</a>
<a href= "faq9.html">[To Section 9 - Tips for Linux users]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt= "[back]"></a> 
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: faq8.html,v 1.7 2003/12/15 19:20:57 horacio Exp $</small>

</body>
</html>
