<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Suivre la version de développement "-current"</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2007 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../../fr/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[Index de la FAQ]</a>
</font>

<p>

<h1><font color="#e00000">Suivre la version de développement "<i>-current</i>"</font></h1>
<hr>

<h3>Table des matières</h3>
<p>
<ul>
<li><a href="#Intro">Introduction</a>
<!-- Les entrées les plus vieilles en haut... -->
<li><a href="#20070903">09/03/2007 - support pour _cxa_atexit et modification de 
flag pour les en-têtes sys/net</a>
<li><a href="#20071008">08/10/2007 - nouvel utilisateur pour ospf6d</a>
<li><a href="#20071020">20/10/2007 - libexpat déplacé dans base</a>
<li><a href="#20071030">2007/10/30 - httpd.conf change pour la configuration
 de  module</a>
<li><a href="#20071125">25/11/2007 - modification de flag pour config(8)</a>
<li><a href="#20071128">28/11/2007 - mise à jour AGP</a>
<li><a href="#20071207">07/12/2007 - utilisateur _hoststated renommé _relayd</a>
<li><a href="#20080131">2008/01/31 - nouvel utilisateur pour snmpd</a>
<li><a href="#20080205">05/02/2008 - carp(4) flag day</a>
<!-- Les nouvelles additions se mettent en bas, merci -->
</ul>
    
<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>Introduction</h2>
Ce document est pour les personnes souhaitant suivre la version de
développement d'OpenBSD; celle-ci sera nommée <i>-current</i> dans la
suite de ce texte. Il contient des informations sur les changements
apportés entre la version 4.2-release et <i>-current</i>, et ne devrait
PAS être utilisé par quiconque voulant faire une mise à jour à partir
des versions 4.1 ou précédentes ou même par les personnes souhaitant
suivre <a href="../../fr/stable.html"><i>-stable</i></a>.

<p>
Si vous voulez passer vers la version 4.2-release ou 4.2-stable à partir
de versions antérieures, consulter le <a href="upgrade42.html">guide de
mise à niveau</a>.

<p>
Soyez certain d'avoir lu et compris la
<a href="faq5.html">FAQ 5 - Construire le Système à partir des Sources</a>
avant d'utiliser -current et les instructions qui suivent.

<p>
Vous devriez TOUJOURS partir d'un "snapshot" pour suivre
<i>-current</i>. Une mise à jour via la compilation des sources n'est
pas supportée.
   
<p>
Si vous souhaitez avoir des informations pour mettre à jour en partant de
versions plus anciennes, consultez le document
<a href="../upgrade-old.html">upgrade-old.html</a>.
Celui-ci est fourni en tant que document historique -- il ne DOIT PAS
servir de procédure de mise à jour.

<p>

<a name="20070903"></a>
<h3>09/03/2007 - support pour _cxa_atexit et flag pour les en-têtes sys/net</h3>
<p>
Le support pour _cxa_atexit a été ajouté dans csu, libc, gcc et libstdc++ et
requiert tout comme le changement d'en-têtes dans sys/net une manipulation 
spécifique. Pour effectuer la mise à jour, suivez ces étapes :
<ul>
<li><a href=faq5.html#BldKernel>Compilation du noyau</a>
<li>Redémarrage
<li>Compilation de csu :
<pre>
     # cd /usr/src/lib/csu
     # make obj && make depend && make && make install && make clean
</pre>
<li>Compilation de gcc :
<pre>
     # cd /usr/src/gnu/usr.bin/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
     # make -f Makefile.bsd-wrapper clean
</pre>
<li><a href=faq5.html#BldUserland>Compilation du "userland"</a>
</ul>

<a name="20071020"></a>
<h3>20/10/2007 - libexpat déplacé dans base</h3>
<p>
libexpat a été déplacé de xenocara (xbase) à src (base); si vous utilisé des
packages et des snapshots, tout se mettra à jour dès que les nouveaux
snapshots seront disponibles.
<p>
Si vous compilez vos logiciels à partir des sources, il est impératif que vous
nettoyiez votre système :
<pre>
	# mv /usr/X11R6/lib/libexpat.so.* /usr/lib
	# rm /usr/X11R6/lib/libexpat*
	# rm /usr/X11R6/include/expat*
</pre>

<a name="20071008"></a>
<h3>08/10/2007 - nouvel utilisateur pour ospf6d</h3>

<i>Un service ospf6d a été importé</i> pour utiliser ce service, un nouvel
utilisateur et un nouveau groupe sont requis. 

En tant que <i>root</i>, ajoutez le groupe et l'utilisateur suivant, en 
utilisant
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8>useradd(8)</a>:

<blockquote><pre>
# useradd -u90 -g=uid -c"OSPF6 Daemon" -d/var/empty -s/sbin/nologin _ospf6d
</pre></blockquote>

Cette étape va ajouter le nouvel utilisateur ainsi que le groupe correspondant.
Votre environnement peut vous permettre de faire un copier/coller de ces
commandes.

<a name="20071030"></a>
<h3>2007/10/30 - httpd.conf change pour la configuration de  module</h3>
<p>
Les packages pour les modules 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd">httpd(8)</a>
installent maintenant les fichiers de configuration dans 
<tt>/var/www/conf/modules.samples</tt> et invite l'utilisateur a créer des liens
symboliques dans <tt>/var/www/conf/modules</tt>.
Ajouter les lignes suivantes dans <tt>/var/www/conf/httpd.conf</tt> après les
directives <tt>LoadModule</tt> (vers la fin de la section 1):
<pre>
	#
	# Include extra module configuration files
	#
	Include /var/www/conf/modules/*.conf
</pre>

<a name="20071125"></a>
<h3>25/11/2007 - modification de flag pour config(8)</h3>
<p>
Des capacités étendues requièrent que
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=config>config(8)</a> soit
recompilé dans votre système :
<pre>
	# cd /usr/src/usr.sbin/config
	# make clean
	# make obj
	# make depend
	# make
	# make install
</pre>
Suivie d'une <a href=faq5.html#BldKernel>compilation du noyau</a> comme 
d'habitude.

<a name="20071128"></a>
<h3>28/11/2007 - nouveau pilote AGP</h3>
<p>
Le nouveau pilote
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=agp>agp(4)</a> requiert
une mise à jour du serveur X après la compilation d'un nouveau noyau sur une
machine nécessitant le support AGP pour X ou XVideo.
<p>
Après l'installation du nouveau noyau ainsi que de ses en-têtes, recompilez
le serveur X (ou compilez un nouveau snapshot de X) et assurez-vous que 
<tt>/dev/agp0</tt> soit bien créé.
<pre>
	# cd /usr/src/include
	# make includes
	# cd /usr/src/xenocara/xserver
	# make -f Makefile.bsd-wrapper build
	# cd /usr/src/etc/etc.`uname -m`
	# install -c MAKEDEV /dev
	# cd /dev
	# ./MAKEDEV agp0
</pre>

<a name="20071207"></a>
<h3>07/12/2007 - utilisateur _hoststated renommé _relayd</h3>
Le deamon hoststated(8) a été renommé
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=relayd&amp;sektion=8>relayd(8)</a>,
de fait l'utilisateur et le groupe doivent être modifiés en conséquence.

<p>
Utilisez
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8>vipw(8)</a>
pour modifier les fichiers password puis votre éditeur favori pour mettre à
jour le fichier <tt>/etc/group</tt>, en changeant "<tt>_hoststated</tt>" 
en "<tt>_relayd</tt>" dans les deux. 
Laissez tel quel le reste des lignes dans chaque cas.

<a name="20080131"></a>
<h3>2008/01/31 - nouvel utilisateur pour snmpd</h3>

<i>Un service SNMP a été importé</i>. Afin de pouvoir l'utiliser, un
nouvel utilisateur et groupe sont requis.
En tant que <i>root</i>, ajoutez les utilisateur et groupe suivants à
l'aide de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>:

<blockquote><pre>
# useradd -u91 -g=uid -c"SNMP Daemon" -d/var/empty -s/sbin/nologin
_snmpd
</pre></blockquote>

Cette étape ajoutera le nouvel utilisateur et le groupe correspondant.
Votre environnement pourrait vous permettre de copier/coller ces
commandes.

<a name="20080205"></a>
<h3>05/02/2008 - carp(4) flag day</h3>
carp(4) a été modifié pour en faciliter la configuration.
Si vous utilisez carp avec un partage de charge ARP ou IP, votre
configuration doit être modifiée de la façon suivante :
<ul>
<li> Les interfaces carp(4) partageant la même adresse IP ont été
remplacées par l'option <tt>carpnodes</tt>.
<li> Le contrôle sysctl <tt>net.inet.carp.arpbalance</tt> a été remplacé
par <tt>arp</tt> en mode partage de charge.
<li> Les drapeaux <tt>LINK0,1,2</tt> utilisés pour le partage de charge
IP ont été remplacés par les modes de partage de charge <tt>ip</tt>,
<tt>ip-stealth</tt> et <tt>ip-unicast</tt>.
</ul>

<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
</font>
<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: current.html,v 1.86 ]<br>
$Translation: current.html,v 1.66 2008/02/29 20:54:38 coyolxauhqui Exp $<br>
-->
$OpenBSD: current.html,v 1.50 2008/03/02 12:12:59 tobias Exp $
</small>

</body>
</html>
