<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Suivre la version de développement "-current"</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2005-2009 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../../fr/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[Index de la FAQ]</a>
</font>

<p>

<h1><font color="#e00000">Suivre la version de développement "<i>-current</i>"</font></h1>
<hr>

<h3>Table des matières</h3>
<p>
<ul>
<li><a href="#Intro">Introduction</a>
<!-- Les entrées les plus vieilles en haut... -->
<li><a href="#20100923">2010/09/23 - [ports] ruby scindé en 1.8/1.9</a>
<li><a href="#20100924">2010/09/24 - gcc4 pour mips64 et mips64el</a>
<li><a href="#20101019">2010/10/19 - groff déplacé dans les ports</a>
<li><a href="#20101023">2010/10/23 - vgrind(1) déplacé dans les ports</a>
<li><a href="#20101031">2010/10/31 - changements dans la configuration de wpa</a>
<li><a href="#20101108">2010/11/08 - mises à jour de PostgreSQL</a>
<li><a href="#20101111">2010/11/11 - mises à jour Xenocara</a>
<!-- Les nouvelles additions se mettent en bas, merci -->
</ul>
    
<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>Introduction</h2>
Ce document est pour les personnes souhaitant suivre la version de
développement d'OpenBSD; celle-ci sera nommée <i>-current</i> dans la
suite de ce texte. Il contient des informations sur les changements
apportés entre la version 4.8-release et <i>-current</i>, et ne devrait
PAS être utilisé par quiconque voulant faire une mise à jour à partir
des versions 4.7 ou précédentes ou même par les personnes souhaitant
suivre <a href="../../fr/stable.html"><i>-stable</i></a>.

<p>
Si vous voulez passer vers la version 4.8-release ou 4.8-stable à partir
de versions antérieures, consulter le <a href="../upgrade48.html">guide de
mise à niveau</a>.

<p>
Soyez certain d'avoir lu et compris la
<a href="faq5.html">FAQ 5 - Construire le Système à partir des Sources</a>
avant d'utiliser -current et les instructions qui suivent.

<p>
Vous devriez TOUJOURS partir d'un "snapshot" pour suivre
<i>-current</i>. Une mise à jour via la compilation des sources n'est
pas supportée.

<p>
La plupart de ces changements doivent être réalisés comme root.
   
<a name="20100923"></a>
<h3>2010/09/23 - [ports] ruby scindé en 1.8/1.9</h3>

Le port ruby a été découpé en deux ports séparés pour ruby 1.8 et ruby 1.9,
de façon similaire au port python.
Les binaires de ruby 1.8 sont maintenant installés avec un suffixe 18, et
les binaires ruby 1.9 sont installés avec un suffixe 19.
Les paquetages ruby-gems et ruby-rake installent aussi les binaires avec un
suffixe 18, ces paquetages sont déjà inclus dans ruby 1.9.
Si vous désirez avoir ruby 1.8 (ou 1.9) comme système ruby par défaut, vous
devez suivre les instructions qui sont affichées aprés l'installation/mise à
jour du paquetage.

<a name="20100924"></a>
<h3>2010/09/24 - gcc4 pour mips64 et mips64el</h3>

Les diverses architectures mips64 (loongson, sgi) sont passées à gcc4.
/usr/libexec/ld.so a un bogue qui est problématique avec gcc4, soyez donc sûr 
qu'il est à jour (le reconstruire avec une mise à jour des sources) :
<blockquote><pre>
<b>cd /usr/src/libexec/ld.so
make clean
make depend && make && make install
</b></pre></blockquote>

Mettre à jour les makefiles, gcc, cpp et libstdc++ doit être réalisé avec
ces quatre étapes.
<p>
Premiérement, gcc4 doit être compilé avec le compilateur existant :
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/share/mk && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make && make install
</b></pre></blockquote>
Deuxièmement, gcc4 doit être recontruit avec lui-même :
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/usr.bin/cpp
make obj && make && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make && make install
</b></pre></blockquote>
Troisièmement, libstdc++-v3 doit être installé aprés la suppression des
anciens entêtes C++ :
<blockquote><pre>
<b>rm -rf /usr/include/g++/*
cd /usr/src/gnu/lib/libstdc++-v3
make obj && make includes && make depend && make && make install
</b></pre></blockquote>
Et en dernier le système doit être recontruit entiérement avec la procédure
habituelle documentée dans
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">release(8)</a>.
 
<p>
Pour les personnes mettant à jour en utilisant les snapshots, ne pas oublier de :
<blockquote><pre>
<b>rm -rf /usr/include/g++/*
</b></pre></blockquote>
avant d'installer un snapshot plus récent.
 

<a name="20101019"></a>
<h3>2010/10/19 - groff déplacé dans ports</h3>

Le système de formatage de document groff(1) (utilisé principalement pour
générer les pages de manuel) a été remplacé dans la base par 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mandoc&sektion=1">mandoc(1)</a>.
Mettre à jour en premier /etc/man.conf (sysmerge est recommandé si vous
l'avez modifié; sinon installez un nouveau fichier de etc48.tgz ou mettez à
jour /usr/src/etc) qui passe à l'utilisation de mandoc(1) pour afficher les
pages de manuel installées non formatées.
Puis supprimez les anciens fichiers de groff :
<blockquote><pre>
<b>cd /usr/bin
rm addftinfo afmtodit eqn grodvi groff grog grohtml grolj4 grops grotty \
hpftodit indxbib lkbib lookbib neqn nroff pfbtops pic psbb refer soelim \
tbl tfmtodit troff
cd /usr/share
rm -r dict/eign groff_font tmac doc/psd doc/smm doc/usd groff
cd /usr/share/man/cat1
rm addftinfo.0 afmtodit.0 eqn.0 grodvi.0 groff.0 grog.0 grohtml.0 grolj4.0 \
grops.0 grotty.0 hpftodit.0 indxbib.0 lkbib.0 lookbib.0 neqn.0 nroff.0 \
pfbtops.0 pic.0 psbb.0 refer.0 soelim.0 tbl.0 tfmtodit.0 troff.0
cd ../cat5
rm groff_font.0 groff_out.0
cd ../cat7
rm groff_char.0 groff_me.0 groff_mm.0 groff_mmse.0 groff_ms.0 groff_msafer.0 \
me.0 mm.0 ms.0</b></blockquote></pre>
Si vous avez besoin de groff, reinstallez le de /usr/ports/textproc/groff ou
installez le paquetage groff.

<a name="20101023"></a>
<h3>2010/10/23 - vgrind(1) déplacé dans les ports</h3>

Le formatteur de fichier source vgrind(1) a été déplacé dans les ports aprés
la <a href="#20101019">suppression de groff</a> du système de base.
Vous devez supprimer les anciens fichiers de vgrind :
<blockquote>
<pre>
<b>
cd /usr/bin/
rm vgrind
cd /usr/share/man/cat1
rm vgrind.0
cd /usr/share/man/cat5
rm vgrindefs.0
cd /usr/share/
rm misc/vgrindefs  misc/vgrindefs.db
</b>
</pre>
</blockquote>
Vous pouvez installer vgrind de /usr/ports/textproc/vgrind ou
<tt>pkg_add vgrind</tt>.

<a name="20101029"></a>
<h3>2010/10/29 - suppression de colcrt</h3>

L'utilitaire colcrt(1) a été supprimé et n'est utile que sur les trés vieux
terminaux (texte).
Vous devez supprimer les anciens fichiers colcrt :
<blockquote>
<pre>
<b>
rm /usr/bin/colcrt /usr/share/man/cat1/colcrt.0
</b>
</pre>
</blockquote>

<a name="20101029"></a>
<h3>2010/10/29 - suppression de checknr</h3>

L'utilitaire checknr(1) a été supprimé aprés la
<a href="#20101019">suppression de groff</a> du système de base.
Les pages Man peuvent maintenant être testées pour des erreurs communes en
utilisant 
<tt>mandoc -Tlint</tt>.
Vous devez supprimer les anciens fichiers checknr :
<blockquote>
<pre>
<b>
rm /usr/bin/checknr /usr/share/man/cat1/checknr.0
</b>
</pre>
</blockquote>

<a name="20101029"></a>
<h3>2010/10/29 - suppression de soelim</h3>

L'utilitaire soelim(1) a été supprimé aprés la
<a href="#20101019">suppression de groff</a> du système de base.
Le paquetage groff inclut sa propre version de soelim(1).
Vous devez supprimer les anciens fichiers  soelim :
<blockquote>
<pre>
<b>
rm /usr/bin/soelim /usr/share/man/cat1/soelim.0
</b>
</pre>
</blockquote>

<a name="20101031"></a>
<h3>2010/10/31 - changements dans la configuration de wpa</h3>

wpa-psk(8) a été supprimé car le support wpakey support est maintenant
directement intégré dans ifconfig(8). Inspectez vos fichiers /etc/hostname.*
pour les périphériques sans-fil utilisant le WPA et remplacez :
<blockquote><pre><b>
nwid myssid wpapsk `wpa-psk myssid wpapassword`
</b></pre></blockquote>
avec la forme plus simple :
<blockquote><pre><b>
nwid myssid wpakey wpapassword
</b></pre></blockquote>

<a name="20101108"></a>
<h3>2010/11/08 - mise à jour de PostgreSQL</h3>
PostgreSQL a été mis à jour en 9.0.1. C'est une mise à jour majeure et vous
avez besoin de sauvegarder/restaurer vos bases de données.
Vous pouvez regarder ce petit
<a href="http://openbsd.raveland.org/ports/postgresql/UPGRADE_HOWTO.txt">
howto</a> si vous voulez plus de détails la dessus.
Il faut remarquer que pkg_add vous avertira sur cette mise à jour.

<a name="20101111"></a>
<h3>2010/11/11 - mises à jour Xenocara</h3>
libXft et libXext ony été mis à jour. Vous devez supprimer ces fichiers
obsolétes :
<blockquote><pre><b>
rm /usr/X11R6/bin/xft-config  /usr/X11R6/man/man1/xft-config.1 \
   /usr/X11R6/include/X11/extensions/lbxbuf.h \
   /usr/X11R6/include/X11/extensions/lbxbufstr.h \
   /usr/X11R6/include/X11/extensions/lbximage.h
</b></pre></blockquote>


<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: current.html,v 1.248 ]<br>
$Translation: current.html,v 1.145 2010/11/12 17:09:18 benoit Exp $<br>
-->
$OpenBSD: current.html,v 1.96 2010/11/12 17:22:55 ajacoutot Exp $
</small>

</body>
</html>
