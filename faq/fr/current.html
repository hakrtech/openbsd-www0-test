<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Suivre la version de développement "-current"</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2005-2009 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../../fr/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[Index de la FAQ]</a>
</font>

<p>

<h1><font color="#e00000">Suivre la version de développement "<i>-current</i>"</font></h1>
<hr>

<h3>Table des matières</h3>
<p>
<ul>
<li><a href="#Intro">Introduction</a>
<!-- Les entrées les plus vieilles en haut... -->
<li><a href="#20110313">2011/03/13 - mklocale -current exigé</a>
<li><a href="#20110319">2011/03/19 - [ports] mise à jour groff incompatible</a>
<li><a href="#20110414">2011/04/14 - Noyau "make depend" maintenat no-op</a>
<li><a href="#20110417">2011/04/17 - Nouveau script security(8)</a>
<li><a href="#20110418">2011/04/18 - vnd supprimé, svnd renommé vnd</a>
<li><a href="#20110422">2011/04/22 - [ports] mises à jour SOGo</a>
<li><a href="#20110422a">2011/04/22 - [ports] www/opera-flashplugin supprimé</a>
<li><a href="#20110428">2011/04/28 - ftp-proxy(8) pf.conf changements nécessaires</a>
<li><a href="#20110505">2011/05/05 - tftp-proxy(8) pf.conf changements nécessaires</a> 
<li><a href="#20110520">2011/05/20 - pf.conf 'set skip' gére maintenant les groupes</a>
<li><a href="#20110525">2011/05/25 - suppression du support pour l'héritage audio et les noms de périphériques MIDI</a>
<li><a href="#20110528">2011/05/28 - [ports] mise à jour Dovecot</a>
<!-- Les nouvelles additions se mettent en bas, merci -->
</ul>
    
<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>Introduction</h2>
Ce document est pour les personnes souhaitant suivre la version de
développement d'OpenBSD; celle-ci sera nommée <i>-current</i> dans la
suite de ce texte. Il contient des informations sur les changements
apportés entre la version 4.9-release et <i>-current</i>, et ne devrait
PAS être utilisé par quiconque voulant faire une mise à jour à partir
des versions 4.7 ou précédentes ou même par les personnes souhaitant
suivre <a href="../../fr/stable.html"><i>-stable</i></a>.

<p>
Si vous voulez passer vers la version 4.9-release ou 4.9-stable à partir
de versions antérieures, consulter le <a href="../upgrade48.html">guide de
mise à niveau</a>.

<p>
Soyez certain d'avoir lu et compris la
<a href="faq5.html">FAQ 5 - Construire le Système à partir des Sources</a>
avant d'utiliser -current et les instructions qui suivent.

<p>
Vous devriez TOUJOURS partir d'un "snapshot" pour suivre
<i>-current</i>. Une mise à jour via la compilation des sources n'est
pas supportée.

<p>
La plupart de ces changements doivent être réalisés comme root.

<a name="20110313"></a>
<h3>2011/03/13 - mklocale -current exigé</h3>
mklocale a besoin d'être compilé et installé pour ne pas avoir une erreur 
&quot;de conflit d'entrée de tableau&quot; :
<blockquote>
<pre>
<b>
cd /usr/src/usr.bin/mklocale
make obj
make depend
make
make install
</b>
</pre>
</blockquote>

<a name="20110319"></a>
<h3>2011/03/19 - [ports] mise à jour groff incompatible</h3>
Dans le cas ou vous compilez des paquetages, il faut mettre à jour
src/usr.sbin/pkg_add/OpenBSD en même temps que la mise à jour de
groff-1.15 à groff-1.21.
Le nouveau groff et l'ancien pkg_create construisent les manuels avec les
échappements ANSI, l'ancien groff et le nouveau pkg_create peuvent causer
des problémes dans la contructions de paquetage.

<a name="20110414"></a>
<h3>2011/04/14 - Noyau "make depend" maintenant no-op</h3>
Les Makefiles du noyau autogénére maintenant les dépendances durant le compilation,
donc la cible "make depend" sort tranquillement, ne faisant rien.
Les utilisateurs de la plupart des plates-formes n'auront rien à faire sur ce sujet.

<p>
Les utilisateurs des plates-formes basés sur gcc2 (hp300, mvme68k, mvme88k, sparc, vax)
devront reconstruire gcc avant que cela ne fonctionne pour implémenter les
options de gcc requises.

<blockquote><pre><b># gcc2 platforms only!!
rm -r /usr/obj/gnu/egcs/gcc/* 
cd /usr/src/gnu/egcs/gcc         
make -f Makefile.bsd-wrapper clean       
make -f Makefile.bsd-wrapper obj         
make -f Makefile.bsd-wrapper depend      
make -f Makefile.bsd-wrapper     
make -f Makefile.bsd-wrapper install     
make -f Makefile.bsd-wrapper clean       
make -f Makefile.bsd-wrapper depend      
make -f Makefile.bsd-wrapper     
make -f Makefile.bsd-wrapper install     
</b></pre></blockquote>

Mais comme toujours, démarrer d'un snapshot récent est une meilleure idée.

<a name="20110417"></a>
<h3>2011/04/17 - nouveau script <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=security&sektion=8">security(8)</a>
</a></h3>
Appliquez la <a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/daily.diff?r1=1.69;r2=1.70">revision 1.70</a>
à <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=daily&sektion=8">daily(8)</a>.
Dans le cas ou vous avez ajouté du code au fichier <tt>/etc/security</tt>,
déplacez ce code dans <tt>/etc/daily.local</tt>.
Supprimez le fichier <tt>/etc/security</tt>, il a été remplacé par le fichier
<tt>/usr/libexec/security</tt> contenu maintenant dans le set de base.
Supprimez aussi la ligne contenant <tt>/etc/security</tt>
dans le fichier <tt>/etc/changelist</tt>.

<a name="20110418"></a>
<h3>2011/04/18 - vnd supprimé, svnd renommé vnd</h3>
Le traditionnel vnd qui bypass le buffer cache a été supprimé et svnd a été
renommé en vnd. Il n'est plus possible de faire de la pagination sur vnds.
Les utilisateurs utilisant current auront remarqué que le noyau traitera les
svndX et vndX comme les mêmes périphériques maintenant, donc les anciens
périphériques svnd continueront de fonctionner. 

<a name="20110422"></a>
<h3>2011/04/22 - [ports] mises à jour de SOGo</h3>
SOGo a été mis à jour en 1.3.6.
La nouvelle gestion des sessions nécessite une nouvelle configuration par
défaut nommée OCSSessionsFolderURL.
Pour plus d'information consultez le fichier README du paquetage ou le guide 
général d'installation de SOGo installé avec le paquetage.

<a name="20110422a"></a>
<h3>2011/04/22 - [ports] www/opera-flashplugin supprimé</h3>
www/opera-flashplugin a été supprimé. Vous pouvez installer GNU Gnash en
remplacement.
<!-- XXX remove FAQ 13.14 for 5.0 -->

<a name="20110428"></a>
<h3>2011/04/28 - ftp-proxy(8) pf.conf changements nécessaires</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&sektion=8">ftp-proxy(8)</a>
a été modifié pour utiliser divert-to à la place de rdr-to, supprimant ainsi
la côuteuse recherche des états utilisant DIOCNATLOOK ioctl.
Les règles PF doivent être ajustées pour compenser - les vieilles règles
ressemblent à cela :

<blockquote><pre><b>pass in quick proto tcp to port ftp rdr-to 127.0.0.1 port 8021</b></pre></blockquote>
 
et doivent être remplacées par :

<blockquote><pre><b>pass in quick inet proto tcp to port ftp divert-to 127.0.0.1 port 8021</b></pre></blockquote>
 
Il faut remarquer qu'avec divert-to, la famille des adresses (dans cet
exemple <tt>inet</tt>) doit être spécifiée explicitement.

<a name="20110505"></a>
<h3>2011/05/05 - tftp-proxy(8) pf.conf changements nécessaires</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&sektion=8">tftp-proxy(8)</a>
a aussi été modifié pour utiliser divert-to.
Les règles PF doivent être ajustées pour compenser - les vieilles règles
ressemblent à cela :
 
<blockquote><pre><b>pass in quick on internal proto udp to port tftp rdr-to 127.0.0.1 port 6969</b></pre></blockquote>

et doivent être remplacées par :

<blockquote><pre><b>pass in quick on internal inet proto udp to port tftp divert-to 127.0.0.1 port 6969</b></pre></blockquote>
 
Il faut encore remarquer que la famille des adresses doit être spécifiée explicitement.

<a name="20110520"></a>
<h3>2011/05/20 - pf.conf 'set skip' gére maintenant les groupes</h3>

Dans pf.conf, '<tt>set skip on &lt;...&gt;</tt>' fonctionne maintenant avec
les groupes d'interfaces.
Auparavant si un type d'interface (sans numéro) été utilisé, par exemple
'<tt>set skip on vlan</tt>' ou '<tt>set skip on em</tt>' étaient utilisés,
ils avaientt la fonctionnalité non documentée de prendre toutes les
interfaces de ce type.
Maintenant il ne prendra qu'une interface qui sera membre du groupe nommé.<p>

Ce résultat changera le comportement pour certains utilisateurs :
Si vous utilisez actuellement "set skip" avec une interface de type physique 
(par exemple "<tt>set skip on ix</tt>") vous devrez ajouter l'interface à un
groupe de ce nom : '<tt>ifconfig ix0 group ix</tt>' ou ajouter '<tt>group ix</tt>'
à hostname.ix0.<p>

Le clonage des interfaces en cours de fonctionnement (par exemple lo, trunk, vlan, 
pppoe, carp, gif, mpe et les autres) sera par défaut dans un groupe nommé
aprés le type d'interface, donc pour ces interfaces il n'y aura pas de changement
dans leur comportement sauf si vous en changez délibérement le groupe, par
exemple avec '<tt>ifconfig carp456 -group carp</tt>'.

<p>
<a name="20110525"></a>
<h3>2011/05/25 - suppression du support pour l'héritage audio et les noms de
périphériques MIDI</h3>
L'héritage de nommage ne fonctionnera plus donc tous les scripts ou les
fichiers de configuration d'applications utilisant 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sndio&amp;sektion=7">sndio(7)</a>
devront être mis à jour.
Exemples:

<pre>
     /dev/audio0   --&gt;   sun:0
     /dev/audio1   --&gt;   sun:1
     /dev/rmidi2   --&gt;   rmidi:2
     default       --&gt;   aucat:0
     mystuff       --&gt;   aucat:0.mystuff
</pre>

<p>
<a name="20110528"></a>
<h3>2011/05/28 - [ports] mise à jour Dovecot</h3>
Dovecot a eu une mise à jour majeure, nécessitant certains changements dans
les fichiers de configuration.
Voir la note <a href="http://wiki2.dovecot.org/Upgrading/2.0">sur la mise à
jour de 1.1 vers 2.0</a> sur le wiki de Dovecot pour plus d'informations sur
la façon de le faire.<p>
Le support base de données a été déplacé des versions saveurs ("flavors") de
Dovecot (dovecot-1.2.16p5-ldap, -mysql, -postgresql, -sqlite, etc) en
plugins dans des sous-paquetages (dovecot-ldap-2.0.13, etc).
Toutes les anciennes versions devront être mise à jour avec le nouveau
paquetage principal; si vous utilisez des saveurs pour le support base de
données, vous devrez ajouter vous-même le bon sous-paquetage.
Berkeley DB n'est plus supportée, si vous l'utilisiez vous devrez passer à
une base de données SQL à la place.

<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: current.html,v 1.267 ]<br>
$Translation: current.html,v 1.154 2011/08/25 12:04:16 ajacoutot Exp $<br>
-->
$OpenBSD: current.html,v 1.104 2011/08/25 12:13:08 ajacoutot Exp $
</small>

</body>
</html>
