<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Suivre la version de développement "-current"</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2005-2012 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../../fr/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[Index de la FAQ]</a>
</font>

<p>

<h1><font color="#e00000">Suivre la version de développement "<i>-current</i>"</font></h1>
<hr>

<h3>Table des matières</h3>
<p>
<ul>
<li><a href="#Intro">Introduction</a>
<!-- Les entrées les plus vieilles en haut... -->
<li><a href="#20120304">2012/03/04 - xf86-video-ati mise à jour de retour</a>
<li><a href="#20120406">2012/04/06 - RAIDframe supprimé</a>
<li><a href="#20120412">2012/04/12 - [landisk] gcc4 pour landisk</a>
<li><a href="#20120428">2012/04/28 - [ports] gnome-keyring subversion est maintenant un sous-package</a>
<li><a href="#20120606">2012/06/06 - [ports] xpdf-utils remplacé poppler-utils</a>
<li><a href="#20120607">2012/06/07 - [ports] ser supprimé</a>
<li><a href="#20120607a">2012/06/07 - [ports] scrotwm renommé spectrwm</a>
<li><a href="#20120607b">2012/06/07 - [ports] xxxterm renommé xombrero</a>
<li><a href="#20120608">2012/06/08 - [ports] dovecot mis à jour</a>
<li><a href="#20120623">2012/06/23 - nginx.conf: emplacement par défaut des fichiers SSL changé</a>
<li><a href="#20120708">2012/07/08 - smtpd.conf: syntaxe changée</a>
<li><a href="#20120709">2012/07/09 - smtpd: file d'attente changée</a>
<li><a href="#20120709a">2012/07/09 - table d'utilisation de HID changée</a>
<!-- 5.2 -->
<li><a href="#20120808">2012/08/08 - xf86-video-ati 6.14.6 est maintenant sélectionné par défaut</a>
<li><a href="#20120821">2012/08/21 - SLAAC IPv6 à des adresse privées par défaut</a>
<li><a href="#20120823">2012/08/23 - Nouveau comportement du toolchain</a>
<li><a href="#20120830">2012/08/30 - pmdb(1) supprimé</a>
<li><a href="#20120831">2012/08/31 - gcc(1) utilise maintenant __guard_local au lieu de __guard sur les architectures ELF/GCC4</a>

<!-- Les nouvelles additions se mettent en bas, merci -->
</ul>
    
<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>Introduction</h2>
Ce document est pour les personnes souhaitant suivre la version de
développement d'OpenBSD; celle-ci sera nommée <i>-current</i> dans la
suite de ce texte. Il contient des informations sur les changements
apportés entre la version 5.1-release et <i>-current</i>, et ne devrait
PAS être utilisé par quiconque voulant faire une mise à jour à partir
des versions 5.0 ou précédentes ou même par les personnes souhaitant
suivre <a href="../../fr/stable.html"><i>-stable</i></a>.

<p>
Si vous voulez passer vers la version 5.1-release ou 5.1-stable à partir
de versions antérieures, consulter le <a href="../upgrade48.html">guide de
mise à niveau</a>.

<p>
Soyez certain d'avoir lu et compris la
<a href="faq5.html">FAQ 5 - Construire le Système à partir des Sources</a>
avant d'utiliser -current et les instructions qui suivent.

<p>
Vous devriez TOUJOURS partir d'un "snapshot" pour suivre
<i>-current</i>. Une mise à jour via la compilation des sources n'est
pas supportée.

<p>
La plupart de ces changements doivent être réalisés comme root.

<p>
<a name="20120304"></a>
<h3>2012/03/04 - retour de la mise à jour de xf86-video-ati</h3>

Le driver <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeon">radeon(4)</a>
a été remis à jour à la version 6.14.3, mais n'est pas sélectionné par le code
d'auto-configuration.

Le driver <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeonold">radeonold(4)</a>
fournit une version gelée du dernier driver fonctionnant, jusqu'à ce
que les problèmes du nouveau driver soient corrigés.<br>
Les utilisateurs ayant besoin du nouveau driver devraient créer un fichier
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xorg.conf">xorg.conf(5)</a>
contenant juste
<pre>
Section "Device"
    Identifier "RadeonCard"
    Driver "radeon"
EndSection
</pre>
ou fusionner cette section dans leur fichier <tt>/etc/X11/xorg.conf</tt> existant.<br>
Le driver <b>radeonhd</b> est désormais déprécié.
Les utilisateurs de ce driver devraient mettre à jour leur fichier
<tt>/etc/X11/xorg.conf</tt> en remplaçant
<pre>
      Driver "radeonhd"
</pre>
par
<pre>
      Driver "radeon"
</pre>

<p>
<a name="20120406"></a>
<h3>2012/04/06 - RAIDframe supprimé</h3>
Le pilote de disque RAIDFrame et son utilitaire de configuration ont été supprimés.
Après une mise à niveau, les fichiers suivants peuvent être supprimés:
<blockquote><pre>
<b>rm /sbin/raidctl
rm /usr/share/man/man4/raid.4
rm /usr/share/man/man8/raidctl.8
</b></pre></blockquote>
Les utilisateurs de RAIDFrame vont devoir reconsidérer des alternatives comme
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid">softraid(4)</a>.

<p>
<a name="20120412"></a>
<h3>2012/04/12 - [landisk] gcc4 pour landisk</h3>

landisk est passé de gcc3 à gcc4. Il est sévèrement recommandé d'utiliser
les snapshots plutôt que la méthode qui va suivre.
Les makefiles, gcc, cpp et libstdc++ à jour doivent être installés de
la manière suivante.
<p>
Premièrement, gcc4 et csu doivent être compilés avec le compilateur existant:
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/share/mk && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make
cd /usr/src/lib/csu
make obj && make depend && make && make install
cd /usr/src/gnu/usr.bin/cc
make install
</b></pre></blockquote>
Deuxièmement, gcc4 doit être reconstruit avec lui-même:
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/usr.bin/cpp
make obj && make && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make && make install
</b></pre></blockquote>
Troisièmement, libstdc++-v3 doit être installé après avoir supprimé les vieux
headers C++:
<blockquote><pre>
<b>rm -rf /usr/include/g++/*
cd /usr/src/gnu/lib/libstdc++-v3
make obj && make includes && make depend && make && make install
</b></pre></blockquote>
Et pour finir, il faut reconstruire le système entier avec la procédure
documentée dans
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">release(8)</a>.

<p>
Pour les gens mettant à jour en utilisant les snapshots, n'oubliez pas de faire:
<blockquote><pre>
<b>rm -rf /usr/include/g++/*
</b></pre></blockquote>
avant d'installer un nouveau snapshot.

<p>
<a name="20120428"></a>
<h3>2012/04/28 - [ports] gnome-keyring subversion est maintenant un sous-package</h3>

Le support de gnome-keyring dans Subversion était précédemment une SAVEUR du port,
car il fallait le programme principal pour lier libpthread provoquant certains
effets secondaires avec la bibliothèque uthread précédente (notablement, un
comportement étrange avec "svn diff | more" en raison de la façon dont I/O
gérait les descripteurs de fichiers).<p>

Comme ce n'est plus un problème avec rthreads, la SAVEUR a été supprimée.
Pour continuer à utiliser gnome-keyring avec Subversion, après avoir mis à
jour vos paquetages vous allez devoir faire "pkg_add gnome-keyring-subversion".

<p>
<a name="20120606"></a>
<h3>2012/06/06 - [ports] xpdf-utils remplacé par poppler-utils</h3>
Les outils PDF de xpdf-utils (pdffonts, pdfimages, pdfinfo, pdftotext)
ont été remplacés par les équivalents dans poppler-utils. Notez qu'ils
ne lisent plus les fichiers xpdrc et qu'ils sont à présent uniquement
configurés via les options des lignes de commandes.

<p>
<a name="20120607"></a>
<h3>2012/06/07 - [ports] ser supprimé</h3>
Le port 'ser' a été supprimé. Les utilisateurs de ser sont
priés de migrer vers kamailio au plus vite.

<p>
<a name="20120607a"></a>
<h3>2012/06/07 - [ports] scrotwm renommé spectrwm</h3>
scrotwm a été renommé en spectrwm. La mise à jour du
package sera automatiquement gérée mais vous allez devoir
renommer vos fichier(s) de configuration:
<tt>mv /etc/scrotwm.conf /etc/spectrwm.conf</tt> pour les
fichiers de configuration système, et les fichiers ".scrotwm.conf"
dans les dossiers 'home' des utilisateurs devront être renommés
en ".spectrwm.conf". Vous allez aussi devoir adapter, au besoin,
les entrées dans .xsession, etc., pour lancer le window manager.

<p>
<a name="20120607b"></a>
<h3>2012/06/07 - [ports] xxxterm renommé xombrero</h3>
xxxterm a été renommé en Xombrero. La mise à jour du
package sera automatiquement gérée mais vous allez devoir
renommer vos fichier(s) et dossiers de configuration. Il n'y a pas de fichier
de configuration système, mais les fichiers ".xxxterm.conf"
dans les dossiers 'home' des utilisateurs devront être
renommés en ".xombrero.conf".

<p>
<a name="20120608"></a>
<h3>2012/06/08 - [ports] dovecot mis à jour</h3>
Dovecot a été mis à jour à la version 2.1 qui pourrait
requérir quelques changements mineurs dans la configuration.
Référez-vous aux 
<a href="http://wiki2.dovecot.org/Upgrading/2.1">notes de mise à jour</a>
pour plus d'informations.

<p>
<a name="20120623"></a>
<h3>2012/06/23 - nginx.conf: emplacement par défaut des fichiers SSL changé</h3>
Les valeurs <tt>ssl_certificate</tt> et <tt>ssl_certificate_key</tt> du
fichier <tt>/etc/nginx/nginx.conf</tt> ont été changées respectivement en
<tt>/etc/ssl/server.crt</tt> et <tt>/etc/ssl/private/server.key</tt> pour
correspondre avec la page de manuel de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=8">ssl(8)</a>.

<p>
<a name="20120708"></a>
<h3>2012/07/08 - smtpd.conf: syntaxe changée</h3>
La règle <tt>relay via</tt> doit à présent être exprimée avec une URL relais:
<pre>	accept [...] relay via "mx1.example.org" smtps port 465</pre>
devient
<pre>	accept [...] relay via "smtps://mx1.example.org"</pre>
La nouvelle syntaxe d'URL est documentée dans
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd.conf&sektion=5">smtpd.conf(5)</a>.

<p>
<a name="20120709"></a>
<h3>2012/07/09 - smtpd: file d'attente changée</h3>
Un changement dans la file d'attente a été introduit, vous
allez devoir vider votre file avant de mettre à jour.

<p>
<a name="20120709a"></a>
<h3>2012/07/09 - table d'utilisation de HID changée</h3>
La table d'utilisation de HID (comme utilisée par
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uhid&sektion=4">uhid(4)</a>)
a été mise à jour et certaines entrées ont été changées. Si vous utilisez
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usbhidaction&sektion=1">usbhidaction(1)</a>
vous pourriez avoir besoin d'ajuster votre configuration aux nouvelles entrées.
Celles-ci peuvent être obtenues avec:
<pre>usbhidctl -l</pre>

<!-- 5.2 -->
<p>
<a name="20120808"></a>
<h3>2012/08/08 - xf86-video-ati 6.14.6 est maintenant sélectionné par défaut</h3>
Le pilote X.Org
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeon&sektion=4">radeon(4)</a>
a été mis à jour à la version 6.14.6 et est à présent sélectionné par
défaut lors d'utilisations sans le fichier <tt>xorg.conf</tt>.<br>
Pour forcer l'utilisation du pilote
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeonold&sektion=4">radeonold(4)</a>,
ajoutez les lignes suivantes à <tt>/etc/X11/xorg.conf</tt>:
<pre>
Section "Device"
    Identifier "Old Radeon Card"
    Driver "radeonold"
EndSection
</pre>

<p>
<a name="20120821"></a>
<h3>2012/08/21 - SLAAC IPv6 à des adresses privées par défaut</h3>
L'autoconfiguration sans état d'IPv6 (comme quand vous configurez
une interface en utilisant "rtsol") utilise désormais des adresses
privées RFC4941.<p>
Cela signifie que lorsque vous mettez en place une connexion sortante,
les adresses prévisibles basées sur l'adresse MAC ne sont plus utilisées
en tant qu'adresses sources; à la place, des adresses temporaires sont
générées périodiquement et utilisées (voir la description de "autoconfprivacy"
d'<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&sektion=8">ifconfig(8)</a>
pour plus d'informations).<p>
Les connexions entrantes ne sont pas affectées par ceci; l'adresse
IPv6 basée sur l'adresse MAC est toujours configurée sur l'interface
et peut être utilisée pour les connexions entrantes.
Cependant, si les connexions vers d'autres machines sont filtrées selon
les adresses IPv6 ou le reverse DNS, vous pourriez avoir besoin soit de
modifier votre configuration, soit de désactiver les adresses privées
(e.g. <tt>echo "up -autoconfprivacy" &gt;&gt; /etc/hostname.em0</tt>),
soit de configurer les adresses manuellement.

<p>
<a name="20120823"></a>
<h3>2012/08/23 - Nouveau comportement du toolchain</h3>
Le script de link
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld&sektion=1">ld(1)</a>
reconnaît désormais les sections .openbsd.randomdata, dont libc a aussi été mis
à jour pour s'en servir. Normalement, ld(1) n'est construit qu'après libc,
donc pour le construire utilisez en premier:
<blockquote><pre>
<b>cd /usr/src/gnu/usr.bin/binutils
make -f Makefile.bsd-wrapper obj
make -f Makefile.bsd-wrapper
make -f Makefile.bsd-wrapper install
</b></pre></blockquote>
Vous pouvez vérifier que ld(1) est mis à jour en vérifiant la sortie
de ld --verbose:
<blockquote><pre>
$ <b>ld --verbose | grep randomdata</b>
  .openbsd.randomdata     :
    PROVIDE_HIDDEN (__openbsd_randomdata_start = .);
    *(.openbsd.randomdata .openbsd.randomdata.*)
    PROVIDE_HIDDEN (__openbsd_randomdata_end = .);
</pre></blockquote>

<p>
<a name="20120830"></a>
<h3>2012/08/30 - pmdb(1) supprimé</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pmdb&sektion=1">pmdb(1)</a>
a été supprimé. Le fichier binaire et sa page de manuel peuvent être supprimés:
<blockquote><pre>
rm /usr/bin/pmdb /usr/share/man/man1/pmdb.1
</pre></blockquote>

<p>
<a name="20120831"></a>
<h3>2012/08/31 - gcc(1) utilise maintenant __guard_local au lieu de __guard sur les architectures ELF/GCC4</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&sektion=1">gcc(1)</a>
émet désormais du code de protection stack-smashing qui référence 
__guard_local à la place de __guard sur les architectures ELF/GCC4.
À cause du fait que GCC est construit à la fin d'un "make build" normal,
il est nécessaire soit de faire deux constructions complètes, soit de raccourcir
la première construction en mettant juste à jour les fichiers d'exécution C et
le compilateur:
<blockquote><pre>
cd /usr/src/lib/csu
make depend && make && make install
cd /usr/src/gnu/usr.bin/cc
make depend && make && make install
</pre></blockquote>
Vous pouvez ensuite procéder à un "make build" normal comme pour
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">release(8)</a>.

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: current.html,v 1.338 ]<br>
$Translation: current.html,v 1.162 2012/09/12 12:22:45 rustybsd Exp $<br>
-->
$OpenBSD: current.html,v 1.112 2012/09/14 10:03:02 ajacoutot Exp $
</small>

</body>
</html>
