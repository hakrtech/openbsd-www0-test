<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Suivre la version de développement "-current"</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2005-2009 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../../fr/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[Index de la FAQ]</a>
</font>

<p>

<h1><font color="#e00000">Suivre la version de développement "<i>-current</i>"</font></h1>
<hr>

<h3>Table des matières</h3>
<p>
<ul>
<li><a href="#Intro">Introduction</a>
<!-- Les entrées les plus vieilles en haut... -->
<li><a href="#20080913">2008/09/13 - xcompmgr(1) a été déplacé de ports 
 vers xbase</a>
<li><a href="#20080929">2008/09/29 - mise à jour de Perl 5.10.0</a>
<li><a href="#20081003">2008/10/03 - sm-client.st a été déplacé</a>
<li><a href="#20081102">2008/11/02 - mise à jour de Xserver 1.5.2</a>
<li><a href="#20081103">2008/11/03 - mise à jour de Perl 5.10.0</a>
<li><a href="#20081105">2008/11/05 - mise à jour de Perl 5.10.0</a>
<li><a href="#20081106">2008/11/06 - mise à jour de Xserver 1.5.2</a>
<li><a href="#20081107">2008/11/07 - mise à jour de Perl 5.10.0</a>
<li><a href="#20081111">2008/11/11 - support PIE ajouté à gcc 3.3.5 & csu</a>
<li><a href="#20081116">2008/11/16 - mixerctl(1) a été renommé</a>
<li><a href="#20081126">2008/11/26 - btd nécessite un utilisateur et un groupe</a>
<li><a href="#20090204">2009/02/04 - mise à jour de Perl 5.10.0</a>
<li><a href="#20090215">2009/02/15 - syntaxe de ifconfig(8) modifiée</a>
<li><a href="#20090218">2009/02/18 - numéro de version de pfsync(4) incrémentée</a>
<!-- 4.5 -->
<li><a href="#20090304">2009/03/04 - nouvel utilisateur et groupe pour smtpd</a>
<li><a href="#20090316">2009/03/16 - makemap(8) fonctionne maintenant à
travers mailwrapper(8)</a>
<li><a href="#20090324">2009/03/24 - changement du comportement de "redistribute 
default" dans ospfd(8) et ripd(8)</a>
<li><a href="#20090406">2009/04/06 - changements incompatibles sur pf(4)</a>
<li><a href="#20090407">2009/04/07 - réassemblage de fragment activé par 
défaut</a>
<li><a href="#20090426">2009/04/26 - require-order off par défaut dans pfctl(8)</a>
<!-- Les nouvelles additions se mettent en bas, merci -->
</ul>
    
<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>Introduction</h2>
Ce document est pour les personnes souhaitant suivre la version de
développement d'OpenBSD; celle-ci sera nommée <i>-current</i> dans la
suite de ce texte. Il contient des informations sur les changements
apportés entre la version 4.4-release et <i>-current</i>, et ne devrait
PAS être utilisé par quiconque voulant faire une mise à jour à partir
des versions 4.3 ou précédentes ou même par les personnes souhaitant
suivre <a href="../../fr/stable.html"><i>-stable</i></a>.

<p>
Si vous voulez passer vers la version 4.4-release ou 4.4-stable à partir
de versions antérieures, consulter le <a href="upgrade44.html">guide de
mise à niveau</a>.

<p>
Soyez certain d'avoir lu et compris la
<a href="faq5.html">FAQ 5 - Construire le Système à partir des Sources</a>
avant d'utiliser -current et les instructions qui suivent.

<p>
Vous devriez TOUJOURS partir d'un "snapshot" pour suivre
<i>-current</i>. Une mise à jour via la compilation des sources n'est
pas supportée.
   
<p>
Si vous souhaitez avoir des informations pour mettre à jour en partant de
versions plus anciennes, consultez le document
<a href="upgrade-old.html">upgrade-old.html</a>.
Celui-ci est fourni en tant que document historique -- il ne DOIT PAS
servir de procédure de mise à jour.

<p>

<a name="20070903"></a>
<a name="20080907"></a>
<h3>2008/09/07 - syntaxe de ifconfig(8) modifiée</h3>
Certaines options de <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a>
ont été modifiées. Pour afficher la liste des médias supportés vous devez 
maintenant utiliser :
<pre>
     <b>ifconfig &lt;interface&gt; media</b>
</pre>
L'option pour scanner des réseaux sans-fil a aussi été modifiée, mais a été
<a href="#20090215">revisée ultérieurement</a>.

<p>
<a name="20080913"></a>
<h3>2008/09/13 - xcompmgr(1) a été déplacé de ports vers xbase</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xcompmgr&amp;sektion=1">xcompmgr(1)</a>
a été déplacé de ports vers xbase. Si vous l'avez installé via les ports,
merci de le supprimer avec pkg_delete.

<p>

<a name="20080929"></a>
<h3>2008/09/29 - mise à jour de Perl 5.10.0</h3>
A cause de changement dans la distribution Perl, vous devez supprimer 
manuellement l'ancien répertoire perl obj avant de le compiler.
<pre>
     # rm -rf /usr/obj/gnu/usr.bin/perl
</pre>
Vous pouvez recréer le répertoire obj :
<pre>
    # cd /usr/src/gnu/usr.bin/perl
    # make -f Makefile.bsd-wrapper obj
</pre>

Il est à remarquer qu'a cause de cette mise à jour majeure de Perl,
vous devez recompiler/reinstaller tous les modules Perl XS. Il y
a des modules qui incluent un objet partagé qui est chargé dans le
processus Perl executé. Pour voir la liste des modules XS installés
via le sous-système des paquetages, executez :
<pre>
    # cd /var/db/pkg
    # fgrep .so p5-*/+CONTENTS | sed 's/+CONTENTS.*//' | sort -u
</pre>
Mettre à jour à la derniére version du snapshot des paquetages avec
"pkg_add -ui" prendra soin de ces mises à jour. Aprés la mise à jour,
vous devez desinstaller plusieurs modules qui sont maintenant fournis
dans Perl par défaut :
<pre>
    # pkg_delete p5-Archive-Tar p5-Compress-Raw-Zlib p5-Compress-Zlib \
      p5-IO-Compress-Base p5-IO-Compress-Zlib p5-IO-Zlib p5-Module-Build \
      p5-Module-CoreList p5-Module-Load p5-version p5-Digest-SHA
</pre>

<p>
<a name="20081003"></a>
<h3>2008/10/03 - sm-client.st a été déplacé</h3>
Le fichier (optionnel) des statuts de sendmail pour les messages soumis a
été deplacé de <tt>/var/spool/clientmqueue/sm-client.st</tt> vers
<tt>/var/log/sm-client.st</tt> pour être cohérent avec l'endroit ou se
situe le fichier <tt>/var/log/sendmail.st</tt>.

<p>
<a name="20081102"></a>
<h3>2008/11/02 - mise à jour de Xserver 1.5.2</h3>
<tt>RgbPath</tt> n'est plus un mot clé valide dans la section <b>Files</b>
du fichier de configuration 
<ahref="http://www.openbsd.org/cgi-bin/man.cgi?query=xorg.conf">xorg.conf(5)</a>.
L'entrée correspondante doit être supprimée des fichiers de configuration
existants. Cette directive était déjà ignorée depuis plusieurs versions.
<p>
Le pilote pour les composants Intel 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=i810">i810(4)</a>
a été complétement remplacé par le pilote 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intel">intel(4)</a>.
Le fichier de configuration 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xorg.conf">xorg.conf(5)</a>
doit être mis à jour.

<a name="20081103"></a>
<h3>2008/11/03 - mise à jour de Perl 5.10.0</h3>
Un autre module maintenant installé dans le Perl de base a été trouvé,
merci de le supprimer.
<pre>
     # pkg_delete p5-Locale-Maketext-Simple
</pre>

<a name="20081105"></a>
<h3>2008/11/05 - mise à jour de Perl 5.10.0</h3>
Il y a deux modules installés dans le Perl de base a supprimer.
<pre>
     # pkg_delete p5-Pod-Escapes p5-Pod-Simple
</pre>

<a name="20081106"></a>
<h3>2008/11/06 - mise à jour de Xserver 1.5.2</h3>
Plusieurs modules xserver et pilotes sont obsolètes. Pour être sur que
 <tt>X -configure</tt> n'essaye pas de configurer ces pilotes obsolètes,
il est recommandé de supprimer l'ancien contenu de 
<tt>/usr/X11R6/lib/modules</tt> avant d'installer un nouveau snapshot.

<a name="20081107"></a>
<h3>2008/11/07 - mise à jour de Perl 5.10.0</h3>
Plus de modules migrer vers la base, comme précedemment.
<pre>
     # pkg_delete p5-ExtUtils-ParseXS p5-ExtUtils-CBuilder \
     p5-Module-Pluggable p5-Time-Piece
</pre>

<p>

<a name="20081111"></a>
<h3>2008/11/11 - support PIE ajouté à gcc 3.3.5 & csu</h3>
Le support des executables en position indépendante (PIE) a été ajouté à
gcc 3.3.5 et csu.  Pour mettre à jour suivez ces étapes :
<ul>
<li>Compilation et installation de gcc:
<pre>
     # cd /usr/src/gnu/usr.bin/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
     # make -f Makefile.bsd-wrapper clean
</pre>
<li><a href="faq5.html#BldUserland">Compilation et installation userland</a>
</ul>

<p>
<a name="20081116"></a>
<h3>2008/11/16 - mixerctl(1) a été renommé</h3>
Le nom des objets du mixer comme <tt>headphones</tt> a été raccourci à 
<tt>hp</tt>, et <tt>speaker</tt> a été raccourci à <tt>spkr</tt>.
Cela nécessite des changements dans mixerctl.conf(5).

<p>

<a name="20081126"></a>
<h3>2008/11/26 - btd nécessite un utilisateur et un groupe</h3>
Le nouveau daemon ajouté <tt>btd</tt> révoque ces privilèges a un nouvel utilisateur
et groupe _btd.
Comme <i>root</i>, ajoutez le nouvel utilisateur et son groupe correspondant en
utilisant 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a> :
<blockquote><pre>
# useradd -u94 -g=uid -c"Bluetooth Daemon" -d/var/empty -s/sbin/nologin _btd</b>
</blockquote></pre>

<p>
<a name="20090204"></a>
<h3>2009/02/04 - mise à jour de Perl 5.10.0</h3>
Un autre module qui a migré vers la base, merci de le supprimer.
<pre>
    # pkg_delete p5-Module-Loaded
</pre>

<p>
<a name="20090215"></a>
<h3>2009/02/15 - syntaxe de ifconfig(8) modifiée</h3>
L'option <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a>
pour scanner les réseaux sans-fil a été modifiée.
Vous devez utiliser maintenant :
<pre>
    <b>ifconfig &lt;interface&gt; scan</b>
</pre>

<p>
<a name="20090218"></a>
<h3>2009/02/18 - numéro de version de pfsync(4) incrémentée</h3>
A cause de changements dans le protocole et l'implémentation de l'interface 
pfsync(4), le numéro de protocole pfsync(4) a été incrementé. Les Firewalls 
avec des versions différentes seront incapables de synchroniser la table des
états et les connexions existantes se termineront sur le failover.

<!-- cut-off point for 4.5 -->

<p>
<a name="20090304"></a>
<h3>2009/03/04 - nouvel utilisateur et groupe pour smtpd</h3>
La commande suivante doit être éxécutée :
<pre>
useradd -u 95 -g =uid -c "SMTP Daemon" -d /var/empty -s /sbin/nologin _smtpd
</pre>

<p>
<a name="20090316"></a>
<h3>2009/03/16 - makemap(8) now run through mailwrapper(8)</h3>
Depuis l'ajout de smtpd(8) à la compilation, makemap(8) fonctionne à travers
mailwrapper(8) pour supprimer les conflits entre les versions binaires de 
sendmail et smtpd. Pour que cela fonctionne, on doit ajouter manuellement 
la ligne suivante dans /etc/mailer.conf :
<pre>
makemap		/usr/libexec/sendmail/makemap
</pre>

<p>
<a name="20090324"></a>
<h3>2009/03/24 - Changement du comportement de "redistribute default" dans 
ospfd(8) et ripd(8)</h3>
"redistribute default", configuré dans les fichier ospfd.conf(5) et 
ripd.conf(5), nécessite maintenant la présence d'une route par défaut dans
le table de routage du noyau sinon aucune route ne sera annoncée par ospfd(8)
et ripd(8).

<p>
<a name="20090406"></a>
<h3>2009/04/06 - changements incompatibles sur pf(4)</h3>
La normalisation de paquet ("scrubbing") a été intégrée dans les règles
principales. C'est maintenant spécifié en ajoutant le paramétre "scrub
(options)" aux règles. Par exemple :
 
<pre>
        scrub in all no-df max-mss 1440
</pre>

peut-être maintenant remplacé avec une règle utilisant la nouvelle action 
"match":

<pre>
        match in all scrub (no-df max-mss 1440)
</pre>

Depuis que l'ordre du jeu de règles est appliqué par défaut, elles devront
être déplacées dans les règles principales (avant les règles "pass quick"), 
ou la validation de l'ordre des règles devra être désactivée :

<pre>
        set require-order no
</pre>

Le réassemblage de paquet a été simplifié. "Crop" et "drop-ovl" ont été
supprimés; seulement le réassemblage complet reste. Il est activé ainsi :

<pre>
        set reassemble yes|no [no-df]
</pre>

Si "no-df" est utilisé, les fragments (et seulement les fragments !) avec le
bit df activé seront reinitialisés avec d'entrer dans le cache fragment, et
donc le paquet réassemblé n'aura pas le df activé. Les paquets
non-fragmentés ne sont pas affectés par no-df.

<p>
<a name="20090407"></a>
<h3>2009/04/07 - réassemblage de fragment activé par
défaut dans pf(4)</h3>
Comme il n'y a pas de raison de ne pas utiliser le réassemblage de fragment,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>
a été modifié pour l'activer par défaut.
 
<p>
<a name="20090426"></a>
<h3>2009/04/26 - require-order off par défaut dans pfctl(8)</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>
a été modifié pour que "set require-order" soit maintenant désactivé par
défaut.
Ceci est uniquement consultatif, aucun changement de configuration est
nécessaire.

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: current.html,v 1.149 ]<br>
$Translation: current.html,v 1.87 2009/04/26 15:12:13 benoit Exp $<br>
-->
$OpenBSD: current.html,v 1.58 2009/04/26 15:44:20 tobias Exp $
</small>

</body>
</html>
