<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Suivre la version de développement "-current"</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2005-2009 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../../fr/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[Index de la FAQ]</a>
</font>

<p>

<h1><font color="#e00000">Suivre la version de développement "<i>-current</i>"</font></h1>
<hr>

<h3>Table des matières</h3>
<p>
<ul>
<li><a href="#Intro">Introduction</a>
<!-- Les entrées les plus vieilles en haut... -->
<li><a href="#20100323">2010/03/23 - [ports] Mise à jour majeure de Dovecot</a>
<li><a href="#20100326">2010/03/26 - changement des metadatas dans softraid(4)</a>
<li><a href="#20100403">2010/04/03 - mandoc(1) désormais nécessaire</a>
<li><a href="#20100417">2010/04/17 - ahci(4) n'attache plus les disques en mode-RAID</a>
<li><a href="#20100421">2010/04/21 - suppression de libevent evdns.h</a>
<li><a href="#20100424">2010/04/24 - nouvel utilisateur et groupe pour aucat et midicat</a>
<li><a href="#20100426">2010/04/26 - [ports] base samba des utilisateurs par défaut changée</a>
<li><a href="#20100509">2010/05/09 - changements dans le Makefile système</a>
<li><a href="#20100510">2010/05/10 - changements dans le pilote X Intel</a>
<li><a href="#20100515">2010/05/15 - mise à jour et suppression de librairies X.Org</a>
<li><a href="#20100525">2010/05/25 - nouveau config(8) pour la compilation du noyau</a>
<li><a href="#20100526">2010/05/26 - gcc4 pour amd64 et sparc64</a>
<li><a href="#20100526a">2010/05/26 - f77 passe dans les ports</a>
<!-- Les nouvelles additions se mettent en bas, merci -->
</ul>
    
<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>Introduction</h2>
Ce document est pour les personnes souhaitant suivre la version de
développement d'OpenBSD; celle-ci sera nommée <i>-current</i> dans la
suite de ce texte. Il contient des informations sur les changements
apportés entre la version 4.7-release et <i>-current</i>, et ne devrait
PAS être utilisé par quiconque voulant faire une mise à jour à partir
des versions 4.6 ou précédentes ou même par les personnes souhaitant
suivre <a href="../../fr/stable.html"><i>-stable</i></a>.

<p>
Si vous voulez passer vers la version 4.6-release ou 4.6-stable à partir
de versions antérieures, consulter le <a href="../upgrade46.html">guide de
mise à niveau</a>.

<p>
Soyez certain d'avoir lu et compris la
<a href="faq5.html">FAQ 5 - Construire le Système à partir des Sources</a>
avant d'utiliser -current et les instructions qui suivent.

<p>
Vous devriez TOUJOURS partir d'un "snapshot" pour suivre
<i>-current</i>. Une mise à jour via la compilation des sources n'est
pas supportée.

<p>
La plupart de ces changements doivent être réalisés comme root.
   
<p>
Si vous souhaitez avoir des informations pour mettre à jour en partant de
versions plus anciennes, consultez le document
<a href="upgrade-old.html">upgrade-old.html</a>.
Celui-ci est fourni en tant que document historique -- il ne DOIT PAS
servir de procédure de mise à jour.

<p>
<a name="20100323"></a>
<h3>2010/03/23 - [Ports] Mise à jour majeure de Dovecot</h3>
Dovecot a été mis à jour de la version 1.1.20 à la 1.2.11. Le fichier de
configuration a été modifié et l'ancien plugin cmusieve a été retiré en
faveur de la nouvelle implémentation sieve de Dovecot. L'
<a href="http://permalink.gmane.org/gmane.os.openbsd.ports.cvs/42080">entrée
dans les logs du commit</a> donne plus de détails.

<p>
<a name="20100326"></a>
<h3>2010/03/26 - Changement des metadatas dans softraid(4)</h3>
Le format des metadatas dans
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&sektion=4">softraid(4)</a>
a été modifié et il n'est plus compatible avec les précédentes versions.
Ce qui fait que tous les volumes crées avec un ancien noyau ne seront pas
assemblés.
Les données sur les volumes existants doivent être sauvegardés avant de
mettre à jour.
Le volume devra alors être recrée et les données restaurées.

<a name="20100403"></a>
<h3>2010/04/03 - mandoc(1) nécessaire maintenant</h3>
mandoc(1) a été ajouté dans l'arbre de compilation, et il est maintenant
necéssaire pour compiler le système. Si vous ne l'avez pas installez un
snapshot ou :
<blockquote><pre>
<b>cd /usr/src/usr.bin/mandoc
make obj
NOMAN= make &amp;&amp; NOMAN= make install</b>
</pre></blockquote>

<a name="20100417"></a>
<h3>2010/04/17 - ahci(4) n'attache plus les disques en mode-RAID</h3>
Pour supprimer le risque de metadatas corrompues sur certains périphériques
Intel RAID, 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4">ahci(4)</a>
n'attache plus les IDs de périphérique PCI utilisés par ces contrôleurs
quand il sont en mode RAID.
Si vous perdez l'accés à vos disques, vous devrez changer le type de contrôleur
de RAID à AHCI dans le BIOS pour les récupérer.

<a name="20100421"></a>
<h3>2010/04/21 - suppression de libevent evdns.h</h3>
Avec la mise à jour de libevent de la 1.3 à la 1.4, le composant asynchrone
DNS a été supprimé. Vous devez supprimer les fichiers d'entête manuellement :
<blockquote><pre>
<b>rm /usr/include/evdns.h
rm /usr/libdata/perl5/site_perl/*-openbsd/evdns.ph</b>
</pre></blockquote>

<a name="20100424"></a>
<h3>2010/04/24 - nouvel utilisateur et groupe pour aucat(1) et midicat(1)</h3>
La commande suivante doit être executée :
<blockquote><pre>
<b>useradd -u 99 -g =uid -c "sndio privsep" -d /var/empty -s /sbin/nologin _sndio</b>
</pre></blockquote>

<a name="20100426"></a>
<h3>2010/04/26 - [ports] base samba des utilisateurs par défaut changée</h3>
La base par défaut des utilisateurs pour le port samba a été changée.
Si vous utilisez actuellement smbpasswd, vous devez soit ajuster votre
configuration; ou convertir votre base de données. Voir
<a href="http://www.openbsd.org/cgi-bin/cvsweb/ports/net/samba/files/README.OpenBSD?rev=1.12">README.OpenBSD</a>
pour plus d'informations.

<a name="20100509"></a>
<h3>2010/05/09 - changements dans le Makefile système</h3>
Les Makefiles considérent maintenant que la variable COMPILER_VERSION est active.
Les commandes suivantes doivent être executées avant de recompiler le userland :
<blockquote><pre>
<b>cd /usr/src/share/mk
make install</b>
</pre></blockquote>

<a name="20100510"></a>
<h3>2010/05/10 - changements dans le pilot X Intel</h3>

Le nouveau pilote X Intel oblige maintenant l'utilisation d'un noyau GEM.
Si X n'est pas à jour, ce fragment de configuration est nécessaire dans la
section pilote de xorg.conf :
<blockquote><pre>
Option "AccelMethod" "UXA"
</pre></blockquote>
Il est préferable de mettre à jour X en même temps que la mise à jour du
noyau.

<a name="20100515"></a>
<h3>2010/05/15 - mise à jour et suppression de librairies X.Org</h3>

Plusieurs bibliothèques X sont désormais obsolètes (Xp, Xtrap, Xevie, 
lbxutil) et une autre à subi un nettoyage majeur (Xext).
En conséquence, plusieurs anciens entêtes et fichiers de configuration
autotools ont été supprimés.
Vous devez les supprimer manuellement de votre système afin de les empêcher
d'interférer avec vos ports (ou autres logiciels) construit.
<blockquote><pre>
<b>cd /usr/X11R6/include/X11
rm Xaw/Print.h Xaw/PrintSP.h
rm -r XprintAppUtil XprintUtil
cd extensions
rm Print.h Printstr.h XEVIstr.h Xagstr.h Xcupstr.h Xdbeproto.h Xevie.h \
   Xeviestr.h dpmsstr.h lbxdeltastr.h lbxopts.h lbxstr.h lbxzlib.h \
   mitmiscstr.h multibufst.h securstr.h shapestr.h shmstr.h syncstr.h \
   xteststr.h xtrapbits.h xtrapddmi.h xtrapdi.h xtrapemacros.h \
   xtraplib.h xtraplibp.h xtrapproto.h
cd /usr/X11R6/lib/pkgconfig
rm evieproto.pc lbxutil.pc printproto.pc trapproto.pc xaw8.pc \
   xevie.pc xp.pc xprintapputil.pc xprintutil.pc xtrap.pc
rm /usr/X11R6/share/aclocal/xaw.m4</b>
</pre></blockquote>

<a name="20100525"></a>
<h3>2010/05/25 - Besoin du nouveau config(8) pour la compilation du noyau</h3>

Une nouvelle version de config(8) est nécessaire pour compiler le noyau.
Le recompiler en utilisant
<blockquote><pre>
<b>cd /usr/src/usr.sbin/config
make obj && make depend && make && make install</b>
</pre></blockquote>

<a name="20100526"></a>
<h3>2010/05/26 - gcc4 pour amd64 et sparc64</h3>

amd64 et sparc64 sont passés de gcc3 à gcc4.
Les makefiles mis à jour, gcc, cpp et libstdc++ doivent être reinstallé en
quatre étapes.
<p>
En premier, gcc4 doit être compilé avec le compilateur existant :
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/share/mk && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make && make install
</b></pre></blockquote>
En second, gcc4 doit être recompilé avec lui-même :
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/usr.bin/cpp
make obj && make && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make && make install
</b></pre></blockquote>
Troisièmement, libstdc++-v3 doit être installée :
<blockquote><pre>
<b>cd /usr/src/gnu/lib/libstdc++-v3
make obj && make includes && make depend && make && make install
</b></pre></blockquote>
Et en dernier le système complet doit être recompilé en suivant la procédure
habituelle documentée dans 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">release(8)</a>.

<a name="20100526a"></a>
<h3>2010/05/26 - f77 passe dans les ports</h3>
Le compilateur Fortran a été déplacé du système de base vers les ports.
Il faut supprimer les fichiers suivants aprés la mise à jour :
<blockquote><pre><b>rm -f /usr/bin/f77 /usr/bin/g77 /usr/include/f2c.h /usr/include/g2c.h \
   /usr/lib/gcc-lib/*-unknown-openbsd*/3.3.5/f771 /usr/lib/libfrtbegin.a \
   /usr/lib/libfrtbegin_p.a /usr/lib/libfrtbegin_pic.a /usr/lib/libg2c.a \
   /usr/lib/libg2c_p.a /usr/lib/libg2c_pic.a /usr/share/info/g77.info \
   /usr/share/man/cat1/f77.0 /usr/share/man/cat1/g77.0
</b></pre></blockquote>


<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: current.html,v 1.222 ]<br>
$Translation: current.html,v 1.132 2010/05/29 04:45:01 benoit Exp $<br>
-->
$OpenBSD: current.html,v 1.85 2010/05/30 15:55:53 ajacoutot Exp $
</small>

</body>
</html>
