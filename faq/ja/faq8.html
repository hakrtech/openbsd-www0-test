<html>
<head>
<title>8.0 - General Questions</title>
<link rev=  "made"          href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>
<h2><font color=#e00000>8.0 - 一般的な質問</font><hr></h2>

<p>
<ul><h3>目次</h3>
<!-- li><a href= "#Kerberos"    >8.1 - 最初にログインすると、Kerberos の警告がいろいろ出てくるのですが ?</a> -->
<li><a href= "#VirtTerms"   >8.2 - 仮想ターミナルの切り替えはどのようにするのでしょう ?
  (I386 のみ)</a>
<li><a href= "#LostPW"      >8.3 - root パスワードを忘れてしまいました……
  どうしましょう !</a>
<li><a href= "#X"           >8.4 - X が起動せずにエラーメッセージが
  数多く出力されるのですが ?</a>
<li><a href= "#CVS"         >8.5 - CVS というのは何でしょうか ?
  また、どのように使うのでしょう ?</a>
<li><a href= "#Ports"       >8.6 - ports ツリーって何でしょうか ?</a>
<li><a href= "#Packages"    >8.7 - packages って何でしょうか ?</a>
<li><a href= "#NoFloppy"    >8.8 - 起動時に接続していなかったフロッピー
  ドライブを使う手はあるのでしょうか ?</a>
<li><a href= "#Bootloader"  >8.9 - OpenBSD ブートローダ
  (<i>i386 のみ</i>)</a>
<li><a href= "#SKey"        >8.10 - S/Key を OpenBSD システム
  で使う</a>
<li><a href= "#MacTime"     >8.11 - 私の Macintosh の時計が
  遅れて困っているのですが ?</a>
<li><a href= "#SMP"         >8.12 - OpenBSD は SMP (対称マルチプロセッサマシン) で動きますか ?</a>
<li><a href= "#TTY"         >8.13 - tty デバイスを使おうとすると
  Input/output エラーがときどき出ます</a>
<li><a href= "#Netscape"    >8.14 - OpenBSD 用の Netscape バイナリは
  どこで見つかるのでしょうか ?</a>
<li><a href= "#mg"          >8.15 - mg エディタはどうやって使うのでしょうか ?</a>
<li><a href= "#ksh"         >8.16 - Ksh は私の .profile を
  見ていないようなのですが ?</a>
<li><a href= "#motd"        >8.17 - /etc/motd ファイルを変更しても
  上書きされてしまうようなのですが、なぜでしょう ?</a>
<li><a href= "#wwwsolaris"  >8.18 - どうして www.openbsd.org は Solaris
  で動いてるのでしょうか ?</a>
<li><a href= "#PCI"         >8.19 - ネットワークカードが認識されないので
  困っています</a>
<li><a href= "truetype.html">8.20 - XFree86 での TrueType フォントや
  アンチエイリアス</a>
<li><a href= "#Journaling"  >8.21 - OpenBSD は何かのジャーナルファイルシステムを
  サポートしているのでしょうか ?</a>
<li><a href= "#RevDNS"      >8.22 - DNS の逆引きやそのログにどうしてこんなに
  時間がかかるのでしょうか ?</a>
<li><a href= "#wwwnotstd"   >8.23 - どうして OpenBSD の Web ページは HTML4/XHTML 準拠ではないのでしょう ?</a>
</ul>
<hr> 

<br>

<p>
<!-- a name= ""></a>
<h2></h2>
-->


<br>

<p>
<a name= "VirtTerms"></a>
<a name= "8.2"></a>
<h2>8.2 - 仮想ターミナルの切り替えはどのようにするのでしょう ?</h2>

<a href="faq7.html#SwitchConsole">こちらの文書</a>を参照してください。

<p>
<a name= "LostPW"></a>
<a name= "8.3"></a>
<h2>8.3 - root パスワードを忘れてしまいました……どうしましょう !</h2>

<p>
回復のためのステップ
<ol>
<li>シングルユーザモードに入ります。i386 マシンでは、ブートプロンプトで <tt><strong>boot -s</strong></tt> とタイプしてください。</li>
<li>ドライブをマウントします。
<ul>
<kbd># <b>fsck -p / &amp;&amp; mount -u /</b></kbd>
</ul>
<li>もし /usr が / とは別のパーティションにあるのでしたら (これはそのようにすべきです)、
そちらもマウントしなければなりません。
<ul>
<kbd># <b>fsck -p /usr &amp;&amp; mount /usr</b></kbd>
</ul>

<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&sektion=1">passwd(1)</a> を実行します。
<li>普通にマルチユーザモードで起動します …… そして今度こそパスワードを<i>忘れたりしないようにしてください !</i>
</ol>

<p>
<a name= "X"></a>
<a name= "8.4"></a>
<h2>8.4 - X が起動せずにエラーメッセージが数多く出力されるのですが ?</h2>

<p>
X の設定が完璧で、正しく機能するはずの XF86Config を使っているのでしたら、
たぶん問題は machdep.allowaperture でしょう。
カーネルの設定に以下の

<ul><pre>
option APERTURE
</pre></ul>

<p>
オプションが入っているのを確認してください。[既に GENERIC カーネルには入っています]

<p>
それから <i>/etc/sysctl.conf</i> を編集して
<b>machdep.allowaperture=2</b> とします。これで X がアパーチャドライバにアクセスできるようになります。
これはインストール時に、X を使うかどうかの質問で yes と答えていたなら、
正しく設定されているはずのものです。
OpenBSD は、すべての X サーバについて、アパーチャドライバが設定されていることが必要です。
これがビデオドライバの I/O ポートへのアクセスをコントロールするからです。

<p>
その他、i386 上での X の問題については、
<a href="http://www.xfree86.org/FAQ/">http://www.xfree86.org/FAQ/</a> にある XFree86 FAQ を御参照ください。

<p>
<a name= "CVS"></a>
<a name= "8.5"></a>
<h2>8.5 - CVS というのは何でしょうか ?  また、どう使うのでしょう ?</h2>

<p>
CVS は、Concurrent Versions System の略で、OpenBSD プロジェクトが
ソースコードへの変更をコントロールするのに使用しているものです。
CVS についてのより詳しい情報は
<a href= "http://www.cyclic.com/">http://www.cyclic.com/</a>
で読むことができます。CVS をエンドユーザが使えば、ソースの変更や ports
ツリーをいつも最新にしておくことができます。CVS のおかげで、プロジェクトの
数々の CVS ミラーからソースをダウンロードするのはとても簡単なことです。


<h3>そもそも CVS 環境を設定するには</h3>

<p>
ソースは OpenBSD AnonCVS サーバから取得することができます。
サーバの一覧は
<a href="../../ja/anoncvs.html">http://www.openbsd.org/anoncvs.html</a>
にあります。
サーバを選んだら、どのモジュールが欲しいのかを選びます。
CVS ツリーからチェックアウト可能なモジュールは
主に 3 つあります。

<ul>
<li><i>src</i> - src モジュールには OpenBSD の完全なソースコードが含まれています。これにはユーザランドのソースもカーネルのソースも含まれます。
<li><i>ports</i> - ports モジュールには OpenBSD ports ツリーをすべて持つためのものすべてが含まれています。OpenBSD ports ツリーについては OpenBSD FAQ の <a href="faq8.html#Ports">FAQ 8, Ports</a> を御参照ください。
<li><i>xf4</i> - xf4 モジュールには XFree 4 の完全なソースコードが含まれています。
</ul>

<p>
欲しいモジュールが決まりましたら、取得してくるまでにあと一歩です。
まず、どの方法を使うかを決めなければなりません。デフォルトでは CVS は
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a>
を使用してファイルを取得してきますが、一部の AnonCVS サーバは
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rsh&sektion=1">rsh</a> 
が使えるものもあります。ファイアウォールの後にいる人たちのために、
pserver や一部の AnonCVS サーバには ssh をポート 2022 で動かすようなオプションがあります。
どのサーバがどのプロトコルをサポートしているかは
<a href="../../ja/anoncvs.html">http://www.openbsd.org/ja/anoncvs.html</a>
を必ずチェックするようにしてください。
以下に、簡単なソースチェックアウトを試しにやってみましょう。
ここではアメリカにある AnonCVS サーバを使用していますが、
しかし、アメリカ以外にいる人は、近くのサーバを必ず使うようにしてください。
世界中には数多くの AnonCVS サーバがあるのですから、
手近なサーバを御使用ください。また、ファイルの取得には、ssh を用しています。

<ul><pre>
$ <strong>export CVSROOT=anoncvs@anoncvs.usa.openbsd.org:/cvs</strong>
$ <strong>cvs get src</strong>
Warning: Remote host denied X11 forwarding, perhaps xauth program could not be run on the server side.
cvs checkout: in directory src:
cvs checkout: cannot open CVS/Entries for reading: No such file or directory
cvs server: Updating src
U src/Makefile
[snip]
</pre></ul>

<p>
ここで環境変数 CVSROOT を指定しているのにも注意してください。
これは <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1">cvs(1)</a> に、
どの AnonCVS サーバを使うのかを指定するものです。
これは <i>-d</i> オプションを使用しても指定できます。
たとえば、

<ul>
<pre>
$ <strong>cvs -d anoncvs@anoncvs.usa.openbsd.org:/cvs get src</strong>
</pre>
</ul>

<p>
以上のコマンドは <i>/usr</i> の下で実行してください。すると、<i>/usr/src</i>、<i>/usr/ports</i>
および <i>/usr/www</i> というディレクトリができます。もちろんこれは、どのモジュールを
チェックアウトするかに依存します。このようなモジュールはどこにダウンロードしても良いのですが、
しかし、これで作業するつもりでしたら (つまりビルドしたりするのでしたら)、デフォルトではソースは
上記のディレクトリにあるものと想定されています。

<h3>CVS ツリーを最新に保つ</h3>

<p>
最初のツリーができあがった後は、それを最新に保つのは簡単です。
更新は好きなときに実行すれば良いのです。AnonCVS サーバごとに
更新頻度は異なりますから、ここでも
<a href="../../ja/anoncvs.html">http://www.openbsd.org/ja/anoncvs.html</a>
をチェックするようにしましょう。この例では、www モジュールを anoncvs.usa.openbsd.org
から更新しています。-q オプションを使用しているのに注意してください。
これは、サーバの出力をいちいち全部表示しないようにするためのものです。

<ul><pre>
$ <strong>echo $CVSROOT</strong>                                 
anoncvs@anoncvs.usa.openbsd.org:/cvs
$ <strong>cvs -q up -PAd www</strong>
Warning: Remote host denied X11 forwarding, perhaps xauth program could not be run on the server side.
U www/want.html
M www/faq/faq8.html
$
</pre></ul>

<h3>その他の cvs のオプション</h3>

<p>
一部の人にとっては、このようなリポジトリの更新には、帯域幅と時間が
深刻な問題となるかも知れません。ですから、CVS には -z[1-9] オプションがあり、
gzip でデータを圧縮してくれます。これを使うには -z[圧縮レベル] と指定します。
たとえば圧縮レベル 3 なら -z3 です。

<p>
<a name= "Ports"></a>
<a name= "8.6"></a>
<h2>8.6 - ports ツリーとは何でしょうか ?</h2>

<p>
ports ツリーは Makefile の集まりで、ユーザランドのプログラムを
ダウンロード、パッチ、configure、インストールしてくれるものです。
これを、ひとつひとつ手で作業しなくても、OpenBSD で実行できるようになります。
ports ツリーは OpenBSD FTP サーバの
<kbd>/pub/OpenBSD/3.1/ports.tar.gz</kbd> にあります。
最新の ports は 'ports' cvs ツリーか、
kbd>/pub/OpenBSD/snapshots/ports.tar.gz</kbd> にあります。
しかし、ほとんどの人たちには、ports を使うよりも packages を使うほうがさらに
便利でしょう。packages は ports から作られ、コンパイル済みですぐに使えます。
packages について、詳しくは <a href="#Packages">FAQ8.7</a> を御参照ください。

<h3>システムと ports の同期を保つ上での重要な注意事項</h3>
OpenBSD では、いつの時点でも 3 つの "アクティブな" バージョンを保持しています。
<ul>
<li><a href="../../ja/orders.html">Release</a>: CD に含まれているもの。
<li><a href="../../ja/stable.html">Stable</a>: Release にセキュリティ
  および信頼性拡張を加えたもの。<br>
<li><a href="upgrade-minifaq.html">Current</a>: OpenBSD の開発中の
  バージョン。
</ul>
<strong>ports と OpenBSD のバージョンを混ぜてはいけません !</strong>
<p>
システムが Release なら、ports ツリーのバージョンも Release を使います。
-Current バージョンの ports ツリーを -Release や -Stable システム上で
使おうとはしないでください。動かないだけではなく、"ちっとも動かない" 理由に
ついて、助けを求めた人たちをイライラさせることにもなり兼ねないからです。これは、
<a href="../../ja/stable.html">-Stable</a> ブランチの ports ツリーでも同様で、
-Release ports への重大な変更がなされることもある、ということに御注意ください。

<p>
そうです。これは、実際には、すばらしくて新しい ports が、"古い目" のシステム
上ではたいてい動かないでしょう、ということを意味しているのです。--
たとい、それが、ほんの数週間前までは -current だったシステムだとしても。

<p>
もし、インストール済の port ツリーがなかったとしても、それを、いずれかの
OpenBSD の <a href="../../ja/ftp.html">FTP サーバ</a>や、もちろん、
<a href=../../ja/orders.html>CDROM</a> からダウンロードすることができます。
ファイル名は <kbd>ports.tar.gz</kbd> で、これを /usr ディレクトリで展開すると、
/usr/ports ディレクトリを生成し、すべてのディレクトリがその下に生成されます。
例として、

<pre>
     $ <strong>ftp ftp://ftp.openbsd.org/pub/OpenBSD/3.1/ports.tar.gz</strong>
     $ <strong>sudo cp ports.tar.gz /usr</strong>
     $ <strong>cd /usr; sudo tar xfz ports.tar.gz</strong>
</pre>

<p>
ports ツリーのスナップショットは毎日生成されていて、それは、どの
<a href="../../ja/ftp.html">OpenBSD FTP サーバ</a> からでも
<kbd>/pub/OpenBSD/snapshots/ports.tar.gz</kbd> としてダウンロードできます。
もし、OpenBSD のスナップショットがインストールされているなら、それにマッチした
ports のスナップショットを使う必要があります。もう一度言いますが、ports
ツリーと OpenBSD システムとは、確実に同期を取るようにしてください。

<h3>どのような ports があるのでしょう ?   どうやって探せば良いのでしょう ?</h3>

<p>
ports ツリーそのものを使って、キーワードで検索をかけることです。これには <kbd>make search key="searchkey"</kbd>
としてください。たとえば 'samba' を検索すると次の例のようになります。

<ul><pre>
$ <strong>make search key=&quot;samba&quot;</strong>
Port:   samba-2.2.2
Path:   net/samba
Info:   SMB and CIFS client and server for UNIX
Maint:  Daniel Hartmeier <daniel@benzedrine.cx>
Index:  net
B-deps: devel/autoconf
R-deps:
Archs:  any

Port:   ADMsmb-0.2
Path:   /usr/ports/security/ADMsmb
Info:   Samba security scanner
Maint:  dugsong@monkey.org
Index:  security
B-deps:
R-deps:
Archs:  any
</pre></ul>

<h3>ports のインストール</h3>

<p>
ports の make とインストールは、非常に簡単になるようにしてあります。
以下に、X11 のプログラム xfig をインストールしたい人の例を挙げてみましょう。
依存関係が自動的に検出されて補われていることに注目してください。

<p>
まずは、欲しいプログラムのディレクトリに cd してください。
プログラムを探しているなら、locate データベースを更新するか、
さきほど説明した検索機能を使います。そして、欲しいプログラムのディレクトリに入ったら、
<kbd>make install</kbd> とタイプするだけなのです。
たとえば、<br>

<ul>
<pre>
$ <strong>sudo make install</strong>
===&gt;  Extracting for xfig-3.2.2
===&gt;  xfig-3.2.2 depends on shared library: jpeg.62. - /usr/local/lib/libjpeg.so.62.0 found
===&gt;  xfig-3.2.2 depends on shared library: Xaw3d.6. - not found
===&gt;  Verifying install for Xaw3d.6. in /usr/ports/x11/Xaw3d
&gt;&gt; Xaw3d-1.3.tar.gz doesn't seem to exist on this system.
&gt;&gt; Attempting to fetch from ftp://crl.dec.com/pub/X11/contrib/widgets/Xaw3d/R6.1/.
Connected to crl.dec.com.
220 crl.dec.com FTP server (Digital UNIX Version 5.60) ready.
331 Guest login ok, send ident as password.
230 Guest login ok, access restrictions apply.
Remote system type is UNIX.
Using binary mode to transfer files.
200 Type set to I.
250 CWD command successful.
250 CWD command successful.
Retrieving pub/X11/contrib/widgets/Xaw3d/R6.1/Xaw3d-1.3.tar.gz
local: Xaw3d-1.3.tar.gz remote: Xaw3d-1.3.tar.gz
227 Entering Passive Mode (192,58,206,2,5,14)
150 Opening BINARY mode data connection for Xaw3d-1.3.tar.gz (0.0.0.0,0) (290277 bytes).
100% |**************************************************|   283 KB    00:00 ETA
226 Transfer complete.
290277 bytes received in 101.09 seconds (2.80 KB/s)
221 Goodbye.
===&gt;  Extracting for Xaw3d-1.3
/bin/mkdir -p /usr/ports/x11/Xaw3d/work/xc/lib/Xaw3d/X11/Xaw3d
cd /usr/ports/x11/Xaw3d/work/xc/lib/Xaw3d/X11/Xaw3d; ln -sf ../../*.h .
===&gt;  Patching for Xaw3d-1.3
===&gt;  Configuring for Xaw3d-1.3
mv -f Makefile Makefile.bak
imake -DUseInstalled -I/usr/X11R6/lib/X11/config
make Makefiles
[snip]
</pre></ul>

<h3>フレーバを使う</h3>
<p>
ports ツリー中の多くのアプリケーションは、<i>フレーバ</i>と呼ばれる、異なる
インストールオプションをサポートしています。もし、ports が複数のフレーバを
サポートしているなら、ports をコンパイルする前に、オプションを単に環境変数に
セットするだけで、それらを利用できます。もし、複数の機能が必要なら、空白で区切られた、
サポートされている、希望のフレーバのリストを、FLAVOR 環境変数にセットする
ことができます。現在では、多くの ports が、データベースのサポートや X なしの
システム、SSL や IPv6 のようなネットワーク関係のオプションを含む、フレーバを
サポートしています。

<ul>
<pre>
$ <strong>pwd</strong>
/usr/ports/net/mtr
$ <strong>make show=FLAVORS</strong>
curses
$ <strong>env FLAVOR="curses" make</strong>
===>  mtr-0.42-curses depends on: gmake-3.79.1 - found
===>  Checking files for mtr-0.42-curses
>> mtr-0.42.tar.gz doesn't seem to exist on this system.
>> Attempting to fetch /usr/ports/distfiles/mtr-0.42.tar.gz from ftp://ftp.bitwizard.nl/mtr/.
[snip]
$ <strong>sudo env FLAVOR="curses" make install</strong>
===>  Faking installation for mtr-0.42-curses
===>  Building package for mtr-0.42-curses
Creating package /usr/ports/packages/i386/All/mtr-0.42-curses.tgz
Using SrcDir value of /usr/ports/net/mtr/w-mtr-0.42-curses/fake-i386-curses/usr/local
Creating gzip'd tar ball in '/usr/ports/packages/i386/All/mtr-0.42-curses.tgz'
===>  Installing mtr-0.42-curses from /usr/ports/packages/i386/All/mtr-0.42-curses.tgz
</pre>
</ul>

<h3>インストール済みの ports/packages の一覧</h3>
<p>
ports と packages のいずれも pkg_info コマンドを使えばインストールされたものの一覧が見られます。</p>
<ul>
<pre>
$ <strong>/usr/sbin/pkg_info</strong>
zsh-4.0.4           The Z shell.
screen-3.9.11       A multi-screen window manager.
emacs-21.1          GNU editing macros.
tcsh-6.10.00        An extended C-shell with many useful features.
bash-1.14.7         The GNU Borne Again Shell.
zip-2.3             Create/update ZIP files compatible with pkzip.
ircii-20011210      An enhanced version of ircII, the Internet Relay Chat client
ispell-3.2.06       An interactive spelling checker.
tin-1.4.5           TIN newsreader (termcap based)
procmail-3.22       A local mail delivery agent.
strobe-1.06         Fast scatter/gather TCP port scanner
lsof-4.61p1         Lists information about open files.
ntp-4.1.72          Network Time Protocol Implementation.
ncftp-3.0.4         ftp replacement with advanced user interface
nmh-1.0.4           The New MH mail handling program
bzip2-1.0.2         A block-sorting file compressor
</pre>
</ul>


<h3>その他情報</h3>

<p>
portsについて詳しくは
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ports&sektion=7">ports(7)</a>
man ページと、<a href="../../ports.html">ports ページ</a>とを御参照ください。

<p>
ports ツリーは絶えず拡張していますので、手伝っていただけるのでしたら、
<a href= "../../porting.html">http://www.openbsd.org/porting.html</a>
をぜひ御参照ください。

<br>

<p>
<a name= "Packages"></a>
<a name= "8.7"></a>
<h2>8.7 - packages って ?</h2>

<p>
packages は、いちばんよく使われるプログラムのコンパイル済みバイナリです。
OpenBSD システムでは即使えます。
ports と同じように、packages も管理更新がとても簡単です。
packages はどんどん増えていますから、リリースごとに新しい packages に注目してください。

<p>
packages 管理に使うツールの一覧を挙げておきます。<br>
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add">pkg_add(1)</a>
  - packages ディストリビューションのインストール用ユーティリティ
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_create">pkg_create(1)</a>
  - packages ディストリビューションをつくるのに使うユーティリティ
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete">pkg_delete(1)</a>
  - インストール済みの packages ディストリビューションを削除するユーティリティ
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info">pkg_info(1)</a>
  - packages の情報を表示するユーティリティ
</ul>

<h3>packages の見つけ方</h3>

<p>
賢いユーザのあなたには、もちろん <a href="../../ja/orders.html">OpenBSD CD</a>
をご購入いただいたたことと思います。packages は、アーキテクチャごとに
分かれて、それぞれの CD 上にあります。もしも、まだ、OpenBSD CD
をお持ちでないのでしたら、ftp ミラーのどこからでも
ダウンロードが可能です。ftp ミラーの一覧は
<a href="../../ja/ftp.html">http://www.openbsd.org/ja/ftp.html</a>
にあります。packages の所在は <i>/pub/OpenBSD/3.1/packages</i> 以下で、
アーキテクチャごとに分かれてディレクトリに収められています。

<h3>packages のインストール</h3>

packages のインストールには
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add">pkg_add(1)</a>
ユーティリティを使います。pkg_add(1) は本当に使いやすいユーティリティです。
以下の 2 例では pkg_add(1) を使用して packages をインストールしています。最初の例
では、pkg_add(1) を使用してローカルディスク上の packages をインストールしています。
もうひとつの例では、ftp 経由でインストールしています。
どちら例でも screen-3.9.11 をインストールしています。

<ul>ローカルディスクからインストール
<pre>
$ <strong>sudo pkg_add -v screen-3.9.11.tgz</strong>
Requested space: 749864 bytes, free space: 2239117312 bytes in /var/tmp/instmp.cpsHA27596
Running install with PRE-INSTALL for `screen-3.9.11'
extract: Package name is screen-3.9.11
extract: CWD to /usr/local
extract: /usr/local/bin/screen-3.9.11
extract: execute 'ln -sf screen-3.9.11 /usr/local/bin/screen'
extract: /usr/local/man/man1/screen.1
extract: /usr/local/info/screen.info
extract: execute '[ -f /usr/local/info/dir ] || sed -ne '1,/Menu:/p' /usr/share/info/dir > /usr/local/info/dir'
extract: execute 'install-info /usr/local/info/screen.info /usr/local/info/dir'
extract: /usr/local/lib/screen/screencap
extract: /usr/local/lib/screen/screenrc
extract: CWD to .
Running mtree for `screen-3.9.11'
mtree -q -U -f +MTREE_DIRS -d -e -p /usr/local
Running install with POST-INSTALL for `screen-3.9.11'

+---------------
| The file /etc/screenrc has been created on your system.
| You may want to verify/edit its contents
|
| The file /usr/local/lib/screen/screencap contains a
| termcap like description of the screen virtual terminal.
| You may use it to update your terminal database.
| See <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=termcap&sektion=5">termcap(5)</a>.
+---------------

Attempting to record package into `/var/db/pkg/screen
Package `screen-3.9.11' registered in `/var/db/pkg/screen-3.9.11'
</pre></ul>

<p>
この例では <b>-v</b> フラグを使用して、省略なしのメッセージを表示させています。
このオプションは特に必要はないのですが、デバッグには便利ですし、さらに pkg_add(1)
が実際に何を実行しているかを理解していただくためにここでは使用しています。
しかし、本当に意味のあるメッセージも出てきています。<i>/etc/screenrc</i>
に関するものです。このような重要なメッセージは、<b>-v</b> フラグの有無に
関わらず出力されてきます。

<ul>ftp 経由でインストール
<pre>
$ <strong>sudo pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/3.1/packages/i386/screen-3.9.11.tgz</strong>
&gt;&gt;&gt; ftp -o - ftp://ftp.openbsd.org/pub/OpenBSD/3.1/packages/i386/screen-3.9.11.tgz

+---------------
| The file /etc/screenrc has been created on your system.
| You may want to verify/edit its contents
|
| The file /usr/local/lib/screen/screencap contains a
| termcap like description of the screen virtual terminal.
| You may use it to update your terminal database.
| See termcap(5).
+---------------
</pre></ul>

<p>
この例では、i386 用の packages をインストールしたのがわかります。
これは自分のアーキテクチャに合わせてください。
注: すべてのアーキテクチャに同じ packages があるとは限りません。ports
の中には一部アーキテクチャでは使用できないものもあります。この例では <b>-v</b>
フラグを使用しませんでしたので、本当に必要なメッセージしか表示されていません。

<h3>インストール済み packages を見て削除</h3>

<p>
システムにインストール済みの packages を見るには
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info">pkg_info(1)</a>
ユーティリティを使います。これは、packages を削除する
ときに正しい名前を調べるとき便利なものです。システムに
インストール済みの packages を見るには、
次のようにするだけです。

<ul><pre>
$ <strong>pkg_info</strong>
mpg123-0.59r       mpeg audio 1/2 layer 1, 2 and 3 player
nmap-2.54BETA25    port scanning large networks
ircii-20011210     enhanced version of ircII (internet relay chat)
screen-3.9.11      multi-screen window manager
unzip-5.42         extract, list &amp; test files in a ZIP archive
ntp-4.1.72         Network Time Protocol implementation
icb-5.0.9          Internet CB - mostly-defunct chat client
</pre></ul>

<p>
packages を削除するには、pkg_info(1) で表示される
packages の正しい名前を調べて、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete">pkg_delete(1)</a>
を使ってそれを削除すれば良いのです。以下の例では
screen package が削除されています。時には、pkg_delete(1)
で削除されなかったものを自分で削除してください、という指示が出力される
こともありますので注意が必要です。pkg_add(1) ユーティリティと同じく、
<b>-v</b> フラグを使用することで、出力が省略されないようになります。

<ul><pre>
$ <strong>sudo pkg_delete screen-3.9.11</strong>

+---------------
| To completely deinstall the screen-3.9.11 package you need to perform
| this step as root:
|
|           rm -f /etc/screenrc
|
| Do not do this if you plan on re-installing screen-3.9.11
| at some future time.
+---------------
</pre></ul>

<p>
<a name= "NoFloppy"></a>
<a name= "8.8"></a>
<h2>8.8 - 起動時に接続していなかったフロッピー
ドライブを使う手はあるのでしょうか ?</h2>

<p>
もちろんです。fd* エントリの最後に "flags 0x20" をつけてカーネルをコンパイルしなおしてください。
次のような行になるはずです。

<ul>
<pre>  fd*     at fdc? drive ? flags 0x20</pre>
</ul>

<p>
後は、フロッピードライブはいつでも使用可能になります。起動時に
差し込まれていようと、その後であろうと、関係なく使用できるようになるのです。

<p>
<a name= "Bootloader"></a>
<a name= "8.9"></a>
<h2>8.9 - 起動時オプション: OpenBSD ブートローダを使う</h2>

<p>
OpenBSD システムをブートする際、
boot プロンプトが出力されるのにお気づきのことと思います。

<p>
<ul>boot&gt;</ul>

<p>
ほとんどの人は、ここで何もしなくて良く、コマンドがなければ、
自動的に起動に入ります。しかし、ときどき問題が起きたり、
特別な機能が欲しかったりすることがあります。
そのようなときには、ここにオプションを入れると便利なのです。まず手始めに
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&sektion=8&arch=i386">boot(8)</a>
man ページを一通りお読みください。ここではブートローダの
いちばんよく使うコマンドの概要を見てみましょう。

<p>
まず、コマンドが入力されなければ、ブートローダは自動的に <strong>/bsd</strong>
をブートしようとします。これに失敗した場合は <strong>/obsd</strong> を実行してみて、
ブート可能なカーネルが見つかるまでこれを続けます。カーネルを手で指定するには、
次のようにタイプします。

<ul>
<p>
boot&gt; <strong>boot wd0a:/bsd</strong>
</ul>
または
<ul>
boot&gt; <strong>b /bsd</strong>
</ul>

<p>
上記の指定では、wd0aが root デバイスに設定されていれば機能します。

<p>
OpenBSD カーネルで使用可能なオプションの簡単な一覧を以下に挙げます。
<ul>
<li><strong>-a</strong> : これはカーネル起動後に、
  別の root デバイスを指定するためのものです。
<li><strong>-c</strong> : 起動時設定を入力できるようにします。
  FAQ の <a href="../faq5.html#BootConfig">起動時設定</a>の部分を
  御参照ください。
<li><strong>-s</strong> : シングルユーザモードに入るときに指定する
  オプションです。
<li><strong>-d</strong> : このオプションは、カーネルを ddb に突っ込みます。
  ただし、そのためにはカーネルに DDB が組み込まれていなければなりません。
</ul>

<p>
オプションの入力は、以下のような形式になります。
<strong>boot [ image [-abcds]]</strong>

<p>
もっと詳しい話は、
<a href="http://www.OpenBSD.org/cgi-bin/man.cgi?query=boot_i386&sektion=8">boot_i386(8)</a>
man ページをご覧ください。

<p>
<a name= "SKey"></a>
<a name="8.10"></a>
<h2>8.10 - S/Key</h2>

<p>
S/Key は「ワンタイム・パスワード」方式です。保護されていないチャネル上用に、
ワンタイム・パスワードの利用を可能にします。これは ssh や、暗号化された
チャネルが使えない人にはとても便利なことがあります。OpenBSD の S/Key 実装は、
一方向ハッシュとして各種アルゴリズムが使えます。使用可能なアルゴリズムの一覧は
以下のとおりです。

<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md4&sektion=3">md4</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5&sektion=3">md5</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sha1&sektion=3">sha1</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rmd160&sektion=3">rmd160</a>
</ul>

<h3>S/Key の設定 - 第一歩</h3>

<p>
まず手始めに <i>/etc/skeykeys</i> というファイルが必要です。
これがなければ、スーパーユーザに作ってもらわなければなりません。
これは次のようにするだけです。

<ul>
<strong><pre>
# touch /etc/skeykeys
</pre></strong>
</ul>

<p>
このファイルができれば、S/Key を初期化できます。これには
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skeyinit&sektion=1">skeyinit(1)</a>
を使うしかありません。
skeyinit(1) では、まずシステムパスワードを要求されます。
つまり、システムにログインするときに使用したパスワードです。
skeyinit(1) を保護されていないチャネル上で動かすのは、
まったくお勧めできないことですので、これは保護されたチャネル (ssh など) か、
コンソールで実行するようにしてください。システムに認証されたら、今度は別の
パスワードを入力するように言われます。このパスワードは<i>秘密パスワード</i>で、
<strong>システムパスワードとは別物</strong>です。
この秘密パスワードは、システムパスワードのような 8 文字の制限はありません。
むしろ、最低でも 10 文字は必要なものです。数語からなる文章かなども好ましいものです。
以下に、ユーザを追加した例を挙げてみましょう。


<ul>
<pre>
$ <strong>skeyinit ericj</strong>
[Adding ericj]
Reminder - Only use this method if you are directly connected
   or have an encrypted channel.  If you are using telnet
   or rlogin, exit with no password and use skeyinit -s.
Enter secret password:
Again secret password:

ID ericj skey is otp-md5 99 oshi45820             
Next login password: HAUL BUS JAKE DING HOT HOG
</pre>
</ul>

<p>
ここで特に重要なのが <i>ID ericj skey is otp-md5 99 oshi45820</i> という一行です。
これはユーザにいろいろな情報を与えてくれています。それぞれの部分を分解して、
その意味を説明しましょう。

<ul>
<li><i>otp-md5</i> - これは、ワンタイム・パスワード (otp) を作るのに、
  どの一方向ハッシュが使われたのかを示しています。
<li><i>99</i> - これがあなたのシーケンス番号です。100 からひとつづつ
  1 へと下がっていくものです。1 になった時点で、また別の秘密パスワードを
  作らなければなりません。
<li><i>oshi45820</i> - これがあなたのキーです。
</ul>

<p>
しかし、直接重要になってくるのがパスワードです。パスワードは、
6 つの短い単語から成ります。この組み合わせが、空白等も含めて、
あなたのパスワードなのです。

<h3>実際に S/Key を使ってログインする</h3>

<p>
これで S/Key は初期化されて、パスワードも取得しましたので、
ログインの準備は完了です。S/Key を使用したログインセッションの例を
次に挙げます。OpenBSD 3.0 では、S/Key でのログインは異なった働きをします。
OpenBSD 3.0 以降では、ログイン名に <b>:skey</b> を追加してください。
OpenBSD の 3.0 よりも前のバージョンでは、S/Key パスワードの
プロンプトのところで、パスワードとして <b>s/key</b> を使用します
(これの例外が ftpd(8) で、OpenBSD 3.0 よりも前から S/Key 有効化
ユーザのための S/Key チャレンジが既に存在しているはずです)。
以下の例は OpenBSD 3.0 以降のものを仮定しています。

<ul>
<pre>
$ <strong>ftp localhost</strong>
Connected to localhost.
220 oshibana.shin.ms FTP server (Version 6.5/OpenBSD) ready.
Name (localhost:ericj): ericj:skey
331- otp-md5 96 oshi45820
331 S/Key Password:
230- OpenBSD 3.0 (OSHIBANA) #8: Tue Dec 22 19:20:16 EDT 2001
230-
230- Welcome to OpenBSD: The proactively secure Unix-like operating system.
230-
230- Please use the sendbug(1) utility to report bugs in the system.
230- Before reporting a bug, please try to reproduce it with the latest
230- version of the code.  With bug reports, please try to ensure that
230- enough information to reproduce the problem is enclosed, and if a
230- known fix for it exists, include that as well.
230-
230 User ericj logged in.
Remote system type is UNIX.
Using binary mode to transfer files.
ftp&gt; quit
221 Goodbye.
</pre>
</ul>

<p>
ユーザ名に ":skey" を加えたことに注意してください。これが ftpd に S/Key 認証を
使いたいということを伝えているのです。シーケンス番号が <i>otp-md5 96 oshi45820</i>
に変化したのにお気づきの人もいらっしゃることでしょう。
これは、既に s/key を使用して数回ログインしているからなのです。しかし、
一回ログインした後は、さて、次のパスワードはどのようにして手に入れるのでしょう ?
そう、これをするには、使用しているシーケンス番号とキーが必要なのです。
しかし、シーケンス番号など、いちいち覚えていられるものではない、と思われた人が
いるかも知れませんね。しかし、これは簡単なことなのです。
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skeyinfo&sektion=1">skeyinfo(1)</a>
を使用すれば、何を使用すべきかがわかるのです。たとえばここでは、
いずれ必要になるであろうログイン用のパスワードを生成しなければなりません
(これは保護されたチャネルで実行しているということをお忘れなく)。

<ul>
<pre>
$ <strong>skeyinfo</strong>
95 oshi45820
</pre>
</ul>

<p>
さらに良い方法は <strong>skeyinfo -v</strong> を使用することで、これは、
シェルの中で使用するのに適したコマンドです。たとえば、その実例を挙げてみましょう。
<ul>
<pre>
$ <strong>skeyinfo -v</strong>
otp-md5 95 oshi45820
</pre>
</ul>

<p>
この <i>otp-md5</i> は、使用された一方向ハッシュを示しているだけでなく、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skey&sektion=1">skey(1)</a>
コマンドの別名でもあるのです。ですから、
次回使用するための S/Key のパスワードを生成する最も簡単な方法は、
単に、次のようにすれば良いでしょう。

<ul>
<pre>
$ <strong>`skeyinfo -v`</strong>
Reminder - Do not use this program while logged in via telnet or rlogin.
Enter secret password:
NOOK CHUB HOYT SAC DOLE FUME
</pre>
</ul>

上記の例の中の実行演算子 (バッククォート) に注意してください。

<p>
たぶん、あなたたちの多くは、このようなパスワードを作るのに使用可能な保護された接続が
いつでも使えるわけではないだろうと思うかも知れませんし、これを保護されていない接続上で
作るのでは意味がありません。ですから、一度に複数のパスワードを作っておきたいことでしょう。
それなら、どうすれば良いのでしょう ?  そうです。skey(1) に、パスワードをいくつ作りたいかを
指定すれば良いのです。そうすれば、これをプリントアウトして、出先に持ち歩くこともできます。

<ul>
<pre>
$ <strong>otp-md5 -n 5 95 oshi45820</strong>
Reminder - Do not use this program while logged in via telnet or rlogin.
Enter secret password:
91: SHIM SET LEST HANS SMUG BOOT
92: SUE ARTY YAW SEED KURD BAND
93: JOEY SOOT PHI KYLE CURT REEK
94: WIRE BOGY MESS JUDE RUNT ADD
95: NOOK CHUB HOYT SAC DOLE FUME
</pre>
</ul>

<p>
ここで、最初に使用するパスワードが、最後に出てきたパスワードであるということに
注意してください。シーケンス番号は 100 からひとつづつ減っていくものなのですから。

<h4>S/Key を telnet(1)、ssh(1)、rlogin(1) で使用する</h4>

<p>
S/Key を telnet(1)、ssh(1)、rlogin(1) で使用するのは、
ftp の場合と同様ですが、ユーザ名の最後に ":skey" を
追加してください。
以下にその例を示します。

<ul>
<pre>
$ <strong>telnet localhost</strong>
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.

OpenBSD/i386 (oshibana) (ttyp2)

login: ericj:skey
otp-md5 98 oshi45821
S/Key Password: <strong>SCAN OLGA BING PUB REEL COCA</strong>
Last login: Thu Oct  7 12:21:48 on ttyp1 from 156.63.248.77
Warning: no Kerberos tickets issued.
OpenBSD 3.0 (OSHIBANA) #4: Thu Dec  2 23:36:16 EDT 2001

Welcome to OpenBSD: The proactively secure Unix-like operating system.

Please use the sendbug(1) utility to report bugs in the system.
Before reporting a bug, please try to reproduce it with the latest
version of the code.  With bug reports, please try to ensure that
enough information to reproduce the problem is enclosed, and if a
known fix for it exists, include that as well.

You have mail.
$
</pre></ul>

<p>
<a name= "MacTime"></a>
<a name="8.11"></a>
<h2>8.11 - 私の Macintosh の時計が遅れて困っているのですが ?</h2>

<p>
これはハードウェアのバグが原因です。OpenBSD は、現在の時間を追いかけるのに
クロック割り込みを使用していますが、この割り込みはアップルのアーキテクチャでは
プライオリティが最低になっているのです。そのため、負荷が重くなってくると
(たとえばディスクやネットワークの活動中)、クロック割り込みが捨てられてしまうため、
Unix のクロックがあまり進まないことになってしまうのです。

<p>
MacOS は、常にハードウェアクロックを読みに行ってこの問題を回避しています。
OpenBSD は、ハードウェアクロックは起動時にしか読みません。
シャットダウン時には、カーネルは Unix 時間を元にハードウェアクロックを
修正するほど自信がないことがおわかりいただけたでしょうか。
この時間のロス問題はよく知られていることだからなのです。

<p>
最も良い解決法は、ntpd を走らせて (ports コレクションに入っています)、このような
時間のロスに対処することです。ときどき、 ntpd ですら修正できないくらいに時間のロスが
大きくなることがありますが、このような場合には /etc/rc.securelevel の ntpd に -g
オプションをつけておくことで、大幅なずれでも ntpd は修正してくれるようになります。

<p>
もうひとつ、もっと簡単な方法ではあるものの厳密さには欠ける方法が、rdate(8)
を定期的に実行させることでしょう。crontab にエントリを作成して、できれば
<strong>-a</strong> オプションをつけて時間が「ジャンプ」しないようにすします。
もし、あなたが常時接続を使用していない場合に、PPP を利用しているのでしたら、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&sektion=8">rdate(8)</a>
を起動して利用可能な場合には、<i>/etc/ppp/ppp.linkup</i> ファイルで
rdate(8) を呼び出すようにしても良いでしょう。

<p>
<a href="http://www.macbsd.com/macbsd/macbsd-docs/faq/faq-3.html#ss3.17">  
http://www.macbsd.com/macbsd/macbsd-docs/faq/faq-3.html#ss3.17</a>
も御参照ください。

<p>
<a name= "SMP"></a>
<a name="8.12"></a>
<h2>8.12 - OpenBSD は SMP (Symmetric Multi-Processor == 対称マルチプロセッサマシン)
で動きますか ?</h2>

<p>
現状では動きません。<a href="../../ja/smp.html">OpenBSD SMP プロジェクト</a>で、
作業は継続中ですが、まだ、現時点では使用可能なマシンは何もありませんし、
OpenBSD の SMP サポートのスケジュールも出せる状況ではありません。

<p>
ほとんどのプラットフォームで、OpenBSD は対称マルチプロセッサマシン上でも
動きはするでしょうが、ひとつのプロセッサしか利用できません。この例外が SPARC
プラットフォームで、OpenBSD/sparc はいくつかのマルチプロセッサの SPARC
システムではそもそも動きません (一般的ルール: ひとつの MBus モジュールなら
必ず動きますが、複数の MBus モジュールの場合は、それらがシングルプロセッサ
モジュールで、そしてもちろん <a href="../../sparc.html">サポートされている</a> 
限りにおいては動きます)。マルチプロセッサの SPARC64 システムでは、ベースのマシンが
<a href="../../sparc64.html">サポートされている</a>限りにおいては動きます。

<p>
<b>どうしたら手助けできるのでしょうか ?</b><br>
<ul>
<li>コードを書いてください。やらなければならならないことはたくさんあります。</li>
<li>ハードウェアを寄付してください。OpenBSD SMP プロジェクトのゴールは、
<a href="../../sparc.html">SPARC</a>、
<a href="../../sparc64.html">SPARC64</a>、
<a href="../../alpha.html">Alpha</a>、
<a href="../../macppc.html">MacPPC</a>
そしてもちろん、<a href="../../i386.html">i386</a>
を含む、できるだけ多くのプラットフォームをサポートすることです。
<a href="../../ja/want.html">望ましいハードウェア</a>
の寄付は大歓迎します。</li>
<li>"テスト" をお願いしないでください。現時点では、SMP プロジェクトは OpenBSD プロジェクトの
主要部分ではありません。というのは、まだ、製品の使用の準備ができていなかったり、一般的な
"テスト" さえも準備ができていなかったりするからです。まず、あなたのハードウェア上では、
それを動かせるコードがなければ動かず、そのコードが今の時点では役に立たないということを
開発者にお知らせください。そして、<a href="../faq4.html#SendDmesg">dmesg をお送りください</a>。
もし、開発者があなたのハードウェアに興味を持ったなら、彼らはあなたに、テストについて
コンタクトを取ることができます。
</ul>

<p>
<a name= "TTY"></a>
<a name="8.13"></a>
<h2>8.13 - tty デバイスを使おうとすると Input/output エラーがときどき出ます</h2>
<p>
OpenBSD システム側から開始する接続には
/dev/cuaXX を使用しなければなりません。/dev/ttyXX デバイスは、
ターミナルやダイヤルイン利用だけになりました。確かに昔は tty デバイスも
使用可能でしたが、現在の OpenBSD カーネルは既にこれと互換性がありません。

<p><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cua&sektion=4">cua(4)</a>
から引用:
<p>
ハードウェアターミナルポートの場合、ダイヤルアウトはコーリングユニットという
デバイスノードをマッチさせることでサポートされています。たとえば、/dev/tty03
というターミナルは、対応する /dev/cua03 というコーリングユニットを持っています。
この二つのデバイスは、ダイヤルインデバイスノードに 128 を足したマイナー番号を
持つ、コーリングユニット・デバイスノードを作ることで区別されます。
<i>ダイヤルイン・デバイス (tty) は普通、システムに自分がアクティブなのを示す
ためにハードウェア信号を必要とする一方で、ダイヤルアウト・デバイス (cua) は
それを必要とせず、モデムのようなデバイスと邪魔されずに通信できるようになります。</i>
これはつまり、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getty&sektion=8">getty(8)</a>
のようなプロセスは、ダイヤルイン・デバイスでは
接続が確立するまで待つということです。
一方、ダイヤル・アウト接続 (まったく同じターミナルポートでも) は、
システム上の他の何ひとつとして邪魔することもなく確立できます。
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getty&sektion=8">getty(8)</a>
プロセスは、ターミナルポートで何か起きているということさえ気がつきません。
もしダイヤルアウト接続が完了した後で、
接続の呼び出しがきた場合、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getty&sektion=8">getty(8)</a>
はダイヤルアウトの活動に何も気がつかずに、
それにきちんと対応します。

<a name= "Netscape"></a>
<a name="8.14"></a>
<h2>8.14 - OpenBSD 用の Netscape バイナリはどこで見つかるのでしょうか ?</h2>

<p>
OpenBSD 専用の Netscape バイナリというものはありません。
しかし、OpenBSD は他の OS のバイナリエミュレーションをサポートしていますので、
他の OS 用のバイナリを使用することができます。

<ul>
<li>I386 システムなら、BSDi バイナリを使うのが最も良いでしょう。</li>
<li>SPARC システムなら、SunOS バイナリを使いましょう。</li>
</ul>

<p>
<a href="../../ports.html">ports システム</a>を使用すれば、
何の問題もなくインストールできるはずです。ports ツリーがインストールされていれば、
Navigator port と Communicator port は
<i>/usr/ports/www/netscape</i> にあります。

<p>
<a name= "mg"></a>
<a name="8.15"></a>
<h2>8.15 - 今や OpenBSD の一部となった mg エディタはどうやって使うのでしょうか ?</h2>
<p>
mg は Emacs 系のマイクロテキストエディタです。マイクロというのはつまり小さいということです
(Emacs は巨大ですものね !)。基本的なことは
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&sektion=1">mg(1)</a>
man ページをご覧ください。また、ソースコードに附属の
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/usr.bin/mg/tutorial?rev=1.2">チュートリアル</a>
も御参照ください。さらにおもしろい質問については (たとえば「私のマシンにはメタキーがない !」とか)、
<a href="http://www.lerner.co.il/emacs/faq_toc.html">Emacs FAQ</a>
を御参照ください。

<p>
なお、mg は小さな Emacs 実装で、
Emacs 17 相当のテキストエディタ機能しかありません。
Emacs のほかの機能はあまり実装されていません
(たとえばメールやニュース機能、Lisp、C++、Lex、Awk、Java などのモード...)。

<p>
<a name= "ksh"></a>
<a name="8.16"></a>
<p>
<h2>8.16 - Ksh は私の .profile を見ていないようなのです ?</h2>
<p>
理由として考えられることがふたつあります。</p>
<ul>
<li>.profile の所有者がそのユーザになっていない場合ですが、
これは簡単になおせます。ある<b>ユーザ名</b>について、次のようにします。
<p>
 <ul><tt>
 # <b>chown ユーザ名 ~ユーザ名/.profile</b>
 </tt></ul>
<p>
<li>ksh を X Window System の中から使用しています。
<p>
xterm では、ksh の argv[0] がダッシュ(-)でプリペンドされていません。
argv[0] の前にダッシュ(-)をついていれば、csh と ksh にも、
ログインファイルを解釈しなければならないことがわかります。
(csh のログインファイルは .login で、それとは別に .cshrc が csh
の起動時に必ず実行されます。これは ksh のほうがさらにはっきりしています。
起動スクリプトは .profile ひとつしかありません。
このファイルは、シェルがログインシェルでないときには無視されます。)
<p>
これをなおすには、ホームディレクトリの <i>.Xdefaults</i> ファイルに
<i>XTerm*loginShell: true</i> という行を加えておきましょう。ただし、
このファイルはデフォルトでは存在していませんので、なければ作る必要があります。
<p>
 <ul><tt>
 $ <b>echo "XTerm*loginShell: true" &gt;&gt; ~/.Xdefaults</b>
 </tt></ul>
<p>
他のシステムではこのような必要はなかったかも知れません。それは、一部の
X Window System のインストーラは、この設定がデフォルトになっているからですが、
OpenBSD では、XFree86 の流儀に従うことにしています。
</ul>

<p>
<a name= "motd"></a>
<a name="8.17"></a>
<h2>8.17 - /etc/motd ファイルを変更しても上書きされてしまうようなのですが、なぜでしょう ?</h2>

<p>
<i>/etc/motd</i> ファイルは、システムのブートの際に編集されて、
最初の一行がカーネルバージョン情報で置き換えられます。
このファイルを編集するときには、必ず最初に 2 行あけた状態で始める、
ということをお忘れなく。さもなくば、<i>/etc/rc</i> が、ブート時に
<i>/etc/motd</i> を編集する際に削除してしまいます。

<p>
<a name= "wwwsolaris"></a>
<a name="8.18"></a>
<h2><a name="f8.18" id="f8.18">8.18 - どうして www.openbsd.org は Solarisで動いてるのでしょうか ?</h2>

<p>
開発者はひとり残らず、そのようなことはどうでも良いことだと思っているのですが、
メーリングリスト等で頻繁に出される質問でもありますので、ここで答えておきます。
<i>www.openbsd.org</i> とメインの OpenBSD ftp サイトは、
カナダはアルバータ大学の SunSITE でホスティングしていただいています。
このサイトは巨大な Sun システム上でホストされており、ディスク容量も大きく、
インターネットの帯域幅も太いのです。SunSITE のおかげで OpenBSD グループは
この帯域幅にアクセスできるのです。なので、メインサイトはここで動いているのです。
OpenBSD ミラーの多くは OpenBSD で動いていますが、それはこれほどの太い
帯域幅へのアクセスが保証されていませんので、グループとしては、メインサイトは
アルバータ大学の SunSITE に置いておくことにしたのです。

<p>
<a name= "PCI"></a>
<a name="8.19"></a>
<h2>8.19 - ネットワークカードが認識されないので困っています</h2>

<p>
一部のマシンでは、一部の PCI デバイスを正しく検出できなかったり、ひとつの
マシンに複数のネットワークカードがあると、ハングアップしたりするという問題が
生じることがあります。これは PCIBIOS の問題ですので、正しく動くようにするには
少し迂回すれば良いのです。それは、起動時設定で、PCIBIOS を無効にすることです。
以下に例を示します。

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
<pre>
boot&gt; <b>boot -c</b>
Copyright (c) 1982, 1986, 1989, 1991, 1993
        The Regents of the University of California.  All rights reserved.
Copyright (c) 1995-2002 OpenBSD. All rights reserved.  http://www.OpenBSD.org

OpenBSD 3.1 (RAMDISK_CD) #242: Sat Apr 13 15:35:54 MDT 2002
    deraadt@i386.openbsd.org:/usr/src/sys/arch/i386/compile/RAMDISK_CD
cpu0: Intel Pentium III (Coppermine) ("GenuineIntel" 686-class, 128KB L2 cache)
1 GHz
cpu0: FPU,V86,DE,PSE,TSC,MSR,PAE,MCE,CX8,SYS,MTRR,PGE,MCA,CMOV,PAT,PSE36,MMX,FXS
R,SIMD
real mem  = 267956224 (261676K)
avail mem = 243347456 (237644K)
using 3296 buffers containing 13500416 bytes (13184K) of memory
User Kernel Config
UKC&gt; <b>disable pcibios</b>
UKC&gt; <b>quit</b>
[... snip ...]
</pre>
                </td>
        </tr>
</table>
</ul>

<p>
これが終わりましたら、<a href="../faq5.html#Building">FAQ 5, Building a Kernel</a>
の指示に従って新しいカーネルを構築してください。
そうすればもうこの話はこの先心配しなくてもよくなります。

<p>
<a name= "TrueType"></a>
<a name="8.20"></a>
<h2>8.20 - XFree86 での TrueType フォントやアンチエイリアス</h2>
<p>
<a href="truetype.html">こちらのドキュメント</a>をご覧ください。

<p>
<a name= "Journaling"></a>
<a name="8.21"></a>
<h2>8.21 - OpenBSD は何かのジャーナルファイルシステムをサポートしているのでしょうか ?</h2>
<p>
いいえ、サポートしていません。私たちは、同様の結果を得るために
<a href="faq14.html#SoftUpdates">Soft Updates</a> と呼ばれる、
異なるメカニズムを使用しています。さらに詳しいことは、FAQ 14 をご覧ください

<p>
<a name= "RevDNS"></a>
<h2>8.22 - DNS の逆引き <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small>- や -</small><br>
そのログにどうしてこんなに時間がかかるのでしょうか ?</h2>
<p>
多くの OpenBSD の新規ユーザが、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh</a>、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&sektion=1">ftp</a> や 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=telnet&sektion=1">telnet</a>  
のようなサービスを利用する際に、2 分間のログインの遅延を経験しています。
これは、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&sektion=8">ftp-proxy</a>
のようなプロキシを利用する場合や、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&sektion=8">sendmail</a>
を利用してワークステーションからメールを投げるときにもまた、経験し得ることです。
<p>
これは、ほとんど常に DNS の逆引きの問題なのです。DNS とは Domain Name Services
のことですが、インターネット上のシステムでは、"www.openbsd.org" のような名前を
数字の IP アドレスに変換するのに使用しています。DNS のもうひとつの仕事は、
数字の IP アドレスから "name" に戻すような変換を行う機能で、
これが "DNS の逆引き" なのです。
<p>
より良いロギングを行うために、OpenBSD は、いろいろなマシンからの
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh</a>、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&sektion=1">ftp</a>、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=telnet&sektion=1">telnet</a>、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&sektion=8">sendmail</a> や
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&sektion=8">ftp-proxy</a>
を含む、
多くの異なった方法での接続の際に、DNS を逆引きします。
不幸にも、たまに、接続しようとしてくるマシンが、
正しい DNS の逆引きエントリを持っていないことがあります。

<p>
<h3>このような状況の一例</h3> 
OpenBSD マシンをファイアウォールとして構築し、内部ネットワークからの
ゲートウェイにしようとするユーザは、すべての内部のコンピュータを、
<a href="../faq6.html#NAT">NAT</a> を使用して、ひとつの外部 IP アドレスにマッピング
することになります。このとき、このマシンを、外部へのメールのリレーサーバとしても
使用しているかも知れません。どのような場合にも毎回、接続しようと試みると、
2 分間の遅延が発生してしまうという、この一点を除いては、インストール時のガイドライン
に従い、そして、その結果には満足していると思います。

<p>
<h3>いったい何が起きているのでしょう ?</h3>
<a href="http://www.geektools.com/rfc/rfc1918.txt">プライベート IP アドレス</a>
192.168.1.35 を持つ、ゲートウェイの NAT の後のワークステーションから、ユーザが
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh</a>
を使用して、このゲートウェイシステムにアクセスするとします。ここで、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh</a>
クライアントは、ユーザ名とパスワードを尋ねるプロンプトを出力し、
それらをゲートウェイに送ります。このとき、ゲートウェイは、
192.168.1.35 の DNS の逆引きを実行して、
何というマシンから誰がログインしようとしているのか、
解決しようとするのですが、問題は、192.168.0.0 というアドレスがプライベートアドレスだ
ということでしょうう。ですので、このネットワークの外にある、正しく構成された
DNS サーバでも、このようなアドレスについての情報は保持していないはずなのです。
あるものは、素早くエラーメッセージを返しますので、このような場合には、OpenBSD は
もうこれ以上の情報は得られないと判断して、直ちにユーザのログインを許可しれくれます。
しかし、別の DNS サーバはどんな応答も返さないかも知れません。こうなると、OpenBSD の
レゾルバはタイムアウトを待ちますので、ログインできるまでに 2 分間も待たされることに
なるのです。しかし、たとえば、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&sektion=8">ftp-proxy</a>
の場合、ある ftp クライアントが、DNS の逆引きがタイムアウトする前に
タイムアウトしてしまいますので、ftp-proxy がちゃんと動いていないかのような印象を
ユーザに与えることになってしまいます。
<p>
これは実に迷惑な話なのですが、幸いにも、この問題の解決は簡単なことなのです。
<p>
<h3><tt>/etc/hosts</tt> を使った解決法</h3>
最も簡単な解決法は、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hosts&sektion=5"><tt>/etc/hosts</tt></a>
ファイルに、
内部ネットワークのすべてのマシンを記述し、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=resolv.conf&sektion=5"><tt>/etc/resolv.conf</tt></a>
ファイルに <tt>lookup file bind</tt> という行があることを確認することです。
この行は、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hosts&sektion=5"><tt>/etc/hosts</tt></a>
ファイルを先に調べて、
それでも結果が得られなければ、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=resolv.conf&sektion=5"><tt>/etc/resolv.conf</tt></a>
ファイルの "nameserver" 行で指定される DNS サーバを使用して調べるということを
レゾルバが知っているということなのです。<p>

あなたの <tt>/etc/hosts</tt> ファイルには、次のようなエントリがあることでしょう。

<ul> <table border=0 width="800"> <tr> <td nowrap bgcolor="#EEEEEE">
<pre>
::1 localhost.in.example.org localhost
127.0.0.1 localhost.in.example.org localhost
192.168.1.1 gw.in.example.org gw
192.168.1.20 scrappy.in.example.org scrappy
192.168.1.35 shadow.in.example.org shadow
</pre>
</td></tr></table></ul>
また、あなたの <tt>resolv.conf</tt> ファイルには、次のようなエントリがあることでしょう。 
<ul> <table border=0 width="800"> <tr> <td nowrap bgcolor="#EEEEEE">
<pre>
search in.example.org 
nameserver 24.2.68.33
nameserver 24.2.68.34
lookup file bind
</pre>
</td></tr></table></ul>
しかし、この場合、"しかし、私は内部ネットワークで DHCP を使いたいのです !
どうしたら、そのような <tt>/etc/hosts</tt> を書けるのでしょうか ?" という
共通の難点があります。しかし、これはむしろ簡単なことでしょう。DHCP サーバが付与する
すべての IP アドレスと固定 IP アドレスのマシンとをすべて書いておくことで解決できますから。
<ul> <table border=0 width="800"> <tr> <td nowrap bgcolor="#EEEEEE">
<pre>
::1 localhost.in.example.org localhost
127.0.0.1 localhost.in.example.org localhost
192.168.1.1 gw.in.example.org gw
192.168.1.20 scrappy.in.example.org scrappy
192.168.1.35 shadow.in.example.org shadow
192.168.1.100 d100.in.example.org d100
192.168.1.101 d101.in.example.org d101
192.168.1.102 d102.in.example.org d102
         [... snip ...] 
192.168.1.198 d198.in.example.org d198
192.168.1.199 d199.in.example.org d199
</pre>

</td></tr></table></ul>

このケースでは、DHCP のレンジが 192.168.1.100 から 192.168.1.199 まであるものとし、
それに加えて 3 個の固定 IP アドレスのマシンのエントリがファイルの先頭の方に
記述されているものとしています。
<p>
もし、ゲートウェイ自身が IP アドレスを DHCP から取得していたとしたら……
これはさらなる問題になってしまいます。
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&sektion=8">dhclient</a>
が、DHCP サーバからの IP アドレスのリースが更新されるたびに <tt>/etc/resolv.conf</tt>
をオーバーライトしてくれるのですが、これが例の "lookup file bind" という行を削除して
しまうのです。しかし、これは、"lookup file bind" という行を
<tt>/etc/resolv.conf.tail</tt> というファイルに書くことで解決することができるものです。

<p>
<h3>ローカルの DNS サーバを使った解決法</h3>
この方法の詳細については、このドキュメントの範囲外になるのですが、
お気に入りの DNS サーバを立てるための基本的なトリックであり、
ネットワーク内のすべてのノードに対する、正引きと逆引きの両方の、
正当な DNS の名前解決をできるようにした上で、(ゲートウェイを含む)
コンピュータがそれを DNS サーバとして使うようにすれば良いことです。
OpenBSD に含まれる BIND v4.9.8 ネームサーバについての詳細は、
<a href="../faq6.html#DNS">こちら</a>を参照してください。

<a name= "wwwnotstd"></a>
<a name="8.23"></a>
<h2>8.23 - どうして OpenBSD の Web ページは HTML4/XHTML 準拠ではないのでしょう ?</h2>
<p>現存する Web ページは、バージョン 4.0 以降の、実際に使用されて
いる各種のブラウザで見えるよう、注意深く作成されてきました。
私たちは、HTML4 や XHTML が古いブラウザでも見えるようになったと
確信できるまでは、これらの古いページを HTML4 や XHTML に
準拠させたいと思っていませんし、他に優先すべき事項とも考えていません。
私たちは、新たな貢献者を歓迎していますし、あなたがコードを書いたり、
新しい観点からシステムのドキュメント化作業を行ったりするうよう、
提案したりしてはいますが、既存の Web ページを新しい標準に準拠させる
ための微調整までは行っていないのです。
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ トップに戻る]</a>
<a href= "faq7.html">[7.0 - キーボード制御]</a>
<a href= "faq9.html">[9.0 - Linux からの移行]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt= "[back]"></a> 
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq8.html,v 1.103 ]
<br>
$Translation: faq8.html,v 1.20 2002/07/31 04:59:35 toshi Exp $
<br>
$OpenBSD: faq8.html,v 1.18 2002/08/01 12:02:08 jufi Exp $
</small>

</body>
</html>
