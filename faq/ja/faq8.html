<html>
<head>
<title>8.0 - General Questions</title>
<link rev=  "made"          href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
<meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>
<h2><font color=#e00000>8.0 - 一般的な質問</h2>
</p>

<p>
<ul><h3>目次</h3>
<!-- li><a href= "#Kerberos"    >8.1 - 最初にログインすると、Kerberos の警告がいろいろ出てくるんですけど ?</a></li -->
<li><a href= "#VirtTerms"   >8.2 - 仮想ターミナルの切り替えはどうするの ? (I386 のみ)</a></li>
<li><a href= "#LostPW"      >8.3 - root パスワード忘れちゃいました……どうしましょ !</a></li>  
<li><a href= "#X"           >8.4 - X が起動せずにエラーメッセージが山ほど出てくる</a></li>
<li><a href= "#CVS"         >8.5 - CVS って何だ、どう使うの ?</a></li>
<li><a href= "#Ports"       >8.6 - ports ツリーって何 ?</a></li>
<li><a href= "#Packages"    >8.7 - packages って ?</a></li>
<li><a href= "#NoFloppy"    >8.8 - 起動時に接続していなかったフロッピードライブを使う手はあるの ?</a></li>
<li><a href= "#Bootloader"  >8.9 - OpenBSD ブートローダ (<i>i386 のみ</i>)</a></li>
<li><a href= "#SKey"        >8.10 - S/Key を OpenBSD システムで使う</a></li>
<li><a href= "#MacTime"     >8.11 - あたしの Macintosh の時計が遅れまくってるわよ ?</a></li>
<li><a href= "#SMP"         >8.12 - OpenBSD は SMP (対称マルチプロセッサマシン) で動くかしら ?</a></li>
<li><a href= "#TTY"         >8.13 - tty デバイスを使おうとすると Input/output エラーが時々出る</a></li>
<li><a href= "#Netscape"    >8.14 - OpenBSD 用の Netscape バイナリってどこで見つかるの ?</a></li>
<li><a href= "#mg"          >8.15 - mg エディタはどうやって使うの ?</a></li>
<li><a href= "#ksh"         >8.16 - Ksh はぼくの .profile を見ていないみたい !</a></li>
<li><a href= "#motd"        >8.17 - /etc/motd ファイルを変更しても上書きされちゃうみたいなのはなぜ ?</a></li>
<li><a href= "#wwwsolaris"  >8.18 - どうして www.openbsd.org は Solaris で動いてるの ?</a></li>
<li><a href= "#PCI"         >8.19 - ネットワークカードが認識されないので困った</a></li>
<li><a href= "truetype.html">8.20 - XFree86 での TrueType フォントやアンチエイリアス</a></li>
<li><a href= "#Journaling"  >8.21 - OpenBSD 何かジャーナルファイルシステムをサポートしているの ?</a></li>
<li><a href= "#RevDNS"      >8.22 - DNS の逆引きやそのログにどうしてこんなに時間がかかるの ?</a>
</ul>
</p>
<hr> 

<br>

<p>
<!-- a name= ""></a>
<h2></h2>
-->


<br>

<p>
<a name= "VirtTerms"></a>
<a name= "8.2"></a>
<h2>8.2 - 仮想ターミナルの切り替えはどうするの ?</h2>

仮想ターミナルをサポートしているのは i386 プラットフォームだけだ。

<p>
i386 システムでは、単に <kbd>[Ctrl]-[Alt]-[F1 〜 F4] とタイプしよう。</kbd>
</p>

<p>
X を使っているときでも仮想ターミナルは使える。
たとえば、ターミナル 1 で X を起動して、
[Ctrl]-[Alt]-[F2] でターミナル 2 に切り替えたら、X は一見消えたように見える。
ターミナル 1 に戻してもそのままでは出てこない。このときには [Ctrl]-[Alt]-[F5] で
X 画面が戻ってくるよ。
</p>

<br>

<p>
<a name= "LostPW"></a>
<a name= "8.3"></a>
<h2>8.3 - root パスワード忘れちゃいました……どうしましょ !</h2>
</p>

<p>
回復のためのステップ
<ol>
<li>シングルユーザモードに入る。i386 マシンでは、ブートプロンプトで <tt><strong>boot -s</strong></tt> とタイプしよう。</li>
<li>ドライブをマウントする。
<ul>
<kbd>bsd# <b>fsck -p / &amp;&amp; mount -u /</b></kbd>
</ul>
<li>もし /usr が / とは別のパーティションにあるなら (そうすべき)、
そっちもマウントしなきゃいけない。
<ul>
<kbd>bsd# <b>fsck -p /usr &amp;&amp; mount /usr</b></kbd>
</ul>

<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=1&amp;format=html">passwd(1)</a> を実行する。</li>
<li>ふつうにマルチユーザモードで起動しよう……そしてこんどこそパスワードを<i>忘れたりしないよ〜に!</i></li>
</ol>
</p>

<p>
<a name= "X"></a>
<a name= "8.4"></a>
<h2>8.4 - X が起動せずにエラーメッセージが山ほど出てくる</h2>
</p>

<p>
X の設定が完璧で、ちゃんと機能するはずの XF86Config を使っているなら、
たぶん問題は machdep.allowaperture だろう。
カーネルの設定に以下の
</p>

<ul><pre>
option XSERVER
option APERTURE
</pre></ul>

<p>
オプションが入っているのを確認しよう。[どっちも GENERIC カーネルには入っている]
</p>

<p>
それから <i>/etc/sysctl.conf</i> を編集して
<b>machdep.allowaperture=1</b> とする。これで X がアパーチャドライバにアクセスできるようになる。
これはインストール時に、X を使うかどうかの質問で yes と答えていたら
ちゃんと設定されているはずなんだけどね。
OpenBSD は、すべての X サーバについて、アパーチャドライバが設定されていることが必要だ。
これがビデオドライバの I/O ポートへのアクセスをコントロールするからだ。
</p>

<p>
その他、i386 上での X の問題については、
<a href="http://www.xfree86.org/FAQ/">http://www.xfree86.org/FAQ/</a> にある XFree86 FAQ を参照。
</p>

<p>
<a name= "CVS"></a>
<a name= "8.5"></a>
<h2>8.5 - CVS って何だ、どう使うの ?</h2>
</p>

<p>
CVS は、OpenBSD プロジェクトがソースコードへの変更をコントロールするのに使っているものだ。
CVS は Concurrent Versions System の略だ。詳しい情報は
<a href= "http://www.cyclic.com/">http://www.cyclic.com/</a> で読める。
CVS をエンドユーザが使えば、ソースの変更やportsツリーをいつも最新にしておける。
CVS のおかげで、プロジェクトの数々の CVS ミラーから
ソースをダウンロードするのはとても簡単だ。
</p>


<h3>そもそも CVS 環境を設定するには</h3>

<p>
ソースは OpenBSD AnonCVS サーバから取ってくることができる。
サーバの一覧は
<a href="../../ja/anoncvs.html">http://www.openbsd.org/anoncvs.html</a> にある。
サーバを選んだら、どのモジュールがほしいかを選ぼう。
CVS ツリーからチェックアウトできるモジュールは
主に 3 つある。
</p>

<ul>
<li><i>src</i> - src モジュールには OpenBSD の完全なソースコードが古まれている。これはユーザランドのソースもカーネルのソースも含む。</li>
<li><i>ports</i> - ports モジュールには OpenBSD ports ツリーをすべて持つためのものすべてが含まれる。OpenBSD ports ツリーについては OpenBSD FAQ の <a href="faq8.html#Ports">FAQ 8, Ports</a> を参照。</li>
<li><i>xf4</i> - xf4 モジュールには XFree 4 の完全なソースコードが含まれている。</li>
</ul>

<p>
ほしいモジュールが決まったら、
取ってくるまでにあと一歩だ。
どの方法を使うかを決めなきゃいけない。デフォルトでは CVS は
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh(1)</a>
を使ってファイルを取ってくるけれど、一部の AnonCVS サーバは
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rsh&sektion=1">rsh</a> 
が使えるものもある。ファイアウォールの後にいる人たちのために、
pserver や一部の AnonCVS サーバには ssh をポート 2022 で動かすようなオプションがある。
どのサーバがどのプロトコルをサポートしているかは
<a href="../../ja/anoncvs.html">http://www.openbsd.org/ja/anoncvs.html</a>
を必ずチェックするように。
以下に、簡単なソースチェックアウトを試しにやってみよう。
ここではアメリカにある AnonCVS サーバを使っているけれど、
でもアメリカ以外にいる人は、近くのサーバを必ず使うように。
世界中にたくさんの AnonCVS サーバがあるんだから、
手近なのを使うといい。
また、ファイルの取得には、ssh を使っている。
</p>

<ul><pre>
# <strong>export CVSROOT=anoncvs@anoncvs.usa.openbsd.org:/cvs</strong>
# <strong>cvs get src</strong>
Warning: Remote host denied X11 forwarding, perhaps xauth program could not be run on the server side.
cvs checkout: in directory src:
cvs checkout: cannot open CVS/Entries for reading: No such file or directory
cvs server: Updating src
U src/Makefile
[snip]
</pre></ul>

<p>
ここで環境変数 CVSROOT を使っているのにも注意。
これは <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1">cvs(1)</a> に、
どの AnonCVS サーバを使うか指定するものだ。
これは <i>-d</i> オプションを使っても指定できる。
たとえば、
</p>

<ul>
<pre>
ericj@oshibana:~&gt;<strong>cvs -d anoncvs@anoncvs.usa.openbsd.org:/cvs get src</strong>
</pre>
</ul>

<p>
以上のコマンドは <i>/usr</i> から実行しよう。すると、<i>/usr/src</i>, <i>/usr/ports</i> および <i>/usr/www</i>
というディレクトリができる。もちろんこれは、どのモジュールをチェックアウトするかによる。こうしたモジュールは
どこにダウンロードしてもいいけれど、でもそれで作業するつもりなら (つまりビルドしたりするなら)、デフォルトでは
ソースは上記のディレクトリにあるものと想定されている。
</p>

<h3>CVS ツリーを最新に保つ</h3>

<p>
最初のツリーができあがったら、それを最新にしておくのは簡単だ。更新は好きなときにやればいい。AnonCVS サーバごとに
更新頻度はちがうから、ここでも <a href="../../ja/anoncvs.html">http://www.openbsd.org/ja/anoncvs.html</a>をチェックしておこう。
この例では、www モジュールを anoncvs.usa.openbsd.org から更新している。-q オプションを使っているのに注意。
これはサーバからのアウトプットをいちいち全部表示しないようにする。
</p>

<ul><pre>
ericj@oshibana:~&gt; <strong>echo $CVSROOT</strong>                                 
anoncvs@anoncvs.usa.openbsd.org:/cvs
ericj@oshibana:~&gt; <strong>cvs -q up -PAd www</strong>
Warning: Remote host denied X11 forwarding, perhaps xauth program could not be run on the server side.
U www/want.html
M www/faq/faq8.html
ericj@oshibana:~&gt;
</pre></ul>

<h3>その他 cvs オプション</h3>

<p>
一部の人にとって、こういうリポジトリの更新には帯域幅と時間が
深刻な問題となるだろう。だから CVS には -z[1-9] オプションがあって、
gzip でデータを圧縮してくれる。これを使うには -z[圧縮レベル] とやる。
たとえば圧縮レベル 3 なら -z3 だ。
</p>

<p>
<a name= "Ports"></a>
<a name= "8.6"></a>
<h2>8.6 - ports ツリーって何 ?</h2>
</p>

<p>
ports ツリーは Makefile の集まりで、ユーザランドのプログラムをダウンロード、
パッチ、configure、インストールしてくれる。いちいちこれを手作業しなくても、
OpenBSD で実行できるようになるんだ。ports ツリーは
OpenBSD FTP サーバの <kbd>/pub/OpenBSD/3.0/ports.tar.gz</kbd> にある。
最新の ports は 'ports' cvs ツリーか、<kbd>/pub/OpenBSD/snapshots/ports.tar.gz</kbd> にある。
でもほとんどの人たちには、ports を使うより
packages を使うほうがずっといいだろう。packages は ports から作られて、コンパイル済みですでに使える。
packages について詳しくは <a href="#Packages">FAQ8.7</a>を参照。
</p>

<h3>システムと ports の同期を保つ上での重要な注意事項</h3>
OpenBSD では、いつの時点でも 3 つの "アクティブな" バージョンを保持している。
<ul>
<li><a href="../../ja/orders.html">Release</a>: CD に含まれているもの。
<li><a href="../../ja/stable.html">Stable</a>: Release にセキュリティおよび信頼性拡張を加えたもの。<br>
<li><a href="upgrade-minifaq.html">Current</a>: OpenBSD の開発中のバージョン。
</ul>
<strong>ports と OpenBSD のバージョンを混ぜてはいけない !</strong>
<p>
システムが Release なら、ports ツリーのバージョンも Release を使おう。-Current
バージョンの ports ツリーを -Release や -Stable システム上で使おうとはしないこと。
動かないだけではなく、"ちっとも動かない" 理由について、助けを求めた人たちを
イライラさせることにもなるだろうからね。これは、
<a href="../../ja/stable.html">-Stable</a> ブランチの ports ツリーでも同様で、
-Release ports への重大な変更がなされることもある、ということに注意。
<p>
そう、これは、実際に、すばらしくて新しい ports が、"古い目" のシステム
上ではたいてい動かないだろう、ということを意味しているのだ。-- たとい、
それが、ほんの数週間前までは -current だったシステムだとしても。
<p>
もし、インストール済の port ツリーがなかったとしても、それを、いずれかの OpenBSD の
<a href="../../ja/ftp.html">FTP サーバ</a>や、もちろん、<a href=../../ja/orders.html>CDROM</a>
からダウンロードすることができる。ファイル名は <kbd>ports.tar.gz</kbd> で、
これを /usr ディレクトリで展開すると、/usr/ports ディレクトリを
生成し、すべてのディレクトリがその下に生成される。例として、

<pre>
     $ <strong>ftp ftp://ftp.openbsd.org/pub/OpenBSD/3.0/ports.tar.gz</strong>
     $ <strong>sudo cp ports.tar.gz /usr</strong>
     $ <strong>cd /usr; sudo tar xfz ports.tar.gz</strong>
</pre>

<p>
ports ツリーのスナップショットは毎日生成されており、それは、どの
<a href="../../ja/ftp.html">OpenBSD FTP サーバ</a> からでも
<kbd>/pub/OpenBSD/snapshots/ports.tar.gz</kbd> としてダウンロードできる。
もし、OpenBSD のスナップショットがインストールされているなら、それにマッチした ports のスナップショットを使う
必要がある。もう一度言うが、ports ツリーと OpenBSD システムとは、確実に同期を取るようにしよう。

<h3>どんな ports があるの ?   どうやって探せばいい?</h3>

<p>
ports ツリーそのものを使って、キーワードで検索をかけることだ。これには <kbd>make search key="searchkey"</kbd>
とやろう。たとえば 'samba' を検索するとこうなる。
</p>

<ul><pre>
$ <strong>make search key=&quot;samba&quot;</strong>
Port:   samba-2.2.2
Path:   net/samba
Info:   SMB and CIFS client and server for UNIX
Maint:  Daniel Hartmeier <daniel@benzedrine.cx>
Index:  net
B-deps: devel/autoconf
R-deps:
Archs:  any

Port:   ADMsmb-0.2
Path:   /usr/ports/security/ADMsmb
Info:   Samba security scanner
Maint:  dugsong@monkey.org
Index:  security
B-deps:
R-deps:
Archs:  any
</pre></ul>

<h3>ports のインストール</h3>

<p>
ports の make とインストールは、すさまじく簡単になるようにしてある。以下に、X11 のプログラム xfig をインストールしたい人の例を挙げておこう。
依存関係が自動的に検出されて補われていることに注目。
</p>

<p>
まずは、ほしいプログラムのディレクトリに cd する。プログラムを探しているなら、locate データベースを更新するか、
さっき説明した検索機能を使おう。ほしいプログラムのディレクトリに入ったら、<kbd>make install</kbd> とタイプするだけだ。
たとえば、<br>
<ul>
<pre>
$ <strong>sudo make install</strong>
===&gt;  Extracting for xfig-3.2.2
===&gt;  xfig-3.2.2 depends on shared library: jpeg.62. - /usr/local/lib/libjpeg.so.62.0 found
===&gt;  xfig-3.2.2 depends on shared library: Xaw3d.6. - not found
===&gt;  Verifying install for Xaw3d.6. in /usr/ports/x11/Xaw3d
&gt;&gt; Xaw3d-1.3.tar.gz doesn't seem to exist on this system.
&gt;&gt; Attempting to fetch from ftp://crl.dec.com/pub/X11/contrib/widgets/Xaw3d/R6.1/.
Connected to crl.dec.com.
220 crl.dec.com FTP server (Digital UNIX Version 5.60) ready.
331 Guest login ok, send ident as password.
230 Guest login ok, access restrictions apply.
Remote system type is UNIX.
Using binary mode to transfer files.
200 Type set to I.
250 CWD command successful.
250 CWD command successful.
Retrieving pub/X11/contrib/widgets/Xaw3d/R6.1/Xaw3d-1.3.tar.gz
local: Xaw3d-1.3.tar.gz remote: Xaw3d-1.3.tar.gz
227 Entering Passive Mode (192,58,206,2,5,14)
150 Opening BINARY mode data connection for Xaw3d-1.3.tar.gz (0.0.0.0,0) (290277 bytes).
100% |**************************************************|   283 KB    00:00 ETA
226 Transfer complete.
290277 bytes received in 101.09 seconds (2.80 KB/s)
221 Goodbye.
===&gt;  Extracting for Xaw3d-1.3
/bin/mkdir -p /usr/ports/x11/Xaw3d/work/xc/lib/Xaw3d/X11/Xaw3d
cd /usr/ports/x11/Xaw3d/work/xc/lib/Xaw3d/X11/Xaw3d; ln -sf ../../*.h .
===&gt;  Patching for Xaw3d-1.3
===&gt;  Configuring for Xaw3d-1.3
mv -f Makefile Makefile.bak
imake -DUseInstalled -I/usr/X11R6/lib/X11/config
make Makefiles
[snip]
</pre></ul></p>

<h3>フレーバを使う</h3>
<p>
ports ツリー中の多くのアプリケーションは、<i>フレーバ</i>と呼ばれる、異なるインストール
オプションをサポートしている。もし、ports が複数のフレーバをサポートしているなら、ports を
コンパイルする前に、オプションを単に環境変数にセットするだけで、それらを利用できる。
もし、複数の機能が必要なら、空白で区切られた、サポートされている、希望のフレーバのリストを、
FLAVOR 環境変数にセットすることができる。現在では、多くの ports が、データベースの
サポートや X なしのシステム、SSL や IPv6 のようなネットワーク関係のオプションを含む、
フレーバをサポートしている。
</p>

<ul>
<pre>
$ <strong>pwd</strong>
/usr/ports/net/mtr
$ <strong>make show=FLAVORS</strong>
curses
$ <strong>env FLAVOR="curses" make</strong>
===>  mtr-0.42-curses depends on: gmake-3.79.1 - found
===>  Checking files for mtr-0.42-curses
>> mtr-0.42.tar.gz doesn't seem to exist on this system.
>> Attempting to fetch /usr/ports/distfiles/mtr-0.42.tar.gz from ftp://ftp.bitwizard.nl/mtr/.
[snip]
$ <strong>sudo env FLAVOR="curses" make install</strong>
===>  Faking installation for mtr-0.42-curses
===>  Building package for mtr-0.42-curses
Creating package /usr/ports/packages/i386/All/mtr-0.42-curses.tgz
Using SrcDir value of /usr/ports/net/mtr/w-mtr-0.42-curses/fake-i386-curses/usr/local
Creating gzip'd tar ball in '/usr/ports/packages/i386/All/mtr-0.42-curses.tgz'
===>  Installing mtr-0.42-curses from /usr/ports/packages/i386/All/mtr-0.42-curses.tgz
</pre>
</ul>

<h3>インストール済みの ports/packages の一覧</h3>
<p>
ports と packages のいずれも pkg_info コマンドを使えばインストールされたものの一覧が見られる。</p>
<ul>
<pre>
$ <strong>/usr/sbin/pkg_info</strong>
zsh-4.0.4           The Z shell.
screen-3.9.11       A multi-screen window manager.
emacs-21.1          GNU editing macros.
tcsh-6.10.00        An extended C-shell with many useful features.
bash-1.14.7         The GNU Borne Again Shell.
zip-2.3             Create/update ZIP files compatible with pkzip.
ircii-20011210      An enhanced version of ircII, the Internet Relay Chat client
ispell-3.2.06       An interactive spelling checker.
tin-1.4.5           TIN newsreader (termcap based)
procmail-3.22       A local mail delivery agent.
strobe-1.06         Fast scatter/gather TCP port scanner
lsof-4.61p1         Lists information about open files.
ntp-4.1.72          Network Time Protocol Implementation.
ncftp-3.0.4         ftp replacement with advanced user interface
nmh-1.0.4           The New MH mail handling program
bzip2-1.0.2         A block-sorting file compressor
</pre>
</ul>


<h3>その他情報</h3>

<p>
portsについて詳しくは
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ports&amp;sektion=7&amp;format=html">ports(7)</a>
man ページと、<a href="../../ports.html">ports ページ</a>とを参照。
</p>

<p>
ports ツリーは絶えず拡張しているので、手伝っていただけるなら、
<a href= "../../porting.html">http://www.openbsd.org/porting.html</a> を参照していただきたい。
</p>

<br>

<p>
<a name= "Packages"></a>
<a name= "8.7"></a>
<h2>8.7 - packages って ?</h2>
</p>

<p>
packages は、いちばんよく使われるプログラムのコンパイル済みバイナリだ。
OpenBSD システムでは即使える。
ports と同じように、packages も管理更新がとても簡単だ。
packages はどんどん増えているから、リリースごとに新しい packages に注目しよう。
</p>
<p>
packages 管理に使うツールの一覧を挙げる。<br>
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add">pkg_add(1)</a> - packages ディストリビューションのインストール用ユーティリティ</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_create">pkg_create(1)</a> - packages ディストリビューションをつくるのに使うユーティリティ</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete">pkg_delete(1)</a> - インストール済みの packages ディストリビューションを削除するユーティリティ</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info">pkg_info(1)</a> - packages の情報を表示するユーティリティ</li>
</ul>

<h3>packages の見つけ方</h3>

<p>
賢いユーザのあなたはもちろん <a href="../../ja/orders.html">OpenBSD CD</a>
を買ったことと思う。packages は、アーキテクチャごとにわかれてそれぞれの CD 上にある。もし OpenBSD
CD をお持ちでないなら、ftp ミラーのどこからでもダウンロード可能だ。ftp ミラーの一覧は
<a href="../../ja/ftp.html">http://www.openbsd.org/ja/ftp.html</a> にある。packages のありかは
<i>/pub/OpenBSD/3.0/packages</i> 以下で、アーキテクチャごとに分かれてディレクトリにおさまっている。
</p>

<h3>packages のインストール</h3>

packages のインストールには <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add">pkg_add(1)</a>
ユーティリティを使う。pkg_add(1) はバカみたいに使いやすいユーティリティだ。以下の 2 例では pkg_add(1)
を使って packages をインストールする。最初の例は pkg_add(1) を使ってローカルディスク上の packages を
インストールしている。もう一つは、ftp 経由でインストールをしている。
どっちも screen-3.9.11 をインストールしている。

<ul>ローカルディスクからインストール
<pre>
$ <strong>sudo pkg_add -v screen-3.9.11.tgz</strong>
Requested space: 749864 bytes, free space: 2239117312 bytes in /var/tmp/instmp.cpsHA27596
Running install with PRE-INSTALL for `screen-3.9.11'
extract: Package name is screen-3.9.11
extract: CWD to /usr/local
extract: /usr/local/bin/screen-3.9.11
extract: execute 'ln -sf screen-3.9.11 /usr/local/bin/screen'
extract: /usr/local/man/man1/screen.1
extract: /usr/local/info/screen.info
extract: execute '[ -f /usr/local/info/dir ] || sed -ne '1,/Menu:/p' /usr/share/info/dir > /usr/local/info/dir'
extract: execute 'install-info /usr/local/info/screen.info /usr/local/info/dir'
extract: /usr/local/lib/screen/screencap
extract: /usr/local/lib/screen/screenrc
extract: CWD to .
Running mtree for `screen-3.9.11'
mtree -q -U -f +MTREE_DIRS -d -e -p /usr/local
Running install with POST-INSTALL for `screen-3.9.11'

+---------------
| The file /etc/screenrc has been created on your system.
| You may want to verify/edit its contents
|
| The file /usr/local/lib/screen/screencap contains a
| termcap like description of the screen virtual terminal.
| You may use it to update your terminal database.
| See <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=termcap&sektion=5&format=html">termcap(5)</a>.
+---------------

Attempting to record package into `/var/db/pkg/screen
Package `screen-3.9.11' registered in `/var/db/pkg/screen-3.9.11'
</pre></ul>

<p>
この例では <b>-v</b> フラグを使って、省略なしのメッセージを表示させている。このオプションは
別に必要ないのだけれど、デバッグには便利だし、さらに pkg_add(1) が実際になにをやっているかを
理解してもらうためにここでは使っている。でも、本当に意味のあるメッセージも出てきている。
<i>/etc/screenrc</i> に関するものだ。こういうだいじなメッセージは、<b>-v</b> フラグの有無に
かかわらず出てくる。
</p>

<ul>ftp 経由でインストール
<pre>
$ <strong>sudo pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/3.1/packages/i386/screen-3.9.11.tgz</strong>
&gt;&gt;&gt; ftp -o - ftp://ftp.openbsd.org/pub/OpenBSD/3.1/packages/i386/screen-3.9.11.tgz

+---------------
| The file /etc/screenrc has been created on your system.
| You may want to verify/edit its contents
|
| The file /usr/local/lib/screen/screencap contains a
| termcap like description of the screen virtual terminal.
| You may use it to update your terminal database.
| See termcap(5).
+---------------
</pre></ul>

<p>
この例では、i386 用の packages をインストールしたのがわかる。これは自分のアーキテクチャにあわせてほしい。
注: すべてのアーキテクチャに同じ packages があるとは限らない。ports の中には一部アーキテクチャでは使えないものもある。
この例では <b>-v</b> フラグを使わなかったので、本当に必要なメッセージしか表示されていない。
</p>

<h3>インストール済み packages を見て削除</h3>

<p>
システムにインストール済みの packages を見るには
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info">pkg_info(1)</a> を使う。
これは、packages を削除するときに正しい名前を調べるとき便利だ。
システムにインストール済みの packages を見るには、次のようにするだけ。

<ul><pre>
$ <strong>pkg_info</strong>
mpg123-0.59r       mpeg audio 1/2 layer 1, 2 and 3 player
nmap-2.54BETA25    port scanning large networks
ircii-20011210     enhanced version of ircII (internet relay chat)
screen-3.9.11      multi-screen window manager
unzip-5.42         extract, list &amp; test files in a ZIP archive
ntp-4.1.72         Network Time Protocol implementation
icb-5.0.9          Internet CB - mostly-defunct chat client
</pre></ul>

<p>
packages を削除するには、pkg_info(1) で表示される packages の正しい名前を調べて、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete">pkg_delete(1)</a>
を使ってそれを削除すればいい。以下の例では screen package が削除されている。
ときには、pkg_delete(1) で削除されなかったものを自分で削除しろという指示が出ることがあるのに注意。
pkg_add(1) ユーティリティと同じく、<b>-v</b> フラグを使えばアウトプットがもっと省略なしになる。
</p>

<ul><pre>
$ <strong>sudo pkg_delete screen-3.9.11</strong>

+---------------
| To completely deinstall the screen-3.9.11 package you need to perform
| this step as root:
|
|           rm -f /etc/screenrc
|
| Do not do this if you plan on re-installing screen-3.9.11
| at some future time.
+---------------
</pre></ul>

<p>
<a name= "NoFloppy"></a>
<a name= "8.8"></a>
<h2>8.8 - 起動時に接続していなかったフロッピードライブを使う手はあるの ?</h2>
</p>

<p>
もちろん。fd* エントリの最後に "flags 0x20" をつけてカーネルをコンパイルしなおそう。
こんなラインになるはずだ。
</p>
<ul>
<pre>  fd*     at fdc? drive ? flags 0x20</pre>
</ul>

<p>
あとは、フロッピードライブはいつでも使えるようになる。
起動時に差し込んであろうとその後だろうと関係なくなる。
</p>

<p>
<a name= "Bootloader"></a>
<a name= "8.9"></a>
<h2>8.9 - 起動時オプション: OpenBSD ブートローダを使う</h2>
</p>

<p>
OpenBSD システムをブートするときに、
bootプロンプトが出てきたのに気がついただろう。
</p>

<p>
<ul>boot&gt;</ul>
</p>

<p>
ほとんどの人は、ここで何もしなくていい。コマンドがなければ、自動的に起動に入る。
でもときどき問題が起きたり、特別な機能がほしかったりする。
そんなときには、ここにオプションを入れると便利だ。
まず手始めに <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;format=html">boot(8)</a>
man ページを一通り読んでほしい。ここではブートローダのいちばんよく使うコマンドをざっと見てやろう。
</p>

<p>
手始めに、コマンドがなければブートローダは自動的に <strong>/bsd</strong>
をブートしようとする。これに失敗したら <strong>/obsd</strong> でやってみて、
ブートできるカーネルが見つかるまでこれを続ける。カーネルを手で指定するには、
次のようにタイプしよう。
</p>
<ul>
<p>
boot&gt; <strong>boot wd0a:/bsd</strong>
</ul>
または
<ul>
boot&gt; <strong>b /bsd</strong>
</ul>
</p>

<p>
いまのは、wd0aが root デバイスに設定されていれば機能する。
</p>

<p>
OpenBSD カーネルで使えるオプションの簡単な一覧を以下に挙げよう。
<ul>
<li><strong>-a</strong> : これはカーネル起動後に、
別の root デバイスを指定するためのものだ。</li>
<li><strong>-c</strong> : 起動時設定を入力できるようにする。
FAQ の <a href="../faq5.html#BootConfig">起動時設定</a>の部分を参照のこと。</li>
<li><strong>-s</strong> : シングルユーザモードに入るときに指定するオプション。</li>
<li><strong>-d</strong> : このオプションは、カーネルを ddb にたたきこむ。ただし、そのためにはカーネルに DDB が組み込まれていないとダメだ。</li>
</ul>
</p>

<p>
オプションの入力は、以下のような形式になる。
<strong>boot [ image [-abcds]]</strong>
</p>

<p>
もっと詳しい話は、<a href="http://www.OpenBSD.org/cgi-bin/man.cgi?query=boot_i386&amp;sektion=8&amp;format=html">boot_i386(8)</a>
man ページを読もう。
</p>

<p>
<a name= "SKey"></a>
<a name="8.10"></a>
<h2>8.10 - S/Key</h2>
</p>

<p>
S/Key は「ワンタイム・パスワード」方式だ。保護されていないチャンネル上用に、ワンタイム・パスワードの利用を可能にする。これは ssh や、
暗号化されたチャンネルが使えない人にはとても便利なことがある。OpenBSD の S/Key 実装は、一方向ハッシュとして各種アルゴリズムが使える。
使えるアルゴリズムの一覧は以下のとおり。
</p>

<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md4&amp;sektion=3&amp;format=html">md4</a></li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5&amp;sektion=3&amp;format=html">md5</a></li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sha1&amp;sektion=3&amp;format=html">sha1</a></li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rmd160&amp;sektion=3&amp;format=html">rmd160</a>.</li>
</ul>

<h3>S/Key の設定 - 第一歩</h3>

<p>
まず手始めに <i>/etc/skeykeys</i> というファイルが必要だ。こいつがなければ、スーパーユーザに作ってもらおう。これは次のようにすれば
いいだけだ。
</p>

<ul>
<strong><pre>
# touch /etc/skeykeys
</pre></strong>
</ul>

<p>
このファイルができれば、S/Key を初期化できる。これには <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skeyinit&amp;sektion=1&amp;format=html">skeyinit(1)</a> を使うしかない。
skeyinit(1) では、まずシステムパスワードを要求される。つまり、システムにログインするときに使ったパスワードだ。skeyinit(1) を保護されていない
チャネル上で動かすのは、まったくおすすめできないので、これは保護されたチャネル (ssh など) か、コンソールでやること。システムに認証されたら、こんどは別のパスワードを入力しろと言われる。このパスワードは<i>秘密パスワード</i>で、<strong>システムパスワードとは別物だ</strong>。
この秘密パスワードは、システムパスワードのように 8 文字の制限はない。それどころか、最低でも 10 文字必要だ。数語からなる文章かなんかがいいだろう。
以下に、ユーザを追加した例を挙げよう。
</p>

<ul>
<pre>
oshibana:ericj&gt; <strong>skeyinit ericj</strong>
[Adding ericj]
Reminder - Only use this method if you are directly connected
   or have an encrypted channel.  If you are using telnet
   or rlogin, exit with no password and use skeyinit -s.
Enter secret password:
Again secret password:

ID ericj skey is otp-md5 99 oshi45820             
Next login password: HAUL BUS JAKE DING HOT HOG
</pre>
</ul>

<p>
ここで特にだいじなのが <i>ID ericj skey is otp-md5 99 oshi45820</i> という一行。これはユーザにいろんな情報を与えてくれる。それぞれの部分を分解して、
意義を説明しよう。
</p>

<ul>
<li><i>otp-md5</i> - これは、ワンタイム・パスワード (otp) をつくるのに、どの一方向ハッシュが使われたかを示す。</li>
<li><i>99</i> - これがあなたのシーケンス番号だ。100 からだんだん 1 へと下がっていく。1 まできたら、また別の秘密パスワードを作らなきゃいけない。</li>
<li><i>oshi45820</i> - これがあなたのキーだ。</li>
</ul>

<p>
でも、直接重要になってくるのがパスワードだ。パスワードは、6 つの短い単語でできている。この組み合わせが、空白なんかも含めて、あなたの
パスワードだ。
</p>

<h3>実際に S/Key を使ってログインする。</h3>

<p>
これで S/Key は初期化されて、パスワードももらった。
ログインの準備完了。S/Key を使ったログインセッションの例を
次に挙げよう。OpenBSD 3.0 では、S/Key でのログインは異なった働きをする。
OpenBSD 3.0 以降では、ログイン名に <b>:skey</b> を追加しよう。
OpenBSD の 3.0 よりも前のバージョンでは、S/Key パスワードの
プロンプトのところで、パスワードとして <b>s/key</b> を使おう
(これの例外が ftpd(8) で、OpenBSD 3.0 よりも前から S/Key-有効化
ユーザのための S/Key チャレンジが既に存在しているはずだ)。
以下の例は OpenBSD 3.0 以降のものを仮定している。
</p>

<ul>
<pre>
oshibana:ericj&gt; ftp localhost
Connected to localhost.
220 oshibana.shin.ms FTP server (Version 6.5/OpenBSD) ready.
Name (localhost:ericj): ericj:skey
331- otp-md5 96 oshi45820
331 S/Key Password:
230- OpenBSD 3.0 (OSHIBANA) #8: Tue Dec 22 19:20:16 EDT 2001
230-
230- Welcome to OpenBSD: The proactively secure Unix-like operating system.
230-
230- Please use the sendbug(1) utility to report bugs in the system.
230- Before reporting a bug, please try to reproduce it with the latest
230- version of the code.  With bug reports, please try to ensure that
230- enough information to reproduce the problem is enclosed, and if a
230- known fix for it exists, include that as well.
230-
230 User ericj logged in.
Remote system type is UNIX.
Using binary mode to transfer files.
ftp&gt; quit
221 Goodbye.
</pre>
</ul>

<p>
ユーザ名に ":skey" を加えたことに注意。
これが ftpd に S/Key 認証を使いたいということを伝えている。
シーケンス番号が <i>otp-md5 96 oshi45820</i> に変わったのに気がついた人もいるだろう。これは、すでに s/key を使って数回ログインしているからだ。
でも、一回ログインしたら、次のパスワードはいったいどうやって手に入れる ?  そうだね、それをやるには、使っているシーケンス番号とキーが必要だ。
でも、シーケンス番号なんかいちいち覚えてられない、と思ったかも知れないね。でも、これは簡単だ。
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skeyinfo&amp;sektion=1&amp;format=html">skeyinfo(1)</a> を使えば、なにを使うべきかがわかる。
たとえばここでは、いずれ必要になるだろうログイン用のパスワードを生成しなきゃならない
(これは保護されたチャネルでやってるのをお忘れなく)。
</p>

<ul>
<pre>
oshibana:ericj&gt; <strong>skeyinfo</strong>
95 oshi45820
</pre>
</ul>

<p>
もっと良い方法は <strong>skeyinfo -v</strong> を使うことで、これは、
シェルの中で使うのに適したコマンドだ。たとえば、その実例を挙げよう。
<ul>
<pre>
oshibana:ericj&gt; <strong>skeyinfo -v</strong>
otp-md5 95 oshi45820
</pre>
</ul>

<p>
この <i>otp-md5</i> は、使われた一方向ハッシュを示しているだけでなく、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=skey&sektion=1&format=html">skey(1)</a> コマンドの別名でもある。だから、
次回使用するための S/Key のパスワードを生成する最も簡単な方法は、単に、次のようにすればいい。
<ul>
<pre>
oshibana:ericj&gt; <strong>`skeyinfo -v`</strong>
Reminder - Do not use this program while logged in via telnet or rlogin.
Enter secret password:
NOOK CHUB HOYT SAC DOLE FUME
</pre>
</ul>

上記の例の中の実行演算子 (バッククォート) に注意。
</p>

<p>
たぶんあなたたちの多くは、こうしたパスワードを作るのに使えるような保護された接続がいつも使えるわけじゃないだろうと思うし、これを保護されていない接続上で作るのは意味がない。
だから、いっぺんに複数のパスワードを作っておきたいだろうね。なら、どうすればいい ?  そう、skey(1) に、パスワードをいくつ作りたいかを指定しておけばいい。
これをプリントアウトして、出先に持ち歩こう。
</p>

<ul>
<pre>
oshibana:ericj&gt; <strong>otp-md5 -n 5 95 oshi45820</strong>
Reminder - Do not use this program while logged in via telnet or rlogin.
Enter secret password:
91: SHIM SET LEST HANS SMUG BOOT
92: SUE ARTY YAW SEED KURD BAND
93: JOEY SOOT PHI KYLE CURT REEK
94: WIRE BOGY MESS JUDE RUNT ADD
95: NOOK CHUB HOYT SAC DOLE FUME
</pre>
</ul>

<p>
ここで、最初に使うのがいちばん最後に出てきたパスワードだということに注意。
番号は 100 からだんだん減っていくんだからね。
</p>

<h4>S/Key を telnet(1), ssh(1), rlogin(1)で使う</h4>

<p>
S/Key を telnet(1)、ssh(1)、rlogin(1) で使うのは、ftp とだいたい同じだけれど、
でも、ユーザ名の最後に ":skey" を
追加しよう。
以下に例を示す。
</p>

<ul>
<pre>
ericj@oshibana&gt; <strong>telnet localhost</strong>
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.

OpenBSD/i386 (oshibana) (ttyp2)

login: ericj:skey
otp-md5 98 oshi45821
S/Key Password: <strong>SCAN OLGA BING PUB REEL COCA</strong>
Last login: Thu Oct  7 12:21:48 on ttyp1 from 156.63.248.77
Warning: no Kerberos tickets issued.
OpenBSD 3.0 (OSHIBANA) #4: Thu Dec  2 23:36:16 EDT 2001

Welcome to OpenBSD: The proactively secure Unix-like operating system.

Please use the sendbug(1) utility to report bugs in the system.
Before reporting a bug, please try to reproduce it with the latest
version of the code.  With bug reports, please try to ensure that
enough information to reproduce the problem is enclosed, and if a
known fix for it exists, include that as well.

You have mail.
ericj@oshibana&gt;
</pre></ul>

<p>
<a name= "MacTime"></a>
<a name="8.11"></a>
<h2>8.11 - あたしの Macintosh の時計が遅れまくってるわよ ?</h2>
</p>

<p>
これはハードウェアのバグのせいなのよ。OpenBSD は、
現在の時間を追いかけるのにクロック割り込みを使うけれど、
この割り込みはアップルのアーキテクチャではプライオリティが最低になっている。
そこで負荷が重くなると (たとえばディスクやネットワークの活動中)、
クロック割り込みは捨てられて、Unix のクロックはあまり
進まないってことになる。
</p>

<p>
MacOS は、つねにハードウェアクロックを読みにいって
この問題を回避している。OpenBSD は、ハードウェア
クロックは起動時にしか読まない。シャットダウン時には、
カーネルは Unix 時間をもとにハードウェアクロックを
修正するほどは自信がないことがわかるだろう。
この時間のロス問題はよく知られているからだ。
</p>

<p>
いちばんいい解決法は、ntpd を走らせ (ports コレクションに入っている)、
このような時間のロスに対処することだ。
ときどき、時間のロスが大きすぎると、ntpd ですらこわがって時間をなおしてくれないけれど、
こんな場合には /etc/rc.securelevel の ntpd に -g オプションをつけておけば、
大幅なずれでも ntpd の言うとおりになる。
</p>

<p>
もう一つ、もっと簡単だけれど厳密さには欠ける方法が、rdate(8)
を定期的に実行させることだ。crontab にエントリをつくって、
できれば <strong>-a</strong> オプションをつけて時間が「ジャンプ」しないようにする。
もしあなたが常時接続を使っておらず、PPP を利用しているなら、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&amp;sektion=8&amp;format=html">rdate(8)</a>
の起動に使えるところは <i>/etc/ppp/ppp.linkup</i> ファイルで
rdate(8) を呼ぶようにしてもいいだろう。
</p>

<p>
<a href="http://www.macbsd.com/macbsd/macbsd-docs/faq/faq-3.html#ss3.17">  
http://www.macbsd.com/macbsd/macbsd-docs/faq/faq-3.html#ss3.17</a>
も参照のこと。

<p>
<a name= "SMP"></a>
<a name="8.12"></a>
<h2>8.12 - OpenBSD は SMP (Symmetric Multi-Processor == 対称マルチプロセッサマシン)
で動くかしら ?</h2>
</p>
<p>
現状では動かない。
<a href="../../ja/smp.html">OpenBSD SMP プロジェクト</a>で、作業は継続中だが、
まだ、現時点では使えるマシンは何もないし、OpenBSD の SMP サポートのスケジュール
も出せない。
</p>
<p>
ほとんどのプラットフォームで、OpenBSD は対称マルチプロセッサマシン上でも動きはするだろうが、
ひとつのプロセッサしか利用できない。この例外が SPARC プラットフォームで、OpenBSD/sparc は
いくつかのマルチプロセッサの SPARC システムではそもそも動かない (一般的ルール:
ひとつの MBus モジュールなら必ず動く。複数の MBus モジュールだと、それらが
シングルプロセッサモジュールであり、そしてもちろん <a href="../../sparc.html">サポートされている</a> 
限りは動く)。マルチプロセッサの SPARC64 システムでは、ベースのマシンが
<a href="../../sparc64.html">サポートされている</a>限りは動く。
</p>
<p>
<b>どうしたら手助けできるの ?</b><br>
<ul>
<li>コードを書く。やらなきゃならないことはたくさんある。</li>
<li>ハードウェアの寄付。OpenBSD SMP プロジェクトのゴールは、
<a href="../../sparc.html">SPARC</a>、
<a href="../../sparc64.html">SPARC64</a>、
<a href="../../alpha.html">Alpha</a>、
<a href="../../macppc.html">MacPPC</a>
そしてもちろん、<a href="../../i386.html">i386</a>
を含む、できるだけ多くのプラットフォームをサポートすることだ。
<a href="../../ja/want.html">望ましいハードウェア</a>
の寄付は大歓迎だ。</li>
<li>"テスト" をお願いしないこと。現時点では、SMP プロジェクトは OpenBSD プロジェクトの
主要部分ではない。というのは、まだ、製品の使用の準備ができていなかったり、一般的な
"テスト" さえも準備ができていなかったりするからだ。まず、あなたのハードウェア上では、
それを動かせるコードがなければ動かず、そのコードが今の時点では役に立たないということを
開発者に知らせよう。そして、<a href="../faq4.html#SendDmesg">dmesg を送ってほしい</a>。
もし、開発者があなたのハードウェアに興味を持ったなら、彼らはあなたに、テストについて
コンタクトを取ることができる。
</ul>
</p>

<p>
<a name= "TTY"></a>
<a name="8.13"></a>
<h2>8.13 - tty デバイスを使おうとすると Input/output エラーが時々出る</h2>
</p>
<p>
OpenBSD システム側から開始する接続には
/dev/cuaXX を使わないとダメなのだ。/dev/ttyXX デバイスは、
ターミナルやダイヤルイン利用だけになった。確かに昔は tty デバイスも
使えたんだけれど、いまの OpenBSD カーネルはもうこれとは互換性がない。

<p><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cua&amp;sektion=4&amp;format=html">cua(4)</a> から引用:
<p>
ハードウェアターミナルポートの場合、ダイヤルアウトはコーリングユニットという
デバイスノードをマッチさせることでサポートされている。たとえば、/dev/tty03
というターミナルは、対応する /dev/cua03 というコーリングユニットを持っている。
この二つのデバイスは、ダイヤルインデバイスノードに 128 を足したマイナー番号を持つ、
コーリングユニット・デバイスノードを作ることで区別される。
<i>ダイヤルイン・デバイス (tty) はふつう、システムに自分がアクティブなのを示すために
ハードウェア信号を必要とする一方、ダイヤルアウト・デバイス (cua) はそれを必要とせず、
モデムのようなデバイスと邪魔なしに通信できることになる。</i>
これはつまり、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getty&amp;sektion=8&amp;format=html">getty(8)</a> のようなプロセスは、
ダイヤルイン・デバイスでは
接続が確立するまで待つということだ。
一方、ダイヤル・アウト接続 (まったく同じターミナルポートでも) はシステム上のほかの
何一つじゃますることなく確立できる。
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getty&amp;sektion=8&amp;format=html">getty(8)</a>
プロセスは、ターミナルポートで何か起きていることさえ気がつかない。
もしダイヤルアウト接続が完了したあとで、
接続の呼び出しがきたら、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getty&amp;sektion=8&amp;format=html">getty(8)</a>
はダイヤルアウトの活動になにも気がつかずに、
それにきちんと対応する。

<p>
<a name= "Netscape"></a>
<a name="8.14"></a>
<h2>8.14 - OpenBSD 用の Netscape バイナリってどこで見つかるの ?</h2>
</p>

<p>
OpenBSD 専用の Netscape バイナリというのはない。
でも OpenBSD はほかの OS のバイナリエミュレーションをサポートしているから、
ほかのバイナリが使えるのだ。
</p>

<ul>
<li>I386 システムなら、BSDi バイナリを使うのがいちばんいい。</li>
<li>SPARC システムなら、SunOS バイナリを使おう。</li>
</ul>

<p>
<a href="../../ports.html">ports システム</a>を使えば、何の問題もなくインストールできるはず。
ports ツリーがインストールしてあれば、
Navigator port と Communicator port は <i>/usr/ports/www/netscape</i> にある。
</p>

<p>
<a name= "mg"></a>
<a name="8.15"></A>
</p>
<h2>8.15 - いまや OpenBSD の一部となった mg エディタはどうやって使うの ?</h2>
<p>
mg は Emacs 系のマイクロテキストエディタだ。マイクロというのはつまり小さいってわけ (Emacs
はでっかいもんね !)
基本的なことは <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a>
man ページを読もう。それとソースコードについてくる <a href="http://www.openbsd.org/cgi-bin/cvsweb/src/usr.bin/mg/tutorial?rev=1.1">チュートリアル</a>も参照。
もっとおもしろい質問については (たとえば「おれのマシンにはメタキーがないぞ |」とか)、
<a href="http://www.lerner.co.il/emacs/faq_toc.html">Emacs FAQ</a> を参照のこと。
<p>
なお mg は小さな Emacs 実装で、
Emacs 17 相当のテキストエディタ機能しかない。
Emacs のほかの機能はあまり実装されていない
(たとえばメールやニュース機能、Lisp、C++、Lex、Awk、Java などのモード...)。

<p>
<a name= "ksh"></a>
<a name="8.16"></a>
<p>
<h2>8.16 - Ksh はぼくの .profile を見ていないみたい !</h2>
<p>
理由として考えられるのはふたつ。</p>
<ul>
<li>.profile の所有者がそのユーザになっていない。
これは簡単になおせる。ある<b>ユーザ名</b>について、
<p>
 <ul><tt>
 # <b>chown ユーザ名 ~ユーザ名/.profile</b>
 </tt></ul>
<p>
<li>ksh を X Window System の中から使っている
<p>
xterm では、ksh の argv[0] がダッシュ(-)でプリペンドされていないのだ。
argv[0] の前にダッシュ(-)をつければ、csh と ksh にも、
ログインファイルを解釈しなきゃいけないんだな、とわかる。
(csh のログインファイルは .login で、それとは別に .cshrc が csh の起動時に必ず実行される。
これは ksh のほうがもっとはっきりしている。
起動スクリプトは .profile 一つしかない。
このファイルは、シェルがログインシェルでないときには無視される。)
<p>
これをなおすには、ホームディレクトリの <i>.Xdefaults</i> ファイルに
<i>XTerm*loginShell: true</i> という行を加えておこう。ただし、このファイルは、
デフォルトでは存在していないので、なければ作る必要がある。
<p>
 <ul><tt>
 $ <b>echo "XTerm*loginShell: true" &gt;&gt; ~/.Xdefaults</b>
 </tt></ul>
<p>
他のシステムではこんな必要はなかったかもしれない。
一部の X Window System のインストールは、この設定をデフォルトにするからだ。
OpenBSD は、XFree86 の流儀にしたがうことにしている。
</ul>

<p>
<a name= "motd"></a>
<a name="8.17"></a>
<h2>8.17 - /etc/motd ファイルを変更しても上書きされちゃうみたいなのはなぜ ?</h2>
</p>

<p>
<i>/etc/motd</i> ファイルは、システムのブートのたびに編集されて、
最初の一行がカーネルバージョン情報で置き換わる。
このファイルを編集するときには、必ずてっぺんから二行あけたところから始めるのをお忘れなく。
さもないと <i>/etc/rc</i> が、ブート時に、<i>/etc/motd</i> を編集するときに削除しちゃうよ。

<p>
<a name= "wwwsolaris"></a>
<a name="8.18"></a>
<h2><a name="f8.18" id="f8.18">8.18 - どうして www.openbsd.org は Solarisで動いてるの ?</h2>
</p>
<p>
開発者は一人残らず、こんなのどうでもいいことだと思ってはいるのだけれど、
メーリングリストなんかでしょっちゅう出てくる質問なので、ここで答えておこう。
<i>www.openbsd.org</i> とメインの OpenBSD ftp サイトは、
カナダはアルバータ大学の SunSITE でホスティングしてもらっているのだ。
このサイトはでかい Sun システム上でホストされていて、ディスクもいっぱいあるし、
インターネットの帯域幅も太い。
SunSITE のおかげで OpenBSD グループはこの帯域幅にアクセスできるのだ。
だからメインサイトはここで動いてる。
OpenBSD ミラーの多くは OpenBSD で動いているけれど、
それはこれほどの太い帯域幅へのアクセスが保証されていないから、
グループとしては、メインサイトはアルバータ大学の SunSITE におくことにしたわけ。

<p>
<a name= "PCI"></a>
<a name="8.19"></a>
<h2>8.19 - ネットワークカードが認識されないで困った</h2>
</p>

<p>
一部のマシンでは、一部の PCI デバイスを正しく検出できなかったり、ひとつ
のマシンに複数のネットワークカードがあると、ハングアップしたりするという
問題が生じている。これは PCIBIOS の問題なので、きちんと動くようにするには
ちょっと迂回すればいいだけだ。起動時設定で、PCIBIOS を無効にしよう。
以下に例を示す。
</p>

<ul>
<table border=0 width="800">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
<pre>
boot&gt; <b>boot -c</b>
Copyright (c) 1982, 1986, 1989, 1991, 1993
        The Regents of the University of California.  All rights reserved.
Copyright (c) 1995-2002 OpenBSD. All rights reserved.  http://www.OpenBSD.org

OpenBSD 3.1 (RAMDISK_CD) #242: Sat Apr 13 15:35:54 MDT 2002
    deraadt@i386.openbsd.org:/usr/src/sys/arch/i386/compile/RAMDISK_CD
cpu0: Intel Pentium III (Coppermine) ("GenuineIntel" 686-class, 128KB L2 cache)
1 GHz
cpu0: FPU,V86,DE,PSE,TSC,MSR,PAE,MCE,CX8,SYS,MTRR,PGE,MCA,CMOV,PAT,PSE36,MMX,FXS
R,SIMD
real mem  = 267956224 (261676K)
avail mem = 243347456 (237644K)
using 3296 buffers containing 13500416 bytes (13184K) of memory
User Kernel Config
UKC&gt; <b>disable pcibios</b>
UKC&gt; <b>quit</b>
[... snip ...]
</pre>
                </td>
        </tr>
</table>
</ul>

<p>
これが終わったら、<a href="../faq5.html#Building">FAQ 5, Building a Kernel</a>
の指示にしたがって新しいカーネルをつくろう。
そうすればもうこの話はこの先心配しなくてよくなる。
</p>

<p>
<a name= "TrueType"></a>
<a name="8.20"></a>
<h2>8.20 - XFree86 での TrueType フォントやアンチエイリアス</h2>
</p>
<p>
<a href="truetype.html">こちらのドキュメント</a>を見てほしい。
</p>

<p>
<a name= "Journaling"></a>
<a name="8.21"></a>
<h2>8.21 - OpenBSD 何かジャーナルファイルシステムをサポートしているの ?</h2>
</p>
<p>
いや、サポートしていない。我々は、同様の結果を達成するために <a href="faq14.html#SoftUpdates">Soft Updates</a>
と呼ばれる、異なるメカニズムを使用している。もっと詳しいことは、FAQ 14 を読んでいただきたい。
</p>

<p>
<a name= "RevDNS"></a>
<h2>8.22 - DNS の逆引き <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small>- や -</small><br>
そのログにどうしてこんなに時間がかかるの ?</h2>
<p>
多くの OpenBSD の新規ユーザが、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh</a>、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&sektion=1">ftp</a> や 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=telnet&sektion=1">telnet</a>  
のようなサービスを利用する際に、2 分間のログインの遅延を経験している。
これは、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&sektion=8">ftp-proxy</a>
のようなプロキシを利用する場合や、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&sektion=8">sendmail</a>
を利用してワークステーションからメールを投げるときにもまた、経験し得ることだ。
<p>
これは、ほとんどつねに DNS の逆引きの問題なんだ。DNS とはDomain Name Services
のことだが、インターネット上のシステムでは、"www.openbsd.org" のような名前を
数字の IP アドレスに変換するのに使用されている。DNS のもうひとつの仕事は、
数字の IP アドレスから "name" に戻すような変換を行う機能で、
これが "DNS の逆引き" なんだ。
<p>
より良いロギングを行うために、OpenBSD は、いろんなマシンからの
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh</a>、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&sektion=1">ftp</a>、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=telnet&sektion=1">telnet</a>、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&sektion=8">sendmail</a> や
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&sektion=8">ftp-proxy</a>
を含む、
多くの異なった方法での接続の際に、DNS を逆引きする。
不幸にも、たまに、接続しようとしてくるマシンが、
正しい DNS の逆引きエントリを持たないことがある。
<p>
<h3>このような状況の一例</h3> 
OpenBSD マシンをファイアウォールとして構築し、内部ネットワークからの
ゲートウェイにしようとするユーザは、すべての内部のコンピュータを、
<a href="../faq6.html#NAT">NAT</a> を使用して、
ひとつの外部 IP アドレスにマッピングすることになる。
このとき、このマシンを、外部へのメールのリレーサーバとしても
使用しているかも知れない。どんなときにも毎回、接続しようと試みると、
2 分間の遅延が発生してしまうという、この一点を除いては、
インストール時のガイドラインに従い、そして、その結果に満足していると思う。
<p>
<h3>いったい何が起きているの ?</h3>
<a href="http://www.geektools.com/rfc/rfc1918.txt">プライベート IP アドレス</a>
192.168.1.35 を持つ、ゲートウェイの NAT の後のワークステーションから、ユーザが
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh</a>
を使用して、このゲートウェイシステムにアクセスするとしよう。
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1">ssh</a>
クライアントは、ユーザ名とパスワードを尋ねるプロンプトを出力し、
それらをゲートウェイに送る。このとき、ゲートウェイは、
192.168.1.35 の DNS の逆引きを実行して、
何というマシンから誰がログインしようとしているのか、
解決しようとする。問題は、192.168.0.0 というアドレスがプライベートアドレスだ
ということだろう。なので、このネットワークの外にある、正しく構成された
DNS サーバでも、このようなアドレスについての情報は保持していないはずだ。
あるものは、素早くエラーメッセージを返すので、このような場合には、OpenBSD は
もうこれ以上の情報は得られないと判断して、直ちにユーザのログインを許可する。
でも、別の DNS サーバはどんな応答も返さないかも知れない。こうなると、OpenBSD の
レゾルバはタイムアウトを待つので、ログインできるまで 2 分間待たされることになる。
しかし、たとえば、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&sektion=8">ftp-proxy</a>
の場合、ある ftp クライアントが、DNS の逆引きがタイムアウトする前に
タイムアウトしてしまうので、ftp-proxy がちゃんと動いていないかのような印象を
ユーザに与えることになる。
<p>
これは実に迷惑な話だが、幸いにも、この問題の解決は簡単なことだ。
<p>
<h3><tt>/etc/hosts</tt> を使った解決法</h3>
最も簡単な解決法は、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hosts&sektion=5"><tt>/etc/hosts</tt></a>
ファイルに、
内部ネットワークのすべてのマシンを記述し、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=resolv.conf&sektion=5"><tt>/etc/resolv.conf</tt></a>
ファイルに <tt>lookup file bind</tt> という行があることを確認しよう。
この行は、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hosts&sektion=5"><tt>/etc/hosts</tt></a>
ファイルを先に調べて、
それでも結果が得られなければ、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=resolv.conf&sektion=5"><tt>/etc/resolv.conf</tt></a>
ファイルの "nameserver" 行で指定される DNS サーバを使用して調べるということを
レゾルバが知っているということだ。<p>

あなたの
<tt>/etc/hosts</tt> 
ファイルには、次のようなエントリがあることだろう。
<ul> <table border=0 width="800"> <tr> <td nowrap bgcolor="#EEEEEE">
<pre>
::1
127.0.0.1 localhost
192.168.1.1 gw.in.example.org gw
192.168.1.20 scrappy.in.example.org scrappy
192.168.1.35 shadow.in.example.org shadow
</pre>
</td></tr></table></ul>
また、あなたの <tt>resolv.conf</tt> ファイルには、次のようなエントリがあることだろう。 
<ul> <table border=0 width="800"> <tr> <td nowrap bgcolor="#EEEEEE">
<pre>
search in.example.org 
nameserver 24.2.68.33
nameserver 24.2.68.34
lookup file bind
</pre>
</td></tr></table></ul>
しかし、この場合、"でも、あたしは内部ネットワークで DHCP を使いたいのよ !
どうしたら、そのような <tt>/etc/hosts</tt> を書けるっていうのよ ?" という
共通の難点がある。でも、まぁ、これはむしろ簡単なことだね。DHCP サーバが付与する
すべての IP アドレスと固定 IP アドレスのマシンとを、全部書いときゃいいんだから。
<ul> <table border=0 width="800"> <tr> <td nowrap bgcolor="#EEEEEE">
<pre>
::1
127.0.0.1 localhost
192.168.1.1 gw.in.example.org gw
192.168.1.20 scrappy.in.example.org scrappy
192.168.1.35 shadow.in.example.org shadow
192.168.1.100 d100.in.example.org d100
192.168.1.101 d101.in.example.org d101
192.168.1.102 d102.in.example.org d102
         [... snip ...] 
192.168.1.198 d198.in.example.org d198
192.168.1.199 d199.in.example.org d199
</pre>
</td></tr></table></ul>

このケースでは、DHCP のレンジが 192.168.1.100 から 192.168.1.199 まであるものとし、
それに加えて 3 個の固定 IP アドレスのマシンのエントリがファイルの先頭の方に
記述されているものとしている。
<p>
もし、ゲートウェイ自身が IP アドレスを DHCP から取得していたとしたら……
これまた問題になってしまうわけだ。
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dhclient&sektion=8">dhclient</a>
が、DHCP サーバからの IP アドレスのリースが更新されるたびに <tt>/etc/resolv.conf</tt>
をオーバーライトしてくれるのだが、これが例の "lookup file bind" という行を削除して
くれちゃうわけだ。でも、これは、"lookup file bind" という行を
<tt>/etc/resolv.conf.tail</tt>
というファイルに書くことで解決できる。
<p>
<h3>ローカルの DNS サーバを使った解決法</h3>
この方法の詳細については、このドキュメントの範囲外になるのだが、
お気に入りの DNS サーバを立てるための基本的なトリックであり、
ネットワーク内のすべてのノードに対する、正引きと逆引きの両方の、
正当な DNS の名前解決をできるようにした上で、(ゲートウェイを含む)
コンピュータがそれを DNS サーバとして使うようにすれば良いことだ。
OpenBSD に含まれる BIND v4.9.8 ネームサーバについての詳細は、
<a href="../faq6.html#DNS">ここ</a>を参照してほしい。

<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ トップに戻る]</a>
<a href= "faq7.html">[7.0 - キーボード制御]</a>
<a href= "faq9.html">[9.0 - Linuxからのお引っ越し]</a>
</font>
</p>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt= "[back]"></a> 
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq8.html,v 1.92 ]
<br>
$Translation: faq8.html,v 1.10 2002/05/20 22:48:40 toshi Exp $
<br>
$OpenBSD: faq8.html,v 1.8 2002/05/21 10:04:04 jufi Exp $
</small>
</p>
</body>
</html>
