<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>7.0 - キーボード制御</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-2022-JP">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
</head>

<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<body bgcolor= "#ffffff" text= "#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>
<h2><font color="#e00000">7.0 - キーボードならびにディスプレイの制御</font><hr></h2>
<hr>
<p>
<h3>Table of Contents</h3>
<ul>
<li><a href= "#Keyboard"     >7.1 - どうすればキーボードの配列を変更できますか ? (wscons)</a>
<li><a href= "#ConsoleMouse" >7.2 - OpenBSD には gpm か、それに類するものはありますか ?</a>
<li><a href= "#ConsoleClear" >7.3 - どうすればユーザがログアウトするたびに
    コンソールをクリアできますか ?</a>
<li><a href= "#Scrollback"   >7.4 - コンソールスクロールバックバッファへのアクセス
    (alpha/macppc/i386)</a>
<li><a href= "#SwitchConsole">7.5 - コンソールの切り替えはどのようにするのでしょう ? (i386)</a>
<li><a href= "#80x50"        >7.6 - コンソールの解像度として 80x25 を使用するには
    どのようにすれば良いのでしょう ? (i386)</a>
</ul>
<hr>

<br>
<p>
<a name= "Keyboard"></a>
<a name= "7.1"></a>
<h2>7.1 - どうすればキーボードの配列を変更できますか ? <i>(wscons)</i></h2>

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&sektion=4">wscons(4)</a>
コンソールドライバを使用している port は、
<a href="../../alpha.html">alpha</a>、<a href="../../i386.html">i386</a>
および <a href="../../macppc.html">macppc</a> です。

<b>OpenBSD 3.0とそれ以降の場合</b>

<p>
wscons(4) のコンソールでは、ほとんどのオプションが
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl&sektion=8">wsconsctl(8)</a> を使用して制御できます。
たとえば、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl&sektion=8">wsconsctl(8)</a>
を使用してキー配列を変更するには、
次のコマンドを実行します。

<blockquote><pre>
# <strong>wsconsctl -w keyboard.encoding=uk</strong>
</pre></blockquote>

<p>
他の例として、&quot;Caps Lock&quot; を &quot;Control L&quot; に割り当て直すには、
以下のようにします。

<blockquote><pre>
# <strong>wsconsctl -w keyboard.map+="keysym Caps_Lock = Control_L"</strong>
</pre></blockquote>

<b>OpenBSD 2.9の場合</b>

<p>
OpenBSD 2.9では、wsconsctlコマンドの引数が少し違います。
特に、``keyboard''キーワードを前に付ける必要がありませんが、
コマンドをデバイスのキーボード部分に適用することを指定するために
``-k''フラグを付ける点が異なります。

<blockquote><pre>
# <strong>wsconsctl -k -w encoding=uk</strong>
</pre></blockquote>

<p>もうひとつの例では、以下の通りです。

<blockquote><pre>
# <strong>wsconsctl -k -w map+="keysym Caps_Lock = Control_L"</strong>
</pre></blockquote>

<p>
この例では、イギリス用のキーマップをロードします。

<a name= "ConsoleMouse"></a>
<a name= "7.2"></a>
<h2>7.2 - Is there gpm or the like in OpenBSD?</h2>

<p>
<a href="../../alpha.html">alpha</a> および <a href="../../i386.html">i386</a> 
プラットフォームでは、OpenBSD は FreeBSD の moused(8) である
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsmoused&amp;sektion=8&amp;arch=i386">wsmoused(8)</a>
を用意しています。これは、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;sektion=8">rc.conf(8)</a>
の適正な行を編集して起動させることで、自動的に有効にすることも可能です。

<p>
<a name= "ConsoleClear"></a>
<a name="7.3"></a>
<h2>7.3 - どうすればユーザがログアウトするたびにコンソールをクリアできますか ?</h2>

<p>
これを行うためには、
<kbd><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gettytab&sektion=5">/etc/gettytab(5)</a></kbd>
に行を追加しなければなりません。現在、以下のようになっているところがあります。

<blockquote><pre>
P|Pc|Pc console:\
        :np:sp#9600:
</pre></blockquote>

<p>
これの最後に&quot;<tt>:cl=\E[H\E[2J:</tt>&quot;という行を加えます。
つまり、次のようになります。

<blockquote><pre>
P|Pc|Pc console:\
        :np:sp#9600:\
	:cl=\E[H\E[2J:
</pre></blockquote>

<p>
<a name= "Scrollback"></a>
<a name="7.4"></a>
<h2>7.4 - コンソールスクロールバックバッファへのアクセス
  <i>(alpha/macppc/i386)</i></h2>

<p>
OpenBSD はコンソールスクロールバッファを用意しています。これによって、
既に画面からスクロールして消えてしまった情報を見ることができます。
このバッファの中を上下するには、単に、次のキーの組み合わせ
<tt>[SHIFT]+[PGUP]</tt> や <tt>[SHIFT]+[PGDN]</tt> を使えばよいのです。

<p>
デフォルトスクロールバッファ、つまり、上に戻ってみることのできるページ数は、
8 です。

<p>
<a name= "SwitchConsole"></a>
<a name="7.5"></a>
<h2>7.5 - コンソールの切り替えはどのようにするのでしょう ? <i>(i386)</i></h2>

i386 システムのユーザは、<tt>[CTRL]+[ALT]+[F1]、[CTRL]+[ALT]+[F2]、
[CTRL]+[ALT]+[F3]</tt>、<tt>[CTRL]+[ALT]+[F4]</tt> や <tt>[CTRL]+[ALT]+[F6]</tt>
を押下することにより、コンソールから 5 つの仮想ターミナルに切り替えることができます。

<p>
これは、X の環境下でも可能で、グラフィカルな環境からテキストモードの
環境へと戻ることができます。このとき、グラフィカルな環境に戻るためには、
<tt>[CTRL]+[ALT]+[F5]</tt> を押下してください。

<a name="80x50"></a>
<h2>7.6 - コンソールの解像度として 80x50 を使用するにはどのようにすれば良いのでしょう ? <i>(i386)</i></h2>

i386 のユーザは、通常は 80 文字 25 行のコンソールスクリーンが使用可能です。
しかしながら、多くの VGA ビデオカードでは、これよりも高い文字解像度である
80 文字 50 行の表示を行う能力を有しています。

<p>
まず、
目的の解像度をサポートするフォントが
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsfontload&amp;sektion=8">wsfontload(8)</a>
コマンドによってロードされなければなりません。標準の 80x25 文字スクリーンは
8x16 ピクセルのフォントを使用していますが、縦解像度を倍にするためには、8x8
ピクセルのフォントを使用する必要があります。

<p>
その後、
<a href="#SwitchConsole">virtual console</a> を消去して、
目的の解像度のものを
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconscfg&amp;sektion=8">wsconscfg(8)</a>
コマンドを使用して再生成します。

<p>
これは、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.local&amp;sektion=8"><tt>rc.local(8)</tt></a>
ファイルに次の行を追加することで、
ブート時に自動的に実行させることができます。
<blockquote>
<pre>
wsfontload -h 8 -e ibm /usr/share/misc/pcvtfonts/vt220l.808
wsconscfg -dF 5
wsconscfg -t 80x50 5
</pre>
</blockquote>

いかなるシステム構成の変更においても、これらのコマンドが
何を行おうとしているのかを理解するために、man ページを
読むことをお勧めします。

<p>
最初の行は、8x8 のフォントをロードしています。次の行は、
(<tt>[CTRL]-[ALT]-[F6]</tt> でアクセスされる) スクリーン 5 を消去しています。
3 行目は、80 文字 50 行の新しいスクリーン 5 を生成しています。これを実行した
場合、最初のスクリーンおよび他の 3 つのデフォルト仮想コンソールは、標準的な
80x25 のモードで起動しますが、新しいスクリーン 5 が <tt>[CTRL]-[ALT]-[F6]</tt>
でアクセス可能になっていることがわかるでしょう。

<p>
ここで、<tt>[CTRL]-[ALT]-[F1]</tt> がスクリーン 0 となることに注意してください。
もし、他のスクリーンも切り替えたければ、80x50 の解像度で使用したいスクリーンで、
単にスクリーンを消去して追加する作業を繰り返してください。

<p>
スクリーン 4 (ttyC4、<tt>[CTRL]-[ALT]-[F5]</tt>) を切り替えるのは避けるべきです。
このスクリーンは、X がグラフィックスクリーンとして使用しています。OpenBSD には、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ttys&amp;sektion=5"><tt>/etc/ttys(5)</tt></a>
を変更することで、さらに多くの仮想ターミナルを、
お望みの解像度で追加することも可能です。

<p>
もし、その必要がある場合には、これらのすべてのコマンドは、root ユーザとして
コマンドプロンプトから入力することも可能です。

<p>
<b>注意: これは、すべてのビデオカードで使えるわけではありません。</b>  不幸にも、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&amp;sektion=4">wscons(4)</a>
が 80x50 文字モードを使用するのに必要なフォントのアップロードを、
すべてのビデオカードがサポートしているわけではないからです。
これらのカードでは、X の使用を考慮した方が良いかも知れません。


<p>
<font color= "#0000e0">
<a href= "index.html">[Back to Main Index]</a>
<a href= "../faq6.html">[To Section 6.0 - Networking]</a>
<a href= "faq8.html">[To Section 8.0 - General Questions]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt= "[back]"></a> 
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq7.html,v 1.41 ]
<br>
$Translation: faq7.html,v 1.11 2002/11/20 08:53:47 toshi Exp $
<br>
$OpenBSD: faq7.html,v 1.9 2002/11/20 12:37:03 jufi Exp $
</small>
</body>
</html>
