<html>
<head>
<title>7.0 - キーボード制御</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif">
<p>
<h2><font color=#e00000>7.0 - キーボード制御</font><hr></h2>
</p>

<p>
<ul><h3>Table of Contents</h3>
<li><a href= "#Keyboard"     >7.1 - どうすればキーボードの配列を変更できますか？</a></li>
<li><a href= "#ConsoleMouse" >7.2 - Is there gpm or the like in OpenBSD?</a></li>
<li><a href= "#ConsoleClear" >7.3 - どうすればユーザがログアウトするたびにコンソールをクリアできますか？</a></li>
<li><a href= "#Scrollback"   >7.4 - コンソールスクロールバックバッファへのアクセス</a></li>
<li><a href= "#SwitchConsole">7.5 - なぜ、i386で、F9キーからF12キーでコンソールを切替えられなくなったのですか？</a></li>
</ul>
</p> 
<hr>

<br>
<p>
<a name= "Keyboard"></a>
<a name= "7.1"></a>
<h2>7.1 - どうすればキーボードの配列を変更できますか？ <i>(wsconsの場合のみ)</i></h2>

</p>

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&sektion=4">wscons(4)</a>コンソールドライバを使っているportsは、
<a href="../alpha.html">alpha</a>, <a href="../i386.html">i386</a>, and <a href="../../macppc.html">macppc</a>です。
</p>

<b>OpenBSD 3.0とそれ以降の場合</b>

<p>
OpenBSD 2.9から、OpenBSDは
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&sektion=4">wscons(4)</a>コンソールドライバを使うようになりました。
OpenBSD 2.8やそれ以前は、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcvt&sektion=4&manpath=OpenBSD+2.7&arch=i386">pcvt(4)</a>
コンソールドライバが使われていました。
</p>

<p>
wscons(4)のコンソールでは, ほとんどのオプションが
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl&sektion=8">wsconsctl(8)</a>を使って制御できます。
例えば、<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsconsctl&sektion=8">wsconsctl(8)</a>を使ってキー配列を変更するには、
次のコマンドを実行します。
</p>

<ul><pre>
# <strong>wsconsctl -w keyboard.encoding=uk</strong>
</pre></ul>

<p>
他の例として, &quot;Caps Lock&quot;を&quot;Control L&quot;に割り当て直すには、以下のようにします。
</p>

<ul><pre>
# <strong>wsconsctl -w keyboard.map+="keysym Caps_Lock = Control_L"</strong>
</pre></ul>

<b>OpenBSD 2.9の場合</b>

<p>
OpenBSD 2.9では、wsconsctlコマンドの引数が少し違います。
特に、``keyboard''キーワードを前に付ける必要がありませんが、
コマンドをデバイスのキーボード部分に適用することを指定するために
``-k''フラグを付ける点が異なります。
</p>

<ul><pre>
# <strong>wsconsctl -k -w encoding=uk</strong>
</pre></ul>

<p>もう一つの例では、以下の通りです。</p>

<ul><pre>
# <strong>wsconsctl -k -w map+="keysym Caps_Lock = Control_L"</strong>
</pre></ul>

<b>OpenBSD 2.8やそれ以前の場合</b>

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kcon&sektion=1&manpath=OpenBSD+2.7">kcon(1)</a>, 
"kcon - keyboard control and remapping for the pcvt driver"を使います。<br>
これを使う前に、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scon&sektion=1&manpath=OpenBSD+2.7">scon(1)</a>を使って、キャラクタマッピングをオンにしなければなりません。
</p>

<p>
例：
</p>

<ul><pre>
# <strong>scon -o</strong>
# <strong>kcon -m gb</strong>
</pre></ul>

<p>
この例では、イギリス用のキーマップをロードします。
もう一度<b>scon -o</b>を実行すると、キャラクタマッピングがオフに戻ってしまうことに注意してください。kconを使ってもう一度変更したいと思ったときに、そうなってしまうのは困るでしょう。スクリプトの中のような自動化された状況でsconを使う場合には、このことに注意してください。
<p>
これらのコマンドは、pcvtの仮想コンソールからのみ実行できます。

<p>
<a name= "ConsoleMouse"></a>
<a name= "7.2"></a>
<h2>7.2 - Is there gpm or the like in OpenBSD?</h2>
</p>

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&sektion=4">wscons(4)</a>コンソールドライバを使っているプラットフォームでは、
FreeBSDのmoused(8)を移植したものがあります。
最初、moused(8)は、OpenBSD 2.7のときに
the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcvt&sektion=4&manpath=OpenBSD+2.7&arch=i386">pcvt(4)</a>コンソールドライバを使って移植されましたが、
その後、wsconsを使うように変更されました。
デーモンの名前は
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wsmoused&sektion=8&arch=i386">wsmoused(8)</a>に変更され、
OpenBSD 2.9やそれ以降ではデフォルトで入っています。
</p>

<p>
wsmoused(8)が動作するアーキテクチャは<a href="../alpha.html">alpha</a>, <a href="../i386.html">i386</a>, 
and <a href="../macppc.html">macppc</a>です。

<p>
<a name= "ConsoleClear"></a>
<a name="7.3"></a>
<h2>7.3 - どうすればユーザがログアウトするたびにコンソールをクリアできますか？</h2>
</p>

<p>
これをするためには、<kbd><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gettytab&sektion=5">/etc/gettytab(5)</a></kbd>に行を追加しなければなりません。
現在、以下のようになっているところがあります。
</p>

<ul><pre>
P|Pc|Pc console:\
        :np:sp#9600:
</pre></ul>

<p>
これの最後に&quot;:cl=\E[H\E[2J:&quot;という行を加えます。
つまり、次のようになります。
</p>

<ul><pre>
P|Pc|Pc console:\
        :np:sp#9600:\
	:cl=\E[H\E[2J:
</pre></ul>

<p>
<a name= "Scrollback"></a>
<a name="7.4"></a>
<h2>7.4 - コンソールスクロールバックバッファへのアクセス <i>(alpha/macppc/i386の場合のみ)</i></h2>
</p>

<p>
OpenBSD 2.6から、コンソールスクロールバックバッファへアクセスすることができます。これによって、既に画面からスクロールして消えてしまった情報を見ることができます。このバッファの中を上下するには、単に、次のキーの組合せを使えばよいのです。
</p>

上に行くには、
<ul><pre>
&quot;[shift]+[pgup]&quot;
</pre></ul>

下へ戻るには、
<ul><pre>
&quot;[shift]+[pgdn]&quot;
</pre></ul>

<p>
デフォルトスクロールバッファ、つまり、上に戻ってみることのできるページ数は、8です。
</p>

<p>
<a name= "SwitchConsole"></a>
<a name="7.5"></a>
<h2>7.5 - なぜ、i386で、F9キーからF12キーでコンソールを切替えられなくなったのですか？ <i>(i386 specific)</i></h2>

OpenBSD 2.6やそれ以前では、i386でのpcvtコンソールドライバは、
F9, F10, F11, F12を押すことによって、それぞれ対応する仮想コンソール
1, 2, 3, 4に切替えることができました。2.7とそれ以降では、
これらのキーを使うアプリケーションもあることを考えて、
この機能は取り除かれました。

<p>
<font color= "#0000e0">
<a href= "index.html">[Back to Main Index]</a>
<a href= "faq6.html">[To Section 6.0 - Networking]</a>
<a href= "faq8.html">[To Section 8.0 - General Questions]</a>
</font>
</p>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt= "[back]"></a> 
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq7.html,v 1.34 ]
<br>
$Translation: faq7.html,v 1.2 2002/04/14 12:00:13 jufi Exp $
<br>
$OpenBSD: faq7.html,v 1.2 2002/04/14 12:11:14 jufi Exp $
</small>
</p>
</body>
</html>
