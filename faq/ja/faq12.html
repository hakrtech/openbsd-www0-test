<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>12 - For Advanced Users</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html;charset=iso-2022-jp">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2003 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ の目次]</a>
<a href= "faq11.html">[11 章 - パフォーマンスのチューニング]</a>
<a href= "faq13.html">[13 章 - IPsec]</a>
</font>

<h1><font color=#e00000>12 - 高度なユーザのために</font></h1>
<hr>

<p>
<h3>Table of Contents</h3>
<ul>
<li><a href="#IDEDMA">12.1 - IDE ディスクで DMA アクセスを強制する</a>
<li><a href= "upgrade-minifaq.html">12.2 - 各種バージョンの OpenBSD を CVSでアップデートするには</a>
</ul>

<hr>

<p>
ここでの<i>高度なユーザ</i>というのは、Unix系 OS の利用と管理についての
実地の知識を持っている人のことです。このページにあることを、
何をしているかきちんと理解しないで実行すると、
システムのオペレーションで問題が生じることもあります。


<p>
<a name= "IDEDMA">
<a name= "12.1"></a>
<h2>12.1 - IDE ディスクで DMA アクセスを強制する</h2>

<p>
PCI IDE コードは、あなたの使っているチップセットを知らないかも知れません。
その場合には以下のようなメッセージが表示されます。

<blockquote><pre>
pciide0: DMA, (unused)
</pre></blockquote>

<p>
このメッセージが出たら、カーネルの config ファイルで、pciide のエントリに
'flags 0x0001' と入れて DMA モードを強制してみる手があります。
それだと以下のような感じになになります。

<blockquote><pre>
pciide* at pci ? dev ? function ? flags 0x0001
</pre></blockquote>

<p>
このようにすると、pciide コードはあなたのチップセットでのやり方を本当に知っているか
どうかにはおかまいなしに、DMA モードを使用します。それでも、この方法で、システムが
起動時に fsck とその他起動プロセスを突破することができれば、この方法はおそらくずっと
使用できるでしょう。しかし、これが失敗して、ブート直後にシステムがハングしたりパニック
したりするようなら、(まだ、あなたのチップセットのサポートが追加されるまで) DMA モード
は使用できません。もし、あなたの PCI-IDE コントローラのチップセットの完全な
ドキュメンテーションを見つけた場合には、それは PCI-IDE コードでサポートするための
出発点として最適なものであるというのをお忘れなく。メーカの web サイトを見たり、
電話をかけたりしてみてください。もし、その PCI-IDE コントローラがマザーボードの
一部なら、そのチップセットを作ったのが誰かを調べて、彼らのリソースを
調べてみましょう !

<p>
以下のようなメッセージが表示されたら、DMA サポートは有効になったと
いうことです。

<blockquote><pre>
cd0(pciide0:1:0): using PIO mode 3, DMA mode 1
</pre></blockquote>

<p>
これはつまり、pciide0、channel 1、drive 0 (これは ATAPI CD-ROM
のようです) が DMA データ転送を使用しているということなのです。


<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ の目次]</a>
<a href= "faq11.html">[11 章 - パフォーマンスのチューニング]</a>
<a href= "faq13.html">[13 章 - IPsec]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq12.html,v 1.35 ]
<br>
$Translation: faq12.html,v 1.14 2003/06/22 19:50:52 toshi Exp $
<br>
$OpenBSD: faq12.html,v 1.14 2003/06/27 21:20:01 jufi Exp $
</small>
</body>
</html>
