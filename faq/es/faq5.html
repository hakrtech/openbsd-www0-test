<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>5 - C&oacute;mo crear un n&uacute;cleo personalizado</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta http-equiv="Content-Language" content="es">
<meta name="resource-type" content="documento">
<meta name="description"   content="Preguntas Frecuentes de OpenBSD">
<meta name="keywords"      content="openbsd,faq,documentación">
<meta name="distribution"  content="global">
<meta name="copyright"     content="Este documento es copyright 1998-2003 de OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000">
<!-- máx 72 caracteres por línea -->

<img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif">
<p>
<h2><font color="#e00000">5 - C&oacute;mo crear un n&uacute;cleo del
sistema (<em>kernel</em>) desde el c&oacute;digo fuente:<br>
configuraci&oacute;n, compilaci&oacute;n e instalaci&oacute;n del
n&uacute;cleo</font></h2>
<hr>

<p>
<h3>&Iacute;ndice de contenidos</h3>
<ul>
<li><a href="#Flavors">5.1 - &laquo;Sabores&raquo; de OpenBSD.</a>
<li><a href="#Why">5.2 - &iquest;Qu&eacute; finalidad puede tener un
n&uacute;cleo personalizado?</a>
<li><a href="#Options">5.3 - Opciones de configuraci&oacute;n del
n&uacute;cleo.</a>
<li><a href="#Building">5.4 - C&oacute;mo crear un n&uacute;cleo
personalizado.</a>
<li><a href="#BootConfig">5.5 - C&oacute;mo configurar el n&uacute;cleo
durante el arranque del sistema.</a>
<li><a href="#VerboseBoot">5.6 - C&oacute;mo obtener m&aacute;s
informaci&oacute;n durante el arranque.</a>
<li><a href= "#config">5.7 - Uso de config(8) para efectuar cambios en
el binario del n&uacute;cleo.</a>
</ul>
<hr>
<br>


<a name="Flavors"></a>
<h2>5.1 - &laquo;Sabores&raquo; de OpenBSD</h2>

Existen tres &laquo;sabores&raquo; de OpenBSD:
<ul>
<li><b>-release:</b> La <b>versi&oacute;n final</b> de OpenBSD que se
hace p&uacute;blica cada seis meses en CD.
<li><b>-stable:</b> La <b>versi&oacute;n estable</b>, una
revisi&oacute;n de la versi&oacute;n final que contiene todos los
parches que se consideran cr&iacute;ticos para la seguridad y fiabilidad
del sistema.
<li><b>-current:</b> La <b>versi&oacute;n en desarrollo</b> de OpenBSD,
que acabar&aacute; convirti&eacute;ndose en la pr&oacute;xima
versi&oacute;n final.
</ul>

He aqu&iacute; un gr&aacute;fico de estos sabores:

<blockquote>
<pre>
       ,------o-----------o----X                    2.9 Stable
       |      .           .
       |      .    ,------o---------o----X          3.0 Stable
       |      .    |      .         .
       |      .    |      .    ,----o----------o--&gt; 3.1 Stable
       |      .    |      .    |    .          .
       |      .    |      .    |    .    ,-----o--&gt; 3.2 Stable
       |      .    |      .    |    .    |     .
       |      .    |      .    |    .    |     .
 --&gt;2.9Rel-----&gt;3.0Rel-----&gt;3.1Rel-----&gt;3.2Rel----&gt; Current

          Time ---&gt;
</pre>
</blockquote>

<p>
El &aacute;rbol del c&oacute;digo se divide entre las ramas
<i>-current</i>, <i>-release</i> y <i>-stable</i> cada seis meses;
<i>-release</i>, la versi&oacute;n final, es el punto de
congelaci&oacute;n de la historia del desarrollo del &aacute;rbol de
fuentes, nunca sufre cambios y es el c&oacute;digo que se incluye en los
<a href="../../es/orders.html">CD</a> y en los
<a href="../../es/ftp.html">servidores de FTP</a>.
<i>-current</i>, la versi&oacute;n en desarrollo, es el &aacute;rbol del
c&oacute;digo en el que se efect&uacute;an todos los cambios, y pasa a
ser la pr&oacute;xima versi&oacute;n final (<i>-release</i>) de OpenBSD
pasados seis meses.

<p>
<i>-stable</i>, la versi&oacute;n estable tambi&eacute;n conocida como
&laquo;rama de parches&raquo;, es una revisi&oacute;n de la
&uacute;ltima versi&oacute;n final, <i>-release</i>, o lo que es lo
mismo una ramificaci&oacute;n del c&oacute;digo principal de OpenBSD.
Seg&uacute;n van apareciendo reparaciones importantes en la
versi&oacute;n en desarrollo, estas reparaciones se
&laquo;retro-portan&raquo; a las versiones estables.  En el
gr&aacute;fico anterior las l&iacute;neas verticales de puntos
representan reparaciones de errores que son incorporadas en las
versiones estables.  En el ejemplo tambi&eacute;n se puede observar que
la versi&oacute;n <i>2.9-stable</i> finaliz&oacute; con la
versi&oacute;n <i>3.1-release</i>, y que la versi&oacute;n
<i>3.0-stable</i> finaliz&oacute; con la versi&oacute;n
<i>3.2-release</i>.  El soporte para las versiones antiguas s&oacute;lo
se contin&uacute;a durante dos versiones.  Para continuar con el soporte
de versiones antiguas se necesita tiempo y recursos, y aunque
querr&iacute;amos ofrecer soporte continuado para versiones antiguas,
preferimos centrarnos en el desarrollo de nuevas funcionalidades.  La
versi&oacute;n estable es, por su dise&ntilde;o, muy f&aacute;cil de
compilar e instalar partiendo desde la versi&oacute;n final de la misma
versi&oacute;n (o sea, desde <i>3.2-release</i> a <i>3.2-stable</i>).

<p>
La revisi&oacute;n estable (<i>-stable</i>) es, en realidad, la
versi&oacute;n final (<i>-release</i>) m&aacute;s los parches que
aparecen en la <a href="../../es/errata.html">p&aacute;gina de
erratas</a>, adem&aacute;s de algunas peque&ntilde;as reparaciones que
no merecen una entrada en esa p&aacute;gina.  Generalmente, la
operaci&oacute;n en la que se basa el paso de <i>-release</i>
est&aacute; basado en <i>-stable</i>.  Si las
<a href="http://www.openbsd.org/cgi-bin/man.cgi">p&aacute;ginas
del manual</a> tienen que cambiar es probable que no aparezcan en
<i>-stable</i>.  En otras palabras, el soporte de nuevos dispositivos NO
se a&ntilde;ade a <i>-stable</i>, y el soporte de nuevas funcionalidades
s&oacute;lo se a&ntilde;ade en raras ocasiones, cuando se considera que
el cambio es muy importante.

<p>
Aviso:  <i>-current</i> es el c&oacute;digo de la versi&oacute;n en
cont&iacute;nuo desarrollo.  Los cambios se producen casi cada minuto y
puede cambiar varias veces durante el tiempo que alguien tarda en
bajarse el c&oacute;digo fuente.  Con el c&oacute;digo de esta
versi&oacute;n en desarrollo no es posible asegurar que la
compilaci&oacute;n del c&oacute;digo vaya a funcionar siempre (aunque
siempre queda la esperanza).  Bajarse el c&oacute;digo fuente de la
versi&oacute;n en desarrollo y que falle la compilaci&oacute;n en un
momento dado y que, cinco minutos m&aacute;s tarde s&iacute; que
funcione, es algo bastante frecuente.  <b>Si no se est&aacute; preparado
para esto es aconsejable no utilizar <i>-current</i>.</b>

<p>
Las versiones que la mayor&iacute;a de usuarios deben utilizar son
<i>-stable</i> o <i>release</i>.  Aunque hay muchos usuarios que
utilizan <i>-current</i> en sus sistema de producci&oacute;n, y es
importante que los usuarios expertos lo hagan para as&iacute; poder
identificar errores y para probar el funcionamiento de las nuevas
funcionalidades.  Sin embargo, los usuarios que no sepan c&oacute;mo
describir, diagnosticar y tratar correctamente un problema, no deben
utilizar <i>-current</i>.  Decir que algo &laquo;no ha funcionado&raquo;
no es un <a href="../../es/report.html#bugtypes">informe &uacute;til</a>
para los desarrolladores.

<p>
Hay ocasiones en los que un usuario &laquo;normal&raquo; querr&aacute;
ponerse al l&iacute;mite e instalar <i>-current</i>, en especial cuando
el usuario tenga un dispositivo para el que no exista soporte en la
versi&oacute;n final (y por lo tanto tampoco en la versi&oacute;n
estable), o necesite alguna funcionalidad nueva de la versi&oacute;n en
desarrollo.  En este caso en el que las &uacute;nicas opciones son las
de instalar la versi&oacute;n en desarrollo o no utilizar el
dispositivo, la primera puede ser vista como un mal menor, pero entonces
no se puede esperar ayuda de los desarrolladores.

<h3>Las versiones preliminares (<i>snapshots</i>)</h3>

<p>
Entre una versi&oacute;n final de OpenBSD y la siguiente, el proyecto
saca versiones preliminares o instant&aacute;neas, (<i>snapshots</i>), y
las pone en los <a href="../../es/ftp.html">servidores de FTP</a>.
Estas versiones preliminares son versiones que se preparan con todo el
c&oacute;digo existente en el &aacute;rbol de fuentes en el instante en
el que el desarrollador coge una copia del c&oacute;digo para una
plataforma en concreto.  Hay que tener en cuenta que, en algunas
plataformas, esto puede significar D&Iacute;as antes de que la
versi&oacute;n instant&aacute;nea sea recogida y disponible para su
distribuci&oacute;n.  No se puede asegurar que las versiones
instant&aacute;neas sean totalmente funcionales, ni siquiera que se
instalen correctamente.  La raz&oacute;n detr&aacute;s de la
distribuci&oacute;n de estas versiones suele ser que haya un cambio para
el que se necesiten informes de pruebas.  En algunas plataformas hay
versiones instant&aacute;neas que se recopilan casi a diario, mientras
que en otras es mucho menos frecuente.  Para alguien que quiera instalar
<i>-current</i> por alg&uacute;n motivo espec&iacute;fico, es muy
probable que s&oacute;lo sea necesario un <i>snapshot</i>, y actualizar
el sistema con un <i>snapshot</i> es un buen comienzo antes de intentar
compilar <i>-current</i>.

<p>
Una precuenta frecuente es si se puede obtener una copia del
c&oacute;digo exacto que se ha usado para recopilar una versi&oacute;n
instant&aacute;nea.  La respuesta es no.  Esto no tiene ning&uacute;n
beneficio significativo, y adem&aacute;s las versiones
instant&aacute;neas se recopilan cuando hay tiempo y recursos
disponibles para hacerlo.  Se pueden recopilar varios <i>snapshots</i>
en un mismo d&iacute;a para una plataforma veloz, y tardar una semana o
incluso m&aacute;s en recopilar un solo <i>snapshot</i> en una
plataforma lenta.  La inclusi&oacute;n de marcas o etiquetado en el
&aacute;rbol de fuentes para cada uno de los <i>snapshot</i> no
ser&iacute;a pr&aacute;ctico.

<h3>Sincronizaci&oacute;n del sistema</h3>

<p>
Es importante que quede claro que OpenBSD es un sistema operativo que
debe ser utilizado al completo, no un n&uacute;cleo para un sistema con
unas cuantas utilidades integradas.  Hay que asegurarse de que los
&aacute;rboles del n&uacute;cleo del sistema, del modo de usuario
(<em>userland</em>, las utilidades y archivos de soporte) y de los
<a href="../../es/ports.html">portes</a> est&eacute;n sincronizados en
todo momento, o de lo contrario nos estaremos exponiendo a problemas
nada agradables.  Dicho de otra forma (debido a que algunos usuarios
siguen cometiendo este error), no es posible tener un &aacute;rbol de
<tt>portes</tt> nuevo funcionando sobre un sistema que ya tenga un mes
de tiempo, ni se puede recomponer un n&uacute;cleo del sistema con el
c&oacute;digo fuente de <em>-current</em> y esperar que funcione con un
sistema de la versi&oacute;n <em>-release</em>.  Esto implica que
ser&iacute;a necesario actualizar todo el sistema si se quisiera
utilizar un nuevo programa que acabara de ser a&ntilde;adido al
&aacute;rbol de fuentes.  Los sentimos, pero OpenBSD dispone de unos
recursos limitados.

<p>
Tambi&eacute;n es importante que quede claro que, cuando se lleva a cabo
una <a href="upgrade-minifaq.html">actualizaci&oacute;n mediante el
c&oacute;digo fuente</a>, el soporte para el proceso de
actualizaci&oacute;n existe en <b>una sola direcci&oacute;n:  de una
versi&oacute;n a otra m&aacute;s reciente</b>, y desde <i>-stable</i> a
<i>-current</i>.  No se puede instalar una <i>3.2-current</i> (o un
<i>snapshot</i>) y luego decidir que es demasiado inestable y pretender
volver a una versi&oacute;n <i>3.2-stable</i>, y esperar para ello
soporte o asistencia por parte de los desarrolladores.  Si alguien elige
un camino distinto debe esperar ninguna ayuda que no sea para reinstalar
el sistema desde cero, y no puede esperar ninguna ayuda del equipo de
desarrolladores de OpenBSD.

<p>
As&iacute; pues, antes de que cualquier usuario se decida a usar la
versi&oacute;n <i>-current</i> es aconsejable que se lo piense bien.


<p>
<a name="Why"></a>
<a name="5.1"></a>
<h2>5.2 - &iquest;Qu&eacute; finalidad puede tener un n&uacute;cleo
personalizado?</h2>

<p>
Existen varias razones por las que un usuario puede decidirse a
personalizar el n&uacute;cleo, aunque esta pr&aacute;ctica es
s&oacute;lo recomendable para aquellos usuarios que tengan un buen
conocimiento general del sistema.

<ul>
  <li>Si la cantidad de memoria de RAM de la m&aacute;quina es limitada,
  se puede conservar una buena parte de &eacute;sta eliminando los
  controladores de dispositivos que no se vayan a utilizar.
  <li>Si se desea eliminar opciones predeterminadas del sistema o
  a&ntilde;adir opciones que no est&eacute;n activadas de forma
  predeterminada.
  <li>Si se desea activar opciones experimentales.
</ul>

<p>
Para la mayor&iacute;a de casos NO ser&aacute; necesario compilar un
n&uacute;cleo personalizado.  El n&uacute;cleo GENERIC contiene todo lo
que el usuario puede necesitar.  Lo cierto es que existen algunos
motivos para no crear un n&uacute;cleo personalizado, y el principal es
que es muy f&aacute;cil aplicar cambios a la configuraci&oacute;n del
n&uacute;cleo que aparentan ser l&oacute;gicos pero que no funcionan.
Esto debe ser considerado como una se&ntilde;al de aviso, si algo en el
sistema no funciona correctamente con el nuevo n&uacute;cleo se debe
probar con el n&uacute;cleo GENERIC antes de enviar un informe sobre el
error.  Los desarrolladores, por regla general, ignorar&aacute;n los
informes de errores con n&uacute;cleos pesonalizados a menos que el
problema tambi&eacute;n pueda ser reproducido con un n&uacute;cleo
GENERIC.

<p>
<a name="Options"></a>
<a name="5.2"></a>
<h2>5.3 - Opciones de configuraci&oacute;n del n&uacute;cleo.</h2>

<p>
Las Opciones de Configuraci&oacute;n del N&uacute;cleo son las opciones
que se pueden a&ntilde;adir a la configuraci&oacute;n del n&uacute;cleo
para incluir ciertas funcionalidades en el n&uacute;cleo del sistema.
De este modo es posible obtener el tipo exacto de soporte deseado, sin
el soporte de aquellos dispositivos que sean innecesarios para el
usuario.  Existe una gran cantidad de opciones que nos permiten
personalizar el n&uacute;cleo, pero aqu&iacute; s&oacute;lo explicaremos
algunas de ellas, las que se usan con m&aacute;s frecuencia.  En la
p&aacute;gina del manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a>
hay una lista de opciones m&aacute;s completa.  Tambi&eacute;n se pueden
ver los ficheros de configuraci&oacute;n de muestra para ver ejemplos
disponibles para cada arquitectura.

<p>
Hay muchas opciones del n&uacute;cleo en las que no se ha verificado la
compatibilidad con el resto de opciones, por lo que es aconsejable no
incluir una opci&oacute;n a menos que se tenga una buena raz&oacute;n
para hacerlo.  El fichero de configuraci&oacute;n del n&uacute;cleo
sobre el que se han realizado m&aacute;s verificaciones es el
n&uacute;cleo GENERIC.  &Eacute;ste suele ser una combinaci&oacute;n de
las opciones disponibles en
<tt>/usr/src/sys/arch/`arch -s`/conf/GENERIC</tt> y en
<tt>/usr/src/sys/conf/GENERIC</tt>. 

<p>
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/alpha/conf/">Ficheros de configuraci&oacute;n del n&uacute;cleo de Alpha.</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/i386/conf/">Ficheros de configuraci&oacute;n del n&uacute;cleo de i386.</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/macppc/conf/">Ficheros de configuraci&oacute;n del n&uacute;cleo de macppc.</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/sparc/conf/">Ficheros de configuraci&oacute;n del n&uacute;cleo de sparc.</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/sparc64/conf/">Ficheros de configuraci&oacute;n del n&uacute;cleo de sparc64.</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/vax/conf/">Ficheros de configuraci&oacute;n del n&uacute;cleo de vax.</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/">Otras
arquitecturas.</a>
</ul>

<p>
Si nos fijamos en estos ficheros podremos ver una l&iacute;nea como:<br>
<strong>include "../../../conf/GENERIC"</strong><br>
Esto quiere decir que hace referencia a otro fichero de
configuraci&oacute;n.  Este fichero contiene las opciones que son
independientes de la arquitectura.  As&iacute; pues, cuando estemos
creando nuestra propia configuraci&oacute;n del n&uacute;cleo debemos
asegurarnos de mirar la configuraci&oacute;n de
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/conf/GENERIC">/sys/conf/GENERIC</a> 
y ver qu&eacute; opciones queremos.  Ah&iacute; hay opciones que <b>son
necesarias</b>.

<p>
Todas las opciones que aparecen a continuaci&oacute;n se deben incluir
en el fichero de configuraci&oacute;n del n&uacute;cleo en el siguiente
formato:<br>
<strong>option      OPCI&Oacute;N</strong><br>
Por ejemplo, para incluir la opci&oacute;n <tt>debug</tt> en el
n&uacute;cleo, hay que a&ntilde;adir la siguiente l&iacute;nea:<br>
<strong>option	    DEBUG</strong><br>
Las opciones que se incluyan en el n&uacute;cleo de OpenBSD ser&aacute;n
traducidas en opciones del preprocesador del compilador, y por
consiguiente una opci&oacute;n como <tt>DEBUG</tt> se compilar&iacute;a
con la opci&oacute;n <tt>-DDEBUG</tt>, lo que es equivalente a incluir
un <tt>#define DEBUG</tt> en todo el n&uacute;cleo.

<p>
OpenBSD dispone de muchas opciones de compatibilidad que permiten el uso
de binarios de otros sistemas operativos.  No todas estas opciones
est&aacute;n disponibles para cada una de las arquitecturas, por lo que
es necesario leer la p&aacute;gina del manual de cada opci&oacute;n para
asegurarse de que exista soporte en la arquitectura en cuesti&oacute;n.

<p>
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_svr4&amp;sektion=8">COMPAT_SVR4(8)</a> 
  - Compatibilidad con binarios de SVR4.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_bsdos&amp;sektion=8">COMPAT_BSDOS(8)</a> 
  - Compatibilidad con binarios de BSD/OS.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_linux&amp;sektion=8">COMPAT_LINUX(8)</a> 
  - Compatibilidad con binarios de Linux.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_sunos&amp;sektion=8">COMPAT_SUNOS(8)</a> 
  - Compatibilidad con binarios de SunOS.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_ultrix&amp;sektion=8">COMPAT_ULTRIX(8)</a> 
  - Compatibilidad con binarios de Ultrix.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_freebsd&amp;sektion=8">COMPAT_FREEBSD(8)</a> 
  - Compatibilidad con binarios de FreeBSD.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_hpux&amp;sektion=8">COMPAT_HPUX(8)</a> 
  - Compatibilidad con binarios de HP-UX.  S&oacute;lo disponible en
    algunas m&aacute;quinas m68k.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_ibcs2&amp;sektion=8">COMPAT_IBCS2(8)</a> 
  - Compatibilidad para ejecutar binarios de ibcs2.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_osf1&amp;sektion=8">COMPAT_OSF1(8)</a> 
  - Compatibilidad para ejecutar binarios de Digital Unix.  S&oacute;lo
    disponible en la plataforma Alpha.
<li>COMPAT_43 
  - Compatibilidad con 4.3BSD.  No se recomienda su uso, pero es
    necesaria para algunas aplicaciones.
<li>COMPAT_11 
  - Compatibilidad con NetBSD 1.1.
<li>COMPAT_NOMID 
 - Compatibilidad con los ejecutables a.out sin identificador de
   m&aacute;quina.
</ul>

<p>
La posibilidad de depurar problemas con el n&uacute;cleo siempre es de
gran ayuda, pero muchos usuarios prefieren no incluir las opciones de
depurado en sus n&uacute;cleos debido a que son de un tama&ntilde;o
considerable.  Sin embargo estas opciones son de extrema utilidad en el
caso en que exista un error.  Con la informaci&oacute;n obtenida por
medio de estas opciones los desarrolladores pueden descubrir el origen
de nuestros problemas de forma m&aacute;s r&aacute;pida.  He aqu&iacute;
una lista de opciones de depurado que se pueden a&ntilde;adir a la
configuraci&oacute;n del n&uacute;cleo:

<p>
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ddb&amp;sektion=4">DDB(4)</a>
  - Compila el depurador interno del n&uacute;cleo.  No est&aacute;
    disponible para todas las plataformas.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gdb&amp;sektion=7">KGDB(7)</a>
  - Compila un depurador del n&uacute;cleo remoto, usando la
    funcionalidad `remote target` de gdb.
<li>makeoptions  DEBUG="-g"
  - Compila bsd.gdb junto con bsd.  Es &uacute;til para depurar volcados
    con gdb.
<li>DEBUG
  - Se usa para incluir varias opciones de depurado en el n&uacute;cleo,
    en donde el c&oacute;digo las defina.
<li>KTRACE
  - A&ntilde;ade ganchos para la facilidad de rastreo de llamadas al
    sistema, lo que permite que los usuarios puedan utilizar
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ktrace&amp;sektion=1">ktrace(1)</a>.
<li>DIAGNOSTIC
  - A&ntilde;ade al n&uacute;cleo c&oacute;digo para comprobaciones de
    consistencia interna.
<li>GPROF
  - A&ntilde;ade al n&uacute;cleo c&oacute;digo para la
    perfilaci&oacute;n del n&uacute;cleo con
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kgmon&amp;sektion=8">kgmon(8)</a>.
<li>makeoptions PROF="-pg"
  - El indicador <tt>-pg</tt> hace que el n&uacute;cleo se compile con
    soporte para la perfilaci&oacute;n.  Se requiere la opci&oacute;n
    <tt>GPROF</tt> para el uso de esta opci&oacute;n.
</ul>

<p>
<strong>Opciones del Sistema de Archivos</strong>
<ul>
<li>FFS - Berkeley Fast Filesystem <strong>NOTA:</strong> opci&oacute;n
requerida.
<li>EXT2FS - Second Extended File System.  Necesaria para leer
particiones de Linux.
<li>MFS - Memory File System.  Almacena archivos en la memoria de
intercambio (<em>swap</em>).
<li>NFS - Network File System.  Necesaria para el uso del sistema de
archivos de red (NFS).
<li>CD9660 - iso9660 + rockridge filesystem.  Necesaria para leer los
CD.
<li>MSDOSFS - Necesaria para leer sistemas de archivos MS-DOS FAT.
Tambi&eacute;n tiene soporte para nombres largos de Windows 95 +
extensiones de caso mixto.
<li>FDESC - Un sistema de archivos que se puede montar en /dev/fd.
<li>KERNFS - Permite el montaje de un sistema de archivos especial (que
se suele montar en /kern) en el que se puede encontrar archivos que
representan variables y par&aacute;metros del n&uacute;cleo.
<li>NULLFS - Loopback filesystem.  M&aacute;s informaci&oacute;n en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_null&amp;sektion=8">mount_null(8)</a>.
<li>PROCFS - Un sistema de archivos especial (que se monta en /proc de
forma convencional).
<li>PORTAL - Portal file system (experimental).  Permite algunos trucos
interesantes, como la apertura de conectores (<em>sockets</em>) TCP
abriendo archivos en el sistema de archivos.
<li>UMAPFS - Un sistema de archivos de loopback en el que se pueden
reasignar los identificadores de usuario y grupo.  Puede se &uacute;til
cuando se monten sistemas de archivos extra&ntilde;os con
identificadores de usuario (uid) y grupo (gid) diferentes al del sistema
local (v.g. NFS remoto).
<li>UNION - Union file system.  Permite montar un directorio encima de
otro, de un modo tal que ambos sistemas de archivos sean visibles.  Este
c&oacute;digo todav&iacute;a no es estable.
<li>XFS - A&ntilde;ade ganchos para el uso de un sistema de archivos
compatible con el sistema de archivos de AFS.  Es el utilizado por el
c&oacute;digo de Arla/AFS.
<li>FFS_SOFTUPDATES - Permite el uso de softupdates.  V&eacute;ase la
secci&oacute;n sobre <a href="faq14.html#SoftUpdates">Softupdates</a>
para m&aacute;s informaci&oacute;n.
<li>NFSSERVER - Permite la inclusi&oacute;n de c&oacute;digo de NFS de
servidor en el n&uacute;cleo.
<li>NFSCLIENT - Permite la inclusi&oacute;n de c&oacute;digo de NFS de
cliente en el n&uacute;cleo.
<li>FIFO - Soporte para FIFOs.  RECOMENDADO.
<li>NVNODE=integer - En donde <tt>integer</tt> es el tama&ntilde;o del
cach&eacute; utilizado por las rutinas de traducci&oacute;n de nodo-i a
nombre (tambi&eacute;n es conocido como <em>namei() chache</em>, aunque
en el c&oacute;digo del nombre recibe muchos otros nombres).
<li>EXT2FS_SYSTEM_FLAG - Esta opci&oacute;n cambia el comportamiento de
los indicadores <tt>APPEND</tt> e <tt>IMMUTABLE</tt> por un fichero en
un sistema de archivos EXT2FS.  V&eacute;ase
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a>
para m&aacute;s detalles.
<li>QUOTA -  Filesystem Quotas.  Para m&aacute;s informaci&oacute;n sobre
el uso de cuotas v&eacute;ase la secci&oacute;n sobre
<a href="faq10.html#Quotas">Cuotas</a>.
</ul>


<strong>Opciones miscel&aacute;neas</strong>
<ul>
<li>PCIVERBOSE - Fuerza al proceso de arranque a dar m&aacute;s
informaci&oacute;n sobre perif&eacute;ricos PCI.
<li>EISAVERBOSE - Fuerza al proceso de arranque a dar m&aacute;s
informaci&oacute;n sobre perif&eacute;ricos EISA.
<li>PCMCIAVERBOSE - Fuerza al proceso de arranque a dar m&aacute;s
informaci&oacute;n sobre perif&eacute;ricos PCMCIA.
<li>APERTURE - Soporte integrado en el n&uacute;cleo para la
asignaci&oacute;n de <em>framebuffer</em> VGA por los procesos de
usuario.  Necesario para la ejecuci&oacute;n del X Window System.
<li>LKM - Soporte para M&oacute;dulos Cargables del N&uacute;cleo
(<em>Loadable Kernel Modules</em>).  No disponible en todas las
arquitecturas.  V&eacute;ase
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lkm&amp;sektion=4">lkm(4)</a>
para m&aacute;s informaci&oacute;n.
<li>INSECURE - Fija el nivel de seguridad del n&uacute;cleo en -1.
V&eacute;ase
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&amp;sektion=8">init(8)</a>
para m&aacute;s informaci&oacute;n sobre los niveles de seguridad del
n&uacute;cleo.
<li>RAM_DISK_HOOKS - Permite que se puedan llamar funciones dependientes
de la m&aacute;quina cuando est&eacute; configurado el controlador del
<em>ramdisk</em>.
<li>RAM_DISK_IS_ROOT - Fuerza que el <em>ramdisk</em> sea <em>root</em>.
<li>CCDNBUF=integer - Determina el n&uacute;mero de memorias intermedias
componentes usadas por
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&amp;sektion=4">CCD(4)</a>.
El n&uacute;mero predeterminado es de 8.  Para m&aacute;s
informaci&oacute;n sobre CCD v&eacute;ase la p&aacute;gina del manual o
la secci&oacute;n sobre el <a href="faq11.html#ccd">Controlador de
Discos Concatenados</a>.
<li>KMEMSTATS - Hace que malloc(9), el asignador de memoria del
n&uacute;cleo, mantenga estad&iacute;sticas sobre su uso.  Si se usa la
opci&oacute;n <tt>DEBUG</tt>, esta opci&oacute;n se activar&aacute;
autom&aacute;ticamente en la configuraci&oacute;n del n&uacute;cleo.
<li>BOOT_CONFIG - Soporte para la opci&oacute;n <tt>-c</tt> de boot.
</ul>

<strong>Opciones de Red</strong><br>
V&eacute;nse tambi&eacute;n las secciones sobre Redes de los
cap&iacute;tulos <a href="faq6.html">6</a> y
<a href="faq11.html#Network">11</a> de estos documentos.

<ul>
<li>GATEWAY - Activa IPFORWARDING e incrementa el tama&ntilde;o de
NMBCLUSTERS (en la mayor&iacute;a de puertos).
<li>NMBCLUSTERS=integer - Controla el mapa de asignaci&oacute;n de
agrupaciones de mbuf.
<li>IPFORWARDING - Activa el enrutamiento de IP.  Con esta opci&oacute;n
activada la m&aacute;quina reenviar&aacute; entre sus interfaces
datagramas IP con destino a otras m&aacute;quinas.
<li>MROUTING - Incluye soporte para enrutadores IP multicast.
<li>INET - Incluye soporte para la pila del protocolo TCP/IP.
Opci&oacute;n REQUERIDA.
<li>MCLSHIFT=value - Esta opci&oacute;n es el logaritmo en base 2 del
tama&ntilde;o de agrupaciones de mbuf.  V&eacute;ase
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a>
para m&aacute;s informaci&oacute;n sobre esta opci&oacute;n.
<li>NS - Incluye soporte para la pila del protocolo XNS de Xerox.
V&eacute;ase
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ns&amp;sektion=4">ns(4)</a>
para m&aacute;s informaci&oacute;n.
<li>ISO,TPIP - Incluye soporte para la pila del protocolo OSI.
V&eacute;ase
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iso&amp;sektion=4">iso(4)</a>
para m&aacute;s informaci&oacute;n.
<li>EON - Incluye soporte para t&uacute;neles de OSI sobre IP.
<li>CCITT,LLC,HDLC - Incluye soporte para la pila del protocolo X.25.
<li>IPX, IPXIP - Incluye soporte para el protocolo de Intercambio de
Paquetes de Internet (<em>Internetwork Packet Exchange</em>) utilizado
por Novell NetWare.
<li>NETATALK - Incluye soporte en el n&uacute;cleo para la familia de
protocolos de AppleTalk.
<li>TCP_COMPAT_42 - Se recomienda NO usar esta opci&oacute;n, por lo que
no se deber&iacute;a activar.  Compatibilidad de errores de TCP con
4.2BSD.  In 4.2BSD los n&uacute;meros de secuencia de TCP eran valores
firmados de 32 bits.  La implementaciones modernas de TCP usan valores
no firmados.
<li>TCP_NEWRENO - Activa la fase de recuperaci&oacute;n r&aacute;pida de
NewReno, que permite recuperar un segmento perdido por vuelta completa.
<li>TCP_SACK - Activa los reconocimientos selectivos.
<li>TCP_FACK - Activa los reconocimientos de reenv&iacute;o, lo que
permite una estimaci&oacute;n m&aacute;s precisa de datos restantes
durante la fase de recuperaci&oacute;n r&aacute;pida mediante el uso de
informaci&oacute;n SACK.  Esta opci&oacute;n se puede usar junto con la
de TCP_SACK.
<li>PPP_FILTER - Activa el filtrado basado en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcap&amp;sektion=3">pcap(3)</a>
para conexiones ppp.
<li>PPP_BSDCOMP - Compresi&oacute;n BSD de PPP.
<li>PPP_DEFLATE - Usado en conjunci&oacute;n con PPP_BSDCOMP.
<li>IPSEC - Activa el soporte del protocolo de seguridad de IP.
V&eacute;ase
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4">ipsec(4)</a>
para m&aacute;s detalles sobre este protocolo.  Esto implica la
opci&oacute;n <tt>KEY</tt>, que da soporte para PFKEYv2.
<li>ENCDEBUG - Activa el registro de la informaci&oacute;n de depurado
siempre que IPSEC encuentre errores.
</ul>

<strong>Opciones del Subsistema SCSI</strong>
<ul>
<li>SCSITERSE - Mensajes de error de Terser SCSI.  Omite la tabla para
descodificar informaci&oacute;n ASC/ASCQ, ahorrando unos 8 bytes.
<li>SCSIDEBUG - Muestra informaci&oacute;n adicional del depurado del
subsistema SCSI.
</ul>


<p> 
<a name="Building"></a>
<a name="5.3"></a>
<h2>5.4 - C&oacute;mo crear un n&uacute;cleo personalizado.</h2>

<p>
Las instrucciones completas para la creaci&oacute;n de un n&uacute;cleo
personalizado se encuentran en la p&aacute;gina del manual de
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8">afterboot(8)</a>.

<p>
Para recomponer un n&uacute;cleo desde el cdrom el primer paso es
disponer del c&oacute;digo fuente.  El c&oacute;digo fuente se puede
encontrar en el <a href="../../es/orders.html">CD oficial</a> (disco 3)
o en los <a href="../../es/ftp.html">servidores de FTP</a>.  Para el
siguiente ejemplo asumiremos que el CD3 ya est&aacute; montado en /mnt:

<blockquote>
<pre>
# <strong>cd /usr/src</strong>
# <strong>tar xvzf /mnt/src.tar.gz</strong>
</pre>
</blockquote>

<p>
<b>Nota:</b>  Si se va a obtener desde los servidores de FTP, se
encontrar&aacute;n dos archivos, <i>src.tar.gz</i> y
<i>srcsys.tar.gz</i>.  El primero es el &laquo;modo de usuario&raquo;
(<em>userland</em>), todo excepto el n&uacute;cleo del sistema;  el
segundo es el c&oacute;digo fuente del n&uacute;cleo.  Estos archivos
hay que extraerlos como se indica arriba, y la mayor&iacute;a de
usuarios necesitar&aacute;n tener ambos.  En el CDROM estos dos archivos
est&aacute;n en uno solo.

<p>
A continuaci&oacute;n, para personalizar el n&uacute;cleo es m&aacute;s
f&aacute;cil empezar desde el n&uacute;cleo GENERIC, que se
encontrar&aacute; en <tt>/usr/src/sys/arch/$ARCH/conf/GENERIC</tt>, en
donde $ARCH es la arquitectura de la m&aacute;quina que se vaya a usar.
En ese directorio tambi&eacute;n hay otros ejemplos de
configuraci&oacute;n disponibles.  He aqu&iacute; dos ejemplo de
compilaci&oacute;n del n&uacute;cleo.  En el primer ejemplo se
compilar&aacute; dentro de un &aacute;rbol de fuentes de s&oacute;lo
lectura, y en el segundo en un &aacute;rbol de fuentes con permiso de
escritura.

<blockquote> 
<pre>
# <strong>cd /directorio</strong>
# <strong>cp /usr/src/sys/arch/$ARCH/conf/FICHERO .</strong>
# <strong>vi FICHERO</strong>   <i>(to make the changes you want)</i>
# <strong>config -s /usr/src/sys -b . FICHERO</strong>
</pre>

seguido por:

<pre>
    # <strong>make depend</strong>
         <b><i>- O POR -</i></b>
    # <strong>make clean</strong>
# <strong>make</strong>
</pre>
</blockquote>

Cuando se haya realizado alg&uacute;n cambio en el &aacute;rbol de
fuentes (incluidos actualizaciones y parches) hay que ejecutar
'<tt>make depend</tt>' (en otras palabras, casi siempre a menos que se
necesite ejecutar '<tt>make clean</tt>').

<p>
Si se han efectuado cambios en las opciones de configuraci&oacute;n del
n&uacute;cleo, y/o se han realizado cambios importantes en el
&aacute;rbol de fuentes, se debe usar '<tt>make clean</tt>' en lugar de
'<tt>made depend</tt>'.  N&oacute;tese que siempre es m&aacute;s seguro
ejecutar 'make clean', aunque esto signifique un mayor tiempo de
compilaci&oacute;n ya que se recompilar&aacute;n m&aacute;s partes.

<p>
Para compilar un n&uacute;cleo desde dentro de un &aacute;rbol de
fuentes con permisos de escritura:

<blockquote>
<tt>
# <strong>cd sys/arch/$ARCH/conf</strong><br>
# <strong>vi FICHERO</strong><i> (para aplicar cualquier cambio deseado)<i><br>
# <strong>config FICHERO</strong><i> (m&aacute;s informaci&oacute;n en
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>)</i><br>
# <strong>cd ../compile/FICHERO</strong><br>
# <strong>make</strong> <br>
</tt>
</blockquote>

<p>
En donde $ARCH es la arquitectura de la m&aacute;quina (v.g. i386).
Tambi&eacute;n se puede ejecutar <strong>make depend</strong> para
compilar las dependencias para la pr&oacute;xima vez que se recompile el
n&uacute;cleo.

<p>
Para colocar el n&uacute;cleo en su sitio:

<blockquote>
<pre>
# <strong>cp /bsd /bsd.old</strong>
# <strong>cp /sys/arch/$ARCH/compile/FICHERO/bsd /bsd</strong>
</pre>
</blockquote>

Para usar el n&uacute;cleo antiguo durante el arranque, desde el punto
de arranque:

<blockquote>
<pre>
boot&gt; <strong>bsd.old</strong>
</pre>
</blockquote>

y se cargar&aacute; el n&uacute;cleo antiguo en lugar de /bsd.

<p>
En ocasiones, cuando se compila un nuevo n&uacute;cleo se requiere que
se instalen nuevo bloques de arranque.  La informaci&oacute;n pertinente
se encuentra en la secci&oacute;n
<a href="faq14.html#InstBoot">Instalaci&oacute;n de bloques de
arranque</a>, que ofrece un repaso sobre el uso del cargador de arranque
de OpenBSD.

<p>
<a name="BootConfig"></a>
<a name="5.4"></a> 
<h2>5.5 - C&oacute;mo configurar el n&uacute;cleo durante el arranque
del sistema.</h2>

<p>
A veces, cuando se arranca el sistema, puede que el n&uacute;cleo
encuentre un dispositivo en un IRQ err&oacute;neo y que el usuario
necesite utilizar ese dispositivo de forma urgente.  Para ello, sin
tener que recompilar el n&uacute;cleo, se puede usar la
configuraci&oacute;n del n&uacute;cleo en tiempo de arranque de OpenBSD.
De esta forma se corregir&aacute; el problema por una vez, pero cuando
se reinicie el sistema ser&aacute; necesario repetir este procedimiento.
Por lo tanto s&oacute;lo es una soluci&oacute;n temporal, y ser&aacute;
necesario recompilar el n&uacute;cleo para resolver el problema
definitivamente.  Para usar esta funcionalidad el n&uacute;cleo necesita
disponer de la opci&oacute;n <strong>option BOOT_CONFIG</strong>
compilada (el n&uacute;cleo GENERIC la tiene).

<p>
La mayor parte de la informaci&oacute;n en esta secci&oacute;n se puede
encontrar en la p&aacute;gina del manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot_config&amp;sektion=8">boot_config(8)</a>.

<p>
Para arrancar en UKC (<em>User Kernel Config</em>, la
configuraci&oacute;n del n&uacute;cleo de usuario), hay que usar la
opci&oacute;n <tt>-c</tt> durante el arranque:<br>
<small>
<em>(NdelT:  la configuraci&oacute;n del teclado espa&ntilde;ol no se
habr&aacute; activado, por lo que es necesario pulsar la tecla <b>'?'</b>
para obtener el car&aacute;cter <b>'-'</b>)</em>:
</small>

<blockquote><pre>
boot&gt; <strong>boot wd0a:/bsd -c</strong>
</pre></blockquote>

O cualquiera que sea el n&uacute;cleo con el que se quiera arrancar.
Esto nos situar&aacute; en el punto de inserci&oacute;n UKC, y desde
aqu&iacute; podremos enviar &oacute;rdenes directamente al n&uacute;cleo
especificando los dispositivos que queremos cambiar, desactivar o
activar.

<p>
He aqu&iacute; una lista de &oacute;rdenes comunes desde el punto de
UKC:

<ul>
<li><tt>add <strong>dispositivo</strong></tt> - A&ntilde;adir un
dispositivo copiando otro.
<li><tt>change <strong>numdisp | dispositivo </strong></tt> - Modificar
uno o m&aacute;s dispositivos.
<li><tt>disable <strong>numdisp | dispositivo </strong></tt> -
Desactivar uno o m&aacute;s dispositivos.
<li><tt>enable <strong>numdisp | dispositivo </strong></tt> - Activar
uno o m&aacute;s dispositivos.
<li><tt>find <strong>numdisp | dispositivo </strong></tt> - Encontrar
uno o m&aacute;s dispositivos.
<li><tt>help</tt> - Breve sumario de estas &oacute;rdenes.
<li><tt>list</tt> - Lista de TODOS los dispositivos que se conocen.
<li><tt>exit/quit</tt> - Continuar con el arranque.
<li><tt>show <strong>[atributo [valor]]</strong></tt> - Mostrar
dispositivos con cierto atributo y, opcionalmente, con un valor
especificado.
</ul>

<p>
Una vez que ya est&eacute; configurado el dispositivo se puede usar
<tt>quit</tt> o <tt>exit</tt> para continuar el proceso de arranque.
Despu&eacute;s de esto se deber&iacute;a corregir la
configuraci&oacute;n del n&uacute;cleo compilando uno nuevo.  Para ello
v&eacute;ase la secci&oacute;n sobre
<a href="faq5.html#Building">C&oacute;mo crear un n&uacute;cleo
personalizado</a>.

<p>
<a name="VerboseBoot"></a>
<a name="5.5"></a>
<h2>5.6 - C&oacute;mo obtener m&aacute;s informaci&oacute;n durante el
arranque.</h2>

La obtenci&oacute;n de una salida con m&aacute;s informaci&oacute;n
puede ser muy &uacute;til cuando se est&aacute; intentando depurar
problemas durante el arranque.  Por ejemplo, si se tiene problemas con
un disco de inicio que no arranca y se necesita m&aacute;s
informaci&oacute;n, basta con reiniciar y, desde el punto
<tt>boot&gt;</tt>, arrancar con <tt>boot -c</tt>.  Esto nos
llevar&aacute;s al punto <tt>UKC&gt;</tt>, y desde ah&iacute;:

<blockquote><pre>
UKC&gt; <strong>verbose</strong>
autoconf verbose enabled
UKC&gt; <strong>quit</strong>
</pre></blockquote>

<p>
Ahora la informaci&oacute;n que aparecer&aacute; durante el arranque
ser&aacute; muy amplia.

<p>
<a name="config"></a>
<a name="5.6"></a>
<h2>5.7 - Uso de config(8) para efectuar cambios en el binario del
n&uacute;cleo.</h2>

<p>
Las opciones <b>-e</b> y <b>-u</b> de la orden
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>
pueden ser muy &uacute;tiles y con ellas se puede evitar malgastar
tiempo compilando el n&uacute;cleo.  El indicador <b>-e</b> nos permite
entrar en el punto UKC de un sistema en ejecuci&oacute;n.  Los cambios
aplicados surtir&aacute;n efecto la pr&oacute;xima vez que se reinicie
el sistema.  El indicador <b>-u</b> comprueba si se ha llevado a cabo
alg&uacute;n cambio en el n&uacute;cleo en ejecuci&oacute;n durante el
arranque, o sea si se ha usado la orden <b>boot -c</b> para entrar en el
punto UKC durante el arranque del sistema.

<p>
El siguiente ejemplo se muestra la desactivaci&oacute;n de los
dispositivos ep* en el n&uacute;cleo.  Por seguridad se debe usar la
opci&oacute;n <b>-o</b> que graba los cambios en el fichero que se
especifique.  Por ejemplo, <strong>config -e -o bsd.new /bsd</strong>,
grabar&aacute; los cambios en bsd.new.  En el siguiente ejemplo no se
usa la opci&oacute;n <b>-o</b>, y por lo tanto se ignorar&aacute;n los
cambios y no se grabar&aacute;n en el fichero binario del n&uacute;cleo.
Para m&aacute;s informaci&oacute;n relacionada con mensajes de error y
de aviso, v&eacute;ase la p&aacute;gina del manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>.

<blockquote><pre>
$ <strong>sudo config -e /bsd</strong>
OpenBSD 3.2 (GENERIC) #25: Thu Oct  3 19:51:53 MDT 2002
    deraadt@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC
warning: no output file specified
Enter 'help' for information
ukc&gt; ?
        help                            Command help list
        add         dev                 Add a device
        base        8|10|16             Base on large numbers
        change      devno|dev           Change device
        disable     attr val|devno|dev  Disable device
        enable      attr val|devno|dev  Enable device
        find        devno|dev           Find device
        list                            List configuration
        lines       count               # of lines per page
        show        [attr [val]]        Show attribute
        exit                            Exit, without saving changes
        quit                            Quit, saving current changes
        timezone    [mins [dst]]        Show/change timezone
        nmbclust    [number]            Show/change NMBCLUSTERS
        cachepct    [number]            Show/change BUFCACHEPERCENT
        nkmempg     [number]            Show/change NKMEMPAGES
        shmseg      [number]            Show/change SHMSEG
        shmmaxpgs   [number]            Show/change SHMMAXPGS
ukc&gt; <strong>list</strong>
  0 audio* at sb0|sb*|gus0|pas0|sp0|ess*|wss0|wss*|ym*|eap*|eso*|sv*|neo*|cmpci*
|clcs*|clct*|auich*|autri*|auvia*|fms*|uaudio*|maestro*|esa*|yds*|emu* flags 0x0
  1 midi* at sb0|sb*|opl*|opl*|opl*|opl*|ym*|mpu*|autri* flags 0x0
  2 nsphy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
  3 nsphyter* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|
vr*|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep
*|ep*|ep* phy -1 flags 0x0
  4 qsphy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
  5 inphy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
  6 iophy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
  7 eephy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
  8 exphy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
[...snip...]
ukc&gt; <strong>disable ep</strong>
 65 ep0 disabled
 66 ep* disabled
 67 ep* disabled
149 ep0 disabled
150 ep0 disabled
151 ep* disabled
152 ep* disabled
202 ep* disabled
ukc&gt; <strong>quit</strong>
not forced
</pre></blockquote>

<p>
En el ejemplo anterior, se han desactivado en el n&uacute;cleo todos los
dispositivos ep*, y ya no se sondear&aacute;n.  Es posible que en
alg&uacute;n caso en el que se haya usado el punto UKC durante el
arranque, mediante <b>boot -c</b>, el usuario necesite grabar los
cambios de forma permanente.  Para ello deber&aacute; usar la
opci&oacute;n <b>-u</b>.  En el ejemplo siguiente se ha arrancado la
m&aacute;quina en el punto de inserci&oacute;n UKC, y se ha desactivado
el dispositivo wi(4).  Como los cambios realizados mediante <b>boot
-c</b> NO son permamentes, hay que grabarlos.  En este ejemplo, los
cambios realizados desde <b>boot -c</b>, se grabar&aacute;n en un nuevo
fichero binario del n&uacute;cleo, <tt>bsd.new</tt>.

<blockquote><pre>
$ <strong>sudo config -e -u -o bsd.new /bsd</strong>
OpenBSD 3.2 (GENERIC) #25: Thu Oct  3 19:51:53 MDT 2002
    deraadt@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC
Processing history...
105 wi* disabled
106 wi* disabled
Enter 'help' for information
ukc&gt; <strong>quit</strong>
</pre></blockquote>


<p>
<font color=#0000e0">
<a href="index.html">[Volver al &iacute;ndice principal]</a>
<a href="faq4.html">[Cap&iacute;tulo 4 - Gu&iacute;a de instalaci&oacute;n]</a>
<a href="faq6.html">[Cap&iacute;tulo 6 - Redes]</a>
</font>

<hr>
<a href="index.html"><img height="24" width="24" src="../../images/back.gif" border="0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq5.html,v 1.78 2003/02/28 00:34:28 nick Exp ]<br>
$Translation: faq5.html,v 1.41 2003/03/01 11:24:49 horacio Exp $<br>
$OpenBSD: faq5.html,v 1.35 2003/03/01 18:08:38 jufi Exp $
</small>
</body>
</html>
