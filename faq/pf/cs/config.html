<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Konfigurace</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
<meta name="copyright"     content="This document copyright 2003 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif">
<p>
[<a href="index.html">Obsah</a>]
[<a href="macros.html">Dále: Seznamy a makra</a>]

<p>
<h1><font color="#e00000">PF: Konfigurace</font></h1>

<hr>

<h3>Obsah</h3>
<ul>
<li><a href="#activate">Zapnutí</a>
<li><a href="#config">Konfigurace</a>
<li><a href="#control">Ovládání</a>
</ul>

<hr>

<a name="activate"></a>
<h2>Zapnutí</h2>
Pro zapnutí PF a naètení jeho konfiguraèních soubory pøi bootu, upravte
soubor
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;sektion=8&amp;manpath=OpenBSD+3.3"
><tt>/etc/rc.conf</tt></a> tak, aby øádek PF vypadal takto:

<blockquote>
<tt>
pf=YES
</tt>
</blockquote>

<p>
Restartujte svùj systém, aby se zmìna projevila.

<p>
Mù¾ete také zapnout a vypnout PF pou¾itím programu
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
>pfctl(8)</a>:

<blockquote>
<tt>
# pfctl -e<br>
# pfctl -d
</tt>
</blockquote>

<p>
k zapnutí, resp vypnutí.
Uvìdomte si, ¾e pouhé zapnutí nebo vypnutí PF nezpùsobí vlastní nata¾ení
pravidel. Pravidla musí být nahrána zvlá¹», buï pøed nebo po zapnutí PF.


<a name="config"></a>
<h2>Konfigurace</h2>
<p>
PF ète svá konfiguraèní pravidla z
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.3"
><tt>/etc/pf.conf</tt></a> pøi bootu, kdy¾ je spu¹tìn 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8&amp;manpath=OpenBSD+3.3"
>rc skritpy</a>.  V¹imnìte si, ¾e aèkoliv je 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.3"
><tt>/etc/pf.conf</tt></a> defaultní a je nahrán
sytémovými rc skripty, je to to jen textový soubor nata¾ený a
interpretovaný
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
>pfctl(8)</a> a vlo¾ený do
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.3"
>pf(4)</a>. V nìkterých pou¾itích je mo¾né po bootu naèíst jiná pravidla z
jiných souborù. Stejnì jako ka¾dá dobøe navr¾ená unixová
aplikace, PF nabízí znaènou flexibilitu.

<p>
Soubor <tt>pf.conf</tt> má nìkolik èástí:
<ul>
<li><b><a href="macros.html">Macros:</a></b> U¾ivatelsky nastavované
promìnné obsahující IP adresy, jména rozhraní apod.
<li><b><a href="tables.html">Tables:</a></b> Struktura pou¾ívaná k
ulo¾ení seznamu IP adres.
<li><b><a href="options.html">Options:</a></b> Rùzné volby pro ovládání
èinnosti PF.
<li><b><a href="scrub.html">Scrub:</a></b> Opìtné zpracování paketù
kvùli jejich normalizaci a defregmentaci.
<li><b><a href="queueing.html">Queueing:</a></b> Poskytuje kontrolu nad
vyu¾itím pásma a prioritizací paketù.
<li><b><a href="nat.html">Translation:</a></b> Nastavení pøekladu
sí»ových adres (Network Address Translation) a
<a href="rdr.html">pøesmìrování paketù (packet redirection)</a>.
<li><b><a href="filter.html">Filter Rules:</a></b> Umo¾òuje výbìrové
filtrování nebo blokování paketù, které procházejí kterýmkoliv
rozhraním.
</ul>

<p>
S výjimkou maker a tabulek by se ka¾dá sekce mìla objevit v
konfiguraèním souboru v tomto poøadí, i kdy¾ ne v¹echny sekce musí
existovat pro konkrétním pou¾ití.

<p>
Prázdné øádky jsou ignorovány a øádky zaèínající <tt>#</tt> jsou
pova¾ovány za komentáøe.

<a name="control"></a>
<h2>Ovládání</h2>
Po bootu mù¾e být èinnost PF ovládána pomocí programu
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
>pfctl(8)</a>.  Pøíklady nìkterých pøíkazù jsou:

<pre>
     # pfctl -f /etc/pf.conf     <i>nahraje soubor pf.conf</i>
     # pfctl -nf /etc/pf.conf    <i>zpracuje soubor, ale nenahraje ho</i>
     # pfctl -Nf /etc/pf.conf    <i>Naèti ze souboru pouze pravidla NAT</i>
     # pfctl -Rf /etc/pf.conf    <i>Naèti ze souboru pouze pravidla filtru</i>

     # pfctl -sn                 <i>Uka¾ aktuální pravidla NAT</i> 
     # pfctl -sr                 <i>Uka¾ aktuální pravidla filtru</i>
     # pfctl -ss                 <i>Uka¾ aktuální tabulky stavù</i>
     # pfctl -si                 <i>Uka¾ statistiky filtru a poèítadla</i>
     # pfctl -sa                 <i>Uka¾ V©ECHNO, co mù¾e být ukázáno</i>
</pre>

<p>
Kompletní seznam pøíkazù najdete v
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
>manuálové stránce pfctl(8)</a>.

<p>
[<a href="index.html">Obsah</a>]
[<a href="macros.html">Dále: Seznamy a makra</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../images/back.gif" border="0" alt="[back]"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<small>
<br>
Originally: [OpenBSD: config.html,v 1.7 ]
<br>
$Translation: config.html,v 1.2 2003/11/10 13:01:17 horacio Exp $
<br>
$OpenBSD: config.html,v 1.2 2003/11/10 13:22:18 horacio Exp $
</small>

</body>
</html> 
