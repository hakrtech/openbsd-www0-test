<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Provozní nastavení</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003-2007 Joel Knight <enabled@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../cs/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="../shortcuts.html">Předchozí: Zkratky pro vytváření pravidel</a>]
[<a href="index.html">Obsah</a>]
[<a href="../anchors.html">Další: Kotvy</a>]

<p>
<h1><font color="#e00000">PF: Provozní nastavení</font></h1>

<hr>

<p>
Následující nastavení kontrolují provoz PF. Volby se specifikují v
<tt>pf.conf</tt> pomocí <tt>set</tt> direktivy.

<a name="block-policy"></a>
<p>
<dl>
<dt><tt>set block-policy <i>option</i></tt><br>
<dd>Nastavuje defaultní chování pro <a href="filter.html">filtrovací</a> 
pravidla, která mají nastavenu <tt>block</tt> akci.
<ul>
<li><tt>drop</tt> - paket je tiše zahozen.
<li><tt>return</tt> - TCP RST paket je vrácen pro blokované TCP
pakety a ICMP Unreachable paket je vrácen pro všechny ostatní.
</ul>
<dd>Nezapomeňte, že individuální filtrovací pravidla mohou tuto defaultní
odpověď přepsat.
Defaultní nastavení je <tt>drop</tt>.
</dl>

<a name="debug"></a>
<p>
<dl>
<dt><tt>set debug <i>option</i></tt><br>
<dd>Nastavuje úroveň detailů pro debug.
<ul>
<li><tt>none</tt> - nejsou zobrazeny žádné debug zprávy.
<li><tt>urgent</tt> - debug zprávy pro vážné chyby.
<li><tt>misc</tt> - debug zprávy pro různé chyby (např.,
pro zobrazení stavů paket normalizeru/scrubberu a pro selhání vytvoření stavu).
<li><tt>loud</tt> - debug zprávy jsou vytvářeny pro běžné podmínky
(např., k zobrazení statusu pasivní detekce "otisků prstů" OS).
</ul>
<dd>Defaultní nastavení je <tt>urgent</tt>.
</dl>

<a name="fingerprints"></a>
<p>
<dl>
<dt><tt>set fingerprints <i>file</i></tt><br>
<dd>Nastavuje soubor z kterého načíst "otisky prstů" operačních systémů.
Pro použití s <a href="filter.html#osfp">pasivní detekcí "otisků prstů" OS</a>.
Defaultní nastavení je <tt>/etc/pf.os</tt>.

</dl>

<a name="limit"></a>
<p>
<dl>
<dt><tt>set limit <i>option value</i></tt><br>
<dd>Nastavuje různé limity pro PF operace.
<ul>
<li><tt>frags</tt> - maximální množství záznamů v paměťovém poolu použitém pro 
znovusestavování paketů (scrub pravidla). Defaultní nastavení je 5000.
<li><tt>src-nodes</tt> - maximální množství záznamů v paměťovém poolu použitém
pro sledování zdrojových adres (generováno pomocí
<tt>sticky-address</tt> a <tt>source-track</tt> voleb).
Defaultní nastavení je 10000.
<li><tt>states</tt> - maximální množství záznamů v paměťovém poolu použitém
pro tabulky stavů
(<a href="filter.html">filtrovací</a> pravidla, která specifikují
 <tt>keep state</tt>). Defaultní nastavení je 10000.
<li><tt>tables</tt> - maximální množství
<a href="tables.html">tabulek</a>, které může být vytvořeno.
Defaultní nastavení je 1000.
<li><tt>table-entries</tt> - celkový limit určující kolik může být maximálně
uloženo adres ve všech tabulkách.
Defaultní nastavení je 200000.
Pokud má systém méně než 100MB fyzické paměti, tak je defaultní nastavení
určeno na 100000.
</ul>
</dl>

<a name="loginterface"></a>
<p>
<dl>
<dt><tt>set loginterface <i>interface</i></tt><br>
<dd>Nastavuje rozhraní pro které bude PF sbírat statistiky jako
přijaté/odeslané byty a propuštěné/blokované pakety. Statistiky se mohou
sbírat pouze pro <i>jedno</i> rozhraní najednou. Nezapomeňte, že
<tt>match</tt>, <tt>bad-offset</tt>, atd. počítadla a počítadla
stavových tabulek jsou nahrávána bez ohledu na to, jestli je 
<tt>loginterface</tt> nastaveno nebo ne.
Pro vypnutí této volby ji nastavte na <tt>none</tt>.
Defaultní nastavení je <tt>none</tt>.
</dl>

<a name="optimization"></a>
<p>
<dl>
<dt><tt>set optimization <i>option</i></tt><br>
<dd>Optimalizuje PF pro jedno z následujících síťových prostředí:
<ul>
<li><tt>normal</tt> - vyhovující pro skoro všechny sítě.
<li><tt>high-latency</tt> -sítě s vysokou latencí jako například satelitní 
spojení.
<li><tt>aggressive</tt> - agresivnější zaručení, že spojení ze stavové tabulky
vyprší dříve. Toto může významně snížit paměťovou náročnost na vytíženém
firewallu s rizikem, že nečinná spojení budou ukončena mnohem dříve než obvykle.
<li><tt>conservative</tt> - extrémně konzervativní nastavení. Toto zamezuje
zahazování nečiných spojení za cenu větši utilizace paměti a lehce
zvýšené utilizace procesoru.
</ul>
<dd>Defaultní nastavení je <tt>normal</tt>.
</dl>

<a name="ruleset-optimization"></a>
<p>
<dl>
<dt><tt>set ruleset-optimization <i>option</i></tt>
<dd>Kontroluje funkci optimizátoru PF pravidel.
<ul>
<li><tt>none</tt> - vypne optimizátor úplně.
<li><tt>basic</tt> - zapíná následující optimalizace pravidel:
	<ol>
	<li>odstraní duplicitní pravidla
	<li>odstraní pravidla, která jsou podmnožinou jiného pravidla
	<li>kombinuje více pravidel do tabulky pokud je to výhodné
	<li>upraví pořadí pravidel pro vylepšení výkonu vyhodnocování
	</ol>
<li><tt>profile</tt> - používá aktuálně nahraná filtrovací pravidla jako
zpětnou vazbu pro upravení pořadí quick pravidel pro aktuální síťový provoz.
</ul>
<dd>Od OpenBSD 4.2 je defaultní nastavení <tt>basic</tt>.
Podívejte se na
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+5.3"
>pf.conf(5)</a> pro mnohem detailnější popis.
</dl>

<a name="skip"></a>
<p>
<dl>
<dt><tt>set skip on <i>interface</i></tt><br>
<dd>Přeskočí <i>všechno</i> PF zpracovávání na <tt><i>interface</i></tt>.
Toto může být užitečné na lokální rozhraní kde filtrování, normalizace, 
prioritizace provozu a dalši nejsou potřeba.
Tato volba může být použita několikrát.
Defaultně tato volba nastavena není.
</dl>

<a name="state-policy"></a>
<p>
<dl>
<dt><tt>set state-policy <i>option</i></tt><br>
<dd>Nastavuje chování PF když dojde na udržování stavů.
Toto chování může být přepsáno v jednotlivých pravidlech.
Podívejte se na <a href="filter.html#state">Keeping State</a>.
<ul>
<li><tt>if-bound</tt> - stavy jsou svázány s rozhraním na kterém jsou
vytvořeny. 
Pokud provoz odpovídá záznamu ve stavové tabulce, ale nepřichází přes
rozhraní uložené v tomto stavovém záznamu, tak shoda bude odmítnuta.
Paket se poté musí shodovat s filtrovacím pravidlem nebo jinak bude
kompletně zahozen/odmítnut.
<li><tt>floating</tt> - stavy se mohou shodovat s pakety na jakémkoliv rozhraní.
Dokud paket odpovídá stavovému záznamu a prochází ve stejném směru jako byl
na rozhraní, když byl stav vytvořen, tak nezáleží přes které rozhraní prochází 
a bude propuštěn.
</ul>
<dd>Defaultní nastavení je <tt>floating</tt>.
</dl>

<a name="timeout"></a>
<p>
<dl>
<dt><tt>set timeout <i>option value</i></tt><br>
<dd>Nastavuje různé doby vypršení (v sekundách).
<ul>
<li><tt>interval</tt> - počet sekund mezi vyčištěním vypršených stavů a
paket fragmentů.
Defaultní nastavení je <tt>10</tt>.
<li><tt>frag</tt> - počet sekund předtím, než je nesestavený fragment vypršen.
Defaultní nastavení je <tt>30</tt>.
<li><tt>src.track</tt> - počet sekund jak dlouho držet
<a href="filter.html#stateopts">source tracking</a> záznam v paměti
poté co poslední stav vyprší.
Defaultní nastavení je <tt>0</tt> (nula).
</ul>
</dl>

<p>
Příklad:
<p>
<table border=0 width="650">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>
set timeout interval 10
set timeout frag 30
set limit { frags 5000, states 2500 }
set optimization high-latency
set block-policy return
set loginterface dc0
set fingerprints "/etc/pf.os.test"
set skip on lo0
set state-policy if-bound
</pre>
</td></tr>
</table>


<p>
[<a href="../shortcuts.html">Předchozí: Zkratky pro vytváření pravidel</a>]
[<a href="index.html">Obsah</a>]
[<a href="../anchors.html">Další: Kotvy</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[back]"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: options.html,v 1.29 ]<br>
$Translation: options.html,v 1.6 2013/06/05 09:28:16 bodie Exp $<br>
-->
$OpenBSD: options.html,v 1.6 2013/06/05 12:30:47 ajacoutot Exp $
</small>

</body>
</html> 
