<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Começando</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003, Nick Holland <nick@openbsd.org>
Copyright (c) 2003, 2004, Joel Knight <enabled@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../pt/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="index.html">Conteúdo</a>]
[<a href="macros.html">Próximo: Listas e Macros</a>]

<p>
<h1><font color="#e00000">PF: Começando</font></h1>

<hr>

<h3>Conteúdo</h3>
<ul>
<li><a href="#activate">Ativação</a>
<li><a href="#config">Configuração</a>
<li><a href="#control">Controle</a>
</ul>

<hr>

<a name="activate"></a>
<h2>Ativação</h2>
Para ativar o PF e fazê-lo ler seu arquivo de configuração no boot,
adicione a linha
<blockquote>
<tt>
pf=YES
</tt>
</blockquote>
ao arquivo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf.local&amp;sektion=8"
>/etc/rc.conf.local</a>.

<p>
Reinicie o sistema para ativar as alterações.

<p>
Você também pode ativar e desativar o PF usando o programa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
>pfctl(8)</a>:

<blockquote>
<tt>
# pfctl -e<br>
# pfctl -d
</tt>
</blockquote>

<p>
para habilitar e desabilitar, respectivamente.
Perceba que isso apenas habilita ou desabilita o PF, na verdade ele
ainda não carregou suas regras. Elas devem ser carregadas separadamente,
o que pode ser feito antes ou depois do PF estar habilitado.


<a name="config"></a>
<h2>Configuração</h2>
<p>
O PF lê sua configuração de regras do arquivo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.4"><tt>/etc/pf.conf</tt></a>
na hora do boot, conforme a sequência dos
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8"
>scripts rc</a>. Embora o arquivo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.4"
><tt>/etc/pf.conf</tt></a> seja o arquivo padrão carregado
pelos scripts rc do sistema, é apenas um arquivo texto carregado e
interpretado pelo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
>pfctl(8)</a> e inserido no
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.4"
>pf(4)</a>. Para algumas aplicações, outras regras devem ser carregadas
de outros arquivos após o boot. Assim como toda aplicação Unix bem
projetada, o PF oferece grande flexibilidade.

<p>
O arquivo <tt>pf.conf</tt> tem sete partes:
<ul>
<li><b><a href="macros.html">Macros:</a></b> Variáveis definidas pelo
    usuário, que podem armazenar endereços IP, nomes de interface, etc.
<li><b><a href="tables.html">Tabelas:</a></b> Uma estrutura usada para
    armazenar listas de endereços IP.
<li><b><a href="options.html">Opções:</a></b> Várias opções de controle
    do funcionamento do PF.
<li><b><a href="scrub.html">Scrub:</a></b> Reprocessamento de pacotes
    para normalização e desfragmentação.
<li><b><a href="queueing.html">Filas:</a></b> Fornece controle
    de banda e priorização de pacotes.
<li><b><a href="nat.html">Tradução:</a></b>
    Controla a Tradução do Endereço de Rede ("NAT") e
    <a href="rdr.html">redirecionamento de pacotes</a>.
<li><b><a href="filter.html">Regras de Filtragem:</a></b> Permite
    selecionar pacotes para filtragem ou bloqueá-los conforme chegam
    nas interfaces.
</ul>

<p>
Com exceção de macros e tabelas, cada seção deve aparecer nessa ordem
no arquivo de configuração, contudo nem todas as seções precisam
existir para determinadas aplicações.

<p>
Linhas em branco são ignoradas, e linhas começando com <tt>#</tt>
são tratadas como comentários.

<a name="control"></a>
<h2>Controle</h2>
Após o boot, a operação do PF pode ser feita usando o programa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
>pfctl(8)</a>. Alguns exemplos de comandos:

<pre>
     # pfctl -f /etc/pf.conf     <i>Carrega o arquivo pf.conf</i>
     # pfctl -nf /etc/pf.conf    <i>Analisa o arquivo, mas não o carrega</i>
     # pfctl -Nf /etc/pf.conf    <i>Carrega apenas regras NAT do arquivo</i>
     # pfctl -Rf /etc/pf.conf    <i>Carrega apenas regras de filtragem do arquivo</i>

     # pfctl -sn                 <i>Mostra as regras atuais de NAT</i>
     # pfctl -sr                 <i>Mostra as regras atuais de filtragem</i>
     # pfctl -ss                 <i>Mostra a atual tabela de estado</i>
     # pfctl -si                 <i>Mostra status de filtragem e contadores</i>
     # pfctl -sa                 <i>Mostra TUDO o que pode ser mostrado</i>
</pre>

<p>
Para uma lista completa dos comandos, por favor consulte a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
>página de manual do pfctl(8)</a>.

<p>
[<a href="index.html">Conteúdo</a>]
[<a href="macros.html">Próximo: Listas e Macros</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[voltar]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: config.html,v 1.25 ]<br>
$Translation: config.html,v 1.9 2009/03/11 00:52:55 dsantos Exp $<br>
-->
$OpenBSD: config.html,v 1.9 2009/03/16 20:24:23 tobias Exp $
</small>

</body>
</html>
