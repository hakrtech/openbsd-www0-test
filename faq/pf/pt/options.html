<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Op&ccedil;&otilde;es em Tempo de Execu&ccedil;&atilde;o</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD FAQ page">
<meta name="keywords" content="openbsd,faq,pf">
<meta name="distribution" content="global">
</head>

<!--
Copyright (c) 2003-2005 Joel Knight <enabled@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../pt/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="shortcuts.html">Anterior: Atalhos na Cria&ccedil;&atilde;o de Regras</a>]
[<a href="index.html">Conte&uacute;do</a>]
[<a href="scrub.html">Pr&oacute;ximo: Scrub (Normaliza&ccedil;&atilde;o de Pacotes)</a>]

<p>
<h1><font color="#e00000">PF: Op&ccedil;&otilde;es em Tempo de Execu&ccedil;&atilde;o</font></h1>

<hr>

<p>
Op&ccedil;&otilde;es s&atilde;o usadas para controlar a opera&ccedil;&atilde;o do PF. Elas s&atilde;o especificadas no <tt>pf.conf</tt> usando a diretiva <tt>set</tt>.

<p>
<b><font color="#ff0000">NOTA:</font></b> No OpenBSD 3.7 e posterior, o
o comportamento das op&ccedil;&otilde;es em tempo de execu&ccedil;&atilde;o foi modificado.
Anteriormente, uma vez que uma op&ccedil;&atilde;o foi configurada ela nuca ser&aacute; resetada
para seu valor padr&atilde;o, mesmo se o conjunto de regras foi recarregado. 
No OpenBSD 3.7, quando um conjunto de regras &eacute; carregado, as op&ccedil;&otilde;es 
em tempo de execu&ccedil;&atilde;o s&atilde;o resetadas para valores padr&atilde;o antes do
conjunto de regras ser analisado.  
Assim, se uma op&ccedil;&atilde;o &eacute; configurada e &eacute; ent&atilde;o removida do
conjunto de regras e o conjunto de regras for carregado, a op&ccedil;&atilde;o ser&aacute;
resetada para o seu valor padr&atilde;o.

<a name="block-policy"></a>
<p>
<dl>
<dt><b><tt>set block-policy</tt></b><br>
<dd>Define o comportamento padr&atilde;o para regras de <a href="filter.html">filtragem</a> 
que especifiquem <tt>block</tt> como a&ccedil;&atilde;o.
<ul>
<li><tt>drop</tt> - o pacote &eacute; descartado silenciosamente.
<li><tt>return</tt> - um pacote TCP RST &eacute; retornado para 
pacotes TCP bloqueados e pacotes ICMP Unreachable s&atilde;o enviados para 
todos os outros.
</ul>
<dd>Note que regras de filtragem individuais  
tem preced&ecirc;ncia sobre a resposta padr&atilde;o.
O padr&atilde;o &eacute; <tt>drop</tt>.
</dl>

<a name="debug"></a>
<p>
<dl>
<dt><b><tt>set debug</tt></b>
<dd>Define o n&iacute;vel de depura&ccedil;&atilde;o do PF.
<ul>
<li><tt>none</tt> - mensagens de depura&ccedil;&atilde;o n&atilde;o s&atilde;o mostradas.
<li><tt>urgent</tt> - mensagens de depura&ccedil;&atilde;o para erros s&eacute;rios.
Este &eacute; o padr&atilde;o.
<li><tt>misc</tt> - mensagens de depura&ccedil;&atilde;o geradas por v&aacute;rios erros (ex.,
para ver o status do normalizador de pacotes/scrubber e para falhas na 
cria&ccedil;&atilde;o de estados de conex&otilde;es).
<li><tt>loud</tt> -  mensagens de depura&ccedil;&atilde;o geradas por condi&ccedil;&otilde;es 
normais (ex., para ver o status da Detec&ccedil;&atilde;o Passiva de SO).
</ul>
<dd>O padr&atilde;o &eacute; <tt>none</tt>.
</dl>

<a name="fingerprints"></a>
<p>
<dl>
<dt><b><tt>set fingerprints <i>file</i></tt></b>
<dd>Definie o arquivo do qual carregar as impress&otilde;es digitais (fingerprints)
de sistemas operacionais. Para uso com a  
<a href="filter.html#osfp">detec&ccedil;&atilde;o passiva de SO</a>.
O padr&atilde;o &eacute; <tt>/etc/pf.os</tt>.

</dl>

<a name="limit"></a>
<p>
<dl>
<dt><b><tt>set limit</tt></b>
<dd><tt>frags</tt> - n&uacute;mero m&aacute;ximo de entradas na &aacute;rea de mem&oacute;ria 
usada para reconstru&ccedil;&atilde;o de pacotes, regras 
(<a href="scrub.html">scrub</a>). O padr&atilde;o 
&eacute; 5000.
<dd><tt>src-nodes</tt> - n&uacute;mero m&aacute;ximo de entradas na &aacute;rea de mem&oacute;ria 
destinada ao registro de endere&ccedil;os IP de origem (gerados pelas op&ccedil;&otilde;es 
<tt>sticky-address</tt> e <tt>source-track</tt>).
O padr&atilde;o &eacute; 10000.
<dd><tt>states</tt> - n&uacute;mero m&aacute;ximo de entradas nas tabelas de estado 
para regras de (<a href="filter.html">filtragem</a> 
que especificam <tt>keep state</tt>). O padr&atilde;o &eacute; 10000.
</dl>

<a name="loginterface"></a>
<p>
<dl>
<dt><b><tt>set loginterface <i>interface</i></tt></b><br>
<dd>Define a interface onde PF deve colher estat&iacute;sticas como bytes 
entrada/sa&iacute;da e pacotes permitidos/bloqueados. Estat&iacute;sticas podem ser obtidas 
de apenas <i>uma</i> interface por vez. Perceba que os contadores 
<tt>match</tt>, <tt>bad-offset</tt>, etc., e das tabelas de estado
s&atilde;o registrados independente de <tt>loginterface</tt> estar setado ou 
n&atilde;o.
Para desabilitar esta opc&atilde;o, configure-a para <tt>none</tt>.
O padr&atilde;o &eacute; <tt>none</tt>.
</dl>

<a name="optimization"></a>
<p>
<dl>
<dt><b><tt>set optimization</tt></b><br>
<dd>Otimiza o PF para um dos ambientes a seguir:
<ul>
<li><tt>normal</tt> - adequado para a maioria das redes. 
<li><tt>high-latency</tt> - redes de alta lat&ecirc;ncia como conex&otilde;es via sat&eacute;lite.
<li><tt>aggressive</tt> - expira conex&otilde;es agressivamente da tabela de estados. 
Isso pode diminuir drasticamente os requisitos de mem&oacute;ria num firewall muito 
carregado, o pre&ccedil;o &eacute; o risco de se descartar conex&otilde;es muito cedo.
<li><tt>conservative</tt> - configura&ccedil;&otilde;es extremamente conservadoras. Evita 
o descarte de pacotes em conex&otilde;es ociosas ao custo de maior utiliza&ccedil;&atilde;o 
de mem&oacute;ria e pequeno aumento no processamento.
</ul>
<dd>O padr&atilde;o &eacute; <tt>normal</tt>.
</dl>

<a name="skip"></a>
<p>
<dl>
<dt><b><tt>set skip on <i>interface</i></tt></b>
<dd>Pula <i>todo</i> o processamento do PF na <tt><i>interface</i></tt>.
Isto pode ser &uacute;til em interfaces loopback onde filtragem,
normaliza&ccedil;&atilde;o, filas, etc, n&atilde;o s&atilde;o requeridos.
Esta op&ccedil;&atilde;o pode ser usada muitas vezes.
Por padr&atilde;o esta op&ccedil;&atilde;o n&atilde;o &eacute; configurada.
</dl>

<a name="state-policy"></a>
<p>
<dl>
<dt><b><tt>set state-policy</tt></b>
<dd>Define o comportamento do PF ao manter o estado das conex&otilde;es.
Este comportamento pode ser alterado em regras espec&iacute;ficas.
Veja <a href="filter.html#state">Mantendo Estado de Conex&otilde;es</a>.
<ul>
<li><tt>if-bound</tt> - estado &eacute; restrito &agrave; interface onde foi criado.
Caso o tr&aacute;fego case com uma entrada na tabela de estado, mas n&atilde;o atravesse 
a interface onde a entrada foi criada, &eacute; rejeitado. O pacote deve encontrar
uma regra que case ou ser&aacute; descartado/rejeitado.
<li><tt>group-bound</tt> - mesmo comportamento de <tt>if-bound</tt> exceto
que aos pacotes &eacute; permitido atravessar interfaces do mesmo tipo, ex., todas 
interfaces <tt>ppp</tt>, etc.
<li><tt>floating</tt> - estado pode combinar com pacotes em qualquer interface.
Contanto que case uma entrada e esta passando na mesma dire&ccedil;&atilde;o que
estava na interface quando o estado foi criado, n&atilde;o importa a interface 
onde est&aacute; vindo, poder&aacute; passar.
</ul>
O padr&atilde;o &eacute; <tt>floating</tt>
</dl>

<a name="timeout"></a>
<p>
<dl>
<dt><b><tt>set timeout</tt></b>
<dd><tt>interval</tt> - segundos entre a remo&ccedil;&atilde;o de registros de estados 
expirados e pacotes fragmentados.
O padr&atilde;o &eacute; <tt>10</tt>
<dd><tt>frag</tt> - segundos antes que um pacote fragmentado sendo 
reconstru&iacute;do expire.
O padr&atilde;o &eacute; <tt>30</tt>
<dd><tt>src.track</tt> - segundos para manter uma entrada 
<a href="filter.html#stateopts">source tracking</a> na mem&oacute;ria
depois que o &uacute;ltimo estado expirar.
O padr&atilde;o &eacute; <tt>0</tt> (zero).
</dl>

<p>
Exemplo:
<p>
<table border="0" width="650">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>set timeout interval 10
set timeout frag 30
set limit { frags 5000, states 2500 }
set optimization high-latency
set block-policy return
set loginterface dc0
set fingerprints /etc/pf.os.test
set skip on lo0
set state-policy if-bound
</pre>
</td></tr>
</table>


<p>
[<a href="shortcuts.html">Anterior: Atalhos na Cria&ccedil;&atilde;o de Regras</a>]
[<a href="index.html">Conte&uacute;do</a>]
[<a href="scrub.html">Pr&oacute;ximo: Scrub (Normaliza&ccedil;&atilde;o de Pacotes)</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[voltar]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: options.html,v 1.11 ]<br> 
$Translation: options.html,v 1.2 2005/06/06 13:06:29 dsantos Exp $<br>                 
$OpenBSD: options.html,v 1.2 2005/06/08 17:38:20 saad Exp $ 
</small>

</body>
</html>
