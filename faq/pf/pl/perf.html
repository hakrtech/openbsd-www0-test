<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Wydajno¶æ</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
<meta name="copyright"     content="This document copyright 2002-2004 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif">
<p>
[<a href="logging.html">Wstecz: Logowanie</a>]
[<a href="index.html">Spis tre¶ci</a>]
[<a href="ftp.html">Dalej: K³opoty z FTP</a>]

<p>
<h1><font color="#e00000">PF: Wydajno¶æ</font></h1>
<hr>

<h3>
"Jakie pasmo mo¿e obs³u¿yæ PF?"<br>
"Jaki komputer bêdzie potrzebny aby zrealizowaæ bramkê NAT lub PF?"
</h3>

<p>
Nie ma prostej i jednoznacznej odpowiedzi na te pytania. Dla wiêkszo¶ci
zastosowañ, komputer klasy 486/66 MHz z par± dobrych kart sieciowych ISA mo¿e
poradziæ sobie z filtrowaniem i translacj± adresów nawet przy pa¶mie siêgaj±cym
5 Mb/s, jednak w niektórych przypadkach o wiele szybszy komputer z jeszcze
bardziej wydajnymi interfejsami sieciowymi na szynie PCI mo¿e okazaæ siê
niewystarczaj±cy. Pytanie, które nale¿y zadaæ nie odnosi siê do bitów na
sekundê przechodz±cych przez interfejs, ale raczej do ilo¶ci nap³ywaj±cych
pakietów i z³o¿ono¶ci regu³ u¿ytych do filtrowania.

<p>
Wydajno¶æ PF jest zale¿na od kilku czynników:
<ul>
<li>Ilo¶ci pakietów na sekundê. Ilo¶æ operacji wykonanych na pakiecie
zawieraj±cym 1500 bajtów jest prawie taka sama jak dla pakietu z tylko jednym
bajtem danych. Ilo¶æ pakietów na sekundê decyduje o tym, jak wiele regu³ musi
zostaæ sprawdzonych w ci±gu sekundy, co okre¶la rzeczywiste zapotrzebowanie na
zasobów systemu przez PF.

<li>Wydajno¶æ szyny. Magistrala ISA posiada maksymaln± przepustowo¶æ na poziomie
8 MB/sec, w momencie gdy procesor wykorzystuje t± szynê, musi spowolniæ swoj±
pracê do poziomu procesora 80286 8 MHz, bez wzglêdu na to jaki jest szybki.
Szyna PCI ma o wiele wy¿sz± przepustowo¶æ, a w mniejszym stopniu obci±¿a
procesor.

<li>Wydajno¶æ kart sieciowych. Niektóre karty s± bardziej wydajne ni¿ inne.
Urz±dzenia bazuj±ce na Realtek 8139
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rl&amp;sektion=4&amp;manpath=OpenBSD+3.5">rl(4)</a>) 
maj± relatywnie nisk± wydajno¶æ, interfejsy oparte o chipset Intel 21143
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&amp;sektion=4&amp;manpath=OpenBSD+3.5">dc(4)</a>)
oferuj± wydajno¶æ na bardzo wysokim poziomie. Dla ludzi chc±cych uzyskaæ jak
najwiêksz± przepustowo¶æ sensownym rozwi±zaniem mo¿e byæ u¿ycie kart Gigabit
Ethernet, nawet je¶li nie pracuj± w sieci gigabitowej, poniewa¿ posiadaj± one o
wiele bardziej zaawansowane systemy buforowania.

<li>Z³o¿ono¶æ i zapis regu³. Bardziej skomplikowane regu³y to mniejsza
wydajno¶æ. Wzrost wydajno¶ci mo¿na uzyskaæ stosuj±c regu³y <tt>keep state</tt> i
<tt>quick</tt>. Im wiêcej linii z regu³ami do sprawdzenia dla ka¿dego pakietu tym
mniejsza wydajno¶æ.

<li>Warte wspomnienia: CPU i RAM. Jako, ¿e PF jest procesem j±dra, nie bêdzie
on u¿ywa³ pamiêci wirtualnej. Je¶li wiêc maszyna posiada wystarczaj±c± ilo¶æ
pamiêci RAM, PF bêdzie dzia³a³, je¶li nie, zawiesi siê z powodu wyczerpania
zasobów pamiêci (wiêcej szczegó³ów mo¿na znale¼æ na stronie podrêcznika
systemowego
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pool&amp;sektion=9&amp;manpath=OpenBSD+3.5">pool(9)</a>).
Ogromne ilo¶ci pamiêci RAM nie s± wcale konieczne - 32MB w zupe³no¶ci wystarczy 
dla blisko 30,000 wpisów w tabeli stanów, liczba ta jest absolutnie zadowalaj±ca
dla niewielkich biur czy te¿ domowego u¿ytku. Wiêkszo¶æ u¿ytkowników mo¿e
znale¼æ gdzie¶ komputer z "odzysku", który spe³ni wymagania stawiane przez PF z
nawi±zk± - system z procesorem 300 MHz mo¿e obs³u¿yæ bardzo du¿o pakietów w
mgnieniu oka, przynajmniej je¶li posiada dobr± karte sieciow± i przemy¶lany
zestaw regu³.
</ul>

<p>
Ludzie czêsto zadaj± pytanie o benchmark dla PF. Jedyny benchmark, który mo¿na
wzi±æ pod uwagê jest wydajno¶æ <i>danego</i> systemu w <i>danym</i> ¶rodowisku.
Benchmark, który nie bêdzie w stanie odtworzyæ warunków panuj±cych w danej sieci
nie bêdzie dobr± pomoc± przy konstruowaniu firewalla. Najlepszym rozwi±zaniem
jest sprawdzenie wydajno¶ci PF w takim ¶rodowisku, które bêdzie takie same, lub
mo¿liwie najbardziej podobne do tego, w którym bêdzie pracowa³ gotowy system.

<p>
PF znajduje zastosowanie w wielu du¿ych, bardzo obci±¿onych implementacjach,
a jego deweloperzy s± "mistrzami" w posugiwaniu siê nim. Jest bardzo
prawdopodobne, ¿e bêdzie on bardzo u¿yteczny tak¿e i dla ciebie.

<p>
[<a href="logging.html">Wstecz: Logowanie</a>]
[<a href="index.html">Spis tre¶ci</a>]
[<a href="ftp.html">Dalej: K³opoty z FTP</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[wstecz]"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: perf.html,v 1.13 ]<br>
$Translation: perf.html,v 1.7 2004/05/07 11:39:48 pl-team Exp $<br>
$OpenBSD: perf.html,v 1.6 2004/05/09 09:48:24 saad Exp $
</small>

</body>
</html> 
