<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Konfiguracja</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
<meta name="copyright"     content="This document copyright 2003 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif">
<p>
[<a href="index.html">Spis tre¶ci</a>]
[<a href="macros.html">Dalej: Listy i makra</a>]

<p>
<h1><font color="#e00000">PF: Konfiguracja</font></h1>

<hr>

<h3>Spis tre¶ci</h3>
<ul>
<li><a href="#activate">Aktywacja</a>
<li><a href="#config">Konfiguracja</a>
<li><a href="#control">Kontrola</a>
</ul>

<hr>

<a name="activate"></a>
<h2>Aktywacja</h2>
PF mo¿e byæ uruchamiane przy ka¿dym starcie systemu automatycznie, w tym celu
wystarczy dodaæ do pliku
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;sektion=8&amp;manpath=OpenBSD+3.3"
><tt>/etc/rc.conf</tt></a>, nastêpuj±c± liniê:

<blockquote>
<tt>
pf=YES
</tt>
</blockquote>

<p>
Prze³aduj system, aby zmiany odnios³y skutek.

<p>
Mo¿esz tak¿e w³±czaæ i wy³±czaæ PF dziêki programowi
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
>pfctl(8)</a> :

<blockquote>
<tt>
# pfctl -e<br>
# pfctl -d
</tt>
</blockquote>

<p>
-e (ang. enable) w³±cz oraz -d (ang. disable) wy³±cz.
Zauwa¿, ¿e ¿adne z powy¿szych poleceñ nie powoduj± wczytania zestawu regu³,
który musi zostaæ za³adowany oddzielnie, albo przed albo po w³±czeniu PF.
 
<a name="config"></a>
<h2>Konfiguracja</h2>
<p>
Podczas startu systemu, w trakcie uruchamiania PF przez
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8&amp;manpath=OpenBSD+3.3"
>skrypty rc</a>, filtr odczytuje swój standartowy plik konfiguracyjny
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.3"
><tt>/etc/pf.conf</tt></a>.
Pomimo tego, ¿e plik
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.3"
><tt>/etc/pf.conf</tt></a> przetwarzany jest skrypty systemowe, nadal
pozostaje on zwyk³ym, tekstowym plikiem, który jest interpretowany przez 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
>pfctl(8)</a>, a nastêpnie przenoszony do
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.3"
>pf(4)</a>. W niektórych przypadkach wygodniejsze mo¿e byæ u¿ywanie innych
plików konfiguracyjnych. Podobnie jak wiêkszo¶æ aplikacji systemu UNIX, PF,
dziêki swej przemy¶lanej konstrukcji, oferuje u¿ytkownikowi niezwyk³±
elastyczno¶æ.

<p>
Jest siedem rodzajów instrukcji w <tt>pf.conf</tt>:
<ul>
<li><b><a href="macros.html">Makra:</a></b> Zdefiniowane przez zmienne,
które mog± przechowywaæ adres IP, nazwê interfejsu sieciowego, itp.
<li><b><a href="tables.html">Tabele:</a></b> Struktura wykorzystywana
do przechowywania list adresów IP.
<li><b><a href="options.html">Opcje:</a></b> Ró¿ne opcje dostrajaj±ce
dzia³anie PF.
<li><b><a href="scrub.html">Scrub:</a></b> Przetwarzanie pakietów
w celu ich normalizacji i defragmentacji.
<li><b><a href="queueing.html">Kolejkowanie:</a></b> Zapewnia kontrolê
przepustowo¶ci i priorytetowanie pakietów.
<li><b><a href="nat.html">Translacja:</a></b> Kontrola translacji adresów
(NAT) i <a href="rdr.html">przekierowywania pakietów</a>.
<li><b><a href="filter.html">Regu³y filtrowania:</a></b> Pozwala na
selektywne filtrowanie lub blokowanie pakietów podczas ich przechodzenia
przez dowolny interfejsów sieciowy.
</ul>

<p>
Z wyj±tkiem <b>makr</b> i <b>tabel</b>, ka¿da sekcja powinna pojawiaæ siê
w powy¿szej kolejno¶ci w pliku konfiguracyjnym, mimo i¿ nie wszystkie sekcje
musz± istnieæ w danej konfiguracji.

<p>
Puste linie s± ignorowane, a linie zaczynaj±ce siê od <tt>#</tt> s± traktowane
jako komentarze.

<a name="control"></a>
<h2>Kontrola</h2>
Po starcie systemu, praca PF mo¿e byæ kontrolowana przy pomocy programu
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
>pfctl(8)</a> .  Oto kilka przyk³adowych komend:

<pre>
     # pfctl -f /etc/pf.conf     <i>£aduje plik <tt>pf.conf</tt></i>
     # pfctl -nf /etc/pf.conf    <i>Przetwarza plik, ale nie ³aduje go</i>
     # pfctl -Nf /etc/pf.conf    <i>£aduje z pliku jedynie regu³y NAT</i>
     # pfctl -Rf /etc/pf.conf    <i>£aduje z pliku jedynie regu³y filtruj±ce</i>

     # pfctl -sn                 <i>Wy¶wietla obecne regu³y NAT</i> 
     # pfctl -sr                 <i>Wy¶wietla obecne regu³y filtruj±ce</i>
     # pfctl -ss                 <i>Wy¶wietla obecne tabele stanów po³±czeñ</i>
     # pfctl -si                 <i>Wy¶wietla statystyki oraz liczniki filtra</i>
     # pfctl -sa                 <i>Wy¶wietla WSZYSTKIE mo¿liwe informacje</i>
</pre>

<p>
Kompletn± listê komend znajdziesz na stronach podrêcznika systemowego programu
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
>pfctl(8)</a>.

<p>
[<a href="index.html">Spis tre¶ci</a>]
[<a href="macros.html">Dalej: Listy i makra</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[wstecz]"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: config.html,v 1.5 ]<br>
$Translation: config.html,v 1.1 2003/08/28 09:46:09 pl-team Exp $<br>
$OpenBSD: config.html,v 1.1 2003/09/02 14:37:19 jufi Exp $
</body>
</html> 
