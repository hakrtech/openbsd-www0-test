<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF : Options de Fonctionnement</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003, 2004 Joel Knight <enabled@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif">
<p>
[<a href="shortcuts.html">Pr&eacute;c&eacute;dent : Raccourcis pour La
Cr&eacute;ation des Jeux de R&egrave;gles</a>]
[<a href="index.html">Index</a>]
[<a href="scrub.html">Suivant : Scrub (Normalisation de Paquets)</a>]

<p>
<h1><font color="#e00000">PF : Options de Fonctionnement</font></h1>

<hr>

<p>
Des options sont utilis&eacute;es pour contr&ocirc;ler le fonctionnement
de PF. Celles-ci sont sp&eacute;cifi&eacute;es dans le fichier
<tt>pf.conf</tt> en utilisant la directive <tt>set</tt>.

<a name="block-policy"></a>
<p>
<dl>
<dt><b><tt>set block-policy</tt></b><br>
<dd>Param&egrave;tre le comportement pour par d&eacute;faut des
    r&egrave;gles de <a href="../filter.html">filtrage</a> qui ont pour
    effet de bloquer les paquets (mot-cl&eacute; "block").
<ul>
<li><tt>drop</tt> - Le paquet est d&eacute;truit sans aucune
    notification.
<li><tt>return</tt> - un paquet TCP RST est renvoy&eacute; pour les
    paquets TCP et un paquet ICMP Unreachable est renvoy&eacute; pour
    tous les autres.
</ul>
<dd>Il est &agrave; noter que les r&egrave;gles de filtrage
    individuelles peuvent avoir leur propre r&eacute;ponse.
</dl>

<a name="debug"></a>
<p>
<dl>
<dt><b><tt>set debug</tt></b>
<dd>Permet de param&eacute;trer le niveau de d&eacute;bogage de pf.
<ul>
<li><tt>none</tt> - aucun message de d&eacute;bogage n'est
    affich&eacute;.
<li><tt>urgent</tt> - messages de d&eacute;bogage
    g&eacute;n&eacute;r&eacute;s pour les erreurs s&eacute;rieuses.
    C'est la valeur par d&eacute;faut.
<li><tt>misc</tt> - messages de d&eacute;bogage
    g&eacute;n&eacute;r&eacute;s pour des erreurs diverses (par exemple
    pour voir le status du sous-syst&egrave;me scrub et pour les
    &eacute;checs de cr&eacute;ation d'&eacute;tat).
<li><tt>loud</tt> - messages de d&eacute;bogage
    g&eacute;n&eacute;r&eacute;s dans des conditions courantes (par
    exemple pour voir le status de l'analyseur passif de signatures OS).
</ul>
</dl>

<a name="fingerprints"></a>
<p>
<dl>
<dt><b><tt>set fingerprints <i>file</i></tt></b>
<dd>Permet de param&eacute;trer le fichier &agrave; partir duquel seront
    charg&eacute;es les signatures de syst&egrave;mes d'exploitation.
    Utilis&eacute; avec l'analyse passive des OS. La valeur par
    d&eacute;faut est <tt>/etc/pf.os</tt>.
</dl>

<a name="limit"></a>
<p>
<dl>
<dt><b><tt>set limit</tt></b>
<dd><tt>frags</tt> - nombre maximal d'entr&eacute;es dans la zone
    m&eacute;moire utilis&eacute;e pour le r&eacute;assemblage de
    paquets (r&egrave;gles <a href="scrub.html">scrub</a>). La valeur
    par d&eacute;faut est 5000.
<dd><tt>src-nodes</tt> - nombre maximal des entr&eacute;es dans la zone
    m&eacute;moire utilis&eacute;e pour assurer un suivi des adresses IP
    sources (g&eacute;n&eacute;r&eacute; par les options <tt>sticky-
    address</tt> et <tt>source-track</tt>). La valeur par d&eacute;faut
    est 10000.
<dd><tt>states</tt> - nombre maximal d'entr&eacute;es dans la zone
    m&eacute;moire utilis&eacute;e pour les entr&eacute;es de la table
    d'&eacute;tat (r&egrave;gles de
    <a href="../filter.html">filtrage</a> qui contiennent le 
    mot-cl&eacute;). La valeur par d&eacute;faut est 10000.
</dl>

<a name="loginterface"></a>
<p>
<dl>
<dt><b><tt>set loginterface <i>int</i></tt></b><br>
<dd>Param&egrave;tre l'interface pour laquelle PF devra
    r&eacute;cup&eacute;rer des statistiques telles que le nombre
    d'octets entrants/sortant les paquets
    accept&eacute;s/bloqu&eacute;s. Les statistiques ne peuvent
    &ecirc;tre r&eacute;cup&eacute;r&eacute;es que pour <tt>une</tt>
    interface &agrave; la fois. Il est &agrave; noter que les
    indicateurs <tt>match</tt>, <tt>bad-offset</tt>, etc., et les
    indicateurs de la table d'&eacute;tat sont enregistr&eacute;s que
    <tt>loginterface</tt> soit positionn&eacute;e ou pas.
</dl>

<a name="optimization"></a>
<p>
<dl>
<dt><b><tt>set optimization</tt></b><br>
<dd>Optimise PF pour l'un de ces environnements r&eacute;seau :
<ul>
<li><tt>normal</tt> - convient &agrave; pratiquement tous les
    r&eacute;seaux. Valeur par d&eacute;faut.
<li><tt>high-latency</tt> - r&eacute;seaux &agrave; haute latence tels
    que les r&eacute;seaux &agrave; connexion satellite.
<li><tt>aggressive</tt> - les connexions expirent plus rapidement de la
    table d'&eacute;tat. Les pr&eacute;-requis m&eacute;moire sont ainsi
    fortement r&eacute;duits sur un pare-feu particuli&egrave;rement
    charg&eacute; au risque de terminer des connexions inactives trop
    rapidement.
<li><tt>conservative</tt> - param&eacute;trage extr&ecirc;mement
    conservateur. Contrairement &agrave; <tt>aggressive</tt>, ce
    param&eacute;trage &eacute;vite de terminer les connexions inactives
    ce qui se traduit par une plus grande utilisation m&eacute;moire et
    une utilisation du processeur un peu plus soutenue.
</ul>
</dl>

<a name="state-policy"></a>
<p>
<dl>
<dt><b><tt>set state-policy</tt></b>
<dd>Permet de param&eacute;trer le comportement de PF vis-&agrave;-vis
    de la pr&eacute;servation de l'&eacute;tat des connexions. Ce
    comportement peut &ecirc;tre contourn&eacute; au niveau de chaque
    r&egrave;gle. Pour plus de d&eacute;tails, consultez la section de
    la FAQ intitul&eacute;e
    <a href="../filter.html#state">Pr&eacute;servation de l'&Eacute;tat</a>.
<ul>
<li><tt>if-bound</tt> - les &eacute;tats sont li&eacute;s &agrave;
    l'interface sur lesquels ils ont &eacute;t&eacute;
    cr&eacute;&eacute;s. Si le trafic correspond &agrave; une
    entr&eacute;e de la table d'&eacute;tat mais qu'il ne traverse pas
    l'interface sur laquelle l'&eacute;tat a &eacute;t&eacute;
    enregistr&eacute;, cette correspondance est rejet&eacute;e. Le
    paquet doit alors correspondre &agrave; une r&egrave;gle de filtrage
    sinon il sera d&eacute;truit/rejet&eacute; tout simplement.
<li><tt>group-bound</tt> - m&ecirc;me comportement que <tt>if-bound</tt>
    mis &agrave; part que les paquets sont autoris&eacute;s &agrave;
    travers des interfaces du m&ecirc;me groupe, par exemple toutes les
    interfaces <tt>ppp</tt> etc.
<li><tt>floating</tt> - les &eacute;tats peuvent correspondrent &agrave;
    des paquets sur n'importe quelle interface. Peu importe l'interface
    qu'il traverse, un paquet sera accept&eacute; tant qu'il correspond
    &agrave; une entr&eacute;e dans la table d'&eacute;tat. C'est la
    valeur par <b>d&eacute;faut</b>.
</ul>
</dl>

<a name="timeout"></a>
<p>
<dl>
<dt><b><tt>set timeout</tt></b>
<dd><tt>interval</tt> - nombre de secondes entre les purges
    d'&eacute;tats expir&eacute;s et de fragments de paquets.
<dd><tt>frag</tt> - nombre de secondes avant qu'un fragment non
    assembl&eacute; n'expire.
</dl>

<p>
Exemple :
<p>
<table border=0 width="650">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>
set timeout interval 10
set timeout frag 30
set limit { frags 5000, states 2500 }
set optimization high-latency
set block-policy return
set loginterface dc0
set fingerprints /etc/pf.os.test
set state-policy if-bound
</pre>
</td></tr>
</table>


<p>
[<a href="shortcuts.html">Pr&eacute;c&eacute;dent : Raccourcis pour La
Cr&eacute;ation des Jeux de R&egrave;gles</a>] [<a
href="index.html">Index</a>] [<a href="scrub.html">Suivant : Scrub
(Normalisation de Paquets)</a>]

<p>
<hr>
<a href="index.html"><img alt="[back]" border="0" height="24" src="../../../images/back.gif" width="24"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: options.html,v 1.8 ]<br>
$Translation: options.html,v 1.4 2004/05/12 20:21:45 saad Exp $<br>
$OpenBSD: options.html,v 1.4 2004/05/12 20:51:36 saad Exp $
</small>

</body>
</html> 
