<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Configuraci&oacute;n</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta http-equiv="Content-Language" content="es">
<meta name="resource-type" content="documento">
<meta name="description"   content="Preguntas Frecuentes de OpenBSD">
<meta name="keywords"      content="openbsd,preguntas frecuentes,faq,pf">
<meta name="distribution"  content="global">
<meta name="copyright"     content="Este documento es copyright 2003 de OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<img alt="[OpenBSD]" height="30" width="141" src="../../../images/smalltitle.gif">
<p>
[<a href="index.html">Contenido</a>]
[<a href="macros.html">Siguiente: Listas y Macros</a>]

<p>
<h1><font color="#e00000">PF: Configuraci&oacute;n</font></h1>

<hr>

<h3>&Iacute;ndice de Contenidos</h3>
<ul>
<li><a href="#activate">Activaci&oacute;n</a>
<li><a href="#config">Configuraci&oacute;n</a>
<li><a href="#control">Control</a>
</ul>

<hr>

<a name="activate"></a>
<h2>Activaci&oacute;n</h2>
<p>
Para activar PF y que lea su correspondiente fichero de
configuraci&oacute;n durante el arranque, hay que modificar el fichero
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;sektion=8&amp;manpath=OpenBSD+3.3"><tt>/etc/rc.conf</tt></a>
de modo que la l&iacute;nea de PF quede as&iacute;:

<blockquote>
<tt>
pf=YES
</tt>
</blockquote>

<p>
A continuaci&oacute;n reiniciar el sistema para que el cambio surja
efecto.

<p>
Tambi&eacute;n se puede activar y desactivar PF usando el programa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3">pfctl(8)</a>.
Mediante las &oacute;rdenes:

<blockquote>
<tt>
# pfctl -e<br>
# pfctl -d
</tt>
</blockquote>

<p>
se activa y desactiva respectivamente.  N&oacute;tes que esto
s&oacute;lo activa o desactiva PF, no carga un grupo de reglas.  El
grupo de reglas se debe cargar por separado, bien sea antes o
despu&eacute;s de activar PF.

<a name="config"></a>
<h2>Configuraci&oacute;n</h2>
<p>
PF lee sus reglas de configuraci&oacute;n del fichero
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.3"><tt>/etc/pf.conf</tt></a>
durante el arranque, que es cargado por los
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8&amp;manpath=OpenBSD+3.3">guiones de ejecuci&oacute;n rc</a>.
N&oacute;tese que
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.3"><tt>/etc/pf.conf</tt></a>
el fichero de configuraci&oacute;n predeterminado y que se carga
mediante los guiones de ejecuci&oacute;n rc, es un simple fichero de
texto cargado e interpretado por
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3">pfctl(8)</a>,
e introducido en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.3">pf(4)</a>.
Se pueden cargar otros grupos de reglas desde otros ficheros durante el
arranque para otras aplicaciones.  Como cualquier aplicaci&oacute;n de
Unix bien dise&ntilde;ada, PF ofrece una gran flexibilidad.

<p>
El fichero <tt>pf.conf</tt> consta de siete partes:
<ul>
<li><b><a href="macros.html">Macros:</a></b> Variables definidas por el
usuario que pueden contener direcciones IP, nombres de interfaces, etc.
<li><b><a href="tables.html">Tablas:</a></b> Una estructura usada para
contener listas de direcciones IP.
<li><b><a href="options.html">Opciones:</a></b> Varias opciones para
controlar el funcionamiento de PF.
<li><b><a href="scrub.html">Normalizaci&oacute;n (<i>Scrub</i>):</a></b>
Reprocesamiento de paquetes para normalizarlos y desfragmentarlos
<li><b><a href="queueing.html">Formaci&oacute;n de Colas:</a></b> Provee
control del ancho de banda y priorizaci&oacute;n de paquetes.
<li><b><a href="nat.html">Traducci&oacute;n de Direcciones:</a></b>
Controla la Traducci&oacute;n de Direcciones de Red (NAT) y el
<a href="rdr.html">redireccionamiento de paquetes</a>.
<li><b><a href="filter.html">Reglas de Filtrado:</a></b> Permite el
filtrado selectivo o el bloqueo de paquetes seg&uacute;n van pasando a
trav&eacute;s de cualquiera de las interfaces.
</ul>

<p>
A excepci&oacute;n de las <b>macros</b> y <b>tablas</b>, cada
secci&oacute;n deber&iacute;a aparecer en este orden en el fichero de
configuraci&oacute;n, aunque no es necesario que existan todas estas
secciones para una aplicaci&oacute;n concreta.

<p>
Las l&iacute;neas en blanco se ignoran, y las l&iacute;neas que empiecen
con <tt>#</tt> se tratan como comentarios.

<a name="control"></a>
<h2>Control</h2>
<p>
Despu&eacute;s del arranque, la operaci&oacute;n de PF se puede
gestionar usando el programa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3">pfctl(8)</a>.
Algunas &oacute;rdenes de ejemplo son:

<pre>
     # pfctl -f /etc/pf.conf     <i>Carga el fichero pf.conf</i>
     # pfctl -nf /etc/pf.conf    <i>Analiza el fichero, pero no lo carga</i>
     # pfctl -Nf /etc/pf.conf    <i>Carga s&oacute;lo las reglas de NAT del fichero</i>
     # pfctl -Rf /etc/pf.conf    <i>Carga s&oacute;lo las reglas de filtrado del fichero</i>

     # pfctl -sn                 <i>Muestra las reglas actuales de NAT</i>
     # pfctl -sr                 <i>Muestra las reglas actuales de filtrado</i>
     # pfctl -ss                 <i>Muestra la tabla de estado actual</i>
     # pfctl -si                 <i>Muestra estad&iacute;sticas y contadores del filtrado</i>
     # pfctl -sa                 <i>Muestra TODO lo que puede</i>
</pre>

<p>
V&eacute;ase la p&aacute;gina del manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3">pfctl(8)</a>
para un listado completo de &oacute;rdenes.

<p>
[<a href="index.html">Contenido</a>]
[<a href="macros.html">Siguiente: Listas y Macros</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[&Iacute;ndice]"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: config.html,v 1.4 2003/05/15 03:03:54 nick Exp ]<br>
$OpenBSD: config.html,v 1.1 2003/05/28 14:39:30 jufi Exp $<br>
$Translation: config.html,v 1.2 2003/05/26 09:12:05 horacio Exp $
</small>
</body>
</html> 
