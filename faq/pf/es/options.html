<html>
<head>
<title>PF: Opciones en tiempo de ejecución</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003-2007 Joel Knight <enabled@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../es/index.html">
<img alt="[OpenBSD]" height="30" width="141" src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="shortcuts.html">Anterior: Atajos para crear conjuntos de
reglas</a>]
[<a href="index.html">Contenido</a>]
[<a href="anchors.html">Siguiente: Anclajes</a>]

<p>
<h1><font color="#e00000">PF: Opciones en tiempo de
ejecución</font></h1>

<hr>

<p>
Las opciones se usan para controlar el funcionamiento de PF 
y se especifican en el fichero <tt>pf.conf</tt> por medio de 
la directiva <tt>set</tt>.

<a name="block-policy"></a>
<p>
<dl>
<dt><tt>set block-policy <i>opción</i></tt><br>
<dd>Configuración del comportamiento predeterminado para las
reglas de <a href="filter.html">filtrado</a> que especifiquen la
acción de bloqueo <tt>block</tt>.
<ul>
<li><tt>drop</tt> - se descarta el paquete de forma silenciosa.
<li><tt>return</tt> - devuelve un paquete TCP RST por paquete TCP
bloqueado, y un paquete <i>ICMP Unreachable</i> (inalcanzable) 
para el resto de paquetes.
</ul>
<dd>Nótese que las reglas de filtrado individuales pueden sobreescribir
la respuesta predeterminada.  <tt>drop</tt> es la opción predeterminada.
</dl>

<a name="debug"></a>
<p>
<dl>
<dt><tt>set debug <i>opción</i></tt><br>
<dd>Establece el nivel de depuración de pf.
<ul>
<li><tt>none</tt> - no se muestra ningún mensaje de depuración.
<li><tt>urgent</tt> - mensajes de depuración generador por errores serios.
Predeterminado.
<li><tt>misc</tt> - mensajes de depuración generados por varios errores
(ejemplo: para ver el estado del normalizador de paquetes y las fallas al
crear estados).
<li><tt>loud</tt> - mensajes de depuración generados por condiciones comunes
(ejemplo: para ver el estado de la identificación pasiva de huellas de SO).
</ul>
<dd><tt>urgent</tt> es la opción predeterminada.
</dl>

<a name="fingerprints"></a>
<p>
<dl>
<dt><tt>set fingerprints <i>fichero</i></tt><br>
<dd>Establece el archivo desde el que se cargarán los <i>fingerprints</i> de
los sistemas operativos. Para su uso con la 
<a href="filter.html#osfp">identificación pasiva de la huella de SO</a>.
El valor predeterminado es <tt>/etc/pf.os</tt>.
</dl>

<a name="limit"></a>
<p>
<dl>
<dt><tt>set limit <i>opción valor</i></tt><br>
<dd>Establece diferentes límites en el funcionamiento de pf.
<ul>
<li><tt>frags</tt> - número máximo de entradas en la 
reserva de memoria usada para el
reensamblaje de paquetes (reglas de scrub).  
El valor predeterminado es 5000.
<li><tt>src-nodes</tt> - número máximo de entradas en la reserva de memoria
usada para seguirle la pista a las direcciones IP de origen (generadas por
las opciones <tt>sticky-address</tt> y <tt>source-track</tt>).
El valor predeterminado es 10000.
<li><tt>states</tt> - número máximo de entradas en la 
reserva de memoria usado para las entradas en la tabla de estado
(reglas de <a href="filter.html">filtrado</a> que especifican <tt>keep
state</tt>).  El valor predeterminado es 10000.
<li><tt>tables</tt> - número máximo de
<a href="tables.html">tablas</a> que pueden crearse.
El valor predeterminado es 1000.
<li><tt>table-entries</tt> - el límite global de cuántas  
direcciones pueden ser almacenadas en todas las tablas.
El valor predeterminado es 200000.
Si el sistema dispone de menos de 100MB de memoria física, el valor 
predeterminado se fija en 100000.
</ul>
</dl>

<a name="loginterface"></a>
<p>
<dl>
<dt><tt>set loginterface <i>interfaz</i></tt><br>
<dd>Establece la interfaz desde la que PF debe recoger
estadísticas, como el número de bytes que han
entrado o salido y los paquetes que han pasado o que se han bloqueado.
Estas estadísticas sólo se pueden recoger para <i>una</i> sola
interfaz por vez.  Nótese que los contadores <tt>match</tt>,
<tt>bad-offset</tt>, etc., y los contadores de la tabla de estado se
registrarán se haya o no configurado
<tt>logininterface</tt>.
Para deshabilitar esta opción, establézcala en <tt>none</tt>.
El valor predeterminado es <tt>none</tt>.
</dl>

<a name="optimization"></a>
<p>
<dl>
<dt><tt>set optimization <i>opción</i></tt><br>
<dd>Optimiza PF para uno de los siguientes entornos de red:
<ul>
<li><tt>normal</tt> - sirve para para casi todas las redes. 
<li><tt>high-latency</tt> - redes de gran latencia, como las conexiones
por satélite.
<li><tt>aggressive</tt> - hace que expiren rápidamente las conexiones 
 de la tabla de estado.  Esto puede reducir drásticamente los 
requisitos de memoria en un cortafuegos con mucha actividad, 
aunque a riesgo de descartar conexiones inactivas demasiado pronto.
<li><tt>conservative</tt> - un tipo de configuración extremadamente
conservador.  Evita descartar las conexiones inactivas, aunque a coste de
una mayor utilización de la memoria y de un ligero incremento en
el uso del procesador.
</ul>
<dd>El valor predeterminado es <tt>normal</tt>.
</dl>

<a name="ruleset-optimization"></a>
<p>
<dl>
<dt><tt>set ruleset-optimization <i>opción</i></tt>
<dd>Controla el funcionamiento del optimizador del
conjunto de reglas PF.
<ul>
<li><tt>none</tt> - desactiva completamente el optimizador.
<li><tt>basic</tt> - activa las siguientes optimizaciones del conjunto de reglas:
	<ol>
	<li>suprime reglas duplicadas
	<li>suprime reglas que son un subconjunto de otra regla
	<li>combina múltiples reglas en una tabla cuando es ventajoso
	<li>reordena las reglas para mejorar el rendimiento de la evaluación
	</ol>
<li><tt>profile</tt> - utiliza el conjunto de reglas cargadas actualmente
	como un perfil de <i>feedback</i> para adaptar el ordenamiento de 
	las reglas que contengan la palabra-clave "quick" para el tráfico 
	de red real.
</ul>
<dd>A partir de OpenBSD 4.2, el valor predeterminado es  <tt>basic</tt>.
Para una descripción más completa, véase
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.8"
>pf.conf(5)</a>.
</dl>

<a name="skip"></a>
<p>
<dl>
<dt><tt>set skip on <i>interfaz</i></tt><br>
<dd>Salta <i>todo</i> procesamiento de PF en la <tt><i>interfaz</i></tt>.
Esto puede resultar útil en interfaces de <i>loopback</i>, donde 
no se requiere filtrado, normalización, encolado, etc.
Se puede usar esta opción mútiples veces.
De forma predeterminada esta opción permanece sin configurar. 
</dl>

<a name="state-policy"></a>
<p>
<dl>
<dt><tt>set state-policy <i>opción</i></tt><br>
<dd>Establece el comportamiento de PF en lo que respecta al mantenimiento de
estados.
Este comportamiento puede ser sobreescrito en cada regla.
Véase <a href="filter.html#state">Mantenimiento del estado</a>.
<ul>
<li><tt>if-bound</tt> - los estados son vinculados con la interfaz en la que
fueron creados.
Si el tráfico coincide con una entrada en la tabla de estados pero no está
cruzando la interfaz registrada en esa entrada, la coincidencia es
rechazada.
El paquete debe entonces coincidir con una regla de filtrado o será
descartado/rechazado del todo.
<li><tt>floating</tt> - los estados pueden coincidir con los paquetes en
cualquier interfaz. Mientras el paquete coincida con una entrada de estado y 
esté cruzando en la misma dirección que tenía cuando se creó el estado, 
no importa qué interfaz esté cruzando, el paquete pasará.
</ul>
<dd>La configuración predeterminada es <tt>floating</tt>.
</dl>

<a name="timeout"></a>
<p>
<dl>
<dt><tt>set timeout <i>opción valor</i></tt><br>
<dd>Configura varios tiempos de expiración (en segundos).
<ul>
<li><tt>interval</tt> - segundos que pasan entre las purgas de estados
expirados y los fragmentos de paquetes.
El valor predeterminado es <tt>10</tt>.
<li><tt>frag</tt> - segundos que pasan antes de que expire un fragmento
desensamblado.
El valor predeterminado es <tt>30</tt>
<li><tt>src.track</tt> - segundos que se mantiene una entrada de
<a href="filter.html#stateopts">seguimiento de origen</a> en memoria
después de que el último estado expire. 
El valor predeterminado es <tt>0</tt> (cero).
</ul>
</dl>

<p>
Ejemplo:
<p>
<table border=0 width="650">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>
set timeout interval 10
set timeout frag 30
set limit { frags 5000, states 2500 }
set optimization high-latency
set block-policy return
set loginterface dc0
set fingerprints "/etc/pf.os.test"
set skip on lo0
set state-policy if-bound
</pre>
</td></tr>
</table>


<p>
[<a href="shortcuts.html">Anterior: Atajos para crear conjuntos de
reglas</a>]
[<a href="index.html">Contenidos</a>]
[<a href="anchors.html">Siguiente: Anclajes</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: options.html,v 1.24 ]<br>
$Translation: options.html,v 1.10 2011/02/18 17:24:49 mvidal Exp $<br>
-->
$OpenBSD: options.html,v 1.9 2011/02/20 10:08:24 ajacoutot Exp $
</small>

</body>
</html> 
