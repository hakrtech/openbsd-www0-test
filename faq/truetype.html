<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Antialiasing and TrueType Fonts on OpenBSD 2.9 or later</title>
<link rev="made" href="www@OpenBSD.org>
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq,antialiasing,truetype,fonts,XFree86,XF4">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2001 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000" link= "#23238E">
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif">

<h1>Antialiasing and TrueType Fonts on OpenBSD 2.9 or later</h1>

<p>
<ul><h3>Table of Contents</h3>
<li><a href="truetype.html#xterm">xterm screenshot</a></li>
<li><a href= "truetype.html#konqueror">konqueror screenshot</a></li>
<li><a href= "truetype.html#work">What needs to be done to get it?</a></li>
<li><a href= "truetype.html#applications">Which applications can use it?</a></li>
</ul>
</p>
<hr>

<p>
<a name= "xterm"></a>
<h2>xterm screenshot</h2>
xterm with aliased and antialiased fonts side-by-side:
<br>

<div align="center"><img src="images/xterm_diff.jpg" alt="standard and antialiased xterm"></div>

<p>
<a name= "konqueror"></a>
<h2>konqueror screenshot</h2>
Still not convinced? 
Let's have a look at this:
<br>

konqueror with aliased and antialiased fonts side-by-side:
<br>
<img src="images/konqueror_diff.jpg" alt="standard and antialiased konqueror">


<p>
<a name= "work"></a>
<h2>What needs to be done to get it?</h2>

OpenBSD 2.9 ships with XFree86 4.0.3 with Xft Render Extensions enabled.
To be able to use it, your XServer (graphic card driver) has to support them. 
Some drivers have not been converted to the 'fb' code yet and thus cannot use the RENDER extension which is needed.
<br>

Check by:
<br>
<ul>
<table border=0 width="80%">
	<tr>
			<td nowrap bgcolor="#EEEEEE">
			<b>$ /usr/X11R6/bin/xdpyinfo | grep RENDER</b><br>
			RENDER
			</td>
	</tr>
</table>	
</ul>
If it doesn't say RENDER in its extension list, you'll have to wait until someone implements the extension for that card.

<p>
The next step is to grab and install some TrueType fonts.
The author of the Xft Render Extensions, Keith Packard, has put a package of TrueType fonts together: 
</p>
<p>
<cite>"I discovered a nice set of truetype fonts available for free (as in beer)
from our friends in Redmond.  I created an archive of all of those fonts
(include times, arial, comic, courier, georgia, impact, trebuchet, verdana 
and webdings) along with a fonts.scale and XftConfig file; you can
get this at ..."</cite> 

        <div align="center"><a href="http://keithp.com/~keithp/truetype.tar.gz">http://keithp.com/~keithp/truetype.tar.gz</a></div>
<br>
Or directly (font by font, and without a <code>fonts.dir</code>):
        <div align="center"><a href="http://www.microsoft.com/typography/fontpack/default.htm">http://www.microsoft.com/typography/fontpack/default.htm</a></div>
</p>
<br>

After downloading, unpack the fonts in <code>/usr/X11R6/lib/X11/fonts</code>:
<br>
<ul>
<table border=0 width="80%">
	<tr>
			<td nowrap bgcolor="#EEEEEE">
			<b># cd /usr/X11R6/lib/X11/fonts<br>
			# tar xzf ~/truetype.tar.gz</b><br>
			</td>
	</tr>
</table>	
</ul>

If you are the only user on the system who wants to use these fonts,
create <code>$HOME/.xftconfig</code> with this line:
<br>
<pre>
	dir "/usr/X11R6/lib/X11/fonts/truetype"
</pre>
To enable the fonts systemwide, you have to edit 
<code>/usr/X11R6/lib/X11/XftConfig</code> and add
<br>
<pre>
	dir "/usr/X11R6/lib/X11/fonts/truetype"
</pre>

right after <code>dir "/usr/X11R6/lib/X11/fonts/Type1"</code>.
<br>


<p>
<a name= "applications"></a>
<h2>Which applications can use it?</h2>
xterm, xditview, and all applications using QT2 (ie. all KDE2 applications) are aware of Xft.

<p>
<li><h3>xterm</h3>
Fire up with:
<ul>
<table border=0 width="80%">
	<tr>
		<td nowrap bgcolor="#EEEEEE">
			<b>$ xterm -fa 'Andale Mono' -fs 14</b><br>
		</td>
		<td nowrap>
			<code>option: &nbsp; resource: &nbsp; meaning </code> <br>
			&nbsp;<code>-fa  &nbsp;&nbsp;&nbsp; *faceName</code> &nbsp;&nbsp; Font face name <br>
			&nbsp;<code>-fs  &nbsp;&nbsp;&nbsp; *faceSize</code> &nbsp;&nbsp; Font size <br>
		</td>
	</tr>
</table>	
</ul>

The other TrueType fonts (Arial, Georgia, Verdana, ...) don't work well in xterm. xterm looses one pixel off the character, because xterm is not prepared to deal with characters that extend beyond their cell.
</li>
</p>

<p>
<li><h3>QT2/KDE2 applications</h3>
To start a QT2/KDE2 application like the konqueror browser, just <b>1</b> (!)
environment variable has to be set:
<br>
Launch the application with <code>QT_XFT</code> set to true:
<ul>
<table border=0 width="800">
	<tr>
			<td nowrap bgcolor="#EEEEEE">
			<b>$ env QT_XFT=true konqueror</b><br>
			</td>
	</tr>
</table>	
</ul>
or for kdbg:
<ul>
<table border=0 width="800">
	<tr>
			<td nowrap bgcolor="#EEEEEE">
			<b>$ env QT_XFT=true kdbg</b><br>
			</td>
	</tr>
</table>	
</ul>

and you are done.
</li>
</p>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt= "[back]"></a>
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: truetype.html,v 1.4 2001/11/26 16:06:16 reinhard Exp $</small>
</p>
</body>
</html>
