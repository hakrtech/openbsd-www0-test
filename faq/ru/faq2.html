<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>2 - Другие источники информации по OpenBSD</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq">
<meta name="distribution"  content="global">
<meta name="copyright"     content="This document copyright 1998-2011 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../ru/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">
</a>
<p>
<font color="#0000e0">
<a href="index.html">[FAQ-Index]</a>
<a href="faq1.html">[Глава 1 - Введение в OpenBSD]</a>
<a href="faq3.html">[Глава 3 - Методы получения OpenBSD]</a>
</font>

<h1><font color="#e00000">2 - Другие источники информации по OpenBSD</font></h1>
<hr>

<p>
<h3>Содержание</h3>
<ul>
<li><a href="#WebSites">2.1 - Web</a>
<li><a href="#MailLists">2.2 - Почтовые рассылки</a>
<li><a href="#ManPages">2.3 - Man-страницы</a>
<li><a href="#Bugs">2.4 - Отчёт об ошибке</a>
</ul>

<hr>


<p>
<a name="WebSites"></a>
<h2>2.1 - Web</h2>

<p>
Официальный сайт проекта OpenBSD находится по адресу:
<a href="http://www.openbsd.org/ru/">http://www.OpenBSD.org/ru/</a>.

<p>
Там вы найдете массу полезной информации по всем вопросам,
касающимся OpenBSD.

<p>
<a href="http://www.undeadly.org">OpenBSD Journal</a> - новости
и мнения пользователей о OpenBSD.

<p>
<a href="http://www.openbsdsupport.org/">OpenBSDsupport.org</a> -
сайт с коллекцией документации, написанной пользователями. Качество
документации варьируется, на зато зачастую охватываются отсутствующие
в официальной документации темы.

<p>
В интернете есть много страниц и целых сайтов, посвященных OpenBSD.
Как и всегда при поиске информации в Сети, хорошую помощь вам окажут
поисковые системы, но проявите небольшую долю скептицизма к находимой
информации. И, как обычно, не стоит вводить вслепую команды, смысла
которых вы не понимаете.

<p>
<a name="MailLists"></a>
<h2>2.2 - Почтовые рассылки</h2>

<p>
Проект OpenBSD поддерживает несколько почтовых рассылок, на которые
стоит подписаться. Для подписки на рассылку отправьте почтовое сообщение
на адрес <a href="mailto:majordomo@openbsd.org">majordomo@openbsd.org</a>.
Этот адрес предназначен для автоматической подписки/отписки на рассылки.
В тело вашего сообщения вы должны включить одной строкой команду для
подписки на рассылку, на которую подписываетесь. К примеру:

<blockquote>
<pre>
<strong>subscribe announce</strong>
</pre>
</blockquote>

<p>
Система рассылки пришлет вам сообщение с просьбой подтвердить ваши намерения
относительно подписки на данную рассылку. Это сделано для того, чтобы никто
другой не смог подписать вас на ненужную вам рассылку без вашего желания.
Сообщение будет содержать информацию о нескольких способах подтверждения
подписки: веб-ссылка на <a href="http://lists.openbsd.org">сайт почтовых
рассылок</a>, отправка ответного сообщения
и отправка сообщения на <tt>majordomo@openbsd.org</tt>. Используйте любой
удобный Вам метод. Обратите внимание, все способы используют уникальный номер
вида A56D-70D4-52C3 с ограниченным временем действия, опять-таки, чтобы
убедиться, что именно <i>данный человек</i> подписывается на рассылку
(что это <i>настоящая</i> заявка).

<p>
Как только Вы подтвердите ваше намерение подписаться, Ваш адрес немедленно
будет добавлен в список рассылки, и система подписки пришлет Вам уведомление
о факте добавления вашего адреса.

<p>
Для отписки от рассылки вам необходимо отправить e-mail сообщение на
<a href="mailto:majordomo@openbsd.org">majordomo@openbsd.org</a>, следующего
содержания :

<blockquote>
<pre>
<strong>unsubscribe announce</strong>
</pre>
</blockquote>

<p>
При любых затруднениях в работе с системой подписки, сначала внимательно
прочитайте файл справки, который можно получить, отправив e-mail на
<a href="mailto:majordomo@openbsd.org">majordomo@openbsd.org</a> с командой
"help" в теле письма.

<p>
Также имеется возможность управления подпиской через веб-интерфейс по адресу
<a href="http://lists.openbsd.org">http://lists.openbsd.org</a>.

<p>
Некоторыми из наиболее популярных OpenBSD рассылок являются:

<p>
<ul>
    <li><b>announce</b> - Важные объявления. Небольшая по объему рассылка.
    <li><b>security-announce</b> - Объявления о проблемах безопасности.
    Небольшая по объему рассылка.
    <li><b>misc</b> - Общие вопросы/ответы пользователей. Наиболее активная
    рассылка, и ее следует использовать "по умолчанию" для большинства вопросов.
    <li><b>bugs</b> - Ошибки, полученные через sendbug(1) и их обсуждение.
    <li><b>source-changes</b> - Автоматическая рассылка об изменениях в дереве
    исходников CVS. Как только разработчик коммитит изменения в дерево OpenBSD,
    <a href="../../de/why-cvs.html">CVS</a> отошлет сообщение, используя данную
    рассылку.
    <li><b>ports</b> - Обсуждение портов OpenBSD.
    <li><b>ports-changes</b> - Автоматическая рассылка об измении CVS дерева
    исходников портов.
    <li><b>advocacy</b> - Вопросы пропаганды OpenBSD, а также темы, которые никак
    не попадают под <b>misc</b>-тематику.
</ul>

<p>
Перед отправкой вопроса в <b>misc</b> или любой другой лист, пожалуйста, проверьте сначала
архив, чтобы не задавать ранее обсуждавшиеся вопросы. Даже если вы впервые столкнулись
с данным вопросом или проблемой, возможно другие участники листа уже обсуждали ее
несколько раз на прошлой неделе, так что они вряд ли обрадуются снова увидев ее.
Если задаваемый вопрос касается оборудования, <i>всегда присылайте вывод 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a></i>

<p>
Вы также можете найти другие архивы, рекомендуемые списки рассылок и разную информацию
о списках рассылок на <a href="../../ru/mail.html">специальной странице</a>.

<p>
Начинающим в OpenBSD и UNIX также может быть полезен неофициальный почтовый лист
<a href="http://mailman.theapt.org/listinfo/openbsd-newbies">OpenBSD Newbies</a>.

<p>
<a name="ManPages"></a>
<h2>2.3 - Man-страницы</h2>

<p>
OpenBSD содержит большое количество документации, как в форме руководств (мануалов),
так и в виде более обширных документов, описывающих отдельные приложения.
Немалые усилия прилагаются для обеспечения точного соответствия и актуальности страниц
руководств. В любых ситуациях, страницы руководств могут считаться авторитетным источником
информации по OpenBSD.

<p>
<!-- XXXrelease -->
Для использования страниц руководств и другой документации
<a href="faq4.html#FilesNeeded">должны быть</a> установлены компоненты
<tt>man43.tgz</tt> и <tt>misc43.tgz</tt>.

<p>
Далее приведен список некоторых страниц руководств, наиболее полезных для начинающих
пользователей:

<p>

<b>Для начинающих</b>
<ul>
<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8">afterboot(8)</a></b>
- то, что нужно проверить после первого запуска системы.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=help&amp;sektion=1">help(1)</a></b>
- справка для пользователей и администраторов не знакомых с системой.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hier&amp;sektion=7">hier(7)</a></b>
- путеводитель по файловой системе.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=man&amp;sektion=1">man(1)</a></b>
- утилита, отображающая страницы руководств.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=1">intro(1)</a></b>
- введение в стандартные команды.
Смотрите также вступительные материалы для других разделов руководства:
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=2">intro(2)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=3">intro(3)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=4&amp;arch=i386">intro(4)</a>
(примечание: документ intro(4) различен для разных <a href="../../ru/plat.html">платформ</a>)
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=5">intro(5)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=6">intro(6)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=7">intro(7)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=8">intro(8)</a>
и
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=9">intro(9)</a>.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8">adduser(8)</a></b>
- команда для добавления новых пользователей.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw(8)</a></b>
-  редактирование главного файла паролей.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a></b>
- утилита для чтения и записи меток дисков.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=reboot&amp;sektion=8">reboot, halt(8)</a></b>
- остановка и перезапуск системы.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=shutdown&amp;sektion=8">shutdown(8)</a></b>
- остановка системы в заданное время.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a></b>
- отображает сообщения ядра, выводившиеся во время загрузки.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a></b>
- запуск команд, требующих прав суперпользователя (root), без входа в систему от его имени.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1">mg(1)</a></b>
- текстовый редактор, напоминающий emacs.
</ul>

<b>Для более опытных пользователей</b>
<ul>

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a></b>
- описание процедуры запуска системы.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot_config&amp;sektion=8">boot_config(8)</a></b>
- как изменить конфигурацию ядра во время загрузки.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc-local&amp;sektion=1">gcc-local(1)</a></b>
- описывает модификации компилятора 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a>, внесенные в OpenBSD.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a></b>
- настройка параметров сетевого интерфейса.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5">login.conf(5)</a></b>
- формат конфигурационного файла, описывающего классы регистрационных записей.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstat&amp;sektion1">netstat(1)</a></b>
- отображение информации, связанной с сетевой активностью системы.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&amp;sektion=8">release(8)</a></b>
- описание процедуры сборки собственной версии OpenBSD.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&amp;sektion=1">sendbug(1)</a></b>
- отправить отчет о проблеме (problem report, PR) в OpenBSD на центральный сайт поддержки.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=style&amp;sektion=9">style(9)</a></b> 
- руководство по стилю написания кода для ядра OpenBSD.

<li><b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8">sysctl(8)</a></b>
- утилита для отображения или изменения переменных состояния ядра.
</ul>

<p>
<!-- XXXrelease -->
Все страницы руководства OpenBSD доступны через веб-интерфейс по адресу 
<a href="http://www.openbsd.org/cgi-bin/man.cgi">http://www.openbsd.org/cgi-bin/man.cgi</a>,
а также на вашей машине, если Вы установили компонент <tt>man40.tgz</tt>.

<p>
Обычно, если Вам известно имя команды или название страницы руководства, Вы можете получить
к ней доступ выполнив команду <kbd>"man команда"</kbd>. Например: <kbd>"man vi"</kbd> для
получения информации о редакторе vi.
Если Вы не знаете имя команды, или если <kbd>"man команда"</kbd> не находит нужную Вам
страницу, вы можете осуществить поиск базы данных man выполнив команду <kbd>"apropos нечто"</kbd>
или <kbd>"man -k нечто"</kbd>, где "нечто" является возможной частью названия страницы руководства
которую Вы ищите.
Например:

<blockquote>
<pre>
# <strong>apropos "time zone"</strong>
tzfile (5) - time zone information
zdump (8) - time zone dumper
zic (8) - time zone compiler
</pre>
</blockquote>

<p>
Номера в скобках обозначают номер секции страницы руководств в которой данная
страница может быть найденна. В некоторых случаях Вы можете найти страницы руководства
с идентичными именами, находящиеся в разных секциях. Например, представте себе что Вы
хотите узнать формат файла конфигурации для сервиса cron. Когда Вы узнаете секцию в
которой находится нужная Вам страница, Вы выполняете команду <kbd>"man n command"</kbd>,
где n является номером секции руководства.

<blockquote>
<pre>
# <strong>man -k cron</strong>
cron (8) - clock daemon
crontab (1) - maintain crontab files for individual users
crontab (5) - tables for driving cron
# <strong>man 5 crontab</strong>
</pre>
</blockquote>

<p>
Многие считают удобным иметь под рукой распечатанные страницы руководств.
Далее следует описанее процесса получения страниц руководств, в формате
удобном для печати.

<h3>Как я могу вывести на экран исходный текст страницы руководства
(т.е. тот, который заканчивается номером, например tcpdump.8)?</h3>

<p>
Их можно найти в дереве исходников (ветка src). Страницы руководства в дереве
не форматированы, могут быть обновлены с помощью <a href="../../ru/anoncvs.html">CVS</a>.
Чтобы посмотреть эти страницы, выполните:

<blockquote>
<pre>
# <b>mandoc &lt;file&gt; | more</b>
</pre>
</blockquote>


<h3>Как могу вывести страницу руководства без форматирования и управляющих
символов?</h3>

<p>
Следующая команда полезна для получения страницы руководства без форматирования,
вместе с непечатными символами.<br>
Пример:

<blockquote>
<pre>
# <b>man &lt;Befehl&gt; | col -b</b>
</pre>
</blockquote>

<h3>Как я могу получить подготовленную к печати страницу руководства в
формате PostScript?</h3>

<p>
Заметьте что <file> должен быть исходный файл страницы руководства
(обычно эти файлы заканчиваются на номер; например <tt>tcpdump.8</tt>).
Страницы руководств отформатированные PostScript'ом выглядят очен хорошо.
Они могут быть распечатаны или прочитаны с экрана программой gv (GhostView)
или эквивалентом. GhostView может быть найден в нашей <a href="faq15.html">
колекции пакетов</a>.
Используйте опции команды 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mandoc&amp;sektion=1">
mandoc(1)</a> для получения PostScript версии страницы руководства о системе
OpenBSD:

<blockquote>
<pre>
# <b>mandoc -Tps &lt;file&gt; &gt; outfile.ps</b>
</pre>
</blockquote>

<h3>Как мне получить сжатые страницы руководств?</h3>

<p>
Для тех, кто собирает свою систему из исходников, существуют несколько опций
связанных с построением страниц руководств. Эти опции могут быть записаны в 
файл /etc/mk.conf (возможно вам придется создать этот файл) и будут включены
во время сборки системы. Одна особая опция позволяет создать сжатые страницы
руководств, что сэкономит место на диске. Такие страницы могут быть просмотрены
как обычно, командой man. Что бы выбрать эту опцию, добавте следующую строку в
<tt>/etc/mk.conf</tt>:

<blockquote>
<pre>
MANZ=yes
</pre>
</blockquote>

Еще одна полезная опция позволяет вам создать страницы руководств при сборке
системы не только в ASCII формате, но и в PostScript. Достичь этого можно,
добавив строку <tt>MANPS=yes</tt> в /etc/mk.conf.
Смотри подробности в
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mk.conf&amp;sektion=5">
mk.conf(5)</a>.


<h3>Что такое файлы info?</h3>

<p>
Часть документации OpenBSD содержится в файлах формате info, как правило находящихся в
<tt>/usr/share/info</tt>. Это альтернативная форма документации в соответствии с GNU.
Многие из этих файлов более свежи чем страницы руководств поставляемых GNU, и могут быть
просмотрены командой
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=info&amp;sektion=1">info(1)</a>.
Например, чтоб посмотреть информацию о компиляторе GNU, 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a>,
выполните:

<blockquote>
<pre>
# <b>info gcc</b>
</pre>
</blockquote>

После использования info-файлов, вы по-настоящему поймете ценность наших man-страниц.

<h3>Как сделать, чтобы в XTerm использовались цвета при отображении
страниц руководств?</h3>

<p>
По умолчанию файл конфигурации 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xterm&amp;sektion=1"
>xterm(1)</a> не использует цвета при показе страниц руководств.
Для того чтобы он это делал, скопируйте файл <tt>/etc/X11/app-defaults/XTerm-color</tt>
в свою домашнюю директорию, и переименуйте его в "<tt>.Xdefaults</tt>".
Будьте осторожны - не перепишите другие настройки если "<tt>.Xdefaults</tt>" уже
существует. Этот файл содержит все нужные настройки для включения поддержки цвета
в XTerm. Нужно только раскомментировать следующие три строчки:

<blockquote>
<pre>
!*VT100*colorULMode: on
!*VT100*underLine: off
!*VT100*colorBDMode: on
</pre>
</blockquote>

Остальные опции в этом файле позволяют вам выбрать цвета для всяческих настроек.
Относящиеся к страницам руководства:

<blockquote>
<pre>
*VT100*colorUL: yellow
*VT100*colorBD: white
</pre>
</blockquote>

Это создаст весьма жуткий внешний вид страницам руководства, поэтому Вам стоит выбрать
цвета по своему вкусу: мы можем Вам предложить red (красный) для "colorUL" и magenta 
(фиолетовый) для "colorBD".

Также существует просмотрщик страниц руководств для X11,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xman&amp;sektion=1">xman(1)</a>,
который обеспечивает альтернативный (графический) интерфейс.
Смотрите страницы руководств xterm и xman.

<h3>Как мне написать свою собственную страницу руководства (мануал)?</h3>

<p>
Если вы хотите написать страницу руководства для собственного приложения,
Вы можете найти пособие в mdoc.samples(7). Также имеется полезное руководство в
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mdoc&amp;sektion=7"
>mdoc(7)</a>.

<p>
<a name="Bugs"></a>
<h2>2.4 - Отчёт об ошибке</h2>

Прежде чем кричать "Bug!" ("Баг! Ошибка!"), пожалуйста, удостоверьтесь, что это
именно так. Если же Вы просто не понимаете, как что-то делается в OpenBSD или как
что-либо работает, и не можете решить проблему, используя <a href="#ManPages">
страницы руководств</a> или вебсайт OpenBSD, попробуйте использовать 
<a href="#MailLists">список рассылки</a> (например misc@openbsd.org),
чтобы попросить о помощи.

Если это Ваш первый опыт использования OpenBSD, будьте реалистичны: Вы скорее
всего не нашли неизвестную ошибку. Также заметьте что дефекты железа могут выглядеть
как ошибки в программах. Поэтому, пожалуйста, проверьте свое аппаратное обеспечение
перед тем как заявлять, что Вы нашли ошибку.

<p>
Наконец, перед отправлением сообщении об ошибке, пожалуйста прочтите
<a href="../../ru/report.html">http://www.openbsd.org/ru/report.html</a>.

<p>
Правильно оформленное сообщение об ошибках является одним из самых главных
обязанностей пользователя. Обычно нужна очень детальная информация, чтобы
диагностировать серьезные ошибки. Разработчики часто получают сообщения об
ошибках похожие на это:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
From: joeuser@example.com
To: bugs@openbsd.org
Subject: HELP!!!

I have a PC and it won't boot!!!!! It's a 486!!!!!

</pre></td></tr></table>

<p>
Надеемся что большинство людей понимают, почему такое сообщение будет удалено.
Все сообщения об ошибках должны содержать детальную информацию. Если Joe User
действительно ожидал помощи в определении этой ошибки, он или она добавил бы
больше деталей... например вот так:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
From: smartuser@example.com
To: bugs@openbsd.org
Subject: 3.3-beta panics on a SPARCStation2

OpenBSD 3.2 installed from an official CD-ROM installed and ran fine
on this machine.

After doing a clean install of 3.3-beta from an FTP mirror, I find the
system randomly panics after a period of use, and predictably and
quickly when starting X.

This is the dmesg output:

OpenBSD 3.3-beta (GENERIC) #9: Mon Mar 17 12:37:18 MST 2003
    deraadt@sparc.openbsd.org:/usr/src/sys/arch/sparc/compile/GENERIC
real mem = 67002368
avail mem = 59125760
using 200 buffers containing 3346432 bytes of memory
bootpath: /sbus@1,f8000000/esp@0,800000/sd@1,0
mainbus0 (root): SUNW,Sun 4/75
cpu0 at mainbus0: CY7C601 @ 40 MHz, TMS390C602A FPU; cache chip bug
- trap page uncached
cpu0: 64K byte write-through, 32 bytes/line, hw flush cache enabled
memreg0 at mainbus0 ioaddr 0xf4000000
clock0 at mainbus0 ioaddr 0xf2000000: mk48t02 (eeprom)
timer0 at mainbus0 ioaddr 0xf3000000 delay constant 17
auxreg0 at mainbus0 ioaddr 0xf7400003
zs0 at mainbus0 ioaddr 0xf1000000 pri 12, softpri 6
zstty0 at zs0 channel 0 (console i/o)
zstty1 at zs0 channel 1
zs1 at mainbus0 ioaddr 0xf0000000 pri 12, softpri 6
zskbd0 at zs1 channel 0: reset timeout
zskbd0: no keyboard
zstty2 at zs1 channel 1: mouse
audioamd0 at mainbus0 ioaddr 0xf7201000 pri 13, softpri 4
audio0 at audioamd0
sbus0 at mainbus0 ioaddr 0xf8000000: clock = 20 MHz
dma0 at sbus0 slot 0 offset 0x400000: rev 1+
esp0 at sbus0 slot 0 offset 0x800000 pri 3: ESP100A, 25MHz, SCSI ID 7
scsibus0 at esp0: 8 targets
sd0 at scsibus0 targ 1 lun 0: &lt;SEAGATE, ST1480 SUN0424, 8628&gt; SCSI2 0/direct fixed
sd0: 411MB, 1476 cyl, 9 head, 63 sec, 512 bytes/sec, 843284 sec total
sd1 at scsibus0 targ 3 lun 0: &lt;COMPAQPC, DCAS-32160, S65A&gt; SCSI2 0/direct fixed
sd1: 2006MB, 8188 cyl, 3 head, 167 sec, 512 bytes/sec, 4110000 sec total
le0 at sbus0 slot 0 offset 0xc00000 pri 5: address 08:00:20:13:10:b9
le0: 16 receive buffers, 4 transmit buffers
cgsix0 at sbus0 slot 1 offset 0x0: SUNW,501-2325, 1152x900, rev 11
wsdisplay0 at cgsix0
wsdisplay0: screen 0 added (std, sun emulation)
fdc0 at mainbus0 ioaddr 0xf7200000 pri 11, softpri 4: chip 82072
fd0 at fdc0 drive 0: 1.44MB 80 cyl, 2 head, 18 sec
root on sd0a
rootdev=0x700 rrootdev=0x1100 rawdev=0x1102

This is the panic I got when attempting to start X:

panic: pool_get(mclpl): free list modified: magic=78746572; page 0xfaa93000;
 item addr 0xfaa93000
Stopped at      Debugger+0x4:   jmpl            [%o7 + 0x8], %g0
RUN AT LEAST 'trace' AND 'ps' AND INCLUDE OUTPUT WHEN REPORTING THIS PANIC!
DO NOT EVEN BOTHER REPORTING THIS WITHOUT INCLUDING THAT INFORMATION!
ddb> trace
pool_get(0xfaa93000, 0x22, 0x0, 0x1000, 0x102, 0x0) at pool_get+0x2c0
sosend(0x16, 0xf828d800, 0x0, 0xf83b0900, 0x0, 0x0) at sosend+0x608
soo_write(0xfac0bf50, 0xfac0bf70, 0xfac9be28, 0xfab93190, 0xf8078f24, 0x0)
at soo_write+0x18
dofilewritev(0x0, 0xc, 0xfac0bf50, 0xf7fff198, 0x1, 0xfac0bf70) at
dofilewritev+0x12c
sys_writev(0xfac87508, 0xfac9bf28, 0xfac9bf20, 0xf80765c8, 0x1000, 0xfac0bf70)
at sys_writev+0x50
syscall(0x79, 0xfac9bfb0, 0x0, 0x154, 0xfcffffff, 0xf829dea0) at syscall+0x220
slowtrap(0xc, 0xf7fff198, 0x1, 0x154, 0x1, 0xfac87508) at slowtrap+0x1d8
ddb> ps

   PID   PPID   PGRP    UID  S       FLAGS  WAIT       COMMAND
 27765   8819  29550      0  3        0x86  netio      xconsole
  1668  29550  29550      0  3      0x4086  poll       fvwm
 15447  29550  29550      0  3     0x44186  poll       xterm
  8819  29550  29550     35  3      0x4186  poll       xconsole
  1238  29550  29550      0  3      0x4086  poll       xclock
 29550  25616  29550      0  3      0x4086  pause      sh
  1024  25523  25523      0  3     0x40184  netio      XFree86
*25523  25616  25523     35  2     0x44104             XFree86
 25616  30876  30876      0  3      0x4086  wait       xinit
 30876  16977  30876      0  3      0x4086  pause      sh
 16977      1  16977      0  3      0x4086  ttyin      csh
  5360      1   5360      0  3        0x84  select     cron
 14701      1  14701      0  3     0x40184  select     sendmail
 12617      1  12617      0  3        0x84  select     sshd
 27515      1  27515      0  3       0x184  select     inetd
  1904      1   1904      0  2        0x84             syslogd
  9125      1   9125      0  3        0x84  poll       dhclient
     7      0      0      0  3    0x100204  crypto_wa  crypto
     6      0      0      0  3    0x100204  aiodoned   aiodoned
     5      0      0      0  3    0x100204  syncer     update
     4      0      0      0  3    0x100204  cleaner    cleaner
     3      0      0      0  3    0x100204  reaper     reaper
     2      0      0      0  3    0x100204  pgdaemon   pagedaemon
     1      0      1      0  3      0x4084  wait       init
     0     -1      0      0  3     0x80204  scheduler  swapper

Thank you!
</pre></td></tr></table>

<p>
Прочитайте <a href="../../ru/report.html">report.html</a> для получения
дополнительной информации о создании сообщений об ошибках. Детальная
информация о вашем железе нужна, если вы думаете, что ошибка может быть
связана с вашим железом, или его конфигурацией. Обычно, вывода 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8"
>dmesg(8)</a> достаточно. Также требуется детальное описание вашей проблемы.

Заметьте, что dmesg выдал описание железа, а текст сообщения объяснил
почему Smart User решил что сама система исправна (3.2 работала без сбоев),
и как это зависание возникает (запуск X), и вывод команд "<tt>ps</tt>" и 
"<tt>trace</tt>".
В данном случае Smart User получил эти данные с консоли через последовательный
порт; если у Вас нет доступа к консоли через <a href="faq7.html#SerCon">серийный
порт</a>, Вам придется записать все сообщения об ошибках на бумаге.
(Приведенный пример - пример настоящая существовавшей проблемы, и представленная
информация помогла найти решение на системах Sun4c.)

<p>
Если бы у Smart User'а была рабочая OpenBSD система, с которой он бы хотел
отправить сообщение об ошибке, он бы использовал утилиту 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&amp;sektion=1"
>sendbug(1)</a>.

sendbug(1) отправляет сообщение в систему слежения за ошибками GNATS.
Конечно sendbug(1) использовать никак, если система не загружается, но
эта команда должна быть использована всегда, когда это возможно. В любом
случае вам надо будет приложить детальную информацию о том, что произошло,
конфигурацию вашей системы, и как эта проблема может быть повторена.

Для sendbug(1) необходимо чтобы ваша система могла отправить e-mail через
Интернет. Обратите внимание, что на почтовом сервере используется 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8"
>spamd(8)</a>, поэтому может пройти около получаса перед тем как ваше
сообщение появится на почтовом сервере. Будьте терпеливы.

<p>
После отправки сообщения об ошибке используя sendbug(1), вы получите электронное
письмо, подтверждающее статус вашего сообщения. С вами могут связаться разработчики
для получения дополнительной информации, или для тестирования патчей. Вы также
можете следить за архивами в списке рассылки <tt>bugs@openbsd.org</tt> (детали на
веб странице <a href="../../ru/mail.html">списка рассылки</a>), или запросить статус
сообщения в Системе Отслеживания Ошибок (Bug Tracking System).


<h3>Дополнительно об отправке полезной информации разработчикам</h3>
Вот несколько дополнительных советов:

<p>
<b>Получили сообщение "Panic"?</b><br>
В некоторых случаях Вы можете потерять самое первое сообщение о панике, которое
сказало бы Вам о причине этой паники. Это очень важное сообщение, поэтому Вам
будет нужно включить его в сообщение об ошибке. Вы можете просмотреть это сообщение
еще раз использюя команду "show panic" в ddb>.

Например:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
ddb> <b>show panic</b>
0:      kernel: page fault trap, code=0
ddb>
</pre></td></tr></table>
<p>
В данном случае, сообщение о панике: "Kernel: page fault trap, code=0"

<p>
<b>Особое замечание про SMP системы:</b><br>
Вы должны получить "trace" с каждого процессора:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
ddb{0}> <b>trace</b>
pool_get(d05e7c20,0,dab19ef8,d0169414,80) at pool_get+0x226
fxp_add_rfabuf(d0a62000,d3c12b00,dab19f10,dab19f10) at fxp_add_rfabuf+0xa5
fxp_intr(d0a62000) at fxp_intr+0x1e7
Xintr_ioapic0() at Xintr_ioapic0+0x6d
--- interrupt ---
idle_loop+0x21:
ddb{0}> <b>machine ddbcpu 1</b>
Stopped at      Debugger+0x4:   leave
ddb{1}> <b>trace</b>
Debugger(d0319e28,d05ff5a0,dab1bee8,d031cc6e,d0a61800) at Debugger+0x4
i386_ipi_db(d0a61800,d05ff5a0,dab1bef8,d01eb997) at i386_ipi_db+0xb
i386_ipi_handler(b0,d05f0058,dab10010,d01d0010,dab10010) at i386_ipi_handler+0x
4a
Xintripi() at Xintripi+0x47
--- interrupt ---
i386_softintlock(0,58,dab10010,dab10010,d01e0010) at i386_softintlock+0x37
Xintrltimer() at Xintrltimer+0x47
--- interrupt ---
idle_loop+0x21:
ddb{1}>
</pre></td></tr></table>

<p>
Повторите "<tt>machine ddb x</tt>" с "<tt>trace</tt>" для каждого
процессора на вашей машине.

<p>
<h3>Как собрать дополнительную информацию после от краха ядра (kernel panic).</h3><p>

Типичный крах ядра OpenBSD выглядит следующим образом
(вещи, которые особенно важны, выделены жирным шрифтом):<p>

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
kernel: page fault trap, code=0
Stopped at    <b>_pf_route+0x263</b>:        mov     0x40(%edi),%edx
ddb&gt;
</pre></td></tr></table><p>

Первая команда, которая в 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ddb">ddb(4)</a>
должна быть запущенна, это "trace":<p>

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
ddb&gt; trace
<b>_pf_route</b>(e28cb7e4,e28bc978,2,1fad,d0b8b120) at <b>_pf_route+0x263</b>
_pf_test(2,1f4ad,e28cb7e4,b4c1) at _pf_test+0x706
_pf_route(e28cbb00,e28bc978,2,d0a65440,d0b8b120) at _pf_route+0x207
_pf_test(2,d0a65440,e28cbb00,d023c282) at _pf_test+0x706
_ip_output(d0b6a200,0,0,0,0) at _ip_output+0xb67
_icmp_send(d0b6a200,0,1,a012) at _icmp_send+0x57
_icmp_reflect(d0b6a200,0,1,0,3) at _icmp_reflect+0x26b
_icmp_input(d0b6a200,14,0,0,d0b6a200) at _icmp_input+0x42c
_ipv4_input(d0b6a200,e289f140,d0a489e0,e289f140) at _ipv4_input+0x6eb
_ipintr(10,10,e289f140,e289f140,e28cbd38) at _ipintr+0x8d
Bad frame pointer: 0xe28cbcac
ddb&gt; 
</pre></td></tr></table><p>

Её вывод покажет имя функции, вызов которой привел к краху.<p>

Чтобы узнать какие конкретно строки С-кода привели к краху,
делаем следующее:<br>

Находим исходник, где объявленна функция, вызов которой привел к краху.
В нашем примере это была pf_route() в sys/net/pf.c.
Перекомпилируем его, чтобы включить отладочную информацию
(debug information):

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
# cd /usr/src/sys/arch/$(uname -m)/compile/GENERIC/
# rm pf.o
# DEBUG=-g make pf.o
</pre></td></tr></table><p>

Теперь дизассемблируем его, используя для этого 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=objdump"
>objdump(1)</a>:<p>

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
# objdump --line --disassemble --reloc pf.o &gt;pf.dis
</pre></td></tr></table><p>

В выводе ищем (grep'аем) имя функции (pf_route в нашем примере):<p>

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
# grep "&lt;_pf_route&gt;:" pf.dis
0000<b>7d88</b> &lt;_pf_route&gt;:
</pre></td></tr></table><p>

Берем первое hex-число и прибавляем смещение (offset) от строки "Stopped at":

<b>0x7d88</b> + <b>0x263</b> == <b>0x7feb</b>.<br>
Прокручиваем дальше до этого адреса
(ассемблерная инструкция должна соответствовать тому, что
в строке 'Stopped at'), затем наверх до первого же номера C-строки:<p>

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
# more pf.dis
/usr/src/sys/arch/i386/compile/GENERIC/../../../../net/pf.c:<b>3872</b>
    7fe7:       0f b7 43 02             movzwl 0x2(%ebx),%eax
    <b>7feb</b>:       8b 57 40                mov    0x40(%edi),%edx
    7fee:       39 d0                   cmp    %edx,%eax
    7ff0:       0f 87 92 00 00 00       ja     8088 &lt;_pf_route+0x300&gt;
</pre></td></tr></table><p>

Таким образом, к краху привела строка <b>3872</b> в файле pf.c:<p>

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
# cat -n pf.c | head -n 3872 | tail -n 1
3872          if ((u_int16_t)ip-&gt;ip_len &lt;= ifp-&gt;if_mtu) {
</pre></td></tr></table><p>

Обратите внимание, что ядро, на которое производится вывод краха, и
объектный файл objdump должны быть скомпилированы с точно таким же исходный файлом,
в противном случае смещения не будут совпадать.<p>

Пожалуйста не забвайте прикладывать к отчёту "trace"-вывода ddb&gt; и соответствующую
часть вывода objdump. Это очень помогает в установлении причины возникновения
и исправления ошибки.

<p>
<font color="#0000e0">
<a href="index.html">[FAQ-Index]</a>
<a href="faq1.html">[Глава 1 - Введение в OpenBSD]</a>
<a href="faq3.html">[Глава 3 - Методы получения OpenBSD]</a>
</font>

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../images/back.gif" border="0" alt="[zur?ck]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq2.html,v 1.112]<br>
$Translation: faq2.html,v 1.1 2012/04/07 03:52:23 alex Exp $<br>
-->
$OpenBSD: faq2.html,v 1.1 2012/04/12 05:48:02 ajacoutot Exp $
</small>

</body>
</html>
