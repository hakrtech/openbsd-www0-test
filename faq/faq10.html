<html>
<head>
<title>OpenBSD FAQ: 10.0 - System Administration</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998,1999 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000" link= "#23238E">
<p>
<font color= "#0000e0">
<a href= "index.html">[Back to Main Index]</a>
<a href= "faq9.html">[To Section 9.0 - Migrating from Linux]</a>
<a href= "faq24.html">[To Section 11.0 - OpenBSD 2.4 Specific Information]</a>
</font>
</p>

<p>
<h1>10.0 - System Administration</h1>
<hr>
</p>

<p>
<a name= "10.1">
<h2>10.1 - Why does it say that I'm in the wrong group when I su to root?</h2>
</a>
</p>

<p>
To be able to use
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=su&apropos=0&sektion=1&format=html">
su(1)</a> to root you must be in group 0, &quot;wheel&quot;. This
MUST be placed specifically in <kbd>/etc/group</kbd>. It isn't enough to have 
them listed in <kbd>/etc/passwd</kbd>. Once this is done you should be able to
su correctly.
</p>

<br>

<p>
<a name= "10.2">
<h2>10.2 - How do I duplicate a filesystem?</h2>
</a>
</p>

<p>
Use dump/restore. For example. To duplicate everything under directory 
<kbd>SRC</kbd> to directory <kbd>DST</kbd>, do a:
<pre>
# cd /SRC; dump 0f - . | (cd /DST; restore -rf - )
</pre>
</p>

<p>
<a name="10.3">
<h2>10.3 - How do I get httpd, sendmail, etc to startup with the
system?</h2>
</a>
</p>

<p>
OpenBSD uses rc-style startup to control starting applications with the
system. For common daemons you can simply edit 
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/rc.conf?rev=1.35">/etc/rc.conf</a>.
<br>
For example: To have ftpd started on boot change - 
<br>
<pre>
ftpd_flags=NO -- > ftpd_flags="-D"
</pre>
</p>
<p>
You can add any flags that you wish ftpd to start with.
</p>
<p>
If you have your own daemon's that you want to be started, here is a
simple entry that you can put into /etc/rc.local.<br>
<pre>
if [ -x /usr/local/sbin/mydaemon ]; then
        echo -n ' mydaemon';       /usr/local/sbin/mydaemon
fi
</pre>
<br>
Once in there, it will come up with the system each time.
</p>

<p>
<a name="10.4">
<h2>10.4 - Why do users get relaying access denied when they are remotely sending mail through my OpenBSD system?</h2>
</a>
</p>

<p>
Try this:
</p>

<pre>
cat /etc/sendmail.cf | grep relay-domains
</pre>
<p>
The output may look something like this:
</p>

<pre>
FR-o /etc/mail/relay-domains
</pre>

<p>
If this file doesn't exist, create it.  You will need to enter the users
who are sending mail remotely with the following syntax:
</p>

<pre>
.domain.com    #if it is dynamic
sub.domain.com #if static
</pre>

<p>
Don't forget to:
</p>
<pre>
kill -1 `cat /var/run/sendmail.pid`
</pre>
<br>


<p>
<a name="10.5">
<h2>10.5 - I've set up POP, but users have trouble accessing mail thru POP. What can i do?</h2>
</a>
</p>

<p>
Most issues dealing with pop are accessing files, mainly temp files.
Some clients give errors such as:
</p>
<pre>
-ERR Couldn't open temporary file, do you own it?K
</pre>
<p>
Try setting up your permissions as such:
</p>
<pre>
permission in  /var
drwxrwxr-x   2 bin     mail     512 May 26 20:08 mail


permissions in  /var/mail
-rw-------   1 username   username        0 May 26 20:08 username
</pre>
<p>
Double check that the user owns his file in /var/mail , this should be
done by default.
</p>

<p>
<font color= "#0000e0">
<a href= "index.html">[Back to Main Index]</a>
<a href= "faq9.html">[To Section 9.0 - Migrating from Linux]</a>
<a href= "faq24.html">[To Section 11.0 - OpenBSD 2.4 Specific Information]</a>
</font>
</p>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: faq10.html,v 1.11 1999/05/27 01:00:39 ericj Exp $</small>
</p>
</body>
</html>

