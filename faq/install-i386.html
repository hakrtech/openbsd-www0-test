<html>
<head>
<title>Installing OpenBSD on the i386 architecture</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2000 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238E">

<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif">
<p>
<h2><font color=#e00000>Installing OpenBSD on the i386 arch.</font><hr></h2>
</p>

<h3>Table of Contents</h3>
<ul>
<li><a href="#1.1">Before you get started</a>
<li><a href="#1.2">Creating OpenBSD Bootdisks</a>
<li><a href="#1.3">From boot to fdisk</a>
<li><a href="#1.4">Setting up your OpenBSD labels with disklabel</a>
<li><a href="#1.5">Configuring your mountpoints, and formating your labels.</a>
<li><a href="#1.6">Configuring your network.</a>
<li><a href="#1.7">Choosing Installation Media</a>
<li><a href="#1.8">Installing via CD-ROM</a>
<li><a href="#1.9">Installing via local filesystem</a>
<li><a href="#1.10">Installing via FTP or DHCP</a> 
<li><a href="#1.11">Installing via NFS</a>
<li><a href="#1.12">Choosing installation packages and finishing the install.</a>
<li><a href="#1.13">After your reboot!</a>
<li><a href="#1.14">Other Information Resources and Popular Questions</a>
</ul>
<h3>Disk setup links</h3>
<UL>
<li><a href="faq14.html#14.2">Using OpenBSD's fdisk(8)</a>
<li><a href="faq14.html#14.1">Using OpenBSD's disklabel(8)</a>
</UL>

<hr>

<a name="1.1"></a>
<h2>Before you get started</h2>

<p>
There are a few checks you need to make before trying to install 
OpenBSD. 
</p>

<ul>
<li>First and foremost you need to make sure that your hardware is
supported by OpenBSD. You can see a list of currently supported hardware
on <a href="../i386.html">i386.html</a>.
<li>If you plan to install OpenBSD via your network device, it is
essential that you make sure that your network device is supported.
<li>Make sure you have backed up any information you need. Especially if
you are planning on multi-booting this system.
</ul>

<a name="1.2"></a>
<h2>Creating OpenBSD Bootdisks</h2>

<p>
If you computer's BIOS supports booting directly from CDROM,
you can boot from the OpenBSD CD, and won't need to create a
bootdisk at all. This option, if it exists for you, will be in your computer's
BIOS, under a section dealing with boot configuration.
<P>
OpenBSD comes with two separate boot disks, some supporting different devices than others.  Here are the differences.  You still need to look at <A HREF="../i386.html">i386.html</a> to see other devices which are supported on both
boot disks.

<ul>
<li><b>floppy26.fs</b> supports the following devices not supported by floppy26B.fs:
<P>
Ethernet:
<UL>
<LI>NE2000 PCMCIA
<LI>3com 3c5xx PCMCIA
<LI>Xircom PCMCIA
</UL>
Disk:
<UL>
<LI>ISAPNP/PCMCIA IDE (<i>both floppy images support ISA and PCI IDE</i>)
<LI>BusLogic [57]4X SCSI
<LI>Adaptec 154[02] SCSI
<LI>Adaptec 174[024] SCSI
<LI>Adaptec 274X/284X/2940 SCSI
<LI>NCR 538XX SCSI
<LI>AdvanSys 1200A/B/Ultra/Ultrawide SCSI
<LI>Seagate ST0[12] SCSI
</UL>
<P>
<li><b>floppyB26.fs</b> supports the following devices not supported by floppy26.fs:
<P>
Disk:
<UL>
<LI>Qlogic ISP [12]0x0 SCSI/FibreChannel
<LI>UltraStor [123]4f SCSI
<LI>WD7000/TMC-7000 SCSI
</UL>
</ul>

<p>
Once you've downloaded the proper boot disk, it's time to create your boot
floppy. Be sure to use a floppy that has already been formatted! (The
formatting provides the basic disk layout with sectors and tracks
so that the floppy drive knows how to read it!)
<P>
In DOS, just use the FORMAT command.  In OpenBSD, you should use 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdformat&sektion=1&format=html">fdformat(1)</a>
like this (note <tt>fd0a</tt> refers to the entire floppy disk unless
you actually have a disklabel on your floppy!):
<UL><pre>
# <b>fdformat /dev/fd0a</b>
Format 1440K floppy `/dev/fd0a'? (y/n): <b>y</b>
Processing VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV done.
</UL></pre>


<P>
There are multiple ways to make a boot disk depending on your current
architecture. There are a few programs availible in the
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/tools/">tools</a> directory on
any of the ftp mirrors, or in <b>2.6/tools</b> on CD1 on the OpenBSD CD.
If you are already on a UNIX-like Operating System, you can use 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&sektion=1&format=html">dd(1)</a>
to write your boot floppy. Here is an example usage of dd(1) to correctly
write the OpenBSD boot floppy:
</p>

<ul><pre>
# <strong>dd if=floppy26.fs of=/dev/rfd0c bs=126b</strong>
</pre></ul>

<p>
If you are using Windows or NT you don't have this option. But there are
many other choice for you. For users of Windows, <i>rawrite</i> will be
all you need to write your boot floppy.

<ul>
Example usage of <i>rawrite</i>:
<pre>
C:\> <b>rawrite</b>
RaWrite 1.2 - Write disk file to raw floppy diskette

Enter source file name: <b>floppy26.fs</b>
Enter destination drive: <b>a</b>
Please insert a formatted diskette into drive A: and press -ENTER- : <b>&gt;Enter&lt;</b>
</pre></ul>

<p>
If you use NT, rawrite will not work for you. You can, however, use
<i>fdimage</i> or <i>ntrw</i> to write the boot floppy. Both of which
are availible on the ftp sites (linked above), or the OpenBSD CD. Here are
example usages for each program.
</p>

<ul>
Example Usage of <i>fdimage</i>:
<pre>
C:\> <strong>fdimage -q floppy26.fs a:</strong>
</pre>

Example Usge of <i>ntrw</i>:
<pre>
C:\> <strong>ntrw floppy26.fs a:</strong>
3.5", 1.44MB, 512 bytes/sector
bufsize is 9216
1474560 bytes written
</pre>
</ul>

<a name="1.3"></a>
<h2>From boot to fdisk</h2>

<p>
Now that your bootdisk has been created, it's time to boot it.
When you boot this floppy, the kernel and all of the programs
that OpenBSD uses to install itself are loaded into memory.  If problems arise,
and your bootdisk doesn't boot, the problem is probobly due to a
bad floppy disk. This is an extremly common problem!  If your bootdisk fails
to boot, try it a second time, and if it fails again, throw away the floppy
and get a new one.  When your floppy fails to boot, even if the floppy worked
fine for you before, keep in mind that OpenBSD uses nearly every single
bit available from the floppy!
Any error in the disk will prevent OpenBSD from loading.

<P>
When your boot is successful, you will see a lot of white on blue text,
that text is the kernel telling you what devices have been found,
and where.  Then, you will see the following:

<UL><pre>
sh: /etc/rc: No such file or directory
Enter pathname of shell or RETURN for sh: <b>&lt;Enter&gt;</b>
erase ^?, werase ^W, kill ^U, intr ^C
</UL></pre>
Of course, you want to answer I, for <i>Install</i>
<UL><pre>
(I)nstall, (U)pgrade or (S)hell? <b>I</b>
</UL></pre>

Then, you will see some description of the install, and it will ask your
terminal type...Just press enter here, pcvt25 is the correct terminal type.


<UL><TT>
You can run a shell command at any prompt via '!foo'
or escape to a shell by simply typing '!'.

Specify terminal type [pcvt25]: <b>&lt;Enter&gt;</b>
</UL></TT>

Next, you get to select what disk you are going to setup for OpenBSD.
If you have any data on this disk you want to backup, be sure to do
so before you start this process.

<UL><pre>
Available disks are:

wd0

Which disk is the root disk? [wd0]
</UL></pre>

<TT>wd0</TT> would be the correct answer here if you are trying to format your first IDE disk.
<tt>sd0</tt> would be the correct answer if you are trying to format your first SCSI
disk.  If you are installing OpenBSD on your second or third disk, select appropriately.  If the answer in brackets (in this example, <tt>wd0</tt>) is 
what you want, you can just hit enter.

Next, you will be asked 

<UL><pre>
Do you want to use the *entire* disk for OpenBSD? [no]
</UL></PRE>

If you don't want to use the entire disk for OpenBSD, hit return.  You
will get put into the fdisk partitioning game.  Check out <A HREF="faq14.html#14.2">
section 14.2</a> of the FAQ for instructions on how to play this game.
Remember that these partitions are <b>not</b> your Unix partitions.
You only need <b>one</b> partition in this table for OpenBSD (any
other partitions go to other operating systems, e.g. Windows)
<P>
If you answer yes to this section, then OpenBSD will do the fdisk
for you, and put you right into disklabel.

<a name="1.4"></a>
<h2>Setting up your OpenBSD filesystems with disklabel</h2>
<P>
Check out <A HREF="faq14.html#14.1">section 14.1</a> of the FAQ for
details on how to use disklabel.
Look at <A HREF="faq4.html#4.3">section 4.3</a> of the FAQ for details on
what sizes to use for your filesystems.
<P>
For a multiuser machine, it is best to make at least five separate filesystems,
one for your / filesystem, one for swap, one for /var, one for /tmp, and
one for /usr.   If your users are going to store files of any
significant size, you want a separate /home filesystem too.
<P>
There are four main reasons for using separate filesystems, instead of shoving
everything into one or two filesystems:
<UL>
<LI><b>Security</b>: You can mark some filesystems as 'nosuid', 'nodev', 'noexec', 'readonly', etc..
<LI><b>Stability</b>: A user, or a misbehaved program, can fill a filesystem with garbage, if they have write permissions for it.  Your critical programs, which of course run on a different filesystem, do not get interrupted.
<LI><b>Speed</b>: A filesystem which gets written to frequently may get somewhat fragmented.  (Luckily, the ffs filesystem, what OpenBSD uses, is not prone to heavy fragmentation.)
<LI><b>Integrity</b>: If one filesystem is corrupted for some reason then your other filesystems are still OK.
</UL>

<a name="1.5"></a>
<h2>Configuring your mountpoints and formating your filesystems</h2>

<p>
Setting up your mountpoints is much more simple than it looks.

After you setup your filesystems with disklabel,
will see text like the following:
</p>

<ul><pre>
The following filesystems will be used for the root filesystem and swap:
        wd0a    /
        wd0b    swap

Mount point for wd0d (size=65520k) [/tmp, RET, none, or done]? <strong>&lt;Enter&gt;</strong>
Mount point for wd0e (size=65520k) [/var, RET, none, or done]? <strong>&lt;Enter&gt;</strong>
Mount point for wd0g (size=307440k) [/usr, RET, none, or done]? <strong>&lt;Enter&gt;</strong>
Mount point for wd0h (size=1926256k) [/home, RET, none, or done]? <strong>&lt;Enter&gt;</strong>
</pre></ul>

<p>
This shows that wd0a has been set as the root filesystem and wd0b as the swap. This SHOULD be the same
for all, except of course, wd0 which will be changed with whatever disk device you are using. In the example above
our mountpoints have already been determined via disklabel(8), but you should still review to make sure 
all of this information is correct, this is your last chance of changing it! For users with multiple disk's, 
this will also be your chance to configure your other disks. So don't fret and try to stick all mountpoints on 
one disk. You will be given a list like below:
</p>

<ul><pre>
Now you can select another disk to initialize.  (Do not re-select a
disk you have already entered information for).  Available disks are:

wd0
wd1

Which one? [done] <strong>&lt;Enter&gt;</strong>

You have configured the following devices and mount points:

wd0a /
wd0d /tmp
wd0e /var
wd0g /usr
wd0h /home

Filesystems will now be created on these devices.
If you made any mistakes, you may edit this now.
Edit using ed? [n] <strong>&lt;Enter&gt;</strong>
</ul></pre>

<p>
As you can see, It was decided not to use wd1 at the present time. If it was chosen to setup the other disk,
it would have been done exactly as the first disk you setup. You do get 1 last chance to correct things via 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ed&sektion=1&format=html">ed(1)</a>, 
but its much easier to verify the information earlier. Once the filesystems have been set, it's time to 
format the disks. You will be prompted with a warning telling you that all information will be erased. That is why,
if you are multi-booting this system, it's very important to have taken proper backups. Here is an example:
</p>

<ul><pre>
============================================================
The next step will overwrite any existing data on:
        wd0a wd0d wd0e wd0g wd0h

Are you really sure that you're ready to proceed? [n] <strong>y</strong>
</ul></pre>

<p>
Notice this answer defaults to no, so you will have to directly tell it to format your labels. If you chose no you will
simply be dropped into a shell and can start the install again by typing
<strong>install</strong>, or just rebooting 
again with your bootdisk. At this point it will format all filesystems for you, this could take some time depending on 
the size of your disk. 
</p>

<a name="1.6"></a>
<h2>Configuring your Network</h2>


<p>
Now it's time to setup your network configuration. This is extremely important if you are planning on doing any network based install,
considering it will be based upon the information you are about to enter. Here is a walkthrough of the network configuration section of
the install process.
</p>

<ul><pre>
You will now be given the opportunity to configure the network.  This will be
useful if you need to transfer the installation sets via FTP, HTTP, or NFS.
Even if you choose not to transfer installation sets that way, this information
will be preserved and copied into the new root filesystem.

Configure the network [y] <strong>&lt;Enter&gt;</strong>
Enter system hostname (short form): [] <strong>mybox</strong>
Enter DNS domain name: [] <strong>someisp.com</strong>

If you have any devices being configured by a DHCP server
it is recommended that you do not enter a default route or
any name servers.

You may configure the following network interfaces (the interfaces marked
with [X] have been successfully configured):

        [ ] xl0
        [ ] fxp0

Configure which interface? (or, enter 'done') [xl0] <strong>&lt;Enter&gt;</strong>
IP address (or 'dhcp')? [] <strong>199.185.137.55</strong>
Symbolic (host) name? [mybox] <strong>&lt;Enter&gt;</strong>
Netmask ? [255.255.255.0] <strong>&lt;Enter&gt;</strong>
Your network interface might require non-default
media directives.  The default media is:
        media: Ethernet 100baseTX half-duplex
This is a list of supported media:
        media autoselect
        media 100baseTX mediaopt full-duplex
        media 100baseTX mediaopt half-duplex
        media 100baseTX
        media 10baseT mediaopt full-duplex
        media 10baseT
        media 10baseT mediaopt half-duplex
If the default is not satisfactory, and you wish to use another
media, copy that line from above (ie. "media 100baseTX")
Media directives? [] <strong>&lt;Enter&gt;</strong>

You may configure the following network interfaces (the interfaces marked
with [X] have been successfully configured):

        [X] xl0
        [ ] fxp0

Configure which interface? (or, enter 'done') [done] <strong>&lt;Enter&gt;</strong>
</ul></pre>

<p>
In this example we have two network interfaces, but will only configure one of them. You do have the ability to configure both interfaces
during the install, but for simplicity we will only go over one. To start off, if you're not using DHCP, you will need to know information
about your network setup. Information like your IP, Netmask, and gateway. If you're using DHCP you will just put DHCP in as your IP and all
this information will be retrieved for you. Notice that you also have a chance to specify media directives if your NIC supports any.
Next you will get a chance to specify your default route's and nameserver. This will be needed if you're doing a network based install.
</p>

<ul><pre>
Configure which interface? (or, enter 'done') [done] <strong>&lt;Enter&gt;</strong>
Enter IP address of default route: [none] <strong>199.185.137.128</strong>
Enter IP address of primary nameserver: [none] <strong>199.185.137.1</strong>
Would you like to use the nameserver now? [y] <strong>&lt;Enter&gt;</strong>

You will now be given the opportunity to escape to the command shell to do
any additional network configuration you may need.  This may include adding
additional routes, if needed.  In addition, you might take this opportunity
to redo the default route in the event that it failed above.
Escape to shell? [n] <strong>&lt;Enter&gt;</strong>
</ul></pre>

<p>
At this point you can escape to a shell which will allow you to make any corrections to your network setup, or any specific changes that
the install script might not allow you to do. Most will not need to do this.
</p>

<a name="1.7"></a>
<h2>Choosing Installation Media</h2>

<p>
After your network is setup, the install script will give you a chance to make any changes to your network setup. (Mainly if errors were
produced.) Then the filesystems you created will be mounted and a root password set. This will get your local disks ready for the OpenBSD
packages to be installed upon them. After your local disks are ready you will get a chance to choose your installation media. The options
are listed below.
</p>


<ul><pre>
You will now be given the opportunity to escape to the command shell to do
any additional network configuration you may need.  This may include adding
additional routes, if needed.  In addition, you might take this opportunity
to redo the default route in the event that it failed above.
Escape to shell? [n] <strong>&lt;Enter&gt;</strong>
/dev/wd0a on /mnt type ffs (rw, asynchronous, local)
/dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local)
/dev/wd0e on /mnt/var type ffs (rw, asynchronous, local)
/dev/wd0g on /mnt/usr type ffs (rw, asynchronous, local)
/dev/wd0h on /mnt/home type ffs (rw, asynchronous, local)

Please enter the initial password that the root account will have.
Password (will not echo): _
Password (again): _

It is now time to extract the installation sets onto the hard disk.  Make sure
the sets are either on a local device (i.e. tape, CD-ROM) or on a network
server.  You will have the chance to repeat this step or to extract sets from
several places, so you don't have to try to load all the sets in one try and
can recover from some errors.

Install from (f)tp, (h)ttp, (t)ape, (C)D-ROM, (N)FS or local (d)isk? <strong>&lt;Enter Option Here&gt;</strong>
</ul></pre>

<a name="1.8"></a>
<h2>Installing via CD-ROM</h2>

<p>
To install via CD-ROM, you will select option 'C' when choosing your installation media. This will bring up a list of 
devices on your computer identified as a CD-ROM. Most people will only have one; if you don't, you need to make sure you pick 
the device in which you will be installing the OpenBSD from. After choosing the correct device, you will be prompted for which filesystem
the installation files will reside on. If you are using the OpenBSD CD-ROM you will choose 'c' here, for 'c' represents the whole disk.
Here is an example:
</p>

<ul><pre>
Install from (f)tp, (h)ttp, (t)ape, (C)D-ROM, (N)FS or local (d)isk? <strong>c</strong>

The following CD-ROM devices are installed on your system; please select
the CD-ROM device containing the partition with the installation sets:

cd0

Which is the CD-ROM with the installation media? [abort] <strong>cd0</strong>
Partition? [c] <strong>&lt;Enter&gt;</strong>
</ul></pre>

<p>
Now you will be prompted for which filesystem to use when reading the CD-ROM, and to what directory the installation files are.
If you are using the official OpenBSD CD-ROM, you will use 'cd9660' as your filesystem. (Which is the default.) You will then be using
'/2.6/i386/' as the directory in which the files reside. (Again, this is the default option.) After this you will get a list of packages
to install. You can get a description of these files in <a href="faq4.html#4.2">faq4.2</a>. Here is what you will be seeing:
</p>

<ul><pre>
There are two CD-ROM filesystem types currently supported by this program:
cd9660          ISO-9660
ffs             Berkeley Fast Filesystem

Which filesystem type? [cd9660] <strong>&lt;Enter&gt;</strong>
Enter the directory relative to the mount point that
contains the file. [/2.6/i386] <strong>&lt;Enter&gt;</strong>

You will now be asked for files to extract.  In addition to the
files listed in the selector you may enter any file located in
/mnt2/2.6/i386.  You can also enter 'all' to install all the standard
sets, or 'list' to list the files avilable in /mnt2/2.6/i386.
When you are done selecting files, enter 'done'.
Some of these sets are required for your install and some are optional --
You will want at least the base and bsd sets.
Consult the intallation notes if you are not sure which sets are required!
</ul></pre>

<p>
After this move on to the <a href="#1.12">Choosing installation packages and finishing the install.</a> to finish off your install.
</p>

<a name="1.9">
<h2>Installing via Local Filesystem</h2>
</a>

<a name="1.10">
<h2>Installing via FTP or DHCP</h2>
</a>

<a name="1.11">
<h2>Installing via NFS</h2>
</a>

<a name="1.12"></a>
<h2>Choosing installation packages and finishing the install.</h2>

<p>
Now it's time to choose which packages you will be installing. You can get a description of these files in <a href="faq4.html#4.2">faq4.2</a>.
The files that the installdisk finds will be shown to you on the screen. Your job is just to specify which files you want. By default
only 4 packages are selected. These are 'base26.tar.gz', 'etc26.tar.gz', 'man26.tar.gz' and 'bsd'. This is because these first 3 files MUST be present for you
to have any sort of a functional system, the 'bsd' file is the kernel of the system. The rest are left up to your discretion. The example below is that of a full install, minus the
games package.
</p>

<ul><pre>
The following sets are available for extraction.
Enter filename, `list', `all', or `done'.
You may de-select a set by prepending a '-' to its name.

        [X] base26.tar.gz
        [X] etc26.tar.gz
        [ ] misc26.tar.gz
        [ ] comp26.tar.gz
        [X] man26.tar.gz
        [ ] game26.tar.gz
        [ ] xbase26.tar.gz
        [ ] xshare26.tar.gz
        [ ] xfont26.tar.gz
        [ ] xserv26.tar.gz
        [X] bsd

File name []? <strong>*</strong>

The following sets are available for extraction.
Enter filename, `list', `all', or `done'.
You may de-select a set by prepending a '-' to its name.

        [X] base26.tar.gz
        [X] etc26.tar.gz
        [X] misc26.tar.gz
        [X] comp26.tar.gz
        [X] text26.tar.gz
        [X] man26.tar.gz
        [X] game26.tar.gz
        [X] xbase26.tar.gz
        [X] xshare26.tar.gz
        [X] xfont26.tar.gz
        [X] xserv26.tar.gz
        [X] bsd
File name []? <strong>-game*</strong>

The following sets are available for extraction.
Enter filename, `list', `all', or `done'.
You may de-select a set by prepending a '-' to its name.

        [X] base26.tar.gz
        [X] etc26.tar.gz
        [X] misc26.tar.gz
        [X] comp26.tar.gz
        [X] text26.tar.gz
        [X] man26.tar.gz
        [ ] game26.tar.gz
        [X] xbase26.tar.gz
        [X] xshare26.tar.gz
        [X] xfont26.tar.gz
        [X] xserv26.tar.gz
        [X] bsd
File name []? <strong>done</strong>
</ul></pre>

<p>
Once you have successfully picked which packages you want, you will be prompted to make sure you want to extract these packages and they
will then be installed. A progress bar will be shown that will keep you informed on how much time it will take. The times range greatly
depending on what system it is you are installing OpenBSD on. After this your configuration files ( networking and filesystem ) will be
moved onto your disks also from the installdisk.
</p>

<ul><pre>
Ready to extract selected file sets? [y] <strong>&lt;Enter&gt;</strong>

/mnt2/2.6/i386/base26.tar.gz:
100% |***************************************************| 17774 KB   00:00 ETA
/mnt2/2.6/i386/etc26.tar.gz:
100% |***************************************************|   161 KB   00:00 ETA
/mnt2/2.6/i386/bsd:
100% |***************************************************|  2281 KB   00:00 ETA
/mnt2/2.6/i386/misc26.tar.gz:
100% |***************************************************|  1637 KB   00:00 ETA
/mnt2/2.6/i386/comp26.tar.gz:
100% |***************************************************| 11481 KB   00:00 ETA
/mnt2/2.6/i386/man26.tar.gz:
100% |***************************************************|  3543 KB   00:00 ETA
/mnt2/2.6/i386/xbase26.tar.gz:
100% |***************************************************|  5376 KB   00:00 ETA
/mnt2/2.6/i386/xshare26.tar.gz:
100% |***************************************************|  1482 KB   00:00 ETA
/mnt2/2.6/i386/xfont26.tar.gz:
100% |***************************************************|  6017 KB   00:00 ETA
/mnt2/2.6/i386/xserv26.tar.gz:
100% |***************************************************| 15188 KB   00:00 ETA

Extract more sets? [n] <strong>&lt;Enter&gt;</strong>
</pre></ul>

<p>
You're not quite done with choosing packages. One library, which is not on the CD must be downloaded. As it is
explained during the install, if you don't have network connectivity just yet, this can be added at any time
later. This install assumes that a network is available and ready during the install. First you will see an
explanation and then be given choices on which package you want to select. After you have selected your package
you need to setup your network.
 </p>

<ul><pre>
Two OpenBSD libraries (libssl and libcrypto, based on OpenSSL) implement many
cryptographic functions which are used by OpenBSD programs like ssh, httpd, and
isakmpd.  Due to patent licensing reasons, those libraries may not be included
on the CD -- instead the base distribution contains libraries which have had
the troublesome code removed -- the programs listed above will not be fully
functional as a result.  Libraries which _include_ the troublesome routines
are available and can be FTP installed, as long as you meet the follow (legal)
criteria:
  (1) Outside the USA, no restrictions apply. Use ssl26.tar.gz.
  (2) Inside the USA, non-commercial entities may install sslUSA26.tar.gz.
  (3) Commercial entities in the USA are left in the cold, due to how the
      licences work.  (This is how the USA crypto export policy feels to the
      rest of the world.)

If you do not install the ssl package now, it is easily installed at
a later time (see the afterboot(8) and ssl(8) manual pages)."
Install (U)SA, (I)nternational, or (N)one? [none] <strong>i</strong>
Install SSL+RSA libraries via (f)tp, (h)ttp, or (c)ancel? [ftp] <strong>f</strong>
[SNIP]
</ul></pre>

<p>
Here is where you will setup your network, if you need help with this part you can refer to <a href="#1.6">Configuring your Network</a>.
After your network interfaces are configured correctly, you will be given a list of ftp servers and their
locations. You must choose one of them.
</p>

<pre><ul>
HTTP/FTP proxy URL? (ie. "http://proxy:8080", or "none") [none] <strong>&lt;Enter&gt;</strong>

By default, ftp will attempt a passive connection and fall back to a normal
(active) connection if that doesn't work.  However, there are some very
old ftp servers that claim to support passive mode, but really do not.
In this case, you should explicitly request an active session.
Do you want to use active ftp? [n] <strong>n</strong>
Do you want a list of potential ftp servers? [y] <strong>y</strong>

     1  ftp://ftp.openbsd.org/pub/OpenBSD                       Alberta, Canada
     2  ftp://ftp1.usa.openbsd.org/pub/OpenBSD                  Michigan, USA
     3  ftp://ftp.op.net/pub/OpenBSD                            Pennsylvania, USA
     4  ftp://ftp.de.openbsd.org/pub/unix/OpenBSD               Germany
     5  ftp://ftp.jp.openbsd.org/OpenBSD                        Japan
     6  ftp://ftp.dti.ad.jp/pub/OpenBSD                         Japan
     7  ftp://ftp.lip6.fr/pub/OpenBSD                           France
     8  ftp://ftp.univ-evry.fr/pub/OpenBSD                      France
[SNIP]
Server IP address, hostname, or list#? [] <strong>1</strong>
Using   ftp://ftp.openbsd.org/pub/OpenBSD                       Alberta, Canada
Server IP address, hostname, or list#? [ftp.openbsd.org] <strong>&lt;Enter&gt;</strong>
Server directory? [pub/OpenBSD/2.6/i386] <strong>&lt;Enter&gt;</strong>
Login? [anonymous] <strong>&lt;Enter&gt;</strong>

You will now be asked for files to extract. In addition to the files listed,
you may select any file located at ftp.openbsd.org:pub/OpenBSD/2.6/i386
You can also enter 'all' to install all the standard sets, or 'list' to list
the files available. When you are done selecting files, enter 'done'. Some of
these sets are required for your install and some are optional -- you will want
at least the base and bsd sets. Consult the installation notes if you are not
sure which sets are required!

The following sets are available for extraction.
Enter filename, `list', `all', or `done'.
You may de-select a set by prepending a '-' to its name.

        [X] ssl26.tar.gz
File name? [] <strong>done</strong>

Fetching files via ftp may take a long time, especially over a slow network
connection.  Ready to download files? [y] <strong>y</strong>

Getting ssl26.tar.gz ...
100% |**************************************************|  1522 KB    00:00 ETA

Copying hostname.xl0, hosts, myname, mygate, resolv.conf,  ...done.
</pre></ul>

<p>
Once this is done, all that's left is to set your timezone and install the bootblocks. Setting your timezone is extremely easy. Just pick
the area you live in and enter the name. Thats it!. Only one more question, which is whether or not you will be running X on this server.
If you plan to ever run X on this server you should chose yes, otherwise you might have to go change
<strong>machdep.allowaperture=0</strong> into <strong>machdep.allowaperture=1</strong> in your <i>/etc/sysctl.conf</i>. After this is all done, just type 'reboot' at the shell prompt
and your machine will be booted with OpenBSD!
</p>


<pre><ul>
Select a time zone for your location. Timezones are represented on the
system by a directory structure rooted in "/usr/share/timezone". Most
timezones can be selected by entering a token like "MET" or "GMT-6".
Other zones are grouped by continent, with detailed zone information
separated by a slash ("/"), e.g. "US/Pacific" or "Canada/Mountain".

To get a listing of what's available in /usr/share/zoneinfo, enter "?"
at the prompts below.

What timezone are you in [`?' for list] [GMT]? <strong>?</strong>
Africa/      Chile/       GMT          Jamaica      Navajo       UCT
America/     Cuba         GMT+0        Japan        PRC          US/
Antarctica/  EET          GMT-0        Kwajalein    PST8PDT      UTC
Arctic/      EST          GMT0         Libya        Pacific/     Universal
Asia/        EST5EDT      Greenwich    MET          Poland       W-SU
Atlantic/    Egypt        HST          MST          Portugal     WET
Australia/   Eire         Hongkong     MST7MDT      ROC          Zulu
Brazil/      Etc/         Iceland      Mexico/      ROK          posixrules
CET          Europe/      Indian/      Mideast/     Singapore
CST6CDT      Factory      Iran         NZ           SystemV/
Canada/      GB           Israel       NZ-CHAT      Turkey
What timezone are you in [`?' for list] [GMT]? <strong>Canada</strong>
There are several timezones available within zone 'Canada'
Select a sub-timezone [`?' for list]: <strong>?</strong>
Atlantic            Eastern             Pacific
Central             Mountain            Saskatchewan
East-Saskatchewan   Newfoundland        Yukon
Select a sub-timezone [`?' for list]: <strong>Mountain</strong>
You have selected timezone "Canada/Mountain".
Installing timezone link...done.
Installing boot block...
boot: /mnt/boot
proto: /usr/mdec/biosboot
device: /dev/rwd0c
/usr/mdec/biosboot: entry point 0
proto bootblock size 512
room for 12 filesystem blocks at 0x16f
Will load 6 blocks of size 8192 each.
Using disk geometry of 63 sectors and 128 heads.
 0: 19 @(0 93 45) (5903-5921)
 1: 63 @(0 94 1) (5922-5984)
 2: 14 @(0 95 1) (5985-5998)
/mnt/boot: 3 entries total
using MBR partition 3: type 166 (0xa6) offset 63 (0x3f)

Do you expect to run X windows on this machine? [y or n] <strong>y</strong>
Enabling machdep.allowaperture. Read xf86(4) for more information.

Making all device nodes (by running /dev/MAKEDEV) ...... done.
Unmounting filesystems... /mnt/usr /mnt/var /mnt/tmp /mnt ... Done.
Done.

CONGRATULATIONS!  You have successfully installed OpenBSD!  To boot the
installed system, enter halt at the command prompt. Once the system has
halted, reset the machine and boot from the disk.

# <strong>reboot</strong>
</pre></ul>

<a name="1.13"></a>
<h2>After your reboot</h2>

<p>
This section will hopefully point you in the right direction for clues on what to do initially after you 
have installed your OpenBSD system. This is basically modeled after the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&sektion=8&format=html">afterboot(8)</a> man page. Which
should definately be one of your first steps after installing OpenBSD. Here is a table which will point you to relevant
FAQ sections.

<UL>
<LI><a href="faq10.html#10.8">Adding users in OpenBSD</a> 
<LI><a href="faq6.html#6.1">Initial Network Setup</a>
<LI><a href="faq2.html#2.3">Man Pages of popular/useful commands</a>
<LI><a href="http://www.openbsd.org/cgi-bin/man.cgi">OpenBSD man pages on the Web</a>
<li><a href="faq8.html#8.7">OpenBSD Packages</a> - Precompiled Binary Packages.
</UL>

<p>
<p>
Just to remind people, it's important for the OpenBSD developers to keep track
of what hardware works, and what hardware doesn't work perfectly..
</p>

<p>
A quote from /usr/src/etc/root/root.mail
<pre>
If you wish to ensure that OpenBSD runs better on your machines, please do us
a favor (after you have your mail system setup!) and type
        dmesg | mail dmesg@openbsd.org
so that we can see what kinds of configurations people are running.  We will
use this information to improve device driver support in future releases.
(We would be much happier if this information was for the supplied GENERIC
kernel; not for a custom compiled kernel).  The device driver information
we get from this helps us fix existing drivers.
</pre>
Also check with <a href= "faq14.html#14.7">section 14.7</a>
</p>
<p>
Make sure you send email from an account that is able to also receive
email so developers can contact you back if they have something they want
you to test or change in order to get your setup working. It's not important
at all to send the email from the same machine that is running OpenBSD, so
if that machine is unable to receive email, just
<pre>
 dmesg | mail your-account@yourmail.dom
</pre>
and then forward that message to
<pre>
 dmesg@openbsd.org
</pre>
where <tt>your-account@yourmail.dom</tt> is your regular email account.
(or transfer the dmesg output using ftp/scp/floppydisk/carrier-pigeon/...)
</p>

<p>
<strong>NOTE</strong> - Please send only GENERIC kernel dmesg's. Custom
kernels that have device drivers removed are not helpful.
</p>

<a name="1.14"></a>
<h2>Other Information Resources and Popular Questions</h2>

<UL>
Comprehensive documents already exist for those of you who might have different machines. You can retrieve these from any of
the mirror ftp sites.
<LI><a href="ftp://ftp.openbsd.org/pub/OpenBSD/2.6/i386/INSTALL.i386">INSTALL.i386</a> - Comprehensive installation document.
<LI><a href="ftp://ftp.openbsd.org/pub/OpenBSD/2.6/i386/INSTALL.linux">INSTALL.linux</a> - Installing OpenBSD along with Linux.
<LI><a href="ftp://ftp.openbsd.org/pub/OpenBSD/2.6/i386/INSTALL.mbr">INSTALL.mbr</a> - Explaining the Master Boot Record.
<LI><a href="ftp://ftp.openbsd.org/pub/OpenBSD/2.6/i386/INSTALL.pt">INSTALL.pt</a> - Explaining Partition Tables.
<LI><a href="ftp://ftp.openbsd.org/pub/OpenBSD/2.6/i386/INSTALL.dbr">INSTALL.dbr</a> - DOS Floppy Disk Boot Sector.
<LI><a href="ftp://ftp.openbsd.org/pub/OpenBSD/2.6/i386/INSTALL.chs">INSTALL.chs</a> - Explaining CHS Translation.
<LI><a href="ftp://ftp.openbsd.org/pub/OpenBSD/2.6/i386/INSTALL.ata">INSTALL.ata</a> - ATA/ATA-1/ATA-2/IDE/EIDE/etc FAQ
<LI><a href="ftp://ftp.openbsd.org/pub/OpenBSD/2.6/i386/INSTALL.os2br">INSTALL.os2br</a> - The os2 Boot Sector.
</UL>

<p>
<STRONG>Question:</STRONG> - Does OpenBSD provide an ISO image available for download?
</p>

<p>
<STRONG>Answer:</STRONG> - 
You can't. The official OpenBSD CD-ROM layout is copyright Theo de Raadt, as an
incentive for people to buy the CD set.

Note that only the layout is copyrighted, OpenBSD itself is free.
Nothing precludes someone else to just grab OpenBSD and make their own CD.
</p>

<a name="8meg"></a>
<p>
<STRONG>Question:</strong> - I'm having problems installing with 8meg of RAM. What can i do here?
</p>

<p>
<STRONG>Answer:</STRONG> - Many people are having a problem at the end of the install where the 
system stalls on <i>MAKEDEV all ...</i>. There is a workaround for this. Basically you need to turn on swap during the install.
To do this do as described below:
</p>

<ul>
<li>Start the Install as normal
<li>Setup your disks via <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&sektion=8">fdisk(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8">disklabel(8)</a> as described above.
<li>After your disks are setup, and AFTER they've been formatted, type <i>&lt;CNTRL&gt;-C</i> to break into a shell. 
<li>type <i>reboot</i> to reboot the machine.
<li>This time, skip through the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&sektion=8">fdisk(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8">disklabel(8)</a> sections. You can do this by typing just <i>exit</i> in fdisk(8) and by typing <i>q</i> in disklabel(8).
<li>Proceed through the install until you have completed the <b>Networking Section</b> of the install. When you get here type <i>&lt;CNTRL&gt;-z</i>, which will put you into a shell.
<li>Here is where swap needs turned on. To do so type <i>/mnt/sbin/swapon wd0b</i> or sd0b, or whatever your swap device is.
<ul>
<li>If this isn't found, mount your root disk at <i>/mnt</i>.
</ul>
<li>Now you can type <i>fg</i> to proceed through the rest of the install.
</ul>

<p>
If you followed these instructions and still have problems mail <a href="mailto:ericj@openbsd.org">Eric Jackson &lt;ericj@openbsd.org&gt;</a>.
</p>
<p>
<hr>
<font color= "#0000e0">
<a href= "index.html">[Back to Main Index]</a>
<a href= "faq4.html">[To Section 4.0 - Installation Guide]</a>
<a href= "faq6.html">[To Section 6.0 - Networking]</a>
</font>
</p>

<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt= "[back]"></a>
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: install-i386.html,v 1.22 2000/05/03 21:24:55 ericj Exp $</small>
</p>


</body>
</html>
