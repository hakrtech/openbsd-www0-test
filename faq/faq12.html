<html>
<head>
<title>12.0 - For Advanced Users</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif">
<p>
<h2><font color=#e00000>12.0 - For Advanced Users</font><hr></h2>
</p>

<p>
<ul><h3>Table of Contents</h3>
<li><a href="#IDEDMA">12.1 - Forcing DMA access for IDE disks</a>
<li><a href= "upgrade-minifaq.html">12.2 - Upgrading from various versions of OpenBSD via CVS.</a>
</ul>
</p> 
<hr>

<P>
By <i>advanced users</i>, we mean to imply people who have a working
knowledge of how to use and administrate a Unix-like operating system.
If you follow instructions in this section without understanding what
you are doing, you may cause problems in the operation of your system.
<br>

<p>
<a name= "IDEDMA"></a>
<a name= "12.1">
<h2>12.1 - Forcing DMA access for IDE disks</h2>
</a>

<p>
With the PCI IDE code, your chipset may not be known.  If so, you will
get a message like:
<UL>
<PRE>
pciide0: DMA, (unused)
</PRE>
</UL>
If you get this message, you can try and force DMA mode by
using 'flags 0x0001' on your pciide entry in your kernel config file.
That would look something like this:
<UL><PRE>
pciide* at pci ? dev ? function ? flags 0x0001
</PRE></ul>
After doing this, the pciide code will try to use DMA mode regardless of
whether or not it actually knows how to do so with your chipset.  If this 
works, and your system makes it through fsck and startup, it is likely
that this will work for good.  If this does not work, and the system hangs
or panics after booting, then you can't use DMA mode (yet, until support
is added for your chipset).  Note that if you find the documentation
for your PCI-IDE controller's chipset, this is a good start to fully
supporting your chipset within the PCI-IDE code.  You can look on the
manufacturer's website or call them.  If your PCI-IDE controller is part
of your motherboard, figure out who manufactures the chipset and pursue their
resources!
<P>
Note that you will know that DMA support has been enabled if you see this
message:
<UL><PRE>
cd0(pciide0:1:0): using PIO mode 3, DMA mode 1
</PRE></UL>
This means that pciide0, channel 1, drive 0 (which appears to be an ATAPI
CD-ROM) is using DMA data transfers.
</p>

<p>
<font color= "#0000e0">
<a href= "index.html">[Back to Main Index]</a>
<a href= "faq11.html">[To Section 11.0 - Performance Tuning]</a>
<a href= "faq13.html">[To Section 13.0 - IPsec]</a>
</font>
</p>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: faq12.html,v 1.30 2002/05/06 16:17:56 nick Exp $</small>
</p>
</body>
</html>
