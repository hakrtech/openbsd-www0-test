<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>跟踪 -current</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2005-2008 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../../zh/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ 索引]</a>
</font>

<p>

<h1><font color="#e00000">跟踪 <i>-current</i></font></h1>
<hr>

<h3>目录</h3>
<p>
<ul>
<li><a href="#Intro">介绍</a>
<!-- Oldest on top... -->
<li><a href="#20070903">2007/09/03 - 支持 _cxa_atexit support，也修改了相应的 sys/net 头文件</a>
<li><a href="#20071008">2007/10/08 - 为 ospf6d 增加了新用户</a>
<li><a href="#20071020">2007/10/20 - 将 libexpat 移到了基本系统中</a>
<li><a href="#20071030">2007/10/30 - httpd.conf 的模块化修改</a>
<li><a href="#20071125">2007/11/25 - config(8) 特性修改</a>
<li><a href="#20071128">2007/11/28 - AGP 更新</a>
<li><a href="#20071207">2007/12/07 - _hoststated 的用户改名为 _relayd</a>
<li><a href="#20080131">2008/01/31 - 为 snmpd 增加了新用户</a>
<li><a href="#20080205">2008/02/05 - carp(4) 特性修改</a>
<li><a href="#20080303">2008/03/03 - xenocara 的默认位置改变</a>
<li><a href="#20080323">2008/03/23 - cwm 配置和命令行参数已经改变</a>
<li><a href="#20080328">2008/03/28 - landisk 启用共享库</a>
<!-- New additions go on the bottom, please -->
</ul>

<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>介绍</h2>
此文档针对跟踪 <i>-current</i> 的用户。
它包含了从 4.2-release 到 <i>-current</i> 的修改信息，不能用于从 4.1
或更早版本的升级，或者想跟踪
<a href="../../stable.html"><i>-stable</i></a> 的用户。

<p>
如果你想从旧版本更新到 4.2-release 或
4.2-stable，参见<a href="../upgrade42.html">升级指南</a>。

<p>
在使用 -current 和执行下述操作之前，请确认已经阅读和理解了
<a href="../faq5.html">FAQ 5 - 从源代码构建系统</a>。

<p>
你始终应该使用快照作为运行 <i>-current</i> 的起点。
不支持从你自己的源代码编译升级。

<p>
如果你想查阅从早期的 OpenBSD 升级的信息，参见
<a href= "../upgrade-old.html">upgrade-old.html</a>。
它作为历史记录提供 -- 不能用做升级指南。

<p>
<a name="20070903"></a>
<h3>2007/09/03 - 支持 _cxa_atexit support，也修改了相应的 sys/net 头文件</h3>
<p>
对 _cxa_atexit 的支持已经增加到 csu, libc, gcc 和 libstdc++，也修改了相应的 sys/net 头文件。
升级步骤如下:
<ul>
<li><a href="../faq5.html#BldKernel">构建和安装新内核</a>
<li>重启
<li>构建和安装 csu:
<pre>
     # cd /usr/src/lib/csu
     # make obj && make depend && make && make install && make clean
</pre>
<li>构建和安装 gcc:
<pre>
     # cd /usr/src/gnu/usr.bin/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
     # make -f Makefile.bsd-wrapper clean
</pre>
<li><a href="../faq5.html#BldUserland">构建和安装用户程序</a>
</ul>

<a name="20071020"></a>
<h3>2007/10/20 - 将 libexpat 移到了基本系统中</h3>
<p>
libexpat 已经从 xenocara (xbase) 移到了 (base)。
如果你正在使用二进制快照和包，那么当新的快照可用时，它会自动更新。
<p>
如果你从源代码构建，那么清理系统很重要:
<pre>
    # mv /usr/X11R6/lib/libexpat.so.* /usr/lib
    # rm /usr/X11R6/lib/libexpat*
    # rm /usr/X11R6/include/expat*
</pre>

<a name="20071008"></a>
<h3>2007/10/08 - 2007/10/08 - 为 ospf6d 增加了新用户</h3>

<i>已经导入 ospf6d 后台程序</i>，为了使用它，需要增加新用户和组。 以 <i>root</i> 身份使用
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>
执行:

<blockquote><pre>
# useradd -u90 -g=uid -c"OSPF6 Daemon" -d/var/empty -s/sbin/nologin _ospf6d
</pre></blockquote>
此命令同时增加新用户和组。你的环境可能允许复制/粘贴这些命令。

<a name="20071030"></a>
<h3>2007/10/30 - httpd.conf 的模块化修改</h3>
<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd">httpd(8)</a>
现在安装配置文件到 <tt>/var/www/conf/modules.samples</tt>，并且指挥用户在
<tt>/var/www/conf/modules</tt> 创建符号链接。
在指示 <tt>LoadModule</tt> 之后，增加下述行到 <tt>/var/www/conf/httpd.conf</tt>
(靠近节 1 的末尾):
<pre>
    #
    # Include extra module configuration files
    #
    Include /var/www/conf/modules/*.conf
</pre>

<a name="20071125"></a>
<h3>2007/11/25 - config(8) 特性修改</h3>
<p>
扩展的特性需要你的系统重新构建
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=config>config(8)</a>:
<pre>
    # cd /usr/src/usr.sbin/config
    # make clean
    # make obj
    # make depend
    # make
    # make install
</pre>
然后按照<a href="../faq5.html#BldKernel">构建和安装新内核</a>操作。

<a name="20071128"></a>
<h3>2007/11/28 - AGP 更新</h3>
<p>
如果你的机器中的 X 或 XVideo 需要支持 AGP 的话，在安装新内核后，新的 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=agp">agp(4)</a>
驱动需要更新 X 服务器。
<p>
在安装新内核后，安装新的内核头文件，重新构建 X 服务器(或者安装新的 X
快照)，并且确认创建了设备 <tt>/dev/agp0</tt> 。
<pre>
    # cd /usr/src/include
    # make includes
    # cd /usr/src/xenocara/xserver
    # make -f Makefile.bsd-wrapper build
    # cd /usr/src/etc/etc.`uname -m`
    # install -c MAKEDEV /dev
    # cd /dev
    # ./MAKEDEV agp0
</pre>

<a name="20071207"></a>
<h3>2007/12/07 - _hoststated 的用户改名为 _relayd</h3>
hoststated(8) 后台程序已经改名为
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=relayd&amp;sektion=8">relayd(8)</a>,
因此用户和组也需要修改。

<p>
使用
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw(8)</a>,
编辑文件 password，和你喜欢的编辑器编辑文件
<tt>/etc/group</tt>，将全部的“<tt>_hoststated</tt>”修改为
“<tt>_relayd</tt>”。
其它部分不修改。

<a name="20080131"></a>
<h3>2008/01/31 - 为 snmpd 增加了新用户</h3>

<i>已经导入 SNMP 后台程序</i>，为了使用它，需要增加新用户和组。

以 <i>root</i> 身份使用
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>
执行:

<blockquote><pre>
# useradd -u91 -g=uid -c"SNMP Daemon" -d/var/empty -s/sbin/nologin _snmpd
</pre></blockquote>

此命令同时增加新用户和组。你的环境可能允许复制/粘贴这些命令。

<a name="20080205"></a>
<h3>2008/02/05 - carp(4) 特性修改</h3>
carp(4) 已经被修改得更容易配置。
如果你使用 carp 运行 ARP 或 IP 均衡，那么就需要修改配置:
<ul>
<li> 多个 carp(4) 接口共享 IP 已经被 <tt>carpnodes</tt> 选项代替。
<li> <tt>net.inet.carp.arpbalance</tt> sysctl 已经被均衡方式的
<tt>arp</tt> 代替。
<li> 用于 IP 均衡的 <tt>LINK0,1,2</tt> 标志已经被均衡方式的
<tt>ip</tt>，<tt>ip-stealth</tt> 和 <tt>ip-unicast</tt> 代替。
</ul>

<a name="20080303"></a>
<h3>2008/03/03 - xenocara 的默认位置改变</h3>
xenocara 源代码的默认位置现在是 <tt>/usr/xenocara</tt>。
它对于<a href="faq5.html#Xbld">从源代码构建 X</a> 的人很重要。
移动目录 xenocara:

<blockquote><pre>
# mv /usr/src/xenocara /usr
</pre></blockquote>

然后更新到当前的 -current。

<p>
<a name="20080323"></a>
<h3>2008/03/23 - cwm 配置和命令行参数已经改变</h3>
cwm(1) 窗口管理器使用了新的配置解析器，所以配置文件需要依照
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwmrc&amp;sektion=5">cwmrc(5)</a>
所述修改。
命令行参数 "-f" (字体) 和 "-s" (粘滞) 已经被配置指令代替。
请从 .xsession 中删除这些选项，否则登录 xdm(1) 会失败!

<p>
<a name="20080328"></a>
<h3>2008/03/28 - landisk 启用共享库</h3>
为了在 landisk 中从静态库切换到共享库，首先需要构建和安装 gcc 与 ld.so:
<blockquote><pre>
# cd /usr/src/gnu/usr.bin/gcc
# make -f Makefile.bsd-wrapper obj
# make -f Makefile.bsd-wrapper depend
# make -f Makefile.bsd-wrapper
# make -f Makefile.bsd-wrapper install
# cd /usr/src/share/mk
# make install
# cd /usr/src/libexec/ld.so
# make obj
# make depend
# make
# make install
</pre></blockquote>
然后按照
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&amp;sektion=8">
release(8)</a>
中的说明构建整个系统。

<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ 索引]</a>
</font>
<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: current.html,v 1.1 2008/04/28 09:35:19 tobias Exp $</small>

</body>
</html>
<!--
Originally [OpenBSD: current.html,v 1.92]<br>
$Translation: current.html,v 1.6 2008/04/20 07:55:51 dongsheng Exp $<br>
-->
