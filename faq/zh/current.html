<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>跟踪 -current</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2005-2009 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../../zh/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ 索引]</a>
</font>

<p>

<h1><font color="#e00000">跟踪 <i>-current</i></font></h1>
<hr>

<h3>目录</h3>
<p>
<ul>
<li><a href="#Intro">介绍</a>
<!-- Oldest on top... -->
<li><a href="#20090304">2009/03/04 - smtpd 需要增加新用户和组</a>
<li><a href="#20090316">2009/03/16 - 现在通过 mailwrapper(8) 运行 makemap(8)</a>
<li><a href="#20090324">2009/03/24 - ospfd(8) 和 ripd(8) 的 "redistribute default" 行为改变</a>
<li><a href="#20090406">2009/04/06 - pf(4) 的不兼容修改</a>
<li><a href="#20090407">2009/04/07 - pf(4) 默认执行碎片重组</a>
<li><a href="#20090426">2009/04/26 - pfctl(8) 默认关闭 require-order</a>
<li><a href="#20090520">2009/05/20 - rpc.rwalld 需要增加新用户和组</a>
<li><a href="#20090525">2009/05/25 - 更新 daily(8), weekly, monthly, security(8)</a>
<li><a href="#20090531">2009/05/31 - 默认启用 pf</a>
<li><a href="#20090602">2009/06/02 - tmux(1) 从 ports 移到 base 中</a>

<!-- New additions go on the bottom, please -->
</ul>

<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>介绍</h2>
此文档针对跟踪 <i>-current</i> 的用户。
它包含了从 4.5-release 到 <i>-current</i> 的修改信息，不能用于从 4.4
或更早版本的升级，或者想跟踪
<a href="../../stable.html"><i>-stable</i></a> 的用户。

<p>
如果你想从旧版本更新到 4.5-release 或
4.5-stable，参见<a href="../upgrade45.html">升级指南</a>。

<p>
在使用 -current 和执行下述操作之前，请确认已经阅读和理解了
<a href="../faq5.html">FAQ 5 - 从源代码构建系统</a>。

<p>
你始终应该使用快照作为运行 <i>-current</i> 的起点。
不支持从你自己的源代码编译升级。

<p>
如果你想查阅从早期的 OpenBSD 升级的信息，参见
<a href= "../upgrade-old.html">upgrade-old.html</a>。
它作为历史记录提供 -- 不能用做升级指南。

<p>
<a name="20090304"></a>
<h3>2009/03/04 - smtpd 需要增加新用户和组</h3>
需要执行下述命令:
<pre>
useradd -u 95 -g =uid -c "SMTP Daemon" -d /var/empty -s /sbin/nologin _smtpd
</pre>

<p>
<a name="20090316"></a>
<h3>2009/03/16 - 现在通过 mailwrapper(8) 运行 makemap(8)</h3>
由于 smtpd(8) 加入构建，所以现在通过 mailwrapper(8) 运行 makemap(8)，以避免其
sendmail 和 smtpd 版本的二进制冲突。所以，用户需要手工增加下行到
/etc/mailer.conf:
<pre>
makemap         /usr/libexec/sendmail/makemap
</pre>

<p>
<a name="20090324"></a>
<h3>2009/03/24 - ospfd(8) 和 ripd(8) 的 "redistribute default" 行为改变</h3>
"redistribute default" 在 ospfd.conf(5) 和 ripd.conf(5)
的配置文件中设置，现在需要出现在内河路由表的默认路由中，否则
ospfd(8) 和 ripd(8) 不会广播路由。

<p>
<a name="20090406"></a>
<h3>2009/04/06 - pf(4) 的不兼容修改</h3>
包的标准化("擦洗")已经集成到主规则集中。现在可以增加参数
"scrub" 到规则中。例如:

<pre>
        scrub in all no-df max-mss 1440
</pre>

可以被在规则中使用新的 "match" 动作替换:

<pre>
        match in all scrub (no-df max-mss 1440)
</pre>

由于默认强制规则集排序，它或者必须放到主规则集(在
"pass quick" 规则之前)，或者禁止检查规则集顺序:

<pre>
        set require-order no
</pre>

包重组已经简化。删除了 "Crop" 和 "drop-ovl"；只剩余全部重组。可以这样打开:

<pre>
        set reassemble yes|no [no-df]
</pre>

如果指定了 "no-df"，设置了 df 位的碎片(只有碎片!)在进入碎片缓存之前会被清除
df 位，从而重组后的包没有设置 df 位。"no-df" 不影响非碎片包。

<p>
<a name="20090407"></a>
<h3>2009/04/07 - pf(4) 默认执行碎片重组</h3>
由于没有什么理由不使用碎片重组，所以
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>
改为默认启用碎片重组。

<p>
<a name="20090426"></a>
<h3>2009/04/26 - pfctl(8) 默认关闭 require-order</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>
改为默认禁用 "set require-order"。它只是建议，不需要修改配置。

<p>
<a name="20090520"></a>
<h3>2009/05/20 - rpc.rwalld 需要增加新用户和组</h3>
需要执行下述命令:
<pre>
useradd -u 96 -g =uid -c "rpc.rwalld" -d /var/empty -s /sbin/nologin _rwalld
</pre>

<p>
<a name="20090525"></a>
<h3>2009/05/25 - 更新 daily(8), weekly, monthly, security(8)</h3>
当你更新周期性维护脚本到最新版本时，请注意下述改变:
<ul>
<li>脚本 daily, weekly, 和 monthly 现在全部使用 root crontab(5) 中的环境变量
PATH，它默认是 /bin:/sbin:/usr/bin:/usr/sbin。daily(8) PATH 不再包含
/usr/local/bin, weekly(8) PATH 不再包含 /usr/libexec。在 daily.local,
weekly.local 和 monthly.local 中，你仍旧可以增加额外的目录到 PATH 中。
<li>这四个脚本全部镇压没有内容的区段。当脚本不产生输出时，不再向
root 发送邮件。这可能导致你的解析脚本需要做些调整。
<li>脚本 security(8) 现在要使用 daily(8) 中的一些函数，所以不能再独立运行。如果你需要手工运行，请使用
"sudo /bin/sh /etc/daily"。
</ul>

<p>
<a name="20090531"></a>
<h3>2009/05/31 - 默认启用 pf</h3>
现在 rc.conf 默认启用
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> .

<p>
<a name="20090602"></a>
<h3>2009/06/02 - tmux(1) 从 ports 移到 base 中</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&amp;sektion=1">tmux(1)</a>
已经从 ports 移到 base 中。如果你已经从 ports 安装，请使用 pkg_delete 删除。

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: current.html,v 1.14 2009/06/13 08:31:49 ajacoutot Exp $</small>

</body>
</html>
<!--
Originally [OpenBSD: current.html,v 1.154]<br>
$Translation: current.html,v 1.23 2009/06/04 05:25:35 dongsheng Exp $<br>
-->
