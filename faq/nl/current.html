<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>-current volgen</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "de OpenBSD FAQ pagina">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "Dit document copyright 2005 OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../../nl/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" 
border="0">    
</a>
<p>
<font color= "#0000e0">
<a href="index.html">[FAQ Index]</a>
</font>

<p>

<h1><font color="#e00000"><i>-current</i> volgen</font></h1>
<hr>

<h3>Inhoudsopgave</h3>
<p>
<ul>
<li><a href="#Intro">Inleiding</a>
<!-- Oudste bovenaan... -->
<li><a href="#20050927">2005/09/27 - bouwen vereist nieuwe xargs functionaliteit</a>
<li><a href="#20051006">2005/10/06 - Veranderingen aan MAKEDEV(8) en ksh(1)</a>
<li><a href="#20051116">2005/11/16 - Nieuwe versie van ftp-proxy(8)</a>
<li><a href="#20051216">2005/12/16 - libresolv verwijderd</a>
<li><a href="#20060104">2006/01/04 - mac68k gaat over op wscons(4)</a>
<!-- Toevoegingen onderaan, aub -->
</ul>
    
<hr>

<a name="Intro"></a>
<h2>Inleiding</h2>
<XXXversion>
Dit document is bedoeld voor mensen die <i>-current</i> willen volgen.
Het bevat de veranderingen tussen de 3.8-uitgave en <i>-current</i>, en
mag dus NIET worden gebruikt door iemand die 3.7 of eerder gaat upgraden,
of door mensen die <a href="../../nl/stable.html"><i>-stable</i></a>
willen volgen.

<p>
Als u wilt updaten naar de 3.8-uitgave of 3.8-stable vanaf een voorgaande 
versie, bekijk dan de <a href="upgrade38.html">upgrade gids</a>.

<p>
Zorg ervoor dat u <a href="faq5.html">FAQ 5 - Het systeem vanaf broncode
bouwen</a> gelezen en begrepen hebt alvorens -current en de onderstaande
instructies te gebruiken.

<p>
U zult ALTIJD een snapshot moeten gebruiken als beginpunt als u <i>-current</i> 
gaat gebruiken. Upgraden door uw eigen broncode te compileren wordt niet 
ondersteund.

<p>
Als u upgrade informatie wilt lezen van voorgaande OpenBSD versies, bekijk dan 
<a href="../upgrade-old.html">upgrade-old.html</a>.
Dit wordt voorzien als historisch archief -- het wordt beter NIET als
upgrade proceduregids gebruikt.


<p>
<a name="20050927"></a>
<h3>2005/09/27 - Bouwen vereist nieuwe xargs functionaliteit</h3>

Bouw en installeer xargs(1).
<pre>
     # cd /usr/src/usr.bin/xargs && make obj && make && make install
</pre>
Start vervolgens make build.

<p>
<a name="20051006"></a>
<h3>2005/10/06 - Wijzigingen aan MAKEDEV(8)</h3>

MAKEDEV werd gewijzigd waarbij de snelheid ervan flink werd verhoogd.
Deze wijzigingen hangen af van wijzigingen aan ksh die eerder werden gedaan.
Hierdoor kunnen installatiemedia die vóór deze datum gebouwd werden,
niet gebruikt worden.
<br>

<p>
<a name="20051116"></a>
<h3>2005/11/16 - Nieuwe versie van ftp-proxy(8)</h3>

ftp-proxy werd vervangen door wat voorheen pftpx genoemd werd.
De nieuwe ftp-proxy draait stand-alone en niet vanuit inetd.conf zoals vroeger.
<p>
Upgrade instructies zijn als volgt:
<p>
Stop de oude ftp-proxy door een nieuwe /etc/inetd.conf te installeren of
schakel gewoon zijn entry in /etc/inetd.conf handmatig uit.

<pre>
cp /usr/src/etc/inetd.conf /etc/inetd.conf
</pre>

Stuur vervolgens via kill een HUP signaal naar inetd:
<p>
<pre>
kill -HUP `cat /var/run/inetd.pid`
</pre>

Start de nieuwe ftp-proxy door nieuwe
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8"><i>/etc/rc</i></a>
en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;sektion=8"><i>/etc/rc.conf</i></a>
te installeren en ftpproxy_flags="" in /etc/rc.conf.local te zetten.

<pre>
cp /usr/src/etc/{rc,rc.conf} /etc
echo 'ftpproxy_flags=""' >> /etc/rc.conf.local
</pre>

Als alternatief kan het gestart worden door gewoon
/usr/sbin/ftp-proxy aan te roepen vanuit /etc/rc.local
<p>

De nieuwe proxy gebruikt <a href="../pf/nl/anchors.html"><i>ankers</i></a> om
dataverbindingen toe te laten, wat betekent dat
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5"><i>/etc/pf.conf</i></a>
aangepast moet worden.
In de NAT sectie hebt u nodig:
<p>

<pre>
nat-anchor "ftp-proxy/*"
rdr-anchor "ftp-proxy/*"
</pre>

Deze zijn verplicht, zelfs als u verder geen NAT gebruikt.
De volgende regel, die er waarschijnlijk reeds staat voor de oude ftp-proxy,
moet blijven staan:
<pre>
rdr pass on $int_if proto tcp from $lan to any port 21 -> \
    127.0.0.1 port 8021
</pre>

In de regelsectie is dit nodig:

<pre>
anchor "ftp-proxy/*"
</pre>

Regels die de proxy toelaten FTP controleverbindingen te maken
(bestemmingspoort 21/tcp) moeten blijven staan.
Regels die FTP dataverbindingen toelaten zijn niet langer nodig.
Die regels kunnen "user proxy" of "to port > 49151" bevatten.

Er werd voor gezorgd om de commandolijnopties gelijkaardig te houden, maar
sommige kunnen verschillen.  Zie de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8">ftp-proxy</a>
man pagina.
<p>

Eén geval verdient speciale vermelding: als u oude clients hebt die berusten
op actieve modus dataverbindingen die 20/tcp als bronpoort gebruiken, moet u
de '-r' optie gebruken.
(Hiervoor moest u de oude proxy met "-u root" draaien).
<p>
Draai ftp-proxy met "-d -D7" als u in de problemen komt en een diagnose
wil maken van wat er gebeurt.

<p>
<a name="20051216"></a>
<h3>2005/12/16 - libresolv verwijderd</h3>

U moet libresolv van uw machine verwijderen aangezien dit niet langer
geïnstalleerd wordt.
<pre>
     # rm /usr/lib/libresolv*
</pre>

<p>
<a name="20060104"></a>
<h3>2006/01/04 - mac68k gaat over op wscons(4)</h3>
Voordat u de nieuwe kernel boot, moeten enkele bestanden worden aangepast
voor 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&amp;sektion=4">wscons(4)</a>.
</p>

<pre>
     # cp /usr/src/etc/etc.mac68k/MAKEDEV /dev
     # cd /dev &amp;&amp; sh ./MAKEDEV wscons
</pre>

<p>
Verander in <tt>/etc/ttys</tt>, de getty op <em>ttye0</em> naar
<em>ttyC0</em> en herstart met uw nieuwe kernel.
</p>
	

<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
</font>
<p>
<hr>
<a href="index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[terug]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: current.html,v 1.26 ]
$Translation: current.html,v 1.16 2006/01/05 15:50:42 jasper Exp $
-->
$OpenBSD: current.html,v 1.10 2006/01/06 12:42:41 jufi Exp $
</small>

</body>
</html>
