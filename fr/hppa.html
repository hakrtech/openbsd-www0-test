<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD/hppa</title>
<link rev=made href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="description" content="the OpenBSD/hppa page">
<meta name="keywords" content="openbsd,hppa">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2002 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">
<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>

<h2><font color="#e00000">hppa</font></h2>
<hr>
<h3><font color="#0000e0"><strong>&Eacute;tat et histoire :</strong></font></h3>
<p>Les syst&egrave;mes d&eacute;marrent en mode multi-utilisateur et des snapshots 
  complets sont mis &agrave; disposition de mani&egrave;re r&eacute;guil&egrave;re. 
  Il existe plusieurs projets en d&eacute;veloppement pour le support des controlleurs 
  SCSI et des p&eacute;riph&eacute;riques d'entr&eacute;e, et pour r&eacute;soudre 
  certains probl&egrave;mes de stabilit&eacute;.</p>
<p> Ce projet a &eacute;t&eacute; initi&eacute; &agrave; un moment o&ugrave; les 
  seuls syst&egrave;mes d'exploitation libres pour les machines HP PA-RISC &eacute;taient 
  <a href="http://www.cs.utah.edu/projects/flux/lites/html">Lites</a> et <a
href="http://www.osf.org/mall/os/pa-mklinux">MkLinux</a>. 
  Ces deux sources f&ucirc;rent des fournisseurs majeurs d'information et de code 
  pour le d&eacute;veloppement initial du port OpenBSD/hppa. <a
href="http://www.cs.utah.edu/~mike/hpbsd/hpbsd.html">HPBSD</a> 
  est encombr&eacute; avec du code propri&eacute;taire HP et des licences USL 
  licensing. De plus, il n'est pas publiquement disponible. Un des b&eacute;n&eacute;fices 
  directs principaux des efforts de portage pr&eacute;c&eacute;dents (en plus 
  du code bien entendu ;) est le support de HP PA-RISC par GCC et binutils, ce 
  qui a permit de construire rapidement un environnement bas&eacute; sur des outils 
  de d&eacute;veloppement crois&eacute;s. 

<p> Plus tard, HP a d&eacute;cid&eacute; de sponsoriser un portage <a
href="http://www.parisc-linux.org/">Linux</a> sur des machines PA-RISC qui a
abouti dans les faits &agrave; la publication d'une documentation
propri&eacute;taire, m&ecirc;me si les machines cibl&eacute;es sont des classes
diff&eacute;rentes de machines 9000. 

<h3><font color="#0000e0"><strong>Mat&eacute;riel support&eacute; :</strong></font></h3>

<ul>
<li>Processeurs (<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=4&amp;arch=hppa">intro</a> 
et (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cpu&amp;sektion=4&amp;arch=hppa">cpu</a>)): 
<ul>
<li>Bas&eacute;s sur PA7000 : 705, 710, 720, 730, 750 (actuellement en d&eacute;veloppement) 
<li>Bas&eacute;s sur PA7100 : 715/33, 715/50, 715/75, 725/50, 725/75, 735/100, 
755/100 
<li>Bas&eacute;s sur PA7100LC: 712, 715/64, 715/80, 715/100, 715/100XC, 
725/64, 725/100 
<li>Bas&eacute;s sur PA7150 : 735/125, 755/125 
<li>Bas&eacute;s sur PA7200 : J200, J210 
</ul>
<li>Controlleurs de bus/ES: 
<ul>
<li> GSC (<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=gsc&amp;sektion=4&amp;arch=hppa">gsc</a>): 
LASI (<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=lasi&amp;sektion=4&amp;arch=hppa">lasi</a>), 
ASP (<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=asp&amp;sektion=4&amp;arch=hppa">asp</a>) 
</ul>
<li>Controlleurs SCSI (actuellement en d&eacute;veloppement) : 
<ul>
<li>Processeurs NCR53C710 SCSI I/O (<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=osiop&amp;sektion=4">osiop</a>) 
<li>Processeurs NCR53C720 SCSI I/O (<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=siop&amp;sektion=4">siop</a>) 
</ul>
<li>Vid&eacute;o SGC/GSC (<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=sti&amp;sektion=4">sti</a>): 
<ul>
<li>Artist (Comme celle qu'on peut trouver sur 712) 
<li>CRX-8, CRX-24, HCRX-8, HCRX-24 
</ul>
<li>P&eacute;riph&eacute;riques RS-232 : 
<ul>
<li> P&eacute;riph&eacute;rique ns16550 int&eacute;gr&eacute; ou similaire 
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=com&amp;sektion=4">com</a>) 
</ul>
<li>P&eacute;riph&eacute;riques d'entr&eacute;e (actuellement en d&eacute;veloppement): 
<ul>
<li>Clavier et souris PS/2
      <li>Clavier et souris HIL
</ul>
</ul>
Syst&egrave;mes qui devraient &eacute;ventuellement fonctionner : 
<ul>
  <li>PA2.0 (en mode 32-bit); 
  <li>HP 9000 834, 835, 836, 844, 845, 846;
<li>HP 9000 E23, E25, E35, E45, E55;
<li>HP 3000 908, 918, 928, 938;
  <li>Hitachi VQ200, VQ210, et quelques autres stations de travail non-HP; 
  <li>Precision Book de RDI Computer Corporation (enfin, pas s&ucirc;r) 
  <li>Syst&egrave;mes &agrave; carte unique HP VME et VXI (requiert VXI au moins) 
</ul>
<br>
Du mat&eacute;riel est n&eacute;cessaire pour ce projet, voir la <a href="want.html">liste 
de souhaits</a> (contactez <a href="mailto:mickey@openbsd.org">mickey</a>). 
<h3><font color="#0000e0"><strong>Documentation</strong></font></h3>

<small>(la plupart ayant été publiée par HP pour le projet
<a href="http://www.parisc-linux.org/">Linux/parisc</a>)</small>:
<ol type=1>
<li>CPUs HP PA-RISC
	<ol type=a>
<li><a href="http://ftp.parisc-linux.org/docs/PCXL_ers.ps">CPU ERS PA7100LC</a>
<li><a href="http://ftp.parisc-linux.org/docs/pcxl2_ers.ps">CPU ERS PA7300LC</a>
	</ol>
<li><b>Code dépendant du processeur / I/O Dependent Code Interface</b><br>
<small>(selection de chapitres du "PA-RISC I/O Architecture Specification")</small>
	<ol type=a>
<li><a href="http://ftp.parisc-linux.org/docs/pdc32.pdf">PDC 1.1</a>
<li><a href="http://ftp.parisc-linux.org/docs/iodc.pdf">IODC 1.1</a>
<li><a href="http://ftp.parisc-linux.org/docs/ver_nums.pdf">Version and Identification Number Allocation</a>
<li><a href="http://ftp.parisc-linux.org/docs/data_formats.pdf">Memory Data Formats 2.0</a>
<li><a href="http://ftp.parisc-linux.org/docs/pdc.pdf">PDC Procedures 2.0</a>
<li><a href="http://ftp.parisc-linux.org/docs/pdce.pdf">PDC Entry Points 2.0</a>
<li><a href="http://ftp.parisc-linux.org/docs/os_interface.pdf">OS Interface 2.0</a>
	</ol>
<li><b>Contrôleurs de bus/ponts/adaptateurs</b>
	<ol type=a>
<li><a href="http://ftp.parisc-linux.org/docs/lasi_ers.ps">LASI Core Bus Adapter (including lan, scsi, serial, lpt controllers)</a>
<li><a href="http://ftp.parisc-linux.org/docs/dino_ers.ps">Dino PCI bridge</a>,
and <a href="http://ftp.parisc-linux.org/docs/Dino_3_1_Errata.html">Errata</a>
<li><a href="http://ftp.parisc-linux.org/docs/elroy_ers.ps">Elroy ERS (Edited for Open Source)</a>
<li>Astro <a href="http://ftp.parisc-linux.org/docs/astro_intro.ps">Overview</a>, <a href=http://ftp.parisc-linux.org/docs/astro_errors.ps>Error handling</a>,<a href=http://puffin.external.hp.com/docs/astro_ioc.ps>R2I Operations</a>, <a href=http://puffin.external.hp.com/docs/astro_regmap.ps>Registers Map</a>, <a href=http://puffin.external.hp.com/docs/astro_runway.ps>Runway Interface</a>, <a href=http://puffin.external.hp.com/docs/astro_sysmap.ps>System Mamory Map</a>
	</ol>
<li><a href="http://ftp.parisc-linux.org/docs/sti.pdf">Stinger graphics</a>
<li><a href="http://www.lsilogic.com/techlib/techdocs/old_storage/770_2_0.pdf">NCR 53C700/710/720 SCSI I/O Processors</a>
    <small>(la documentation est en fait pour 770, qui est dit compatible)</small>
<li>Intel <a href="http://developer.intel.com/design/network/datashts/290219.htm">i82596DX/SX</a> and <a href=http://developer.intel.com/design/network/datashts/290218.htm>i82596CA</a> Ethernet Controllers
</ol>
Pour d'autres informations, voir <a href="http://www.openpa.net/">OpenPA</a>.


<hr>

<h3><font color=#0000e0>Construire les outils de développement croisés :</strong></font></h3>
<pre>
cd /usr/src
sudo make TARGET=hppa cross-tools
</pre>
<p>
Le processus de construction des outils de développement croisés peut échouer au
moment de la compilation de la libc, considérez ceci comme normal, puisque le
support de la libc n'est pas encore terminé.


<a name="boot_lif"></a>
<h4>Construire le fichier boot.lif en utilisant les outils de développement
croisés : </h4>
<p>
<pre>
cd /sys/arch/hppa/stand
make obj
set cross=(/usr/cross/hppa/usr/bin)
make MACHINE=hppa MACHINE_ARCH=hppa \
	"AS=$cross/as" "CC=$cross/cc" "CXX=$cross/c++" \
	"CPP=$cross/cpp" "LD=$cross/ld" \
	"AR=$cross/ar" "STRIP=$cross/strip" \
	"LORDER=$cross/lorder" "NM=$cross/nm" \
	"RANLIB=$cross/ranlib" "SIZE=$cross/size"
</pre>

<p>
Vous obtiendrez un fichier <a href="http://hppa.lucifier.net/#boot_lif"><em>boot.lif</em></a>
prêt à booter dans le répertoire des objets.
Cette image peut inclure une image de noyau <em>diskless</em> si une était
disponible dans <em>sys/arch/hppa/compile/SHEPHERD_PIE/bsd</em>.
<br>
Le processus de compilation croisée du noyau est semblable à celui du boot, 
consultez <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;apropos=0&amp;sektion=0&amp;manpath=OpenBSD+Current&amp;format=html>config(8)</a>
et <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;apropos=0&amp;sektion=0&amp;manpath=OpenBSD+Current&amp;format=html">options(8)</a> 
pour les options de compilation et de configuration du noyau.
</p> 
<hr>
Pour utiliser les fichiers <a
href="http://hppa.lucifier.net/#boot_lif">boot.lif</a>, vous devez préparer votre
serveur et indique à votre machine de s'amorcer sur le réseau :  
<ol>
  <li>Configuration du serveur
    <ul>
    <li> Pour les machines anciennes, (705, 7[1235]0, vieilles 715)
	<a
	href="http://www.openbsd.org/cgi-bin/man.cgi?query=rbootd&amp;apropos=0&amp;sektion=0&amp;manpath=OpenBSD+Current&amp;format=html">rbootd</a> doit être configuré et démarré.<br>
      <ul>
      <li><b>/etc/<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=rbootd&amp;apropos=0&amp;sektion=0&amp;manpath=OpenBSD+Current&amp;format=html">rbootd</a>.conf</b>
contient une seule ligne par machine devant s'amorcer à partir du serveur.
Chaque ligne contient l'adresse ethernet de la machine hppa cliente, et le nom
de fichier à charger à partir du serveur tftp. Par exemple : 
	<pre>
	8:0:9:70:c4:11    <a href="#boot_lif">boot.lif</a>    # 9000/720
	8:0:9:19:fb:a0    <a href="#boot_lif">boot.lif</a>    # 9000/725
	</pre>
      </li>
      </ul>
    </li>
    <li>Les machines récentes (712, nouvelles 715, 725) ne chercheront pas
    rbootd, mais nécessitent une configuration <b>bootp</b><br>
      <ul>
      <li><b>/etc/<a
      href="http://www.openbsd.org/cgi-bin/man.cgi?query=bootptab&amp;apropos=0&amp;sektion=5&amp;manpath=OpenBSD+Current&amp;format=html">bootptab</a></b>
      contient un bloc d'information pour chaque machine. Par exemple : 
	<pre>
	# 9000/715
	boron:\
        	ha=0800095f5a6e:\
        	bf=boot.lif:\
        	hd=:\
        	ht=ethernet:\
        	ip=10.0.1.143:\
        	rp=/usr/local/exports/boron/root:\
        	sm=255.255.255.0:\
        	td=/tftpboot:
	</pre>
      </li>
	<li>
	Créez le répertoire /tftpboot et placez-y le fichier <a href="#boot_lif">boot.lif</a>.<br> 
	</li>
	<li>
	Créez une entrée pour votre hppa dans le fichier <b>/etc/ethers</b> : <br>
	<pre>
	08:00:09:5f:5a:6e	boron
	</pre>  
	</li>
	<li>
	Créez une entrée pour 'boron' dans le fichier <b>/etc/hosts</b> : <br>
	<pre>
	10.0.1.143	boron
	</pre>  
	</li>
	<li>
	Créez le répertoire /usr/local/exports/boron/root et placez-y 
	<a href="http://hppa.lucifier.net/root/dev/MAKEDEV">/dev/MAKEDEV</a>,
	 <a href="http://hppa.lucifier.net/root/sbin/init">/sbin/init</a>, <a href=http://hppa.lucifier.net/root/bin/ksh>/bin/ksh</a>		
	 à leurs emplacements respectifs.
	</li>
	<li>
	Créez une entrée dans <b>/etc/exports</b>, de telle sorte que le
	répertoire racine soit exportée vers le client : 
	<pre>
	/usr/local/exports/boron/root boron
	</pre>  
	</li>
	<li>
	Rappelez vous que vous devez avoir activé
	<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=bootpd&amp;apropos=0&amp;sektion=8amp;&manpath=OpenBSD+Current&amp;format=html">bootpd</a>
	 et <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftpd&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">tftpd</a>
	dans /etc/inetd.conf, et redémarré <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">inetd</a>.
      </li>
      	<li>
	Rappelez vous aussi que vous devez activer le
	<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=nfsd&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">serveur nfs</a>
	, <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=rarpd&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">rarpd</a> 
	et <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=portmap&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">portmap</a> 
	dans <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">/etc/rc.conf</a>.
	</li>
	</ul>
    </li>
    <li>Pour de plus amples informations sur la configuration du serveur pour
    l'amorçage par le réseau, voir aussi : <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&amp;apropos=0&amp;sektion=0&amp;manpath=OpenBSD+Current&amp;format=html">diskless(8)</a>.</li>
    </ul>
  <li>Amorçage du client par le réseau </li><br>
  <ul>
    <li>BOOT_ADMIN<br>
        Afin d'obtenir le prompt BOOT_ADMIN, vous devez actionner <em>&lt;esc&gt;</em> 
	lorsque la machine démarre. Une fois que la machine a testé ses
	périphériques amorçables, tapez 'a' pour obtenir le prompt
	'BOOT_ADMIN'.
    </li>
    <li>commande d'amorçage par le réseau <br>
        Une fois au prompt 'BOOT_ADMIN, tapez : 
<pre>
	BOOT_ADMIN> boot lan isl
</pre>
        et vous êtes en train d'amorcer boot.lif !
    </li>

</ol>
<hr>
<a href="plat.html"><img height=24 width=24 src="../back.gif" border=0 alt=OpenBSD></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: hppa.html,v 1.67 ]<br>
$Translation: hppa.html,v 1.18 2002/11/14 11:43:38 saad Exp $<br>
$OpenBSD: hppa.html,v 1.18 2002/11/14 15:06:13 jufi Exp $
</small>

</body>
</html>
