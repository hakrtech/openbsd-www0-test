<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
 <head>
  <meta http-equiv="Content-Type"
        content="text/html; charset=iso-8859-1">
  <meta name="resource-type"
        content="document">
<meta name="description"
        CONTENT="How to make an OpenBSD port">
  <meta name="keywords"
        content="openbsd,ports">
  <meta name="distribution"
        content="global">
  <meta name="copyright"
        content="This document copyright 1997-2009 by OpenBSD.">
  <title>Construction d'un port OpenBSD</title>
  <link rev="made" HREF="mailto:www@openbsd.org">
 </head>
 <body text="#000000" bgcolor="#FFFFFF" link="#23238E">
<a href="index.html"><img alt="[OpenBSD]" height="30" width="141"
src="../images/smalltitle.gif" border="0"></a>

  <h2><font color="#e00000">Construction d'un port OpenBSD</font></h2>

   Ainsi, vous venez juste de compiler votre logiciel préféré sur votre
   machine OpenBSD et vous voulez partager le fruit de cet effort en le
   transformant en port standard. Que faut t'il faire ?
  <p>
   La chose la plus importante à faire est de
   <strong>communiquer</strong>. Demandez aux personnes sur <a
   href="mailto:ports@openbsd.org">ports@openbsd.org</a> si elles
   travaillent déjà sur ce port. <em>Parlez en à l'auteur du
   logiciel</em>, en évoquant aussi les problèmes que vous pourriez
   rencontrer. Si l'information sur la licence utilisée apparait comme
   incorrecte, informez le en. Si vous avez du jongler pour faire la
   construction du port, dites lui ce qu'il pourrait corriger. S'ils
   développent exclusivement sur Linux et ignorent le reste du monde
   Unix, essayez de les faire changer de point de vue.
  <p>
   La <strong>COMMUNICATION</strong> fait la différence entre un port 
   réussi et un port qui sera abandonné progressivement par tout le monde.
  <p>
   Premièrement, regardez les informations de portage sur cette page.
   Ensuite, consultez les documents référencés, notamment la <a
   href="checklist.html">liste de contrôle</a> de portage OpenBSD.
  <p>
   Testez, et re-testez, et enfin testez encore !
  <p>
   Désormais, OpenBSD supporte complètement les mises à jour. Ceci
   signifie qu'un <a href="../porting/fr/update.html">certain nombre de
   problèmes</a> doivent être pris en compte.
  <p>
   Soumettez le port. Créez un tarball gzippé du répertoire du port.
   Vous pouvez soit le déposer sur un serveur FTP ou HTTP publique, soit
   l'envoyer à <a href="mailto:ports@openbsd.org">ports@openbsd.org</a>,
   soit envoyer le port avec un encodage mime à la même adresse.
   Choisissez la méthode qui vous convient le plus.
  <p>
   Porter un nouveau programme prend du temps. Le maintenir sur le long
   terme est encore plus dur. Cela ne pose pas de problème de porter un
   logiciel et laisser d'autres personnes le maintenir par la suite. Il
   n'y a aucun problème non plus à aider à maintenir d'autres ports tant
   que vous communiquez afin d'éviter de dupliquer les efforts.
  <p>
   Dans la culture OpenBSD, le <code>MAINTAINER</code>ship (i.e. la
   maintenance) n'est pas un statut mais une responsabilité. Nous avons
   CVS et les commentaires pour créditer qui de droit. Un
   <code>mainteneur</code> est autre chose : une personne qui assume la
   responsabilité de la bonne marche du port et qui peut se permettre de
   passer du temps afin de s'assurer qu'il fonctionne aussi bien que
   possible.

<h3><font color="#0000e0">Index de la Documentation de Portage</font></h3>
<ul>
<li><a href="#Avail">Informations de Portage disponibles</a></li>
<li><a href="#Policy">Politique de Portage OpenBSD</a></li>
<li><a href="#Security">Recommandations de Sécurité</a></li>
<li><a href="#Generic">Conseils de Portage Génériques</a></li>
<li><a href="#Other">D'autres Conseils Utiles</a></li>
</ul>

  <h3><font color="#0000e0"><a name="Avail">Informations de portage
      disponibles </a></font></h3> <ul>
   <li>La <a href="checklist.html">liste de contrôle</a> de Portage OpenBSD.
   <li>Les <a href="../porting/fr/update.html">conseils de mise à jour</a>
       des ports OpenBSD.
   <li>La page de manuel
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bsd.port.mk&amp;sektion=5">bsd.port.mk(5)</a>. Celle-
   ci renseigne sur le makefile d'infrastructure des ports qui est
   inclus à la fin de chaque makefile de port. Il y a toujours quelques
   commentaires au début même du fichier, mais la plupart des
   informations utiles sont à présent documentées.
   <li>Quelques différences avec les autres systèmes de port BSD, qui
       est un résumé des <a href="../porting/fr/diffs.html">différences
       d'infrastructures</a>.
   <li><a href="../porting/fr/libraries.html">L'utilisation des bibliothèques
       partagées dans les Ports OpenBSD</a>. Ces règles sont <strong>très
       importantes</strong> lorsque vous utilisez les bibliothèques
       partagées.
   <li><a href="../porting/fr/autoconf.html">Les spécificités de GNU
       autoconf</a>, comment les traiter dans le cas des ports OpenBSD.
   <li><a href="../porting/fr/config.html">Les fichiers de
       configuration</a>, une partie fréquemment problématique pour les
       nouveaux développeurs, et les outils uniques avec lesquels
       l'arbre des ports OpenBSD doit traiter.
   <li><a href="audio-port.html">Portage des applications audio sur
       OpenBSD</a>.
   <li>La documentation du 
       <a href="http://www.netbsd.org/Documentation/software/packages.html">
       système de paquetages de NetBSD</a>. Ce document décrit la version NetBSD
       du système de ports de FreeBSD et est très utile.
   <li>Le
       <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/porters-handbook/index.html">
       Guide du Porteur FreeBSD</a>. C'est la bible du portage FreeBSD.
   <li>La liste de diffusion sur les ports OpenBSD,
       <a href="mailto:ports@openbsd.org">ports@openbsd.org</a>.
  </ul>
  <h3><font color="#0000e0"><a name="Policy">Politique de Portage
      OpenBSD </a></font></h3> <ul>
   <li>OpenBSD N'utilise PAS <code>/usr/local/etc/rc.d</code>.<br>
       <code>/usr/local</code> est parfois partagé entre plusieurs
       machines grâce à NFS. Pour cette raison, les fichiers de
       configuration spécifiques à une machine ne peuvent être stockés
       dans <code> /usr/local</code>, <code>/etc</code> est le dépôt
       central pour les fichiers de configuration propres à une machine.
       De plus, la politique d'OpenBSD est de ne jamais mettre à jour
       les fichiers dans <code> /etc</code> automatiquement. Les ports
       qui nécessitent des réglages de "boot" spécifiques devraient
       informer l'administrateur de ce qu'il faut faire plutôt que
       d'installer aveuglément les fichiers.
   <li>OpenBSD NE compresse PAS les pages de manuel.
   <li>OpenBSD NE nécessite PAS <code>-lcrypt</code>.<br> Le chiffrement
       DES fait partie de la <code>libc</code> standard.
   <li>OpenBSD a un espace de nommage séparé pour les utilisateurs et
       les groupes créés par les ports. Consultez
       <code>/usr/ports/infrastructure/db/user.list</code> pour les
       détails.
   <li>OpenBSD est très fortement orienté sécurité. Vous devriez lire et
       comprendre la <a href="#Security">section sécurité</a> de cette
       page.
   <li>Assurez vous d'ajouter le "tag" CVS
       <code>&#36;OpenBSD&#36;</code> dans le Makefile. Si vous importez
       le port d'un autre système, assurez vous d'enlever également les
       "tags" précédents dans le Makefile.
   <li>Le but est de rendre toutes les applications portées compatibles
       avec OpenBSD. Afin d'atteindre cet objectif, vous
       <strong>devez</strong> fournir les patches OpenBSD au mainteneur.
       </ul>
  <h3><font color="#0000e0"><a name="Security">Recommandations de
      Sécurité</a></font></h3> Il y a beaucoup de problèmes de sécurité
      dont il faut se soucier. Si vous n'êtes pas complètement
      convaincus par ce que vous faites, nous vous prions de demander de
      l'aide sur la liste de diffusion <a
      href="mailto:ports@openbsd.org">ports</a>.

  <ul>
   <li><em>N'utilisez pas</em> de code alpha ou beta lors de la création
       du port. Utilisez la dernière révision, ou la dernière révision
       stable.

   <li>Tous les logiciels à installer en tant que serveur devraient être
       analysés sur la présence de débordements de tampon, et
       particulièrement les utilisations non sures de
       <code>strcat/strcpy/strcmp/sprintf</code>. En général,
       <code>sprintf</code> devrait être remplacé par
       <code>snprintf</code>.

   <li>N'utilisez jamais de noms de fichiers au lieu de la sécurité
       réelle. De nombreuses situations de compétition existent sur
       lesquelles vous n'avez pas le contrôle. Par exemple, un attaquant
       qui possède déjà des privilèges utilisateur sur votre machine
       pourrait remplacer les fichiers dans <code>/tmp</code> avec des
       liens symboliques vers des fichiers plus stratégiques, comme
       <code>/etc/master.passwd</code>.

   <li>Par exemple, <code>fopen</code> ainsi que <code>freopen</code>
       <strong>créent un nouveau fichier ou en ouvrent un
       existant</strong> en écriture. Un attaquant pourrait créer un
       lien symbolique depuis <code>/etc/master.passwd</code> vers
       <code>/tmp/addrpool_dump</code>. Au moment ou vous l'ouvrez, le
       fichier de mots de passe est modifié. Oui, même avec un
       <code>unlink</code> juste avant. Vous ne faites que rétressir le
       champ des possibilités. Utilisez plutôt <code>open</code> avec
       <code>O_CREAT|O_EXCL</code> et <code>fdopen</code>.
                 
   <li>Un autre problème très courant est la fonction
       <code>mktemp</code> Ne négligez pas les avertissements de
       l'éditeur de liens bsd sur son utilisation. <strong>Ces derniers
       doivent être corrigés</strong>. Ce n'est pas aussi simple que
       <code>s/mktemp/mkstemp/g</code>. <br>Réferrez vous à la page de
       manuel de
       <a href="http://www.openbsd.org/cgi-bin/man.cgi?sektion=3&amp;query=mktemp">
       <code>mktemp(3)</code></a> pour plus d'informations.
       Le code correct utilisant <code>mkstemp</code>
       inclus les sources de <code>ed</code> et <code>mail</code>. Un
       des rares cas d'utilisation correcte de <code>mktemp</code> est
       le port de <code>rsync</code>.

   <li>Juste parce que vous pourriez vous apercevoir que cela ne fait
       pas ce à quoi vous vous attendiez. Un problème de cette nature
       était le problème <code>startx</code>. En tant que programme
       setuid, vous pouviez lancer startx avec tout script. Si le
       fichier n'était pas un script shell valide, un message d'erreur
       suivait, affichant la première ligne du fichier en question, sans
       aucune vérification supplémentaire. Il était ainsi très facile
       d'afficher la première ligne du fichier de mots de passe shadow,
       celle-ci étant souvent l'entrée root. N'ouvrez pas votre fichier,
       et faites ensuite un <code>fstat</code> sur le descripteur ouvert
       pour vérifier si vous auriez été en mesure de l'ouvrir (ou
       l'attaquant jouera avec /dev/rst0 et réembobinera votre bande) --
       ouvrez le avec des informations uid/gid/grouplist correctes.

   <li>N'utilisez rien qui "fork" un shell dans un programme setuid
       avant de renoncer à vos privilèges. Ceci inclus
       <code>popen</code> et <code>system</code>. Utilisez
       <code>fork</code>, <code>pipe</code> et <code>execve</code> à la
       place.

   <li>Transmettez des descripteurs ouverts aux autres programmes plutôt
       que des noms de fichiers pour éviter les situations de
       compétition. Même si un programme n'accepte pas les descripteurs,
       vous pouvez toujours utiliser <code>/dev/fd/0</code>.

   <li>Les droits d'accès sont attachés aux descripteurs de fichiers. Si
       vous avez besoin des droits setuid pour ouvrir un fichier, ouvrez
       ce fichier, et abandonnez vos privilèges. Vous pourrez toujours
       accéder au descripteur ouvert, mais vous aurez moins à vous en
       inquiéter. C'est à double tranchants : même après avoir abandonné
       les privilèges, vous devriez continuer à observer ces
       descripteurs.

   <li>Evitez les programmes setuid root autant que vous pouvez. Root
       peut tout faire mais les droits root sont rarement nécessaires,
       sauf peut être pour créer des sockets avec un port inférieur à
       1024. Il est recommandé de faire cela via <code>inetd</code>,
       vous n'avez qu'a ajouter les entrées correspondantes dans
       <code>inetd.conf</code>. Vous devez connaitre la magie appropriée
       pour écrire des démons réussis. On peut dire que vous n'avez pas
       d'intérêt à écrire des programmes setuid si vous ne savez pas
       comment le faire.

   <li>Utilisez setgid plutôt que setuid. Ormis les fichiers spécifiques
       nécessaires aux programmes setgid, beaucoup de fichiers ne sont
       pas inscriptibles par le groupe. Par conséquent, un problème de
       sécurité dans un programme setgid ne compromettra pas davantage
       votre système : avec seulement les droits du groupe, le pire
       qu'un attaquant puisse faire est de hacker la table de scores
       d'un jeu ou quelquechose du genre. Consultez le port
       <code>xkobo</code> pour un exemple d'un tel changement.
                
   <li>Ne faites pas confiance aux fichiers inscriptibles par un groupe.
       Même s'ils sont audités, les programmes setgid ne sont pas perçus
       comme autre chose que des trous de sécurité. Même si les données
       qu'ils manipulent ne sont pas qualifiables de sensibles.

   <li>Ne faites pas confiance à votre environnement ! Cela implique un
       certain nombre de choses comme votre <code>"PATH"</code>
       (n'utilisez jamais <code>system</code> avec un nom sans chemin
       indiqué, évitez <code>execvp</code>), mais aussi des éléments
       plus subtiles comme votre locale, votre fuseau horaire, votre
       "termcap" et ainsi de suite. Rendez vous compte de la relativité
       : même si vous prenez des précautions importantes, les programmes
       que vous appelez directement ne le sont pas nécessairement.
       <strong>Ne jamais</strong> utiliser <code>system</code> dans des
       programmes privilégiés, construisez votre ligne de commande, un
       environnement contrôlé, et appelez <code>execve</code>
       directement. La page de manuel <code>perlsec</code> est un bon
       guide sur les problèmes de ce genre.

   <li>N'utilisez jamais de scripts shell setuid. Ils sont par essence
       non sécurisés. Enveloppez les dans du code C qui s'assure d'un
       environnement propre. De l'autre côté, OpenBSD comporte des
       scripts perl sécurisés.

   <li>Prenez garde au chargeur dynamique. Si vous lancez un setuid,
       seules les bibliothèques de confiance qui ont été scannées par
       ldconfig seront chargées. Setgid n'est pas suffisant.

   <li>Les bibliothèques dynamiques sont rusées. Le C++ pose un problème
       similaire. Typiquement, les bibliothèques pourraient procéder à un
       certain nombre d'actions basées sur votre environnement avant que
       votre programme principal n'ait eu le temps de vérifier l'état
       setuid. <code>issetugid</code> d'OpenBSD règle ce problème du
       point de vue de l'auteur de la bibliothèque. N'essayez pas de porter
       des bibliothèques si vous ne comprenez pas ces problèmes. </ul>
  <h3><font color="#0000e0"><a name="Generic">Conseils de Portage
      Génériques</a></font></h3> <ul>
   <li><code>__OpenBSD__</code> devrait être utilisé avec parcimonie.
       Les constructions qui ressemblent à 
       <pre>
            #if defined(__NetBSD__) || defined(__FreeBSD__)
       </pre>
       sont souvent inappropriées. N'y ajoutez pas aveuglément
       <code>__OpenBSD__ </code>. Essayez plutôt de comprendre ce qui se
       passe, et quelles sont les fonctionnalités actuellement
       nécessaires. Les pages de manuel sont souvent utiles, car elles
       contiennent des commentaires historiques, et traitent du moment
       ou une fonctionnalité particulière fut intégrée dans BSD. La
       vérification de la valeur numérique de <code>BSD</code> plutôt
       que les revisions connues est souvent le bon moyen. Consultez
       <a href="http://www.netbsd.org/Documentation/pkgsrc/">
       le guide pkgsrc de NetBSD</a> pour plus d'informations.
   <li>La définition de <code>BSD</code> est une mauvaise idée. Essayez
       d'inclure <code>sys/param.h</code>. Cela ne définit pas seulement
       <code>BSD</code>, mais lui donne aussi une valeur propre. Le bon
       fragment de code devrait ressembler à : <pre> #if
       (defined(__unix__) || defined(unix)) &amp;&amp; !defined(USG)
       #include &lt;sys/param.h&gt; #endif </pre>
   <li>Testez les fonctionnalités, mais pas pour un ou des OS
       spécifiques. Lors du long lancement, il est mieux de tester ou
       <code>tcgetattr</code> plutôt que de le faire seulement sous BSD
       4.3 ou plus récent, ou SystemVR4. Les tests de ce genre ne font
       que confondre le problème. Le moyen d'obtenir des résultats est,
       par exemple, de tester pour un système particulier, configurer un
       groupe de définitions <code>HAVE_TCGETATTR</code>, et passez au
       système suivant. Cette technique sépare les fonctionnalités de
       tests des spécificités des OS. Dans la précipitatation, un autre
       porteur peut juste ajouter le jeu de définitions <code>-
       DHAVE_XXX</code> complet au Makefile. L'un d'entre eux peut aussi
       écrire ou ajouter à un script "configure" la vérification de
       cette fonctionnalité et son ajout automatique. Pour un exemple
       qu'il ne faut pas suivre, consultez les sources de nethack 3.2.2
       : elles contiennent des chargements basés sur le type du système.
       La plupart de ces prétentions sont obsolètes et ne reflettent
       plus la réalité : les fonctions POSIX sont plus utiles que les
       plus anciennes différences entre BSD et SystemV, au point que
       certaines fonctions bsd traditionnelles sont à présent seulement
       supportées dans les bibliothèques de compatibilité.

   <li>Evitez d'inclure des fichiers qui incluent d'autres fichiers
       qui... Premièrement car c'est inefficace. Votre projet finira par
       inclure un fichier qui inclus tout. Egalement car cela rend
       certains problèmes difficiles à corriger. Il devient plus
       difficile de <em>ne pas</em> inclure un fichier à un point
       précis.

   <li>Evitez les astuces de macros bizarres. La suppression d'une macro
       qui était définie par un fichier d'entête est une mauvaise idée.
       Définir des macros devant avoir des comportements spéciaux depuis
       un fichier inclus est aussi une mauvaise idée : les modes de
       compilation devraient être généraux. Si vous désirez un
       comportement POSIX, dites non, et <code>#define
       POSIX_C_SOURCE</code> dans le code de tout le projet, et pas
       seulement quand vous en aurez besoin.

   <li>N'écrivez pas systématiquement les prototypes de fonctions. Tous
       les systèmes modernes, OpenBSD inclus, ont une place standard
       pour ces prototypes. Comme celles qui incluent
       <code>unistd.h</code>, <code>fcntl.h</code> ou
       <code>termios.h</code>. La page de manuel traite fréquemment du
       lieu ou le prototype peut être trouvé. Vous devriez avoir besoin
       d'un autre groupe de macros <code>HAVE_XXX</code> pour vous
       procurez le bon fichier. Ne soyez pas inquiet sur le fait
       d'inclure un même fichier deux fois, les fichiers "d'includes"
       ont des gardes qui préviennent de désagréments liés à ceci.<br>
       Si des systèmes tordus veulent que vous écriviez les prototypes,
       ne les imposez pas à tous les autres systèmes. Faites vos propres
       prototypes posera des problèmes car les types utilisés pourraient
       être équivalents sur votre système, mais pas portable sur les
       autres systèmes (<code>entier long non signé</code> plutôt que
       <code>size_t</code>), ou obtenir des états <code>const</code>
       incorrects. Aussi, des compilateurs, comme le gcc d'OpenBSD, sont
       capables de produire un meilleur travail avec des fonctions très
       fréquentes comme <code>strlen</code> si vous incluez le bon
       fichier d'entête.

   <li>Vérifiez méticuleusement le log de construction de tout warnings du
       compilateur.
       <ul><li>
           <code>déclaration implicite de la fonction foo()</code>
           indique que cette fonction a un prototype manquant.
           Cela signifie que la compilateur retournera le type comme étant
           un entier.
           La ou la fonction retourne actuellement un pointeur, sur une
           plateforme 64-bit il sera tronqué, causant habituellement une
           erreur de segmentation.
       </ul>

   <li>N'utilisez pas le nom d'une fonction système standard pour
       quelquechose d'autre. Si vous voulez écrire la votre, donnez lui
       un nom propre, et appelez cette fonction partout. Si vous désirez
       revenir à la fonction par défaut du système, vous n'aurez qu'a
       commenter votre code, et définir votre nom pour cette fonction.
       Ne le faites pas autrement. Le code devrait ressembler à ceci
       <pre> /* prototype part */ #ifdef USE_OWN_GCVT char
       *foo_gcvt(double number, size_t ndigit, char *buf); #else /*
       include correct file */ #include &lt;stdlib.h&gt; /* use system
       function */ #define foo_gcvt gcvt #endif

       /* definition part */
       #ifdef USE_OWN_GCVT
       char *foo_gcvt(double number, size_t ndigit, char *buf)
          {
          /* proper definition */
          }

       /* typical use */
       s = foo_gcvt(n, 15, b);
       </pre>
  </ul>
  <h3><font color="#0000e0"><a name="Other">D'autres Conseils
      Utiles</a></font></h3> <ul>
   <li>Les versions récentes de <code>bsd.port.mk</code> positionnent
       les chemins des installeurs. Spécifiquement, ils positionnent
       <code>/usr/bin</code> et <code>/bin</code> pour être parcourus
       <em>avant</em> <code>/usr/local/bin</code> et <code>/usr/X11R6/bin</code>.
   <li>Ne générez <em>PAS</em> de bibliothèques partagées si
       <code>${NO_SHARED_LIBS}</code> est positionné à oui (prenez
       garde, cela peut être définit seulement après l'inclusion de
       <code>bsd.port.mk</code>). Si votre port a un "configure" GNU,
       ajoutez simplement <code>CONFIGURE_ARGS +=
       ${CONFIGURE_SHARED}</code> au Makefile.
   <li>Comptez sur une fonctionnalité apparue dans une version récente
       de <code>bsd.port.mk</code> est OK, car les gens sont supposés
       mettre à jour leurs arbres de ports complets, incluant
       <code>bsd.port.mk</code>. NEED_VERSION est à présent obsolète.
   <li>Préférez l'utilisation de <code>update-plist</code> pour générer
       et mettre à jour les listes de paquetage plutôt que de faire les
       choses manuellement. Vous pouvez commenter les lignes inutiles.
       <code>update-plist</code> peut détecter la plupart des mtypes et
       copier la plupart des annotations additionnelles correctement.
   <li>Ajoutez <code>USE_SYSTRACE=Yes</code> dans 
           <code>/etc/mk.conf</code> afin de détecter les scripts qui se
           comportent bizarrement, les makefiles etc.
   <li>Dans OpenBSD <code>curses.h/libcurses/libtermlib</code> sont les
       ``nouvelles curses''. Changement :<br> <code>ncurses.h ==&gt;
       curses.h</code><br> ``anciennes curses (BSD)'' est disponible en
       définissant <code>_USE_OLD_CURSES_</code> avant l'inclusion de
       <code>curses.h</code> (généralement dans un Makefile) et édition
       de liens avec <code>-locurses</code>.
   <li>Dans OpenBSD, la discipline de terminal a été mise à jour depuis
       l'ancienne <code>sgtty</code> BSD vers la nouvelle famille POSIX
       <code>tcgetattr</code>. Evitez l'ancien style dans le nouveau
       code. Certains codes pourraient définir <code>tcgetattr</code>
       comme étant un synonyme de l'ancienne <code>sgtty</code>, mais
       ceci est au mieux un espace de stop sur OpenBSD. Le code source
       de <code>xterm</code> est un très bon exemple de ce qu'il ne faut
       pas faire. Essayez de rendre les fonctionnalités de votre système
       correctes : vous voulez un type qui se souvient de l'état de
       votre terminal (typedef possible), vous voulez une fonction qui
       extrait l'état courant, et une fonction qui applique le nouvel
       état. Les fonctions qui modifient cet état sont plus compliquées,
       car elles tendent à varier selon le système. Aussi, n'oubliez pas
       que vous pourriez être amené à des cas ou vous n'êtes pas
       connecté à un terminal, et ou vous devriez gérer les signaux, pas
       seulement ceux de terminaison, mais aussi d'arrière plan
       (<code>SIGTSTP</code>). Vous devriez toujours laisser un terminal
       avec un état correct. Faites vos tests sur un shell plus ancien,
       comme sh, qui ne réinitialise pas le terminal lors de la
       terminaison du programme.
   <li>Le nouveau termcap/terminfo et curses, inclus avec OpenBSD,
       comporte des séquences standard pour le contrôle des couleurs
       dans les terminaux. Vous devriez les utiliser si cela est
       possible, en se retournant sur les séquences de couleurs ANSI
       standards sur les autres systèmes. Cependant, certaines
       descriptions de terminaux n'ont pas encore été mises à jour, et
       vous pourriez avoir à les spécifier manuellement. C'est par
       exemple le cas de vim. Ce n'est pas strictement nécessaire.
       Excepté pour les programmes privilégiés, il est généralement
       possible de redéfinir une définition termcap via la variable
       <code>TERMCAP</code> et avoir un fonctionnement correct.
   <li>Les sémantiques des signaux sont rusées, et varient d'un système
       à l'autre. Utilisez <code>sigaction</code> pour être sur d'une
       sémantique, ainsi qu'avec les autres appels système référencés
       dans les pages de manuel correspondantes.
 </ul>
  <hr>
  <a href="index.html"><img height=24 width=24 src=../back.gif border=0 alt=OpenBSD></a> 
  <a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>
<!--
Originally [OpenBSD: porting.html,v 1.58 ]<br>
 $Translation: porting.html,v 1.23 2010/05/13 18:36:36 gapz Exp $<br>
-->
$OpenBSD: porting.html,v 1.11 2010/05/16 20:33:43 ajacoutot Exp $
</small>
 </body>
</html>
