<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict Level 2//EN//2.0">
<html>
<head>
<title>La cryptographie dans OpenBSD</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD cryptography">
<meta name="keywords" content="openbsd,cryptography,openssh,openssl,kerberos">
<meta name="keywords" content="ipsec,photuris,isakmp,ike,blowfish,des,rsa,dsa">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1997 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">
<img align=left alt="[OpenBSD]" height=166 width=197 SRC="../images/blowfish-notext.jpg">
<br>
<br>
<br>
"The mantra of any good security engineer is: "Security is a not a
product, but a process." It's more than designing strong cryptography
into a system; it's designing the entire system such that all security
measures, including cryptography, work together."<br>
<br>
-- Bruce Schneier, auteur de "Applied Cryptography".
<br clear=all>
<h2><font color=#e00000>Cryptographie</font><hr></h2>

<strong>Index</strong><br>
<a href=#why>Pourquoi est ce que nous fournissons de la cryptographie
?</a><br>  
<a href=#ssh>OpenSSH</a>.<br> 
<a href=#prng>Générateurs de nombres pseudo aléatoires</a> (PRNG) :
ARC4, ...<br> 
<a href=#hash>Fonctions de hachages cryptographiques</a> : MD5, SHA1,
...<br> 
<a href=#trans>Transformations cryptographiques</a> : DES, Blowfish,
...<br> 
<a href=#hardware>Support de matériels cryptographiques</a><br>
<a href=#people>Cherche cryptographes internationaux</a><br>
<a href=#papers>Lectures ultérieures</a><br>
<p>
<hr>

<a name=why></a>
<h3><font color=#e00000>Pourquoi est ce que nous fournissons de la
cryptographie ?</font></h3><p> 

En quelques mots :  <strong>parce que nous pouvons</strong>.<p>

Le projet OpenBSD est basé au Canada.<p>

La <a href="../ECL.html">liste de contrôle des exportations du
Canada</a> ne place aucune restriction significative sur l'exportation
de logiciels cryptographiques, et est même très explicite quant à la
libre exportation de logiciels cryptographiques disponibles
librement. Marc Plumb a fait <a
href="http://insight.mcmaster.ca/org/efc/pages/doc/crypto-export.html">quelques
recherches pour tester les lois sur la cryptographie</a>.
<p>

À partir de là, le projet OpenBSD a intégré de la cryptographie dans
de multiples portions du système d'exploitation. Il est indispensable que
les logiciels de cryptographie que nous utilisons soient <a
href="../policy.html">disponibles librement et avec des licences
correctes</a>. Nous n'utilisons pas de cryptographie avec des
brevets. Il est tout aussi indispensable que ces logiciels soient
originaires de pays avec des lois d'exportation sur la cryptographie
souples parce que nous ne désirons pas être en désaccord avec les lois de ces
pays. Les composants cryptographiques utilisés ont été écrits en
Allemagne, Argentine, Australie, Canada, Grèce, Norvège et Suède.
<p>

Quand nous créons des versions d'OpenBSD ou des snapshots, ceux-ci
sont compilés dans des pays libres pour être sûr que les sources et
les binaires que nous fournissons soient libres de toutes
restrictions. Autrefois, nos binaires étaient créés au Canada, en
Suède et en Allemagne.<p>

OpenBSD est fourni avec Kerberos IV. Le code utilisé est basé sur la
version KTH venant de Suède. Notre source X11 a été étendu pour faire
usage de Kerberos IV. Le support Kerberos V apparaîtra courant
2000.<p>

Aujourd'hui la cryptographie est un important moyen d'améliorer la <a
href="../security.html">sécurité</a> d'un système d'exploitation. La
cryptographie incluse dans OpenBSD peut-être classée en plusieurs
catégories, comme suit.<p>

<a name="ssh"></a>
<h3><font color=#e00000>OpenSSH</font></h3><p>

Quelle est la première chose qui est faite après l'installation
d'OpenBSD ?  L'installation de Secure Shell (<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh">ssh</a>)
depuis les ports ou à l'aide d'un package sur un site FTP. Jusque là,
c'était comme ça.<p>

Depuis la version 2.6, OpenBSD contient <a
href="http://www.openssh.com/">OpenSSH</a>, une version de ssh
totalement libre et non encombrée de brevets. <a
href="http://www.openssh.com/">OpenSSH</a> interopère avec ssh version
1, et possède de nombreuses caractéristiques en plus :
<ul>
<li>
tous les composants ayant une nature restrictive (comme les brevets,
voir <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl">ssl</a>) ont
été directement enlevés du code source. Tout composant licencié ou
breveté utilise des bibliothèques externes.
</li>
<li>
a été mis à jour pour supporter la version 1.5 du protocole.
</li>
<li>
contient l'ajout du support pour l'authentification <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=kerberos">kerberos</a>
</li>
<li>
support pour l'authentification unique (one-time password) avec <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=skey">skey</a>.
</li>
</ul>
<p>

En gros, nous avons pris une version de ssh avec une licence libre et
l'avons modifiée. Nous avons contourné le brevet déposé aux USA sur
RSA en fournissant une méthode pour télécharger et installer un
package RSA contenant les bibliothèques partagées libcrypto et
libssl. Ces packages sont basés sur OpenSSL. Les personnes résidant à
l'extérieur des USA peuvent utiliser librement le code breveté, tandis
que les personnes résidant aux USA ne peuvent que l'utiliser dans un
but non commercial. Il apparaît que les compagnies commerciales
peuvent utiliser les bibliothèques RSA aussi du moment que ce n'est
pas dans un but commercial.<p>

De cette façon, tout le monde peut posséder ssh directement intégré
dans le système d'exploitation.<p>

<strong>NOUVEAU!  OpenSSH supporte le protocole 2.0 !</strong><p>

Récemment, nous avons étendu OpenSSH de façon à pouvoir aussi utiliser
le protocole SSH 2. Le démon ssh comprend les trois protocoles SSH
utilisés (1.3, 1.5, 2.0), ce qui nous permet beaucoup de
flexibilité. Le protocole 2.0 n'utilise pas RSA comme algorithme de
cryptographie à clé publique, mais plutôt les algorithmes DH et
DSA. Dans OpenBSD 2.7 (qui sera fournit avec le nouveau OpenSSH) vous
obtiendrez le support du protocole 2.0 directement ! Si vous désirez
obtenir le support pour les protocoles 1.3 et 1.5, il vous suffira
juste d'installer le package RSA (comme décrit dans notre page du manuel <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl">ssl</a>) et de
relancer le démon.

<a name="prng"></a>
<h3><font color=#e00000>Générateurs de nombres pseudo aléatoires</font></h3><p>

Un générateur de nombres pseudo aléatoires (Pseudo Random Number
Generator: PRNG) fournit aux applications un flot de nombres qui
possèdent certaines propriétés importantes en ce qui concerne la
sécurité du système :

<ul>
<li>Il doit être impossible de prévoir le résultat du générateur de
nombres aléatoires même en connaissant le résultat précédent.  
<li>Les nombres générés ne doivent pas avoir de caractères qui se répètent ce
qui signifie que le générateur doit avoir un cycle très grand.
</ul>
<p>

Un PRNG est normalement un algorithme où les mêmes variables en entrée
donneront les mêmes résultats en sortie. Sur un système
multi-utilisateurs, il existe de nombreuses sources qui permettent de
fournir des données aléatoires au PRNG. Le noyau OpenBSD utilise le
temps entre les interruptions dues à la souris, le temps entre les
interruptions dues aux données réseau, le temps entre chaque appui de
touches et les informations sur les entrées/sorties des disques pour
remplir la réserve d'entropie. Les nombres aléatoires sont accessibles
aux routines du noyau et sont exportées aux programmes utilisateurs
par l'intermédiaire de périphériques. Les nombres aléatoires sont
utilisés dans les endroits suivants :<p> 

<ul>
<li>Allocation de sin_port dynamiques dans bind(2).
<li>PID des processus.
<li>ID des paquets IP.
<li>Identifiants (ID) des transactions RPC (XID).
<li>Identifiants (ID) des transactions NFS RPC (XID).
<li>Identifiants (ID) des requêtes DNS.
<li>Génération des nombres d'inode, voir getfh(2) et fsirand(8).
<li>Perturbation temporelle dans traceroute(8).
<li>Nom temporaire plus aléatoire pour mktemp(3) et mkstemp(3)
<li>Données aléatoires ajoutées au numéro de séquence TCP pour se
protéger des attaques spoofées. 
<li>Bourrage aléatoire dans les paquets IPSEC esp_old.
<li>Pour générer des graines pour les différents algorithmes de mots de passe.
<li>Pour générer de faux challenges S/Key.
<li>Dans <a href="http://www.physnet.uni-hamburg.de/provos/photuris/">photurisd</a> 
        et <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd">isakmpd</a>
	pour assurer la bonne tenue des échanges de clés.
</ul>

<p>
<a name="hash"></a>
<h3><font color=#e00000>Fonctions de hachages cryptographiques</font></h3><p>

Une fonction de hachage compresse les données fournies en une chaîne
de taille constante. Pour une fonction de hachage cryptographique, il
est impossible de trouver :

<ul>
<li>Deux entrées qui ont le même résultat (résistant à la collision),
<li>Une entrée différente pour une entrée donnée avec le même résultat.
</ul>
<p>

Dans OpenBSD MD5, SHA1, et RIPEMD-160 sont utilisés en tant que
fonctions de hachage cryptographiques :<p> 
<ul> 
<li>Dans <a
href=http://www.openbsd.org/cgi-bin/man.cgi?query=skey>S/Key</a> pour
fournir des mots de passe utilisable une seule fois. 
<li>Dans <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec>IPsec</a>,
    <a href=http://www.physnet.uni-hamburg.de/provos/photuris/>photurisd</a>
    et
    <a
    href=http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd>isakmpd(8)</a> pour authentifier l'origine des données et assurer l'intégrité du paquet. 
<li>Pour les mots de passe MD5 à la FreeBSD (non activé par défaut), voir
    <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=passwd.conf&sektion=5>
    passwd.conf(5)</a>
<li>Pour le support des cookies TCP SYN (non activé par défaut), voir
    <a href=http://www.openbsd.org/cgi-bin/man.cgi?query=options&sektion=4>
    options(4)</a>
<li>Dans libssl pour la signature numérique des messages.
</ul>
<p>

<p>
<a name="trans"></a>
<h3><font color=#e00000>Transformations cryptographiques</font></h3><p>

Les transformations cryptographiques sont utilisées pour chiffrer et
déchiffrer les données. Elles sont normalement utilisées avec une clé
de chiffrement pour le chiffrement des données et une clé de
déchiffrement pour le déchiffrement des données. La sécurité d'une
transformation cryptographique ne doit reposer que sur la clé.<p>

OpenBSD fournit des transformations telles que DES, 3DES, Blowfish et
Cast pour le noyau et les programmes utilisateurs, qui sont utilisées
dans de nombreux endroits tels que :<p>
<ul>
<li>Dans la libc pour créer des mots de passe <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=blf_key">Blowfish</a>.
Voir aussi <a href="../papers/bcrypt-paper.ps">le document USENIX</a>
à ce sujet. 
<li>Dans <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec">IPsec</a>
pour fournir la confidentialité au niveau de la couche réseau. 
<li>Dans Kerberos et les applications "kerberifiées" telles que
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=telnet">telnet</a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs">cvs</a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rsh">rsh</a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcp">rcp</a>,
    et
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rlogin">rlogin</a>.
<li>Dans <a
href=http://www.physnet.uni-hamburg.de/provos/photuris/>photurisd</a>
et <a
href=http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd>isakmpd</a>
pour protéger les échanges où des clés IPsec sont négociées. 
<li>Dans AFS pour protéger les messages transitant sur le réseau,
fournissant la confidentialité pour l'accès au système de fichiers
distant. 
<li>Dans libssl pour permettre aux applications de communiquer à
l'aide du protocole cryptographique SSL (qui est un standard de fait).  
</ul>

<p>
<a name="hardware"></a>
<h3><font color=#e00000>Support de matériels cryptographiques</font></h3><p>

OpenBSD 2.7 supporte quelques matériels cryptographiques.
<ul>
<li><b>IPSEC crypto dequeue</b><br> 
Notre pile IPSEC a été modifiée de
façon à ce que les fonctions cryptographiques soient effectuées hors
ligne. La plupart des piles IPSEC relativement simples ont besoin
d'utiliser la cryptographie à chaque paquet qu'elles traitent. Il en
résulte une performance synchrone. Utiliser du matériel correctement
et rapidement nécessite de séparer ces deux composants, comme nous
l'avons fait. Actuellement, cette méthode permet de gagner en
performance même sans utiliser de matériel.
<p>
<li><b>HiFn 7751</b><br>
Les cartes utilisant le processeur <a
href="http://www.hifn.com/products/7751.html">HiFn 7751</a> peuvent
être utilisées en tant qu'accélérateur cryptographique (voir sur le
site de <a
href="http://www.powercrypt.com">PowerCrypt</a>). Les performances
actuelles en utilisant une carte comportant un seul processeur Hifn
7751 à chaque bout d'un tunnel sont de 63Mbit/sec pour 3DES/SHA1 ESP,
presque 600% d'amélioration par rapport à l'utilisation d'un
processeur de type P3/550. De plus amples améliorations sont en cours
pour résoudre quelques problèmes, mais depuis le 13 Avril 2000, le code est
considéré comme stable. Nous avons écrit notre propre pilote pour
supporter le processeur plutôt que d'utiliser le pilote (écrit aux
USA) de <a href="http://www.powercrypt.com">Powercrypt</a>, et pour
permettre à notre périphérique de s'intégrer correctement avec notre
pile IPSEC.<p> 
Le 7751 est maintenant considéré comme lent vis à vis de standards de
l'industrie et de nombreux fournisseurs ont des processeurs plus
rapide (même HiFn a maintenant un processeur plus rapide mais plus
cher). Nous allons supporter d'autres processeurs tels que : 
<li><b>Broadcom Bluesteelnet 5501/5601/5805</b><br>
Juste après la version 2.7 d'OpenBSD, nous avons ajouté le support
pour les premières parties fournies par le constructeur, en
commençant notamment par le <a
href="http://www.bluesteelnet.com/product.html">5501</a>.
Les autres parties sont similaires, excepté qu'il y a en plus un
système asymétrique pour les algorithmes DSA, RSA et autres. Les
performances approximatives sont au moins deux fois plus rapides que
pour le HiFn. Nous n'avons pas complètement optimisé notre pilote,
donc de meilleures performances sont à venir. 
<p>
<li><p>Autres cartes</b><br>
Nous allons bientôt supporter d'autres processeurs tels que :
    <ul>
    <li><a href="http://www.ire.com/OEM/OEMTechnologyDefault.htm">IRE 2141</a>
    <li><a href="http://www.pcc.pijnenburg.nl/pcc-ises.htm">Pijnenburg
    PCC-ISES</a> 
    <li>peut-être le
    <a
    href="http://www.3com.com/promotions/3c990promo/index.html">3com
    3c990</a> 
    <li>et d'autres.
    </ul>
    <p>
    Parmi ceux-ci, IRE en particulier a été très sympathique
    et nous a fournit toutes les informations nécessaires pour
    supporter son matériel. D'autres fournisseurs sont dans notre
    liste, mais nous nous concentrons avant tout sur les solutions
    rapides et peu onéreuses. 
    Intel (et 3Com à un degré moindre) n'ont toujours pas compris comment
    ils pourraient bénéficier du fait de nous fournir la documentation
    de leurs cartes cryptographiques, donc vous pouvez les contacter
    et les inciter à le faire.  
    <p> Si des gens sont intéressés par l'écriture des pilotes, <a
    href=#people>venez nous aider</a>.  
<p>
<li><b>Intel 82802AB/82802AC Firmware Hub RNG</b><br>
Le processeurs 82802 FWH (qui se trouve sur les carte mères i810,
i820, et i840) contient un générateur de nombres aléatoires
(RNG). L'IPSEC de haute performance nécessite beaucoup
d'entropie. Depuis le 10 Avril 2000, nous supportons ce RNG. Nous
ajouterons le support aux autres RNG trouvés dans les processeurs de
cryptographie.  
<p>
<li><b>OpenSSL</b><br>
Nous avons de grands projets pour les cartes supportant RSA ou DSA, de
façon à exporter les fonctions des cartes de crypto vers OpenSSL pour
que les programmes utilisateurs (comme <a
href="http://www.openssh.com">ssh</a>, <a
href="http://www.modssl.org/">apache https</a>, etc...) puissent en
bénéficier. 
</ul>

<p>
<a name=people></a>
<h3><font color=#e00000>Cherche cryptographes internationaux</font></h3><p>

Évidemment, notre projet a besoin de personnes pour travailler sur ces
systèmes. Si un cryptographe non Américain qui remplit les conditions
énoncées précédemment est intéressé pour nous aider sur la
cryptographie embarquée dans OpenBSD, qu'il n'hésite pas à nous
contacter.<p> 

<p>
<a name=papers></a>
<h3><font color=#e00000>Lectures ultérieures</font></h3><p>

Un certain nombre de papiers ont été écrits par des membres du projet
OpenBSD, au sujet des changements cryptographiques qui ont été faits
dans OpenBSD. Les versions PostScript des documents sont disponibles
ci-dessous.<p> 

<ul>
<li>A Future-Adaptable Password Scheme.<br>
    <a href=../events.html#usenix99>Usenix 1999</a>,
    par <a href=mailto:provos@openbsd.org>Niels Provos<a/>,
    <a href=mailto:dm@openbsd.org>David Mazieres</a>.<br>
    <a href=../papers/bcrypt-paper.ps>paper</a> et
    <a href=../papers/bcrypt-slides.ps>slides</a>.
<p>
<li>Cryptography in OpenBSD: An Overview.<br>
    <a href=../events.html#usenix99>Usenix 1999</a>,
    par <a href=mailto:deraadt@openbsd.org>Theo de Raadt</a>,
    <a href=mailto:niklas@openbsd.org>Niklas Hallqvist</a>,
    <a href=mailto:art@openbsd.org>Artur Grabowski</a>,
    <a href=mailto:angelos@openbsd.org>Angelos D. Keromytis</a>,
    <a href=mailto:provos@openbsd.org>Niels Provos</a>.<br>
    <a href=../papers/crypt-paper.ps>paper</a> et
    <a href=../papers/crypt-slides.ps>slides</a>.
</ul>

<p>
<hr>
<a href="index.html"><img height=24 width=24 src="../back.gif" border=0 alt=OpenBSD></a>
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br>
<small>Originally [OpenBSD: crypto.html,v 1.57 2000/06/13 05:34:12 deraadt Exp ]<br>
$Translation: crypto.html,v 1.11 2000/06/13 19:55:56 jjbg Exp $
$OpenBSD: crypto.html,v 1.2 2000/06/14 22:28:17 wvdputte Exp $
</small>

</body>
</html>
