<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD/mvme68k</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD/mvme68k page">
<meta name="keywords" content="openbsd,mvme68k">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">
<img alt="[OpenBSD]" height=30 width=141 SRC="../images/smalltitle.gif">
<p>
<h2><font color=#e00000>OpenBSD/mvme68k</font></h2>

<hr>
<h3><strong>État et histoire :</strong></h3>

<p>
Ce port a été initialement réalisé par Theo de Raadt en 1995 sous
contrat avec Willowglen Singapour. Un port plus ancien du MVME147 par
Chuck Granor basé sur le vieux code DA30 de Paul Mackerras (et
utilisant du matériel donné par Jonathan Levine à la requête de Theo)
a fourni une solide plate-forme de développement. Bizarrement, Dale
Rahn de Motorola avait aussi écrit un port pour le MVME147
indépendamment. Pour ce qui est du noyau, les deux ports ont été
analysés mais plus de code avait été écrit par Theo, ou alors du code
basé sur le code hp300. Dale a beaucoup aidé durant le port sur les
modèles 68040 et a écrit la plupart du code spécifique au modèle
MVME167. Steve Murphee a continué et à fait le travail sur le MVME177,
ainsi qu'ajouter le support pour quelques périphériques VME.

<p>
Les personnes travaillant actuellement sur le port OpenBSD/mvme68k
sont Steve Murphee, Theo de Raadt et Dale Rahn. Bien sur, tous les
autres sont les bienvenus.

<p>
Le même noyau tourne actuellement sur les matériels suivants :

<ul>
<li><strong>MVME147 : </strong>68030<br>
Stable.
<ul>
<li>Tout est supporté sauf le port parallèle.
<li>J'ai un pilote pour le port parallèle, mais il n'est pas encore intégré.
</ul>
<p>

<li><strong>MVME162 : </strong>68040<br>
Stable.
<ul>
<li>Tout ce qui est important fonctionne... avec les remarques
suivantes :
<li>Le SCSI fonctionne (4,5Mo/S avec un disque Quantum Grand Prix de 4,2Go).<br>
<li>Le support du bus VME n'est pas testé.
<li>Parité et ecc non supportés.
<li>Le pilote flash ne fonctionne pas
<li>Le pilote du module IP n'est pas testé.
</ul>
<p>

<li><strong>MVME165 : </strong>68040<br>
Le peu que nous en savons nous fait penser que c'est faisable.
<p>

<li><strong>MVME166 : </strong>68040<br>
Cela devrait déjà marcher. Quelqu'un pour le tester ?
<p>

<li><strong>MVME167C : </strong>68040<br>
Stable.
<ul>
<li>Fonctionne comme le port MVME162 ci-dessus, avec les remarques
supplémentaires :
<li>Port parallèle non supporté.
</ul>
<p>

<li><strong>MVME177-001 : </strong>68060<br>
Stable.
<ul>
<li>Fonctionne aussi bien que le pour MVME167.
</ul>
<p>
</ul>

Les périphériques VME supplémentaires qui sont supportés :<p>
<ul>
<li><strong>MVME376</strong> : Ethernet VME Lance 
<li><strong>MVME328</strong> : contrôleur SCSI
</ul> 
<p>


Pour toutes ces architectures, le démarrage sans disque en utilisant
nfs ou des paramètres de boot de type sun ou un démarrage depuis un
disque est supporté.

<p>
Remarque : ce port possède le support COMPAT_SUNOS, donc il peut faire
tourner de binaires SunOS sun3. De plus, je pense que le MVME177 est
sans doute la machine la plus rapide capable de faire tourner des
binaires SunOS sun3....

<hr>
<p>
<a href=ftp.html>Des snapshots sont disponibles de temps en temps.</a>

<hr>
<h3><strong>À quoi cela ressemble-t-il ? Voici un MVME162. Ensuite, le
journal de démarrage d'un MVME177.</strong></h3>

<img src=../images/mvme162.gif><p>

<pre>
Copyright Motorola Inc. 1988 - ...., All Rights Reserved

MVME177 Debugger/Diagnostics Release Version ...
COLD Start

Local Memory Found =02000000 (&33554432)

MPU Clock Speed =50Mhz

162-Bug&gt;bo
Booting from: VME177, Controller 0, Drive 0
Loading: Operating System

Volume: NBSD

IPL loaded at: $003F0000
&gt;&gt; OpenBSD BOOT [$Revision: 1.3 $]
using ctrl 0 dev 0
Booting /OpenBSD @ 0x10000
8c000+8000+caf8 [8f40+9162]  start 0x10020
[ preserving 73898 bytes of OpenBSD symbol table ]
Copyright (c) 1982, 1986, 1989, 1991, 1993
        The Regents of the University of California.  All rights reserved.

OpenBSD 2.6-current (GENERIC) #10: Mon Jan 24 14:04:57 PST 2000
    deraadt@m167.openbsd.org:/sys/arch/mvme68k/compile/GENERIC
Motorola 177-001: 50MHz MC68060 CPU+MMU+FPU, 8k on-chip physical I/D caches, unknown FPU
real mem = 33554432
avail mem = 27975680
using 409 buffers containing 1675264 bytes of memory
mainbus0 (root)
pcctwo0 at mainbus0 addr 0xfff00000: rev 0
clock0 at pcctwo0 ipl 5
cl0 at pcctwo0 offset 0x45000 ipl 3 console
vme0 at pcctwo0 offset 0x40000: system controller
vme0: using BUG parameters
vme0: 1phys 0x02000000-0xefff0000 to VME 0x02000000-0xefff0000
vme0: 2phys 0x00000000-0x00000000 to VME 0x00000000-0x00000000
vme0: 3phys 0x00400000-0x00ff0000 to VME 0x00400000-0x00ff0000
vme0: 4phys 0x00000000-0x00000000 to VME 0x00000000-0x00000000
vme0: vme to cpu irq level 1:1
vmes0 at vme0
vmel0 at vme0
ie0 at pcctwo0 offset 0x46000 ipl 1: address 08:00:3e:23:5c:a2
siop0 at pcctwo0 offset 0x47000 ipl 2: version 2 target 7
scsibus0 at siop0: 8 targets
siop0: target 0 now synchronous, period=100ns, offset=8
sd0 at scsibus0 targ 0 lun 0: &lt;QUANTUM, FIREBALL1080S, 1Q04&gt; SCSI2 0/direct fixed
sd0: 1042MB, 3835 cyl, 4 head, 139 sec, 512 bytes/sec, 2134305 sec total
memc0 at pcctwo0 offset 0x43000: MCECC rev 0
nvram0 at pcctwo0 offset 0xc0000: MK48T08 len 8192
flash0 at mainbus0 addr 0xffa00000: unknown manu 0x00 ident 00
sram0 at mainbus0 addr 0xffe00000: len 131072
boot device: sd0
root on sd0a
ie0: supplying EUI64: 08:00:3e:ff:fe:23:5c:a2
rootdev=0x400 rrootdev=0x800 rawdev=0x802
Automatic boot in progress: starting file system checks.
/dev/rsd0a: file system is clean; not checking
/dev/rsd0g: file system is clean; not checking
/dev/rsd0e: file system is clean; not checking
setting tty flags
starting network
add host m177: gateway localhost
starting rpc daemons: portmap ypbind nfsiod amd.
starting system logger, time daemon.
checking for core dump...
savecore: no core dump
checking quotas: done.
building databases...
clearing /tmp
standard daemons: update cron.
starting network daemons: routed printer inetd.
starting local daemons:.
runtime link editor directory cache
Thu Jan 14 03:58:38 MDT 2000
Sep 14 03:58:38 m177 init: kernel security level changed from 0 to 1

OpenBSD/mvme68k (m177) (ttya)

login: 
</pre>

<hr>
<a href=plat.html><img height=24 width=24 src=../back.gif border=0 alt=OpenBSD></a> 
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br>
<small>Originally [OpenBSD: mvme68k.html,v 1.37 2000/11/22 17:31:19 jufi Exp ]<br>
$Translation: mvme68k.html,v 1.3 2000/12/03 18:51:03 jjbg Exp $<br>
$OpenBSD: mvme68k.html,v 1.3 2000/12/05 21:24:33 jufi Exp $</small>

</body>
</html>
