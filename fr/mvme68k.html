<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD/mvme68k</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD/mvme68k page">
<meta name="keywords" content="openbsd,mvme68k">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2002 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">
<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color=#e00000>OpenBSD/mvme68k</font></h2>

<hr>
<h3><strong>État et histoire :</strong></h3>

<p>
Ce port a été initialement réalisé par Theo de Raadt en 1995 sous
contrat avec Willowglen Singapour. Un port plus ancien du MVME147 par
Chuck Granor basé sur le vieux code DA30 de Paul Mackerras (et
utilisant du matériel donné par Jonathan Levine à la demande de Theo)
a fourni une solide plate-forme de développement. Bizarrement, Dale
Rahn de Motorola avait aussi écrit un port pour le MVME147
indépendamment. Pour ce qui est du noyau, les deux ports ont été
analysés mais plus de code avait été écrit par Theo, ou
basé sur le code hp300. Dale a beaucoup aidé durant le port sur les
modèles 68040 et a écrit la plupart du code spécifique au modèle
MVME167. Steve Murphee a continué et à fait fonctionner le MVME177,
et ajouté le support pour quelques périphériques VME.

<p>
Les personnes travaillant actuellement sur le port OpenBSD/mvme68k
sont Steve Murphee, Theo de Raadt et Dale Rahn. Bien sur, tous les
autres sont les bienvenus.

<p>
Le même noyau tourne actuellement sur les matériels suivants :

<ul>
<li><strong>MVME147 : </strong>68030<br>
Stable.
<ul>
<li>Tout est supporté sauf le port parallèle.
<li>J'ai un pilote pour le port parallèle, mais il n'est pas encore intégré.
</ul>
<p>

<li><strong>MVME162 : </strong>68040<br>
Stable.
<ul>
<li>Tout ce qui est important fonctionne... avec les remarques
suivantes :
<li>Le SCSI fonctionne (4,5Mo/S avec un disque Quantum Grand Prix de 4,2Go).<br>
<li>Le support du bus VME n'est pas testé.
<li>Parité et ecc non supportés.
<li>Le pilote flash ne fonctionne pas.
<li>Le pilote du module IP n'est pas testé.
</ul>
<p>

<li><strong>MVME165 : </strong>68040<br>
Le peu que nous en savons nous fait penser que c'est faisable.
<p>

<li><strong>MVME166 : </strong>68040<br>
Cela devrait déjà marcher. Quelqu'un pour le tester ?
<p>

<li><strong>MVME167C : </strong>68040<br>
Stable.
<ul>
<li>Fonctionne comme le port MVME162 ci-dessus, avec les remarques
supplémentaires :
<li>Port parallèle non supporté.
</ul>
<p>

<li><strong>MVME177-001 : </strong>68060<br>
Stable.
<ul>
<li>Fonctionne aussi bien que le pour MVME167.
</ul>
<p>
</ul>

Les périphériques VME supplémentaires qui sont supportés :<p>
<ul>
<li><strong>MVME376</strong> : Ethernet VME Lance 
<li><strong>MVME328</strong> : contrôleur SCSI
</ul> 
<p>


Pour toutes ces architectures, le démarrage sans disque en utilisant
des paramètres de boot à la sun et nfs, et le démarrage normal depuis un
disque sont supporté.

<p>
Remarque : ce port possède le support COMPAT_SUNOS, donc il peut faire
tourner des binaires SunOS sun3. De plus, je pense que le MVME177 est
sans doute la machine la plus rapide capable de faire tourner des
binaires SunOS sun3....

<hr>
<p>
<a href=ftp.html>Des snapshots sont disponibles de temps en temps.</a>

<hr>
<h3><strong>À quoi cela ressemble-t-il ? Voici un MVME162. Ensuite, le
journal de démarrage d'un MVME177.</strong></h3>

<img src=../images/mvme162.gif><p>

<pre>
Copyright Motorola Inc. 1988 - ...., All Rights Reserved

MVME177 Debugger/Diagnostics Release Version ...
COLD Start

Local Memory Found =02000000 (&33554432)

MPU Clock Speed =50Mhz

177-Bug&gt;bo
Booting from: VME177, Controller 0, Drive 0
Loading: Operating System

Volume: NBSD

IPL loaded at: $003F0000
&gt;&gt; OpenBSD BOOT [$<!-- -->Revision: 1.8 $]
using ctrl 0 dev 0
Booting /OpenBSD @ 0x10000
8c000+8000+caf8 [8f40+9162]  start 0x10020
[ preserving 73898 bytes of OpenBSD symbol table ]
Copyright (c) 1982, 1986, 1989, 1991, 1993
        The Regents of the University of California.  All rights reserved.

OpenBSD 3.1-current (GENERIC) #17: Thu Apr 18 14:02:28 PDT 2002
    deraadt@mvme68k.openbsd.org:/sys/arch/mvme68k/compile/GENERIC
Motorola 177-001: 50MHz MC68060 CPU+MMU+FPU, 8k on-chip physical I/D caches
real mem = 33554432
avail mem = 27975680 (6721 pages)
using 409 buffers containing 1675264 bytes of memory
mainbus0 (root)
pcctwo0 at mainbus0 addr 0xfff00000: rev 0
clock0 at pcctwo0 ipl 5
cl0 at pcctwo0 offset 0x45000 ipl 3: console
vme0 at pcctwo0 offset 0x40000: system controller
vme0: using BUG parameters
vme0: 1phys 0x02000000-0xefff0000 to VME 0x02000000-0xefff0000
vme0: 2phys 0x00000000-0x00000000 to VME 0x00000000-0x00000000
vme0: 3phys 0x00400000-0x00ff0000 to VME 0x00400000-0x00ff0000
vme0: 4phys 0x00000000-0x00000000 to VME 0x00000000-0x00000000
vme0: vme to cpu irq level 1:1
vmes0 at vme0
vmel0 at vme0
ie0 at pcctwo0 offset 0x46000 ipl 1: address 08:00:3e:23:5c:a2
siop0 at pcctwo0 offset 0x47000 ipl 2: version 2 target 7
scsibus0 at siop0: 8 targets
siop0: target 0 now synchronous, period=100ns, offset=8
sd0 at scsibus0 targ 0 lun 0: &lt;QUANTUM, FIREBALL1080S, 1Q04&gt; SCSI2 0/direct fixed
sd0: 1042MB, 3835 cyl, 4 head, 139 sec, 512 bytes/sec, 2134305 sec total
memc0 at pcctwo0 offset 0x43000: MCECC rev 0
nvram0 at pcctwo0 offset 0xc0000: MK48T08 len 8192
sram0 at mainbus0 addr 0xffe00000: len 131072
boot device: sd0
root on sd0a
rootdev=0x400 rrootdev=0x800 rawdev=0x802
Automatic boot in progress: starting file system checks.
/dev/rsd0a: file system is clean; not checking
/dev/rsd0g: file system is clean; not checking
/dev/rsd0e: file system is clean; not checking
setting tty flags
starting network
add host m177: gateway localhost
starting system logger
starting rpc daemons: portmap ypbind  amd.
savecore: no core dump
checking quotas: done.
building ps databases: kvm dev.
clearing /tmp
starting pre-securelevel daemons:.
setting kernel security level: kern.securelevel: 0 -> 1
preserving editor files
creating runtime link editor directory cache.
starting network daemons: sendmail inetd sshd.
starting local daemons:.
standard daemons: cron.
Thu Apr 18 14:50:53 PDT 2002

OpenBSD/mvme68k (m177) (ttya)

login: 
</pre>
<hr>
<a href=plat.html><img height=24 width=24 src=../back.gif border=0 alt=OpenBSD></a> 
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: mvme68k.html,v 1.41 ]<br>
$Translation: mvme68k.html,v 1.7 2002/11/06 22:25:41 saad Exp $<br>
$OpenBSD: mvme68k.html,v 1.7 2002/11/07 09:50:18 jufi Exp $
</small>

</body>
</html>
