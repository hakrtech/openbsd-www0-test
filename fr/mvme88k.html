<!DOCTYPE HTML PUBLIC  "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>OpenBSD/mvme88k</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD/mvme88k page">
<meta name="keywords" content="openbsd,mvme88k">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2003 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">
<a href="index.html"><img alt="[OpenBSD]" height="30" width="141"
src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">OpenBSD/mvme88k</font></h2>

<hr>

<p>
OpenBSD/mvme88k est un effort pour porter OpenBSD sur la famille de
cartes VME &agrave; base de Motorola 881x0. 
</p>

<p>
Le mainteneur actuel de ce port est Miodrag Vallat
(<a href="mailto:miod@openbsd.org">miod@openbsd.org</a>), avec l'aide de
Steve Murphree. Si d'autres personnes souhaitent contribuer, elles sont
bien entendu les bienvenues !
</p>

<a href="#toc"></a>
<h3><font color="#0000e0"><i>Table des mati&egrave;res</i></font></h3>
<p>
<ul>
  <li><a href="#history">Historique du port</a> 
  <li><a href="#status">Etat actuel</a> 
  <li><a href="#projects">Projets</a>
  <li><a href="#hardware">Mat&eacute;riel support&eacute;</a>
  <li><a href="#install">Obtenir et installer OpenBSD/mvme88k</a> 
  <li><a href="#details">D&eacute;tails mat&eacute;riels</a>
</ul>
</p>

<hr>
<a name="history"></a>
<h3><font color="#0000e0"><strong>Historique :</strong></font></h3>

<p> 
Le processeur Motorola 88k est, dit-on, le meilleur processeur RISC
jamais con&ccedil;u. L'alliance de sa simplicit&eacute; et de son
&eacute;l&eacute;gance font du mvme88k une plate-forme robuste et
agr&eacute;able.
</p>

<p> 
Nivas Madhur d&eacute;buta le port initial mvme88k pour la carte
MVME187, mais il a depuis chang&eacute; d'employeur. Le port f&ucirc;t
int&eacute;gr&eacute; &agrave; l'arborescence OpenBSD par Dale Rahn mais
il n'avait pas assez de temps pour travailler dessus. Steve Murphree,
Jr. acheva finalement le portage en Novembre 1998.
</p>

<p>
Malheureusement, une mise &agrave; jour du compilateur &agrave;
l'&eacute;poque de gcc 2.8.1 vers egcs a r&eacute;v&eacute;l&eacute;
plusieurs probl&egrave;mes dans le support mvme88k de gcc. Ces
probl&egrave;mes ne pouvaient pas &ecirc;tre corrig&eacute;s &agrave;
temps pour la sortie d'OpenBSD 2.5.
</p>

<p>
L'absence de "toolchain" dans l'arborescence n'a pas
emp&ecirc;ch&eacute; les travaux sur ce port, et beaucoup de
modifications ont &eacute;t&eacute; effectu&eacute;es &agrave; la base
de code, telles qu' un syst&egrave;me d'autoconfiguration
am&eacute;lior&eacute;, un pilote pour le SCSI int&eacute;gr&eacute;, un
support du bus VME grandement am&eacute;lior&eacute;, une
proc&eacute;dure d'installation fonctionnant et cr&eacute;ant
correctement un bloc VID Motorola sur les disques et le support du
MVME188 ainsi qu'un meilleur support du MVME197.
</p>

<p>
Durant l'&eacute;t&eacute; 2003, un effort pour corriger le "toolchain"
a fini par produire un compilateur gcc 2.95 fonctionnel, et a permis au
port d'&ecirc;tre &agrave; nouveau ind&eacute;pendant.
</p>

<hr>
<a name="status"></a>
<h3><font color="#0000e0"><strong>Etat actuel :</strong></font></h3>

<p> 
A l'heure actuelle, seules les cartes MVME187 et MVME188, ainsi que les
cartes de conception similaire d&eacute;marrent en mode
multi-utilisateurs, supportant la plupart des
p&eacute;riph&eacute;riques int&eacute;gr&eacute;s. Il reste encore
quelques probl&egrave;mes; ces derniers diff&eacute;rent selon votre
mat&eacute;riel.
</p>

<hr>
<a name="projects"></a>
<h3><font color="#0000e0"><strong>Projets (sans ordre particulier):
</strong></font></h3>

<p>
<ul>
  <li>Corriger les bogues restants de g&eacute;n&eacute;ration de code
      mvme88k dans gcc lorsque l'optimisation -02 est utilis&eacute;e
  <li>Supporter les configurations restantes de la MVME188.
  <li>Am&eacute;liorer le support de la MVME376, qui n'est encore
      stable.
  <li>Support de la MVME197.
  <li>Travailler sur les cartes p&eacute;riph&eacute;riques non
      support&eacute;es (MVME327, MVME374...)
  <li>Ecrire du code pour le nouveau binutils (et gdb) et passer
      &agrave; ELF et, plus tard, aux biblioth&egrave;ques
      partag&eacute;es
</ul>
</p>

<hr>
<a name="hardware"></a>
<h3><font color="#0000e0"><strong>Mat&eacute;riel support&eacute;
    :</strong></font></h3>

<p>
<h4>Cartes processeur support&eacute;es</h4>
</p>

<p>
<ul>
<li><strong>MVME187</strong><br>
Une version uni-processeur 88100 des cartes 
<a href="mvme68k.html">mvme68k</a> MVME167 et MVME177. Contient deux
CMMUs 88200 avec un cache de 16KB chacun, SRAM, et des contr&ocirc;leurs
int&eacute;gr&eacute;s ethernet et SCSI ainsi que quatre ports
s&eacute;rie et un port parall&egrave;le.<br>
Except&eacute; le port parall&egrave;le, tous les
p&eacute;riph&eacute;riques int&eacute;gr&eacute;s sont
support&eacute;s.
<li><strong>MVME188 et MVME188A</strong><br>
Contrairement aux autres cartes processeur MVME, cette carte n'a aucun
p&eacute;riph&eacute;rique int&eacute;gr&eacute;; elle sert seulement de
r&eacute;cipient &agrave; un a <i>HYPERmodule</i> qui fournit un, deux,
ou quatre processeurs 88110, et deux ou quatre CMMUs 88200 (cache de
16KB) ou 88204 (cache de 64KB) par processeur.<br>
A l'heure actuelle, seuls sont support&eacute;s les HYPERmodules
suivants :
2P64, 2P256, 4P128, 4P512.<br>
Des cartes externes sp&eacute;cifiques &agrave; la famille MVME188 fournissent
la m&eacute;moire et les ports s&eacute;rie.
<li><strong>Motorola M8120</strong><br>
Ce syst&egrave;me est bas&eacute; sur une MVME187 sans VMEBus. Il est
aussi bien support&eacute; que la MVME187.
</ul>
</p>

<p>
<h4>P&eacute;riph&eacute;riques int&eacute;gr&eacute;s
    support&eacute;s</h4> 
</p>

<p>
<ul>
<li><strong>Ports s&eacute;rie</strong> 
    <ul>
    <li>Ports s&eacute;rie Cirrus Logic CL2400 int&eacute;gr&eacute;s
        &agrave; la MVME187 (tty00-tty03) (cl)<br>
        Le second jeu de ports s&eacute;rie pr&eacute;sents uniquement
        sur la M8120 n'est pas support&eacute; &agrave; l'heure
        actuelle.
    <li>MVME188 SYSCON DUART serial ports (ttya, ttyb) (dart)
    </ul>
<li><strong>Adaptateurs Ethernet</strong>
    <ul>
    <li>Interface Intel i82586 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ie&amp;sektion=4&amp;arch=mvme88k">ie</a>)
        int&eacute;gr&eacute;e &agrave; la MVME187 <!-- et &agrave; la
        MVME197 -->
    </ul>
<li><strong>Contr&ocirc;leurs SCSI</strong>
    <ul>
    <li>Contr&ocirc;leur NCR 53c7xx 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=4&amp;arch=mvme88k">ssh</a>)
	int&eacute;gr&eacute; &agrave; la
        MVME187 <!-- et &agrave; la MVME197 -->
    </ul>
</ul>
</p>

<p>
<h4>Cartes d'extension support&eacute;es</h4>
</p>

<p>
<ul>
  <li><strong>MVME328</strong>: Contr&ocirc;leur SCSI Hautes
      Performances 
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vs&amp;sektion=4&amp;arch=mvme88k">vs</a>)
  <li><strong>MVME332</strong>: Contr&ocirc;leur E/S S&eacute;rie Hautes
      Performances (8 ports s&eacute;rie, 1 port parall&egrave;le) (vx)
  <li><strong>MVME376</strong>: Contr&ocirc;leur Ethernet
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=le&amp;sektion=4&amp;arch=mvme88k">le</a>)
</ul>
</p>

<p>
<h4>Cartes processeur non support&eacute;es</h4>
<p>

<p>
Ces cartes ne sont pas support&eacute;es &agrave; l'heure actuelle.
Cependant, l'arborescence contient du code pour certaines d'entre elles.
Ce code est actuellement en d&eacute;boguage.
<ul>
<li><strong>MVME181</strong><br>
Une version "stripped-down" de la MVME187 sans
p&eacute;riph&eacute;rique int&eacute;gr&eacute; mis &agrave; part des
ports s&eacute;rie.
<li><strong>MVME188 et MVME188A</strong><br>
Les HYPERmodules suivants (avec MMUs user/supervisor s&eacute;par&eacute;es) ne sont
pas support&eacute;s &agrave; l'heure actuelle : 1P64, 1P128, 1P256, 1P512, 2P128,
2P512.<br>
<li><strong>MVME197LE</strong><br>
Une conception entr&eacute;e de gamme similaire &agrave; la MVME187 mais
bas&eacute;e sur le processeur 88110 avec MMU int&eacute;gr&eacute;e et
contr&ocirc;leur cache.
<li><strong>MVME197SP/DP</strong><br>
Version am&eacute;lior&eacute;e de la MVME197LE avec un ou deux
processeurs 88110 et les contr&ocirc;leurs de cache externe 88410
associ&eacute;s.
</ul>
</p>

<hr>
<a name="install"></a>
<h3><font color="#0000e0">
<strong>Obtenir et installer OpenBSD/mvme88k :</strong>
</font></h3>

<p>
La derni&egrave;re version d'OpenBSD/mvme88k est
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.4/mvme88k/">OpenBSD
3.4</a>, mais cette version ne b&eacute;n&eacute;ficie d'aucun support.<br>
De temps &agrave; autre, des snapshots sont
mis &agrave; disposition, &agrave;
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/mvme88k">cet endroit</a>
ainsi que sur quelques
<a href="ftp.html">miroirs</a>.
Et voici les
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/mvme88k/INSTALL.mvme88k">
  instructions d'installation des snapshots OpenBSD/mvme88k
</a>.
</p>

<hr>
<a name="details"></a>
<h3><font color="#0000e0"><strong>D&eacute;tails mat&eacute;riels :</strong></font></h3>

<p> 
Le mat&eacute;riel VME est assez rare sur le march&eacute; aujourd'hui,
et le mat&eacute;riel bas&eacute; sur le Motorola 881x0 est encore plus
rare. Cette section a &eacute;t&eacute; cr&eacute;&eacute;e pour
satisfaire la curiosit&eacute; justifi&eacute;e concernant le
mat&eacute;riel mvme88k. </p>

<a name="pics">
<p>
Images d'un chassis Motorola 900 modulaire, avec une carte processeur
MVME187 &agrave; 33MHz, 32MB de RAM, 4 cartes s&eacute;rie MVME332XT ,
et un lecteur de bandes QIC de 250MB.
<ul>
<li><a href="../images/mvme187-1.jpg">MVME187 Series 900 (vue avant)</a>
<li><a href="../images/mvme187-2.jpg">MVME187 Series 900 (vue arri&egrave;re)</a>
<li><a href="../images/mvme187-3.jpg">MVME187 Series 900 (vue arri&egrave;re avec un
   terminal)</a>
<li><a href="../images/mvme187-4.jpg">MVME187 Series 900 (rear view close up)</a>
<li><a href="../images/mvme188-2.jpg">MVME188 Dual proc board</a>
</ul>
</p>

<p>
voici un message de d&eacute;marrage d'un syst&egrave;me MVME187.
<pre>
MVME187 board configuration #A: 1 CPUs 2 CMMUs
CPU0 is attached with 2 MC88200 CMMUs
CPU0 is master CPU
[ using 164336 bytes of bsd a.out symbol table ]
Copyright (c) 1982, 1986, 1989, 1991, 1993
        The Regents of the University of California.  All rights reserved.
Copyright (c) 1995-2003 OpenBSD. All rights reserved.  http://www.OpenBSD.org

OpenBSD 3.4-current (GENERIC) #339: Thu Dec 25 20:53:33 GMT 2003
    miod@ramade.gentiane.org:/usr/src/sys/arch/mvme88k/compile/GENERIC
real mem  = 33554432
avail mem = 28024832 (6842 pages)
using 435 buffers containing 1781760 bytes of memory
mainbus0 (root): Motorola MVME187, 25MHz
cpu0: M88100 rev 0x3, 2 CMMU
cpu0: M88200 (16K) rev 0x9, global Icache, M88200 (16K) rev 0x9, global Dcache
bugtty0 at mainbus0 addr 0xfff45000: fallback console
pcctwo0 at mainbus0 addr 0xfff00000: rev 0
clock0 at pcctwo0 ipl 5
memc0 at pcctwo0 offset 0x43000: MEMC040 rev 1
nvram0 at pcctwo0 offset 0xc0000: MK48T08 len 8192
cl0 at pcctwo0 offset 0x45000 ipl 3 console 
ssh0 at pcctwo0 offset 0x47000 ipl 2: version 0 target 7
scsibus0 at ssh0: 8 targets
vme0 at pcctwo0 offset 0x40000: vector base 0x80, system controller
vme0: using BUG parameters
vme0: 1phys 0x02000000-0xefff0000 to VME 0x02000000-0xefff0000
vme0: 2phys 0xff000000-0xff7f0000 to VME 0xff000000-0xff7f0000
vme0: 3phys 0x00000000-0x00000000 to VME 0x00000000-0x00000000
vme0: 4phys 0x00000000-0x00000000 to VME 0x00000000-0x00000000
vme0: vme to cpu irq level 1:1
vmes0 at vme0
vx0 at vmes0 addr 0xff780000 vaddr 0x3ad0000 vec 0x80 ipl 3
vx0: created channel 1
vs0 at vmes0 addr 0xffff9000 vaddr 0x3ae0000 vec 0x81 ipl 2: target 7
scsibus1 at vs0: 8 targets
sd0 at scsibus1 targ 0 lun 0: &lt;COMPAQPC, DCAS-32160, S6CA&gt; SCSI2 0/direct fixed
sd0: 2006MB, 8188 cyl, 3 head, 167 sec, 512 bytes/sec, 4110000 sec total
vmel0 at vme0
ie0 at pcctwo0 offset 0x46000 ipl 1: address 08:00:3e:21:07:25
boot device: sd0
root on sd0a
rootdev=0x400 rrootdev=0x800 rawdev=0x802
Automatic boot in progress: starting file system checks.
/dev/rsd0a: file system is clean; not checking
/dev/rsd0d: file system is clean; not checking
/dev/rsd0e: file system is clean; not checking
/dev/rsd0f: file system is clean; not checking
/dev/rsd0g: file system is clean; not checking
/dev/rsd0h: file system is clean; not checking
/dev/rsd0i: file system is clean; not checking
setting tty flags
ddb.console: 0 -&gt; 1
kern.splassert: 0 -&gt; 2
starting network
add net default: gateway odyssee
starting system logger
starting rpc daemons: portmap ypbind rdate timed.
savecore: no core dump
checking quotas: done.
building ps databases: kvm dev.
clearing /tmp
starting pre-securelevel daemons:.
setting kernel security level: kern.securelevel: 0 -&gt; 1
preserving editor files
creating runtime link editor directory cache.
starting network daemons: sendmail inetd sshd.
starting local daemons:.
standard daemons: cron.
Sat Nov  1 22:58:54 GMT 2003

OpenBSD/mvme88k (ramade.gentiane.org) (console)

login:  
</pre>

<hr>
<a href="plat.html">
<img height="24" width="24" src="../back.gif" border="0" alt="Supported platforms">
</a> 
<br>
<small><a href="mailto:www@openbsd.org">www@openbsd.org</a></small>
<br>
<small>
Originally [OpenBSD: mvme88k.html,v 1.44 ]<br>
$Translation: mvme88k.html,v 1.15 2003/12/30 07:16:14 saad Exp $<br>
$OpenBSD: mvme88k.html,v 1.12 2004/01/01 23:32:19 horacio Exp $
</small>

</body>
</html>
