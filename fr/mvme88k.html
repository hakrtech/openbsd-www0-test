<!DOCTYPE HTML PUBLIC  "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>OpenBSD/mvme88k</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD/mvme88k page">
<meta name="keywords" content="openbsd,mvme88k">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2003 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">
<a href="index.html"><img alt="[OpenBSD]" height="30" width="141"
src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">OpenBSD/mvme88k</font></h2>

<hr>

<p>
OpenBSD/mvme88k est un effort pour porter OpenBSD sur la famille de
cartes VME &agrave; base de Motorola 881x0. 
</p>

<p>
A l'heure actuelle, il n'y a aucun mainteneur officiel pour le port
mvme88k, et c'est un port non support&eacute; officiellement. Les
personnes travaillant dessus sont <a
href="mailto:smurph@openbsd.org">Steve Murphree</a> et <a
href="mailto:miod@openbsd.org">Miodrag Vallat</a>. 
</p>

<a href="#toc"></a>
<h3><font color="#0000e0"><i>Table des mati&egrave;res</i></font></h3>
<p>
<ul>
  <li><a href="#history">Historique du port</a> 
  <li><a href="#status">Etat actuel</a> 
  <li><a href="#projects">Projets</a>
  <li><a href="#hardware">Mat&eacute;riel support&eacute;</a>
  <li><a href="#install">Obtenir et installer OpenBSD/mvme88k</a> 
  <li><a href="#details">D&eacute;tails mat&eacute;riels</a>
</ul>
</p>

<hr>
<a name="history"></a>
<h3><font color="#0000e0"><strong>Historique :</strong></font></h3>

<p> 
Le processeur Motorola 88k est, dit-on, le meilleur processeur RISC
jamais con&ccedil;u. L'alliance de sa simplicit&eacute; et de son &eacute;l&eacute;gance font du
mvme88k une plate-forme robuste et agr&eacute;able.
</p>

<p> 
Nivas Madhur d&eacute;buta le port initial mvme88k pour la carte MVME187, mais
il a depuis chang&eacute; d'employeur. Le port f&ucirc;t int&eacute;gr&eacute;
&agrave; l'arborescence OpenBSD par Dale Rahn mais il n'avait pas assez
de temps pour travailler dessus. Steve Murphree, Jr. acheva finalement
le portage en Novembre 1998.
</p>

<p>
Malheureusement, une mise &agrave; jour du compilateur &agrave;
l'&eacute;poque de gcc 2.8.1 vers egcs a r&eacute;v&eacute;l&eacute;
plusieurs probl&egrave;mes dans le support mvme88k de gcc. Ces
probl&egrave;mes ne pouvaient pas &ecirc;tre corrig&eacute;s &agrave;
temps pour la sortie d'OpenBSD 2.5.
</p>

<p>
L'absence de "toolchain" dans l'arborescence n'a pas
emp&ecirc;ch&eacute; les travaux sur ce port, et beaucoup de
modifications ont &eacute;t&eacute; effectu&eacute;es &agrave; la base
de code, telles qu' un syst&egrave;me d'autoconfiguration am&eacute;lior&eacute;, un pilote
pour le SCSI int&eacute;gr&eacute;, un support du bus VME grandement am&eacute;lior&eacute;, une
proc&eacute;dure d'installation fonctionnant et cr&eacute;ant correctement un bloc VID
Motorola sur les disques et le support du MVME188 ainsi qu'un meilleur
support du MVME197. 
</p>

<p>
Durant l'&eacute;t&eacute; 2003, un effort pour corriger le "toolchain" a fini par
produire un compilateur gcc 2.95 fonctionnel, et a permis au port d'&ecirc;tre
&agrave; nouveau ind&eacute;pendant.
</p>

<hr>
<a name="status"></a>
<h3><font color="#0000e0"><strong>Etat actuel :</strong></font></h3>

<p> 
Les travaux r&eacute;cents sur le "toolchain" ont r&eacute;ussi &agrave; produire un
compilateur fonctionnel, bien que l'optimisation ne soit pas encore
enti&egrave;rement fiable. Malheureusement, quelques bogues au niveau du noyau
emp&ecirc;chent le syst&egrave;me d'&ecirc;tre tr&egrave;s stable en ce moment.
</p>

<hr>
<a name="projects"></a>
<h3><font color="#0000e0"><strong>Projets (sans ordre particulier):
</strong></font></h3>

<p>
<ul>
  <li>Corriger les bogues restants de g&eacute;n&eacute;ration de code mvme88k 
    dans gcc lorsque l'optimisation est utilis&eacute;e
  <li>R&eacute;parer le support MVME188 et MVME197LE; terminer le support
      MVME197SP/DP.
  <li>Travailler sur les cartes non support&eacute;es (MVME327, MVME374...) 
  <li>Ecrire du code pour le nouveau binutils (et gdb !!) et passer
      &agrave; ELF et, plus tard, aux biblioth&egrave;ques
      partag&eacute;es
</ul>
</p>

<hr>
<a name="hardware"></a>
<h3><font color="#0000e0"><strong>Mat&eacute;riel support&eacute; :</strong></font></h3>

<p>
<h4>Cartes processeur support&eacute;es</h4>
</p>

<p>
<ul>
<li><strong>MVME187</strong><br>
Une version uni-processeur 88100 des cartes <a href="mvme68k.html">mvme68k</a>
MVME167 et MVME177. Contient deux CMMUs 88200 avec un cache de 16KB chacun,
SRAM, et des contr&ocirc;leurs int&eacute;gr&eacute;s ethernet et SCSI ainsi que quatre ports
s&eacute;rie et un port parall&egrave;le.<br>
Except&eacute; le port parall&egrave;le, tous les p&eacute;riph&eacute;riques int&eacute;gr&eacute;s sont support&eacute;s.
<li><strong>Motorola M8120</strong><br>
Ce syst&egrave;me est bas&eacute; sur une MVME187 sans VMEBus. Il est aussi bien support&eacute; que
la MVME187.
</ul>
</p>

<p>
<h4>P&eacute;riph&eacute;riques int&eacute;gr&eacute;s support&eacute;s</h4>
</p>

<p>
<ul>
<li><strong>Ports s&eacute;rie</strong> 
  <ul>
    <li>Ports s&eacute;rie Cirrus Logic CL2400 int&eacute;gr&eacute;s &agrave; la MVME187 (tty00-tty03)<br>
    Le second jeu de ports s&eacute;rie pr&eacute;sents uniquement sur la M8120 n'est pas
    support&eacute; &agrave; l'heure actuelle.
<!--  <li>MVME188 SYSCON DUART serial ports (ttya, ttyb) -->
  </ul>
<li><strong>Adaptateurs Ethernet</strong>
  <ul>
  <li>Interface Intel i82586 int&eacute;gr&eacute;e &agrave; la MVME187 <!-- et &agrave; la MVME197 -->
  </ul>
<li><strong>Contr&ocirc;leurs SCSI</strong>
  <ul>
  <li>Contr&ocirc;leur NCR 53c7xx int&eacute;gr&eacute; &agrave; la MVME187 <!-- et &agrave; la  MVME197 -->
  </ul>
</ul>
</p>

<p>
<h4>Cartes d'extension support&eacute;es</h4>
</p>

<p>
<ul>
  <li><strong>MVME328</strong>: Contr&ocirc;leur SCSI
  <li><strong>MVME332</strong>: Carte 8 ports s&eacute;rie
  <li><strong>MVME376</strong>: Ethernet VME Lance
</ul>
</p>

<p>
<h4>Cartes processeur non support&eacute;es</h4>
<p>

<p>
Bien que ces cartes aient &eacute;t&eacute; plus ou moins support&eacute;s dans le pass&eacute;, leur
support n'est pas fonctionnel actuellement dans les derniers snapshots.
<ul>
<li><strong>MVME188 et MVME188A</strong><br>
Contrairement aux autres cartes processeur MVME, cette carte n'a aucun
p&eacute;riph&eacute;rique int&eacute;gr&eacute;; elle sert seulement de r&eacute;cipient &agrave; un a <i>HyperModule</i> 
qui fournit un, deux, ou quatre processeurs 88110, et deux ou quatre CMMUs 88200
(cache de 16KB) ou 88204 (cache de 64KB) par processeur.<br>
Tous les mod&egrave;les HyperModule devraient &ecirc;tre support&eacute;s, mais les tests n'ont &eacute;t&eacute;
effectu&eacute;s pour l'instant que sur les modules 1P64 (1 processeur, 4 CMMUs) et 2P256 (2
processeurs, 4 CMMUs). Les cartes externes sp&eacute;cifiques &agrave; la famille MVME188
fournissent la m&eacute;moire et les ports s&eacute;rie.
<li><strong>MVME197LE</strong><br>
Une conception entr&eacute;e de gamme similaire &agrave; la MVME187 mais bas&eacute;e sur le
processeur 88110 avec un MMU et un cache int&eacute;gr&eacute;s.
<li><strong>MVME197SP/DP</strong><br>
Version am&eacute;lior&eacute;e de la MVME197LE avec un ou deux processeurs 88110 et les
contr&ocirc;leurs de cache externe 88410 associ&eacute;s.
</ul>
</p>

<hr>
<a name="install"></a>
<h3><font color="#0000e0">
<strong>Obtenir et installer OpenBSD/mvme88k :</strong>
</font></h3>

<p>
De temps &agrave; autre,  Des snapshots sont mis &agrave; disposition, &agrave; 
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/mvme88k">cet endroit</a>
ainsi que sur quelques
<a href="ftp.html">miroirs</a>.
Et voici les
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/mvme88k/INSTALL.mvme88k">
  instructions d'installation des snapshots OpenBSD/mvme88k
</a>.
</p>

<hr>
<a name="details"></a>
<h3><font color="#0000e0"><strong>D&eacute;tails mat&eacute;riels :</strong></font></h3>

<p> 
Le mat&eacute;riel VME est assez rare sur le march&eacute; aujourd'hui, et 
  le mat&eacute;riel bas&eacute; sur le Motorola 881x0 est encore plus rare. Cette 
  section a &eacute;t&eacute; cr&eacute;&eacute;e pour satisfaire la curiosit&eacute; 
  justifi&eacute;e concernant le mat&eacute;riel mvme88k. </p>

<a name="pics">
<p>
Images d'un chassis Motorola 900 modulaire, avec une carte processeur MVME187 
  &agrave; 33MHz, 32MB de RAM, 4 cartes s&eacute;rie MVME332XT , et un lecteur 
  de bandes QIC de 250MB.
<ul>
 <li><a href="../images/mvme187-1.jpg">MVME187 Series 900 (vue avant)</a>
 <li><a href="../images/mvme187-2.jpg">MVME187 Series 900 (vue arri&egrave;re)</a>
 <li><a href="../images/mvme187-3.jpg">MVME187 Series 900 (vue arri&egrave;re avec un
   terminal)</a>
 <li><a href="../images/mvme187-4.jpg">MVME187 Series 900 (rear view close up)</a>
 <li><a href="../images/mvme188-2.jpg">MVME188 Dual proc board</a>
</ul>
</p>

<p>
voici un message de d&eacute;marrage d'un syst&egrave;me MVME187.
<pre>
MVME187 board configuration #A: 1 CPUs 2 CMMUs
CPU0 is attached with 2 MC88200 CMMUs
CPU0 is master CPU
[ using 163088 bytes of bsd a.out symbol table ]
Copyright (c) 1982, 1986, 1989, 1991, 1993
        The Regents of the University of California.  All rights reserved.
Copyright (c) 1995-2003 OpenBSD. All rights reserved.  http://www.OpenBSD.org

OpenBSD 3.4-beta (GENERIC) #202: Tue Sep  2 20:46:50 GMT 2003
    miod@arzon:/usr/src/sys/arch/mvme88k/compile/GENERIC
Model: Motorola MVME187, 33MHz
real mem  = 67108864
avail mem = 59142144 (14439 pages)
using 844 buffers containing 3457024 bytes of memory
mainbus0 (root) machine type MVME187
bugtty0 at mainbus0 addr 0xfff45000: bugtty
pcctwo0 at mainbus0 addr 0xfff00000: rev 0
clock0 at pcctwo0 ipl 5: VME1x7
sclock0 at pcctwo0 ipl 5: VME1x7
memc0 at pcctwo0 offset 0x43000: MEMC040 rev 1
memc1 at pcctwo0 offset 0x43100: MCECC rev 0
nvram0 at pcctwo0 offset 0xc0000: MK48T08 len 8192
cl0 at pcctwo0 offset 0x45000 ipl 3 console
vme0 at pcctwo0 offset 0x40000: vector base 0x80, system controller
vme0: using BUG parameters
vme0: 1phys 0x04000000-0xefff0000 to VME 0x04000000-0xefff0000
vme0: 2phys 0xff000000-0xff7f0000 to VME 0xff000000-0xff7f0000
vme0: 3phys 0x00000000-0x00000000 to VME 0x00000000-0x00000000
vme0: 4phys 0x00000000-0x00000000 to VME 0x00000000-0x00000000
vme0: vme to cpu irq level 1:1
vmes0 at vme0
vs0 at vmes0 addr 0xffff9000 vaddr 0x551b000 vec 0x80 ipl 2: target 7
scsibus0 at vs0: 8 targets
sd0 at scsibus0 targ 0 lun 0: &lt;COMPAQPC, DCAS-32160, S6CA&gt; SCSI2 0/direct fixed
sd0: 2006MB, 8188 cyl, 3 head, 167 sec, 512 bytes/sec, 4110000 sec total
vmel0 at vme0
ie0 at pcctwo0 offset 0x46000 ipl 1: address 08:00:3e:21:7c:74
boot device: sd0
root on sd0a
rootdev=0x400 rrootdev=0x800 rawdev=0x802
Automatic boot in progress: starting file system checks.
/dev/rsd0a: file system is clean; not checking
/dev/rsd0d: file system is clean; not checking
/dev/rsd0e: file system is clean; not checking
/dev/rsd0f: file system is clean; not checking
/dev/rsd0g: file system is clean; not checking
/dev/rsd0h: file system is clean; not checking
/dev/rsd0i: file system is clean; not checking
setting tty flags
ddb.console: 0 -&gt; 1
kern.splassert: 0 -&gt; 2
starting network
add net default: gateway odyssee
starting system logger
starting rpc daemons: portmap ypbind rdate timed.
savecore: no core dump
checking quotas: done.
building ps databases: kvm dev.
clearing /tmp
starting pre-securelevel daemons:.
setting kernel security level: kern.securelevel: 0 -&gt; 1
preserving editor files
creating runtime link editor directory cache.
starting network daemons: sendmail inetd sshd.
starting local daemons:.
standard daemons: cron.
Tue Sep  2 20:50:24 GMT 2003

OpenBSD/mvme88k (arzon) (console)

login:  
</pre>

<hr>
<a href="plat.html">
<img height="24" width="24" src="../back.gif" border="0" alt="Supported platforms">
</a> 
<br>
<small><a href="mailto:www@openbsd.org">www@openbsd.org</a></small>
<br>
<small>
Originally [OpenBSD: mvme88k.html,v 1.36 ]<br>
$Translation: mvme88k.html,v 1.10 2003/09/11 18:48:02 saad Exp $<br>
$OpenBSD: mvme88k.html,v 1.8 2003/09/13 17:10:26 horacio Exp $
</small>

</body>
</html>
