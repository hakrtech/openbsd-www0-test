<!-- DO NOT EDIT ANONCVS.HTML MANUALLY - IT IS GENERATED FROM TEMPLATES!
     See comments in www/build/mirrors.dat for details -->

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD AnonCVS</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="description" content="How to get OpenBSD updates via Internet using Anonymous CVS">
<meta name="keywords" content="openbsd,anoncvs,updates">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2010 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" 
src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">CVS Anonyme</font></h2>

<hr>

<h3>Table des matières</h3>

<ul>
<li><a href="#anoncvs">Qu'est ce que le CVS Anonyme ?</a>
<li><a href="#CVS">Qu'est ce que CVS ?</a>
<li><a href="#starting">Débuter avec le CVS Anonyme</a>
<li><a href="#using">Utiliser CVS(1) pour obtenir et mettre à
	jour les sources</a>
<li><a href="#CVSROOT">Serveurs CVS Anonymes disponibles</a>
<li><a href="#CRYPTO">Obtenir les sources de la crypto par CVS(1)</a>
<li><a href="#EXAMPLE">Exemples d'usages de CVS(1)</a>
<li><a href="#WHICH">Utiliser rsh(1) ou ssh(1) ?</a>
<li><a href="#SUP">Faire un miroir du dépôt CVS via sup(1)</a>
<li><a href="#MIRROR">Mettre en place un miroir anoncvs</a>
</ul>

<hr>

<h3><a name="anoncvs"><font color="#0000e0">Qu'est ce que le CVS Anonyme
    ?</font></a></h3>

<p>
Le CVS Anonyme est une méthode qui permet de garder à jour votre copie
locale des sources d'OpenBSD. En plus de suivre les dernières nouveautés
du développement, il est aussi possible de suivre les correctifs et les
errata d'une version.

<p>
L'avantage majeur du CVS Anonyme sur les autres techniques de mise à
jour est que cela fonctionne directement à partir d'un serveur central
où réside le code source ou d'un miroir. Cela vous permet d'avoir accès
à toutes les commandes de CVS pour intégrer et mettre à jour vos
changements avec d'autres changements dans les sources, d'effectuer des
diffs, de voir l'historique des changements et plein d'autres types de
requêtes.

<p>
Le projet OpenBSD comporte actuellement quatre modules actifs et deux
historiques regroupant ses sources :

<ul>
<li><b>src</b> - Contient tout le code source pour le système
d'exploitation OpenBSD.
<li><b>ports</b> - Contient les <a href="../faq/ports/index.html">ports OpenBSD</a>.
<li><b>www</b> - Contient les pages web OpenBSD (dont celle-ci).
<li><b>xenocara</b> - Contient l'arbre des sources du serveur X.org v7
d'OpenBSD en cours de développement.
<li><b>X11</b> et <b>XF4</b> - Contient l'adaptation OpenBSD du logiciel
<a href="http://www.XFree86.org/">XFree86-3</a> et Xfree86-4. Ceci est 
juste conservé à des fins historiques, la plupart des utilisateurs n'ont 
plus de raison d'utiliser cet arbre devenu obsolète.
</ul>

<p>
Pour résumer, CVS Anonyme est un système de contrôle du code source
"tolérant" et c'est ce qui fait sa force. Il <strong>respecte</strong>
les changements que vous avez effectués dans vos sources et fait les
<strong>"meilleurs efforts"</strong> pour mettre à jour votre
arborescence des sources, plutôt que de vous faire une liste de
problèmes ésotériques à résoudre avant de pouvoir continuer.

<h3><a name="CVS"><font color="#0000e0">Qu'est ce que CVS ?
    </font></a></h3>

<p>
<a href="http://ximbiot.com/cvs/">CVS</a> est le système de contrôle du
code source utilisé pour <a href="why-cvs.html">gérer les sources
d'OpenBSD.</a>
Il met oeuvre un dépôt central pour toutes les sources officiellement
disponible tout en permettant aux développeurs de maintenir des copies
locales du code source avec leurs changements personnels.

Il y a deux niveaux d'accès à l'arbre des sources :
<ul>
<li><b>Les développeurs ont un accès en écriture :</b>
Les développeurs qui ont besoin de publier des changements à l'arbre des
sources doivent avoir un compte sur les machines OpenBSD. Cet accès est
obtenu naturellement suite au travail sur les sources avec d'autres
développeurs OpenBSD. Si quelqu'un fait du bon travail et montre qu'ils
peuvent travailler avec l'équipe, ils obtiendront un compte.

<li><b>Accès en lecture seule pour tous :</b>
Chacun peut accéder aux dépôts CVS en lecture seule. Ces copies du dépôt
CVS en lecture/écriture sont souvent dupliquées sur d'autres miroirs.
</ul>

<p>
La grande force de CVS est sa capacité à effectuer une intégration
intelligente des changements venant du serveur central contenant les
sources avec les changements que vous avez effectués dans votre copie
locale. Cela signifie que si vous faites des changements à un module et
que vous effectuez une mise à jour, vos changements ne seront pas
détruits. CVS fait en sorte d'intégrer les changements dans les sources
aux côtés des changements que vous avez effectués.

<p>
Au cas où les changements ne peuvent pas être complètement intégrés, CVS
fournit une "chute en douceur", dans le sens qu'il vous fournit des
changements annotés à votre copie locale en préservant celle-ci et
continue de mettre à jour les autres sources comme demandé.

<h3><a name="starting"><font color="#0000e0">Débuter avec le CVS
    Anonyme </font></a></h3>

Si vous pouvez télécharger l'arbre des sources complet depuis un serveur
AnonCVS, vous pouvez souvent gagner beaucoup de temps et épargner de la
bande passante en "prechargeant" votre arbre des sources avec les
fichiers source contenus soit depuis le CD d'OpenBSD, soit depuis un
serveur FTP.
Ceci est particulièrement vrai si vous utilisez <a href="stable.html"><i>
-stable</i></a>, car relativement peu de fichiers changent entre <i>-
release</i> et <i>-stable</i>.

<p>
Pour extraire l'arbre des sources depuis le CD vers <i>/usr/src</i> (en
supposant que le CD est monté dans /mnt) :
<pre>
	# <b>cd /usr/src</b>
	# <b>tar xzf /mnt/src.tar.gz</b>
	# <b>cd /usr</b>
	# <b>tar xzf /mnt/xenocara.tar.gz</b>
	# <b>tar xzf /mnt/ports.tar.gz</b>
</pre>

Les fichiers source à télécharger sur les serveurs FTP sont séparés en
deux fichiers afin de réduire le temps de téléchargement requis pour
ceux qui ne veulent travailler qu'avec une partie de l'arbre. Les deux
fichiers sont <tt>sys.tar.gz</tt>, qui contient les fichiers utilisés
pour créer le noyau, et <tt>src.tar.gz</tt> qui contient le reste des
applications du "userland".
Cependant, vous voudrez généralement les installer tous deux. En
supposant que les fichiers téléchargés <tt>src.tar.gz</tt>,
<tt>sys.tar.gz</tt> et <tt>xenocara.tar.gz</tt> soient dans
<tt>/usr</tt> :

<pre>
	# <b>cd /usr/src</b>
	# <b>tar xzf ../sys.tar.gz</b>
	# <b>tar xzf ../src.tar.gz</b>
	# <b>cd /usr</b>
	# <b>tar xzf xenocara.tar.gz</b>
	# <b>tar xzf ports.tar.gz</b>
</pre>

<p>
Toutes les personnes ne voudront pas décompresser la totalité des sets
de fichiers, mais vous devrez généralement configurer tous les sets afin
d'avoir un système synchronisé.

<p>
Vous pouvez aussi simplement utiliser cvs(1) afin de faire un
"<b>checkout</b>" du dépôt des sources pour vos besoins. Ceci est évoqué
dans la <a href="#using">section suivante</a>.

<p>
Après cela, <tt>/usr/src</tt> sera un répertoire où toutes les commandes
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">cvs(1)</a>
fonctionneront correctement.

<h3><a name="using"><font color="#0000e0">Utiliser CVS pour
	récupérer et mettre à jour son arbre source</font></a></h3>

<p>
CVS a été mis au point dans le but d'être un moyen simple de récupérer
et de mettre à jour vos sources. Vous devez tout d'abord décider si vous
voulez suivre la branche <i>current</i> ou la 
<a href="stable.html">branche des patchs</a>.
L'arborescence current possède tous les derniers changements et
la branche correctifs contient une version d'OpenBSD avec tous les
correctifs de l'<a href="errata.html">errata</a> et d'autres problèmes
moindres appliqués.
Pour plus d'informations sur ces "flavors" d'OpenBSD, consultez <a
href="../faq/fr/faq5.html#Flavors">ceci</a>.

<p>
Une fois que vous avez décidé quelle est la branche que vous voulez
suivre, vous devez sélectionner le serveur de CVS Anonyme que vous allez
utiliser. Une liste de ces serveurs est disponible
<a href="#CVSROOT">ci-dessous</a>.

<p>
Une fois que vous avez choisi le <a href="#CVSROOT">serveur de CVS
Anonyme</a> que vous allez utiliser, et quelle méthode vous allez
utiliser, vous pouvez démarrer. Pour ceux qui aurait le CD, vous
pouvez démarrer avec la version du CVS qui se trouve sur le CD
avec les méthodes décrites
<a href="#starting">ci-dessus</a> pour installer les sources sur votre
système. Si vous n'avez pas le CD sous la main, utilisez la
méthode ci-dessous pour récupérer les sources.
Cette méthode place l'arborescence des sources d'OpenBSD dans
<i>/usr/src</i>.

<pre>
	# <b>cd /usr; cvs checkout -P src</b>
</pre>

<p>
La méthode ci-dessus va récupérer (checkout) l'arborescence
<i>current</i> des sources. Beaucoup d'entre vous désirerons sûrement la
branche correctifs (patch) des sources. Pour récupérer une branche
patch, vous devez le spécifier avec votre commande (tag). Exemple :

<!-- DO NOT EDIT ANONCVS.HTML MANUALLY - IT IS GENERATED FROM TEMPLATES!
     See comments in www/build/mirrors.dat for details -->
<pre>
	# <b>cd /usr; cvs checkout -P -rOPENBSD_4_8 src</b>
</pre>
<p>
Ou OPENBSD_4_7 pour 4.7, etc.

<p>
Le tag OPENBSD_4_8 contient les sources et les erratas sur les sources
déjà appliqués.

<h3><a name="CVSROOT"><font color="#0000e0">Serveurs CVS Anonymes
	disponibles</font></a></h3>

<p>
<em>Consultez la remarque ci-dessous en ce qui concerne l'utilisation de
<a href="#WHICH">ssh ou rsh !</a></em>
<p>
<ul>
<li><strong>CVSROOT=anoncvs@anoncvs.openbsd.org.ar:/cvs</strong><br>
Localisation : Buenos Aires, Argentina.<br>
Maintainu par <a href="mailto:gonzalo@x61.com.ar">Gonzalo Lionel Rodriguez</a>.<br>
Protocoles : ssh.<br>
Mis à jour toutes les 2 heures à partir de obsd.cec.mtu.edu.<br>
<p>
<li><strong>CVSROOT=anoncvs@ftp5.eu.openbsd.org:/cvs</strong><br>
Localisation : Vienne, Autriche.<br>
Maintenu par <a href="mailto:martin@openbsd.org">Martin
Reindl</a>.<br>
Protocoles : ssh, ssh port 2022.<br>
Mis à jour toutes les 2 heures à partir de anoncvs1.usa.openbsd.org.<br>
Empreintes SSH :<br>
(RSA) 2048 e4:a7:3a:ab:e1:a7:c8:eb:5c:f4:ff:38:95:6f:81:f2<br>
(DSA) 2048 66:03:a3:bc:46:85:f3:6c:4b:6b:e3:d4:f5:5f:a6:c4<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.spacehopper.org:/cvs</strong><br>
Localisation : Londres, Royaume-Uni.<br>
Maintenu par <a href="mailto:sthen@openbsd.org">Stuart Henderson</a>.<br>
Protocoles : ssh, ssh port 2022.<br>
Mis à jour toutes les heures à partir de anoncvs.ca.openbsd.org.<br>
Empreintes SSH :<br>
(RSA1) 2048 31:fc:3d:e0:f7:6c:47:7e:48:f0:52:17:e6:19:74:f5<br>
(RSA) 2048 e2:19:16:3f:a3:2e:eb:94:14:cd:5c:92:9a:6c:9a:8f<br>
(DSA) 1024 ff:47:13:22:83:d1:6e:df:a0:f0:4f:18:31:cb:f2:28<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs1.ca.openbsd.org:/cvs</strong><br>
Connu aussi sous le nom de <strong>anoncvs.ca.openbsd.org, openbsd.sunsite.ualberta.ca</strong>.<br>
Localisation : Alberta, Canada.<br>
Maintenu par <a href="mailto:beck@ualberta.ca">Bob Beck</a>.<br>
Protocoles : ssh, ssh port 2022.<br>
Mis à jour toutes les 2 heures.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.fr.openbsd.org:/cvs</strong><br>
Localisation : Paris, France.<br>
Maintenu par <a href="mailto:landry@openbsd.org">Landry Breuil</a>.<br>
Protocoles : ssh.<br>
Mis à jour toutes les 2 heures à partir de anoncvs1.ca.openbsd.org.<br>
Empreintes SSH :<br>
(RSA1) 2048 28:ce:6b:61:76:d9:0e:6d:65:a1:5c:dd:e8:d7:57:42<br>
(RSA) 2048 89:2e:84:9e:0c:f9:8d:21:41:0e:c5:80:41:27:14:c1<br>
(DSA) 1024 7f:fb:68:2f:0f:c8:63:6c:0f:32:2c:03:d4:cd:0c:47<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.eu.openbsd.org:/cvs</strong><br>
Localisation : Université de Stockholm, Stockholm, Suéde.<br>
Maintenu par <a href="mailto:jj@openbsd.org">Janne Johansson</a>.<br>
Protocoles : ssh.<br>
Mis à jour toutes les 2 heures.<br>
Empreintes SSH :<br>
(RSA) 2048 98:e6:80:5d:95:bb:e2:15:5e:19:4d:a3:e4:d0:bc:2c<br>
(DSA) 2048 4c:d2:0a:90:b8:95:5d:37:3b:32:7b:77:5a:c5:ef:26<br>
<p>
<li><strong>CVSROOT=anoncvs@openbsd.informatik.uni-erlangen.de:/cvs</strong><br>
Localisation : University of Erlangen-Nuremberg, Erlangen, Allemagne.<br>
Maintenu par <a href="mailto:simon@blarzwurst.de">Simon Kuhnle</a>.<br>
Protocoles : ssh, ssh port 2022.<br>
Mis à jour toutes les 2 heures à partir de anoncvs.spacehopper.org.<br>
Empreintes SSH :<br>
(RSA) 2048 bc:8e:dd:84:2d:6a:ed:6d:33:e7:46:d9:83:00:1b:ff<br>
(DSA) 1024 5c:e7:fb:a9:bc:93:4a:02:cc:04:88:57:71:51:0b:10<br>
<p>
<li><strong>CVSROOT=anoncvs@mirror.osn.de:/cvs</strong><br>
Localisation : N&uuml;rnberg, Allemagne.<br>
Maintenu par <a href="mailto:aw@osn.de">Armin Wolfermann</a>.<br>
Protocoles : ssh.<br>
Mis à jour toutes les 3 heures.<br>
Empreintes SSH :<br>
(RSA) 1024 f2:73:d2:f6:e3:01:ef:ca:3b:e7:6c:80:b6:bd:bb:84<br>
(DSA) 1024 fb:33:05:62:96:20:cf:88:7e:10:cb:8d:91:72:57:32<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.silihost.hu:/cvs</strong><br>
Localisation : Budapest, Hongrie.<br>
Maintenu par <a href="mailto:robert@openbsd.org">Robert Nagy</a>.<br>
Protocoles : ssh.<br>
Mis à jour toutes les 3 heures à partir de anoncvs.de.openbsd.org.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.jp.openbsd.org:/cvs</strong><br>
Connu aussi sous le nom de <strong>kankoromochi.econ.nagasaki-u.ac.jp</strong>.<br>
Localisation : Université de Nagasaki, Faculty of Economics, Nagasaki, Japon.<br>
Maintenu par <a href="mailto:sigh@net.nagasaki-u.ac.jp">Suzuki Itoshi</a>.<br>
Protocoles : ssh, pserver.<br>
Mis à jour toutes les 3 heures.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.openbsd.lt:/cvs</strong><br>
Localisation : TVK, Cable TV and Internet Services, Taurage, Lituanie.<br>
Maintenu par <a href="mailto:helpas@ebox.lt">Donatas Budvytis</a>.<br>
Protocoles: ssh.<br>
Mis à jour toutes les 3 heures à partir de cvsup.no.openbsd.org.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.obsd.si:/cvs</strong><br>
Connu aussi sous le nom de <strong>nina.kerberos.si</strong>.<br>
Localisation : Ljubljana, Slovénie.<br>
Maintenu par <a href="mailto:mitja@kerberos.si">Mitja Muzenic</a>.<br>
Protocoles : ssh.<br>
Mis à jour toutes les 2 heures à partir de anoncvs.eu.openbsd.org..<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.netbsd.se:/cvs</strong><br>
Localisation : Stockholm, Suède.<br>
Maintenu par <a href="mailto:viktor@holmlund.it">Viktor Holmlund</a>.<br>
Protocoles : ssh.<br>
Mis à jour toutes les 3 heures.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.spacehopper.org:/cvs</strong><br>
Localisation: Londres, Royaume-Uni.<br>
Maintenu par <a href="mailto:sthen@openbsd.org">Stuart Henderson</a>.<br>
Protocoles : ssh, ssh port 2022.<br>
Mis à jour toutes les heures de anoncvs.ca.openbsd.org.<br>
Empreintes SSH :<br>
(RSA1) 2048 31:fc:3d:e0:f7:6c:47:7e:48:f0:52:17:e6:19:74:f5<br>
(RSA) 2048 e2:19:16:3f:a3:2e:eb:94:14:cd:5c:92:9a:6c:9a:8f<br>
(DSA) 1024 ff:47:13:22:83:d1:6e:df:a0:f0:4f:18:31:cb:f2:28<br>
(ECDSA) 256 a5:b0:2a:65:ff:9a:0b:ef:7d:6f:d2:95:2e:a7:c9:2c<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs1.usa.openbsd.org:/cvs</strong><br>
Host also known as <strong>anoncvs.usa.openbsd.org, anoncvs4.usa.openbsd.org</strong>.<br>
Localisation : Internet Software Consortium, Redwood City, CA, USA.<br>
Maintenu par <a href="mailto:millert@openbsd.org">Todd C. Miller</a>.<br>
Protocoles : rsh, ssh, ssh port 2022, pserver.<br>
Mis à jour toutes les 2 heures.<br>
Empreintes SSH :<br>
(RSA1) 1024 64:de:26:16:c2:ff:1b:c7:24:ed:a4:4a:d7:2f:69:3e<br>
(RSA) 1024 49:67:9a:46:62:8a:3f:4e:b3:63:ca:d6:41:29:2a:2f<br>
(DSA) 1024 a7:75:49:77:f3:47:d1:3c:5e:65:84:84:3b:03:f1:33<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs3.usa.openbsd.org:/cvs</strong><br>
Localisation: National Center for Atmospheric Research, Boulder, CO, USA.<br>
Maintenu par <a href="mailto:millert@openbsd.org">Todd C. Miller</a>.<br>
Protocoles : rsh, ssh, ssh port 2022, pserver.<br>
Mis à jour toutes les 2 heures+.<br>
Empreintes SSH :<br>
(RSA1) 2048 80:cd:f6:fc:4f:0e:cb:80:6a:d0:6a:5e:dd:9e:5d:0a<br>
(RSA) 2048 49:6f:4a:be:02:63:0d:c0:54:b0:57:f0:48:7f:ce:16<br>
(DSA) 1024 f9:ab:fc:60:a3:15:8f:9c:47:24:9e:92:15:78:0d:f3<br>
<p>
<li><strong>CVSROOT=anoncvs@mirror.planetunix.net:/cvs</strong><br>
Localisation : Chicago, IL, Etats-Unis.<br>
Maintenu par <a href="mailto:brian@planetunix.net">Brian Brombacher</a>.<br>
Protocoles : ssh, ssh port 2022, pserver.<br>
Mis à jour toutes les 3 heures à partir de anoncvs3.usa.openbsd.org.<br>
Empreintes SSH :<br>
(RSA1) 2048 e4:22:93:81:84:e0:68:8c:0b:d5:1f:78:cd:6f:fa:c3<br>
(RSA) 2048 8f:42:bd:b0:a2:94:df:6b:af:1e:96:03:ea:68:03:d9<br>
(DSA) 1024 26:51:e8:b3:38:88:dc:a8:2a:98:59:86:ab:40:bb:a4<br>
<p>
<li><strong>CVSROOT=anoncvs@obsd.cec.mtu.edu:/cvs</strong><br>
Localisation : Michigan Technological University, Houghton, Michigan, USA.<br>
Maintenu par <a href="mailto:celinn@mtu.edu">Chris Linn</a>.<br>
Protocoles : ssh.<br>
Mis à jour toutes les 2 heures.<br>
Empreintes SSH :<br>
(RSA1) 2048 d7:91:a2:f4:d2:8d:81:7f:3c:44:91:8f:b5:b9:46:48 <br>
(RSA) 2048 de:f1:09:85:a0:db:60:97:d4:95:0d:07:80:4e:ee:68<br>
(DSA) 1024 78:05:5c:c7:ce:7e:6f:c8:6d:b7:e2:7e:ba:06:1c:40<br>
<p>
<li><strong>CVSROOT=anoncvs@openbsd.mirror.frontiernet.net:/cvs</strong><br>
Localisation: Frontier Communications, Rochester, NY, USA.<br>
Maintenu par <a href="mailto:jrrs@frontiernet.net">jared r r spiegel</a>.<br>
Protocoles: ssh.<br>
Mis à jour toutes les 4 heures à partir de anoncvs.ca.openbsd.org.<br>
<p>

</ul>

<p>
<em>Remarque :</em> Si votre serveur est listé ici avec des
informations inexactes, veuillez contacter
<a href="mailto:beck@openbsd.org"><tt>beck@openbsd.org</tt></a>

<p>
Vous pouvez utiliser
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute&amp;sektion=8&amp;format=html">traceroute(8)</a>
pour trouver le serveur le plus proche de vous. Les problèmes avec un
serveur doivent être adressés directement au
<b>mainteneur</b> du serveur en question.

<h3><a name="CRYPTO"><font color="#0000e0">Obtenir les sources crypto
	par cvs(1)</font></a></h3>

<p>
<strong>REMARQUE IMPORTANTE :</strong>
Il existe quelques remarques au sujet des logiciels cryptographiques que
tout le monde doit connaître :
<ul>
<li>Les sources d'OpenBSD viennent du Canada.
	Comme
	<a href="http://www.efc.ca/pages/doc/crypto-export.html">recherché
	par un Canadien</a>
	et comme décrit dans la
	<a href="http://axion.physics.ubc.ca/ECL.html">liste de contrôle des
	exportations du Canada</a>
	il est légal d'exporter les logiciels de crypto depuis le Canada
	vers le reste du monde.
<p>
<li>Cependant, si vous êtes en dehors des Etats-Unis et du Canada, vous
	ne devez pas récupérer les parties cryptographiques
	des sources d'OpenBSD depuis un serveur anoncvs situé aux
	Etats-Unis. Les fichiers en question sont :
<ul>
<li>src/kerberosIV/*
<li>src/kerberosV/*
<li>src/lib/libdes/*
<li>src/lib/libc/crypt/crypt.c
<li>src/lib/libc/crypt/morecrypt.c
<li>src/sys/crypto
<li>src/sys/netinet
<li>src/usr.sbin/afs/src/rxkad/*
<li>XF4/xc-mit/lib/Xdmcp/Wraphelp.c
<li>XF4/xc-old/lib/Xdmcp/Wraphelp.c
<li>XF4/xc/lib/Xdmcp/Wraphelp.c
</ul>
</ul>
A cause de la politique commerciale de l'US Dept, les logiciels de
crypto ne peuvent être exportés qu'au Canada depuis les Etats-Unis.

<h3><a name="EXAMPLE"><font color="#0000e0">Exemples d'utilisation de
        cvs(1)</font></a></h3>

<p>
AVERTISSEMENT : si vous souhaitez mettre à jour une branche (telle
qu'une branche de correctifs) vers <i>current</i>, vous devez ajouter
l'option <code>-A</code> à la commande cvs mais autrement, cette option
est inutile. D'anciennes versions de la documentation OpenBSD
recommandait l'usage de cette option dans de nombreux exemples. Nous ne
la recommandons plus, sauf lorsqu'elle est absolument nécessaire.

<p>
Un exemple d'utilisation d'un serveur anoncvs pourrait être :
<pre>
$ <strong>cd /tmp</strong>
$ <strong>cvs -d anoncvs@anoncvs.ca.openbsd.org:/cvs get src/sys/arch/sparc</strong>
        [copie les fichiers depuis le serveur sur la machine]
$ <strong>cd src/sys/arch/sparc</strong>
$ <strong>cvs log locore.s</strong>
        [montre le journal des commit pour le fichier donné]
$ <strong>cvs diff -bc -r1.1 -r1.5 locore.s</strong>
        [Montre les changements entre les versions 1.1 et 1.5]
</pre>

<p>
<a name="pserver">Pour pouvoir utiliser cvs avec ``pserver'' (une
connexion TCP directe plutôt que l'utilisation de ssh ou rsh) vous devez
vous connecter une fois :</a>

<pre>
$ <strong>cvs -d :pserver:anoncvs@anoncvs.ca.openbsd.org:/cvs login</strong>
(Connexion à anoncvs@anoncvs1.ca.openbsd.org)
CVS password: <strong>anoncvs</strong>
        [Cela écrit une ligne dans ~/.cvspass (le nom de fichier est
        écrasé par CVS_PASSFILE).]
        [Une ligne d'exemple de mon ~/.cvspass après avoir
        tapé 'blah' ]
        [password is:                                                            ]
        [:pserver:anoncvs@anoncvs5.usa.openbsd.org:/cvs Au'yc                    ]
        [...après s'être connecté une fois, le CVSROOT ci-dessus fonctionnera    ]
$ <strong>cvs -d :pserver:anoncvs@anoncvs.ca.openbsd.org:/cvs get ksrc-i386 ksrc-common</strong>
        [Vous permet de ne récupérer QUE ce qui est
        nécessaire pour créer un noyau i386 ]
</pre>

<p>
Voici comment quelqu'un qui utilise anoncvs met à jour son
arborescence des sources :
<ul><li>Tout d'abord il faut commencer par récupérer une
arborescence initiale :

<p> (Si vous suivez <i>current</i>):
<pre>
        # <strong>cd /usr</strong>
        # <strong>cvs -qd anoncvs@anoncvs.ca.openbsd.org:/cvs get -P src</strong>
</pre>

<p> (Si vous suivez la branche des correctifs pour 4.8) : 
<pre>
        # <strong>cd /usr</strong>
	# <strong>cvs -qd anoncvs@anoncvs.ca.openbsd.org:/cvs get -rOPENBSD_4_8 -P src</strong>
</pre>


<li> Ensuite, pour mettre à jour cette arborescence :
<p> (Si vous suivez <i>current</i>):
<pre>
        # <strong>cd /usr/src</strong>
        # <strong>cvs -q up -Pd</strong>
</pre>

<p> (Si vous suivez la branche des correctifs pour 4.8) : 
<pre>
        # <strong>cd /usr/src</strong>
        # <strong>cvs -q up -rOPENBSD_4_8 -Pd</strong>
</pre>

À chaque fois que vous lancerez ceci, cela synchronisera votre
arborescence /usr/src. Cela ne détruira aucun de vos changements
locaux, mais tentera d'y intégrer les changements.

<p>
<li> REMARQUE : si vous mettez à jour vos sources depuis un
        serveur autre que celui à partir duquel vous avez
        récupéré les sources (ou depuis le CD), vous
        <strong>devez</strong> ajouter l'option
        <em>-d anoncvs@anoncvs.ca.openbsd.org:/cvs</em> à la commande cvs.
<pre>
        # <strong>cd /usr/src</strong>
        # <strong>cvs -d anoncvs@anoncvs.ca.openbsd.org:/cvs -q up -Pd</strong>
</pre>
</ul>

<p>
Pour <a name="ports">utiliser</a> les <a href="../faq/ports/index.html">ports</a>, 
il faut procéder de la même façon qu'avec src :
<ul><li> 
<p> (Si vous suivez <i>current</i>) : 
<pre>
        # <strong>cd /usr</strong>
        # <strong>cvs -qd anoncvs@anoncvs.ca.openbsd.org:/cvs get -P ports</strong>
</pre>
<p> (Si vous suivez la branche des correctifs pour 4.8) : 
<pre>
        # <strong>cd /usr</strong>
        # <strong>cvs -qd anoncvs@anoncvs.ca.openbsd.org:/cvs get -rOPENBSD_4_8 -P ports</strong>
</pre>
<li> Ensuite, pour mettre à jour l'arborescence : 
<p> (Si vous suivez <i>current</i>) : 
<pre>
        # <strong>cd /usr/ports</strong>
        # <strong>cvs -q up -Pd</strong>
</pre>
<p> (Si vous suivez la branche des correctifs pour 4.8) : 
<pre>
        # <strong>cd /usr/ports</strong>
        # <strong>cvs -q up -rOPENBSD_4_8 -Pd</strong>
</pre>
</ul>

Dans l'exemple précédent, <i>-q</i> est optionnel, et n'est là que pour
minimiser la sortie cvs. Pour ceux qui aime avoir des écrans bien
pleins, il peut être enlevé.

<p>
Pour faire un diff sur un module corrigé en local (ici
<i>cd.c</i>) à inclure avec un rapport de bug :
<pre>
        # <strong>cd /usr</strong>
        # <strong>cvs diff -u src/sys/scsi/cd.c &gt; /tmp/patch</strong>
</pre>

<p>
La page du manuel
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">CVS(1)</a>
(inclue avec les sources de CVS) a beaucoup plus d'informations sur la
manière d'utiliser CVS.

<p>
<strong>Avertissement :</strong>
Quand vous utilisez cvs il vous faudra prendre garde que votre
répertoire courant est soit la racine de l'arborescence des ports ou une
autre place telle que /tmp. Quelques commandes telles que "get" peuvent
créer une sous-arborescence arbitrairement dans le répertoire courant,
et chaque mise à jour successive ira mettre à jour cette sous-
arborescence.

<p>
Le serveur anoncvs donne une chance aux apprentis développeurs
d'apprendre les opérations cvs et de devenir ainsi impliqué dans le
développement des sources avant d'obtenir un accès "commit". De plus,
les gens fournissant des correctifs peuvent les créer avec des diffs
relatifs à l'arborescence CVS, ce qui facilitera l'intégration.

<h3><a name="WHICH"><font color="#0000e0">Utiliser rsh(1) ou
        ssh(1)?</font></a></h3>

CVS supporte trois méthodes d'accès entre le serveur CVS et le client :

<ul>
<li><b>ssh :</b> le Secure Shell peut être utilisé pour accéder aux
serveurs CVS anonymes.
Ceci est la méthode <i>recommandée</i>, étant chiffrée.

<li><b>rsh :</b> le Remote Shell peut être utilisé sur certains des
serveurs par les personnes qui n'ont pas accès à <a
href="http://www.openssh.com/">ssh</a>.

<li><b>pserver :</b> pserver est très utile pour les utilisateurs
derrière des pare-feu, qui bloquent les deux autres connexions.
</ul>

<p>
<b>REMARQUE :</b> Les utilisateurs voulant utiliser rsh devraient tout
d'abord régler la variable d'environnement <tt>CVS_RSH</tt> pour qu'elle
pointe sur le programme rsh(1) lancé :

<ul>
<li>Pour les shells Korn/Bourne:
<pre>
        $ <b>export CVS_RSH=/usr/bin/rsh</b>
</pre>
<li>Pour csh/tcsh:
<pre>
        % <b>setenv CVS_RSH /usr/bin/rsh</b>
</pre>
</ul>

<p>
Par défaut, le client CVS d'OpenBSD utilise ssh ("secure shell": <a
href="http://www.openssh.com/">OpenSSH</a>) pour dialoguer avec le
serveur CVS.

<p>
De nombreux sites CVS ne supportent plus rsh ou pserver pour des raisons de
sécurité. Des problèmes locaux tels que des pare-feu ou des émulateurs
de protocole imparfaits tels que slirp peuvent aussi réduire
l'utilisation de rsh. Cependant, si vous souhaitez utiliser rsh, vous
devez régler la variable d'environnement <var>CVS_RSH</var> pour qu'elle
pointe sur rsh (typiquement, <strong>/usr/bin/rsh</strong>).

<p>
Si la politique locale empêche les connexions sortantes vers le port par
défaut de ssh (22), le port 2022 peut être utilisé à la place. Notez
cependant que tous les serveurs anoncvs n'acceptent pas les connexions
sur ce port. De plus, la plupart des serveurs anoncvs n'acceptent plus
le chiffrement <strong>nul</strong>, puisqu'il est désactivé dans les
versions récentes de ssh pour raison de sécurité. De plus, ne soyez pas
tentés d'activer la compression : CVS compresse déjà.

<p>
Vous pouvez spécifier quelque chose comme ce qui suit dans le fichier de
configuration <strong>$HOME/.ssh/config</strong> pour éviter les écueils
et restrictions mentionnées ci- dessus :
<pre>
        Host anoncvs.ca.openbsd.org
            Compression no
            Port 2022
</pre>

<p>
CVS est un peu "bavard" au démarrage, pour éviter ceci, il peut être
utile de définir ceci :

<pre>
	<strong>$ export CVS_CLIENT_PORT=-1</strong>
</pre>

<p>
<h3><a name="SUP"><font color="#0000e0">Faire un miroir du dépôt CVS via
sup(1)</font></a></h3>

<p>
Les utilisateurs qui souhaitent faire un miroir de l'arbre CVS d'OpenBSD
doivent maintenant le faire de
<em>anoncvs.usa.openbsd.org</em> ou <em>anoncvs3.usa.openbsd.org</em>
(ce sont des machines différentes). Il faut remarquer que c'est l'arbre cvs,
<b>pas</b> une récupération de l'arbre des sources. C'est seulement utile si
vous voulez être capable de faire des opérations cvs rapidement (diff, annotate, etc) 
ou si vous avez plusieurs arbres des sources et que vous voulez seulement
transférer des nouvelles données une fois (vous pouvez récupérer un arbre de
votre miroir cvs local).
<p>
Un exemple de supfile serait :
<pre>
	cvs host=anoncvs.usa.openbsd.org hostbase=/ base=/home delete
</pre>
<p>
qui fera un miror de l'arbre cvs dans /home/cvs avec les fichiers de données
sup dans le répertoire /home/sup. L'arbre cvs complet d'OpenBSD a
actuellement une taille de 5Go, et continuera évidemment de grandir.

<h3><a name="MIRROR"><font color="#0000e0">Mettre en place un miroir
        anoncvs </font></a></h3>

<p> 
Si vous souhaitez mettre en place un site miroir anoncvs et de le mettre
à disposition du public, contactez le
<a href="mailto:sup@openbsd.org">mainteneur</a> anoncvs.

Les miroirs anoncvs nécessite 5GB de disque (et cela continuera de
grossir !) et peuvent utiliser jusqu'à 32MB de swap par utilisateur
anoncvs (en supposant que l'utilisateur fasse une opération d'envergure,
de plus petites opérations nécessiteront moins de ressources, mais dans
tous les cas, anoncvs utilise beaucoup plus de ressources que
ftp ou sup). De telles machines anoncvs se doivent d'avoir une excellente
connexion réseau pour la zone qu'elles ont l'intention de servir. Un <a
href="../anoncvs.shar">document</a> qui décrit comment mettre en place
les serveurs anoncvs est disponible.

<h3><font color="#0000e0">Remarques finales </font></h3>
Après avoir mis à jour l'arborescence des sources, vous pouvez lire les
commentaire en haut de <kbd>/usr/src/Makefile</kbd> avant d'essayer de
compiler. De plus vous devez construire un nouveau noyau
<strong>avant</strong> de faire un <kbd>make build</kbd> si possible.
Dans certains cas, il est indispensable de reconstruire et installer
l'utilitaire <kbd>config</kbd> avant de reconstruire le noyau. Si
<kbd>config GENERIC</kbd> ne fonctionne pas, c'en est probablement la
cause.
<p>
Il est important de noter que mettre à jour d'une version d'OpenBSD vers
une arborescence courante (current) est difficile à cause des
dépendances qui ne sont pas toujours évidentes. Il est donc conseillé
d'installer tout d'abord le dernier snapshot avant de tenter de
recompiler les sources.

<hr>
<a href="index.html"><img height=24 width=24 src="../back.gif"
border=0 alt=OpenBSD></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: anoncvs.html,v 1.343 ]<br>
$Translation: anoncvs.html,v 1.166 2011/04/02 07:46:16 benoit Exp $<br>
-->
$OpenBSD: anoncvs.html,v 1.143 2011/04/02 08:13:12 ajacoutot Exp $
</small>

</body>
</html>
