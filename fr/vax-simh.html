<!DOCTYPE HTML PUBLIC  "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>OpenBSD/vax sur SIMH</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD/vax SIMH page">
<meta name="keywords" content="openbsd,vax,simh">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 2004-2008 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">
<a href="index.html"><img alt="[OpenBSD]" height="30" width="141"
src="../images/smalltitle.gif" border="0"></a>
<p>

<h2><font color="#e00000">OpenBSD/vax sur SIMH</font></h2>

<hr>

Il est très facile d'installer OpenBSD/vax sur le simulateur VAX
<a href="http://simh.trailing-edge.com">SIMH</a>. Vous n'avez besoin que
d'une machine raisonnablement puissante, assez d'espace disque pour une
image disque de 1.5Go et le fichier <i>floppy43.fs</i>.

Considérant que vous allez lancer SIMH sur un système OpenBSD, installez
le paquetage <i>emulators/simh</i> des <a href="ports.html">ports</a>.
Décidez du lieu de votre environnement SIMH OpenBSD/vax, et créez y un
fichier <i>openbsd.simh</i> contenant :

<blockquote>
<pre>
<strong>
set cpu 64m
at nvr openbsd.nvram

deposit rq qtime 1000000

set rq0 ra92
at rq0 openbsd.ra0.disk

set rq1 cdrom
at rq1 /dev/rcd0c

set rq2 cdrom
at rq2 floppy43.fs

at xq0 bge0

boot cpu
exit
</strong>
</pre>
</blockquote>

Ceci configure SIMH pour simuler un VAX avec 64 Mo de mémoire, un disque
RA92 de 1.5Go, une unité CD-ROM afin d'utiliser le CD1 de votre jeu de
CD-ROM, une autre unité CD-ROM depuis laquelle booter, et un contrôleur
Ethernet DELQA Qbus. Vous aurez à remplacer <strong>bge0</strong> avec
le nom de l'interface sur votre machine. Vous pourriez aussi avoir à
remplacer <strong>/dev/rcd0c</strong> par le nom d'un périphérique brut
correspondant à votre véritable unité CD-ROM. Consultez la documentation
SIMH pour plus de détails.

<p>

Copiez <i>4.3/vax/floppy43.fs</i> dans le répertoire de votre
environnement SIMH OpenBSD/vax.

A présent, lancez SIMH. Vous devriez saisir au prompt de boot
<strong>boot dua2:</strong>, entrainant le boot de SIMH dans le
programme d'installation OpenBSD classique  :

<blockquote>
<pre>
# <strong>simh-vax openbsd.simh</strong>

VAX simulator V3.7-3
NVR: buffering file in memory
Eth: opened bge0
Loading boot code from /usr/local/lib/simh/vax/ka655x.bin


KA655-B V5.3, VMB 2.7
Performing normal system tests.
40..39..38..37..36..35..34..33..32..31..30..29..28..27..26..25..
24..23..22..21..20..19..18..17..16..15..14..13..12..11..10..09..
08..07..06..05..04..03..
Tests completed.
&gt;&gt;&gt;<strong>boot dua2:</strong>
(BOOT/R5:0 DUA2



  2..
-DUA2
  1..0..


&gt;&gt; OpenBSD/vax boot [1.12] [Mar 11 2008] &lt;&lt;
&gt;&gt; Press enter to autoboot now, or any other key to abort: 0
&gt; boot bsd
</pre>
</blockquote>

Après avoir fini l'installation, relancez SIMH en saisissant cette fois
ci :

<blockquote>
<pre>
&gt;&gt;&gt;<strong>boot dua0:</strong>
</pre>
</blockquote>

afin de booter depuis votre image disque fraichement installée. Vous
aurez besoin d'un peu de patience pendant votre premier boot, lors de la
génération des clés SSH de l'hôte pouvant prendre un peu de temps. Mais
vous devriez finalement booter et voir apparaître un prompt login
familier :

<blockquote>
<pre>
OpenBSD/vax (noname.my.domain) (console)

login: 
</pre>
</blockquote>

Après avoir installé des paquetages additionnels, vous voudrez
peut-être retirer les lignes faisant référence à votre unité CD-ROM,
ainsi que <i>floppy43.fs</i> de votre fichier <i>openbsd.simh</i>.

<p>

Régalez-vous !

<hr>
<a href="vax.html">
<img height="24" width="24" src="../back.gif" border="0" alt="OpenBSD/vax">
</a> 
<br>
<small><a href="mailto:www@openbsd.org">www@openbsd.org</a></small>
<br>

<small>
<!--
Originally [OpenBSD: vax-simh.html,v 1.13 ]<br>
$Translation: vax-simh.html,v 1.17 2008/11/26 21:00:34 benoit Exp $<br>
-->
$OpenBSD: vax-simh.html,v 1.16 2008/12/01 07:52:53 tobias Exp $
</small>

</body>
</html>
