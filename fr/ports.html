<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="resource-type" content="document">
<meta name="description" content="The OpenBSD Ports and Packages Collection">
<meta name="keywords" content="openbsd,ports">
<meta name="distribution" content="global">
<meta name="copyright" content="copyright 1997-2004 by OpenBSD.">
<title>Les Ports et les Packages OpenBSD</title>
<link rev="made" href="mailto:www@openbsd.org">
</head>

<body text="#000000" bgcolor="#FFFFFF" link="#23238E">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>

<h2><font color="#e00000">La collection de ports et de packages</font></h2>

<hr>

<h3><font color="#0000e0">Index</font></h3>
<ul>
<li><a href="#Motivation">Motivations</a></li>
<li><a href="#Get">Obtenir des packages</a></li>
<li><a href="#stable"> Mise à jour des ports et des packages pour une
    version finale d'OpenBSD</a></li>
<li><a href="#Manage">Gérer les packages installés</a></li>
<li><a href="#Use">Utiliser les ports</a></li>
<li><a href="#Life">Cycle de vie de l'arborescence des ports</a></li>
<li><a href="#XFree86">Ports et XFree86</a></li>
<li><a href="#Example">Exemple d'utilisation de l'arborescence des
    ports</a></li>
<li><a href="#Advanced">Utilisation avancée de l'arborescence des
    ports</a></li>
<li><a href="#Create">Créer de nouveaux ports</a></li>
<li><a href="#Lag">Quand un port est en retard sur la version
    principale</a></li>
<li><a href="#Help">Problèmes et contacts</a></li>
</ul>

<hr>

<h3><font color="#0000e0"><a name="Motivation">Motivations</a></font></h3>

OpenBSD est de lui-même un système assez complet, mais il y a toujours
beaucoup de packages que l'on pourrait désirer voir ajoutés. Cependant,
il y a le problème de tracer une frontière sur ce qui doit être inclus,
ainsi que les problèmes occasionnels de licence et de restriction
d'exportation. Etant donné qu'OpenBSD est censé être un petit système
d'exploitation autonome de type UNIX, certaines choses ne peuvent
justement pas être fournis avec le système.

<p>
<strong><font color="#e00000">
La collection de ports et de packages NE passe PAS par l'audit complet
de sécurité dont OpenBSD fait l'objet. Bien que nous nous efforçons de
maintenir la qualité de la collection des packages à un niveau élevé, nous
n'avons malheureusement pas assez de ressources humaines pour assurer le
même niveau de robustesse et de sécurité.
</font></strong>

<p>
La collection de ports, à l'origine empruntée à <a
href="http://www.freebsd.org/">FreeBSD</a>, comble ce vide. Ce concept
stipule que chaque logiciel tiers doit avoir un fichier "makefile"
qui régit
<ul>
<li>où le rechercher,
<li>comment le rechercher,
<li>ce qui en dépend (s'il y a lieu),
<li>comment changer les sources (si nécessaire),
<li>et comment le configurer, le compiler et l'installer.
</ul>
Ces informations sont maintenues dans l'arborescence du répertoire
/usr/ports.

<p>
Les packages sont l'équivalent binaire des ports. Un port compilé
devient un package qui peut être enregistré dans le système en utilisant
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;format=html">pkg_add(1)</a>

<p>
<strong><font color="#e00000">
Les packages ressemblent à de simples paquets .tgz, mais ils devraient
toujours être ajoutés en utilisant
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;format=html">pkg_add(1)</a>,
car il pourrait y avoir des informations supplémentaires que seul
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;format=html">pkg_add(1)</a>
sait manipuler.
</font></strong>
Astuce : vous pouvez distinguer les packages des paquets
<strong>.tgz</strong> en utilisant
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&amp;sektion=1&amp;format=html">pkg_info(1)</a>.

<h3><font color="#0000e0"><a name="Get">Obtenir des packages</a></font></h3>

Une large collection de packages pré-compilés est disponible pour la
plupart des architectures communes.

<ul>
<li>Sur le CD-Rom (que vous pouvez commander <a href="../orders.html">ici</a>),
<li>Sur les <a href="ftp.html">sites ftp miroirs</a>.
<li>Par navigation et recherche à partir de la liste web des packages :
<ul>
<li><a href="http://www.openbsd.org/3.6_packages/">Packages pour OpenBSD 3.6</a>
<li><a href="http://www.openbsd.org/3.5_packages/">Packages pour OpenBSD 3.5</a>
</ul>
</ul>

Ajouter un package est aussi facile que <code>pkg_add
pkgname.tgz</code>. Si vous prenez les packages dans une même source (un
dépôt de packages), réglez PKG_PATH sur l'URL de ce dépôt, afin de
traiter les dépendances.

<p>
Par exemple, pour installer le package Gimp sur la révision 3.6, et sur une
machine i386, à partir du site ftp (incluant les dépendances), faites :

<pre>
    # setenv PKG_PATH ftp://ftp.openbsd.org/pub/OpenBSD/3.6/packages/i386/
    # pkg_add ${PKG_PATH}gimp-1.2.5.tgz
</pre>

<h3><font color="#0000e0"><a name="stable"> Mise à jour des ports et des
    packages pour une version finale d'OpenBSD </a></font></h3>

<p>
La version 2.7 a vu l'introduction d'une branche stable pour
l'arborescence des ports.
<p>
Par exemple, pour saisir la branche stable de la version 3.6 :
<pre>
    $ cd /usr/ports
    $ cvs -q -d anoncvs@some.anon.server:/cvs up -r OPENBSD_3_6 -Pd
</pre>
<p>
Commençant avec la version 2.8, les binaires choisis sont également
disponibles. Veuillez vous référer
à la <a href="pkg-stable.html">page des packages stables</a> pour vous
renseigner sur la mise à jour des packages et sur les mises à jour
importantes de la branche stable. Si vous voulez recevoir les annonces
de sécurité, vous pouvez vous inscrire à la liste de diffusion ports-
security.

<p>
Les noms des packages sont <strong>toujours</strong> changés en cas de
mise à jour du logiciel, pour éviter tout risque de confusion entre un
logiciel en version finale et un logiciel corrigé de ses bogues.

<h3><font color="#0000e0"><a name="Manage">Gérer les packages
    installés</a></font></h3>

La page 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=packages&amp;sektion=7&amp;format=html">Packages(7)</a>
du manuel détient des informations utiles sur les manières de gérer les
packages installés, résoudre les conflits (fichiers déjà existants) et
manipuler les dépendances.

<p>
A partir d'OpenBSD 2.8, pour mettre à jour un logiciel vous devez :

<ul>
<li>Enlever l'ancien logiciel en utilisant
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&amp;sektion=1&amp;format=html">pkg_delete(1)</a>
<li>Ajouter le nouveau logiciel en utilisant
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;format=html">pkg_add(1)</a>
</ul>
Ceci est légèrement incommode, car les packages peuvent déclencher des
dépendances, et vous aurez peut-être à enlever un grand sous-ensemble de
packages pour une mise à jour.

<h3><font color="#0000e0"><a name="Use">Utiliser des
    ports</a></font></h3>

Si un logiciel donné n'existe pas pour votre architecture, vous pouvez
encore compiler le port. En outre, certains utilisateurs voudront tout
compiler à partir des sources pour différentes raisons.

<p>
Vous pouvez télécharger par ftp la version finale souhaitée à partir du
répertoire pub/OpenBSD/[version] (où [version] est le numéro de la
version finale) sur n'importe lequel des <a href="ftp.html">sites ftp
miroirs</a>. Les versions finales sont celles que nous livrons sur notre
CDROM, et sont soumises à plus de tests que celles sur n'importe quel
"snapshot". Davantage d'informations sont disponibles dans la page <a
href="http://www.openbsd.org/cgi-
bin/man.cgi?query=ports&amp;sektion=7&amp;format=html">ports(7)</a> du
manuel.


<h3><font color="#0000e0"><a name="Life">Cycle de vie de l'arborescence
    des ports</a></font></h3>

<p>
L'arborescence des ports, comme le reste d'OpenBSD, change constamment.

<p>
L'arborescence courante des ports <strong>ne devrait pas</strong> être
employée avec la version finale précédente. Ceci est dû aux changements,
typiques du processus de construction du port, qui exigent du code basé
sur l'arborescence courante des sources d'OpenBSD.

<p>
L'arborescence des ports fonctionne comme une seule entité. Le
fonctionnement de la mise à jour d'un seul répertoire n'est pas garanti,
car les dépendances du logiciel peuvent vous forcer à mettre à jour et
recomplier de vastes parties de l'arborescence des ports. Il est
fortement conseillé aux gens de ne pas suivre les ports courants à
moins qu'ils soient préparés à traiter des problèmes variés. Des <a
href="mail.html">listes de discussion</a> comme
<code>ports-changes@openbsd.org</code> ou <code>tech@openbsd.org</code> seront
probablement d'une valeur inestimable.

<p>
Vous êtes invités à utiliser les ports stables sur une machine de
production : nous essaierons de garder l'arborescence des ports stables
à jour en prenant en compte les problèmes, et également de fournir les mises
à jour de binaires opportunes.

<p>
Notez que la suppression des "distfiles" n'est pas un problème, car
ftp.openbsd.org contient le dépôt complet. Même le changement des
"cheksums" n'est pas un problème : vous pouvez utiliser la commande

<pre>
        make checksum REFETCH=true
</pre>
pour vous assurer de saisir la "distfile" correcte pour votre
arborescence des ports. Pour des définitions de <i>current</i> et
de <i>stable</i>, voir la <a
href="../faq/fr/upgrade-minifaq.html#1.1">Mini-FAQ de mise à
niveau</a>.


<p>
Une liste des <a href="../portsplus/index.html">changements
quotidiens</a> des ports et des ports-current est disponible.

<p>
L'arborescence des ports-courrants peut être retrouvée via :

<ul>
<li><a href="anoncvs.html">CVS anonyme</a> (voir le lien). La commande
    est essentiellement <strong>cvs get ports</strong>.
<li>FTP anonyme à partir de
    <a href="ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/ports.tar.gz">ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/ports.tar.gz</a>.
    Ces archives sont mises à jour la nuit.
<li><a href="cvsup.html">CVSup</a>. Voyez l'exemple pour l'usage de
    CVSup dans le <a href="cvsup.html#checkout">mode checkout</a>.
<li> Votre navigateur web en utilisant l'<a href="http://www.openbsd.org/cgi-
bin/cvsweb/ports/">interface web de CVS</a>. </ul>

<h3><font color="#0000e0"><a name="XFree86">Ports et
    XFree86</a></font></h3>

Il y a quelque chose de magique dans les fichiers de configuration
Xfree86 d'OpenBSD qui permet à l'arborescence des ports
d'installer des applications basées sur "imake" dans /usr/local.

<p>
A partir de la version 2.9, OpenBSD est livré avec XFree86 4.0.3. Si vous
utilisez une révision précédente, avec des binaires XFree86 du
projet XFree86, vous pourriez devoir appliquer le "patch" de
<code> /usr/ports/infrastructure/patches/patch-xfree-4.0</code> à la
distribution binaire par défaut de XFree86 4.0.x afin qu'elle puisse
fonctionner avec l'arborescence des ports d'OpenBSD.


<h3><a name="Example"></a><font color="#0000e0">Exemple d'utilisation de
    l'arborescence des ports</font></h3>

<p>
Disons que vous prevoyez d'obtenir un arborescence des ports et de
compiler, installez l'utilitaire d'archivage <strong>unzip</strong>.
Vous devriez pouvoir faire quelque chose comme ceci :

<pre>
    % cd /usr/ports/archivers/unzip
    % su
    # make
    # make install
    # exit
</pre>

Facile, non ? Particulièrement si on considère tout ce qui s'est produit
en arrière- plan :

<ul>
<li>Recherche des sources de unzip à partir d'un site ftp,
<li>Vérification de l'intégrité de l'archive des sources,
<li>Extraction des sources de unzip,
<li>Application des "patchs" spécifiques d'OpenBSD,
<li>Configuration et compilation du programme,
<li>Création d'un binaire dans /usr/ports/packages,
<li>Installation de ce logiciel.
</ul>

<p>
A partir d'OpenBSD 3.0, la majorité des ports construisent
automatiquement les packages pendant l'installation.

<p>
Quand les ports sont construits, le répertoire /usr/ports/distfiles est
contient les sources des programmes, et /usr/ports/packages contient les
binaires. Les utilisateurs dotés d'une connexion à faible débit peuvent
se référer à
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mirroring-ports&amp;sektion=7&amp;format=html">mirroring-ports(7)</a>
pour saisir immédiatement d'une manière efficace tous les "distfiles".
Dans la version OpenBSD-current, vous pouvez employer le script
/usr/ports/infrastructure/fetch/clean-old
pour suivre les vieilles "distfiles". Notez que le CD d'OpenBSD
inclut seulement l'arborescence des ports et les packages choisis. Si
vous souhaitez avoir les "distfiles", vous devrez les obtenir d'une
manière indépendante.

<h3><font color="#0000e0"><a name="Advanced"></a>Utilisation avancée de
    l'arborescence des ports</font></h3>

<p>
L'arborescence des ports possède beaucoup de dispositifs pour
l'utilisateur avancé qui seront de précieux outils au delà de
l'installation de base. Les utilisateurs avancés peuvent souhaiter
trifouiller dans les fichiers "makefile" (vous devriez d'abord lire la
page
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a>
du manuel) ou assigner diverses variables à partir de la ligne de
commande ou bien dans <tt>/etc/mk.conf</tt>. Ces variables sont décrites
en détail dans la page
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bsd.port.mk&amp;sektion=5&amp;format=html">bsd.port.mk(5)</a>
du manuel et dans les documents "porting" ci-dessous.

<h3><font color="#0000e0"><a name="Create">Créer de nouveaux
    ports</a></font></h3>
<p>
Si vous aimeriez participer à l'augmentation de l'arborescence des ports
d'OpenBSD, vous devriez d'abord lire <a
href="porting.html">porting.html</a>. Cette page fait référence au <a
href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/porters-
handbook/index.html"> FreeBSD Porter's Handbook</a> et aux conseils liés
à la politique spécifique d'OpenBSD.


<h3><font color="#0000e0"><a name="Lag"> Quand un port est en retard
    sur la version principale </a></font></h3>

<p>
La collection de ports est un projet volontaire. Parfois le projet n'a
simplement pas les ressources en développeurs pour maintenir tout à
jour. Les développeurs reprennent majoritairement ce qu'ils considèrent
comme intéressant et pouvant être testé dans leur environnement. Vos <a
href="goals.html#funding">donations</a> sont essentielles aux tests
multi-plateformes de ces ports.
</p>

<p>
Certains ports peuvent être en retard sur les versions principales pour
cette raison. La collection de ports peut récupérer une version d'un
programme de janvier tandis qu'une nouvelle version du programme a été
lancée par ses développeurs en mai, il y a trois mois. C'est souvent une
décision réfléchie ; la nouvelle version peut comporter des problèmes sur
OpenBSD, ce que le mainteneur essaie de résoudre, ou peut simplement
être en deçà de la version précédente : OpenBSD peut avoir des <a
href="goals.html">objectifs</a> différents de ceux des développeurs
d'autres projets, qui ont parfois comme conséquence des dispositifs et
des choix de conception ou d'exécution qui sont indésirables du point de
vue des développeurs d'OpenBSD. La mise à jour peut également être
remise à plus tard parce que la nouvelle version n'est pas considérée
comme cruciale.

<p>
Si vous avez cependant réellement besoin d'une nouvelle version d'un port, vous
devriez demander au <tt>MAINTENEUR</tt> du port sa mise à jour (voir <a
href="#Help">ci-dessous</a> comment découvrir qui est le mainteneur); 
si vous pouvez envoyer des "patchs" pour ceci, c'est encore mieux. Pour
créer les "patchs" appropriés, vous devriez vous référer à la <a
href="porting.html">documentation de fabriquation des ports</a>.

<h3><font color="#0000e0"><a name="Help">Problèmes et
    contacts</a></font></h3>

<p>
Si vous avez des ennuis avec un port existant, envoyez s'il vous plait
un e-mail au mainteneur. Pour voir qui est le mainteneur du port,
essayez par exemple :
<pre>
       % cd /usr/ports/archivers/unzip
       % make show MAINTAINER
</pre>

Alternativement, s'il n'y a pas de mainteneur ou si vous ne pouvez pas
le/la joindre, envoyez un mail à la liste de discussion des ports
d'OpenBSD, <a href="mailto:ports@openbsd.org">ports@openbsd.org</a>.
Veuillez ne pas utiliser la liste de discussion misc@openbsd.org pour
des questions au sujet des ports. Les corrections sont toujours les
bienvenues, si vous fournissez :
<ul>
<li>La sortie de <code>uname -a</code>,
<li>Votre version d'OpenBSD, y compris tous les "patchs" que vous avez
    pu appliquer,
<li>Une description complète du problème.
</ul>
Pour les ports qui ne compilent pas correctement, une transcription
complète est presque toujours exigée. Pour ceci, vous pouvez employer le
script de "portslogger", trouvé dans /usr/ports/infrastructure/build.
Une utilisation de "portslogger" pourrait être :

<pre>
       % cd /usr/ports/archivers/unzip
       % su
       # mkdir -p ~/portslogs
       # make clean install 2>&amp;1 | /usr/ports/infrastructure/build/portslogger \
               ~/portslogs
</pre>

Après ceci, vous devriez avoir un fichier de logs de compilation dans
votre dossier ~/portslogs que vous pouvez envoyer au "maintainer" du
port. En outre, assurez-vous que vous n'employez aucune option spéciale
dans votre compilation, par exemple dans /etc/mk.conf.

<p>
Alternativement, vous pouvez
<ul>
<li>Utiliser
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=script&amp;sektion=1&amp;format=html">script(1)</a>
    pour créer une transcription complète. N'enlevez pas les
    informations de configuration.
<li>Attacher la sortie de  
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&amp;sektion=1&amp;format=html">pkg_info(1)</a>
    si elle semble appropriée même à distance.
<li>Les erreurs internes du compilateur 
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1&amp;format=html">gcc(1)</a>
    vous demandent de rapporter le bogue à la liste de discussion de gcc.
    Suivre leurs directives vous épargnera du temps, et fournissez
    au moins les fichiers divers produits par <tt>gcc -save-temps</tt>.
</ul>

<hr>
<a href="index.html"><img height=24 width=24 src=../back.gif border=0 alt=OpenBSD></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>
Originally [OpenBSD: ports.html,v 1.80 ]<br>
$Translation: ports.html,v 1.12 2004/11/21 13:19:01 aanriot Exp $<br>
$OpenBSD: ports.html,v 1.12 2004/11/21 17:11:57 jufi Exp $
</small>

</body>
</html>
