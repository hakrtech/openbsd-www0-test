<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD-current changes</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD-current changes">
<meta name="keywords" content="openbsd,current,changes">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2002 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color=#e00000>OpenBSD 3.2 到 OpenBSD-current 的更新記錄</font><hr></h2>

<p>
這是一份有關跨平台程式碼的更新記錄。(也是人們最常詢問的更新記錄)。
我們有時會在個別的<a href="plat.html">平台</a>上提及與個別 Port 相關的更新記錄。

<p>
對於 <a href="ports.html">ports</a> 集的更新記錄，都在記載在<a href="portspl
us/index.html">這裡</a>。

<p>
注意: <font color=#e00000>已經有相關程式碼修正的會以紅色標記</font>。

<p>
<h3>
其他正式釋出版相關的更新記錄，請點選以下各版本號碼:<br>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>.
<br>
</h3>

<p>
<h3><font color=#0000e0>我們目前正在處理 OpenBSD-current 版本</font></h3><p>
以下的列表(幾乎)包含了所有截至十一月二號的更新記錄。
<p>

<ul>
<li>Do a better job when comparing dynamic addresses in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> AF macros, operate on the whole address (all 128 bits) unless AF_INET is set.
<!-- ^ 20021102 -->
<!-- ^ 20021101 -->
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=perl&sektion=1">perl(1)</a>'s MakeMaker so manpages get installed the way we like.
<li>Plug a memory leak in IPv6 (ip6_output.c)
<!-- ^ 20021031 -->
<li>Make sure processes aren't added to the process list until they're completely initialised.
<li>Implement some 4.3BSD emulation functions in terms of setresuid() etc.
<li>Use the new setresuid() etc. calls for FreeBSD, HP-UX and Linux emulation of the same calls.
<li>Implement <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setresuid&sektion=2">[gs]etres[gu]id(2)</a> system calls. Minor version bump for libc and libc_r.
<li>Many fixes to signal and fd handing under threads.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> interface expansion.
<!-- ^ 20021030 -->
<li>Better GRE output from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&sektion=8">tcpdump(8)</a>.
<li>New -U option to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&sektion=8">chroot(8)</a> that sets the uid, gid and group vector from the password database.
<li>To a chorus of approval, add the 'set require-order [yes|no]' option to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&sektion=5">pf.conf(5)</a>.
<!-- ^ 20021029 -->
<li>Remove a bogus test in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&sektion=1">dd(1)</a> that stopped a perfectly legal seek on a character device.
<li>Merge OpenSSL 2.2.18, fixing a cross-site scripting bug and two off-by-ones.
<li>Add a missing break statement in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&sektion=1">systrace(1)</a>'s arguments parsing code.
<!-- ^ 20021028 -->
<li>Add getdents64() support under Linux emulation.
<li>Merge in Perl 5.8.0.
<li>Have pool elements' sizes rounded up to the alignment passed to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pool_init&sektion=9">pool_init(9)</a> instead of relying on the architecture's ALIGNBYTES value.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&sektion=4">wi(4)</a> can now do pointless-but-common WEP encryption in software for Prism and Symbol cards. Useful if your card doesn't do weak IV avoidance (or if you trust your BSD more than your hardware manufacturer,) and also serves as a framework for better wireless crypto protocols.
<li>The installer unpacks siteXX.{tgz,tar.gz} files last so that site-specific tarballs always overwrite standard files.
<li>Remove the error-prone and robustness-principle-defying 'flags X' (as opposed to 'flags X/Y') syntax from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>
<li>Be a little less 32-bit-centric in libcrypto.
<!-- ^ 20021027 -->
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route6d&sektion=8">route6d(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rtsold&sektion=8">rtsold(8)</a> use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=poll&sektion=2">poll(2)</a> instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=select&sektion=2">select(2)</a> as well.
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=atoi&sektion=3">atoi(3)</a> to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=strtoul&sektion=3">strtoul(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route6d&sektion=8">route6d(8)</a>.
<!-- ^ 20021026 -->
<li>Change a number of header files so NULL is now defined as 0L instead of 0, and so is the same size as a pointer.
<li>Add to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&sektion=8">chroot(8)</a> the ability to set the uid, gid and group vector after doing the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&sektion=2">chroot(2)</a> call.
<li>Some additional paranoia added to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&sektion=8">authpf(8)</a>.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> test rule labels as well when comparing rules.
<li>Fix a few instances where %ul was used instead of %lu.
<!-- ^ 20021025 -->
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=poll&sektion=2">poll(2)</a> instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=select&sektion=2">select(2)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping6&sektion=8">ping6(8)</a>
<li>More picky argument parsing in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute6&sektion=8">traceroute6(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping6&sektion=8">ping6(8)</a>.
<!-- ^ 20021024 -->
<li>A couple of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmpnam&sektion=3">tmpnam(3)</a>s become <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkstemp&sektion=3">mkstemp(3)</a> in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8">httpd(8)</a>.
<li>Lots of int -> u_long in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute6&sektion=8">traceroute6(8)</a>.
<!-- ^ 20021023 -->
<li>Correct an off-by-one in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&sektion=4">wi(4)</a>.
<li>Fix a printf format string typo in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> apply the netmask to addresses right away, so bogus netmasks show up as munges network numbers in -v output.
<!-- ^ 20021022 -->
<li>Correct a couple of typos in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>'s ioctl() code.
<li>Fix a null deref in libc_r.
<li>Make sure the user process tally is right when kernel stack space can't be allocated for the new proc.
<li>Correctly count the total number of processes in the system.
<li>Fix a remotely exploitable buffer overflow in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kadmind&sektion=8">kadmind(8)</a>.<br>
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<!-- ^ 20021021 -->
<li>Add partial support for the 21145 chip to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&sektion=4">dc(4)</a>.
<!-- ^ 20021020 -->
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xconsole&sektion=1">xconsole(1)</a> get a pseudoterminal using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=openpty&sektion=3">openpty(3)</a> instead of going all #ifdef.
<li>More NULL -> (void *)NULL, this time in XFree, to make sure varargs sentinel is pointer-width.
<!-- ^ 20021019 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pax&sektion=1">pax(1)</a> now honours @LongLink, and has a new option to stop the next volume prompt.
<!-- ^ 20021018 -->
<li>Improved media support and a boundary check fix for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&sektion=4">wi(4)</a>.
<li>Have <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&sektion=8">route(8)</a> correctly interpret -prefixlen 32 (or 128 for IPv6) network as a host route.
<li>Enable uvm_tree_sanity() check #ifdef DEBUG.
<li>Fix a potential null deref in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&sektion=8">route(8)</a>'s arguments parser.
<li>Renumber <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ch&sektion=4">ch(4)</a> CHIO* ioctls. Old definitions renamed to OCHIO*, binary backwards compatibility will be left in intact until post-3.3.
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kdump&sektion=1">kdump(1)</a> to print AUDIO_* ioctls, and add a few missing syscall defines.
<li>Support <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fxp&sektion=4">fxp(4)</a> on big-endian architectures.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> allows protocols to be specified by a (valid) protocol number.
<li>Add a missing free() in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflogd&sektion=8">pflogd(8)</a>.
<!-- ^ 20021017 -->
<li>Treat manually- and auto-configured IPv6 address prefixes the same way.
<li>For positively POSIX reasons, implement <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isfdtype&sektion=3">isfdtype(3)</a>.
<li>Bring <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pax&sektion=1">pax(1)</a>'s date handling code back into sync with that in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=date&sektion=1">date(1)</a>. Four digit years parse now.
<li>Start to break out machine-dependent parts of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=MAKEDEV&sektion=8">MAKEDEV(8)</a> into separate files.
<li>Send <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&sektion=1">ksh</a>.kshrc label() and ilabel() output to /dev/tty insted of stdout, so command output streams doesn't get messed up.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&sektion=1">systrace(1)</a> supports system call-granularity privilege elevation!
<li>Correct a typo in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&sektion=1">systrace(1)</a> that was causing group predicates to be evaluated incorrectly.
<li>Range-check values given to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=atactl&sektion=8">atactl(8)</a>.
<li>Better mask comparison for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> binat.
<!-- ^ 20021016 -->
<li>Remove the setuid bit from <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login&sektion=1">login(1)</a>. If run with a non-root euid, it invokes <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&sektion=1">su(1)</a> with the new -L flag.
<li>Add '-L' flag to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&sektion=1">su(1)</a> to make it work like <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login&sektion=1">login(1)</a>.
<li>Enable the META key in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&sektion=1">ksh(1)</a> for 7-bit locales.
<li>Make sure some varargs end-of-list sentinel NULLs are pointer-width.
<li>Fix a subtle dangling pointer bug in BSD auth.
<li>Sync Brazil's Daylight Savings Time handling with new reality.<br>
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=makewhatis&sektion=8">makewhatis(8)</a> grumbling about having Perl 5.8.x instead of 5.6.x.
<!-- ^ 20021015 -->
<li>In the X server, work around problems caused by certain MTRR configurations whose details are only available under NDA.
<li>Kernel tweaks and hacks in preparation for GCC 3.x (kern/subr_prf.c)
<li>Some fixes in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pool&sektion=9">pool(9)</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> can now binat a whole netblock with one rule.
<!-- ^ 20021014 -->
<li>Remove a potential null pointer deref in BSD authentication code.
<li>Fix a bad printf format string in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8">ftpd(8)</a>. Non-critical because it's only ever fed by parts of the authentication system which sanitise the input first.
<li>Do some more unsigned checks to system call parameters, as with the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=setitimer&sektion=2">setitimer(2)</a> <a href="http://www.openbsd.org/errata31.html#kerntime">erratum</a>.<br>
    <a href="stable.html"><font color=#00b000>[Applied to stable]</font></a>
<!-- ^ 20021013 -->
<li>Prepare the GNU floating-point emulation code on i386 for ELF.
<!-- ^ 20021012 -->
<li>Update <a href="stable.html">stable</a> to OpenSSH 3.5.
<li>Catch some endianness nits and add zero-padding of keys in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&sektion=4">wi(4)</a>.
<li>Teach ALTQ CBQ the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> API. The old API remains for now.
<!-- ^ 20021011 -->
<li>Fix memory corruption that could cause panics in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bridge&sektion=4">bridge(4)</a>d systems with scrub enabled.
<li>Fix a bug in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mbuf_tags&sektion=9">m_tag_copy_chain()</a>.
<!-- ^ 20021010 -->
<li>Hush up noisy IPv6 neighbor discovery. Can be made loud again using sysctl net.inet6.icmp6.nd6_debug.
<!-- ^ 20021009 -->
<li>In Sendmail, fix a potential bypass of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smrsh&sektion=8">smrsh(8)</a> (see the Sendmail.org <a href="http://www.sendmail.org/smrsh.adv.txt">advisory</a>.)
<li>Make predicates part of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&sektion=1">systrace(1)</a>'s grammar.
<!-- ^ 20021008 -->
<li>Start work on a merge of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=altq&sektion=9">altq(9)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> functionality. Oh yes.
<li>Add a missing htons() in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=talkd&sektion=8">talkd(8)</a>.
<li>In pmdb, fix a crash that occurred when an attempt to set a breakpoint failed.
<li>Support SA_RESETHAND support to libc_r, in preparation for SA_SIGINFO support.
<li>Merge in Apache 1.3.27 and mod_ssl 2.8.11.
<li>New block-policy option to set the default response to a block rule.
<li>More rulebase reduction: "block return ..." now does The Right Thing, RST for TCP, ICMP for UDP, silent block otherwise.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> support for icmpv6 returns in response to block rules.
<li>New reply-to rule option for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>, works like route-to but applies to reply packets in a stateful connection.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8">httpd(8)</a> restarts work even when srm.conf is not present.
<li>Have the X server complain less about unknown scancodes.
<!-- ^ 20021007 -->
<li>Initialise the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uvm&sektion=9">uvm</a>_pglistalloc result list in the function, instead of requiring the caller to do it.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslog&sektion=3">syslog(3)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslog_r&sektion=3">syslog_r(3)</a> now take the new __syslog__ format attribute.
<li>Make the default <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8">httpd(8)</a> config files use php4 instead of php3.
<!-- ^ 20021006 -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a> expands lists left-to-right instead of right-to-left.
<li>Teach <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> how to filter on the IP TOS field.
<!-- ^ 20021005 -->
<li>Fix list handling problem in ALTQ CBQ that showed up with three or more CBQ instances.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd&sektion=8&release=OpenBSD+3.2">smtpd(8)</a> has left the building.
<li>By default, add the -H option to the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sort&sektion=1">sort(1)</a> invoked by <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=locate.updatedb&sektion=8">locate.updatedb(8)</a>.
<li>Give <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=window&sektion=1">window(1)</a> the stdarg treatment.
<li>When routing via <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>, use the outgoing interface as decided by the normal routing code, not the interface to which the rule applies.
<li>Fix cross-site scripting vulnerability (<a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2002-0840">CAN-2002-0840</a>) in the default error page of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8">httpd(8)</a>. Only applies under specific (and non-OpenBSD default) conditions.
<!-- ^ 20021004 -->
<li>In kernel IP processing, block interrupts with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=splsoftnet&sektion=9">splsoftnet(9)</a> around interface address routing table manipulations.
<li>Make sure <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&sektion=4">wi(4)</a> doesn't accept out-of-range TX keys.
<li>Stop <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ami&sektion=4">ami(4)</a> matching I2O-configured devices.
<li>3.2 -> 3.2-current.
<!-- ^ 20021003 -->
</ul>
<p>

這個列表提及了大部份跨平台相關的更新記錄。請依照你所要查詢的平台點選相對應
的網頁。假如你找不到所要查詢的平台，可能是 (1) 這個更新未被記錄下來，
或者是 (2) 這個更新記錄在這裡。<br><br>

<hr>
<p>
<h3>
其他發行版本的更新記錄，請點選以下網頁:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src="../back.gif" border=0 alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>
Originally [OpenBSD: plus.html,v 1.849 ]<br>
$Translation: plus.html,v 1.1 2003/06/18 17:03:14 sjhuang Exp $<br>
$OpenBSD: plus.html,v 1.1 2003/06/21 12:24:00 jufi Exp $
</small>

</body>
</html>
