<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD/powerpc</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD/powerpc page">
<meta name="keywords" content="openbsd,ppc,powerpc,mac,macintosh,apple">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2000 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">
<img border="0" alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif">
<p>
<h2><font color="#e00000">powerpc</font><hr></h2>

<h3><font color="#0000e0">History:</font></h3>

<p>
The powerpc port was first imported into OpenBSD at the end of 1996.
Portions of the kernel port came from the NetBSD/macppc port, and the
userland and build ports came from <a href="drahn@openbsd.org">Dale Rahn</a>.

<p>
Dale added ELF binary support, and then work with Per Fogelstrom
continued on general driver support for the next few releases.
Support was added for OpenFirmware, VI Power4e boards, MCG Powerstack
machines, Dec 21040, VGA terminal support, and so on.

<p>
In 1998, the focus shifted towards the Apple machines, and Dale Rahn
started work to make the range of iMacs and PowerMacs work with this port.
Due to this, official powerpc releases were not made for the 2.6 and 2.7
releases as work continued.  A number of compiler loader issues were resolved,
a lot of iMac driver support was added, and compatibility with older systems
was withdrawn to fully concentrate on the Apple machines.  

<p>
And now, the 2.8 release at the end of 2000 will be including
an official powerpc port.

<h3><font color="#0000e0">Supported Hardware:</font></h3>
<p>
Currently only New World machines are supported. Tested working machines
are the iMac machines Rev A - Rev C, and the PowerMac G4 systems including
the Cube.  To improve the list below, <b>please</b> mail your dmesg after 
installation to <a href="mailto:dmesg@openbsd.org">dmesg@openbsd.org</a>,
as detailed <a href="http://www.openbsd.org/faq/faq4.html#4.5">in the FAQ</a>.

<p>
<b>Machines</b>
<ul>
<li>PowerMac G4
<li>iMac Rev A - Rev C
<li>iMac DV/DV+ (untested but expected to work)
</ul>

<p>
<b>Onboard I/O modules</b> (obio)
<ul>
<li>Apple Paddington
<li>Apple Keylargo
</ul>

<p>
<b>PCI-Bridges</b>
<ul>
<li>Apple Uni-North (pchb)
<li>Apple Uni-North AGP (pchb)
<li>Apple Uni-North Eth (pchb)
<li>Motorola MPC106 Host-PCI
</ul>

<p> 
<b>Video Cards</b>
<ul>
<li>ATI Rage Fury AGP4x
<li>ATI Mach64 GP
</ul>

<p><b>Ethernet</b>
<ul>
<li>DEC DECchip 21040 (Tulip) (de)
<li>Apple GMAC (gm0)
<li>Generic IEEE 802.3u media interface (ukphy)
</ul>
 
<p><b>Hard Drive</b>
<ul>
<li>Maxtor 52732U6 (wd)
<li>WDC AC26400R (wd)
<li>WDC AC36400L (wd)
<li>IBM-DPTA-371020 (wd)
<li>Quantum Fireball ST4300A (wd)
</ul>

<p><b>ATAPI Drives</b>
<ul>
<li>Matshita PD-2 LF-D110, A110, SCSI0 5/cdrom removable (cd)
<li>Matshita CD-ROM CR-175, 5ADF, SCSI0 5/cdrom removable (cd)
<li>Iomega Zip 100, 04.H, SCSI0 0/direct removable (sd)
</ul>
 
<p><b>SCSI Host Adapters</b>
<ul>
<li>Symbios Logic 53c810 (ncr)
</ul>

<p><b>SCSI Storage</b>
<ul>
<li>Yamaha CRW6416S, 1.0b, SCSI2 5/cdrom removable  (cd)
<li>Seagate ST31230W, 0660, SCSI2 0/direct fixed (sd)
</ul>

<p><b>USB Controllers/Hubs</b>
<ul>
<li>Apple USB (ohci)
<li>OHCI root hub (ohci)
<li>Opti RM861HA (ohci)
<li>Alps Electric Hub in Apple USB Keyboard
</ul>
 
<p><b>USB Devices</b>
<ul>
<li>Alps Electric Apple USB Keyboard (ukbd)
<li>Solid Year Keyboard and Mouse (ukbd) (ums)
<li>Logitech M4848 (ums)
<li>Kensington Kensington USB/PS2 Wheel Mouse (ums)
</ul> 

<hr>
<p>
<a name="#unsup"><h3><font color=#0000e0>Unsupported Hardware:</font></h3>
<ul>
<li>
Support for older PREP style machines have been removed; lack of availability
of the hardware and relatively slow speed compared to more recent machines has
contributed to this decision.
<li>
Apple PowerMac systems with a 601 processor or lack OpenFirmware
will likely never be supported. 
<li> 
At the current time, older OpenFirmware machines are not supported.
This is mostly due to lack of developer resources to work on the support
in addition to limited availability of hardware.
<li>On the device side, the following are recognized, but not supported:
<ul>
<li>Texas Instruments TSB12LV23 FireWire
</ul>
</ul>

<h3><font color="#0000e0">Root Drive:</font></h3>
<p>
With multiple drives installed in the system, only certain drives can
be configured as an OpenBSD root drive.  Any other configurations than
those below will not be able to properly detect which drive is the root
drive, and so any attempt with either prompt for a root drive, or fail.
<p>
<ul>
<li><tt>ultra0</tt> is always fine to use as an root drive.
<li><tt>ultra1</tt> is fine to use as a root disk (as long as <tt>ultra0</tt> 
is a hard drive, not ATAPI).
<li>If no hard drive is located at <tt>ultra1</tt>, it is possible to use a 
hard drive configured as <tt>ide1</tt> (zip bay) as root drive. 
<li>It is not possible to use <tt>ide0</tt> (CD-ROM) as a root drive unless 
no drives are connected to the Ultra IDE bus.
</ul>

<h3><font color="#0000e0">X Resolution:</font></h3>
<p>
The current X server has no mechanism to change the resolution
of the display. To change the resolution, it is necessary to boot MacOS
and change to the desired resolution under MacOS. It will save that
resolution and OpenFirmware will boot in that resolution until connected
to a different monitor. The X server will run in whatever resolution
OpenFirmware boots in.

<hr>
<p>If you are looking for to test new pre-release features, you can 
try one of the snapshots. 
For the powerpc architecture, <a href="ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/powerpc">snapshots</a> are made available from time to time.
<p>

Contact
<a href="mailto:deraadt@openbsd.org">Theo de Raadt</a> or
<a href="mailto:drahn@openbsd.org">Dale Rahn</a> 
if you are interested in working with other people on this, or need more
information.
</p>

<hr>
<a href="plat.html"><img height="24" width="24" src="back.gif" border="0" alt="[OpenBSD]"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: powerpc.html,v 1.25 2000/10/27 06:49:23 deraadt Exp $</small>

</body>
</html>
