<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD/i386 Laptop Page</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD laptop">
<meta name="keywords" content="openbsd,main">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1997,1998 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">
<img alt="[OpenBSD]" height=30 width=141 SRC="images/smalltitle.gif">
<p>
<h2><font color=#e00000>i386 Laptop Status</font><hr></h2>

<p>
This is a list of laptops known to be working with OpenBSD 2.8

<p>
If your laptop isn't listed below that doesn't mean that it isn't working,
and you will most likely find a similar model that is listed below.  Starting
with OpenBSD 2.6, almost all laptops worked very well, with only minimal
issues remaining.  Later OpenBSD releases perform even better.
<p>
Of those that have problems..
<ul>
<li>Some exhibit problems with APM support.  Note that <strong>apm -S</strong>
    fails to suspend some laptops, but this is not a major concern.
<li>Some lack sound support
<li>A few have subtle bugs with their PCMCIA and Cardbus support
<li>XFree86 does not support some displays properly.  Sometimes XFree86 4.x helps.
<li>Or some other built-in device doesn't work..
<li>Some have problems with pcmcia card eject interrupts.
</ul>

<p>
If you have your laptop working (or not working) and it isn't listed below,
please mail <a href="mailto:www@openbsd.org">www@openbsd.org</a> so that it
can be listed.  Please supply as much information as possible.

<p>
APM problem reports should be sent to our APM developers,
<a href=mailto:mickey@openbsd.org>Michael Shalayeff</a> and
<a href=mailto:weingart@openbsd.org>Tobias Weingartner</a>.

<p>
<table border=1>
<tr>
	<th>Laptop</th>
	<th>Notes</th>
</tr><tr>
    <td>
	Sony VAIO F430
    </td><td>
        As of OpenBSD 2.6-Current (Feb 17/00)<P>
 
	APM: "<strong>zzz</strong>" suspend works, as does the keyboard
	suspend. "<strong>halt -p</strong>" and "<strong>apm -S</strong>" 
	don't. (but I've yet to look for phdisk utilities below - will be
	investigating shortly.) <P>

	DVD drive, floppy all function. Ethernet works after wakeup with
	the card I'm using (3Com 3c589). <P>
	
	Contact <a href=mailto:beck@openbsd.org>Bob Beck</a>.
    </td>
</tr><tr>
    <td>
	Sony VAIO z505r
    </td><td>
	APM support: "<strong>zzz</strong>", suspend via keyboard, hibernation
	via keyboard, and "<strong>halt -p</strong>" all work.
	"<strong>apm -S</strong>" wakes up immediately.<p>

	Hibernation uses a block at the end of the disk, approximately
	3-5MB larger than the memory in your machine.  To repair hibernation,
	use "<strong>phdisk.exe /create /partition</strong>" to setup the
	partition.  The phdisk program is available on the boot
	floppy image provided on the first recovery CD.<p>

	Built-in ethernet works fine, but occasionally requires reset
	after suspend using
	"<strong>ifconfig fxp0 down; ifconfig fxp0 up</strong>".<p>

	After a suspend, the profiling clock is not running.  Patches are
	being worked on.<p>

	Sound is supported using the neo(4) device driver.  Sometimes upon
	boot, a hang happens when trying to determine the AC97 mixer type.<p>

	When the memory stick slot is empty, it can cause errors which overflow
	the dmesg buffer, and thus confuse the OpenBSD install program.
	The BIOS Setup, (accessed using F2), has an option to disable the
	memory stick.<p>

	An XF86Config file suitable for use with  XFree86 3.3.X may be
	found <a href="xf86configs/vaioz505r">here</a>.
	<p>

	Contact <a href=mailto:deraadt@openbsd.org>Theo de Raadt</a>.
    </td>
</tr><tr>
    <td>
	Sony VAIO z505s
    </td><td>
	Similar to the VAIO z505r, except that the provided USB floppy has
	some problems.<p>
	Contact <a href=mailto:provos@openbsd.org>Niels Provos</a>.
    </td>
</tr><tr>
    <td>
	Sony VAIO 747</td>
    </td><td>
	Ever since OpenBSD 2.6, XFree86 and APM do work.<p>

	Ships with a PCMCIA modem card (COM One MCC220 Platinium Card), which works.<p>

	Sound works (8 bit only).<p>

	APM behaviour similar to the VAIO z505r,
	except that hibernation has not been tested.<p>

	USB does not work.<p>

	An XF86Config file can be found
	<a href="xf86configs/vaio747">here</a>.<p>

	Contact <a href=mailto:markus@openbsd.org>Markus Friedl</a>.
    </td>
</tr><tr>
    <td>
	Sony VAIO PCG 505-FX
    </td><td>
	Unknown.
    </td>
</tr><tr>
    <td>
	IBM Thinkpad 701C
    </td><td>
	All features including hibernation and APM work.<p>

	Contact <a href=mailto:todd@openbsd.org>Todd Fries</a>.
    </td>
</tr><tr>
    <td>
	IBM Thinkpad 770Z
    </td><td>
	<p>As of OpenBSD 2.8, almost everything works fine.</p>

	<p>This laptop does not really have a BIOS; most of the device
	settings, like IRQ assignements etc. have to be done through
	Windows.</p>

	<p>You can get the serial and infrared ports to be recognized
	as com* devices by playing with the IRQ assignments in
	Windows. Likewise for the parallel port (it's lpt2).</p>

	<p>You will need this line in your kernel configuration file for
	APM to work at all:</p>

<pre>
option         APM_DISABLE_INTERRUPTS=0
</pre>

        <p>Hibernation (save to disk) works fine as long as you have a
        Windows partition with enough disk space (a bit more than the
        system memory). Suspend/resume/powerdown all work fine;
        however, doing hibernation while in X windows (tested in
        XFree86 3.3.6) causes framebuffer corruption and it seems that
        the only way to recover is to exit and restart the X server;
        switching virtual terminals doesn't fix it. It has been
        suggested that switching between different resolutions might
        fix it. XFree86 4.0 fixes that problem, but last I checked did
        not have accelerated support for the driver. The best
        work-around is to switch to text mode before hibernating.</p>

	<p>If you enable the external monitor (Fn+F7), XFree86 3.3.6
	goes into some weird rainbow pattern and eventually freezes
	the system (unless you switch to text mode or otherwise kill
	the server within a few seconds); if you switch to text mode,
	you have to kill the X server (switching back to graphics mode
	will cause a crash). Enabling the external monitor while in
	video mode causes no side effects; you can then start X or
	switch to it if it's already running.</p>

	<p>The clcs driver is somewhat flakey, so you're best off
	disabling it.  It doesn't really matter though since the
	soundblaster (sb) will attach and work fine. You may have to
	play with IRQ assignments to get that to work.</p>

	An XF86Config file can be found
	<a href="xf86configs/thinkpad770z">here</a>.<p>

	Contact <a href=mailto:angelos@openbsd.org>Angelos Keromytis</a>.
    </td>
</tr><tr>
    <td>
	IBM Thinkpad A21p
    </td><td>
	See the entry for the T21. Everything is the same except for
	the video card, which is an ATI Rage 128 Mobility LF. OpenBSD
	2.8 post mid-December with XFree86 4.0.2 works great at
	1600x1200 24bpp. You need to:
	<pre>
		sysctl -w machdep.allowaperture=2
	</pre>
	and enter the correct frequency ranges in the Monitor section
	of XF86Config. Here's a sample working
	<a href="xf86configs/thinkpada21p">XF86Config.</a>
    </td>
</tr><tr>
    <td>
	IBM Thinkpad T21
    </td><td>
	<p>As of OpenBSD 2.8, everything works fine.</p>

       <p>Here is the fdisk output; the easiest way of getting there is
       to resize the Windows partition (I use PartitionMagic) and move
       it to the end of the disk, then create an OpenBSD partition
       (and ignore the partition resizing fdisk does -- just go ahead
       and create all the filesystems you need with disklabel).</p>

<pre>
         Starting        Ending
 #: id  cyl  hd sec -   cyl  hd sec [     start -       size]
-------------------------------------------------------------------------
 0: 1C 1023   1   1 -  1023 239  63 [  42003423 -   20502657] <Unknown ID>
*1: A6    0   1   1 -  1021 239  63 [        63 -   15452577] OpenBSD     
 2: 00    0   0   1 -     0   0   0 [         0 -          0] unused      
 3: 00    0   0   1 -     0   0   0 [         0 -          0] unused      
</pre>

	<p>To get it to see the serial and infrared ports (both as com*
	devices), you need to play with the IRQ assignments in the
	BIOS; just set them to the default values as found in the
	GENERIC config file. Likewise for the parallel port (OpenBSD
	can see lpt2). You may have to play with the Windows
	assignments for this as well.</p>

	<p>There's at least two miniPCI cards available at this point:
	one is an (unsupported) WinModem, and the other is a combo
	ethernet/modem card. The ethernet works just fine (detected
	as an fxp/inphy card); the modem looks like it's a real one,
	but it's not yet supported.</p>

	<p>Sound (CS4614) works fine. To avoid system freeze when using
	Cardbus and audio simultaneously, you *may* need to set at least
        two IRQs for use by PCI devices, in the BIOS; I use 9 and 11. It
	is also necessary to turn off PCI Power Management in the BIOS
	Power configuration (that's the only menu that scrolls, so make
	sure you go to the bottom of the page :-)</p>

	<p>APM works except for hibernation (requires OS support). To
	get "halt -p" to work, you must set the sysctl variable
	machdep.apmhalt to 1 (you need OpenBSD 2.8-current with
	sources from mid-January, or later).  You will need this line
        in your kernel configuration file for APM to work at all:</p>

<pre>
option         APM_DISABLE_INTERRUPTS=0
</pre>

	<p>Although the video card is supposed to work with XFree86
	3.3.6pl8, I've only managed to get it to work with XFree86
	4.0.1 with the patches found <a
	href="http://www.probo.com/timr/savagemx.html">here</a> (you
	can also find binaries of the driver for OpenBSD 2.8 at the
	same location). You need to have a kernel with "option
	INSECURE" and set the securelevel to -1 in /etc/rc.securelevel
	(so the X server can open /dev/mem and mmap() the BIOS). In
	this configuration, it can do 1400x1050 at 16bpp (version 1.1.13
	of the savage driver works fine at 24bpp as well).</p>

	<p><b>UPDATE:</b> The above-mentioned patches have been
	included in XFree86 4.0.2, and work out of the box. You don'
	need a kernel with the option INSECURE set, just set the
	machdep.allowaperture sysctl variable to 2, typically in
	/etc/sysctl.conf, if you have an OpenBSD 2.8 (or later) built
        from sources updated after December 15th 2000.</p>

	<p>Note that some models only do 1024x768. Those that do
	1400x1050, can also do 1600x1200 using a virtual screen
	(wherein the whole display shifts as you go "off-screen"); I
	have not tested whether that works (it does in Windows).</p>

	<p>If you close the lid of the laptop, the system suspends;
	under XFree86 4.0, resuming works fine with respect to the
	display (XFree86 3.3.6 might not be able to cope with this --
	it couldn't on the ThinkPad 770Z).</p>

	<p>An XF86Config file for XFree 4.0 can be found <a
	href="xf86configs/thinkpadt21">here</a>.</p>

	<p>One annoying thing is when you take out one of the UltraBay
	2000 devices; the system starts beeping. The only way to make it
	stop is to suspend and then plug in a device in the UltraBay (not
	necessarily the same one). Note that hot-swap of UltraBay 2000
	devices is not currently supported in OpenBSD (as of 2.8), thus
	it's only safe to hot-swap batteries.</p>

	<p>Contact <a href=mailto:angelos@openbsd.org>Angelos Keromytis</a>.</p>
    </td>
</tr><tr>
    <td>
	IBM Thinkpad 760
    </td><td>
	As of OpenBSD 2.6, XFree86 and APM do not work.<p>

	Newer versions of XFree86 support X, and patches are available.<p>

	MWave modem/sound does not work.<p>

	APM has been fixed post-2.6 as well, and patches are forthcoming.<p>

	Contact <a href=mailto:todd@openbsd.org>Todd Fries</a>.
    </td>
</tr><tr>
    <td>
	IBM Thinkpad T20
    </td><td>
	Running OpenBSD 2.7 (and later) apm mostly works.   To
	get "halt -p" to work, you must set the sysctl variable
	machdep.apmhalt to 1 (you need OpenBSD 2.8-current with
	sources from mid-January, or later).  The unit goes into
	suspend mode when top is closed.  Restores nicely
	when top opened.<p>

	Built in modem is a winmodem... ignore it.   Actually it is on
	a `mini-pci' card so it can probably be removed.<p>

	Audio works, but you have to turn off PCI sleep mode in the BIOS.<p>

	OpenBSD X11 supports this machine as of 2.8, but there is lots
	of visual noise at 32bpp.   Image is fine at 16 bpp.<p>

	See <a href="http://www.snafu.org/t20/">http://www.snafu.org/t20/</a>
	for more info.<p>

	Contact <a href=mailto:marc@snafu.org>Marco S Hyman</a>.
    </td>
</tr><tr>
    <td>
	Toshiba Libretto 50CT
    </td><td>
	APM works but you need to be careful not to use the last
	32meg or so of the disk since that's where the BIOS dumps
	the long time hibernation image.  You can take a look at
	the bios geometry in disklabel to see exactly how many sectors
	it wants.  Failure to do so will cause filesystem corruption
	during suspend.
	<p>
        The libretto uses a single IRQ for both <strong>sb</strong>
        and <strong>wss</strong> so the best thing to do is to
        choose one and disable the other in the kernel.
	The pcmcia external floppy drive is not currently supported
	by OpenBSD, but it can be used during the install.
	<p>
        Installation can be a bit tricky with only a single pcmcia
        slot.  The best way to do this is to do a network install.
        To do this, load the boot floppy and at the boot prompt,
        enter <em>boot -c</em>.  When you see the <em>UKC</em>
        prompt, unplug the floppy drive, plug in your network card,
        and then type exit.  The kernel will then probe the network
        card and you should be able to do a normal network install.
	You may find it necessary to disable the sound devices in
	the BIOS in order for the boot floppy to correctly detect
	your network card.
	<p>
	An XF86Config file suitable for use with  XFree86 3.3.X may be
	found <a href="xf86configs/libretto50ct">here</a>.
	<p>
	Contact <a href=mailto:millert@openbsd.org>Todd Miller</a>.
    </td>
</tr><tr>
    <td>
	Toshiba Libretto 100CT
    </td><td>
	Most of the information listed in the Libretto 50CT entry
	apply to the 100CT as well.
	<p>
	X11 works in 800x400 mode.  An XF86Config file suitable for
	use with  XFree86 3.3.X may be found
	<a href="xf86configs/libretto100ct">here</a>.
	<p>
	Contact <a href=mailto:millert@openbsd.org>Todd Miller</a>.
    </td>
</tr><tr>
    <td>
	Toshiba Portege 660CDT
    </td><td>
	APM is completely broken.<p>

	The mixed <strong>sb</strong> and <strong>wss</strong> sound
	hardware can cause some grief.  Newer versions of the flash
	BIOS are worse, since they are less flexible about what interrupts
	they allow.<p>

	Contact <a href=mailto:deraadt@openbsd.org>Theo de Raadt</a>.
    </td>
</tr><tr>
    <td>
	Digital HiNote VP735
    </td><td>
	APM works fully.<p>

	Everything on the machine works.<p>

	An XF86Config file suitable for use with  XFree86 3.3.X may be
	found <a href="xf86configs/hinotevp700">here</a>.
	<p>

	Contact <a href=mailto:mickey@openbsd.org>Michael Shalayeff</a>.
    </td>
</tr><tr>
    <td>
	Fujitsu Lifebook C325
    </td><td>
	APM works fully.<p>

	Sound works when the BIOS is told to activate SB emulation mode.

	Everything else on the machine works.<p>

	Contact <a href=mailto:tom@knienieder.com>Tom Knienieder</a>.
    </td>
</tr><tr>
    <td>
	Fujitsu Stylistic 500
    </td><td>
	APM works.<p>

	Serial port doesn't work.<p>

	Some tweaks needed for small memory kernel (4Mb).<p>

	X 'works' (thrashes like crazy). <p>

	Contact <a href=mailto:d@openbsd.org>David Leonard</a>.
    </td>
</tr><tr>
    <td>
	Siemens SCENIC Mobile 360
    </td><td>
	APM works fully.<p>

	Sound works, using OSS.<p>

	Contact <a href=mailto:b1000@softhome.net>Dan Carlsson</a>.
    </td>
</tr><tr>
    <td>
	Dell Inspiron 3200 D233XT (Bios release: A10)
    </td><td>
	APM works fully.<p>

	Suspend (to ram or disk) does not work under X (X server does not
	restore screen upon resume), but DPMS do (screen is turned off after
	a while if the machine isn't used).  BIOS APM settings (for automatic
	suspend) interfere with X server, and should be disabled.<p>

	Suspend to disk needs a DOS (FAT16) partition containing a file named
	"SAVE2DSK.BIN".  This file which is created via Dell tools under
	Windows 98 (it's present out of factory), is sized (ram size + 2 or 3
	MB).  An ad hoc DOS partition is thus required (it must be the first
	partition on disk).<p>

	PCMCIA: works except "live" card ejection or insertion (which lock
	the machine, a hard reset is required).<p>

	USB: does not work, if enabled, kernel hangs at boot during USB
	controller detection.<p>

	Contact <a href=mailto:b1000@softhome.net>Dan Carlsson</a>.
    </td>
</tr><tr>
	<td>
	   Toshiba Tecra 500CS
	</td><td>
	APM is broken, However it <b>halt -p</b> does work.<p>
	
	Sound works by default with the GENERIC kernel, but with the speakers
	is not really worth it. X runs nicely as well.<p>

	Contact <a href=mailto:ericj@monkey.org>Eric Jackson</a>.
	</td>
</tr><tr>
	<td>
	   Toshiba Tecra 500CDT
	</td><td>
	APM is completely broken (and can trash your disk).<p>

	XFree86 works (800x600 16bpp).<p>

	Sound works (21739 Hz, half duplex stereo).<p>

	<!-- Serial IR is said to work, needs verification. -->

	Contact <a href=mailto:brad@openbsd.org>Brad Smith</a>,
	or <a href=mailto:d@openbsd.org>David Leonard</a>.
	</td>
</tr><tr>
	<td>
	   Toshiba Tecra 550CDT
	</td><td>
	APM deep sleep (<b>zzz</b>) works, but <b>-S</b> wakes up immediately.<p>

	XFree86 works beautifully.<p>

	Sound works, after some IRQ tinkering in the BIOS.<p>

	USB works; at least, I plugged a digital camera in, and the <b>ugen</b> driver detected and configured it.<p>

	The built-in modem does not work since it requires software only available in Windows; that is, it does not implement a true RS232 communication port.<p>

	The pcic is broken in this machine, so I cannot accurately comment on PCMCIA attach/detach.<p>

	Contact <a href=mailto:aaron@openbsd.org>Aaron Campbell</a>.
	</td>
</tr><tr>
    <td>
	NEC Versa 2000
    </td><td>
	APM works fully.<p>

	Everything on the machine works.<p>

	Contact <a href=mailto:mickey@openbsd.org>Michael Shalayeff</a>.
    </td>
</tr><tr>
    <td>
        Acer TravelMate 345
    </td><td>
        As of OpenBSD 2.7-CURRENT, APM works.<p>

	XFree86 works (800x600 16bpp).<p>

	Sounds works.<p>

	Lucent modem does not work.<p>

	Contact <a href=mailto:kevlo@openbsd.org>Kevin Lo</a>.
    </td>
 </tr><tr>
    <td>
        Compaq Armada M700<p>
    </td><td>
	APM works correctly, but you cannot suspend while in X.  You
	must suspend from the console.

	CardBus works.<p>
  
	Internal 10/100 Ethernet (for those models that have it).
	Works beautifully with the fxp driver. <p>

	No sound support as of now.  People are supposedly working on
	this.<p>
  
	No internal modem support as of now.  (It's a winmodem.)
	There is a binary only driver for Linux.  There is also the
	<a href="http://linmodems.org">linmodem project</a> that is
	trying to make an opensource winmodem driver.<p>

	An XF86Config file can be found
	<a href="xf86configs/armadam700">here</a>.<p>

	Contact <a href=mailto:nate@openbsd.org>Nathan Binkert</a>.
    </td></tr>
</table>

<hr>
<a href=plat.html><img height=24 width=24 src=back.gif border=0 alt=OpenBSD></a> 
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br>
<small>$OpenBSD: i386-laptop.html,v 1.46 2001/02/19 16:02:34 angelos Exp $</small>

</body>
</html>
